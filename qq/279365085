PHTTP23.74.28.11"ê
CGET /www/js/qq2012/q_fin_4.2.1.js?ran=0.4827271453104913 HTTP/1.1
Host: mat1.gtimg.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36
Referer: http://www.qq.com/
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8

*¢®
HTTP/1.1 200 OK
Server: squid/3.2.1
(Content-Type: application/x-javascript
Vary: Accept-Encoding
Content-Length: 87467
.Last-Modified: Tue, 10 Jul 2012 08:00:40 GMT
ETag: "4ffbe128-155ab"
Accept-Ranges: bytes
Cache-Control: max-age=600
(Expires: Tue, 08 Apr 2014 22:25:52 GMT
%Date: Tue, 08 Apr 2014 22:15:52 GMT
Connection: keep-alive
­«
/*gb2312*/
/*http://mat1.gtimg.com/finance/js/du/201202131458/fn-core.js*
  http://mat1.gtimg.com/finance/js/du/201203191539/fn-core.js*/
(function(l){var c=l.__=l.__||{},p=/^[a-z0-9\-\.:_]+$/,q=/^http(s)?:\/\/|^\.|^\//,o=Array.prototype.slice;c.global=l;c.doc=l.document;c.topLayer=1;(function(){var a=c.global.navigator&&navigator.userAgent;c.ua={};if(a){c.ua.browser=true;if(/MSIE \d/.test(a))c.ua.ie=a.match(/MSIE (\d)/)[1];else if(/KHTML/.test(a))c.ua.webkit=true;else if(/Gecko/.test(a))c.ua.gecko=true;else if(/Opera/.test(a))c.ua.opera=a.match(/Opera\/([0-9.]+)/)[1]}})();c._isDebug=false;c.debug=function(a){this._isDebug=a===false?
false:true};c.isDebug=function(){return this._isDebug};c.each=function(a,b,d){var e;if(a)if(d)for(e in a)a.hasOwnProperty(e)&&b(a[e],e);else{if(typeof a==="string"||typeof a.length!=="number"||a.tagName||a===this.global)a=[a];e=0;for(d=a.length;e<d;++e)b(a[e],e)}};c.extend=function(a,b,d){var e;d=d===false?false:true;for(e in b)if(b.hasOwnProperty(e)&&(d||a[e]===void 0))a[e]=b[e]};c._uIdx=0;c.getUid=function(a){var b;if(!a)return a;/*b=a.uniqueID&&a.nodeType&&a.nodeType!==9?a.uniqueID:typeof a==="string"?
a:a._duid;*/if(!b){b="_duid_"+ ++c._uIdx;try{a._duid=b}catch(d){b=null}}return b};c.set=function(a,b,d){var e,f;a=a.split(".");d=d||c.global;e=0;for(f=a.length-1;e<f;++e){d[a[e]]=d[a[e]]||{};d=d[a[e]]}a=a[a.length-1];d[a]=b===void 0?d[a]===void 0?{}:d[a]:b;return d[a]};c.get=function(a,b){var d,e,f=a.split("."),g=b||c.global;d=0;for(e=f.length;d<e;++d){if(!g)return;g=g[f[d]]}return g};c.exportPath=function(a,b,d){c.set(a,b,d)};c.inherits=function(a,b){function d(){}d.prototype=b.prototype;a._super=
b.prototype;a.prototype=new d;a.prototype.constructor=a};c.preLoadJs=function(a){c.ua.ie||c.ua.opera?c.downloadScriptImage(a):c.downloadScriptObject(a)};c.downloadScriptImage=function(a){(new Image).src=a};c.downloadScriptObject=function(a){var b;if(c.doc.body){b=c.doc.createElement("object");b.data=a;b.width=0;b.height=0;c.doc.body.appendChild(b)}else setTimeout(function(){c.downloadScriptObject(a)},50)};c.loadJs=function(a,b){var d=c.doc,e=d.getElementsByTagName("head")[0]||d.documentElement,f,
g,h=false;g=b.onSuccess;if(b.cache===false||c.isDebug()&&b.cache!==true)a+=(a.indexOf("?")>0?"&":"?")+"_du_r_t="+Math.random();f=d.createElement("script");f.type="text/javascript";f.src=a;if(b.charset)f.charset=b.charset;f.onload=f.onreadystatechange=function(){if(!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){h=true;g&&g();g=f.onload=f.onreadystatechange=null;e&&f.parentNode&&e.removeChild(f)}};e.appendChild(f)};c.BasicModule=function(a,b){b=b||{};this.mname=a;
this.detailObj=b};c.BasicModule.modules={};c.BasicModule.waitingReg=[];c.BasicModule.loadingMods={};c.BasicModule.loadedMods={};c.BasicModule.add=function(a,b){var d=new c.BasicModule(a,b);return this.modules[":"+a]=d};c.BasicModule.load=function(a,b){var d,e,f,g,h;(d=this.modules[":"+a])||(d=this.add(a));d=d.getURI(b);if(b.preload)c.preLoadJs(d,b);else{h=b.onSuccess;g=this.loadingMods;e=this.waitingReg;f=this.loadedMods;h&&e.push(["_",false,b.dependency,h]);if(!g[a])if(f[a]!==void 0)c.BasicModule.register("_",
false);else{g[a]=b;c.loadJs(d,{cache:b.cache})}}};c.BasicModule.register=function(a,b,d,e){var f,g,h,i,k,m,n=false;h=this.loadedMods;if(h[a]===void 0){d=d||[];g=this.waitingReg;i=this.loadingMods;f=this.getMissingMods(a,d);if(i[a]!==void 0)k=i[a];if(f.length){m=o.call(arguments);n=true;c.each(f,function(j){if(h[j]===void 0){n=false;i[j]===void 0&&c.BasicModule.load(j,{version:k&&k.version})}});n||g.push(m)}else{delete i[a];e&&e();if(a!=="_")h[a]=b;c.each(g,function(j,r){if(j&&j!=m){g[r]=false;c.BasicModule.register.apply(c.BasicModule,
j)}})}}};c.BasicModule.getMissingMods=function(a,b){var d,e=[];b=b||[];d=this.loadedMods;c.each(b,function(f,g){if(f===a){f="_";b[g]=f}f!=="_"&&d[f]===void 0&&e.push(f)});return e};(function(){var a=c.doc.getElementsByTagName("script");a=a[a.length-1].src;c.BasicModule.prototype.baseURI=a.substr(0,a.lastIndexOf("/"))})();c.BasicModule.prototype.getURI=function(a){var b,d,e=this.detailObj,f,g;a=a||{};b=e.base||this.baseURI;if(e.fullPath)b=e.fullPath;else if(e.afterBasePath)b=[b,e.afterBasePath].join("/");
else{f=this.mname.split(":");g=f[1];f=f[0].split(".");d=e.dirName==void 0?f.join("/"):e.dirName;if(e.dynamic){a=a.version?a.version:e.dynamic;b=[b,d,this.mname].join("/");b+="_"+a+".js"}else{a=c.isDebug()?"0":a.version?a.version:"0";if(a!=="0")b+="/"+a;b=[b,d,(g||f[f.length-1])+".js"].join("/")}}return b};c._loadOne=function(a,b){if(b._isMod)c.BasicModule.load(a,b);else{a.match(q)||(a="http://"+a);b.preload?c.preLoadJs(a,b):c.loadJs(a,b)}};c.load=function(a,b,d){var e,f,g,h=false;b=b||{};if(typeof b===
"function"){e=d||{};e.onSuccess=b;b=e}b.onSuccess=b.onSuccess||function(){};g=typeof a==="string"?a.split(" "):o.call(a);if(a=b._isMod===void 0)b._isMod=p.test(g[0]);if(b._isMod){b._isMod=true;if(b.onSuccess){e=b.onSuccess;f=false;b.onSuccess=function(){if(!f){f=true;e()}}}}else if(b.onSuccess){if(a){b.onAllLoad=b.onSuccess;h=b.preload===true?true:false}b.onSuccess=function(){g.shift();if(g.length===0)b.onAllLoad();else c.load(g,b)}}b.dependency=b.dependency||g;c.each(g,function(i,k){if(k>0)h&&c._loadOne(i,
{preload:true,version:b.version});else setTimeout(function(){c._loadOne(i,b)},0)})};c.each("load widget app jslog".split(" "),function(a){c.exportPath("__."+a)});c.jslog.error=c.jslog.iferror=function(){}})(this);

__.BasicModule.register("lang","0.4.0",[],function(){__.exportPath("__.lang");__.lang.OPER={"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"/":function(a,b){return a/b},"%":function(a,b){return a%b},"-2":function(a,b){return b-a},"/2":function(a,b){return b/a},"%2":function(a,b){return b%a},">":function(a,b){return a>b},"<":function(a,b){return a<b},">=":function(a,b){return a>=b},"<=":function(a,b){return a<=b},"==":function(a,b){return a==b},"===":function(a,
b){return a===b},"&&":function(a,b){return a&&b},"||":function(a,b){return a||b},"&":function(a,b){return a&b},"|":function(a,b){return a|b},"^":function(a,b){return a^b},"++":function(a){return a+1},"--":function(a){return a-1},"!":function(a){return!a}};__.lang.NODE_TYPE={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};
__.lang.EF=function(){};__.lang.K=function(a){return a};__.lang.isArray=function(a){return Object.prototype.toString.apply(a)==="[object Array]"};__.lang.isUndefined=function(a){return a===void 0};__.lang.isNull=function(a){return a===null};__.lang.isBoolean=function(a){return typeof a==="boolean"};__.lang.isFunction=function(a){return typeof a==="function"};__.lang.isNumber=function(a){return typeof a==="number"&&isFinite(a)};__.lang.isInt=function(a){var b=parseInt(a,10);if(isNaN(b))return false;
return a===b};__.lang.isFloat=function(a){var b=parseFloat(a);if(isNaN(b))return false;return a===b};__.lang.isObject=function(a){return a&&(typeof a==="object"||__.lang.isFunction(a))||false};__.lang.isString=function(a){return typeof a==="string"};__.lang.isEmpty=function(a){return a===null||typeof a==="undefined"||a===0||a===false||a===""||typeof a.length==="number"&&a.length===0};__.lang.isNode=function(a,b){return __.lang.isObject(a)&&(!b&&(a===__.global||a===__.doc)||a.nodeType===__.lang.NODE_TYPE.ELEMENT_NODE)};
__.lang.range=function(a,b,c){var d=[];c=c||1;if(b===void 0){b=a;a=0}for(;b>a;){d[d.length]=a;a+=c}return d};__.lang.each=__.each;__.lang.all=function(a,b,c){var d;if(!a)return true;if(c)for(d in a){if(a.hasOwnProperty(d)&&!b(a[d],d))return false}else{if(typeof a==="string"||typeof a.length!=="number"||a.tagName||a===__.global)a=[a];d=0;for(c=a.length;d<c;++d)if(!b(a[d],d))return false}return true};__.lang.find=function(a,b,c){var d;if(!a)return-1;if(c)for(d in a){if(a.hasOwnProperty(d)&&b(a[d],d))return d}else{if(typeof a===
"string"||typeof a.length!=="number"||a.tagName||a===__.global)a=[a];d=0;for(c=a.length;d<c;++d)if(b(a[d],d))return d}return-1};__.lang.findByAttr=function(a,b,c,d){return __.lang.find(a,function(e){return e&&e[b]===c},d)};__.lang.any=function(a,b,c){var d;if(!a)return false;if(c)for(d in a){if(a.hasOwnProperty(d)&&b(a[d],d))return true}else{if(typeof a==="string"||typeof a.length!=="number"||a.tagName||a===__.global)a=[a];d=0;for(c=a.length;d<c;++d)if(b(a[d],d))return true}return false};__.lang.reduce=
function(a,b,c,d){__.each(a,function(e,f){c=b(c,e,f)},d);return c};__.lang.map=function(a,b,c){var d=[];__.each(a,function(e,f){d[f]=b(e)},c);return d};__.lang.a=function(a){var b,c;if(!a)return[];b=a.length||0;for(c=Array(b);b--;)c[b]=a[b];return c};__.lang.w=function(a){if(!__.lang.isString(a))return[];return(a=__.lang.trim(a))?a.split(__.lang.getReg("\\s+")):[]};__.lang.unique=function(a,b){return __.lang.reduce(a,function(c,d,e){if(0===e||(b?c[c.length-1]!==d:!__.lang.inArray(d,c,true)))c.push(d);
return c},[])};__.lang.inArray=function(a,b){var c=false;__.each(b,function(d,e){if(d===a){c=c===false?[]:c;c.push(e)}});return c};__.lang.arrayRemove=function(a,b,c){var d=a.length;b=a<0?parseInt(b,10)+d:b;c=c<0?parseInt(c,10)+d:c;if(c<b||b>=d||c>=d)return false;c=a.slice((c||b)+1||a.length);a.length=b<0?a.length+b:b;return a.push.apply(a,c)};__.lang.absorb=function(a,b){var c=[];__.each(a,function(d){c.push(d[b])});return c};__.lang.curry=function(a){var b;a=typeof a==="string"&&__.lang.OPER[a]?
__.lang.OPER[a]:a;b=__.lang.a(arguments);b.shift();return function(){return a.apply(null,b.concat(__.lang.a(arguments)))}};__.lang.compose=function(a,b){return function(){return a(b.apply(null,arguments))}};__.lang.negate=function(a){return function(){return!a.apply(null,arguments)}};__.lang.keys=function(a){var b=[];__.each(a,function(c,d){b.push(d)},true);return b};__.lang.values=function(a){var b=[];__.each(a,function(c){b.push(c)},true);return b};__.lang.clone=function(a){var b,c;if(a===null||
typeof a!=="object")return a;b=new a.constructor;for(c in a)if(a.hasOwnProperty(c))b[c]=__.lang.clone(a[c]);return b};__.lang.mergeObj=function(){var a,b,c,d={};for(c=__.lang.a(arguments);(b=c.shift())!==void 0;)for(a in b)if(b.hasOwnProperty(a))d[a]=b[a];return d};__.lang.trim=function(a){var b,c;a=a.replace(__.lang.getReg("^\\s\\s*"),"");b=__.lang.getReg("\\s");for(c=a.length-1;b.test(a.charAt(c));)c--;return a.slice(0,c+1)};__.lang.truncate=function(a,b,c,d){var e,f=a.length,g=0;b=b||30;c=c===
void 0?"...":c;if(d!==void 0&&f>b/2){d=0;for(e=c.length;d<e;d++)g+=c.charCodeAt(d)>255?2:1;for(d=0;d<f;d++){g+=a.charCodeAt(d)>255?2:1;if(g>b)break}a=a.substring(0,d)+c}else a=a.length>b?a.slice(0,b-c.length)+c:String(a);return a};__.lang.strRepeat=function(a,b){var c=[];__.each(__.lang.range(b),function(){c.push(a)});return c.join("")};__.lang.baseConvert=function(a,b,c){if(!a||!b)return false;a=String(a).toLowerCase();if(c===void 0)c=__.lang.startWith(a,"0x")?16:__.lang.startWith(a,"0")?8:10;a=
parseInt(a,c);return a.toString(b)};__.lang.stripTags=function(a){return a.replace(__.lang.getReg("<\\/?[^>]+>","gi"),"")};__.lang.camelize=function(a){var b,c=a.split("_"),d=c.length;if(d===1)return c[0];b=a.charAt(0)==="_"?c[0].charAt(0).toUpperCase()+c[0].substring(1):c[0];for(a=1;a<d;++a)b+=c[a].charAt(0).toUpperCase()+c[a].substring(1);return b};__.lang.underscore=function(a){return a.replace(__.lang.getReg("([A-Z]+)([A-Z][a-z])","g"),"$1_$2").replace(__.lang.getReg("([a-z\\d])([A-Z])","g"),
"$1_$2").toLowerCase()};__.lang.capitalize=function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()};__.lang.sprintf=function(a){for(var b=1;arguments[b]!==void 0;)a=a.replace(__.lang.getReg("%s"),arguments[b++]);return a};__.lang.startWith=function(a,b){return a.indexOf(b)===0};__.lang.beginWith=__.lang.startWith;__.lang.endWith=function(a,b){var c=a.length-b.length;return c>=0&&a.lastIndexOf(b)===c};__.lang.greplace=function(a,b,c){var d,e=__.lang.getReg(b,"g"),f=__.lang.getReg(b),
g="";__.each(a.match(e),function(h,i){d=a.indexOf(h)+h.length;g+=a.substring(0,d).replace(f,c(h,i));a=a.substring(d)});return g+a};__.lang.rand=function(a,b){if(b===void 0){b=a;a=0}return Math.round(Math.random()*(b-a))+a};__.lang.getReg=function(){var a={},b;b=function(c,d){var e=c+(d||"");a[e]||(a[e]=RegExp(c,d));return a[e]};b.purge=function(){a={}};return b}();__.lang.log=function(){var a=0,b=0;return __.global.console?function(){var c,d,e;if(__.isDebug()){c=(new Date).getTime();e=__.global.console;
d=a||c;a=c;c=++b+",("+c+",+"+(c-d)+"ms): ";d=__.lang.a(arguments);d.unshift(c);e.log.apply?e.log.apply(e,d):e.log(d.join(" "))}}:__.lang.EF}();__.lang.toCall=function(a,b,c){var d,e,f=false;c=c||1E3;e=typeof b==="function"?b:function(){var g=false;if(__.get(b)!==void 0)g=true;return g};if(!f&&e()){f=true;a()}else d=setInterval(function(){if(!f&&e()){f=true;clearInterval(d);a()}},c)}});

__.BasicModule.register("dom","0.4.0",["lang"],function(){__.exportPath("__.dom");__.dom.id=function(a){return typeof a==="string"?__.doc.getElementById(a):a};__.dom.$=function(a){return(a=__.dom.id(a))?[a]:[]};__.dom.f=__.dom.id;__.dom.hasClass=function(a,b){return __.lang.getReg("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)};__.dom.addClass=function(a,b){if(!__.dom.hasClass(a,b))a.className=__.lang.trim([a.className,b].join(" "))};__.dom.remClass=function(a,b){if(b&&__.dom.hasClass(a,b)){a.className=
__.lang.trim(a.className.replace(__.lang.getReg("(?:^|\\s+)"+b+"(?:\\s+|$)")," "));__.dom.hasClass(a,b)&&__.dom.remClass(a,b)}};__.dom.getElementsByClassName=function(){return __.doc.getElementsByClassName?function(a,b){return a.getElementsByClassName(b)}:function(a,b){var d,e,c,g;c=b.split(" ");var f=[],h=a.all?a.all:a.getElementsByTagName("*"),j,i=[],k;d=0;for(e=c.length;d<e;d+=1)f.push(__.lang.getReg("(^|\\s)"+c[d]+"(\\s|$)"));d=0;for(e=h.length;d<e;d+=1){j=h[d];k=false;c=0;for(g=f.length;c<g;c+=
1){k=f[c].test(j.className);if(!k)break}k&&i.push(j)}return i}}();__.dom.insertBefore=function(a,b){b.parentNode&&b.parentNode.insertBefore&&b.parentNode.insertBefore(a,b)};__.dom.insertAfter=function(a,b){b.nextSibling?b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a)};__.dom.addEl=function(a,b,d){var e,c,g,f,h,j;if(!a)return false;h=function(i){__.dom.addClass(e,i)};j=function(i){__.dom.addEl(i,e)};if(__.lang.isArray(a)){f=__.doc.createDocumentFragment();__.each(a,function(i){__.dom.addEl(i,
f)});if(b=__.dom.id(b)){if(d)b.innerHTML="";f=b.appendChild(f)}return f}if(a._t){a.tag="_text";a.text=a._t}c=a.tag;if(!c&&b&&b.tagName)switch(b.tagName.toLowerCase()){case "table":case "tbody":c="tr";break;case "tr":c="td";break;case "ul":c="li";break;case "select":c="option"}c=c||"div";if(__.ua.ie&&(c==="input"||c==="select")&&a.name)e=__.doc.createElement("<input name="+a.name+">");else if(c==="_text"){e=__.doc.createTextNode(a.text);a={}}else e=__.doc.createElement(c);if(!e)return false;for(g in a)if(a.hasOwnProperty(g)){c=
a[g];switch(g){case "cls":__.each(c,h);break;case "child":__.each(c,j);break;case "text":e.appendChild(__.doc.createTextNode(c));break;case "css":e.style.cssText=c;break;case "html":e.innerHTML=c;break;case "attrs":__.each(c,function(i,k){e.setAttribute(k,i)},true);break;default:e[g]=c}}if((b=__.dom.f(b))&&b.appendChild){if(d)b.innerHTML="";e=b.appendChild(e)}return e};__.dom.remEl=function(a){var b,d=function(e){e=__.dom.$(e);__.each(e,function(c){c&&c.parentNode&&c.parentNode.removeChild(c)})};
if(__.lang.isArray(a))for(b=a.length-1;b>-1;b--)d(a[b]);else d(a)};__.dom.addText=function(a,b){a.appendChild(__.doc.createTextNode(b))};__.dom.fillText=function(a,b){a.innerHTML="";__.dom.addText(a,b)};__.dom.addStyle=function(a){var b;if(__.doc.createStyleSheet){b=__.doc.createStyleSheet("");b.cssText=a}else __.dom.addEl({tag:"style",textContent:a},__.doc.getElementsByTagName("head")[0]);a=__.doc.styleSheets;return a[a.length-1]};__.dom.addRules=function(a,b){var d;if(!b){if(!__.dom._style)__.dom._style=
__.dom.addStyle("");b=__.dom._style}d=b.insertRule?function(e){var c=b,g=[];__.each(e,function(f,h){g[h]=[c.cssRules.length];try{c.insertRule(f,c.cssRules.length)}catch(j){}});return g}:b.addRule?function(e){var c=b,g=[];__.each(e,function(f,h){f=f.split(__.lang.getReg("[{}]"));g[h]=[];__.each(f[0].split(/\s*,\s*/),function(j){g[h].push(c.rules.length);c.addRule(j,f[1],c.rules.length)})});return g}:__.lang.EF;__.dom.addRules=d;return d(a)};__.dom.remRules=function(a,b){var d=b||__.dom._style||__.doc.styleSheets[0],
e;if(d.deleteRule)e=true;else if(d.removeRule)e=false;else return;__.each(a,function(c){e?d.deleteRule(c):d.removeRule(c)})};__.dom.getScrollXY=function(){var a=function(b){b="scroll"+b;return Math.max(__.doc.documentElement[b],__.doc.body[b])};return[a("Left"),a("Top")]};__.dom.getPosition=function(a,b){for(var d=0;a&&!__.lang.isEmpty(a.offsetParent);){d+=a[b];a=a.offsetParent}d+=parseInt(__.doc.body[b],10);return d};__.dom.v=function(a){if(a=__.dom.f(a))return a.value;return false};__.dom.getWindowXY=
function(){var a=__.global.innerHeight,b=__.global.innerWidth,d=__.doc.compatMode;if(d||__.ua.ie)if(d==="CSS1Compat"){a=__.ua.opera?a:__.doc.documentElement.clientHeight;b=__.doc.documentElement.clientWidth}else{a=__.ua.opera?a:__.doc.body.clientHeight;b=__.doc.body.clientWidth}return[b,a]};__.dom.getDocumentXY=function(){var a,b,d;if(__.doc.compatMode!=="CSS1Compat"||__.ua.webkit){a=__.doc.body.scrollWidth;b=__.doc.body.scrollHeight}else{a=__.doc.documentElement.scrollWidth;b=__.doc.documentElement.scrollHeight}d=
__.dom.getWindowXY();return[Math.max(a,d[0]),Math.max(b,d[1])]};__.dom.setCenter=function(a){var b=__.dom.getWindowXY(),d=__.dom.getScrollXY(),e=a.offsetWidth||a.clientWidth||parseInt(a.style.width,10),c=a.offsetHeight||a.clientHeight||parseInt(a.style.height,10);a.style.position="absolute";a.style.left=(b[0]-e)/2+d[0]+"px";b=(b[1]-c)/2+d[1];a.style.top=(b<50?50:b)+"px"};__.dom.getOpacity=function(a){var b;if(__.lang.isUndefined(a.style.opacity)){b=100;try{b=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{b=
a.filters("alpha").opacity}catch(e){}}b/=100}else{b=a.style.opacity;b=b===""?"1":b}return b};__.dom.setOpacity=function(a,b){if(!__.lang.isUndefined(a.style.opacity))a.style.opacity=b;if(__.lang.isString(a.style.filter)){a.style.filter="alpha(opacity="+(b*100).toFixed(0)+")";if(!a.currentStyle||!a.currentStyle.hasLayout)a.style.zoom=1}};__.dom.contains=function(a,b){if(a.contains&&b.nodeType==__.lang.NODE_TYPE.ELEMENT_NODE)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==
b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}});

__.BasicModule.register("event","0.4.0",["lang"],function(){__.exportPath("__.event");__.event.listeners=0;__.event._allEvents={};__.event._getEl=function(a){return __.lang.isString(a)?__.dom?__.dom.$(a):__.doc.getElementById(a):a};__.event.on=function(a,c,f,d){var b,g,h,i;if(a=__.event._getEl(a))if(__.lang.isArray(a))__.each(a,function(e){__.event.on(e,c,f,d)});else if(__.lang.isArray(c))__.each(c,function(e){__.event.on(a,e,f,d)});else{h=__.getUid(a);b=__.event._allEvents;b[c]=b[c]||{};b=b[c];b[h]=
b[h]||[];h=b[h];for(b=0;b<h.length;b++)if(h[b].listener==f)return;if(c.indexOf(":")>-1){g="dataavailable";b=function(e){e=e||__.global.event;if(!e.target)e.target=e.srcElement;if(e.eventName===c)return f(e);return true}}else{g=c;b=function(e){e=e||__.global.event;if(!e.target)e.target=e.srcElement;return f(e)}}i={type:g,listener:f,proxy:b};if(a.addEventListener)a.addEventListener(g,b,!!d);else a.attachEvent&&a.attachEvent("on"+g,b);h.push(i);__.event.listeners++}};__.event.off=function(a,c,f,d){var b,
g,h;if(a=__.event._getEl(a))if(__.lang.isArray(a))__.each(a,function(i){__.event.off(i,c,f,d)});else{b=__.getUid(a);if(h=(__.event._allEvents[c]||{})[b])for(b=0;b<h.length;b++)if(h[b].listener==f){g=h[b];h.splice(b,1);break}if(g){if(a.removeEventListener)a.removeEventListener(g.type,g.proxy,!!d);else a.detachEvent&&a.detachEvent("on"+g.type,g.proxy);__.event.listeners--}}};__.event.fire=function(a,c,f){var d,b=__.event._getEl(a);if(__.lang.isArray(b))__.each(b,function(g){__.event.fire(g,c,f)});else{b=
b||__.doc;if(b===__.doc&&__.doc.createEvent&&!b.dispatchEvent)b=__.doc.documentElement;if(b.dispatchEvent||b.fireEvent){if(__.doc.createEvent){d=__.doc.createEvent("HTMLEvents");d.initEvent("dataavailable",true,true)}else{d=__.doc.createEventObject();d.eventType="ondataavailable"}d.eventName=c;d.memo=f||{};__.doc.createEvent?b.dispatchEvent(d):b.fireEvent(d.eventType,d)}else if(b=__.event._allEvents[c])if(b=b[__.getUid(a)]){d={eventType:c,eventName:c,target:a,memo:f};for(a=0;a<b.length;a++)b[a].listener(d)}return d}};
__.event.stopPropagation=function(a){if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true};__.event.preventDefault=function(a){if(a.preventDefault)a.preventDefault();else a.returnValue=false};__.event.stopEvent=function(a){__.event.preventDefault(a);__.event.stopPropagation(a)};__.event.bind=function(a,c){return function(){a.apply(c,__.lang.a(arguments))}};__.event.onReady=function(a){var c=__.event.onReady;c._bindReady();c._isReady?a.call(__.global):c._readyList.push(function(){return a.call(__.global)})};
__.event.onReady._readyList=[];__.event.onReady._isReady=false;__.event.onReady._isBound=false;__.event.onReady._hlReady=function(){var a=__.event.onReady;if(!a._isReady){a._isReady=true;__.each(a._readyList,function(c){c()});a._readyList=null}};__.event.onReady._bindReady=function(){var a=this,c;if(!a._isBound){a._isBound=true;if(__.doc.readyState)if(__.doc.readyState==="complete"){a._hlReady();return}if(__.ua.ie)a._domReadyId=setInterval(function(){try{__.doc.documentElement.doScroll("left");clearInterval(a._domReadyId);
a._domReadyId=null;a._hlReady()}catch(f){}},50);else __.doc.addEventListener("DOMContentLoaded",a._hlReady,false);c=__.global.onload;__.global.onload=typeof c!=="function"?a._hlReady:function(){a._hlReady();c()}}}});

__.BasicModule.register("cookie","0.4.0",[],function(){__.exportPath("__.cookie");__.cookie.get=function(b){var a=__.doc.cookie,c=b+"=",d=a.indexOf("; "+c),e;if(d===-1){d=a.indexOf(c);if(d!==0)return""}else d+=2;b=a.indexOf(";",d);if(b===-1)b=a.length;a=a.substring(d+c.length,b);try{e=decodeURIComponent(a)}catch(f){e=a}return e};__.cookie.del=function(b,a,c){var d=b+"=";if(__.cookie.get(b)){if(a)d+="; path="+a;if(c)d+="; domain="+c;d+="; expires=Thu, 01-Jan-70 00:00:01 GMT";__.doc.cookie=d}};__.cookie.set=
function(b,a,c){c=c||{};b=b+"="+encodeURIComponent(a);if(c.expires){a=c.expires;a.toGMTString||(a=new Date(a));b+="; expires="+a.toGMTString()}if(c.path)b+="; path="+c.path;if(c.domain)b+="; domain="+c.domain;if(c.secure)b+="; secure";__.doc.cookie=b}});

__.BasicModule.register("selector","0.4.0",["lang","dom"],function(){__.exportPath("__.selector");__.dom.$=function(a,b,e){var c;if(a)if(a.nodeType)c=[a];else if(a.item){c=[];b=0;for(e=a.length;b<e;++b)c.push(a[b])}else if(__.lang.isString(a))c=(c=b?null:__.dom.id(a))?[c]:__.selector.query(a,b,e);else c=[a];else c=[];return c};__.dom.f=function(){return __.dom.$.apply(__.dom,__.lang.a(arguments))[0]};__.selector.query=function(){return __.doc.querySelectorAll?function(a,b,e){var c=[];if(b&&!b.nodeName){b=
__.dom.f(b);if(!b)return c}b=b||__.doc;if(e)c[0]=b.querySelector(a);else{e=b.querySelectorAll(a);a=0;for(b=e.length;a<b;++a)c.push(e[a])}return c}:function(a,b,e){var c,d,h,g,f,i,j,k,l,m,n;c=[];if(!a)return c;a=__.lang.trim(a);d=__.lang.trim(a).split(",");if(d.length>1){a=0;for(g=d.length;a<g;++a){h=__.selector.query(d[a],b,e);if(e&&h.length>1){c[0]=h[0];break}else c=c.concat(h)}return c}if(b&&!b.nodeName){b=__.dom.f(b);if(!b)return c}b=b||__.doc;b=[b];e=a.split(" ");k=false;d=0;for(h=e.length;d<
h;d++){a=e[d];if(a===">")k=true;else{c=[];f=a.match(__.lang.getReg("^([^.#]+)"));i=a.match(__.lang.getReg("#([^.#]+)"));j=(a=a.match(__.lang.getReg("\\.[^.#]+","g")))?a.join(" ").replace(__.lang.getReg("\\.","g"),""):"";if(i){c=(c=__.dom.id(i[1]))?[c]:[];f=f?f[1]:null}else if(f||a){a=0;for(g=b.length;a<g;++a){l=f?b[a].getElementsByTagName(f[1]):__.dom.getElementsByClassName(b[a],j);if(k){m=0;for(n=l.length;m<n;m++)l[m].parentNode===b[a]&&c.push(l[m])}else c=c.concat(__.lang.a(l))}j=f?j:null;f=null}c=
__.selector._nodeFilter(c,{tagname:f,classname:j});if(i&&c[0]){i=false;a=0;for(g=b.length;a<g;++a){f=b[a];if(k?c[0].parentNode===f:f===__.doc||__.dom.contains(c[0],f)){i=true;break}}i||(c=[])}k=false;b=c;if(b.length===0)break}}return b}}();__.selector._nodeFilter=function(a,b){var e,c,d,h,g,f,i,j;a=__.lang.unique(a);if(b.tagname){e=[];c=__.lang.getReg("\\b"+b.tagname+"\\b","i");d=0;for(h=a.length;d<h;++d)c.test(a[d].tagName)&&e.push(a[d]);a=e}if(b.classname){e=[];g=b.classname.split(" ");c=[];d=0;
for(h=g.length;d<h;++d)c.push(__.lang.getReg("(^|\\s)"+g[d]+"(\\s|$)"));d=0;for(h=a.length;d<h;++d){j=a[d];i=false;g=0;for(f=c.length;g<f;g++){i=c[g].test(j.className);if(!i)break}i&&e.push(j)}a=e}return a}});
if(!this.JSON)this.JSON={};
(function(){function j(c){return c<10?"0"+c:c}function o(c){p.lastIndex=0;return p.test(c)?'"'+c.replace(p,function(f){var b=r[f];return typeof b==="string"?b:"\\u"+("0000"+f.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+c+'"'}function m(c,f){var b,d,g,k,i=h,e,a=f[c];if(a&&typeof a==="object"&&typeof a.toJSON==="function")a=a.toJSON(c);if(typeof l==="function")a=l.call(f,c,a);switch(typeof a){case "string":return o(a);case "number":return isFinite(a)?String(a):"null";case "boolean":case "null":return String(a);
case "object":if(!a)return"null";h+=n;e=[];if(Object.prototype.toString.apply(a)==="[object Array]"){k=a.length;for(b=0;b<k;b+=1)e[b]=m(b,a)||"null";g=e.length===0?"[]":h?"[\n"+h+e.join(",\n"+h)+"\n"+i+"]":"["+e.join(",")+"]";h=i;return g}if(l&&typeof l==="object"){k=l.length;for(b=0;b<k;b+=1){d=l[b];if(typeof d==="string")if(g=m(d,a))e.push(o(d)+(h?": ":":")+g)}}else for(d in a)if(Object.hasOwnProperty.call(a,d))if(g=m(d,a))e.push(o(d)+(h?": ":":")+g);g=e.length===0?"{}":h?"{\n"+h+e.join(",\n"+h)+
"\n"+i+"}":"{"+e.join(",")+"}";h=i;return g}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+j(this.getUTCMonth()+1)+"-"+j(this.getUTCDate())+"T"+j(this.getUTCHours())+":"+j(this.getUTCMinutes())+":"+j(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,n,r={"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof JSON.stringify!=="function")JSON.stringify=function(c,f,b){var d;n=h="";if(typeof b==="number")for(d=0;d<b;d+=1)n+=" ";else if(typeof b==="string")n=b;if((l=f)&&typeof f!=="function"&&(typeof f!=="object"||typeof f.length!=="number"))throw Error("JSON.stringify");return m("",{"":c})};
if(typeof JSON.parse!=="function")JSON.parse=function(c,f){function b(g,k){var i,e,a=g[k];if(a&&typeof a==="object")for(i in a)if(Object.hasOwnProperty.call(a,i)){e=b(a,i);if(e!==undefined)a[i]=e;else delete a[i]}return f.call(g,k,a)}var d;q.lastIndex=0;if(q.test(c))c=c.replace(q,function(g){return"\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(c.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){d=eval("("+c+")");return typeof f==="function"?b({"":d},""):d}throw new SyntaxError("JSON.parse");}})();typeof __!="undefined"&&!__.Json&&function(){__.json={toJson:function(j){return JSON.stringify(j)},fromJson:function(j){return JSON.parse(j)}}}();

__.BasicModule.register("disposable","0.4.0",[],function(){__.Disposable=function(){__.Disposable._instances[__.getUid(this)]=this};__.Disposable._instances={};__.Disposable.getUndisposedObjects=function(){var a=[];__.each(__.Disposable._instances,function(c,b){a.push(__.Disposable._instances[b])},true);return a};__.Disposable.disposeAll=function(){__.each(__.Disposable._instances,function(a){a.dispose()},true)};__.Disposable.prototype._disposed=false;__.Disposable.prototype.isDisposed=function(){return this._disposed};
__.Disposable.prototype.dispose=function(){if(!this._disposed){this._disposed=true;this.disposeInternal();delete __.Disposable._instances[__.getUid(this)]}};__.Disposable.prototype.disposeInternal=function(){}});

__.BasicModule.register("clientstore","0.4.0",["lang"],function(){__.exportPath("__.clientStore");__.clientStore._inited=false;__.clientStore._store=null;__.clientStore._searchOrder=["localStorage","userData","globalStorage"];__.clientStore._engines={localStorage:{test:function(){return __.global.localStorage?true:false},init:function(){__.clientStore._store=__.global.localStorage},get:function(a){return __.clientStore._store.getItem(a)},set:function(a,b){return __.clientStore._store.setItem(a,b)},
del:function(a){return __.clientStore._store.removeItem(a)}},globalStorage:{test:function(){return __.global.globalStorage?true:false},init:function(){__.clientStore._store=__.global.globalStorage[__.doc.domain]},get:function(a){return __.clientStore._store.getItem(a).value},set:function(a,b){return __.clientStore._store.setItem(a,b)},del:function(a){return __.clientStore._store.removeItem(a)}},userData:{test:function(){return __.global.ActiveXObject?true:false},init:function(){try{__.clientStore._store=
__.doc.documentElement;__.clientStore._store.addBehavior("#default#userdata")}catch(a){}},get:function(a){var b;try{__.clientStore._store.load(a);b=__.clientStore._store.getAttribute(a)}catch(c){b=""}return b},set:function(a,b){try{__.clientStore._store.load(a);__.clientStore._store.setAttribute(a,b);__.clientStore._store.save(a)}catch(c){}},del:function(a){try{__.clientStore._store.load(a);__.clientStore._store.expires=(new Date(315532799E3)).toUTCString();__.clientStore._store.save(a)}catch(b){}}}};
__.clientStore._init=function(){var a;__.clientStore._inited=true;if(__.lang.find(__.clientStore._searchOrder,function(c){a=__.clientStore._engines[c];return a.test()})!==-1)try{a.init();delete a.test;delete a.init;__.extend(__.clientStore,a,true)}catch(b){}};__.clientStore.set=function(){if(!__.clientStore._inited){__.clientStore._init();return __.clientStore.set.apply(__.clientStore,__.lang.a(arguments))}};__.clientStore.get=function(){if(!__.clientStore._inited){__.clientStore._init();return __.clientStore.get.apply(__.clientStore,
__.lang.a(arguments))}};__.clientStore.del=function(){if(!__.clientStore._inited){__.clientStore._init();return __.clientStore.del.apply(__.clientStore,__.lang.a(arguments))}}});

__.BasicModule.register("widget","2.0.0",["disposable"],function(){__.exportPath("__.widget");__.widget.Base=function(){__.Disposable.call(this);this.cssRules&&this._addCssRules(this.cssRules)};__.inherits(__.widget.Base,__.Disposable);__.widget.Base.prototype.cssRules="";__.widget.Base.prototype.disposeInternal=function(){__.widget.Base._super.disposeInternal.call(this);if(this.cssRules){__.dom.remRules(this.cssRules);delete this.cssRules}};__.widget.Base.prototype._addCssRules=function(a){this._cssRuleIds=
__.dom.addRules(a)};__.widget.Base.prototype._READYSTATE=1;__.widget.Base.prototype._EVENT_READYSTATE_CHANGE="readystatechange";__.widget.Base.prototype._readystate_=0;__.widget.Base.prototype._changeReadyState=function(a){if(this._readystate_!=a){__.event.fire(this,this._EVENT_READYSTATE_CHANGE,{oldState:this._readystate_,newState:a});this._readystate_=a;if(this._readystate_==this._READYSTATE)this.onReady()}};__.widget.Base.prototype._onReady_=[];__.widget.Base.prototype.onReady=function(a){__.lang.isFunction(a)&&
this._onReady_.push(a);this._readystate_==this._READYSTATE&&__.each(this._onReady_,function(b){b()})}});

__.BasicModule.register("fn-table","2.0.0",["lang","dom"],function(){__.exportPath("__.fnTable");__.fnTable.mapNumMarket={0:"jj",1:"sh",51:"sz",100:"hk",200:"us"};__.fnTable.findNextEl=function(a){for(;;){a=a.nextSibling;if(!a||a.nodeType===1)break}return a};__.fnTable.getPageUrl=function(a,b){var f="";a=String(a);switch(String(b)){case "":case "0":if(a.length>5)f="http://stockhtm.finance.qq.com/fund/djj_jjcx/"+a+".htm";break;case "1":f=a.substr(0,3)==="000"?"http://stockhtm.finance.qq.com/hqing/zhishu/"+
a+".htm":"http://stockhtm.finance.qq.com/sstock/ggcx/"+a+".shtml";break;case "51":f=a.substr(0,2)==="39"?"http://stockhtm.finance.qq.com/hqing/zhishu/"+a+".htm":"http://stockhtm.finance.qq.com/sstock/ggcx/"+a+".shtml";break;case "100":if(a.length<=5)f="http://stockhtm.finance.qq.com/hk/ggcx/"+a+".htm";break;case "200":if(a.substr(0,1)===".")a=a.substr(1);f="http://stockhtm.finance.qq.com/astock/ggcx/"+a.toUpperCase()+".htm";break;case "300":f="http://stockhtm.finance.qq.com/if/ggcx/"+a.toUpperCase()+
".shtml";break;case "350":f="http://stockhtm.finance.qq.com/money/future/quotpage/f/"+a.toUpperCase()+".htm"}return f||"http://finance.qq.com/"};__.fnTable.fill=function(a,b,f,c){var d,e,g,n,j,m,o,i,k;c=c||{};m=__.lang.isBoolean(c.cloneTr)?c.cloneTr:true;o=__.lang.isInt(c.lineCount)?c.lineCount:Infinity;b=__.dom.f(b);if(m){i=b.cloneNode(true);i.id=""}e=b;if(__.lang.isObject(a))a=__.lang.values(a);k=[];if(__.lang.isString(a))__.each(a.split(","),function(h){var l=__.global["v_"+h];k.push(l?l.split("~"):
h)});else if(__.lang.isArray(a))__.each(a,function(h){if(__.lang.isString(h))h=(h=__.global["v_"+h]||h)&&h.split("~");k.push(h)});else return;a=k;b=0;for(d=a.length;b<d&&b<o;b++){n=true;if(!__.lang.isObject(a[b])&&(!__.lang.isArray(a[b])||a[b].length<2))if(c.showError)a[b]=[];else n=false;if(n){if(!e)if(m){e=i.cloneNode(true);g.parentNode.insertBefore(e,g.nextSibling)}else break;g=e;n=a[b];if(b%2===0&&c.evenTr)e.style.cssText=c.evenTr;else if(b%2===1&&c.oddTr)e.style.cssText=c.oddTr;j=g.firstChild;
j=j.nodeType===1?j:__.fnTable.findNextEl(j);for(e=0;j;){j.innerHTML=__.fnTable.process(f[e],n,e,j,b);j=__.fnTable.findNextEl(j);e++}e=__.fnTable.findNextEl(g)}}};__.fnTable.clear=function(a){var b,f,c;if(a){if(a.tagName==="TABLE")a=a.getElementsByTagName("tr")[0];for(f=a;f;){b=f;f=__.fnTable.findNextEl(b);if(b!==a)__.dom.remEl(b);else{b=b.firstChild;b=b.nodeType===1?b:__.fnTable.findNextEl(b);for(c=0;b;){b.innerHTML="";b=__.fnTable.findNextEl(b);c++}}}}};__.fnTable.fastFill=function(a,b,f,c){var d,
e,g,n,j,m,o,i,k,h=[];g=false;c=c||{};__.lang.isUndefined(c.cloneTr);o=__.lang.isUndefined(c.lineCount)?Infinity:c.lineCount;k=__.lang.isUndefined(c.trProcessor)?false:c.trProcessor;d=b.parentNode.innerHTML.toLowerCase();d=d.substring(d.indexOf("<tr"),d.indexOf("</tr>")+5);j=[];i=d.indexOf("<td");e=d.indexOf("<th");if(e<i&&e>-1){i=e;g=true}for(j.push(d.substr(0,i));i>=0;){d=d.substr(i);i=d.indexOf(">");j.push(d.substr(0,i+1));i=d.indexOf(g?"</th>":"</td>");if(i===-1)break;d=d.substr(i+5);i=d.indexOf("<td");
e=d.indexOf("<th");if(e>-1&&(e<i||i===-1)){i=e;g=true}else g=false}if(__.lang.isObject(a))a=__.lang.values(a);i=[];if(__.lang.isString(a))__.each(a.split(","),function(l){var p=__.global["v_"+l];i.push(p?p.split("~"):l)});else if(__.lang.isArray(a))__.each(a,function(l){if(__.lang.isString(l))l=(l=__.global["v_"+l]||l)&&l.split("~");i.push(l)});else return;a=i;d=0;for(e=a.length;d<e&&d<o;d++){g=true;if(!__.lang.isArray(a[d])||a[d].length<2)if(c.showError)a[d]=[];else g=false;if(g){m=a[d];g=0;for(n=
j.length;g<n;++g)if(g===0)h.push(k?k(d):j[g]);else{h.push(j[g]);i=__.fnTable.process(f[g-1],m,g-1,void 0,d);h.push((i===void 0?"":i)+"</td>")}}}b.parentNode.parentNode.parentNode.innerHTML="<table><tbody>"+h.join("")+"</tbody></table>";f=b=null};__.fnTable.process=function(a,b,f,c,d){var e;if(b.length===1){e="--";if(__.lang.isFunction(a))try{e=a(b,f,c,d)}catch(g){}else if(__.lang.isString(a)&&!__.lang.isFunction(__.fnTable.processors[a]))e=a}else{e=__.lang.isFunction(a)?a(b,f,c,d):__.lang.isFunction(__.fnTable.processors[a])?
__.fnTable.processors[a](b,f,c):!__.lang.isUndefined(b[a])?b[a]:__.lang.isString(a)?a:b[f];if(e===""||e===void 0||e===null)e="--"}return e};__.fnTable.processors={R_PRICE:function(a,b){return __.fnTable.processors.GET_COLOR(a[3],a[2],b)},S_PRICE:function(a,b){return __.fnTable.processors.GET_COLOR(a[3],a[4],b)},L_PRICE:function(a,b){return __.fnTable.processors.GET_COLOR(a[3],a[32],b)},L_CHANGE:function(a){return __.fnTable.processors.GET_SIGNED_COLOR(a[31],a[31])},S_PERCENT:function(a){return __.fnTable.processors.GET_PERCENT(a[5])},
L_PERCENT:function(a){return __.fnTable.processors.GET_PERCENT(a[32])},TITLE:function(a){return __.fnTable.processors.GET_TITLE(a[2],a[0],a[1],false,"_blank")},GET_COLOR:function(a,b,f){return b>0?'<span style="color:#fe0002">'+a+"</span>":b<0?'<span style="color:#009900">'+a+"</span>":f!==false?'<span style="color:#000">'+a+"</span>":a},GET_SIGNED_COLOR:function(a,b,f){return __.fnTable.processors.GET_COLOR((b>0?"+":"")+a,b,f)},GET_PERCENT:function(a,b){return __.lang.isNumber(Number(a))&&a!==""&&
a!=="-"?__.fnTable.processors.GET_COLOR((a>0?"+":"")+a+"%",a,b):"--"},GET_TITLE:function(a,b,f,c,d){var e,g;f=f.replace(__.lang.getReg("[\\s\u3000]*","ig"),"");c=c?Math.ceil(c/2)*2:8;d=d||"";e=c/2;g=f;if(f.length>e){for(g=0;g<c;g++)f.charCodeAt(g)>255&&c>e&&c--;g=f.substring(0,c)}return'<a href="'+__.fnTable.getPageUrl(a,b)+'" title="'+f+"("+a+')"'+(d?' target="'+d+'"':"")+">"+g+"</a>"}};__.fnTable.sort=function(a,b,f,c){var d=__.dom.f(a),e=__.dom.$("tr",d),g=[],n=__.lang.getReg("^\\s+$"),j={},m,o=null,
i=function(k){k=k.cloneNode(true);var h=[];if(k&&k.nodeType===__.lang.NODE_TYPE.TEXT_NODE)n.test(k.nodeValue)||h.push(k.nodeValue);else k&&k.nodeType===__.lang.NODE_TYPE.ELEMENT_NODE&&k.hasChildNodes()&&__.each(k.childNodes,function(l){h.push(i(l))});return h.join("")};f=f===false?false:true;__.each(e,function(k,h){var l;if(c)g[h]=c[h];else{l=i(k.childNodes[b]).replace("%","");l=parseFloat(l);g[h]=isNaN(l)?0:l}if(j[g[h]])j[g[h]].push(h);else j[g[h]]=[h];__.dom.addClass(k,"du-table-sort-"+h)});__.each(g.sort(f?
__.lang.OPER["-"]:__.lang.OPER["-2"]),function(k){try{var h="du-table-sort-"+j[k].pop();m=__.dom.f("."+h,d);o?__.dom.insertAfter(m,o):__.dom.insertBefore(m,e[0].parentNode.firstChild);__.dom.remClass(m,h);o=m}catch(l){}})};__.fnTable.load=function(a,b){var f="http://qt.gtimg.cn/r="+Math.random()+"q=";a=__.lang.isArray(a)?a.join(","):a;__.load(f+a,b,{charset:"gbk",cache:true})};__.fnTable.pFill=function(a,b,f){var c,d;__.lang.isString(a)&&__.each(a.split(","),function(e){if(__.global["v_"+e])if(__.lang.isString(a))a=
[__.global["v_"+e]];else a.push(__.global["v_"+e])});__.each(a,function(e,g){e=e.split("~");__.each(f,function(n,j){if(c=__.dom.f([b,g,j].join("-"))){try{d=__.fnTable.process(n,e,j,c)}catch(m){d="--"}c.innerHTML=d}})})};__.fnTable.getFloatByLength=function(a,b){var f,c,d=parseFloat(a);a=String(a);f=a.length;c=a.indexOf(".");return f<=b?a:c<=0||c>=b?d.toFixed(0):d.toFixed(b-c-1)}});

__.BasicModule.register("fn-cronloader","2.0.0",["lang","dom","fn-table","clientstore"],function(){__.FnCronLoader=function(a){a=a||{};if(a.pushBases)__.FnCronLoader.pushBases=a.pushBases;if(a.pushDummy)__.FnCronLoader.pushDummy=a.pushDummy;this._maxCount=a.max||172800;this._autoCache=a.autoCache===true?true:false;this._idIntv=null;this.stop()};__.FnCronLoader.version="2.0.0";__.FnCronLoader.QT_LIMIT=60;__.FnCronLoader.PUSH_LIMIT=60;__.FnCronLoader.NO_MATCH="pv_none_match";__.FnCronLoader.TIME_OUT=
"pv_timeout";__.FnCronLoader.defaultInterval=5;__.FnCronLoader.pushDummy="./pushiframe.html";__.FnCronLoader.pushBases=["http://push1.gtimg.cn/q=","http://push2.gtimg.cn/q=","http://push3.gtimg.cn/q="];__.FnCronLoader._pushInited=false;__.FnCronLoader._pushIfrCtn=null;__.FnCronLoader._aIframes=[];__.FnCronLoader.prototype._jobUidIdx=0;__.FnCronLoader.prototype._fastCount=0;__.FnCronLoader.prototype._defSendDelay=100;__.FnCronLoader.prototype.pushSessions=[];__.FnCronLoader._initPush=function(){this._pushInited=
true;this._pushIfrCtn=__.dom.addEl({css:"position:absolute;visibility:hidden;top:0;left:0;height:0;width:0;"},__.doc.body)};__.FnCronLoader._createIfr=function(){var a=__.dom.addEl({tag:"iframe",id:"du-push-ifr"+this._aIframes.length,css:"height:0;width:0;border:0;"},this._pushIfrCtn);this._aIframes.push(a);return a};__.FnCronLoader._getIframe=function(a){var d,b=this._aIframes;d=__.lang.findByAttr(b,"className","");d=d===-1?this._createIfr():b[d];if(a||!d.src)d.src=this._getDummySrc();d.className=
"active";return d};__.FnCronLoader._getDummySrc=function(){return this.pushDummy+"?_u="+new Date%1E5+Math.random()};__.FnCronLoader._purgeIframe=function(a,d){if(a){a.className="";if(d){if(a.contentWindow)a.contentWindow.__=null;a.src=this._getDummySrc()}}};__.FnCronLoader.setCache=function(a){var d=+new Date;__.each(a,function(b,c){__.clientStore.set("du-cl~"+c,d+"~"+b)},true)};__.FnCronLoader.getCache=function(a,d){var b,c,f,g={};d=parseInt(d,10);if(!__.lang.isInt(d)||d<0)d=0;b=+new Date;__.each(a,
function(e){f=null;if(c=__.clientStore.get("du-cl~"+e)){c=c.split("~");if(d===0||b-c[0]<=d){c.shift();f=c.join("~")}}g[e]=f});return g};__.FnCronLoader.prototype._getPushBase=function(){var a=__.FnCronLoader.pushBases.length,d=parseInt(__.clientStore.get("du_push_id"),10);a=__.lang.isInt(d)?(d+1)%a:__.lang.rand(a);__.clientStore.set("du_push_id",String(a));return __.FnCronLoader.pushBases[a]};__.FnCronLoader.prototype.getJobById=function(a,d){var b,c;if(d===true){b=this.jobs[0];c=__.lang.isArray(b)?
__.lang.findByAttr(b,"id",a):-1;if(c===-1)return null}else{b=this.jobs[a.split("-")[1]];c=__.lang.isArray(b)?__.lang.findByAttr(b,"id",a):-1;if(c===-1)return this.getJobById(a,true)}return b[c]};__.FnCronLoader.prototype._doPolling=function(a){var d=this,b=[],c,f=true,g=this.pollingCount,e=[],i=[],m=[],n={},j=function(){if(b.length>0){c=b.splice(__.FnCronLoader.QT_LIMIT,b.length);__.fnTable.load(b.join(","),j);b=c}else{__.each(e,function(h){var k="v_"+h,l;l=__.global[k];if(l!==void 0&&l!==null){n[h]=
l;__.global[k]=null}});d._onDataLoaded(n,m)}};a?__.each(this.jobs[a.split("-")[1]],function(h){var k;if(h.id===a){k=h.judge(0);if(h&&(k&1)===1&&h.keys){f=false;e=e.concat(h.keys)}(k&2)===2&&m.push(a)}}):__.each(this.jobs,function(h,k){k>0&&g%k===0&&__.each(h,function(l){var o;o=l.judge(g);if((o&1)===1&&l.keys){f=false;e=e.concat(l.keys)}(o&2)===2&&m.push(l.id)})},true);if(!f||i.length>0)if(e.length===0)j();else{e=__.lang.unique(e);b=e.slice(0);c=b.splice(__.FnCronLoader.QT_LIMIT,b.length);__.fnTable.load(b.join(","),
j);b=c}};__.FnCronLoader.prototype._consumePushJob=function(){var a,d,b=[],c=__.FnCronLoader.PUSH_LIMIT,f,g;for(__.each(this.jobs[0],function(e){__.lang.isUndefined(e.sessionId)&&b.push(e.id)});b.length;){a=[];for(d=[];b.length;){g=this.getJobById(b[0],true);if(g.keys.length>=c){if(a.length)break;f||(f=__.lang.a(g.keys));d.push(g.id);if(f.length>c){a=f.splice(0,c);break}else{a=f;f=null;b.shift()}}else if(g.keys.length+a.length<=c){b.shift();a=a.concat(g.keys);d.push(g.id)}else break}this._updateSession(this._assignSession(a,
d))}};__.FnCronLoader.prototype._assignSession=function(a,d){var b,c,f,g=this;b=__.lang.find(this.pushSessions,function(e){c=[];c=__.lang.unique(c.concat(e.keys).concat(a));return c.length<=__.FnCronLoader.PUSH_LIMIT});if(b===-1){b=this.pushSessions.length;this.pushSessions.push({keys:a,ids:d,id:b})}else{f=this.pushSessions[b];f.ids=f.ids.concat(d);f.keys=c}__.each(d,function(e){e=g.getJobById(e);if(e.sessionId)e.sessionId.push(b);else e.sessionId=[b]});return b};__.FnCronLoader.prototype._updateSession=
function(a,d){var b,c,f;f=this.jobs[0];c=this.pushSessions[a];if(d){b=[];__.each(c.ids,function(g){b.push(f[g].keys)});b=__.lang.unique(b);c.keys=b}else b=c.keys;c.running=true;c.iframe=null;c.url=this._getPushBase()+b.join(",")+"&m=push&r="+ +new Date%1E5+__.lang.rand(1E4);this._sendPushReq(a)};__.FnCronLoader.prototype._sendPushReq=function(a){var d,b,c=this,f=__.FnCronLoader.NO_MATCH,g=__.FnCronLoader.TIME_OUT;b=this.pushSessions[a];if(!(this._paused||!b||!b.running||this.pushCount>this._maxCount)){if(__.ua.webkit){d=
b.iframe;delete b.iframe}if(!b.iframe)b.iframe=__.FnCronLoader._getIframe();b.pushCount=++this.pushCount;__.lang.toCall(function(){var e=b.iframe.contentWindow,i,m;if(!e||!e.__){c._paused||c._delayPushReq(a);c=b=e=null}else{i=+new Date;e.reqCount=b.pushCount;m=e.__;m.load(b.url,function(){var n={},j;if(!(c._paused||!b||!b.running))if(e[f]===1){e[f]=0;throw Error("No data for:"+b.keys.join(","));}else if(e[g]===1){e[g]=0;c._delayPushReq(a)}else if(e.reqCount===b.pushCount){if(new Date-i<1E3)c._fastCount++;
else c._fastCount=0;__.each(b.keys,function(h){j="pv_"+h;if(e[j]!==void 0&&e[j]!==null){n[h]=e[j];e[j]=void 0}});c._onDataLoaded(n,b.ids,b.id);c._delayPushReq(a);c=b=n=m=e=null}},{charset:"gbk",cache:true});if(d){__.FnCronLoader._purgeIframe(d,true);d=null}}},function(){var e;try{e=b.iframe.contentWindow&&b.iframe.contentWindow.__}catch(i){}return!!e},100)}};__.FnCronLoader.prototype._delayPushReq=function(a){var d=this,b=this._defSendDelay;b*=Math.pow(2,Math.floor(this._fastCount/2));try{setTimeout(function(){d._sendPushReq(a)},
b)}catch(c){}};__.FnCronLoader.prototype._onDataLoaded=function(a,d,b){var c,f,g=this,e=__.lang.isInt(b);f=e?g.pushCount:g.pollingCount;this._autoCache&&__.FnCronLoader.setCache(a);__.each(d,function(i){if(c=g.getJobById(i,e))if(c&&c.onData)if(!c.__created||e&&!c.__created[b]){c.onData(a,f);if(e)c.__created[b]=true;else c.__created=true;c.runOnce&&g.remJob(c.id)}else if(c.onUpdate)c.onUpdate(a,f);else c.onData(a,f)})};__.FnCronLoader.prototype._addPolling=function(a){var d=a&&a.judge,b,c=this;if(__.lang.isUndefined(a.judge)){d=
a.interval;a.judge=d}if(d&&__.lang.isInt(a.judge)&&d>0)a.judge=function(f){if(f%d===0)return 3;return 0};b=parseInt(a.interval,10);this.jobs[b]||(this.jobs[b]=[]);this.jobs[b].push(a);a.noWait&&setTimeout(function(){c._doPolling(a.id)},0)};__.FnCronLoader.prototype._addPush=function(a){this.jobs[0]||(this.jobs[0]=[]);a.__created=[];this.jobs[0].push(a);this._paused||this._consumePushJob()};__.FnCronLoader.prototype._remPushJob=function(a){var d,b,c,f;d=false;var g=this;if(this.jobs[0]){b=__.lang.findByAttr(this.jobs[0],
"id",a);if(b>-1){d=this.jobs[0][b];__.lang.arrayRemove(this.jobs[0],b);__.lang.isArray(d.sessionId)&&__.each(d.sessionId,function(e){c=g.pushSessions[e];f=__.lang.find(c.ids,function(i){return i===a});if(f>-1){__.lang.arrayRemove(c.ids,f);if(c.ids.length===0){c.running=false;c.keys=[];__.FnCronLoader._purgeIframe(c.iframe)}else g._updateSession(e,true)}});delete d.onData;delete d.onUpdate;d=true}}return d};__.FnCronLoader.prototype.isPushUsable=function(){return true};__.FnCronLoader.prototype.addJob=
function(a){var d;if(a.keys){if(__.lang.isString(a.keys))a.keys=a.keys.split(",");a.keys=__.lang.unique(a.keys)}if(__.lang.isUndefined(a.interval))a.interval=__.FnCronLoader.defaultInterval;d=++this._jobUidIdx;a.id=d+"-"+a.interval;if(a.type===2||!this.isPushUsable()||!a.keys||a.keys.length===0)this._addPolling(a);else{__.FnCronLoader._pushInited||__.FnCronLoader._initPush();this._addPush(a)}return a.id};__.FnCronLoader.prototype.remJob=function(a){var d,b;b=false;d=a.split("-")[1];if(this.jobs[d]){b=
__.lang.findByAttr(this.jobs[d],"id",a);if(b>-1){__.lang.arrayRemove(this.jobs[d],b);b=true}else b=this._remPushJob(a)}return b};__.FnCronLoader.prototype.start=function(){if(this.pollingCount===-1){this._paused=false;this.pollingCount++;this._doPolling();this._consumePushJob()}this.resume()};__.FnCronLoader.prototype.pause=function(){if(this._idIntv!==null){clearInterval(this._idIntv);this._idIntv=null}this._paused=true};__.FnCronLoader.prototype.resume=function(){var a=this;if(this._idIntv===null)this._idIntv=
setInterval(function(){a.pollingCount++;a._doPolling()},1E3);this._paused=false};__.FnCronLoader.prototype.stop=function(){this.pause();this.jobs={};this.pushCount=this.pollingCount=-1;this._jobUidIdx=0;__.dom.remEl(this._aIframes)}});

__.BasicModule.register("select","2.0",["lang","dom","selector","event","cookie","widget"],function(){var c;__.widget.Select=function(a,b){this._initCfg(b);this.id=a;this.listDisplaying=false;this.values={};this.value=this._config.defaultValue;this.lastActiveItem=null;if(!b.name)this._config.name=a+"_select";this._createEls();this._initEls();this._addEvents()};__.inherits(__.widget.Select,__.widget.Base);c=__.widget.Select;c.prototype._cfg={txt:{wrongValue:"the value to be set is wrong"},cls:{container:"du-select-ctn",
icon:"du-select-icon",value:"du-select-value",list:"du-select-list",item:"du-select-item",active:"du-select-active",input:"du-select-input"},status:{},defInstCfg:{width:45,height:20,lineHeight:13,borderColor:"#d0cece",bgColor:"#fff",items:{1:"item 1",2:"item 2"},zIndex:100,defaultValue:1,ctnZindex:1,fontsize:13,bgSrc:"http://mat1.gtimg.com/finance/stock/qq_panel/qq_bg2.gif",bgNormal:"-33px -64px",bgActive:"-63px 0",onChange:function(){}}};c.prototype._error=function(a){throw Error("du-select: "+a);
};c.prototype._initCfg=function(a){var b,d=0;a=a||{};b=this._config=__.lang.clone(this._cfg.defInstCfg);__.each(a,function(e,f){b[f]=e},true);if(__.lang.isUndefined(a.width)){__.each(a.items,function(e){e=String(e);if(e.length>d)d=e.length},true);b.width=d*(b.fontsize+1)+18}};c.prototype._initEls=function(){var a=__.dom.f(this.id),b=this._cfg.cls;this.els={ctn:a,innerCtn:__.dom.f("."+b.container,a),value:__.dom.f("."+b.value,a),icon:__.dom.f("."+b.icon,a),list:__.dom.f("."+b.list,a),input:__.dom.f("."+
b.input,a)}};c.prototype._addEvents=function(){var a=__.event.bind,b=this.els;a=[a(this._hlMouseOver,this),a(this._hlMouseOut,this),a(this._hlClick,this)];__.event.on(b.ctn,"mouseover",a[0]);__.event.on(b.ctn,"mouseout",a[1]);__.event.on(__.doc,"click",a[2]);this._fns=a};c.prototype._hlMouseOut=function(){this.els.icon.style.backgroundPosition=this._config.bgNormal};c.prototype._hlMouseOver=function(a){a=a.target||a.srcElement;var b=this.els;if(a===b.value||a===b.icon||a===b.value.parentNode)b.icon.style.backgroundPosition=
this._config.bgActive;else for(;a!==this.els.ctn;){if(__.dom.hasClass(a,this._cfg.cls.item)){this.setActive(a);break}a=a.parentNode}};c.prototype._hlClick=function(a){a=a.target||a.srcElement;var b=this.els;if(!this.listDisplaying&&(a===b.value||a===b.icon||a===b.icon.parentNode))this.show();else{if(__.dom.contains(b.ctn,a))for(;a&&a!==this.els.ctn;){if(__.dom.hasClass(a,this._cfg.cls.item)){this.set(__.lang.stripTags(a.innerHTML),true);break}a=a.parentNode}this.hide()}};c.prototype.setActive=function(a){this.clearActive();
a.style.background="#428fdc";a.style.color="#fff";this.lastActiveItem=a};c.prototype.clearActive=function(){if(this.lastActiveItem){this.lastActiveItem.style.background="#fff";this.lastActiveItem.style.color="#000";this.lastActiveItem=null}};c.prototype.toggle=function(){this.listDisplaying?this.hide():this.show()};c.prototype.show=function(){var a=this.els;if(!this.listDisplaying){a.list.style.display="block";a.value.style.background="#428fdc";a.value.style.color="#fff";a.innerCtn.style.zIndex=this._config.ctnZindex;
this.listDisplaying=true}};c.prototype.hide=function(){var a=this.els;if(this.listDisplaying){a.list.style.display="none";a.value.style.background="#fff";a.value.style.color="#000";a.innerCtn.style.zIndex="0";this.listDisplaying=false}};c.prototype.set=function(a,b){var d,e;if(b===true&&!__.lang.isUndefined(this.values[a])){e=a;a=this.values[a]}else e=this._config.items[a];if(__.lang.isUndefined(this._config.items[a]))this._error(this._cfg.txt.wrongValue);else{d=this.els.value;d.innerHTML="";__.dom.addText(d,
e);this.value=a;this.els.input.value=a;if(this._config.onChange)this._config.onChange(a,e)}};c.prototype._createEls=function(){var a,b,d,e,f,i=this._config,l=this;e=__.ua;f=i.width;a=[2];if(e.ie>6)a=[3];if(e.webkit)a=[1];b=[];d=this.values;__.each(i.items,function(j,k){b.push({css:"padding:2px 14px 0 3px;width:"+(f-21)+"px;background:#fff;",cls:l._cfg.cls.item,child:{tag:"nobr",css:"",text:j}});d[j]=k},true);__.dom.addEl({css:"height:"+i.height+"px;width:"+f+"px;cursor:pointer;font-size:"+this._config.fontsize+
"px;position:relative;z-index:0;",cls:this._cfg.cls.container,child:[{css:"height:1px;font-size:1px;line-height:0;margin:0 1px;background:"+this._config.borderColor+";width:"+(f-2)+"px;overflow:hidden;float:left;display:inline;"},{css:"background:"+this._config.bgColor+";border:1px solid "+this._config.borderColor+";border-width:0 1px;float:left;",child:[{css:"height:1px;font-size:1px;line-height:0;border:1px solid #e3e2e2;border-width:0 1px;border-top-color:#0f0;width:"+(f-4)+"px;float:left;"},{css:"height:"+
(this._config.lineHeight+3)+"px;float:left;padding-left:1px;width:"+(f-3)+"px;",child:[{css:"padding:"+a[0]+"px 1px 0 3px;float:left;height:"+this._config.lineHeight+"px;line-height:"+this._config.lineHeight+"px;",cls:this._cfg.cls.value,text:this._config.items[this.value]},{css:"width:11px;height:"+(this._config.lineHeight+3)+"px;float:right;background:transparent url("+i.bgSrc+") no-repeat "+i.bgNormal+";margin-right:1px;",cls:this._cfg.cls.icon},{css:"visibility:hidden;",html:'<input type="hidden" value="'+
this._config.defaultValue+'" name="'+this._config.name+'" class="'+this._cfg.cls.input+'"/>'}]},{css:"height:1px;font-size:1px;line-height:0;border:1px solid #e3e2e2;border-width:0 1px;width:"+(f-4)+"px;float:left;"}]},{css:"height:1px;font-size:1px;line-height:0;margin:0 1px;background:"+this._config.borderColor+";width:"+(f-2)+"px;float:left;display:inline;overflow:hidden;"},{cls:this._cfg.cls.list,css:"float:left;position:absolute;left:0px;top:"+(this._config.lineHeight+5)+"px;display:none;width:"+
f+"px;z-index:"+this._config.zIndex,child:[{css:"border:1px solid #D0CECE;/*border-bottom:0;*/background:#fff;padding:1px;text-align:left;",child:{tag:"ul",css:"list-style:none;padding:0;margin:0;",child:b}},{}]}]},this.id)};c.prototype.disposeInternal=function(){c._super.disposeInternal.call(this);__.event.off(this.els.ctn,"mouseover",this._fns[0]);__.event.off(this.els.ctn,"mouseout",this._fns[1]);__.event.off(__.doc,"click",this._fns[2]);this._fns=null;this.els.ctn=null;this.els.innerCtn=null;
this.els.value=null;this.els.icon=null;this.els.list=null;this.els=this.els.input=null}});

__.BasicModule.register("fn-smartbox","2.0",["lang","dom","selector","event","cookie","fn-table"],function(){var SmartBox;__.widget.SmartBox=function(id,config){var cfg,globalCfg=SmartBox._cfg;config=config||{};this.status=globalCfg.status.READY;this._config=__.lang.clone(globalCfg.defInstCfg);cfg=this._config;__.each(config,function(o,i){cfg[i]=o},true);cfg.inputHint=cfg.inputHint||globalCfg.txt.inputHint;this.moreCls=globalCfg.cls.more+id;this.zeroList=false;this._errQuery=false;this.listQT=""; this.loadingQT="";this.showCount=0;this._listJustCreated=false;this.form=null;this.queryIpt=null;this.subIpt=null;this.typeIpt=null;this.containerId=id;this.resultCtnId=id+globalCfg.resultCtnIdPostfix;this._createEls();this._initEls();this._initEvents();if(this._config.autoFocus)this.queryIpt.select()};__.inherits(__.widget.SmartBox,__.widget.Base);SmartBox=__.widget.SmartBox;SmartBox._cfg={liIdPrefix:"du-sx-li~",selectIdPrefix:"du-sx-sel-",resultCtnIdPostfix:"-du-sx-result",pstockLink:"http://stockapp.finance.qq.com/pstock/", hintUrl:"http://smartbox.gtimg.cn/s3/?",formActionBase:"http://stock.finance.qq.com/cgi-bin/",txt:{stocksearch:"\u80a1\u7968\u67e5\u8be2",ALL:"\u5168\u90e8",GP:"\u6caa\u6df1",HK:"\u6e2f\u80a1",JJ:"\u57fa\u91d1",AS:"\u7f8e\u80a1",FT:"\u671f\u8d27",check:"\u67e5\u8be2",pstock:"\u6211\u7684\u81ea\u9009\u80a1",inputHint:"\u4ee3\u7801/\u540d\u79f0/\u62fc\u97f3",errHint:"\u60a8\u8f93\u5165\u7684\u67e5\u8be2\u8bcd\u6709\u8bef",emptyHint:"\u8bf7\u8f93\u5165\u67e5\u8be2\u6761\u4ef6\uff1a\u4ee3\u7801/\u540d\u79f0/\u62fc\u97f3", noResult:"\u672a\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c"},cls:{query:"du-sx-query",submit:"du-sx-submit",select:"du-sx-select",type:"du-sx-type",li:"du-sx-li",more:"du-sx-more-"},status:{READY:0,INITED:1,HIDDEN:3,SHOWN:4},typeEnum:["ALL","GP","HK","JJ","AS","FT"],typeMap:{ALL:"all",GP:"gp",HK:"hk",JJ:"jj",AS:"us",FT:"qh"},mktMap:{sh:"\u4e0a\u6d77",sz:"\u6df1\u5733",jj:"\u57fa\u91d1",hk:"\u6e2f\u80a1",us:"\u7f8e\u80a1",qh:"\u671f\u8d27"},mktNumMap:{jj:0,sh:1,sz:51,hk:100,us:200,qh:350}, defInstCfg:{maxLine:13,typeWait:50,showType:true,defaultType:"ALL",showPLink:true,showTitle:true,directionUp:false,onclick:function(ids){if(ids.length===2)this.onMstats(ids[1]);else __.global.open(__.fnTable.getPageUrl(ids[1],ids[2])+"?pgv_ref=fi_smartbox&_ver="+__.BasicModule.loadedMods["fn-smartbox"],this.useSelf?"_self":"_blank")},onsubmit:false,onsubmit2:false,zindex:1,maxQuery:10,showMarket:true,listXOffset:0,listYOffset:0,name:"",inputHint:"",matchRecent:false,autoSelect:false,adjustLimit:2, showAll:true,sendToBoss:true,dataScope:null,useSelf:false,autoFocus:false,preFill:false,blurColor:"#B4B3B3",onMstats:false,iframeMask:false}};SmartBox.legalQuery=__.lang.getReg("^[.,0-9a-zA-Z\\u4e00-\\u9fa5]+$");SmartBox.getRecentCode=function(){var recent,result,map_stocktype;if(__.lang.isUndefined(this._recentCookieCache)){result=[];map_stocktype=__.fnTable.mapNumMarket;recent=(__.cookie.get("RECENT_CODE")+__.cookie.get("ASRECENT_CODE")).split("|");__.each(recent,function(o,i){if(o&&result.length< 10){o=o.split("_");if(o.length>1&&!__.lang.isUndefined(map_stocktype[o[1]]))result.push(map_stocktype[o[1]]+o[0]);else if(o.length===1)result.push("jj"+o[0])}});this._recentCookieCache=result.join(",").toLowerCase()}return this._recentCookieCache};SmartBox.setHover=function(li){if(this._lastHoverLi&&this._lastHoverLi!==li)this._lastHoverLi.style.backgroundColor="#fff";if(li&&li.style)li.style.backgroundColor="#deefff";this._lastHoverLi=li};SmartBox.prototype._getLine=function(){return{tag:"li",css:"padding:0;margin:4px 3px;float:left;_display:inline;background:#eaeaea;height:2px;line-height:2px;font-size:0;width:254px;"}}; SmartBox.prototype._showList=function(queryHash){var nameMaps,addBegin,addEnd,pos,i,matchStr,hiLightMatch,type,lists=[],lastIsRecent="",v="",isFirstNoneRecent,allRec={},query=queryHash.split("~"),vAry=this.cache[queryHash],that=this;if(this.listQT===queryHash){__.lang.log("Draw cancelled for the same query.");return}this.listQT=queryHash;type=query[1];query=query[0];if(this._config.directionUp){addBegin="push";addEnd="unshift"}else{addBegin="unshift";addEnd="push"}if(!this.resultList)return;this.resultList.innerHTML= "";hiLightMatch=function(s,endFirst){var uquery=query.toUpperCase(),hiStr='<span style="color:#f45243;height:20px;line-height:20px;">'+uquery+"</span>";s=s.toUpperCase();if(endFirst&&__.lang.endWith(s,uquery))s=s.substr(0,s.length-uquery.length)+hiStr;else s=s.replace(uquery,hiStr);return s};if(this._config.onMstats)if(vAry[2])__.each(vAry[2].split("^"),function(o){var obj={};o=o.split("~");obj.isMstats=true;obj.id=o[0];obj.col0=hiLightMatch(o[2]);obj.col2=hiLightMatch(o[0]);obj.col1=hiLightMatch(o[1]); lists.push(that._getLiObj(obj))});if(__.lang.isUndefined(vAry[0]))vAry[0]="N";__.each(vAry[0].split("^"),function(o){if(o)v+=o+"~Y^"});v+=vAry[1];v=v.split("^");__.each(v,function(o,i){var liObj;o=o.split("~");liObj={};if(!o||o.length<4)return;if(lists.length>=that._config.maxLine)return;liObj.code=o[1].toUpperCase();liObj.numType=SmartBox._cfg.mktNumMap[o[0]];liObj.market=SmartBox._cfg.mktMap[o[0]];if(o[4]==="QH-IF"){liObj.market="\u80a1\u671f";liObj.numType=300}liObj.category=o[4];liObj.name=o[2]; switch(o[4]){case "FJ":case "ETF":liObj.market="\u57fa\u91d1";break}if(liObj.numType===200){pos=o[1].indexOf(".");liObj.col0=pos>0?o[1].substr(0,pos):o[1]}else liObj.col0=o[1];liObj.col0=hiLightMatch(liObj.col0,true);liObj.col1=hiLightMatch(o[2]);liObj.col2=hiLightMatch(o[3]);liObj=that._getLiObj(liObj);if(liObj){if(lastIsRecent!==o[7]&&lists.length>0)lists[addEnd](that._getLine());lastIsRecent=o[7];if(o[0]+"~"+o[3]==="00700~100")lists[addBegin](liObj);else lists[addEnd](liObj)}});if(lists.length> 0){if(this._config.showMarket&&this._config.showAll)lists[addEnd]({tag:"li",css:"padding:0;float:left;_display:inline;text-align:right;width:250px;height:20px;line-height:20px;",child:{tag:"b",text:"\u67e5\u770b\u5168\u90e8",cls:this.moreCls,css:"color:blue;text-decoration:underline;font-weight:normal;cursor:pointer;"}});if(__.ua.ie===6)__.dom.f(this.resultCtnId).style.paddingBottom=lists.length===1?"0":"3px";__.dom.addEl(lists,this.resultList);this.zeroList=false;SmartBox.setHover(this._config.directionUp? this.resultList.lastChild:this.resultList.firstChild);this._listJustCreated=true;this.show(true)}else{this.zeroList=true;this._showError(SmartBox._cfg.txt.noResult.replace("##query##",query))}};SmartBox.prototype._getLiObj=function(o){var warrantOrBstock=false,diffWidth,commonCss,col2,showMarket;commonCss="height:20px;line-height:20px;overflow:hidden;";showMarket=this._config.showMarket;if(o.numType===200&&o.col2==="*"){diffWidth=showMarket?[246,54,142,5,45,0]:[138,44,89,0,0,0];col2=false}else if(o.isMstats)diffWidth= [246,54,75,5,60,0];else{diffWidth=showMarket?[246,54,75,5,60,5]:[138,44,48,5,36,0];col2={tag:"span",css:"float:left;width:"+diffWidth[4]+"px;margin-right:"+diffWidth[5]+"px;"+commonCss,html:o.col2}}if(showMarket)if(o.isMstats){col2={tag:"span",css:"float:left;width:"+diffWidth[4]+"px;margin-right:"+diffWidth[5]+"px;"+commonCss,html:o.col2};warrantOrBstock={tag:"span"}}else{if(o.numType===1)if(o.code.substr(0,1)==="9")warrantOrBstock=2;else{if(o.code.substr(0,2)==="58")warrantOrBstock=1}else if(o.numType=== 51)if(o.code.substr(0,1)==="2")warrantOrBstock=2;else if(o.code.substr(0,2)==="03")warrantOrBstock=1;warrantOrBstock={tag:"span",css:"float:right;width:40px;text-align:right;color:#a9a9a9;"+commonCss,text:o.market}}return{tag:"li",css:"padding:0;margin:0 2px;cursor:pointer;float:left;_display:inline;_margin:0 1px;",id:SmartBox._cfg.liIdPrefix+(o.isMstats?o.id:o.code+"~"+o.numType+"~"+(o.category||"")+"~"+o.name),cls:SmartBox._cfg.cls.li,child:{css:"margin:0 5px;float:left;_display:inline;width:"+ diffWidth[0]+"px;"+commonCss,child:{tag:"nobr",child:[{tag:"span",css:"float:left;width:"+diffWidth[1]+"px;margin-right:5px;"+commonCss,html:o.col0},{tag:"span",css:"float:left;font-family:Arial;margin-right:"+diffWidth[3]+"px;height:20px;line-height:22px;_line-height:23px;overflow:hidden;width:"+diffWidth[2]+"px;",html:o.col1},col2,warrantOrBstock]}}}};SmartBox.prototype._getListCtn=function(adjustPosition){var ipt,obj,width,ctn=__.dom.f(this.resultCtnId);width=this._config.showMarket?260:152;if(!ctn){obj= {id:this.resultCtnId,css:"width:"+width+"px;overflow:hidden;text-align:left;background:#FFF;position:absolute;font-size:12px;visibility:hidden;z-index:"+this._config.zindex,child:[{tag:"ul",css:"font-family:Arial;margin:0;padding:0;border:1px solid #9c9c9c;padding:3px 0;list-style:none;overflow:hidden;_zoom:1;"}]};if(__.ua.ie===6||this._config.iframeMask)obj.child.push({tag:"iframe",css:"width:290px;height:3000px;filter:alpha(opacity=0);position:absolute;top:0;left:-1px;z-index:-1;",frameBorder:"0"}); ctn=__.dom.addEl(obj);__.dom.insertBefore(ctn,__.doc.body.firstChild);this.resultList=ctn.getElementsByTagName("ul")[0];ipt=this.queryIpt;ctn.style.left=__.dom.getPosition(ipt,"offsetLeft")+this._config.listXOffset+"px";ctn.style.top=__.dom.getPosition(ipt,"offsetTop")+ipt.offsetHeight+this._config.listYOffset+1+"px"}else if(adjustPosition){ipt=this.queryIpt;ctn.style.left=__.dom.getPosition(ipt,"offsetLeft")+this._config.listXOffset+"px";ctn.style.top=__.dom.getPosition(ipt,"offsetTop")+ipt.offsetHeight+ this._config.listYOffset+1+"px"}return ctn};SmartBox.prototype._sendRequest=function(){var url,query,type,hashName,qipt=this.queryIpt,tipt=this.typeIpt,cac=this.cache,that=this;query=__.lang.trim(qipt.value).toLowerCase();type=tipt.value;hashName=query+"~"+type;if(this.listQT===hashName){__.lang.log("same query:"+hashName);return}if(this.loadingQT===hashName)return;if(query===""){this.listQT="";this.hide();return}else if(!SmartBox.legalQuery.test(query)){this.listQT=hashName;this._errQuery=true;this._showError(); return}if(cac[hashName])this._showList(hashName);else{url=SmartBox._cfg.hintUrl+"q="+encodeURIComponent(query)+"&t="+encodeURIComponent(SmartBox._cfg.typeMap[type]);if(this._config.onMstats)url+="&c=1";if(this._config.matchRecent)url+="&c="+encodeURIComponent(SmartBox.getRecentCode());setTimeout(function(){var scope=that._config.dataScope||__.global;if(__.lang.trim(qipt.value).toLowerCase()===query&&that.typeIpt.value===type){__.lang.log("begin load query:"+query);that.loadingQT=hashName;__.load(url, function(){__.lang.log("data loaded for "+query+"~"+type);that.loadingQT="";if(__.lang.trim(qipt.value).toLowerCase()===query&&that.typeIpt.value===type){cac[hashName]=[scope.v_hint_R,scope.v_hint];if(that._config.onMstats)cac[hashName].push(scope.v_cate_hint||"");that._showList(hashName);__.lang.log("list drawed for "+that.listQT);scope.v_cate_hint=undefined;scope.v_hint_R=undefined;scope.v_hint=undefined}},{charset:"gbk",cache:true,doc:scope.document})}},this._config.typeWait)}};SmartBox.prototype.cache= {};SmartBox.prototype._createEls=function(){var types,ct,atta,ctn=__.dom.f(this.containerId),sSelect=false,pStockLink=false,showTitle=false,fillTxt=this._config.preFill||this._config.inputHint,n="ZHENGQUANDM";atta=this._config.attach;if(atta){if(!atta.form[n]){if(__.ua.ie)try{ct=__.doc.createElement('<input name="'+n+'" type="hidden">')}catch(e){ct=false}if(!ct){ct=__.doc.createElement("input");ct.name=n;ct.type="hidden"}atta.form.appendChild(ct)}}else{if(this._config.showType)sSelect={css:"margin-left:10px;margin-right:2px;_margin-top:1px;float:left;", id:SmartBox._cfg.selectIdPrefix+this.containerId};if(this._config.showPLink)pStockLink={css:"float:left;height:20px;line-height:23px;",child:{tag:"a",text:SmartBox._cfg.txt.pstock,href:SmartBox._cfg.pstockLink,target:"_blank"}};if(this._config.showTitle)showTitle={text:SmartBox._cfg.txt.stocksearch,css:"float:left;height:20px;line-height:23px;"};__.dom.addEl({tag:"form",target:"_blank",css:"float:left;z-index:"+this._config.zindex,method:"post",child:{tag:"ul",css:"list-style:none;margin:0;padding:0;font-size:12px;font-family:Arial;color:#333333;", child:[showTitle,sSelect,{css:"float:left",html:'<input type="text" style="width:96px;height:16px;padding:2px 0 0 4px;line-height:16px;border:1px solid #D0CECE;vertical-align:top;margin-right:5px;font-size:12px;color:'+this._config.blurColor+";font-family:Arial;"+(this._config.showType?"":"margin-left:5px;")+'" value="'+fillTxt+'" class="'+SmartBox._cfg.cls.query+'" name="cl" autocomplete="off" maxlength="'+this._config.maxQuery+'" />'},{css:"float:left;margin-right:15px;display:inline;padding-top:1px;_padding-top:2px;", child:[{tag:"input",type:"submit",css:"width:47px;border:0;cursor:pointer;background:transparent url(http://mat1.gtimg.com/finance/stock/images/smartbox-btn2.png) no-repeat scroll 0px 0px;vertical-align:top;font-size:12px;"+(__.ua.ie?"height:19px;padding:3px 5px 0;":"height:19px;padding:0 5px;"),value:SmartBox._cfg.txt.check,cls:SmartBox._cfg.cls.submit},{tag:"span",html:'<input type="hidden" name="ZHENGQUANDM"/>'+(this._config.showType?"":'<input type="hidden" value="" name="qc_type" class="'+SmartBox._cfg.cls.type+ '" />')}]},pStockLink]}},ctn);ctn.style.height="21px"}ct=ctn=null};SmartBox.prototype._hlResize=function(e){var ipt=this.queryIpt,ctn=this._getListCtn();ctn.style.left=__.dom.getPosition(ipt,"offsetLeft")+this._config.listXOffset+"px";ctn.style.top=__.dom.getPosition(ipt,"offsetTop")+ipt.offsetHeight+1+"px";this.hide()};SmartBox.prototype._hlScroll=function(e){var ua=__.ua;if((ua.gecko||ua.webkit)&&e.target!==__.doc)return;this.hide()};SmartBox.prototype._hlFocus=function(e){var tat=e.srcElement|| e.target,r;if(tat.value===this._config.inputHint)tat.value="";tat.style.color="#333333";if(this._config.autoSelect)tat.select();if(this.status===SmartBox._cfg.status.HIDDEN&&(this.isQueryChanged()||!this._config.autoSelect))this.show()};SmartBox.prototype._hlBlur=function(e){var tat=e.srcElement||e.target;if(tat.value===""){tat.style.color=this._config.blurColor;tat.value=this._config.inputHint}};SmartBox.prototype._hlKeyup=function(e){if(!__.lang.inArray(e.keyCode,[13,27,38,40])){__.lang.log("user key up : "+ this.queryIpt.value);this._errQuery=false;this._sendRequest()}};SmartBox.prototype._hlKeydown=function(e){var nextLi,ipt=this.queryIpt;if(this.status===SmartBox._cfg.status.SHOWN&&!this._errQuery)switch(e.keyCode){case 38:if(this.zeroList)return;if(!this.resultList)return;nextLi=SmartBox._lastHoverLi&&SmartBox._lastHoverLi.previousSibling?SmartBox._lastHoverLi.previousSibling:this.resultList.lastChild;if(!__.dom.hasClass(nextLi,SmartBox._cfg.cls.li))nextLi=nextLi.previousSibling?nextLi.previousSibling: this.resultList.lastChild;SmartBox.setHover(nextLi);__.event.stopEvent(e);break;case 40:if(this.zeroList)return;if(!this.resultList)return;nextLi=SmartBox._lastHoverLi&&SmartBox._lastHoverLi.nextSibling?SmartBox._lastHoverLi.nextSibling:this.resultList.firstChild;if(!__.dom.hasClass(nextLi,SmartBox._cfg.cls.li))nextLi=nextLi.nextSibling?nextLi.nextSibling:this.resultList.firstChild;SmartBox.setHover(nextLi);__.event.stopEvent(e);break;case 27:this.hide();break;case 13:this._enterPressed=true;break}else if(this.status=== SmartBox._cfg.status.HIDDEN)if(e.keyCode===38||e.keyCode===40||ipt.value.length===1&&ipt.value.charCodeAt(0)===e.keyCode||e.ctrlKey&&e.keyCode===86)this.show()};SmartBox.prototype._hlMouseover=function(e){var reltg=e.relatedTarget?e.relatedTarget:e.fromElement,tat=e.target||e.srcElement;while(tat&&tat!==__.doc.documentElement&&tat.className!==SmartBox._cfg.cls.li)tat=tat.parentNode;if(tat.className===SmartBox._cfg.cls.li)SmartBox.setHover(tat)};SmartBox.prototype._hlDocClick=function(e){var tat=e.target|| e.srcElement,ids;if(tat===this.subIpt)return;if(tat===this.queryIpt){if(this.status===SmartBox._cfg.status.SHOWN&&!this._errQuery&&this._config.autoSelect&&!this._listJustCreated)this.hide();if(this._config.autoSelect)this.queryIpt.select();this._listJustCreated=false;return}if(tat.className===this.moreCls){this._setForm();return}if(this.status!==SmartBox._cfg.status.SHOWN)return;while(tat&&tat!==__.doc.documentElement&&tat.className!==SmartBox._cfg.cls.li)tat=tat.parentNode;if(tat&&tat.className=== SmartBox._cfg.cls.li){ids=tat.id.split("~");this._onSelect(ids,1)}this.hide()};SmartBox.prototype.getResult=function(){if(this.zeroList)return false;if(this._resultQT==__.lang.trim(this.queryIpt.value).toLowerCase()+"~"+this.typeIpt.value)return this._resultIds;if(!this.resultList)return false;var ids=this._hasMatchRow(),first=this._config.directionUp?this.resultList.lastChild:this.resultList.firstChild;if(!ids&&first)ids=first.id.split("~");return ids};SmartBox.prototype._hlSubmit=function(e){var formx, ids,first,that=this,subType=this._enterPressed?0:2;this._enterPressed=false;if(this._config.onsubmit2){this._config.onsubmit2(e,SmartBox._lastHoverLi,this);return}if(!this.zeroList&&!this.isQueryChanged()){if(!this.resultList){__.event.preventDefault(e);return false}first=this._config.directionUp?this.resultList.lastChild:this.resultList.firstChild;if(subType===0){if(this.status===SmartBox._cfg.status.SHOWN)if(SmartBox._lastHoverLi||first){ids=(SmartBox._lastHoverLi||first).id.split("~");this._onSelect(ids, subType);this.hide()}}else{ids=this._hasMatchRow();if(ids){this._onSelect(ids,subType);this.hide()}else{ids=first.id.split("~");this._onSelect(ids,subType);this.hide()}}}else if(this._checkInput())if(!this.isQueryChanged()){if(this._config.onsubmit)this._config.onsubmit(this.queryIpt.value,this.typeIpt.value,e);else this._setForm(e);return}else{__.lang.log("b4show redefined");this.b4Show=function(){var first=that._config.directionUp?that.resultList.lastChild:that.resultList.firstChild;ids=that._hasMatchRow(); if(ids){that._onSelect(ids,subType);that.hide()}else if(!that.zeroList){ids=first.id.split("~");that._onSelect(ids,subType);that.hide()}else if(that._config.onsubmit)that._config.onsubmit(that.queryIpt.value,that.typeIpt.value,e);else that._setForm(e);that.b4Show=false;return false}}__.event.preventDefault(e)};SmartBox.prototype.hide=function(){if(this.status===SmartBox._cfg.status.SHOWN){__.lang.log("to hide");this._getListCtn().style.visibility="hidden";SmartBox.setHover(null);this.status=SmartBox._cfg.status.HIDDEN}}; SmartBox.prototype.show=function(justShow,doAdjust){if(justShow||!this.isQueryChanged()){doAdjust=typeof doAdjust==="boolean"?doAdjust:this.showCount++<this._config.adjustLimit;if(!this.b4Show||this.b4Show()){var list=this._getListCtn(doAdjust);list.style.visibility="visible";this.status=SmartBox._cfg.status.SHOWN}}else{__.lang.log("send from show");this._sendRequest()}};SmartBox.prototype.isQueryChanged=function(){return this.listQT!==__.lang.trim(this.queryIpt.value).toLowerCase()+"~"+this.typeIpt.value}; SmartBox.prototype._onSelect=function(ids,selectType){var url;this._resultQT=this.listQT;this._resultIds=ids;if(this._config.sendToBoss){url=["http://btrace.qq.com/collect?sIp=","&iQQ=",__.cookie.get("o_cookie")||"0","&sBiz=finance.stock.smartbox","&sOp=browse&iSta=0&iTy=179&iFlow=",new Date%1E8,"&sInput=",encodeURIComponent(this.queryIpt.value),"&sSubmit=",selectType===0?"enter":selectType===1?"click":"button","&sMarket=",encodeURIComponent(this.typeIpt.value.toLowerCase()),"&sCode=",encodeURIComponent(__.fnTable.mapNumMarket[ids[2]]+ ids[1]),"&sName=",encodeURIComponent(ids[4]),"&sRefer=",encodeURIComponent((location.host+location.pathname).substr(0,200))].join("");this._bossImg=new Image;this._bossImg.src=url}this._config.onclick(ids)};SmartBox.prototype._initEls=function(){var types,tmp,ct,cl=SmartBox._cfg.cls,pre="#"+this.containerId+" .";if(!this._config.attach){this.queryIpt=__.dom.f(pre+cl.query);this.subIpt=__.dom.f(pre+cl.submit);this.form=__.dom.f("#"+this.containerId+" form");if(this._config.showType){types={};ct=SmartBox._cfg.txt; __.each(SmartBox._cfg.typeEnum,function(o){types[o]=ct[o]});this.typeIpt=new __.widget.Select(SmartBox._cfg.selectIdPrefix+this.containerId,{items:types,defaultValue:this._config.defaultType,fontsize:12,name:"qc_type"})}else{this.typeIpt=__.dom.f(pre+cl.type);this.typeIpt.value=this._config.defaultType}}else{tmp=this._config.attach;this.form=tmp.form;this.queryIpt=tmp.query;this.subIpt=tmp.submit;this.typeIpt=tmp.type;if(this._config.preFill)this.queryIpt.value=this._config.preFill;this.typeIpt.value= this._config.defaultType}this.queryIpt.onfocus=null};SmartBox.prototype._initEvents=function(){var qipt=this.queryIpt,that=this,oe=__.event,bind=oe.bind,fns;fns=[bind(that._hlFocus,that),bind(that._hlBlur,that),bind(that._hlKeyup,that),bind(that._hlKeydown,that),bind(that._hlMouseover,that),bind(that._hlDocClick,that),bind(that._hlSubmit,that),bind(that._hlResize,that),bind(that._hlScroll,that)];oe.on(qipt,"focus",fns[0]);oe.on(qipt,"blur",fns[1]);oe.on(qipt,"keyup",fns[2]);oe.on(qipt,"keydown",fns[3]); oe.on(this._getListCtn(),"mouseover",fns[4]);oe.on(__.doc,"click",fns[5]);oe.on(that.form,"submit",fns[6]);oe.on(__.global,"resize",fns[7],true);oe.on(__.global,"scroll",fns[8],true);that._fns=fns;qipt=null;that=null};SmartBox.prototype._hasMatchRow=function(){if(!this.resultList)return false;var i,q=this.queryIpt.value,nodes=this.resultList.childNodes,result=false;if(!this.zeroList){if(nodes.length===1)i=0;else i=__.lang.find(nodes,function(o){if(!o.id)return false;var keyword=o.id.split("~")[1]; keyword=keyword&&keyword.split(".")[0];return keyword===q});if(i!==-1)result=nodes[i].id.split("~")}return result};SmartBox.prototype._checkInput=function(){var result=SmartBox._cfg.txt.errHint,s=this.queryIpt.value;s=s.replace(__.lang.getReg("\\s","gi"),"");if(s===""||s===this._config.inputHint)result=SmartBox._cfg.txt.emptyHint;else if(__.lang.getReg("^[\\*\\/0-9a-zA-Z\\u4e00-\\u9fa5]+$").test(s)&&!__.lang.getReg("[\\\\\\/<>#\\$&]").test(s))result=true;if(result!==true)this._showError(result);return result=== true};SmartBox.prototype._showError=function(txt){if(!this.resultList)return;txt=txt||SmartBox._cfg.txt.errHint;this.resultList.innerHTML="";__.dom.addEl({tag:"li",css:"padding:5px 0 5px 7px;line-height:15px;",html:txt},this.resultList);this.show(true)};SmartBox.prototype._setForm=function(e){if(e)__.event.stopEvent(e);var base="http://stock.finance.qq.com/sstock/search.php?c=utf8"+"&t=all&q="+encodeURIComponent(this.queryIpt.value.split(".")[0]);__.global.open(base,"_blank")};SmartBox.prototype.disposeInternal= function(){var tmp=this.queryIpt,fns=this._fns,nul=null,that=this,oe=__.event;SmartBox._super.disposeInternal.call(this);oe.off(tmp,"focus",fns[0]);oe.off(tmp,"blur",fns[1]);oe.off(tmp,"keyup",fns[2]);oe.off(tmp,"keydown",fns[3]);oe.off(this._getListCtn(),"mouseover",fns[4]);oe.off(__.doc,"click",fns[5]);oe.off(that.form,"submit",fns[6]);oe.off(__.global,"resize",fns[7],true);oe.off(__.global,"scroll",fns[8],true);that._fns=nul;that.form=nul;that.queryIpt=nul;that.subIpt=nul;that.typeIpt=nul;tmp= that._config;tmp.dataScope=nul;tmp.onclick=nul;tmp.onsubmit=nul;tmp.onsubmit2=nul}});

(function(){__.set("__.app.qindex");var f={red:"#CC0000",green:"#41A98D"},l=[["myZhang","+"],["myDie",""],["myPing",""]];__.app.qindex={indexList:{listMap:{"0":"s_sh000001",1:"s_r_hkHSI",2:"s_usDJI"},imgMap:{s_sh000001:["hushen/indexs/000001.png","http://stockhtm.finance.qq.com/hqing/zhishu/000001.htm","shstockchart","shstockdata"],s_r_hkHSI:["hongkong/HSI.png","http://stock.qq.com/hkHSI","hkstockchart","hkstockdata"],s_usDJI:["as/DJI.png","http://stockhtm.finance.qq.com/astock/ggcx/DJI.htm","DJIstockchart",
"DJIstockdata"]},indexCode:"s_sh000001",indexTimer:!1,init:function(){var a=this,b=__.dom.$(".index-list li");__.event.on(b[0],"mouseover",function(){b[0].className="selected";b[1].className="";b[2].className="";a.indexCode=a.listMap["0"];a.get(a.indexCode)});__.event.on(b[1],"mouseover",function(){b[0].className="";b[1].className="selected";b[2].className="";a.indexCode=a.listMap["1"];a.get(a.indexCode)});__.event.on(b[2],"mouseover",function(){b[0].className="";b[1].className="";b[2].className=
"selected";a.indexCode=a.listMap["2"];a.get(a.indexCode)});this.get();a.indexTimer=setInterval(function(){a.get()},3E5)},get:function(a){var b=this,a=a||b.indexCode;__.load("http://qt.gtimg.cn/q="+a,function(){var e=__.global["v_"+a];if(e){var c="",d=e.split("~"),g=d[1],i=d[3],e=d[4],d=d[5];if(0<e)var j=f.red,c="+";else 0>e&&(j=f.green);__.dom.f(".stkname").innerHTML='<a href="'+b.imgMap[a][1]+'" target="_blank" bosszone="'+b.imgMap[a][3]+'">'+g+"</a>";g=__.dom.f(".price");g.style.color=j;g.innerHTML=
i;i=__.dom.f(".s");i.style.color=j;i.innerHTML=c+e+" &nbsp&nbsp "+c+d+"%";b.charting(a)}})},charting:function(a){var a=a||this.indexCode,b=this.imgMap[a][0],e=this.imgMap[a][1],a=this.imgMap[a][2],c=[];c.push('<a target="_blank" href="');c.push(e);c.push('" bosszone="');c.push(a);c.push('"><img width="130" height="75" boss="7" id="stocknum_img_GP" name="stocknum_img_GP" style="border:1px solid #d2e0ef" src="http://img.gtimg.cn/images/hq_parts_little8_2/');c.push(b);c.push('"></a>');b=c.join("");__.dom.f("#stockImg").innerHTML=
b}},pStock:{_pStockTimer:!1,_hasPopEvent:!1,init:function(){if(this.uin!=(__.cookie.get("uin")||"").replace(/o0*/,""))this.loadPstockData(),that=this,that._pStockTimer&&(clearTimeout(that._pStockTimer),that._pStockTimer=!1),that._pStockTimer=setInterval(function(){that.loadPstockData()},3E5)},loadPstockData:function(){var a=this;a.pop=__.dom.f("pstockList");a.uin=(__.cookie.get("uin")||"").replace(/o0*/,"");a.uin&&__.load("http://stockapp.finance.qq.com/panel/qq_stk.php?nolog=1&printtype=js&action=show&check=2&uin="+
a.uin,function(){var b=__.global.stockInfo,e=[],c=[];b&&0==b.code&&b.data&&b.data.stock&&__.each(b.data.stock.split("|"),function(a){a=a.split("~");if("hk"==a[0].substr(0,2))e.push("s_r_"+a[0]),"stk"==a[3]&&c.push(a[0]);else if("us"==a[0].substr(0,2)){var b=a[0].replace(/\.[^.]+$/,"").replace(/\./g,"__"),i=a[0].replace(/\.[\w\.]+$/,"");e.push("s_"+b);"stk"==a[3]&&c.push(i)}else e.push("s_"+a[0]),("stka"==a[3]||"stkb"==a[3])&&c.push(a[0])});0<e.length?(a.loadMsg(),a.loadQt(e),b=c.slice(0,60),a.loadPstockNews(b)):
a.pstockBarInfo("none")})},loadMsg:function(){var a=__.dom.f("mymsg");__.load("http://message.finance.qq.com/tips/get_msg_num.php?uid="+this.uin+"&_r="+Math.random(),function(){var b=__.global.v_msg_num;b&&b.total_num?(b=b.total_num[1]||0,99<b&&(b=99),a.innerHTML='<a href="http://stockapp.finance.qq.com/pstock/msgbox.php?_r='+Math.random()+'" target="_blank" bossZone="pstockinfor">\u6211\u7684\u6d88\u606f<span class="myPing"><strong>'+b+"</strong></span></a>"):a.innerHTML='<a href="http://stockapp.finance.qq.com/pstock/msgbox.php?_r='+
Math.random()+'" target="_blank" bossZone="pstockinfor">\u6211\u7684\u6d88\u606f<span class="myPing"><strong>--</strong></span></a>'})},_getURL:function(a,b){var e="";switch(a){case "":case "0":5<b.length&&(e="http://stockhtm.finance.qq.com/fund/djj_jjcx/"+b+".htm");break;case "1":e="000"===b.substr(0,3)?"http://stockhtm.finance.qq.com/hqing/zhishu/"+b+".htm":"http://stockhtm.finance.qq.com/sstock/ggcx/"+b+".shtml";break;case "51":e="39"===b.substr(0,2)?"http://stockhtm.finance.qq.com/hqing/zhishu/"+
b+".htm":"http://stockhtm.finance.qq.com/sstock/ggcx/"+b+".shtml";break;case "100":5>=b.length&&(e="http://stock.qq.com/hk"+b);break;case "200":"."===b.substr(0,1)&&(b=b.substr(1));e="http://stockhtm.finance.qq.com/astock/ggcx/"+b.toUpperCase()+".htm";break;case "300":e="http://stockhtm.finance.qq.com/if/ggcx/"+b.toUpperCase()+".shtml";break;case "350":e="http://stockhtm.finance.qq.com/money/future/quotpage/f/"+b.toUpperCase()+".htm"}return e||"http://finance.qq.com/"},_timerPopHide:!1,_timerShow:!1,
_tleft:"185",_bossZone:"pstockrose1",_showPop:function(a){if(0<this._qtData[a].length){var b=l[a][0],e=l[a][1],c=[];0==a?(this._tleft="185",this._bossZone="pstockrose1"):1==a?(this._tleft="224",this._bossZone="pstockdrop1"):2==a&&(this._tleft="264",this._bossZone="pstocklevel1");c.push('<div class="myFinanceBoxInner" bossZone="'+this._bossZone+'"><table>');for(var a=this._qtData[a],d=0;d<a.length;++d){var g=a[d][0],i=a[d][2];5<g.length&&(g="0",i=a[d][0]);var j="--",k="--";if(i)var h=this._getURL(g,
i),j='<a href="'+h+'" target="_blank">'+i+"</a>";else j=a[d][0];a[d][1]&&(k=wname=a[d][1],6<wname.length&&(k=wname.substring(0,4)),k='<a href="'+h+'" target="_blank" title="'+wname+'">'+k+"</a>");g=a[d][3]?e+a[d][3]:"--";i=a[d][5]?e+a[d][5]+"%":"--";c.push("<tr>");c.push("<td>"+j+"</td>");c.push("<td>"+k+"</td>");c.push('<td class="'+b+'">'+g+"</td>");c.push('<td class="'+b+'">'+i+"</td>");c.push("</tr>")}c.push('</table><div class="myFinanceIcon" style="left:'+this._tleft+'px;"></div></div>');b=
c.join("");__.dom.f("pstockList").innerHTML=b;__.dom.f("pstockList").style.display="block"}else __.dom.f("pstockList").style.display="none"},showPop:function(a){"undefined"===typeof a?this._timerPopHide&&(clearTimeout(this._timerPopHide),this._timerPopHide=!1):this._timerShow||(this._timerShow=setTimeout(function(){that._timerShow=!1;that._showPop(a)},800),this._timerPopHide&&(clearTimeout(this._timerPopHide),this._timerPopHide=!1))},hidePop:function(a){this._timerShow&&(clearTimeout(this._timerShow),
this._timerShow=!1);if(this.pop){var b=this;!0===a?(clearTimeout(this._timerPopHide),b.pop.style.display="none"):(clearTimeout(this._timerPopHide),this._timerPopHide=setTimeout(function(){b.pop.style.display="none";b._timerPopHide=false},a||1E3))}},_qtData:[[],[],[]],loadQt:function(a){var b=[0,0,0],e=a.length,c=this;c._pStockTimer&&(c._qtData=[[],[],[]]);for(;0<a.length;){var d=a.slice(0,60),a=a.slice(60),g="http://qt.gtimg.cn/q="+d.join(",");__.load(g,function(){var a=d;return function(){for(var d=
0;d<a.length;d++){e--;var g=a[d],h=__.global["v_"+g],f=2;if(h){h=h.split("~");g=h[0]&&h[0].length==6?5:4;h[g]>0?f=0:h[g]<0&&(f=1)}else h=[g.replace(/^s_(r_)?(sh|sz|us|jj|hk)/,"")];c._qtData[f].push(h);b[f]++}if(e<1){d='<a href="http://stockapp.finance.qq.com/pstock?_r='+Math.random()+'" bossZone="pstockrose" target="_blank">\u6da8<span class="myZhang" id="pstock-0"><strong>'+b[0]+"</strong></span></a>";h='<a href="http://stockapp.finance.qq.com/pstock?_r='+Math.random()+'" bossZone="pstockdrop" target="_blank">\u8dcc<span class="myDie" id="pstock-0"><strong>'+
b[1]+"</strong></span></a>";f='<a href="http://stockapp.finance.qq.com/pstock?_r='+Math.random()+'" bossZone="pstocklevel" target="_blank">\u5e73<span class="myPing" id="pstock-0"><strong>'+b[2]+"</strong></span></a>";__.dom.f("myz").innerHTML=d;__.dom.f("myd").innerHTML=h;__.dom.f("myp").innerHTML=f;c._qtData[0]=c._qtData[0].sort(function(a,b){return b[5]-a[5]}).slice(0,5);c._qtData[1]=c._qtData[1].sort(function(a,b){return a[5]-b[5]}).slice(0,5);c._qtData[2]=c._qtData[2].sort(function(a,b){return a.length>
1?-1:b.length>1?1:0}).slice(0,5);if(!c._hasPopEvent){d=__.dom.f("myz");h=__.dom.f("myd");f=__.dom.f("myp");__.event.on(d,"mouseover",function(){c.showPop(0)});__.event.on(d,"mouseout",function(){c.hidePop()});__.event.on(h,"mouseover",function(){c.showPop(1)});__.event.on(h,"mouseout",function(){c.hidePop()});__.event.on(f,"mouseover",function(){c.showPop(2)});__.event.on(f,"mouseout",function(){c.hidePop()});d=__.dom.f("pstockList");__.event.on(d,"mouseover",function(){c.showPop()});__.event.on(d,
"mouseout",function(){c.hidePop(500)});c._hasPopEvent=true}__.dom.f("zxgbar-zdp").style.display="block";__.dom.f("zxgbar").style.display="none"}}}())}},pstockBarInfo:function(a){var b="";"none"==a&&(b='<a href="http://stockapp.finance.qq.com/pstock?_r='+Math.random()+'" target="_blank" class="zixuangu" bossZone="pstockadd">\u6211\u7684\u81ea\u9009\u80a1\uff1a</a> \u8fd8\u6ca1\u6709\u6dfb\u52a0\u81ea\u9009\u80a1 <a href="http://stockapp.finance.qq.com/pstock?_r='+Math.random()+'" target="_blank" bossZone="pstockadd">[\u6dfb\u52a0]</a>',
__.dom.f("zxgbar").innerHTML=b)},loadPstockNews:function(a){var b="http://news.gtimg.cn/?name=finance_news_cn&n=10&q="+a;__.load("http://qt.gtimg.cn/q=stdunixtime",function(){var a=__.global.v_stdunixtime;a&&9<a.length&&__.load(b,function(){var b=__.global.finance_news_cn;if(b&&0<b.length)for(var d=0;d<b.length;d++){var g=b[d],f=g[2],j=g[0],j=j.replace(/-/g,"/"),j=Math.round((new Date(j)).getTime()/1E3);if(36>=Math.round((a-j)/3600)&&15<f.length&&21>f.length){b=g[3];__.dom.f("pstock-news").innerHTML=
'<a href="'+encodeURI(b)+'" target="_blank" title="'+f+'">'+f+"</a>";break}}})})},clearCookie:function(){__.cookie.del("uin","/","qq.com");__.cookie.del("luin","/","qq.com");__.dom.f("zxgbar-zdp").style.display="none";__.dom.f("zxgbar").style.display="block"}},init:function(){this.indexList.init()}};__.app.qindex.init()})();
var oForm=__.dom.f("top-smartbox"),top_smartbox=new __.widget.SmartBox("top-smartbox",{attach:{form:oForm,query:oForm.c1,submit:oForm.submitbtn,type:{value:"ALL"}},listYOffset:2,zindex:10,defaultType:"ALL",onclick:function(f){if(2===f.length)this.onMstats(f[1]);else f=__.fnTable.getPageUrl(f[1],f[2]),registerZone2({bossZone:"stocksearch",url:f},1),__.global.open(f+"?pgv_ref=fi_smartbox&_ver="+__.BasicModule.loadedMods["fn-smartbox"],this.useSelf?"_self":"_blank")}});/*  |xGv00|0ad927b9c7d58b7afe540a42780617bd */