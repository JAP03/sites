PHTTP72.21.91.110"û
KGET /scripts/squidoo/lib/facebook.v2829958143.js?_=1389274722395 HTTP/1.1
Host: the.squidoocdn.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36
"Referer: http://www.squidoo.com/
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8

*ê0
HTTP/1.1 200 OK
Accept-Ranges: bytes
"Cache-Control: max-age=315360000
(Content-Type: application/x-javascript
%Date: Thu, 09 Jan 2014 13:38:30 GMT
*Etag: "e805a0fe61484c83e0e569881cad1d2d"
.Last-Modified: Tue, 22 Jan 2013 16:06:44 GMT
Server: AmazonS3
Nx-amz-id-2: 2WFcJkgi8Tg/JYMdMn9iAa+G3AyzK6+rJtoFZGKpTcyusS1573BepsHl7HU7itIN
$x-amz-request-id: 854F9735A6FEB201
Content-Length: 5831
É-
(function(b){var c=false;var a=window.Squidoo.Facebook=b.extend(Squidoo.Facebook?Squidoo.Facebook:{},{lib:true,status:"unknown",user:null,scope:["email","publish_stream"],getUserId:function(){return this.user},init:function(){if(c){return}c=true;Squidoo.withDeps([Squidoo.DEPS.FACEBOOK],function(){a.withFB(function(){b(".b.fb_session_aware").addClass("btn_working");var f=function(){b(".fb_session_aware").not(".b").not("button").each(function(g,h){h=b(h);var j=h.attr("rel");if(!j){j=h.attr("id")}if(j){b.ajax({url:Squidoo.host+"/facebook/json_refresh/"+j,type:"POST",dataType:"jsonp",success:function(i){h.removeClass("fb_error");h.html(i.html)},error:function(){h.addClass("fb_error")}})}})};var e=function(g){a.status="connected";a.user=g.userID;b.post("/facebook/ajax_login",function(){b(".b.fb_session_aware").removeClass("btn_working").text("Logout").unbind("click").bind("click",function(){Squidoo.Facebook.logout(this)});f()})};var d=function(){a.status="unknown";a.user=null;f()};FB.getLoginStatus(function(g){if(g.authResponse){e(g.authResponse)}else{d()}FB.Event.subscribe("auth.statusChange",function(h){if(h.status==="connected"){e(h.authResponse)}})});FB.Event.subscribe("edge.create",function(g){evSocial("facebook","like",g);if(window.theLensId){b.post("/facebook/json_like",{lens_id:window.theLensId})}});FB.Event.subscribe("edge.remove",function(g){evSocial("facebook","unlike",g)});FB.Event.subscribe("message.send",function(g){evSocial("facebook","send",g)})})})},isAuthorized:function(d,e){if(b.isFunction(d)){e=d;d=Squidoo.Facebook.scope}else{if(!d&&d!==false){d=Squidoo.Facebook.scope}else{if(d&&!b.isArray(d)){d=d.split(",")}else{d=[]}}}FB.getLoginStatus(function(f){if(f.authResponse){if(d.length){FB.api("/me/permissions",function(g){if(g.error){return e(false,g)}var j=g.data[0];for(var h=0;h<d.length;h++){if(j[d[h]]!="1"){return e(false,g)}}return e(true,g)})}else{return e(true,f)}}else{return e(false,f)}},true)},logout:function(d,e){if(b.isFunction(d)){e=d;d=null}b(d).addClass("btn_working");FB.logout(function(f){b(d).removeClass("btn_working");if(b.isFunction(e)){e(f)}})},getLikes:function(l,d,m){if(b.isFunction(d)){m=d;d={}}var d=b.extend({limit:4,offset:0,flush:false},d);if(d.limit==undefined){d.limit=4}if(d.limit>250){d.limit=250}if(d.offset==undefined){d.offset=0}var f={};var e=[];if(b.isArray(l)){for(var g=0;g<l.length;g++){var j=Squidoo.Cache.store("facebook").get(sprintf("%s-%s-likes",a.user,l[g]));if(!d.flush&&j&&j.length>=d.limit){f[l[g]]=j}else{e.push(l[g])}}}else{if(d.offset==0){f=Squidoo.Cache.store("facebook").get(sprintf("%s-%s-likes",a.user,l));if(!d.flush&&f&&f.length>=d.limit){return m(f.slice(d.offset,d.offset+d.limit))}}}if(b.isArray(l)){if(e.length){var h=[];for(var g=0;g<e.length;g++){var k=e[g];h.push({method:"GET",relative_url:k+"/likes?limit=250&fields=category,about,name,id,link"})}FB.api("/","POST",{batch:h},function(n){if(!n.error){for(var o=0;o<n.length;o++){var p=n[o];if(p.code==200){var q=e[o];f[q]=Squidoo.Facebook._sortLikes(jQuery.parseJSON(p.body).data);if(d.offset==0&&f[q].length>=5){Squidoo.Cache.store("facebook").set(sprintf("%s-%s-likes",a.user,q),f[q].slice(0,5),CACHE_10MIN)}}}if(f){for(l in f){f[l]=f[l].slice(d.offset,d.offset+d.limit)}}m(f)}else{for(l in f){f[l]=[]}m(f)}})}}else{FB.api("/"+l+"/likes?limit=250&fields=about,category,name,id,link",function(i){f=Squidoo.Facebook._sortLikes(i.data);if(d.offset==0&&d.limit>=5){Squidoo.Cache.store("facebook").set(sprintf("%s-%s-likes",a.user,l),f.slice(0,5),CACHE_10MIN)}m(f.slice(d.offset,d.offset+d.limit))})}},_sortLikes:function(d){if(!d){return false}return d.sort(function(f,e){var i=[f,e].map(function(j){switch(j.category.toLowerCase()){case"movies/music":return 1;case"book":case"album":case"magazine":return 2;case"app":case"appliances":case"baby goods/kids goods":case"bags/luggage":case"building materials":case"camera/photo":case"cars":case"commercial equipment":case"computers":case"drugs":case"electronics":case"furniture":case"games/toys":case"health/beauty":case"home decor":case"household supplies":case"jewelry/watches":case"kitchen/cooking":case"musical instrument":case"office supplies":case"outdoor gear/sporting goods":case"patio/garden":case"pet supplies":case"software":case"tools/equipment":case"vitamins/supplements":case"wine/spirits":return 4;case"author":case"musician":return 8;case"product/service":return 1024;default:return 2048}});if(i[0]==i[1]){var h=new Date(f.created_time);var g=new Date(e.created_time);return g.getTime()-h.getTime()}else{return i[0]-i[1]}})},getFriends:function(g,d,f){if(d==undefined||d>5000){d=5000}if(f==undefined){f=0}var e=Squidoo.Cache.store("facebook").get(sprintf("%s-friends",a.user));if(e){return g(e.slice(f,f+d))}else{FB.api("/me/friends?limit="+d,function(h){Squidoo.Cache.store("facebook").set(sprintf("%s-friends",a.user),h.data,CACHE_HOUR);g(h.data.slice(f,f+d))})}},sortFriendsByFamily:function(e,i){var h=function(j){e.sort(function(m,l){var k=j[m.id];var n=j[l.id];if(k==n){return 0}else{if(k==undefined){return 1}else{if(n==undefined){return -1}else{return k-n}}}});i(e)};var f=Squidoo.Cache.store("facebook").get("family");if(f){h(f)}else{var f={};var d=FB.Data.query("SELECT significant_other_id FROM user WHERE uid = me()");var g=FB.Data.query("SELECT uid, relationship FROM family WHERE profile_id = me()");FB.Data.waitOn([d,g],function(j){FB.Array.forEach(d.value,function(k){f[k.significant_other_id]=1});FB.Array.forEach(g.value,function(k){switch(k.relationship){case"son":case"daughter":f[k.uid]=2;break;case"mother":case"father":f[k.uid]=4;break;case"sister":case"brother":f[k.uid]=8;break;case"grandmother":case"grandfather":f[k.uid]=16;break;case"aunt":case"uncle":f[k.uid]=32;break;case"cousin":default:f[k.uid]=64;break}});Squidoo.Cache.store("facebook").set("family",f);h(f)})}}})})(jQuery);