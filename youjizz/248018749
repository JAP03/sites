PHTTP31.192.122.226"˜
%GET /rating/js/ratingjq.js HTTP/1.1
Host: www.youjizz.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36
"Referer: http://www.youjizz.com/
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8
DCookie: PHPSESSID=rqdrsda89d4f3vdc4tg1e824q3; RNLBSERVERID=ded1418

*ú
HTTP/1.1 200 OK
Server: nginx/1.4.4
%Date: Tue, 08 Apr 2014 22:37:43 GMT
(Content-Type: application/x-javascript
Content-Length: 2669
.Last-Modified: Fri, 25 Oct 2013 23:56:34 GMT
Connection: close
ETag: "526b0532-a6d"
Accept-Ranges: bytes
ï
$(function() {
   $("a.rater").click(function() {
      var parameterString = this.href.replace(/.*\?(.*)/, "$1"); // onclick="sndReq('j=1&q=2&t=127.0.0.1&c=5');
      var parameterTokens = parameterString.split("&"); // onclick="sndReq('j=1,q=2,t=127.0.0.1,c=5');
      var parameterList = new Array();

      for (j = 0; j < parameterTokens.length; j++) {
         var parameterName = parameterTokens[j].replace(/(.*)=.*/, "$1"); // j
         var parameterValue = parameterTokens[j].replace(/.*=(.*)/, "$1"); // 1
         parameterList[parameterName] = parameterValue;
      }
      var theratingID = parameterList['q'];
      var theVote = parameterList['j'];
      var theuserIP = parameterList['t'];
      var theunits = parameterList['c'];

      $("#unit_long"+theratingID).html(getStaticRatingBar(theVote, theunits));
      $("span.thanks").html("Thanks for voting!");
      $.ajax({
         url: '/rating/rpc.php',
         type: 'get',
         data: {
            'j': theVote,
            'q': theratingID,
            't': theuserIP,
            'c': theunits
         },
         cache: true
      }).done(function(data) {
         var ar = data.split('|');
         var id = $.trim(ar[0]);
         var html = ar[1];
         $('#'+id).html(ar[1]);
      });
      return false;
   });
   
   function getStaticRatingBar(theVote, theunits)
   {
      theunits = parseInt(theunits);
      if (isNaN(theunits)) theunits=5;
      theVote = parseInt(theVote);
      if (isNaN(theVote)) theVote=theunits;
      var total_value = parseInt($("#current_rating").attr("total_value"));
      var total_votes = parseInt($("#current_rating").attr("total_votes"));
      if (isNaN(total_value)) total_value=0;
      if (isNaN(total_votes)) total_votes=0;
      total_votes++;
      var tense = total_votes>1 ? "votes":"vote";
      var rating = (total_value+theVote)/total_votes;
      var rating2 = Math.round(rating * 100) / 100;
      var rating1 = Math.round(rating * 10) / 10;
      var rating_unitwidth  = 30;
      var width = Math.round(rating2 * rating_unitwidth);
      var s= '<ul class="unit-rating" style="width:'+(theunits*rating_unitwidth)+'px;">' +
      '<li class="current-rating" style="width:'+width+'px;">Current rating.</li>';
      for (var i=1; i<=theunits; i++)
      {
         s+= '<li class="r'+i+'-unit">'+i+'</li>';
      }
      s += '</ul>' +
         '<p class="voted">Rating: <strong>'+rating1+'</strong>/'+theunits+' ('+total_votes+' '+tense+' cast) <div>'+
         '<span class="thanks">Thanks for voting!</span>'+
         '</div></p>';
      return s;
   }
})