PHTTP
72.21.91.9"Š
.GET /master/script/end-min-37f64.js HTTP/1.1
&Host: staticx1.new.livejasmincdn.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36
BReferer: http://new.livejasmin.com/en/?showPreviousVersionLink=0
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8

*††f
HTTP/1.1 200 OK
Accept-Ranges: bytes
 Cache-Control: max-age=2419200
(Content-Type: application/x-javascript
%Date: Tue, 08 Apr 2014 22:03:37 GMT
Etag: "5343b765-198178"
(Expires: Tue, 06 May 2014 22:03:37 GMT
.Last-Modified: Tue, 08 Apr 2014 08:46:29 GMT
Server: ECS (ord/57FB)
X-Cache: HIT
.X-Real-Source: static1.new.livejasmincdn.com
Content-Length: 1671544
ú‚f
Ext.namespace("Chaos");Chaos.DomHelper=Ext.DomHelper;
Ext.apply(Ext.DomHelper,{disableSelect:function(target){if(typeof target.onselectstart!="undefined")target.onselectstart=function(){return false};else if(typeof target.style.MozUserSelect!="undefined")target.style.MozUserSelect="none";else{target.onmousedown=function(){return false};target.style.MozUserSelect="none"}target.style.cursor="default"},enableSelect:function(target){if(typeof target.onselectstart!="undefined")target.onselectstart=null;else if(typeof target.style.MozUserSelect!="undefined")target.style.MozUserSelect=
"text";else{target.onmousedown=null;target.style.MozUserSelect="text"}}});
Chaos.Cookie={set:function(name,value,expires,path,domain,secure){if(typeof name!="string"||name=="")return;var today=new Date;today.setTime(today.getTime());if(expires){expires=expires*1E3;var expireDate=new Date(today.getTime()+expires)}document.cookie=name+"="+escape(value)+(expires?";expires="+expireDate.toGMTString():"")+(path?";path="+path:"")+(domain?";domain="+domain:"")+(secure?";secure":"")},get:function(name){var allCookies=document.cookie.split(";");var tempCookie="";var cookieName="";
var cookieValue="";var cookieFound=false;for(var i=0;i<allCookies.length;i++){tempCookie=allCookies[i].split("=");cookieName=tempCookie[0].replace(/^\s+|\s+$/g,"");if(cookieName==name){cookieFound=true;if(tempCookie.length>1)cookieValue=unescape(tempCookie[1].replace(/^\s+|\s+$/g,""));return cookieValue;break}tempCookie=undefined;cookieName=""}if(!cookieFound)return undefined},remove:function(name,path,domain){if(Chaos.Cookie.get(name))document.cookie=name+"="+(path?";path="+path:"")+(domain?";domain="+
domain:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"},isCookieEnabled:function(){Chaos.Cookie.set("test",true);var cookieEnabled=Chaos.Cookie.get("test")?true:false;Chaos.Cookie.remove("test");return cookieEnabled}};Ext.namespace("Chaos");Chaos.I18n=function(){};Chaos.I18n.getInstance=function(){if(!(Chaos.I18n.prototype.instance instanceof Chaos.I18n))Chaos.I18n.prototype.instance=new Chaos.I18n;return Chaos.I18n.prototype.instance};
Ext.apply(Chaos.I18n.prototype,{DEFAULT_LANGUAGE:"en",language:"en",translationTables:{en:{}},setLanguage:function(language){this.language=language},getLanguage:function(){return this.language},setTranslationTable:function(language,translationTable){if(typeof this.translationTables[language]!="object")this.translationTables[language]={};Ext.apply(this.translationTables[language],translationTable)},addTranslation:function(text,translation,lang){var language=this.getCurrentLanguage(lang);var table=
this.translationTables[language];if(typeof table!="object")table={};if(typeof text=="string")table[text]=translation;if(typeof text=="object")Ext.apply(table,text)},getCurrentLanguage:function(language){if(typeof language!="string"||typeof language=="string"&&language.length==0)language=this.language;if(typeof language!="string"||typeof language=="string"&&language.length==0||typeof this.translationTables[language]!="object")language=this.DEFAULT_LANGUAGE;return language},getTranslation:function(text,
params,language){var result=text;var key=text;language=this.getCurrentLanguage(language);if(typeof this.translationTables[language]=="object")if(typeof this.translationTables[language][key]=="string")result=this.translationTables[language][key];if(typeof params=="object")result=this.replacePlaceholders(result,params);return result},replacePlaceholders:function(text,params){for(prop in params)if(typeof params[prop]=="string"||typeof params[prop]=="number"){var placeholder="{"+prop+"}";text=text.replace(placeholder,
params[prop])}return text}});if(!String.prototype.trim)String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};Chaos.Object=function(el,config){if(typeof el=="string"&&Ext.fly(el)==null){this.element=Ext.get(Ext.DomHelper.append(Ext.getBody(),config.el));delete config.el}else this.element=Ext.get(el);if(this.element.id)this.setId(this.element.id);var defaultConfig={};config=Ext.applyIf(config,defaultConfig);this.originalConfig=config;Ext.apply(this,config);this.init(el,config)};
Chaos.Object.EVENT_INIT="init";Chaos.Object.EVENT_CHAOS_LOG="chaos-log";
Chaos.extend(Chaos.Object,Ext.util.Observable,{name:undefined,element:undefined,plugins:undefined,id:undefined,nonEventRx:/scope/,init:function(el,config){this.addEvents({"init":true,"chaos-log":true});this.plugins={};var pluginName;if(typeof config.plugins!="undefined")for(pluginName in config.plugins){var pluginConfig=config.plugins[pluginName];this.addPlugin(pluginName,pluginConfig)}delete pluginName;this.bind.call(this);this.fireEvent(Chaos.Object.EVENT_INIT,this);this.on(Chaos.Object.EVENT_CHAOS_LOG,
Chaos.Log.log,this);if(this.listeners instanceof Object){var scope=listeners.scope||this||window;for(var listenerName in listeners){var listener=listeners[listenerName];if(!listenerName.match(this.noEventName))this.on(listenerName,listener,scope)}}},getId:function(){if(typeof this.id=="undefined")this.id=Chaos.generateId(this.name);return this.id},setId:function(id){this.id=id},destroy:function(removeElement){this.unbind.call(this);if(removeElement==true)this.element.remove();this.element=null},addPlugin:function(pluginName,
pluginConfig){if(pluginConfig instanceof Chaos.Plugin)pluginConfig.init(this);else if(pluginConfig instanceof Object){var pluginFn=Chaos.Config.get("plugins."+pluginName);if(pluginFn instanceof Function){pluginConfig.host=this;var pluginObj=new pluginFn(pluginConfig);this.plugins[pluginName]=pluginObj;pluginObj.init(this);delete pluginObj}else throw new Error("unknown plugin ("+pluginName+") for class '"+this.name+"': ");}else throw new Error("invalid plugin config type:"+typeof pluginFn);},select:function(selector,
unique){return this.element.select(selector,unique)},bind:function(){},unbind:function(){this.element.un("DOMNodeRemovedFromDocument",this.destroy,this)}});
Ext.applyIf(Ext.Element.prototype,{setOpacity:function(opacity,animate){var me=this,s=me.dom.style;if(!animate||!me.anim)if(Ext.isIE7||Ext.isIE8){var opac="alpha(opacity="+opacity*100+")";s.filter=opac;s.zoom=1}else s.opacity=opacity;else me.anim({opacity:{to:opacity}},me.preanim(arguments,1),null,0.35,"easeIn");return me},getSibling:function(s){var sib=new Array,node;node=this.parent().first(s);while(node&&node.dom.nodeType===1){if(node!=this)sib.push(node);node=node.next(s)}if(sib.length>0)return sib;
else return null},display:function(display){this.dom.style.display=display;return this},html:function(value){if(value!==undefined)this.dom.innerHTML=value;else return this.dom.innerHTML},getData:Chaos.isHTML5DatasetSupported?function(key){return this.dom.dataset[key]}:function(key){console.info("this method is not supported by the browser.")},hasScrollBar:function(){return this.dom.scrollHeight>this.getHeight()}});Chaos.Page=function(el,config){Chaos.Page.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.Page,Chaos.Object,{name:"page",url:"",layout:null,init:function(el,config){Chaos.Page.superclass.init.call(this,el,config)},getPageId:function(){return Ext.getBody().dom.id},bind:function(){Chaos.Page.superclass.bind.call(this)},unbind:function(){Chaos.Page.superclass.unbind.call(this)}});
Chaos.Storage=function(){var checkLocalStorage=function(){try{return typeof window.localStorage!="undefined"}catch(exception){return false}};return{hasLocalStorage:function(){return checkLocalStorage()},set:function(name,value,groupId){var _value=value,_success=false,_entries;if(this.hasLocalStorage())if(groupId){if(!this.getGroup(groupId))this.setGroup(groupId);_entries=Ext.util.JSON.decode(window.localStorage[groupId]);_entries[name]=value;_value=Ext.util.JSON.encode(_entries);window.localStorage[groupId]=
_value;_success=true}else{_value=typeof value=="object"?Ext.util.JSON.encode(value):value;window.localStorage[name]=_value;_success=true}return _success},setGroup:function(groupId){if(this.hasLocalStorage())if(!this.getGroup(groupId))window.localStorage[groupId]=Ext.util.JSON.encode({})},getGroup:function(groupId){if(this.hasLocalStorage()){var _group=undefined;if(typeof window.localStorage[groupId]!="undefined")try{_group=Ext.util.JSON.decode(window.localStorage[groupId])}catch(exception){_group=
window.localStorage[groupId]}return _group}return false},removeGroup:function(groupId){var _success=false;if(this.hasLocalStorage())try{delete window.localStorage[groupId];_success=true}catch(exception){}return _success},get:function(name,deletable,groupId){var result=undefined,entry=undefined;if(this.hasLocalStorage()){if(groupId)try{entry=Ext.util.JSON.decode(window.localStorage[groupId])[name]}catch(exception){if(this.getGroup(groupId))entry=window.localStorage[groupId][name]}else entry=window.localStorage[name];
if(entry){try{result=Ext.util.JSON.decode(entry)}catch(exception){result=entry}if(deletable)delete window.localStorage[name]}}else{result=Chaos.Cookie.get(name);if(deletable)Chaos.Cookie.remove(name)}return result},remove:function(name,groupId){var _success=false,_entry;if(this.hasLocalStorage())if(groupId&&this.getGroup(groupId))try{_entry=Ext.util.JSON.decode(window.localStorage[groupId]);delete _entry[name];window.localStorage[groupId]=Ext.util.JSON.encode(_entry);_success=true}catch(exception){}else try{delete window.localStorage[name];
_success=true}catch(exception){}return _success},removeAll:function(){if(this.hasLocalStorage())for(var entry in window.localStorage)delete window.localStorage[entry]}}}();
(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(Animation,SimpleTimeline,TweenLite){var TweenMax=function(target,duration,vars){TweenLite.call(this,target,duration,vars);this._cycle=0;this._yoyo=this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._dirty=true},_isSelector=function(v){return v.jquery||typeof v.each==="function"&&v[0]&&v[0].nodeType&&v[0].style},
_selectorToArray=function(v){var a=[];v.each(function(){a.push(this)});return a},p=TweenMax.prototype=TweenLite.to({},0.1,{}),_blankArray=[];TweenMax.version="1.9.3";p.constructor=TweenMax;p.kill()._gc=false;TweenMax.killTweensOf=TweenMax.killDelayedCallsTo=TweenLite.killTweensOf;TweenMax.getTweensOf=TweenLite.getTweensOf;TweenMax.ticker=TweenLite.ticker;p.invalidate=function(){this._yoyo=this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);
return TweenLite.prototype.invalidate.call(this)};p.updateTo=function(vars,resetDuration){var curRatio=this.ratio,p;if(resetDuration&&this.timeline&&this._startTime<this._timeline._time){this._startTime=this._timeline._time;this._uncache(false);if(this._gc)this._enabled(true,false);else this._timeline.insert(this,this._startTime-this._delay)}for(p in vars)this.vars[p]=vars[p];if(this._initted)if(resetDuration)this._initted=false;else{if(this._notifyPluginsOfEnabled&&this._firstPT)TweenLite._onPluginEvent("_onDisable",
this);if(this._time/this._duration>0.998){var prevTime=this._time;this.render(0,true,false);this._initted=false;this.render(prevTime,true,false)}else if(this._time>0){this._initted=false;this._init();var inv=1/(1-curRatio),pt=this._firstPT,endValue;while(pt){endValue=pt.s+pt.c;pt.c*=inv;pt.s=endValue-pt.c;pt=pt._next}}}return this};p.render=function(time,suppressEvents,force){var totalDur=!this._dirty?this._totalDuration:this.totalDuration(),prevTime=this._time,prevTotalTime=this._totalTime,prevCycle=
this._cycle,isComplete,callback,pt,cycleDuration,r,type,pow;if(time>=totalDur){this._totalTime=totalDur;this._cycle=this._repeat;if(this._yoyo&&(this._cycle&1)!==0){this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0}else{this._time=this._duration;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1}if(!this._reversed){isComplete=true;callback="onComplete"}if(this._duration===0){if(time===0||this._rawPrevTime<0)if(this._rawPrevTime!==time)force=true;this._rawPrevTime=time}}else if(time<
1E-7){this._totalTime=this._time=this._cycle=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(prevTotalTime!==0||this._duration===0&&this._rawPrevTime>0){callback="onReverseComplete";isComplete=this._reversed}if(time<0){this._active=false;if(this._duration===0){if(this._rawPrevTime>=0)force=true;this._rawPrevTime=time}}else if(!this._initted)force=true}else{this._totalTime=this._time=time;if(this._repeat!==0){cycleDuration=this._duration+this._repeatDelay;this._cycle=this._totalTime/cycleDuration>>
0;if(this._cycle!==0)if(this._cycle===this._totalTime/cycleDuration)this._cycle--;this._time=this._totalTime-this._cycle*cycleDuration;if(this._yoyo)if((this._cycle&1)!==0)this._time=this._duration-this._time;if(this._time>this._duration)this._time=this._duration;else if(this._time<0)this._time=0}if(this._easeType){r=this._time/this._duration;type=this._easeType;pow=this._easePower;if(type===1||type===3&&r>=0.5)r=1-r;if(type===3)r*=2;if(pow===1)r*=r;else if(pow===2)r*=r*r;else if(pow===3)r*=r*r*r;
else if(pow===4)r*=r*r*r*r;if(type===1)this.ratio=1-r;else if(type===2)this.ratio=r;else if(this._time/this._duration<0.5)this.ratio=r/2;else this.ratio=1-r/2}else this.ratio=this._ease.getRatio(this._time/this._duration)}if(prevTime===this._time&&!force){if(prevTotalTime!==this._totalTime)if(this._onUpdate)if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_blankArray);return}else if(!this._initted){this._init();if(!this._initted)return;if(this._time&&
!isComplete)this.ratio=this._ease.getRatio(this._time/this._duration);else if(isComplete&&this._ease._calcEnd)this.ratio=this._ease.getRatio(this._time===0?0:1)}if(!this._active)if(!this._paused)this._active=true;if(prevTotalTime===0){if(this._startAt)if(time>=0)this._startAt.render(time,suppressEvents,force);else if(!callback)callback="_dummyGS";if(this.vars.onStart)if(this._totalTime!==0||this._duration===0)if(!suppressEvents)this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||
_blankArray)}pt=this._firstPT;while(pt){if(pt.f)pt.t[pt.p](pt.c*this.ratio+pt.s);else pt.t[pt.p]=pt.c*this.ratio+pt.s;pt=pt._next}if(this._onUpdate){if(time<0)if(this._startAt)this._startAt.render(time,suppressEvents,force);if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_blankArray)}if(this._cycle!==prevCycle)if(!suppressEvents)if(!this._gc)if(this.vars.onRepeat)this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||_blankArray);
if(callback)if(!this._gc){if(time<0&&this._startAt&&!this._onUpdate)this._startAt.render(time,suppressEvents,force);if(isComplete){if(this._timeline.autoRemoveChildren)this._enabled(false,false);this._active=false}if(!suppressEvents&&this.vars[callback])this.vars[callback].apply(this.vars[callback+"Scope"]||this,this.vars[callback+"Params"]||_blankArray)}};TweenMax.to=function(target,duration,vars){return new TweenMax(target,duration,vars)};TweenMax.from=function(target,duration,vars){vars.runBackwards=
true;vars.immediateRender=vars.immediateRender!=false;return new TweenMax(target,duration,vars)};TweenMax.fromTo=function(target,duration,fromVars,toVars){toVars.startAt=fromVars;toVars.immediateRender=toVars.immediateRender!=false&&fromVars.immediateRender!=false;return new TweenMax(target,duration,toVars)};TweenMax.staggerTo=TweenMax.allTo=function(targets,duration,vars,stagger,onCompleteAll,onCompleteAllParams,onCompleteAllScope){stagger=stagger||0;var delay=vars.delay||0,a=[],finalComplete=function(){if(vars.onComplete)vars.onComplete.apply(vars.onCompleteScope||
this,vars.onCompleteParams||_blankArray);onCompleteAll.apply(onCompleteAllScope||this,onCompleteAllParams||_blankArray)},l,copy,i,p;if(!(targets instanceof Array)){if(typeof targets==="string")targets=TweenLite.selector(targets)||targets;if(_isSelector(targets))targets=_selectorToArray(targets)}l=targets.length;for(i=0;i<l;i++){copy={};for(p in vars)copy[p]=vars[p];copy.delay=delay;if(i===l-1&&onCompleteAll)copy.onComplete=finalComplete;a[i]=new TweenMax(targets[i],duration,copy);delay+=stagger}return a};
TweenMax.staggerFrom=TweenMax.allFrom=function(targets,duration,vars,stagger,onCompleteAll,onCompleteAllParams,onCompleteAllScope){vars.runBackwards=true;vars.immediateRender=vars.immediateRender!=false;return TweenMax.staggerTo(targets,duration,vars,stagger,onCompleteAll,onCompleteAllParams,onCompleteAllScope)};TweenMax.staggerFromTo=TweenMax.allFromTo=function(targets,duration,fromVars,toVars,stagger,onCompleteAll,onCompleteAllParams,onCompleteAllScope){toVars.startAt=fromVars;toVars.immediateRender=
toVars.immediateRender!=false&&fromVars.immediateRender!=false;return TweenMax.staggerTo(targets,duration,toVars,stagger,onCompleteAll,onCompleteAllParams,onCompleteAllScope)};TweenMax.delayedCall=function(delay,callback,params,scope,useFrames){return new TweenMax(callback,0,{delay:delay,onComplete:callback,onCompleteParams:params,onCompleteScope:scope,onReverseComplete:callback,onReverseCompleteParams:params,onReverseCompleteScope:scope,immediateRender:false,useFrames:useFrames,overwrite:0})};TweenMax.set=
function(target,vars){return new TweenMax(target,0,vars)};TweenMax.isTweening=function(target){var a=TweenLite.getTweensOf(target),i=a.length,tween;while(--i>-1){tween=a[i];if(tween._active||tween._startTime===tween._timeline._time&&tween._timeline._active)return true}return false};var _getChildrenOf=function(timeline,includeTimelines){var a=[],cnt=0,tween=timeline._first;while(tween){if(tween instanceof TweenLite)a[cnt++]=tween;else{if(includeTimelines)a[cnt++]=tween;a=a.concat(_getChildrenOf(tween,
includeTimelines));cnt=a.length}tween=tween._next}return a},getAllTweens=TweenMax.getAllTweens=function(includeTimelines){return _getChildrenOf(Animation._rootTimeline,includeTimelines).concat(_getChildrenOf(Animation._rootFramesTimeline,includeTimelines))};TweenMax.killAll=function(complete,tweens,delayedCalls,timelines){if(tweens==null)tweens=true;if(delayedCalls==null)delayedCalls=true;var a=getAllTweens(timelines!=false),l=a.length,allTrue=tweens&&delayedCalls&&timelines,isDC,tween,i;for(i=0;i<
l;i++){tween=a[i];if(allTrue||tween instanceof SimpleTimeline||(isDC=tween.target===tween.vars.onComplete)&&delayedCalls||tweens&&!isDC)if(complete)tween.totalTime(tween.totalDuration());else tween._enabled(false,false)}};TweenMax.killChildTweensOf=function(parent,complete){if(parent==null)return;var tl=TweenLite._tweenLookup,a,curParent,p,i,l;if(typeof parent==="string")parent=TweenLite.selector(parent)||parent;if(_isSelector(parent))parent=_selectorToArray(parent);if(parent instanceof Array){i=
parent.length;while(--i>-1)TweenMax.killChildTweensOf(parent[i],complete);return}a=[];for(p in tl){curParent=tl[p].target.parentNode;while(curParent){if(curParent===parent)a=a.concat(tl[p].tweens);curParent=curParent.parentNode}}l=a.length;for(i=0;i<l;i++){if(complete)a[i].totalTime(a[i].totalDuration());a[i]._enabled(false,false)}};var _changePause=function(pause,tweens,delayedCalls,timelines){if(tweens===undefined)tweens=true;if(delayedCalls===undefined)delayedCalls=true;var a=getAllTweens(timelines),
allTrue=tweens&&delayedCalls&&timelines,i=a.length,isDC,tween;while(--i>-1){tween=a[i];if(allTrue||tween instanceof SimpleTimeline||(isDC=tween.target===tween.vars.onComplete)&&delayedCalls||tweens&&!isDC)tween.paused(pause)}};TweenMax.pauseAll=function(tweens,delayedCalls,timelines){_changePause(true,tweens,delayedCalls,timelines)};TweenMax.resumeAll=function(tweens,delayedCalls,timelines){_changePause(false,tweens,delayedCalls,timelines)};p.progress=function(value){return!arguments.length?this._time/
this.duration():this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-value:value)+this._cycle*(this._duration+this._repeatDelay),false)};p.totalProgress=function(value){return!arguments.length?this._totalTime/this.totalDuration():this.totalTime(this.totalDuration()*value,false)};p.time=function(value,suppressEvents){if(!arguments.length)return this._time;if(this._dirty)this.totalDuration();if(value>this._duration)value=this._duration;if(this._yoyo&&(this._cycle&1)!==0)value=this._duration-
value+this._cycle*(this._duration+this._repeatDelay);else if(this._repeat!==0)value+=this._cycle*(this._duration+this._repeatDelay);return this.totalTime(value,suppressEvents)};p.duration=function(value){if(!arguments.length)return this._duration;return Animation.prototype.duration.call(this,value)};p.totalDuration=function(value){if(!arguments.length){if(this._dirty){this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat;this._dirty=false}return this._totalDuration}return this._repeat===
-1?this:this.duration((value-this._repeat*this._repeatDelay)/(this._repeat+1))};p.repeat=function(value){if(!arguments.length)return this._repeat;this._repeat=value;return this._uncache(true)};p.repeatDelay=function(value){if(!arguments.length)return this._repeatDelay;this._repeatDelay=value;return this._uncache(true)};p.yoyo=function(value){if(!arguments.length)return this._yoyo;this._yoyo=value;return this};return TweenMax},true);window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline",
"TweenLite"],function(Animation,SimpleTimeline,TweenLite){var TimelineLite=function(vars){SimpleTimeline.call(this,vars);this._labels={};this.autoRemoveChildren=this.vars.autoRemoveChildren===true;this.smoothChildTiming=this.vars.smoothChildTiming===true;this._sortChildren=true;this._onUpdate=this.vars.onUpdate;var v=this.vars,i=_paramProps.length,j,a;while(--i>-1){a=v[_paramProps[i]];if(a){j=a.length;while(--j>-1)if(a[j]==="{self}"){a=v[_paramProps[i]]=a.concat();a[j]=this}}}if(v.tweens instanceof
Array)this.add(v.tweens,0,v.align,v.stagger)},_paramProps=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],_blankArray=[],_copy=function(vars){var copy={},p;for(p in vars)copy[p]=vars[p];return copy},p=TimelineLite.prototype=new SimpleTimeline;TimelineLite.version="1.9.3";p.constructor=TimelineLite;p.kill()._gc=false;p.to=function(target,duration,vars,position){return this.add(new TweenLite(target,duration,vars),position)};p.from=function(target,duration,
vars,position){return this.add(TweenLite.from(target,duration,vars),position)};p.fromTo=function(target,duration,fromVars,toVars,position){return this.add(TweenLite.fromTo(target,duration,fromVars,toVars),position)};p.staggerTo=function(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams,onCompleteAllScope){var tl=new TimelineLite({onComplete:onCompleteAll,onCompleteParams:onCompleteAllParams,onCompleteScope:onCompleteAllScope}),i,a;if(typeof targets==="string")targets=TweenLite.selector(targets)||
targets;if(!(targets instanceof Array)&&typeof targets.each==="function"&&targets[0]&&targets[0].nodeType&&targets[0].style){a=[];targets.each(function(){a.push(this)});targets=a}stagger=stagger||0;for(i=0;i<targets.length;i++){if(vars.startAt)vars.startAt=_copy(vars.startAt);tl.add(new TweenLite(targets[i],duration,_copy(vars)),i*stagger)}return this.add(tl,position)};p.staggerFrom=function(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams,onCompleteAllScope){vars.immediateRender=
vars.immediateRender!=false;vars.runBackwards=true;return this.staggerTo(targets,duration,vars,stagger,position,onCompleteAll,onCompleteAllParams,onCompleteAllScope)};p.staggerFromTo=function(targets,duration,fromVars,toVars,stagger,position,onCompleteAll,onCompleteAllParams,onCompleteAllScope){toVars.startAt=fromVars;toVars.immediateRender=toVars.immediateRender!=false&&fromVars.immediateRender!=false;return this.staggerTo(targets,duration,toVars,stagger,position,onCompleteAll,onCompleteAllParams,
onCompleteAllScope)};p.call=function(callback,params,scope,position){return this.add(TweenLite.delayedCall(0,callback,params,scope),position)};p.set=function(target,vars,position){position=this._parseTimeOrLabel(position,0,true);if(vars.immediateRender==null)vars.immediateRender=position===this._time&&!this._paused;return this.add(new TweenLite(target,0,vars),position)};TimelineLite.exportRoot=function(vars,ignoreDelayedCalls){vars=vars||{};if(vars.smoothChildTiming==null)vars.smoothChildTiming=true;
var tl=new TimelineLite(vars),root=tl._timeline,tween,next;if(ignoreDelayedCalls==null)ignoreDelayedCalls=true;root._remove(tl,true);tl._startTime=0;tl._rawPrevTime=tl._time=tl._totalTime=root._time;tween=root._first;while(tween){next=tween._next;if(!ignoreDelayedCalls||!(tween instanceof TweenLite&&tween.target===tween.vars.onComplete))tl.add(tween,tween._startTime-tween._delay);tween=next}root.add(tl,0);return tl};p.add=function(value,position,align,stagger){var curTime,l,i,child,tl;if(typeof position!==
"number")position=this._parseTimeOrLabel(position,0,true,value);if(!(value instanceof Animation))if(value instanceof Array){align=align||"normal";stagger=stagger||0;curTime=position;l=value.length;for(i=0;i<l;i++){if((child=value[i])instanceof Array)child=new TimelineLite({tweens:child});this.add(child,curTime);if(typeof child!=="string"&&typeof child!=="function")if(align==="sequence")curTime=child._startTime+child.totalDuration()/child._timeScale;else if(align==="start")child._startTime-=child.delay();
curTime+=stagger}return this._uncache(true)}else if(typeof value==="string")return this.addLabel(value,position);else if(typeof value==="function")value=TweenLite.delayedCall(0,value);else throw"Cannot add "+value+" into the timeline: it is neither a tween, timeline, function, nor a string.";SimpleTimeline.prototype.add.call(this,value,position);if(this._gc)if(!this._paused)if(this._time===this._duration)if(this._time<this.duration()){tl=this;while(tl._gc&&tl._timeline){if(tl._timeline.smoothChildTiming)tl.totalTime(tl._totalTime,
true);else tl._enabled(true,false);tl=tl._timeline}}return this};p.remove=function(value){if(value instanceof Animation)return this._remove(value,false);else if(value instanceof Array){var i=value.length;while(--i>-1)this.remove(value[i]);return this}else if(typeof value==="string")return this.removeLabel(value);return this.kill(null,value)};p.append=function(value,offsetOrLabel){return this.add(value,this._parseTimeOrLabel(null,offsetOrLabel,true,value))};p.insert=p.insertMultiple=function(value,
position,align,stagger){return this.add(value,position||0,align,stagger)};p.appendMultiple=function(tweens,offsetOrLabel,align,stagger){return this.add(tweens,this._parseTimeOrLabel(null,offsetOrLabel,true,tweens),align,stagger)};p.addLabel=function(label,position){this._labels[label]=this._parseTimeOrLabel(position);return this};p.removeLabel=function(label){delete this._labels[label];return this};p.getLabelTime=function(label){return this._labels[label]!=null?this._labels[label]:-1};p._parseTimeOrLabel=
function(timeOrLabel,offsetOrLabel,appendIfAbsent,ignore){var i;if(ignore instanceof Animation&&ignore.timeline===this)this.remove(ignore);else if(ignore instanceof Array){i=ignore.length;while(--i>-1)if(ignore[i]instanceof Animation&&ignore[i].timeline===this)this.remove(ignore[i])}if(typeof offsetOrLabel==="string")return this._parseTimeOrLabel(offsetOrLabel,appendIfAbsent&&typeof timeOrLabel==="number"&&this._labels[offsetOrLabel]==null?timeOrLabel-this.duration():0,appendIfAbsent);offsetOrLabel=
offsetOrLabel||0;if(typeof timeOrLabel==="string"&&(isNaN(timeOrLabel)||this._labels[timeOrLabel]!=null)){i=timeOrLabel.indexOf("=");if(i===-1){if(this._labels[timeOrLabel]==null)return appendIfAbsent?this._labels[timeOrLabel]=this.duration()+offsetOrLabel:offsetOrLabel;return this._labels[timeOrLabel]+offsetOrLabel}offsetOrLabel=parseInt(timeOrLabel.charAt(i-1)+"1",10)*Number(timeOrLabel.substr(i+1));timeOrLabel=i>1?this._parseTimeOrLabel(timeOrLabel.substr(0,i-1),0,appendIfAbsent):this.duration()}else if(timeOrLabel==
null)timeOrLabel=this.duration();return Number(timeOrLabel)+offsetOrLabel};p.seek=function(position,suppressEvents){return this.totalTime(typeof position==="number"?position:this._parseTimeOrLabel(position),suppressEvents!==false)};p.stop=function(){return this.paused(true)};p.gotoAndPlay=function(position,suppressEvents){return this.play(position,suppressEvents)};p.gotoAndStop=function(position,suppressEvents){return this.pause(position,suppressEvents)};p.render=function(time,suppressEvents,force){if(this._gc)this._enabled(true,
false);this._active=!this._paused;var totalDur=!this._dirty?this._totalDuration:this.totalDuration(),prevTime=this._time,prevStart=this._startTime,prevTimeScale=this._timeScale,prevPaused=this._paused,tween,isComplete,next,callback,internalForce;if(time>=totalDur){this._totalTime=this._time=totalDur;if(!this._reversed)if(!this._hasPausedChild()){isComplete=true;callback="onComplete";if(this._duration===0)if(time===0||this._rawPrevTime<0)if(this._rawPrevTime!==time)internalForce=true}this._rawPrevTime=
time;time=totalDur+1E-6}else if(time<1E-7){this._totalTime=this._time=0;if(prevTime!==0||this._duration===0&&this._rawPrevTime>0){callback="onReverseComplete";isComplete=this._reversed}if(time<0){this._active=false;if(this._duration===0&&this._rawPrevTime>=0)internalForce=true}else if(!this._initted)internalForce=true;this._rawPrevTime=time}else this._totalTime=this._time=this._rawPrevTime=time;if(this._time===prevTime&&!force&&!internalForce)return;else if(!this._initted)this._initted=true;if(prevTime===
0)if(this.vars.onStart)if(this._time!==0)if(!suppressEvents)this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_blankArray);if(this._time>=prevTime){tween=this._first;while(tween){next=tween._next;if(this._paused&&!prevPaused)break;else if(tween._active||tween._startTime<=this._time&&!tween._paused&&!tween._gc)if(!tween._reversed)tween.render((time-tween._startTime)*tween._timeScale,suppressEvents,force);else tween.render((!tween._dirty?tween._totalDuration:tween.totalDuration())-
(time-tween._startTime)*tween._timeScale,suppressEvents,force);tween=next}}else{tween=this._last;while(tween){next=tween._prev;if(this._paused&&!prevPaused)break;else if(tween._active||tween._startTime<=prevTime&&!tween._paused&&!tween._gc)if(!tween._reversed)tween.render((time-tween._startTime)*tween._timeScale,suppressEvents,force);else tween.render((!tween._dirty?tween._totalDuration:tween.totalDuration())-(time-tween._startTime)*tween._timeScale,suppressEvents,force);tween=next}}if(this._onUpdate)if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||
this,this.vars.onUpdateParams||_blankArray);if(callback)if(!this._gc)if(prevStart===this._startTime||prevTimeScale!==this._timeScale)if(this._time===0||totalDur>=this.totalDuration()){if(isComplete){if(this._timeline.autoRemoveChildren)this._enabled(false,false);this._active=false}if(!suppressEvents&&this.vars[callback])this.vars[callback].apply(this.vars[callback+"Scope"]||this,this.vars[callback+"Params"]||_blankArray)}};p._hasPausedChild=function(){var tween=this._first;while(tween){if(tween._paused||
tween instanceof TimelineLite&&tween._hasPausedChild())return true;tween=tween._next}return false};p.getChildren=function(nested,tweens,timelines,ignoreBeforeTime){ignoreBeforeTime=ignoreBeforeTime||-9999999999;var a=[],tween=this._first,cnt=0;while(tween){if(tween._startTime<ignoreBeforeTime);else if(tween instanceof TweenLite){if(tweens!==false)a[cnt++]=tween}else{if(timelines!==false)a[cnt++]=tween;if(nested!==false){a=a.concat(tween.getChildren(true,tweens,timelines));cnt=a.length}}tween=tween._next}return a};
p.getTweensOf=function(target,nested){var tweens=TweenLite.getTweensOf(target),i=tweens.length,a=[],cnt=0;while(--i>-1)if(tweens[i].timeline===this||nested&&this._contains(tweens[i]))a[cnt++]=tweens[i];return a};p._contains=function(tween){var tl=tween.timeline;while(tl){if(tl===this)return true;tl=tl.timeline}return false};p.shiftChildren=function(amount,adjustLabels,ignoreBeforeTime){ignoreBeforeTime=ignoreBeforeTime||0;var tween=this._first,labels=this._labels,p;while(tween){if(tween._startTime>=
ignoreBeforeTime)tween._startTime+=amount;tween=tween._next}if(adjustLabels)for(p in labels)if(labels[p]>=ignoreBeforeTime)labels[p]+=amount;return this._uncache(true)};p._kill=function(vars,target){if(!vars&&!target)return this._enabled(false,false);var tweens=!target?this.getChildren(true,true,false):this.getTweensOf(target),i=tweens.length,changed=false;while(--i>-1)if(tweens[i]._kill(vars,target))changed=true;return changed};p.clear=function(labels){var tweens=this.getChildren(false,true,true),
i=tweens.length;this._time=this._totalTime=0;while(--i>-1)tweens[i]._enabled(false,false);if(labels!==false)this._labels={};return this._uncache(true)};p.invalidate=function(){var tween=this._first;while(tween){tween.invalidate();tween=tween._next}return this};p._enabled=function(enabled,ignoreTimeline){if(enabled===this._gc){var tween=this._first;while(tween){tween._enabled(enabled,true);tween=tween._next}}return SimpleTimeline.prototype._enabled.call(this,enabled,ignoreTimeline)};p.progress=function(value){return!arguments.length?
this._time/this.duration():this.totalTime(this.duration()*value,false)};p.duration=function(value){if(!arguments.length){if(this._dirty)this.totalDuration();return this._duration}if(this.duration()!==0&&value!==0)this.timeScale(this._duration/value);return this};p.totalDuration=function(value){if(!arguments.length){if(this._dirty){var max=0,tween=this._last,prevStart=999999999999,prev,end;while(tween){prev=tween._prev;if(tween._dirty)tween.totalDuration();if(tween._startTime>prevStart&&this._sortChildren&&
!tween._paused)this.add(tween,tween._startTime-tween._delay);else prevStart=tween._startTime;if(tween._startTime<0&&!tween._paused){max-=tween._startTime;if(this._timeline.smoothChildTiming)this._startTime+=tween._startTime/this._timeScale;this.shiftChildren(-tween._startTime,false,-9999999999);prevStart=0}end=tween._startTime+tween._totalDuration/tween._timeScale;if(end>max)max=end;tween=prev}this._duration=this._totalDuration=max;this._dirty=false}return this._totalDuration}if(this.totalDuration()!==
0)if(value!==0)this.timeScale(this._totalDuration/value);return this};p.usesFrames=function(){var tl=this._timeline;while(tl._timeline)tl=tl._timeline;return tl===Animation._rootFramesTimeline};p.rawTime=function(){return this._paused||this._totalTime!==0&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale};return TimelineLite},true);window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(TimelineLite,TweenLite,
Ease){var TimelineMax=function(vars){TimelineLite.call(this,vars);this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._cycle=0;this._yoyo=this.vars.yoyo===true;this._dirty=true},_blankArray=[],_easeNone=new Ease(null,null,1,0),_getGlobalPaused=function(tween){while(tween){if(tween._paused)return true;tween=tween._timeline}return false},p=TimelineMax.prototype=new TimelineLite;p.constructor=TimelineMax;p.kill()._gc=false;TimelineMax.version="1.9.3";p.invalidate=function(){this._yoyo=
this.vars.yoyo===true;this._repeat=this.vars.repeat||0;this._repeatDelay=this.vars.repeatDelay||0;this._uncache(true);return TimelineLite.prototype.invalidate.call(this)};p.addCallback=function(callback,position,params,scope){return this.add(TweenLite.delayedCall(0,callback,params,scope),position)};p.removeCallback=function(callback,position){if(position==null)this._kill(null,callback);else{var a=this.getTweensOf(callback,false),i=a.length,time=this._parseTimeOrLabel(position);while(--i>-1)if(a[i]._startTime===
time)a[i]._enabled(false,false)}return this};p.tweenTo=function(position,vars){vars=vars||{};var copy={ease:_easeNone,overwrite:2,useFrames:this.usesFrames(),immediateRender:false},p,t;for(p in vars)copy[p]=vars[p];copy.time=this._parseTimeOrLabel(position);t=new TweenLite(this,Math.abs(Number(copy.time)-this._time)/this._timeScale||0.001,copy);copy.onStart=function(){t.target.paused(true);if(t.vars.time!==t.target.time())t.duration(Math.abs(t.vars.time-t.target.time())/t.target._timeScale);if(vars.onStart)vars.onStart.apply(vars.onStartScope||
t,vars.onStartParams||_blankArray)};return t};p.tweenFromTo=function(fromPosition,toPosition,vars){vars=vars||{};vars.startAt={time:this._parseTimeOrLabel(fromPosition)};var t=this.tweenTo(toPosition,vars);return t.duration(Math.abs(t.vars.time-t.vars.startAt.time)/this._timeScale||0.001)};p.render=function(time,suppressEvents,force){if(this._gc)this._enabled(true,false);this._active=!this._paused;var totalDur=!this._dirty?this._totalDuration:this.totalDuration(),dur=this._duration,prevTime=this._time,
prevTotalTime=this._totalTime,prevStart=this._startTime,prevTimeScale=this._timeScale,prevRawPrevTime=this._rawPrevTime,prevPaused=this._paused,prevCycle=this._cycle,tween,isComplete,next,callback,internalForce,cycleDuration;if(time>=totalDur){if(!this._locked){this._totalTime=totalDur;this._cycle=this._repeat}if(!this._reversed)if(!this._hasPausedChild()){isComplete=true;callback="onComplete";if(dur===0)if(time===0||this._rawPrevTime<0)if(this._rawPrevTime!==time)internalForce=true}this._rawPrevTime=
time;if(this._yoyo&&(this._cycle&1)!==0)this._time=time=0;else{this._time=dur;time=dur+1E-6}}else if(time<1E-7){if(!this._locked)this._totalTime=this._cycle=0;this._time=0;if(prevTime!==0||dur===0&&this._rawPrevTime>0&&!this._locked){callback="onReverseComplete";isComplete=this._reversed}if(time<0){this._active=false;if(dur===0)if(this._rawPrevTime>=0)internalForce=true}else if(!this._initted)internalForce=true;this._rawPrevTime=time;time=0}else{this._time=this._rawPrevTime=time;if(!this._locked){this._totalTime=
time;if(this._repeat!==0){cycleDuration=dur+this._repeatDelay;this._cycle=this._totalTime/cycleDuration>>0;if(this._cycle!==0)if(this._cycle===this._totalTime/cycleDuration)this._cycle--;this._time=this._totalTime-this._cycle*cycleDuration;if(this._yoyo)if((this._cycle&1)!==0)this._time=dur-this._time;if(this._time>dur){this._time=dur;time=dur+1E-6}else if(this._time<0)this._time=time=0;else time=this._time}}}if(this._cycle!==prevCycle)if(!this._locked){var backwards=this._yoyo&&(prevCycle&1)!==0,
wrap=backwards===(this._yoyo&&(this._cycle&1)!==0),recTotalTime=this._totalTime,recCycle=this._cycle,recRawPrevTime=this._rawPrevTime,recTime=this._time;this._totalTime=prevCycle*dur;if(this._cycle<prevCycle)backwards=!backwards;else this._totalTime+=dur;this._time=prevTime;this._rawPrevTime=dur===0?prevRawPrevTime-1E-5:prevRawPrevTime;this._cycle=prevCycle;this._locked=true;prevTime=backwards?0:dur;this.render(prevTime,suppressEvents,dur===0);if(!suppressEvents)if(!this._gc)if(this.vars.onRepeat)this.vars.onRepeat.apply(this.vars.onRepeatScope||
this,this.vars.onRepeatParams||_blankArray);if(wrap){prevTime=backwards?dur+1E-6:-1E-6;this.render(prevTime,true,false)}this._time=recTime;this._totalTime=recTotalTime;this._cycle=recCycle;this._rawPrevTime=recRawPrevTime;this._locked=false}if(this._time===prevTime&&!force&&!internalForce){if(prevTotalTime!==this._totalTime)if(this._onUpdate)if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_blankArray);return}else if(!this._initted)this._initted=true;
if(prevTotalTime===0)if(this.vars.onStart)if(this._totalTime!==0)if(!suppressEvents)this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_blankArray);if(this._time>=prevTime){tween=this._first;while(tween){next=tween._next;if(this._paused&&!prevPaused)break;else if(tween._active||tween._startTime<=this._time&&!tween._paused&&!tween._gc)if(!tween._reversed)tween.render((time-tween._startTime)*tween._timeScale,suppressEvents,force);else tween.render((!tween._dirty?tween._totalDuration:
tween.totalDuration())-(time-tween._startTime)*tween._timeScale,suppressEvents,force);tween=next}}else{tween=this._last;while(tween){next=tween._prev;if(this._paused&&!prevPaused)break;else if(tween._active||tween._startTime<=prevTime&&!tween._paused&&!tween._gc)if(!tween._reversed)tween.render((time-tween._startTime)*tween._timeScale,suppressEvents,force);else tween.render((!tween._dirty?tween._totalDuration:tween.totalDuration())-(time-tween._startTime)*tween._timeScale,suppressEvents,force);tween=
next}}if(this._onUpdate)if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_blankArray);if(callback)if(!this._locked)if(!this._gc)if(prevStart===this._startTime||prevTimeScale!==this._timeScale)if(this._time===0||totalDur>=this.totalDuration()){if(isComplete){if(this._timeline.autoRemoveChildren)this._enabled(false,false);this._active=false}if(!suppressEvents&&this.vars[callback])this.vars[callback].apply(this.vars[callback+"Scope"]||this,this.vars[callback+
"Params"]||_blankArray)}};p.getActive=function(nested,tweens,timelines){if(nested==null)nested=true;if(tweens==null)tweens=true;if(timelines==null)timelines=false;var a=[],all=this.getChildren(nested,tweens,timelines),cnt=0,l=all.length,i,tween;for(i=0;i<l;i++){tween=all[i];if(!tween._paused)if(tween._timeline._time>=tween._startTime)if(tween._timeline._time<tween._startTime+tween._totalDuration/tween._timeScale)if(!_getGlobalPaused(tween._timeline))a[cnt++]=tween}return a};p.getLabelAfter=function(time){if(!time)if(time!==
0)time=this._time;var labels=this.getLabelsArray(),l=labels.length,i;for(i=0;i<l;i++)if(labels[i].time>time)return labels[i].name;return null};p.getLabelBefore=function(time){if(time==null)time=this._time;var labels=this.getLabelsArray(),i=labels.length;while(--i>-1)if(labels[i].time<time)return labels[i].name;return null};p.getLabelsArray=function(){var a=[],cnt=0,p;for(p in this._labels)a[cnt++]={time:this._labels[p],name:p};a.sort(function(a,b){return a.time-b.time});return a};p.progress=function(value){return!arguments.length?
this._time/this.duration():this.totalTime(this.duration()*(this._yoyo&&(this._cycle&1)!==0?1-value:value)+this._cycle*(this._duration+this._repeatDelay),false)};p.totalProgress=function(value){return!arguments.length?this._totalTime/this.totalDuration():this.totalTime(this.totalDuration()*value,false)};p.totalDuration=function(value){if(!arguments.length){if(this._dirty){TimelineLite.prototype.totalDuration.call(this);this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+
1)+this._repeatDelay*this._repeat}return this._totalDuration}return this._repeat===-1?this:this.duration((value-this._repeat*this._repeatDelay)/(this._repeat+1))};p.time=function(value,suppressEvents){if(!arguments.length)return this._time;if(this._dirty)this.totalDuration();if(value>this._duration)value=this._duration;if(this._yoyo&&(this._cycle&1)!==0)value=this._duration-value+this._cycle*(this._duration+this._repeatDelay);else if(this._repeat!==0)value+=this._cycle*(this._duration+this._repeatDelay);
return this.totalTime(value,suppressEvents)};p.repeat=function(value){if(!arguments.length)return this._repeat;this._repeat=value;return this._uncache(true)};p.repeatDelay=function(value){if(!arguments.length)return this._repeatDelay;this._repeatDelay=value;return this._uncache(true)};p.yoyo=function(value){if(!arguments.length)return this._yoyo;this._yoyo=value;return this};p.currentLabel=function(value){if(!arguments.length)return this.getLabelBefore(this._time+1E-8);return this.seek(value,true)};
return TimelineMax},true);(function(){var _RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_r1=[],_r2=[],_r3=[],_corProps={},Segment=function(a,b,c,d){this.a=a;this.b=b;this.c=c;this.d=d;this.da=d-a;this.ca=c-a;this.ba=b-a},_correlate=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",cubicToQuadratic=function(a,b,c,d){var q1={a:a},q2={},q3={},q4={c:d},mab=(a+b)/2,mbc=(b+c)/2,mcd=(c+d)/2,
mabc=(mab+mbc)/2,mbcd=(mbc+mcd)/2,m8=(mbcd-mabc)/8;q1.b=mab+(a-mab)/4;q2.b=mabc+m8;q1.c=q2.a=(q1.b+q2.b)/2;q2.c=q3.a=(mabc+mbcd)/2;q3.b=mbcd-m8;q4.b=mcd+(d-mcd)/4;q3.c=q4.a=(q3.b+q4.b)/2;return[q1,q2,q3,q4]},_calculateControlPoints=function(a,curviness,quad,basic,correlate){var l=a.length-1,ii=0,cp1=a[0].a,i,p1,p2,p3,seg,m1,m2,mm,cp2,qb,r1,r2,tl;for(i=0;i<l;i++){seg=a[ii];p1=seg.a;p2=seg.d;p3=a[ii+1].d;if(correlate){r1=_r1[i];r2=_r2[i];tl=(r2+r1)*curviness*0.25/(basic?0.5:_r3[i]||0.5);m1=p2-(p2-p1)*
(basic?curviness*0.5:r1!==0?tl/r1:0);m2=p2+(p3-p2)*(basic?curviness*0.5:r2!==0?tl/r2:0);mm=p2-(m1+((m2-m1)*(r1*3/(r1+r2)+0.5)/4||0))}else{m1=p2-(p2-p1)*curviness*0.5;m2=p2+(p3-p2)*curviness*0.5;mm=p2-(m1+m2)/2}m1+=mm;m2+=mm;seg.c=cp2=m1;if(i!==0)seg.b=cp1;else seg.b=cp1=seg.a+(seg.c-seg.a)*0.6;seg.da=p2-p1;seg.ca=cp2-p1;seg.ba=cp1-p1;if(quad){qb=cubicToQuadratic(p1,cp1,cp2,p2);a.splice(ii,1,qb[0],qb[1],qb[2],qb[3]);ii+=4}else ii++;cp1=m2}seg=a[ii];seg.b=cp1;seg.c=cp1+(seg.d-cp1)*0.4;seg.da=seg.d-
seg.a;seg.ca=seg.c-seg.a;seg.ba=cp1-seg.a;if(quad){qb=cubicToQuadratic(seg.a,cp1,seg.c,seg.d);a.splice(ii,1,qb[0],qb[1],qb[2],qb[3])}},_parseAnchors=function(values,p,correlate,prepend){var a=[],l,i,p1,p2,p3,tmp;if(prepend){values=[prepend].concat(values);i=values.length;while(--i>-1)if(typeof(tmp=values[i][p])==="string")if(tmp.charAt(1)==="=")values[i][p]=prepend[p]+Number(tmp.charAt(0)+tmp.substr(2))}l=values.length-2;if(l<0){a[0]=new Segment(values[0][p],0,0,values[l<-1?0:1][p]);return a}for(i=
0;i<l;i++){p1=values[i][p];p2=values[i+1][p];a[i]=new Segment(p1,0,0,p2);if(correlate){p3=values[i+2][p];_r1[i]=(_r1[i]||0)+(p2-p1)*(p2-p1);_r2[i]=(_r2[i]||0)+(p3-p2)*(p3-p2)}}a[i]=new Segment(values[i][p],0,0,values[i+1][p]);return a},bezierThrough=function(values,curviness,quadratic,basic,correlate,prepend){var obj={},props=[],first=prepend||values[0],i,p,a,j,r,l,seamless,last;correlate=typeof correlate==="string"?","+correlate+",":_correlate;if(curviness==null)curviness=1;for(p in values[0])props.push(p);
if(values.length>1){last=values[values.length-1];seamless=true;i=props.length;while(--i>-1){p=props[i];if(Math.abs(first[p]-last[p])>0.05){seamless=false;break}}if(seamless){values=values.concat();if(prepend)values.unshift(prepend);values.push(values[1]);prepend=values[values.length-3]}}_r1.length=_r2.length=_r3.length=0;i=props.length;while(--i>-1){p=props[i];_corProps[p]=correlate.indexOf(","+p+",")!==-1;obj[p]=_parseAnchors(values,p,_corProps[p],prepend)}i=_r1.length;while(--i>-1){_r1[i]=Math.sqrt(_r1[i]);
_r2[i]=Math.sqrt(_r2[i])}if(!basic){i=props.length;while(--i>-1)if(_corProps[p]){a=obj[props[i]];l=a.length-1;for(j=0;j<l;j++){r=a[j+1].da/_r2[j]+a[j].da/_r1[j];_r3[j]=(_r3[j]||0)+r*r}}i=_r3.length;while(--i>-1)_r3[i]=Math.sqrt(_r3[i])}i=props.length;j=quadratic?4:1;while(--i>-1){p=props[i];a=obj[p];_calculateControlPoints(a,curviness,quadratic,basic,_corProps[p]);if(seamless){a.splice(0,j);a.splice(a.length-j,j)}}return obj},_parseBezierData=function(values,type,prepend){type=type||"soft";var obj=
{},inc=type==="cubic"?3:2,soft=type==="soft",props=[],a,b,c,d,cur,i,j,l,p,cnt,tmp;if(soft&&prepend)values=[prepend].concat(values);if(values==null||values.length<inc+1)throw"invalid Bezier data";for(p in values[0])props.push(p);i=props.length;while(--i>-1){p=props[i];obj[p]=cur=[];cnt=0;l=values.length;for(j=0;j<l;j++){a=prepend==null?values[j][p]:typeof(tmp=values[j][p])==="string"&&tmp.charAt(1)==="="?prepend[p]+Number(tmp.charAt(0)+tmp.substr(2)):Number(tmp);if(soft)if(j>1)if(j<l-1)cur[cnt++]=
(a+cur[cnt-2])/2;cur[cnt++]=a}l=cnt-inc+1;cnt=0;for(j=0;j<l;j+=inc){a=cur[j];b=cur[j+1];c=cur[j+2];d=inc===2?0:cur[j+3];cur[cnt++]=tmp=inc===3?new Segment(a,b,c,d):new Segment(a,(2*b+a)/3,(2*b+c)/3,c)}cur.length=cnt}return obj},_addCubicLengths=function(a,steps,resolution){var inc=1/resolution,j=a.length,d,d1,s,da,ca,ba,p,i,inv,bez,index;while(--j>-1){bez=a[j];s=bez.a;da=bez.d-s;ca=bez.c-s;ba=bez.b-s;d=d1=0;for(i=1;i<=resolution;i++){p=inc*i;inv=1-p;d=d1-(d1=(p*p*da+3*inv*(p*ca+inv*ba))*p);index=
j*resolution+i-1;steps[index]=(steps[index]||0)+d*d}}},_parseLengthData=function(obj,resolution){resolution=resolution>>0||6;var a=[],lengths=[],d=0,total=0,threshold=resolution-1,segments=[],curLS=[],p,i,l,index;for(p in obj)_addCubicLengths(obj[p],a,resolution);l=a.length;for(i=0;i<l;i++){d+=Math.sqrt(a[i]);index=i%resolution;curLS[index]=d;if(index===threshold){total+=d;index=i/resolution>>0;segments[index]=curLS;lengths[index]=total;d=0;curLS=[]}}return{length:total,lengths:lengths,segments:segments}},
BezierPlugin=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:true,init:function(target,vars,tween){this._target=target;if(vars instanceof Array)vars={values:vars};this._func={};this._round={};this._props=[];this._timeRes=vars.timeResolution==null?6:parseInt(vars.timeResolution,10);var values=vars.values||[],first={},second=values[0],autoRotate=vars.autoRotate||tween.vars.orientToBezier,p,isFunc,i,j,prepend;this._autoRotate=autoRotate?autoRotate instanceof Array?autoRotate:[["x",
"y","rotation",autoRotate===true?0:Number(autoRotate)||0]]:null;for(p in second)this._props.push(p);i=this._props.length;while(--i>-1){p=this._props[i];this._overwriteProps.push(p);isFunc=this._func[p]=typeof target[p]==="function";first[p]=!isFunc?parseFloat(target[p]):target[p.indexOf("set")||typeof target["get"+p.substr(3)]!=="function"?p:"get"+p.substr(3)]();if(!prepend)if(first[p]!==values[0][p])prepend=first}this._beziers=vars.type!=="cubic"&&vars.type!=="quadratic"&&vars.type!=="soft"?bezierThrough(values,
isNaN(vars.curviness)?1:vars.curviness,false,vars.type==="thruBasic",vars.correlate,prepend):_parseBezierData(values,vars.type,first);this._segCount=this._beziers[p].length;if(this._timeRes){var ld=_parseLengthData(this._beziers,this._timeRes);this._length=ld.length;this._lengths=ld.lengths;this._segments=ld.segments;this._l1=this._li=this._s1=this._si=0;this._l2=this._lengths[0];this._curSeg=this._segments[0];this._s2=this._curSeg[0];this._prec=1/this._curSeg.length}if(autoRotate=this._autoRotate){if(!(autoRotate[0]instanceof
Array))this._autoRotate=autoRotate=[autoRotate];i=autoRotate.length;while(--i>-1)for(j=0;j<3;j++){p=autoRotate[i][j];this._func[p]=typeof target[p]==="function"?target[p.indexOf("set")||typeof target["get"+p.substr(3)]!=="function"?p:"get"+p.substr(3)]:false}}return true},set:function(v){var segments=this._segCount,func=this._func,target=this._target,curIndex,inv,i,p,b,t,val,l,lengths,curSeg;if(!this._timeRes){curIndex=v<0?0:v>=1?segments-1:segments*v>>0;t=(v-curIndex*(1/segments))*segments}else{lengths=
this._lengths;curSeg=this._curSeg;v*=this._length;i=this._li;if(v>this._l2&&i<segments-1){l=segments-1;while(i<l&&(this._l2=lengths[++i])<=v);this._l1=lengths[i-1];this._li=i;this._curSeg=curSeg=this._segments[i];this._s2=curSeg[this._s1=this._si=0]}else if(v<this._l1&&i>0){while(i>0&&(this._l1=lengths[--i])>=v);if(i===0&&v<this._l1)this._l1=0;else i++;this._l2=lengths[i];this._li=i;this._curSeg=curSeg=this._segments[i];this._s1=curSeg[(this._si=curSeg.length-1)-1]||0;this._s2=curSeg[this._si]}curIndex=
i;v-=this._l1;i=this._si;if(v>this._s2&&i<curSeg.length-1){l=curSeg.length-1;while(i<l&&(this._s2=curSeg[++i])<=v);this._s1=curSeg[i-1];this._si=i}else if(v<this._s1&&i>0){while(i>0&&(this._s1=curSeg[--i])>=v);if(i===0&&v<this._s1)this._s1=0;else i++;this._s2=curSeg[i];this._si=i}t=(i+(v-this._s1)/(this._s2-this._s1))*this._prec}inv=1-t;i=this._props.length;while(--i>-1){p=this._props[i];b=this._beziers[p][curIndex];val=(t*t*b.da+3*inv*(t*b.ca+inv*b.ba))*t+b.a;if(this._round[p])val=val+(val>0?0.5:
-0.5)>>0;if(func[p])target[p](val);else target[p]=val}if(this._autoRotate){var ar=this._autoRotate,b2,x1,y1,x2,y2,add,conv;i=ar.length;while(--i>-1){p=ar[i][2];add=ar[i][3]||0;conv=ar[i][4]===true?1:_RAD2DEG;b=this._beziers[ar[i][0]][curIndex];b2=this._beziers[ar[i][1]][curIndex];x1=b.a+(b.b-b.a)*t;x2=b.b+(b.c-b.b)*t;x1+=(x2-x1)*t;x2+=(b.c+(b.d-b.c)*t-x2)*t;y1=b2.a+(b2.b-b2.a)*t;y2=b2.b+(b2.c-b2.b)*t;y1+=(y2-y1)*t;y2+=(b2.c+(b2.d-b2.c)*t-y2)*t;val=Math.atan2(y2-y1,x2-x1)*conv+add;if(func[p])target[p](val);
else target[p]=val}}}}),p=BezierPlugin.prototype;BezierPlugin.bezierThrough=bezierThrough;BezierPlugin.cubicToQuadratic=cubicToQuadratic;BezierPlugin._autoCSS=true;BezierPlugin.quadraticToCubic=function(a,b,c){return new Segment(a,(2*b+a)/3,(2*b+c)/3,c)};BezierPlugin._cssRegister=function(){var CSSPlugin=window._gsDefine.globals.CSSPlugin;if(!CSSPlugin)return;var _internals=CSSPlugin._internals,_parseToProxy=_internals._parseToProxy,_setPluginRatio=_internals._setPluginRatio,CSSPropTween=_internals.CSSPropTween;
_internals._registerComplexSpecialProp("bezier",{parser:function(t,e,prop,cssp,pt,plugin){if(e instanceof Array)e={values:e};plugin=new BezierPlugin;var values=e.values,l=values.length-1,pluginValues=[],v={},i,p,data;if(l<0)return pt;for(i=0;i<=l;i++){data=_parseToProxy(t,values[i],cssp,pt,plugin,l!==i);pluginValues[i]=data.end}for(p in e)v[p]=e[p];v.values=pluginValues;pt=new CSSPropTween(t,"bezier",0,0,data.pt,2);pt.data=data;pt.plugin=plugin;pt.setRatio=_setPluginRatio;if(v.autoRotate===0)v.autoRotate=
true;if(v.autoRotate&&!(v.autoRotate instanceof Array)){i=v.autoRotate===true?0:Number(v.autoRotate)*_DEG2RAD;v.autoRotate=data.end.left!=null?[["left","top","rotation",i,true]]:data.end.x!=null?[["x","y","rotation",i,true]]:false}if(v.autoRotate){if(!cssp._transform)cssp._enableTransforms(false);data.autoRotate=cssp._target._gsTransform}plugin._onInitTween(data.proxy,v,cssp._tween);return pt}})};p._roundProps=function(lookup,value){var op=this._overwriteProps,i=op.length;while(--i>-1)if(lookup[op[i]]||
lookup.bezier||lookup.bezierThrough)this._round[op[i]]=value};p._kill=function(lookup){var a=this._props,p,i;for(p in this._beziers)if(p in lookup){delete this._beziers[p];delete this._func[p];i=a.length;while(--i>-1)if(a[i]===p)a.splice(i,1)}return this._super._kill.call(this,lookup)}})();window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(TweenPlugin,TweenLite){var CSSPlugin=function(){TweenPlugin.call(this,"css");this._overwriteProps.length=0},_hasPriority,_suffixMap,
_cs,_overwriteProps,_specialProps={},p=CSSPlugin.prototype=new TweenPlugin("css");p.constructor=CSSPlugin;CSSPlugin.version="1.9.3";CSSPlugin.API=2;CSSPlugin.defaultTransformPerspective=0;p="px";CSSPlugin.suffixMap={top:p,right:p,bottom:p,left:p,width:p,height:p,fontSize:p,padding:p,margin:p,perspective:p};var _numExp=/(?:\d|\-\d|\.\d|\-\.\d)+/g,_relNumExp=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,_valuesExp=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_NaNExp=/[^\d\-\.]/g,_suffixExp=
/(?:\d|\-|\+|=|#|\.)*/g,_opacityExp=/opacity *= *([^)]*)/,_opacityValExp=/opacity:([^;]*)/,_alphaFilterExp=/alpha\(opacity *=.+?\)/i,_rgbhslExp=/^(rgb|hsl)/,_capsExp=/([A-Z])/g,_camelExp=/-([a-z])/gi,_urlExp=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,_camelFunc=function(s,g){return g.toUpperCase()},_horizExp=/(?:Left|Right|Width)/i,_ieGetMatrixExp=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,_ieSetMatrixExp=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,_commasOutsideParenExp=/,(?=[^\)]*(?:\(|$))/gi,_DEG2RAD=
Math.PI/180,_RAD2DEG=180/Math.PI,_forcePT={},_doc=document,_tempDiv=_doc.createElement("div"),_tempImg=_doc.createElement("img"),_internals=CSSPlugin._internals={_specialProps:_specialProps},_agent=navigator.userAgent,_autoRound,_reqSafariFix,_isSafari,_isFirefox,_isSafariLT6,_ieVers,_supportsOpacity=function(){var i=_agent.indexOf("Android"),d=_doc.createElement("div"),a;_isSafari=_agent.indexOf("Safari")!==-1&&_agent.indexOf("Chrome")===-1&&(i===-1||Number(_agent.substr(i+8,1))>3);_isSafariLT6=
_isSafari&&Number(_agent.substr(_agent.indexOf("Version/")+8,1))<6;_isFirefox=_agent.indexOf("Firefox")!==-1;/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(_agent);_ieVers=parseFloat(RegExp.$1);d.innerHTML="<a style='top:1px;opacity:.55;'>a</a>";a=d.getElementsByTagName("a")[0];return a?/^0.55/.test(a.style.opacity):false}(),_getIEOpacity=function(v){return _opacityExp.test(typeof v==="string"?v:(v.currentStyle?v.currentStyle.filter:v.style.filter)||"")?parseFloat(RegExp.$1)/100:1},_log=function(s){if(window.console);
},_prefixCSS="",_prefix="",_checkPropPrefix=function(p,e){e=e||_tempDiv;var s=e.style,a,i;if(s[p]!==undefined)return p;p=p.charAt(0).toUpperCase()+p.substr(1);a=["O","Moz","ms","Ms","Webkit"];i=5;while(--i>-1&&s[a[i]+p]===undefined);if(i>=0){_prefix=i===3?"ms":a[i];_prefixCSS="-"+_prefix.toLowerCase()+"-";return _prefix+p}return null},_getComputedStyle=_doc.defaultView?_doc.defaultView.getComputedStyle:function(){},_getStyle=CSSPlugin.getStyle=function(t,p,cs,calc,dflt){var rv;if(!_supportsOpacity)if(p===
"opacity")return _getIEOpacity(t);if(!calc&&t.style[p])rv=t.style[p];else if(cs=cs||_getComputedStyle(t,null)){t=cs.getPropertyValue(p.replace(_capsExp,"-$1").toLowerCase());rv=t||cs.length?t:cs[p]}else if(t.currentStyle){cs=t.currentStyle;rv=cs[p]}return dflt!=null&&(!rv||rv==="none"||rv==="auto"||rv==="auto auto")?dflt:rv},_convertToPixels=function(t,p,v,sfx,recurse){if(sfx==="px"||!sfx)return v;if(sfx==="auto"||!v)return 0;var horiz=_horizExp.test(p),node=t,style=_tempDiv.style,neg=v<0,pix;if(neg)v=
-v;if(sfx==="%"&&p.indexOf("border")!==-1)pix=v/100*(horiz?t.clientWidth:t.clientHeight);else{style.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;";if(sfx==="%"||!node.appendChild){node=t.parentNode||_doc.body;style[horiz?"width":"height"]=v+sfx}else style[horiz?"borderLeftWidth":"borderTopWidth"]=v+sfx;node.appendChild(_tempDiv);pix=parseFloat(_tempDiv[horiz?"offsetWidth":"offsetHeight"]);node.removeChild(_tempDiv);if(pix===0&&!recurse)pix=_convertToPixels(t,p,v,sfx,
true)}return neg?-pix:pix},_calculateOffset=function(t,p,cs){if(_getStyle(t,"position",cs)!=="absolute")return 0;var dim=p==="left"?"Left":"Top",v=_getStyle(t,"margin"+dim,cs);return t["offset"+dim]-(_convertToPixels(t,p,parseFloat(v),v.replace(_suffixExp,""))||0)},_getAllStyles=function(t,cs){var s={},i,tr;if(cs=cs||_getComputedStyle(t,null))if(i=cs.length)while(--i>-1)s[cs[i].replace(_camelExp,_camelFunc)]=cs.getPropertyValue(cs[i]);else for(i in cs)s[i]=cs[i];else if(cs=t.currentStyle||t.style)for(i in cs)s[i.replace(_camelExp,
_camelFunc)]=cs[i];if(!_supportsOpacity)s.opacity=_getIEOpacity(t);tr=_getTransform(t,cs,false);s.rotation=tr.rotation*_RAD2DEG;s.skewX=tr.skewX*_RAD2DEG;s.scaleX=tr.scaleX;s.scaleY=tr.scaleY;s.x=tr.x;s.y=tr.y;if(_supports3D){s.z=tr.z;s.rotationX=tr.rotationX*_RAD2DEG;s.rotationY=tr.rotationY*_RAD2DEG;s.scaleZ=tr.scaleZ}if(s.filters)delete s.filters;return s},_cssDif=function(t,s1,s2,vars,forceLookup){var difs={},style=t.style,val,p,mpt;for(p in s2)if(p!=="cssText")if(p!=="length")if(isNaN(p))if(s1[p]!==
(val=s2[p])||forceLookup&&forceLookup[p])if(p.indexOf("Origin")===-1)if(typeof val==="number"||typeof val==="string"){difs[p]=val==="auto"&&(p==="left"||p==="top")?_calculateOffset(t,p):(val===""||val==="auto"||val==="none")&&typeof s1[p]==="string"&&s1[p].replace(_NaNExp,"")!==""?0:val;if(style[p]!==undefined)mpt=new MiniPropTween(style,p,style[p],mpt)}if(vars)for(p in vars)if(p!=="className")difs[p]=vars[p];return{difs:difs,firstMPT:mpt}},_dimensions={width:["Left","Right"],height:["Top","Bottom"]},
_margins=["marginLeft","marginRight","marginTop","marginBottom"],_getDimension=function(t,p,cs){var v=parseFloat(p==="width"?t.offsetWidth:t.offsetHeight),a=_dimensions[p],i=a.length;cs=cs||_getComputedStyle(t,null);while(--i>-1){v-=parseFloat(_getStyle(t,"padding"+a[i],cs,true))||0;v-=parseFloat(_getStyle(t,"border"+a[i]+"Width",cs,true))||0}return v},_parsePosition=function(v,recObj){if(v==null||v===""||v==="auto"||v==="auto auto")v="0 0";var a=v.split(" "),x=v.indexOf("left")!==-1?"0%":v.indexOf("right")!==
-1?"100%":a[0],y=v.indexOf("top")!==-1?"0%":v.indexOf("bottom")!==-1?"100%":a[1];if(y==null)y="0";else if(y==="center")y="50%";if(x==="center"||isNaN(parseFloat(x)))x="50%";if(recObj){recObj.oxp=x.indexOf("%")!==-1;recObj.oyp=y.indexOf("%")!==-1;recObj.oxr=x.charAt(1)==="=";recObj.oyr=y.charAt(1)==="=";recObj.ox=parseFloat(x.replace(_NaNExp,""));recObj.oy=parseFloat(y.replace(_NaNExp,""))}return x+" "+y+(a.length>2?" "+a[2]:"")},_parseChange=function(e,b){return typeof e==="string"&&e.charAt(1)===
"="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(b)},_parseVal=function(v,d){return v==null?d:typeof v==="string"&&v.charAt(1)==="="?parseInt(v.charAt(0)+"1",10)*Number(v.substr(2))+d:parseFloat(v)},_parseAngle=function(v,d,p,directionalEnd){var min=1E-6,cap,split,dif,type,result;if(v==null)result=d;else if(typeof v==="number")result=v*_DEG2RAD;else{cap=Math.PI*2;split=v.split("_");dif=Number(split[0].replace(_NaNExp,""))*(v.indexOf("rad")===-1?_DEG2RAD:1)-(v.charAt(1)===
"="?0:d);type=split[1];if(type&&directionalEnd)directionalEnd[p]=d+dif;if(type==="short"){dif=dif%cap;if(dif!==dif%(cap/2))dif=dif<0?dif+cap:dif-cap}else if(type==="cw"&&dif<0)dif=(dif+cap*9999999999)%cap-(dif/cap|0)*cap;else if(type==="ccw"&&dif>0)dif=(dif-cap*9999999999)%cap-(dif/cap|0)*cap;result=d+dif}if(result<min&&result>-min)result=0;return result},_colorLookup={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],
white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},_hue=function(h,m1,m2){h=h<0?h+1:h>1?h-1:h;return(h*6<1?m1+(m2-m1)*h*6:h<0.5?m2:h*3<2?m1+(m2-m1)*(2/3-h)*6:m1)*255+0.5|0},_parseColor=function(v){var c1,c2,c3,h,s,l;if(!v||v==="")return _colorLookup.black;if(typeof v==="number")return[v>>16,v>>8&255,v&255];if(v.charAt(v.length-
1)===",")v=v.substr(0,v.length-1);if(_colorLookup[v])return _colorLookup[v];if(v.charAt(0)==="#"){if(v.length===4){c1=v.charAt(1),c2=v.charAt(2),c3=v.charAt(3);v="#"+c1+c1+c2+c2+c3+c3}v=parseInt(v.substr(1),16);return[v>>16,v>>8&255,v&255]}if(v.substr(0,3)==="hsl"){v=v.match(_numExp);h=Number(v[0])%360/360;s=Number(v[1])/100;l=Number(v[2])/100;c2=l<=0.5?l*(s+1):l+s-l*s;c1=l*2-c2;if(v.length>3)v[3]=Number(v[3]);v[0]=_hue(h+1/3,c1,c2);v[1]=_hue(h,c1,c2);v[2]=_hue(h-1/3,c1,c2);return v}v=v.match(_numExp)||
_colorLookup.transparent;v[0]=Number(v[0]);v[1]=Number(v[1]);v[2]=Number(v[2]);if(v.length>3)v[3]=Number(v[3]);return v},_colorExp="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(p in _colorLookup)_colorExp+="|"+p+"\\b";_colorExp=new RegExp(_colorExp+")","gi");var _getFormatter=function(dflt,clr,collapsible,multi){if(dflt==null)return function(v){return v};var dColor=clr?(dflt.match(_colorExp)||[""])[0]:"",dVals=dflt.split(dColor).join("").match(_valuesExp)||[],pfx=dflt.substr(0,dflt.indexOf(dVals[0])),
sfx=dflt.charAt(dflt.length-1)===")"?")":"",delim=dflt.indexOf(" ")!==-1?" ":",",numVals=dVals.length,dSfx=numVals>0?dVals[0].replace(_numExp,""):"",formatter;if(!numVals)return function(v){return v};if(clr){formatter=function(v){var color,vals,i,a;if(typeof v==="number")v+=dSfx;else if(multi&&_commasOutsideParenExp.test(v)){a=v.replace(_commasOutsideParenExp,"|").split("|");for(i=0;i<a.length;i++)a[i]=formatter(a[i]);return a.join(",")}color=(v.match(_colorExp)||[dColor])[0];vals=v.split(color).join("").match(_valuesExp)||
[];i=vals.length;if(numVals>i--)while(++i<numVals)vals[i]=collapsible?vals[(i-1)/2>>0]:dVals[i];return pfx+vals.join(delim)+delim+color+sfx+(v.indexOf("inset")!==-1?" inset":"")};return formatter}formatter=function(v){var vals,a,i;if(typeof v==="number")v+=dSfx;else if(multi&&_commasOutsideParenExp.test(v)){a=v.replace(_commasOutsideParenExp,"|").split("|");for(i=0;i<a.length;i++)a[i]=formatter(a[i]);return a.join(",")}vals=v.match(_valuesExp)||[];i=vals.length;if(numVals>i--)while(++i<numVals)vals[i]=
collapsible?vals[(i-1)/2>>0]:dVals[i];return pfx+vals.join(delim)+sfx};return formatter},_getEdgeParser=function(props){props=props.split(",");return function(t,e,p,cssp,pt,plugin,vars){var a=(e+"").split(" "),i;vars={};for(i=0;i<4;i++)vars[props[i]]=a[i]=a[i]||a[(i-1)/2>>0];return cssp.parse(t,vars,pt,plugin)}},_setPluginRatio=_internals._setPluginRatio=function(v){this.plugin.setRatio(v);var d=this.data,proxy=d.proxy,mpt=d.firstMPT,min=1E-6,val,pt,i,str;while(mpt){val=proxy[mpt.v];if(mpt.r)val=
val>0?val+0.5>>0:val-0.5>>0;else if(val<min&&val>-min)val=0;mpt.t[mpt.p]=val;mpt=mpt._next}if(d.autoRotate)d.autoRotate.rotation=proxy.rotation;if(v===1){mpt=d.firstMPT;while(mpt){pt=mpt.t;if(!pt.type)pt.e=pt.s+pt.xs0;else if(pt.type===1){str=pt.xs0+pt.s+pt.xs1;for(i=1;i<pt.l;i++)str+=pt["xn"+i]+pt["xs"+(i+1)];pt.e=str}mpt=mpt._next}}},MiniPropTween=function(t,p,v,next,r){this.t=t;this.p=p;this.v=v;this.r=r;if(next){next._prev=this;this._next=next}},_parseToProxy=_internals._parseToProxy=function(t,
vars,cssp,pt,plugin,shallow){var bpt=pt,start={},end={},transform=cssp._transform,oldForce=_forcePT,i,p,xp,mpt,firstPT;cssp._transform=null;_forcePT=vars;pt=firstPT=cssp.parse(t,vars,pt,plugin);_forcePT=oldForce;if(shallow){cssp._transform=transform;if(bpt){bpt._prev=null;if(bpt._prev)bpt._prev._next=null}}while(pt&&pt!==bpt){if(pt.type<=1){p=pt.p;end[p]=pt.s+pt.c;start[p]=pt.s;if(!shallow){mpt=new MiniPropTween(pt,"s",p,mpt,pt.r);pt.c=0}if(pt.type===1){i=pt.l;while(--i>0){xp="xn"+i;p=pt.p+"_"+xp;
end[p]=pt.data[xp];start[p]=pt[xp];if(!shallow)mpt=new MiniPropTween(pt,xp,p,mpt,pt.rxp[xp])}}}pt=pt._next}return{proxy:start,end:end,firstMPT:mpt,pt:firstPT}},CSSPropTween=_internals.CSSPropTween=function(t,p,s,c,next,type,n,r,pr,b,e){this.t=t;this.p=p;this.s=s;this.c=c;this.n=n||"css_"+p;if(!(t instanceof CSSPropTween))_overwriteProps.push(this.n);this.r=r;this.type=type||0;if(pr){this.pr=pr;_hasPriority=true}this.b=b===undefined?s:b;this.e=e===undefined?s+c:e;if(next){this._next=next;next._prev=
this}},_parseComplex=CSSPlugin.parseComplex=function(t,p,b,e,clrs,dflt,pt,pr,plugin,setRatio){pt=new CSSPropTween(t,p,0,0,pt,setRatio?2:1,null,false,pr,b,e);e+="";var ba=b.split(", ").join(",").split(" "),ea=e.split(", ").join(",").split(" "),l=ba.length,autoRound=_autoRound!==false,i,xi,ni,bv,ev,bnums,enums,bn,rgba,temp,cv,str;if(e.indexOf(",")!==-1||b.indexOf(",")!==-1){ba=ba.join(" ").replace(_commasOutsideParenExp,", ").split(" ");ea=ea.join(" ").replace(_commasOutsideParenExp,", ").split(" ");
l=ba.length}if(l!==ea.length){ba=(dflt||"").split(" ");l=ba.length}pt.plugin=plugin;pt.setRatio=setRatio;for(i=0;i<l;i++){bv=ba[i];ev=ea[i];bn=parseFloat(bv);if(bn||bn===0)pt.appendXtra("",bn,_parseChange(ev,bn),ev.replace(_relNumExp,""),autoRound&&ev.indexOf("px")!==-1,true);else if(clrs&&(bv.charAt(0)==="#"||_colorLookup[bv]||_rgbhslExp.test(bv))){str=ev.charAt(ev.length-1)===","?"),":")";bv=_parseColor(bv);ev=_parseColor(ev);rgba=bv.length+ev.length>6;if(rgba&&!_supportsOpacity&&ev[3]===0){pt["xs"+
pt.l]+=pt.l?" transparent":"transparent";pt.e=pt.e.split(ea[i]).join("transparent")}else{if(!_supportsOpacity)rgba=false;pt.appendXtra(rgba?"rgba(":"rgb(",bv[0],ev[0]-bv[0],",",true,true).appendXtra("",bv[1],ev[1]-bv[1],",",true).appendXtra("",bv[2],ev[2]-bv[2],rgba?",":str,true);if(rgba){bv=bv.length<4?1:bv[3];pt.appendXtra("",bv,(ev.length<4?1:ev[3])-bv,str,false)}}}else{bnums=bv.match(_numExp);if(!bnums)pt["xs"+pt.l]+=pt.l?" "+bv:bv;else{enums=ev.match(_relNumExp);if(!enums||enums.length!==bnums.length)return pt;
ni=0;for(xi=0;xi<bnums.length;xi++){cv=bnums[xi];temp=bv.indexOf(cv,ni);pt.appendXtra(bv.substr(ni,temp-ni),Number(cv),_parseChange(enums[xi],cv),"",autoRound&&bv.substr(temp+cv.length,2)==="px",xi===0);ni=temp+cv.length}pt["xs"+pt.l]+=bv.substr(ni)}}}if(e.indexOf("=")!==-1)if(pt.data){str=pt.xs0+pt.data.s;for(i=1;i<pt.l;i++)str+=pt["xs"+i]+pt.data["xn"+i];pt.e=str+pt["xs"+i]}if(!pt.l){pt.type=-1;pt.xs0=pt.e}return pt.xfirst||pt},i=9;p=CSSPropTween.prototype;p.l=p.pr=0;while(--i>0){p["xn"+i]=0;p["xs"+
i]=""}p.xs0="";p._next=p._prev=p.xfirst=p.data=p.plugin=p.setRatio=p.rxp=null;p.appendXtra=function(pfx,s,c,sfx,r,pad){var pt=this,l=pt.l;pt["xs"+l]+=pad&&l?" "+pfx:pfx||"";if(!c)if(l!==0&&!pt.plugin){pt["xs"+l]+=s+(sfx||"");return pt}pt.l++;pt.type=pt.setRatio?2:1;pt["xs"+pt.l]=sfx||"";if(l>0){pt.data["xn"+l]=s+c;pt.rxp["xn"+l]=r;pt["xn"+l]=s;if(!pt.plugin){pt.xfirst=new CSSPropTween(pt,"xn"+l,s,c,pt.xfirst||pt,0,pt.n,r,pt.pr);pt.xfirst.xs0=0}return pt}pt.data={s:s+c};pt.rxp={};pt.s=s;pt.c=c;pt.r=
r;return pt};var SpecialProp=function(p,options){options=options||{};this.p=options.prefix?_checkPropPrefix(p)||p:p;_specialProps[p]=_specialProps[this.p]=this;this.format=options.formatter||_getFormatter(options.defaultValue,options.color,options.collapsible,options.multi);if(options.parser)this.parse=options.parser;this.clrs=options.color;this.multi=options.multi;this.keyword=options.keyword;this.dflt=options.defaultValue;this.pr=options.priority||0},_registerComplexSpecialProp=_internals._registerComplexSpecialProp=
function(p,options,defaults){if(typeof options!=="object")options={parser:defaults};var a=p.split(","),d=options.defaultValue,i,temp;defaults=defaults||[d];for(i=0;i<a.length;i++){options.prefix=i===0&&options.prefix;options.defaultValue=defaults[i]||d;temp=new SpecialProp(a[i],options)}},_registerPluginProp=function(p){if(!_specialProps[p]){var pluginName=p.charAt(0).toUpperCase()+p.substr(1)+"Plugin";_registerComplexSpecialProp(p,{parser:function(t,e,p,cssp,pt,plugin,vars){var pluginClass=(window.GreenSockGlobals||
window).com.greensock.plugins[pluginName];if(!pluginClass){_log("Error: "+pluginName+" js file not loaded.");return pt}pluginClass._cssRegister();return _specialProps[p].parse(t,e,p,cssp,pt,plugin,vars)}})}};p=SpecialProp.prototype;p.parseComplex=function(t,b,e,pt,plugin,setRatio){var kwd=this.keyword,i,ba,ea,l,bi,ei;if(this.multi)if(_commasOutsideParenExp.test(e)||_commasOutsideParenExp.test(b)){ba=b.replace(_commasOutsideParenExp,"|").split("|");ea=e.replace(_commasOutsideParenExp,"|").split("|")}else if(kwd){ba=
[b];ea=[e]}if(ea){l=ea.length>ba.length?ea.length:ba.length;for(i=0;i<l;i++){b=ba[i]=ba[i]||this.dflt;e=ea[i]=ea[i]||this.dflt;if(kwd){bi=b.indexOf(kwd);ei=e.indexOf(kwd);if(bi!==ei){e=ei===-1?ea:ba;e[i]+=" "+kwd}}}b=ba.join(", ");e=ea.join(", ")}return _parseComplex(t,this.p,b,e,this.clrs,this.dflt,pt,this.pr,plugin,setRatio)};p.parse=function(t,e,p,cssp,pt,plugin,vars){return this.parseComplex(t.style,this.format(_getStyle(t,this.p,_cs,false,this.dflt)),this.format(e),pt,plugin)};CSSPlugin.registerSpecialProp=
function(name,onInitTween,priority){_registerComplexSpecialProp(name,{parser:function(t,e,p,cssp,pt,plugin,vars){var rv=new CSSPropTween(t,p,0,0,pt,2,p,false,priority);rv.plugin=plugin;rv.setRatio=onInitTween(t,e,cssp._tween,p);return rv},priority:priority})};var _transformProps="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),_transformProp=_checkPropPrefix("transform"),_transformPropCSS=_prefixCSS+"transform",_transformOriginProp=_checkPropPrefix("transformOrigin"),
_supports3D=_checkPropPrefix("perspective")!==null,_getTransform=function(t,cs,rec){var tm=rec?t._gsTransform||{skewY:0}:{skewY:0},invX=tm.scaleX<0,min=2E-5,rnd=1E5,minPI=-Math.PI+1E-4,maxPI=Math.PI-1E-4,zOrigin=_supports3D?parseFloat(_getStyle(t,_transformOriginProp,cs,false,"0 0 0").split(" ")[2])||tm.zOrigin||0:0,s,m,i,n,dec,scaleX,scaleY,rotation,skewX,difX,difY,difR,difS;if(_transformProp)s=_getStyle(t,_transformPropCSS,cs,true);else if(t.currentStyle){s=t.currentStyle.filter.match(_ieGetMatrixExp);
s=s&&s.length===4?s[0].substr(4)+","+Number(s[2].substr(4))+","+Number(s[1].substr(4))+","+s[3].substr(4)+","+(tm?tm.x:0)+","+(tm?tm.y:0):null}m=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[];i=m.length;while(--i>-1){n=Number(m[i]);m[i]=(dec=n-(n|=0))?(dec*rnd+(dec<0?-0.5:0.5)|0)/rnd+n:n}if(m.length===16){var a13=m[8],a23=m[9],a33=m[10],a14=m[12],a24=m[13],a34=m[14];if(tm.zOrigin){a34=-tm.zOrigin;a14=a13*a34-m[12];a24=a23*a34-m[13];a34=a33*a34+tm.zOrigin-m[14]}if(!rec||a14!==tm.x||a24!==tm.y||a34!==
tm.z){var a11=m[0],a21=m[1],a31=m[2],a41=m[3],a12=m[4],a22=m[5],a32=m[6],a42=m[7],a43=m[11],angle=tm.rotationX=Math.atan2(a32,a33),xFlip=angle<minPI||angle>maxPI,t1,t2,t3,t4,cos,sin,yFlip,zFlip;if(angle){cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a12*cos+a13*sin;t2=a22*cos+a23*sin;t3=a32*cos+a33*sin;t4=a42*cos+a43*sin;a13=a12*-sin+a13*cos;a23=a22*-sin+a23*cos;a33=a32*-sin+a33*cos;a43=a42*-sin+a43*cos;a12=t1;a22=t2;a32=t3}angle=tm.rotationY=Math.atan2(a13,a11);if(angle){yFlip=angle<minPI||angle>
maxPI;cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a11*cos-a13*sin;t2=a21*cos-a23*sin;t3=a31*cos-a33*sin;t4=a41*cos-a43*sin;a23=a21*sin+a23*cos;a33=a31*sin+a33*cos;a43=a41*sin+a43*cos;a11=t1;a21=t2;a31=t3}angle=tm.rotation=Math.atan2(a21,a22);if(angle){zFlip=angle<minPI||angle>maxPI;cos=Math.cos(-angle);sin=Math.sin(-angle);a11=a11*cos+a12*sin;t2=a21*cos+a22*sin;a22=a21*-sin+a22*cos;a32=a31*-sin+a32*cos;a21=t2}if(zFlip&&xFlip)tm.rotation=tm.rotationX=0;else if(zFlip&&yFlip)tm.rotation=tm.rotationY=
0;else if(yFlip&&xFlip)tm.rotationY=tm.rotationX=0;tm.scaleX=(Math.sqrt(a11*a11+a21*a21)*rnd+0.5>>0)/rnd;tm.scaleY=(Math.sqrt(a22*a22+a23*a23)*rnd+0.5>>0)/rnd;tm.scaleZ=(Math.sqrt(a32*a32+a33*a33)*rnd+0.5>>0)/rnd;tm.skewX=0;tm.perspective=a43?1/(a43<0?-a43:a43):0;tm.x=a14;tm.y=a24;tm.z=a34}}else if((!_supports3D||m.length===0||tm.x!==m[4]||tm.y!==m[5]||!tm.rotationX&&!tm.rotationY)&&!(tm.x!==undefined&&_getStyle(t,"display",cs)==="none")){var k=m.length>=6,a=k?m[0]:1,b=m[1]||0,c=m[2]||0,d=k?m[3]:
1;tm.x=m[4]||0;tm.y=m[5]||0;scaleX=Math.sqrt(a*a+b*b);scaleY=Math.sqrt(d*d+c*c);rotation=a||b?Math.atan2(b,a):tm.rotation||0;skewX=c||d?Math.atan2(c,d)+rotation:tm.skewX||0;difX=scaleX-Math.abs(tm.scaleX||0);difY=scaleY-Math.abs(tm.scaleY||0);if(Math.abs(skewX)>Math.PI/2&&Math.abs(skewX)<Math.PI*1.5)if(invX){scaleX*=-1;skewX+=rotation<=0?Math.PI:-Math.PI;rotation+=rotation<=0?Math.PI:-Math.PI}else{scaleY*=-1;skewX+=skewX<=0?Math.PI:-Math.PI}difR=(rotation-tm.rotation)%Math.PI;difS=(skewX-tm.skewX)%
Math.PI;if(tm.skewX===undefined||difX>min||difX<-min||difY>min||difY<-min||difR>minPI&&difR<maxPI&&difR*rnd>>0!==0||difS>minPI&&difS<maxPI&&difS*rnd>>0!==0){tm.scaleX=scaleX;tm.scaleY=scaleY;tm.rotation=rotation;tm.skewX=skewX}if(_supports3D){tm.rotationX=tm.rotationY=tm.z=0;tm.perspective=parseFloat(CSSPlugin.defaultTransformPerspective)||0;tm.scaleZ=1}}tm.zOrigin=zOrigin;for(i in tm)if(tm[i]<min)if(tm[i]>-min)tm[i]=0;if(rec)t._gsTransform=tm;return tm},_setIETransformRatio=function(v){var t=this.data,
ang=-t.rotation,skew=ang+t.skewX,rnd=1E5,a=(Math.cos(ang)*t.scaleX*rnd>>0)/rnd,b=(Math.sin(ang)*t.scaleX*rnd>>0)/rnd,c=(Math.sin(skew)*-t.scaleY*rnd>>0)/rnd,d=(Math.cos(skew)*t.scaleY*rnd>>0)/rnd,style=this.t.style,cs=this.t.currentStyle,filters,val;if(!cs)return;val=b;b=-c;c=-val;filters=cs.filter;style.filter="";var w=this.t.offsetWidth,h=this.t.offsetHeight,clip=cs.position!=="absolute",m="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+b+", M21="+c+", M22="+d,ox=t.x,oy=t.y,dx,dy;if(t.ox!=
null){dx=(t.oxp?w*t.ox*0.01:t.ox)-w/2;dy=(t.oyp?h*t.oy*0.01:t.oy)-h/2;ox+=dx-(dx*a+dy*b);oy+=dy-(dx*c+dy*d)}if(!clip){var mult=_ieVers<8?1:-1,marg,prop,dif;dx=t.ieOffsetX||0;dy=t.ieOffsetY||0;t.ieOffsetX=Math.round((w-((a<0?-a:a)*w+(b<0?-b:b)*h))/2+ox);t.ieOffsetY=Math.round((h-((d<0?-d:d)*h+(c<0?-c:c)*w))/2+oy);for(i=0;i<4;i++){prop=_margins[i];marg=cs[prop];val=marg.indexOf("px")!==-1?parseFloat(marg):_convertToPixels(this.t,prop,parseFloat(marg),marg.replace(_suffixExp,""))||0;if(val!==t[prop])dif=
i<2?-t.ieOffsetX:-t.ieOffsetY;else dif=i<2?dx-t.ieOffsetX:dy-t.ieOffsetY;style[prop]=(t[prop]=Math.round(val-dif*(i===0||i===2?1:mult)))+"px"}m+=", sizingMethod='auto expand')"}else{dx=w/2;dy=h/2;m+=", Dx="+(dx-(dx*a+dy*b)+ox)+", Dy="+(dy-(dx*c+dy*d)+oy)+")"}if(filters.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1)style.filter=filters.replace(_ieSetMatrixExp,m);else style.filter=m+" "+filters;if(v===0||v===1)if(a===1)if(b===0)if(c===0)if(d===1)if(!clip||m.indexOf("Dx=0, Dy=0")!==-1)if(!_opacityExp.test(filters)||
parseFloat(RegExp.$1)===100)if(filters.indexOf("gradient(")===-1)style.removeAttribute("filter")},_set3DTransformRatio=function(v){var t=this.data,style=this.t.style,perspective=t.perspective,a11=t.scaleX,a12=0,a13=0,a14=0,a21=0,a22=t.scaleY,a23=0,a24=0,a31=0,a32=0,a33=t.scaleZ,a34=0,a41=0,a42=0,a43=perspective?-1/perspective:0,angle=t.rotation,zOrigin=t.zOrigin,cma=",",rnd=1E5,cos,sin,t1,t2,t3,t4,ffProp,n,sfx;if(_isFirefox){ffProp=style.top?"top":style.bottom?"bottom":parseFloat(_getStyle(this.t,
"top",null,false))?"bottom":"top";t1=_getStyle(this.t,ffProp,null,false);n=parseFloat(t1)||0;sfx=t1.substr((n+"").length)||"px";t._ffFix=!t._ffFix;style[ffProp]=(t._ffFix?n+0.05:n-0.05)+sfx}if(angle||t.skewX){t1=a11*Math.cos(angle);t2=a22*Math.sin(angle);angle-=t.skewX;a12=a11*-Math.sin(angle);a22=a22*Math.cos(angle);a11=t1;a21=t2}angle=t.rotationY;if(angle){cos=Math.cos(angle);sin=Math.sin(angle);t1=a11*cos;t2=a21*cos;t3=a33*-sin;t4=a43*-sin;a13=a11*sin;a23=a21*sin;a33=a33*cos;a43*=cos;a11=t1;a21=
t2;a31=t3;a41=t4}angle=t.rotationX;if(angle){cos=Math.cos(angle);sin=Math.sin(angle);t1=a12*cos+a13*sin;t2=a22*cos+a23*sin;t3=a32*cos+a33*sin;t4=a42*cos+a43*sin;a13=a12*-sin+a13*cos;a23=a22*-sin+a23*cos;a33=a32*-sin+a33*cos;a43=a42*-sin+a43*cos;a12=t1;a22=t2;a32=t3;a42=t4}if(zOrigin){a34-=zOrigin;a14=a13*a34;a24=a23*a34;a34=a33*a34+zOrigin}a14=(t1=(a14+=t.x)-(a14|=0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a14:a14;a24=(t1=(a24+=t.y)-(a24|=0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a24:a24;a34=(t1=(a34+=t.z)-(a34|=
0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a34:a34;style[_transformProp]="matrix3d("+(a11*rnd>>0)/rnd+cma+(a21*rnd>>0)/rnd+cma+(a31*rnd>>0)/rnd+cma+(a41*rnd>>0)/rnd+cma+(a12*rnd>>0)/rnd+cma+(a22*rnd>>0)/rnd+cma+(a32*rnd>>0)/rnd+cma+(a42*rnd>>0)/rnd+cma+(a13*rnd>>0)/rnd+cma+(a23*rnd>>0)/rnd+cma+(a33*rnd>>0)/rnd+cma+(a43*rnd>>0)/rnd+cma+a14+cma+a24+cma+a34+cma+(perspective?1+-a34/perspective:1)+")"},_set2DTransformRatio=function(v){var t=this.data,targ=this.t,style=targ.style,ffProp,t1,n,sfx,ang,skew,rnd,sx,
sy;if(_isFirefox){ffProp=style.top?"top":style.bottom?"bottom":parseFloat(_getStyle(targ,"top",null,false))?"bottom":"top";t1=_getStyle(targ,ffProp,null,false);n=parseFloat(t1)||0;sfx=t1.substr((n+"").length)||"px";t._ffFix=!t._ffFix;style[ffProp]=(t._ffFix?n+0.05:n-0.05)+sfx}if(!t.rotation&&!t.skewX)style[_transformProp]="matrix("+t.scaleX+",0,0,"+t.scaleY+","+t.x+","+t.y+")";else{ang=t.rotation;skew=ang-t.skewX;rnd=1E5;sx=t.scaleX*rnd;sy=t.scaleY*rnd;style[_transformProp]="matrix("+(Math.cos(ang)*
sx>>0)/rnd+","+(Math.sin(ang)*sx>>0)/rnd+","+(Math.sin(skew)*-sy>>0)/rnd+","+(Math.cos(skew)*sy>>0)/rnd+","+t.x+","+t.y+")"}};_registerComplexSpecialProp("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(t,e,p,cssp,pt,plugin,vars){if(cssp._transform)return pt;var m1=cssp._transform=_getTransform(t,_cs,true),style=t.style,
min=1E-6,i=_transformProps.length,v=vars,endRotations={},m2,skewY,copy,orig,has3D,hasChange,dr;if(typeof v.transform==="string"&&_transformProp){copy=style.cssText;style[_transformProp]=v.transform;style.display="block";m2=_getTransform(t,null,false);style.cssText=copy}else if(typeof v==="object"){m2={scaleX:_parseVal(v.scaleX!=null?v.scaleX:v.scale,m1.scaleX),scaleY:_parseVal(v.scaleY!=null?v.scaleY:v.scale,m1.scaleY),scaleZ:_parseVal(v.scaleZ!=null?v.scaleZ:v.scale,m1.scaleZ),x:_parseVal(v.x,m1.x),
y:_parseVal(v.y,m1.y),z:_parseVal(v.z,m1.z),perspective:_parseVal(v.transformPerspective,m1.perspective)};dr=v.directionalRotation;if(dr!=null)if(typeof dr==="object")for(copy in dr)v[copy]=dr[copy];else v.rotation=dr;m2.rotation=_parseAngle("rotation"in v?v.rotation:"shortRotation"in v?v.shortRotation+"_short":"rotationZ"in v?v.rotationZ:m1.rotation*_RAD2DEG,m1.rotation,"rotation",endRotations);if(_supports3D){m2.rotationX=_parseAngle("rotationX"in v?v.rotationX:"shortRotationX"in v?v.shortRotationX+
"_short":m1.rotationX*_RAD2DEG||0,m1.rotationX,"rotationX",endRotations);m2.rotationY=_parseAngle("rotationY"in v?v.rotationY:"shortRotationY"in v?v.shortRotationY+"_short":m1.rotationY*_RAD2DEG||0,m1.rotationY,"rotationY",endRotations)}m2.skewX=v.skewX==null?m1.skewX:_parseAngle(v.skewX,m1.skewX);m2.skewY=v.skewY==null?m1.skewY:_parseAngle(v.skewY,m1.skewY);if(skewY=m2.skewY-m1.skewY){m2.skewX+=skewY;m2.rotation+=skewY}}has3D=m1.z||m1.rotationX||m1.rotationY||m2.z||m2.rotationX||m2.rotationY||m2.perspective;
if(!has3D&&v.scale!=null)m2.scaleZ=1;while(--i>-1){p=_transformProps[i];orig=m2[p]-m1[p];if(orig>min||orig<-min||_forcePT[p]!=null){hasChange=true;pt=new CSSPropTween(m1,p,m1[p],orig,pt);if(p in endRotations)pt.e=endRotations[p];pt.xs0=0;pt.plugin=plugin;cssp._overwriteProps.push(pt.n)}}orig=v.transformOrigin;if(orig||_supports3D&&has3D&&m1.zOrigin)if(_transformProp){hasChange=true;orig=(orig||_getStyle(t,p,_cs,false,"50% 50%"))+"";p=_transformOriginProp;pt=new CSSPropTween(style,p,0,0,pt,-1,"css_transformOrigin");
pt.b=style[p];pt.plugin=plugin;if(_supports3D){copy=m1.zOrigin;orig=orig.split(" ");m1.zOrigin=(orig.length>2?parseFloat(orig[2]):copy)||0;pt.xs0=pt.e=style[p]=orig[0]+" "+(orig[1]||"50%")+" 0px";pt=new CSSPropTween(m1,"zOrigin",0,0,pt,-1,pt.n);pt.b=copy;pt.xs0=pt.e=m1.zOrigin}else pt.xs0=pt.e=style[p]=orig}else _parsePosition(orig+"",m1);if(hasChange)cssp._transformType=has3D||this._transformType===3?3:2;return pt},prefix:true});_registerComplexSpecialProp("boxShadow",{defaultValue:"0px 0px 0px 0px #999",
prefix:true,color:true,multi:true,keyword:"inset"});_registerComplexSpecialProp("borderRadius",{defaultValue:"0px",parser:function(t,e,p,cssp,pt,plugin){e=this.format(e);var props=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],style=t.style,ea1,i,es2,bs2,bs,es,bn,en,w,h,esfx,bsfx,rel,hn,vn,em;w=parseFloat(t.offsetWidth);h=parseFloat(t.offsetHeight);ea1=e.split(" ");for(i=0;i<props.length;i++){if(this.p.indexOf("border"))props[i]=_checkPropPrefix(props[i]);
bs=bs2=_getStyle(t,props[i],_cs,false,"0px");if(bs.indexOf(" ")!==-1){bs2=bs.split(" ");bs=bs2[0];bs2=bs2[1]}es=es2=ea1[i];bn=parseFloat(bs);bsfx=bs.substr((bn+"").length);rel=es.charAt(1)==="=";if(rel){en=parseInt(es.charAt(0)+"1",10);es=es.substr(2);en*=parseFloat(es);esfx=es.substr((en+"").length-(en<0?1:0))||""}else{en=parseFloat(es);esfx=es.substr((en+"").length)}if(esfx==="")esfx=_suffixMap[p]||bsfx;if(esfx!==bsfx){hn=_convertToPixels(t,"borderLeft",bn,bsfx);vn=_convertToPixels(t,"borderTop",
bn,bsfx);if(esfx==="%"){bs=hn/w*100+"%";bs2=vn/h*100+"%"}else if(esfx==="em"){em=_convertToPixels(t,"borderLeft",1,"em");bs=hn/em+"em";bs2=vn/em+"em"}else{bs=hn+"px";bs2=vn+"px"}if(rel){es=parseFloat(bs)+en+esfx;es2=parseFloat(bs2)+en+esfx}}pt=_parseComplex(style,props[i],bs+" "+bs2,es+" "+es2,false,"0px",pt)}return pt},prefix:true,formatter:_getFormatter("0px 0px 0px 0px",false,true)});_registerComplexSpecialProp("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,p,cssp,pt,plugin){var bp=
"background-position",cs=_cs||_getComputedStyle(t,null),bs=this.format((cs?_ieVers?cs.getPropertyValue(bp+"-x")+" "+cs.getPropertyValue(bp+"-y"):cs.getPropertyValue(bp):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),es=this.format(e),ba,ea,i,pct,overlap,src;if(bs.indexOf("%")!==-1!==(es.indexOf("%")!==-1)){src=_getStyle(t,"backgroundImage").replace(_urlExp,"");if(src&&src!=="none"){ba=bs.split(" ");ea=es.split(" ");_tempImg.setAttribute("src",src);i=2;while(--i>
-1){bs=ba[i];pct=bs.indexOf("%")!==-1;if(pct!==(ea[i].indexOf("%")!==-1)){overlap=i===0?t.offsetWidth-_tempImg.width:t.offsetHeight-_tempImg.height;ba[i]=pct?parseFloat(bs)/100*overlap+"px":parseFloat(bs)/overlap*100+"%"}}bs=ba.join(" ")}}return this.parseComplex(t.style,bs,es,pt,plugin)},formatter:_parsePosition});_registerComplexSpecialProp("backgroundSize",{defaultValue:"0 0",formatter:_parsePosition});_registerComplexSpecialProp("perspective",{defaultValue:"0px",prefix:true});_registerComplexSpecialProp("perspectiveOrigin",
{defaultValue:"50% 50%",prefix:true});_registerComplexSpecialProp("transformStyle",{prefix:true});_registerComplexSpecialProp("backfaceVisibility",{prefix:true});_registerComplexSpecialProp("margin",{parser:_getEdgeParser("marginTop,marginRight,marginBottom,marginLeft")});_registerComplexSpecialProp("padding",{parser:_getEdgeParser("paddingTop,paddingRight,paddingBottom,paddingLeft")});_registerComplexSpecialProp("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,p,cssp,pt,plugin){var b,
cs,delim;if(_ieVers<9){cs=t.currentStyle;delim=_ieVers<8?" ":",";b="rect("+cs.clipTop+delim+cs.clipRight+delim+cs.clipBottom+delim+cs.clipLeft+")";e=this.format(e).split(",").join(delim)}else{b=this.format(_getStyle(t,this.p,_cs,false,this.dflt));e=this.format(e)}return this.parseComplex(t.style,b,e,pt,plugin)}});_registerComplexSpecialProp("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});_registerComplexSpecialProp("autoRound,strictUnits",{parser:function(t,e,p,cssp,pt){return pt}});
_registerComplexSpecialProp("border",{defaultValue:"0px solid #000",parser:function(t,e,p,cssp,pt,plugin){return this.parseComplex(t.style,this.format(_getStyle(t,"borderTopWidth",_cs,false,"0px")+" "+_getStyle(t,"borderTopStyle",_cs,false,"solid")+" "+_getStyle(t,"borderTopColor",_cs,false,"#000")),this.format(e),pt,plugin)},color:true,formatter:function(v){var a=v.split(" ");return a[0]+" "+(a[1]||"solid")+" "+(v.match(_colorExp)||["#000"])[0]}});_registerComplexSpecialProp("float,cssFloat,styleFloat",
{parser:function(t,e,p,cssp,pt,plugin){var s=t.style,prop="cssFloat"in s?"cssFloat":"styleFloat";return new CSSPropTween(s,prop,0,0,pt,-1,p,false,0,s[prop],e)}});var _setIEOpacityRatio=function(v){var t=this.t,filters=t.filter,val=this.s+this.c*v>>0,skip;if(val===100)if(filters.indexOf("atrix(")===-1&&filters.indexOf("radient(")===-1){t.removeAttribute("filter");skip=!_getStyle(this.data,"filter")}else{t.filter=filters.replace(_alphaFilterExp,"");skip=true}if(!skip){if(this.xn1)t.filter=filters=filters||
"alpha(opacity=100)";if(filters.indexOf("opacity")===-1)t.filter+=" alpha(opacity="+val+")";else t.filter=filters.replace(_opacityExp,"opacity="+val)}};_registerComplexSpecialProp("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,p,cssp,pt,plugin){var b=parseFloat(_getStyle(t,"opacity",_cs,false,"1")),style=t.style,vb;e=parseFloat(e);if(p==="autoAlpha"){vb=_getStyle(t,"visibility",_cs);if(b===1&&vb==="hidden"&&e!==0)b=0;pt=new CSSPropTween(style,"visibility",0,0,pt,-1,null,false,0,b!==
0?"visible":"hidden",e===0?"hidden":"visible");pt.xs0="visible";cssp._overwriteProps.push(pt.n)}if(_supportsOpacity)pt=new CSSPropTween(style,"opacity",b,e-b,pt);else{pt=new CSSPropTween(style,"opacity",b*100,(e-b)*100,pt);pt.xn1=p==="autoAlpha"?1:0;style.zoom=1;pt.type=2;pt.b="alpha(opacity="+pt.s+")";pt.e="alpha(opacity="+(pt.s+pt.c)+")";pt.data=t;pt.plugin=plugin;pt.setRatio=_setIEOpacityRatio}return pt}});var _removeProp=function(s,p){if(p)if(s.removeProperty)s.removeProperty(p.replace(_capsExp,
"-$1").toLowerCase());else s.removeAttribute(p)},_setClassNameRatio=function(v){this.t._gsClassPT=this;if(v===1||v===0){this.t.className=v===0?this.b:this.e;var mpt=this.data,s=this.t.style;while(mpt){if(!mpt.v)_removeProp(s,mpt.p);else s[mpt.p]=mpt.v;mpt=mpt._next}if(v===1&&this.t._gsClassPT===this)this.t._gsClassPT=null}else if(this.t.className!==this.e)this.t.className=this.e};_registerComplexSpecialProp("className",{parser:function(t,e,p,cssp,pt,plugin,vars){var b=t.className,cssText=t.style.cssText,
difData,bs,cnpt,cnptLookup,mpt;pt=cssp._classNamePT=new CSSPropTween(t,p,0,0,pt,2);pt.setRatio=_setClassNameRatio;pt.pr=-11;_hasPriority=true;pt.b=b;bs=_getAllStyles(t,_cs);cnpt=t._gsClassPT;if(cnpt){cnptLookup={};mpt=cnpt.data;while(mpt){cnptLookup[mpt.p]=1;mpt=mpt._next}cnpt.setRatio(1)}t._gsClassPT=pt;pt.e=e.charAt(1)!=="="?e:b.replace(new RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+(e.charAt(0)==="+"?" "+e.substr(2):"");if(cssp._tween._duration){t.className=pt.e;difData=_cssDif(t,bs,_getAllStyles(t),
vars,cnptLookup);t.className=b;pt.data=difData.firstMPT;t.style.cssText=cssText;pt=pt.xfirst=cssp.parse(t,difData.difs,pt,plugin)}return pt}});var _setClearPropsRatio=function(v){if(v===1||v===0)if(this.data._totalTime===this.data._totalDuration){var all=this.e==="all",s=this.t.style,a=all?s.cssText.split(";"):this.e.split(","),i=a.length,transformParse=_specialProps.transform.parse,p;while(--i>-1){p=a[i];if(all)p=p.substr(0,p.indexOf(":")).split(" ").join("");if(_specialProps[p])p=_specialProps[p].parse===
transformParse?_transformProp:_specialProps[p].p;_removeProp(s,p)}}};_registerComplexSpecialProp("clearProps",{parser:function(t,e,p,cssp,pt){pt=new CSSPropTween(t,p,0,0,pt,2);pt.setRatio=_setClearPropsRatio;pt.e=e;pt.pr=-10;pt.data=cssp._tween;_hasPriority=true;return pt}});p="bezier,throwProps,physicsProps,physics2D".split(",");i=p.length;while(i--)_registerPluginProp(p[i]);p=CSSPlugin.prototype;p._firstPT=null;p._onInitTween=function(target,vars,tween){if(!target.nodeType)return false;this._target=
target;this._tween=tween;this._vars=vars;_autoRound=vars.autoRound;_hasPriority=false;_suffixMap=vars.suffixMap||CSSPlugin.suffixMap;_cs=_getComputedStyle(target,"");_overwriteProps=this._overwriteProps;var style=target.style,v,pt,pt2,first,last,next,zIndex,tpt,threeD;if(_reqSafariFix)if(style.zIndex===""){v=_getStyle(target,"zIndex",_cs);if(v==="auto"||v==="")style.zIndex=0}if(typeof vars==="string"){first=style.cssText;v=_getAllStyles(target,_cs);style.cssText=first+";"+vars;v=_cssDif(target,v,
_getAllStyles(target)).difs;if(!_supportsOpacity&&_opacityValExp.test(vars))v.opacity=parseFloat(RegExp.$1);vars=v;style.cssText=first}this._firstPT=pt=this.parse(target,vars,null);if(this._transformType){threeD=this._transformType===3;if(!_transformProp)style.zoom=1;else if(_isSafari){_reqSafariFix=true;if(style.zIndex===""){zIndex=_getStyle(target,"zIndex",_cs);if(zIndex==="auto"||zIndex==="")style.zIndex=0}if(_isSafariLT6)style.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(threeD?
"visible":"hidden")}pt2=pt;while(pt2&&pt2._next)pt2=pt2._next;tpt=new CSSPropTween(target,"transform",0,0,null,2);this._linkCSSP(tpt,null,pt2);tpt.setRatio=threeD&&_supports3D?_set3DTransformRatio:_transformProp?_set2DTransformRatio:_setIETransformRatio;tpt.data=this._transform||_getTransform(target,_cs,true);_overwriteProps.pop()}if(_hasPriority){while(pt){next=pt._next;pt2=first;while(pt2&&pt2.pr>pt.pr)pt2=pt2._next;if(pt._prev=pt2?pt2._prev:last)pt._prev._next=pt;else first=pt;if(pt._next=pt2)pt2._prev=
pt;else last=pt;pt=next}this._firstPT=first}return true};p.parse=function(target,vars,pt,plugin){var style=target.style,p,sp,bn,en,bs,es,bsfx,esfx,isStr,rel;for(p in vars){es=vars[p];sp=_specialProps[p];if(sp)pt=sp.parse(target,es,p,this,pt,plugin,vars);else{bs=_getStyle(target,p,_cs)+"";isStr=typeof es==="string";if(p==="color"||p==="fill"||p==="stroke"||p.indexOf("Color")!==-1||isStr&&_rgbhslExp.test(es)){if(!isStr){es=_parseColor(es);es=(es.length>3?"rgba(":"rgb(")+es.join(",")+")"}pt=_parseComplex(style,
p,bs,es,true,"transparent",pt,0,plugin)}else if(isStr&&(es.indexOf(" ")!==-1||es.indexOf(",")!==-1))pt=_parseComplex(style,p,bs,es,true,null,pt,0,plugin);else{bn=parseFloat(bs);bsfx=bn||bn===0?bs.substr((bn+"").length):"";if(bs===""||bs==="auto")if(p==="width"||p==="height"){bn=_getDimension(target,p,_cs);bsfx="px"}else if(p==="left"||p==="top"){bn=_calculateOffset(target,p,_cs);bsfx="px"}else{bn=p!=="opacity"?0:1;bsfx=""}rel=isStr&&es.charAt(1)==="=";if(rel){en=parseInt(es.charAt(0)+"1",10);es=es.substr(2);
en*=parseFloat(es);esfx=es.replace(_suffixExp,"")}else{en=parseFloat(es);esfx=isStr?es.substr((en+"").length)||"":""}if(esfx==="")esfx=_suffixMap[p]||bsfx;es=en||en===0?(rel?en+bn:en)+esfx:vars[p];if(bsfx!==esfx)if(esfx!=="")if(en||en===0)if(bn||bn===0){bn=_convertToPixels(target,p,bn,bsfx);if(esfx==="%"){bn/=_convertToPixels(target,p,100,"%")/100;if(bn>100)bn=100;if(vars.strictUnits!==true)bs=bn+"%"}else if(esfx==="em")bn/=_convertToPixels(target,p,1,"em");else{en=_convertToPixels(target,p,en,esfx);
esfx="px"}if(rel)if(en||en===0)es=en+bn+esfx}if(rel)en+=bn;if((bn||bn===0)&&(en||en===0)){pt=new CSSPropTween(style,p,bn,en-bn,pt,0,"css_"+p,_autoRound!==false&&(esfx==="px"||p==="zIndex"),0,bs,es);pt.xs0=esfx}else if(!es&&(es+""==="NaN"||es==null))_log("invalid "+p+" tween value: "+vars[p]);else{pt=new CSSPropTween(style,p,en||bn||0,0,pt,-1,"css_"+p,false,0,bs,es);pt.xs0=es==="none"&&(p==="display"||p.indexOf("Style")!==-1)?bs:es}}}if(plugin)if(pt&&!pt.plugin)pt.plugin=plugin}return pt};p.setRatio=
function(v){var pt=this._firstPT,min=1E-6,val,str,i;if(v===1&&(this._tween._time===this._tween._duration||this._tween._time===0))while(pt){if(pt.type!==2)pt.t[pt.p]=pt.e;else pt.setRatio(v);pt=pt._next}else if(v||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1E-6)while(pt){val=pt.c*v+pt.s;if(pt.r)val=val>0?val+0.5>>0:val-0.5>>0;else if(val<min)if(val>-min)val=0;if(!pt.type)pt.t[pt.p]=val+pt.xs0;else if(pt.type===1){i=pt.l;if(i===2)pt.t[pt.p]=pt.xs0+
val+pt.xs1+pt.xn1+pt.xs2;else if(i===3)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3;else if(i===4)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3+pt.xn3+pt.xs4;else if(i===5)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3+pt.xn3+pt.xs4+pt.xn4+pt.xs5;else{str=pt.xs0+val+pt.xs1;for(i=1;i<pt.l;i++)str+=pt["xn"+i]+pt["xs"+(i+1)];pt.t[pt.p]=str}}else if(pt.type===-1)pt.t[pt.p]=pt.xs0;else if(pt.setRatio)pt.setRatio(v);pt=pt._next}else while(pt){if(pt.type!==2)pt.t[pt.p]=pt.b;
else pt.setRatio(v);pt=pt._next}};p._enableTransforms=function(threeD){this._transformType=threeD||this._transformType===3?3:2};p._linkCSSP=function(pt,next,prev,remove){if(pt){if(next)next._prev=pt;if(pt._next)pt._next._prev=pt._prev;if(prev)prev._next=pt;else if(!remove&&this._firstPT===null)this._firstPT=pt;if(pt._prev)pt._prev._next=pt._next;else if(this._firstPT===pt)this._firstPT=pt._next;pt._next=next;pt._prev=prev}return pt};p._kill=function(lookup){var copy=lookup,pt,p,xfirst;if(lookup.css_autoAlpha||
lookup.css_alpha){copy={};for(p in lookup)copy[p]=lookup[p];copy.css_opacity=1;if(copy.css_autoAlpha)copy.css_visibility=1}if(lookup.css_className&&(pt=this._classNamePT)){xfirst=pt.xfirst;if(xfirst&&xfirst._prev)this._linkCSSP(xfirst._prev,pt._next,xfirst._prev._prev);else if(xfirst===this._firstPT)this._firstPT=pt._next;if(pt._next)this._linkCSSP(pt._next,pt._next._next,xfirst._prev);this._classNamePT=null}return TweenPlugin.prototype._kill.call(this,copy)};var _getChildStyles=function(e,props,
targets){var children,i,child,type;if(e.slice){i=e.length;while(--i>-1)_getChildStyles(e[i],props,targets);return}children=e.childNodes;i=children.length;while(--i>-1){child=children[i];type=child.type;if(child.style){props.push(_getAllStyles(child));if(targets)targets.push(child)}if((type===1||type===9||type===11)&&child.childNodes.length)_getChildStyles(child,props,targets)}};CSSPlugin.cascadeTo=function(target,duration,vars){var tween=TweenLite.to(target,duration,vars),results=[tween],b=[],e=[],
targets=[],_reservedProps=TweenLite._internals.reservedProps,i,difs,p;target=tween._targets||tween.target;_getChildStyles(target,b,targets);tween.render(duration,true);_getChildStyles(target,e);tween.render(0,true);tween._enabled(true);i=targets.length;while(--i>-1){difs=_cssDif(targets[i],b[i],e[i]);if(difs.firstMPT){difs=difs.difs;for(p in vars)if(_reservedProps[p])difs[p]=vars[p];results.push(TweenLite.to(targets[i],duration,difs))}}return results};TweenPlugin.activate([CSSPlugin]);return CSSPlugin},
true);(function(){var RoundPropsPlugin=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(target,value,tween){this._tween=tween;return true}}),p=RoundPropsPlugin.prototype;p._onInitAllProps=function(){var tween=this._tween,rp=tween.vars.roundProps instanceof Array?tween.vars.roundProps:tween.vars.roundProps.split(","),i=rp.length,lookup={},rpt=tween._propLookup.roundProps,prop,pt,next;while(--i>-1)lookup[rp[i]]=1;i=rp.length;while(--i>-1){prop=rp[i];pt=tween._firstPT;while(pt){next=
pt._next;if(pt.pg)pt.t._roundProps(lookup,true);else if(pt.n===prop){this._add(pt.t,prop,pt.s,pt.c);if(next)next._prev=pt._prev;if(pt._prev)pt._prev._next=next;else if(tween._firstPT===pt)tween._firstPT=next;pt._next=pt._prev=null;tween._propLookup[prop]=rpt}pt=next}}return false};p._add=function(target,p,s,c){this._addTween(target,p,s,s+c,p,true);this._overwriteProps.push(p)}})();window._gsDefine.plugin({propName:"attr",API:2,init:function(target,value,tween){var p;if(typeof target.setAttribute!==
"function")return false;this._target=target;this._proxy={};for(p in value){this._addTween(this._proxy,p,parseFloat(target.getAttribute(p)),value[p],p);this._overwriteProps.push(p)}return true},set:function(ratio){this._super.setRatio.call(this,ratio);var props=this._overwriteProps,i=props.length,p;while(--i>-1){p=props[i];this._target.setAttribute(p,this._proxy[p]+"")}}});window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(target,value,tween){if(typeof value!=="object")value=
{rotation:value};this.finals={};var cap=value.useRadians===true?Math.PI*2:360,p,v,start,end,dif,split,type;for(p in value)if(p!=="useRadians"){split=(value[p]+"").split("_");v=split[0];type=split[1];start=parseFloat(typeof target[p]!=="function"?target[p]:target[p.indexOf("set")||typeof target["get"+p.substr(3)]!=="function"?p:"get"+p.substr(3)]());end=this.finals[p]=typeof v==="string"&&v.charAt(1)==="="?start+parseInt(v.charAt(0)+"1",10)*Number(v.substr(2)):Number(v)||0;dif=end-start;if(type===
"short"){dif=dif%cap;if(dif!==dif%(cap/2))dif=dif<0?dif+cap:dif-cap}else if(type==="cw"&&dif<0)dif=(dif+cap*9999999999)%cap-(dif/cap|0)*cap;else if(type==="ccw"&&dif>0)dif=(dif-cap*9999999999)%cap-(dif/cap|0)*cap;this._addTween(target,p,start,start+dif,p);this._overwriteProps.push(p)}return true},set:function(ratio){var pt;if(ratio!==1)this._super.setRatio.call(this,ratio);else{pt=this._firstPT;while(pt){if(pt.f)pt.t[pt.p](this.finals[pt.p]);else pt.t[pt.p]=this.finals[pt.p];pt=pt._next}}}})._autoCSS=
true;window._gsDefine("easing.Back",["easing.Ease"],function(Ease){var w=window.GreenSockGlobals||window,gs=w.com.greensock,_2PI=Math.PI*2,_HALF_PI=Math.PI/2,_class=gs._class,_create=function(n,f){var C=_class("easing."+n,function(){},true),p=C.prototype=new Ease;p.constructor=C;p.getRatio=f;return C},_easeReg=Ease.register||function(){},_wrap=function(name,EaseOut,EaseIn,EaseInOut,aliases){var C=_class("easing."+name,{easeOut:new EaseOut,easeIn:new EaseIn,easeInOut:new EaseInOut},true);_easeReg(C,
name);return C},EasePoint=function(time,value,next){this.t=time;this.v=value;if(next){this.next=next;next.prev=this;this.c=next.v-value;this.gap=next.t-time}},_createBack=function(n,f){var C=_class("easing."+n,function(overshoot){this._p1=overshoot||overshoot===0?overshoot:1.70158;this._p2=this._p1*1.525},true),p=C.prototype=new Ease;p.constructor=C;p.getRatio=f;p.config=function(overshoot){return new C(overshoot)};return C},Back=_wrap("Back",_createBack("BackOut",function(p){return(p=p-1)*p*((this._p1+
1)*p+this._p1)+1}),_createBack("BackIn",function(p){return p*p*((this._p1+1)*p-this._p1)}),_createBack("BackInOut",function(p){return(p*=2)<1?0.5*p*p*((this._p2+1)*p-this._p2):0.5*((p-=2)*p*((this._p2+1)*p+this._p2)+2)})),SlowMo=_class("easing.SlowMo",function(linearRatio,power,yoyoMode){power=power||power===0?power:0.7;if(linearRatio==null)linearRatio=0.7;else if(linearRatio>1)linearRatio=1;this._p=linearRatio!==1?power:0;this._p1=(1-linearRatio)/2;this._p2=linearRatio;this._p3=this._p1+this._p2;
this._calcEnd=yoyoMode===true},true),p=SlowMo.prototype=new Ease,SteppedEase,RoughEase,_createElastic;p.constructor=SlowMo;p.getRatio=function(p){var r=p+(0.5-p)*this._p;if(p<this._p1)return this._calcEnd?1-(p=1-p/this._p1)*p:r-(p=1-p/this._p1)*p*p*p*r;else if(p>this._p3)return this._calcEnd?1-(p=(p-this._p3)/this._p1)*p:r+(p-r)*(p=(p-this._p3)/this._p1)*p*p*p;return this._calcEnd?1:r};SlowMo.ease=new SlowMo(0.7,0.7);p.config=SlowMo.config=function(linearRatio,power,yoyoMode){return new SlowMo(linearRatio,
power,yoyoMode)};SteppedEase=_class("easing.SteppedEase",function(steps){steps=steps||1;this._p1=1/steps;this._p2=steps+1},true);p=SteppedEase.prototype=new Ease;p.constructor=SteppedEase;p.getRatio=function(p){if(p<0)p=0;else if(p>=1)p=0.999999999;return(this._p2*p>>0)*this._p1};p.config=SteppedEase.config=function(steps){return new SteppedEase(steps)};RoughEase=_class("easing.RoughEase",function(vars){vars=vars||{};var taper=vars.taper||"none",a=[],cnt=0,points=(vars.points||20)|0,i=points,randomize=
vars.randomize!==false,clamp=vars.clamp===true,template=vars.template instanceof Ease?vars.template:null,strength=typeof vars.strength==="number"?vars.strength*0.4:0.4,x,y,bump,invX,obj,pnt;while(--i>-1){x=randomize?Math.random():1/points*i;y=template?template.getRatio(x):x;if(taper==="none")bump=strength;else if(taper==="out"){invX=1-x;bump=invX*invX*strength}else if(taper==="in")bump=x*x*strength;else if(x<0.5){invX=x*2;bump=invX*invX*0.5*strength}else{invX=(1-x)*2;bump=invX*invX*0.5*strength}if(randomize)y+=
Math.random()*bump-bump*0.5;else if(i%2)y+=bump*0.5;else y-=bump*0.5;if(clamp)if(y>1)y=1;else if(y<0)y=0;a[cnt++]={x:x,y:y}}a.sort(function(a,b){return a.x-b.x});pnt=new EasePoint(1,1,null);i=points;while(--i>-1){obj=a[i];pnt=new EasePoint(obj.x,obj.y,pnt)}this._prev=new EasePoint(0,0,pnt.t!==0?pnt:pnt.next)},true);p=RoughEase.prototype=new Ease;p.constructor=RoughEase;p.getRatio=function(p){var pnt=this._prev;if(p>pnt.t){while(pnt.next&&p>=pnt.t)pnt=pnt.next;pnt=pnt.prev}else while(pnt.prev&&p<=
pnt.t)pnt=pnt.prev;this._prev=pnt;return pnt.v+(p-pnt.t)/pnt.gap*pnt.c};p.config=function(vars){return new RoughEase(vars)};RoughEase.ease=new RoughEase;_wrap("Bounce",_create("BounceOut",function(p){if(p<1/2.75)return 7.5625*p*p;else if(p<2/2.75)return 7.5625*(p-=1.5/2.75)*p+0.75;else if(p<2.5/2.75)return 7.5625*(p-=2.25/2.75)*p+0.9375;return 7.5625*(p-=2.625/2.75)*p+0.984375}),_create("BounceIn",function(p){if((p=1-p)<1/2.75)return 1-7.5625*p*p;else if(p<2/2.75)return 1-(7.5625*(p-=1.5/2.75)*p+
0.75);else if(p<2.5/2.75)return 1-(7.5625*(p-=2.25/2.75)*p+0.9375);return 1-(7.5625*(p-=2.625/2.75)*p+0.984375)}),_create("BounceInOut",function(p){var invert=p<0.5;if(invert)p=1-p*2;else p=p*2-1;if(p<1/2.75)p=7.5625*p*p;else if(p<2/2.75)p=7.5625*(p-=1.5/2.75)*p+0.75;else if(p<2.5/2.75)p=7.5625*(p-=2.25/2.75)*p+0.9375;else p=7.5625*(p-=2.625/2.75)*p+0.984375;return invert?(1-p)*0.5:p*0.5+0.5}));_wrap("Circ",_create("CircOut",function(p){return Math.sqrt(1-(p=p-1)*p)}),_create("CircIn",function(p){return-(Math.sqrt(1-
p*p)-1)}),_create("CircInOut",function(p){return(p*=2)<1?-0.5*(Math.sqrt(1-p*p)-1):0.5*(Math.sqrt(1-(p-=2)*p)+1)}));_createElastic=function(n,f,def){var C=_class("easing."+n,function(amplitude,period){this._p1=amplitude||1;this._p2=period||def;this._p3=this._p2/_2PI*(Math.asin(1/this._p1)||0)},true),p=C.prototype=new Ease;p.constructor=C;p.getRatio=f;p.config=function(amplitude,period){return new C(amplitude,period)};return C};_wrap("Elastic",_createElastic("ElasticOut",function(p){return this._p1*
Math.pow(2,-10*p)*Math.sin((p-this._p3)*_2PI/this._p2)+1},0.3),_createElastic("ElasticIn",function(p){return-(this._p1*Math.pow(2,10*(p-=1))*Math.sin((p-this._p3)*_2PI/this._p2))},0.3),_createElastic("ElasticInOut",function(p){return(p*=2)<1?-0.5*this._p1*Math.pow(2,10*(p-=1))*Math.sin((p-this._p3)*_2PI/this._p2):this._p1*Math.pow(2,-10*(p-=1))*Math.sin((p-this._p3)*_2PI/this._p2)*0.5+1},0.45));_wrap("Expo",_create("ExpoOut",function(p){return 1-Math.pow(2,-10*p)}),_create("ExpoIn",function(p){return Math.pow(2,
10*(p-1))-0.001}),_create("ExpoInOut",function(p){return(p*=2)<1?0.5*Math.pow(2,10*(p-1)):0.5*(2-Math.pow(2,-10*(p-1)))}));_wrap("Sine",_create("SineOut",function(p){return Math.sin(p*_HALF_PI)}),_create("SineIn",function(p){return-Math.cos(p*_HALF_PI)+1}),_create("SineInOut",function(p){return-0.5*(Math.cos(Math.PI*p)-1)}));_class("easing.EaseLookup",{find:function(s){return Ease.map[s]}},true);_easeReg(w.SlowMo,"SlowMo","ease,");_easeReg(RoughEase,"RoughEase","ease,");_easeReg(SteppedEase,"SteppedEase",
"ease,");return Back},true)});
(function(window){var _globals=window.GreenSockGlobals||window,_namespace=function(ns){var a=ns.split("."),p=_globals,i;for(i=0;i<a.length;i++)p[a[i]]=p=p[a[i]]||{};return p},gs=_namespace("com.greensock"),_emptyFunc=function(){},a,i,p,_ticker,_tickerActive,_defLookup={},Definition=function(ns,dependencies,func,global){this.sc=_defLookup[ns]?_defLookup[ns].sc:[];_defLookup[ns]=this;this.gsClass=null;this.func=func;var _classes=[];this.check=function(init){var i=dependencies.length,missing=i,cur,a,
n,cl;while(--i>-1)if((cur=_defLookup[dependencies[i]]||new Definition(dependencies[i],[])).gsClass){_classes[i]=cur.gsClass;missing--}else if(init)cur.sc.push(this);if(missing===0&&func){a=("com.greensock."+ns).split(".");n=a.pop();cl=_namespace(a.join("."))[n]=this.gsClass=func.apply(func,_classes);if(global){_globals[n]=cl;if(typeof define==="function"&&define.amd)define((window.GreenSockAMDPath?window.GreenSockAMDPath+"/":"")+ns.split(".").join("/"),[],function(){return cl});else if(typeof module!==
"undefined"&&module.exports)module.exports=cl}for(i=0;i<this.sc.length;i++)this.sc[i].check()}};this.check(true)},_gsDefine=window._gsDefine=function(ns,dependencies,func,global){return new Definition(ns,dependencies,func,global)},_class=gs._class=function(ns,func,global){func=func||function(){};_gsDefine(ns,[],function(){return func},global);return func};_gsDefine.globals=_globals;var _baseParams=[0,0,1,1],_blankArray=[],Ease=_class("easing.Ease",function(func,extraParams,type,power){this._func=
func;this._type=type||0;this._power=power||0;this._params=extraParams?_baseParams.concat(extraParams):_baseParams},true),_easeMap=Ease.map={},_easeReg=Ease.register=function(ease,names,types,create){var na=names.split(","),i=na.length,ta=(types||"easeIn,easeOut,easeInOut").split(","),e,name,j,type;while(--i>-1){name=na[i];e=create?_class("easing."+name,null,true):gs.easing[name]||{};j=ta.length;while(--j>-1){type=ta[j];_easeMap[name+"."+type]=_easeMap[type+name]=e[type]=ease.getRatio?ease:ease[type]||
new ease}}};p=Ease.prototype;p._calcEnd=false;p.getRatio=function(p){if(this._func){this._params[0]=p;return this._func.apply(null,this._params)}var t=this._type,pw=this._power,r=t===1?1-p:t===2?p:p<0.5?p*2:(1-p)*2;if(pw===1)r*=r;else if(pw===2)r*=r*r;else if(pw===3)r*=r*r*r;else if(pw===4)r*=r*r*r*r;return t===1?1-r:t===2?r:p<0.5?r/2:1-r/2};a=["Linear","Quad","Cubic","Quart","Quint,Strong"];i=a.length;while(--i>-1){p=a[i]+",Power"+i;_easeReg(new Ease(null,null,1,i),p,"easeOut",true);_easeReg(new Ease(null,
null,2,i),p,"easeIn"+(i===0?",easeNone":""));_easeReg(new Ease(null,null,3,i),p,"easeInOut")}_easeMap.linear=gs.easing.Linear.easeIn;_easeMap.swing=gs.easing.Quad.easeInOut;var EventDispatcher=_class("events.EventDispatcher",function(target){this._listeners={};this._eventTarget=target||this});p=EventDispatcher.prototype;p.addEventListener=function(type,callback,scope,useParam,priority){priority=priority||0;var list=this._listeners[type],index=0,listener,i;if(list==null)this._listeners[type]=list=
[];i=list.length;while(--i>-1){listener=list[i];if(listener.c===callback&&listener.s===scope)list.splice(i,1);else if(index===0&&listener.pr<priority)index=i+1}list.splice(index,0,{c:callback,s:scope,up:useParam,pr:priority});if(this===_ticker&&!_tickerActive)_ticker.wake()};p.removeEventListener=function(type,callback){var list=this._listeners[type],i;if(list){i=list.length;while(--i>-1)if(list[i].c===callback){list.splice(i,1);return}}};p.dispatchEvent=function(type){var list=this._listeners[type],
i,t,listener;if(list){i=list.length;t=this._eventTarget;while(--i>-1){listener=list[i];if(listener.up)listener.c.call(listener.s||t,{type:type,target:t});else listener.c.call(listener.s||t)}}};var _reqAnimFrame=window.requestAnimationFrame,_cancelAnimFrame=window.cancelAnimationFrame,_getTime=Date.now||function(){return(new Date).getTime()};a=["ms","moz","webkit","o"];i=a.length;while(--i>-1&&!_reqAnimFrame){_reqAnimFrame=window[a[i]+"RequestAnimationFrame"];_cancelAnimFrame=window[a[i]+"CancelAnimationFrame"]||
window[a[i]+"CancelRequestAnimationFrame"]}_class("Ticker",function(fps,useRAF){var _self=this,_startTime=_getTime(),_useRAF=useRAF!==false&&_reqAnimFrame,_fps,_req,_id,_gap,_nextTime,_tick=function(manual){_self.time=(_getTime()-_startTime)/1E3;if(!_fps||_self.time>=_nextTime||manual===true){_self.frame++;_nextTime=_self.time+_gap;_self.dispatchEvent("tick")}if(manual!==true)_id=_req(_tick)};EventDispatcher.call(_self);this.time=this.frame=0;this.tick=function(){_tick(true)};this.sleep=function(){if(_id==
null)return;if(!_useRAF||!_cancelAnimFrame)clearTimeout(_id);else _cancelAnimFrame(_id);_req=_emptyFunc;_id=null;if(_self===_ticker)_tickerActive=false};this.wake=function(){if(_id)_self.sleep();_req=_fps===0?_emptyFunc:!_useRAF||!_reqAnimFrame?function(f){return setTimeout(f,_gap*1E3)}:_reqAnimFrame;if(_self===_ticker)_tickerActive=true;_tick()};this.fps=function(value){if(!arguments.length)return _fps;_fps=value;_gap=1/(_fps||60);_nextTime=this.time+_gap;_self.wake()};this.useRAF=function(value){if(!arguments.length)return _useRAF;
_useRAF=value;_self.fps(_fps)};_self.fps(fps);setTimeout(function(){if(_useRAF&&!_id)_self.useRAF(false)},1E3)});p=gs.Ticker.prototype=new gs.events.EventDispatcher;p.constructor=gs.Ticker;var Animation=_class("core.Animation",function(duration,vars){this.vars=vars||{};this._duration=this._totalDuration=duration||0;this._delay=Number(this.vars.delay)||0;this._timeScale=1;this._active=this.vars.immediateRender===true;this.data=this.vars.data;this._reversed=this.vars.reversed===true;if(!_rootTimeline)return;
if(!_tickerActive)_ticker.wake();var tl=this.vars.useFrames?_rootFramesTimeline:_rootTimeline;tl.add(this,tl._time);if(this.vars.paused)this.paused(true)});_ticker=Animation.ticker=new gs.Ticker;p=Animation.prototype;p._dirty=p._gc=p._initted=p._paused=false;p._totalTime=p._time=0;p._rawPrevTime=-1;p._next=p._last=p._onUpdate=p._timeline=p.timeline=null;p._paused=false;p.play=function(from,suppressEvents){if(arguments.length)this.seek(from,suppressEvents);this.reversed(false);return this.paused(false)};
p.pause=function(atTime,suppressEvents){if(arguments.length)this.seek(atTime,suppressEvents);return this.paused(true)};p.resume=function(from,suppressEvents){if(arguments.length)this.seek(from,suppressEvents);return this.paused(false)};p.seek=function(time,suppressEvents){return this.totalTime(Number(time),suppressEvents!==false)};p.restart=function(includeDelay,suppressEvents){this.reversed(false);this.paused(false);return this.totalTime(includeDelay?-this._delay:0,suppressEvents!==false)};p.reverse=
function(from,suppressEvents){if(arguments.length)this.seek(from||this.totalDuration(),suppressEvents);this.reversed(true);return this.paused(false)};p.render=function(){};p.invalidate=function(){return this};p._enabled=function(enabled,ignoreTimeline){if(!_tickerActive)_ticker.wake();this._gc=!enabled;this._active=enabled&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration;if(ignoreTimeline!==true)if(enabled&&!this.timeline)this._timeline.add(this,this._startTime-this._delay);
else if(!enabled&&this.timeline)this._timeline._remove(this,true);return false};p._kill=function(vars,target){return this._enabled(false,false)};p.kill=function(vars,target){this._kill(vars,target);return this};p._uncache=function(includeSelf){var tween=includeSelf?this:this.timeline;while(tween){tween._dirty=true;tween=tween.timeline}return this};p.eventCallback=function(type,callback,params,scope){if(type==null)return null;else if(type.substr(0,2)==="on"){var v=this.vars,i;if(arguments.length===
1)return v[type];if(callback==null)delete v[type];else{v[type]=callback;v[type+"Params"]=params;v[type+"Scope"]=scope;if(params){i=params.length;while(--i>-1)if(params[i]==="{self}"){params=v[type+"Params"]=params.concat();params[i]=this}}}if(type==="onUpdate")this._onUpdate=callback}return this};p.delay=function(value){if(!arguments.length)return this._delay;if(this._timeline.smoothChildTiming)this.startTime(this._startTime+value-this._delay);this._delay=value;return this};p.duration=function(value){if(!arguments.length){this._dirty=
false;return this._duration}this._duration=this._totalDuration=value;this._uncache(true);if(this._timeline.smoothChildTiming)if(this._time>0)if(this._time<this._duration)if(value!==0)this.totalTime(this._totalTime*(value/this._duration),true);return this};p.totalDuration=function(value){this._dirty=false;return!arguments.length?this._totalDuration:this.duration(value)};p.time=function(value,suppressEvents){if(!arguments.length)return this._time;if(this._dirty)this.totalDuration();if(value>this._duration)value=
this._duration;return this.totalTime(value,suppressEvents)};p.totalTime=function(time,suppressEvents){if(!_tickerActive)_ticker.wake();if(!arguments.length)return this._totalTime;if(this._timeline){if(time<0)time+=this.totalDuration();if(this._timeline.smoothChildTiming){if(this._dirty)this.totalDuration();var totalDuration=this._totalDuration,tl=this._timeline;if(time>totalDuration)time=totalDuration;this._startTime=(this._paused?this._pauseTime:tl._time)-(!this._reversed?time:totalDuration-time)/
this._timeScale;if(!tl._dirty)this._uncache(false);if(!tl._active)while(tl._timeline){tl.totalTime(tl._totalTime,true);tl=tl._timeline}}if(this._gc)this._enabled(true,false);if(this._totalTime!==time)this.render(time,suppressEvents,false)}return this};p.startTime=function(value){if(!arguments.length)return this._startTime;if(value!==this._startTime){this._startTime=value;if(this.timeline)if(this.timeline._sortChildren)this.timeline.add(this,value-this._delay)}return this};p.timeScale=function(value){if(!arguments.length)return this._timeScale;
value=value||1E-6;if(this._timeline&&this._timeline.smoothChildTiming){var pauseTime=this._pauseTime,t=pauseTime||pauseTime===0?pauseTime:this._timeline.totalTime();this._startTime=t-(t-this._startTime)*this._timeScale/value}this._timeScale=value;return this._uncache(false)};p.reversed=function(value){if(!arguments.length)return this._reversed;if(value!=this._reversed){this._reversed=value;this.totalTime(this._totalTime,true)}return this};p.paused=function(value){if(!arguments.length)return this._paused;
if(value!=this._paused)if(this._timeline){if(!_tickerActive&&!value)_ticker.wake();var raw=this._timeline.rawTime(),elapsed=raw-this._pauseTime;if(!value&&this._timeline.smoothChildTiming){this._startTime+=elapsed;this._uncache(false)}this._pauseTime=value?raw:null;this._paused=value;this._active=!value&&this._totalTime>0&&this._totalTime<this._totalDuration;if(!value&&elapsed!==0&&this._duration!==0)this.render(this._time,true,true)}if(this._gc&&!value)this._enabled(true,false);return this};var SimpleTimeline=
_class("core.SimpleTimeline",function(vars){Animation.call(this,0,vars);this.autoRemoveChildren=this.smoothChildTiming=true});p=SimpleTimeline.prototype=new Animation;p.constructor=SimpleTimeline;p.kill()._gc=false;p._first=p._last=null;p._sortChildren=false;p.add=function(child,position,align,stagger){var prevTween,st;child._startTime=Number(position||0)+child._delay;if(child._paused)if(this!==child._timeline)child._pauseTime=child._startTime+(this.rawTime()-child._startTime)/child._timeScale;if(child.timeline)child.timeline._remove(child,
true);child.timeline=child._timeline=this;if(child._gc)child._enabled(true,true);prevTween=this._last;if(this._sortChildren){st=child._startTime;while(prevTween&&prevTween._startTime>st)prevTween=prevTween._prev}if(prevTween){child._next=prevTween._next;prevTween._next=child}else{child._next=this._first;this._first=child}if(child._next)child._next._prev=child;else this._last=child;child._prev=prevTween;if(this._timeline)this._uncache(true);return this};p.insert=p.add;p._remove=function(tween,skipDisable){if(tween.timeline===
this){if(!skipDisable)tween._enabled(false,true);tween.timeline=null;if(tween._prev)tween._prev._next=tween._next;else if(this._first===tween)this._first=tween._next;if(tween._next)tween._next._prev=tween._prev;else if(this._last===tween)this._last=tween._prev;if(this._timeline)this._uncache(true)}return this};p.render=function(time,suppressEvents,force){var tween=this._first,next;this._totalTime=this._time=this._rawPrevTime=time;while(tween){next=tween._next;if(tween._active||time>=tween._startTime&&
!tween._paused)if(!tween._reversed)tween.render((time-tween._startTime)*tween._timeScale,suppressEvents,force);else tween.render((!tween._dirty?tween._totalDuration:tween.totalDuration())-(time-tween._startTime)*tween._timeScale,suppressEvents,force);tween=next}};p.rawTime=function(){if(!_tickerActive)_ticker.wake();return this._totalTime};var TweenLite=_class("TweenLite",function(target,duration,vars){Animation.call(this,duration,vars);if(target==null)throw"Cannot tween a null target.";this.target=
target=typeof target!=="string"?target:TweenLite.selector(target)||target;var isSelector=target.jquery||typeof target.each==="function"&&target[0]&&target[0].nodeType&&target[0].style,overwrite=this.vars.overwrite,i,targ,targets;this._overwrite=overwrite=overwrite==null?_overwriteLookup[TweenLite.defaultOverwrite]:typeof overwrite==="number"?overwrite>>0:_overwriteLookup[overwrite];if((isSelector||target instanceof Array)&&typeof target[0]!=="number"){this._targets=targets=isSelector&&!target.slice?
_selectorToArray(target):target.slice(0);this._propLookup=[];this._siblings=[];for(i=0;i<targets.length;i++){targ=targets[i];if(!targ){targets.splice(i--,1);continue}else if(typeof targ==="string"){targ=targets[i--]=TweenLite.selector(targ);if(typeof targ==="string")targets.splice(i+1,1);continue}else if(typeof targ.each==="function"&&targ[0]&&targ[0].nodeType&&targ[0].style){targets.splice(i--,1);this._targets=targets=targets.concat(_selectorToArray(targ));continue}this._siblings[i]=_register(targ,
this,false);if(overwrite===1)if(this._siblings[i].length>1)_applyOverwrite(targ,this,null,1,this._siblings[i])}}else{this._propLookup={};this._siblings=_register(target,this,false);if(overwrite===1)if(this._siblings.length>1)_applyOverwrite(target,this,null,1,this._siblings)}if(this.vars.immediateRender||duration===0&&this._delay===0&&this.vars.immediateRender!==false)this.render(-this._delay,false,true)},true),_isSelector=function(v){return typeof v.each==="function"&&v[0]&&v[0].nodeType&&v[0].style},
_selectorToArray=function(v){var a=[];v.each(function(){a.push(this)});return a},_autoCSS=function(vars,target){var css={},p;for(p in vars)if(!_reservedProps[p]&&(!(p in target)||p==="x"||p==="y"||p==="width"||p==="height"||p==="className")&&(!_plugins[p]||_plugins[p]&&_plugins[p]._autoCSS)){css[p]=vars[p];delete vars[p]}vars.css=css};p=TweenLite.prototype=new Animation;p.constructor=TweenLite;p.kill()._gc=false;p.ratio=0;p._firstPT=p._targets=p._overwrittenProps=p._startAt=null;p._notifyPluginsOfEnabled=
false;TweenLite.version="1.9.3";TweenLite.defaultEase=p._ease=new Ease(null,null,1,1);TweenLite.defaultOverwrite="auto";TweenLite.ticker=_ticker;TweenLite.autoSleep=true;TweenLite.selector=window.$||window.jQuery||function(e){if(window.$){TweenLite.selector=window.$;return window.$(e)}return window.document?window.document.getElementById(e.charAt(0)==="#"?e.substr(1):e):e};var _internals=TweenLite._internals={},_plugins=TweenLite._plugins={},_tweenLookup=TweenLite._tweenLookup={},_tweenLookupNum=
0,_reservedProps=_internals.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},_overwriteLookup={none:0,all:1,auto:2,concurrent:3,
allOnStart:4,preexisting:5,"true":1,"false":0},_rootFramesTimeline=Animation._rootFramesTimeline=new SimpleTimeline,_rootTimeline=Animation._rootTimeline=new SimpleTimeline;_rootTimeline._startTime=_ticker.time;_rootFramesTimeline._startTime=_ticker.frame;_rootTimeline._active=_rootFramesTimeline._active=true;Animation._updateRoot=function(){_rootTimeline.render((_ticker.time-_rootTimeline._startTime)*_rootTimeline._timeScale,false,false);_rootFramesTimeline.render((_ticker.frame-_rootFramesTimeline._startTime)*
_rootFramesTimeline._timeScale,false,false);if(!(_ticker.frame%120)){var i,a,p;for(p in _tweenLookup){a=_tweenLookup[p].tweens;i=a.length;while(--i>-1)if(a[i]._gc)a.splice(i,1);if(a.length===0)delete _tweenLookup[p]}p=_rootTimeline._first;if(!p||p._paused)if(TweenLite.autoSleep&&!_rootFramesTimeline._first&&_ticker._listeners.tick.length===1){while(p&&p._paused)p=p._next;if(!p)_ticker.sleep()}}};_ticker.addEventListener("tick",Animation._updateRoot);var _register=function(target,tween,scrub){var id=
target._gsTweenID,a,i;if(!_tweenLookup[id||(target._gsTweenID=id="t"+_tweenLookupNum++)])_tweenLookup[id]={target:target,tweens:[]};if(tween){a=_tweenLookup[id].tweens;a[i=a.length]=tween;if(scrub)while(--i>-1)if(a[i]===tween)a.splice(i,1)}return _tweenLookup[id].tweens},_applyOverwrite=function(target,tween,props,mode,siblings){var i,changed,curTween,l;if(mode===1||mode>=4){l=siblings.length;for(i=0;i<l;i++)if((curTween=siblings[i])!==tween){if(!curTween._gc)if(curTween._enabled(false,false))changed=
true}else if(mode===5)break;return changed}var startTime=tween._startTime+1E-10,overlaps=[],oCount=0,zeroDur=tween._duration===0,globalStart;i=siblings.length;while(--i>-1)if((curTween=siblings[i])===tween||curTween._gc||curTween._paused);else if(curTween._timeline!==tween._timeline){globalStart=globalStart||_checkOverlap(tween,0,zeroDur);if(_checkOverlap(curTween,globalStart,zeroDur)===0)overlaps[oCount++]=curTween}else if(curTween._startTime<=startTime)if(curTween._startTime+curTween.totalDuration()/
curTween._timeScale+1E-10>startTime)if(!((zeroDur||!curTween._initted)&&startTime-curTween._startTime<=2E-10))overlaps[oCount++]=curTween;i=oCount;while(--i>-1){curTween=overlaps[i];if(mode===2)if(curTween._kill(props,target))changed=true;if(mode!==2||!curTween._firstPT&&curTween._initted)if(curTween._enabled(false,false))changed=true}return changed},_checkOverlap=function(tween,reference,zeroDur){var tl=tween._timeline,ts=tl._timeScale,t=tween._startTime;while(tl._timeline){t+=tl._startTime;ts*=
tl._timeScale;if(tl._paused)return-100;tl=tl._timeline}t/=ts;return t>reference?t-reference:zeroDur&&t===reference||!tween._initted&&t-reference<2E-10?1E-10:(t=t+tween.totalDuration()/tween._timeScale/ts)>reference?0:t-reference-1E-10};p._init=function(){var v=this.vars,op=this._overwrittenProps,dur=this._duration,ease=v.ease,i,initPlugins,pt,p;if(v.startAt){v.startAt.overwrite=0;v.startAt.immediateRender=true;this._startAt=TweenLite.to(this.target,0,v.startAt);if(v.immediateRender){this._startAt=
null;if(this._time===0&&dur!==0)return}}else if(v.runBackwards&&v.immediateRender&&dur!==0)if(this._startAt){this._startAt.render(-1,true);this._startAt=null}else if(this._time===0){pt={};for(p in v)if(!_reservedProps[p]||p==="autoCSS")pt[p]=v[p];pt.overwrite=0;this._startAt=TweenLite.to(this.target,0,pt);return}if(!ease)this._ease=TweenLite.defaultEase;else if(ease instanceof Ease)this._ease=v.easeParams instanceof Array?ease.config.apply(ease,v.easeParams):ease;else this._ease=typeof ease==="function"?
new Ease(ease,v.easeParams):_easeMap[ease]||TweenLite.defaultEase;this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){i=this._targets.length;while(--i>-1)if(this._initProps(this._targets[i],this._propLookup[i]={},this._siblings[i],op?op[i]:null))initPlugins=true}else initPlugins=this._initProps(this.target,this._propLookup,this._siblings,op);if(initPlugins)TweenLite._onPluginEvent("_onInitAllProps",this);if(op)if(!this._firstPT)if(typeof this.target!==
"function")this._enabled(false,false);if(v.runBackwards){pt=this._firstPT;while(pt){pt.s+=pt.c;pt.c=-pt.c;pt=pt._next}}this._onUpdate=v.onUpdate;this._initted=true};p._initProps=function(target,propLookup,siblings,overwrittenProps){var p,i,initPlugins,plugin,a,pt,v;if(target==null)return false;if(!this.vars.css)if(target.style)if(target.nodeType)if(_plugins.css)if(this.vars.autoCSS!==false)_autoCSS(this.vars,target);for(p in this.vars){if(_reservedProps[p]){if(p==="onStartParams"||p==="onUpdateParams"||
p==="onCompleteParams"||p==="onReverseCompleteParams"||p==="onRepeatParams")if(a=this.vars[p]){i=a.length;while(--i>-1)if(a[i]==="{self}"){a=this.vars[p]=a.concat();a[i]=this}}}else if(_plugins[p]&&(plugin=new _plugins[p])._onInitTween(target,this.vars[p],this)){this._firstPT=pt={_next:this._firstPT,t:plugin,p:"setRatio",s:0,c:1,f:true,n:p,pg:true,pr:plugin._priority};i=plugin._overwriteProps.length;while(--i>-1)propLookup[plugin._overwriteProps[i]]=this._firstPT;if(plugin._priority||plugin._onInitAllProps)initPlugins=
true;if(plugin._onDisable||plugin._onEnable)this._notifyPluginsOfEnabled=true}else{this._firstPT=propLookup[p]=pt={_next:this._firstPT,t:target,p:p,f:typeof target[p]==="function",n:p,pg:false,pr:0};pt.s=!pt.f?parseFloat(target[p]):target[p.indexOf("set")||typeof target["get"+p.substr(3)]!=="function"?p:"get"+p.substr(3)]();v=this.vars[p];pt.c=typeof v==="string"&&v.charAt(1)==="="?parseInt(v.charAt(0)+"1",10)*Number(v.substr(2)):Number(v)-pt.s||0}if(pt)if(pt._next)pt._next._prev=pt}if(overwrittenProps)if(this._kill(overwrittenProps,
target))return this._initProps(target,propLookup,siblings,overwrittenProps);if(this._overwrite>1)if(this._firstPT)if(siblings.length>1)if(_applyOverwrite(target,this,propLookup,this._overwrite,siblings)){this._kill(propLookup,target);return this._initProps(target,propLookup,siblings,overwrittenProps)}return initPlugins};p.render=function(time,suppressEvents,force){var prevTime=this._time,isComplete,callback,pt;if(time>=this._duration){this._totalTime=this._time=this._duration;this.ratio=this._ease._calcEnd?
this._ease.getRatio(1):1;if(!this._reversed){isComplete=true;callback="onComplete"}if(this._duration===0){if(time===0||this._rawPrevTime<0)if(this._rawPrevTime!==time)force=true;this._rawPrevTime=time}}else if(time<1E-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(prevTime!==0||this._duration===0&&this._rawPrevTime>0){callback="onReverseComplete";isComplete=this._reversed}if(time<0){this._active=false;if(this._duration===0){if(this._rawPrevTime>=0)force=
true;this._rawPrevTime=time}}else if(!this._initted)force=true}else{this._totalTime=this._time=time;if(this._easeType){var r=time/this._duration,type=this._easeType,pow=this._easePower;if(type===1||type===3&&r>=0.5)r=1-r;if(type===3)r*=2;if(pow===1)r*=r;else if(pow===2)r*=r*r;else if(pow===3)r*=r*r*r;else if(pow===4)r*=r*r*r*r;if(type===1)this.ratio=1-r;else if(type===2)this.ratio=r;else if(time/this._duration<0.5)this.ratio=r/2;else this.ratio=1-r/2}else this.ratio=this._ease.getRatio(time/this._duration)}if(this._time===
prevTime&&!force)return;else if(!this._initted){this._init();if(!this._initted)return;if(this._time&&!isComplete)this.ratio=this._ease.getRatio(this._time/this._duration);else if(isComplete&&this._ease._calcEnd)this.ratio=this._ease.getRatio(this._time===0?0:1)}if(!this._active)if(!this._paused)this._active=true;if(prevTime===0){if(this._startAt)if(time>=0)this._startAt.render(time,suppressEvents,force);else if(!callback)callback="_dummyGS";if(this.vars.onStart)if(this._time!==0||this._duration===
0)if(!suppressEvents)this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||_blankArray)}pt=this._firstPT;while(pt){if(pt.f)pt.t[pt.p](pt.c*this.ratio+pt.s);else pt.t[pt.p]=pt.c*this.ratio+pt.s;pt=pt._next}if(this._onUpdate){if(time<0)if(this._startAt)this._startAt.render(time,suppressEvents,force);if(!suppressEvents)this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||_blankArray)}if(callback)if(!this._gc){if(time<0&&this._startAt&&!this._onUpdate)this._startAt.render(time,
suppressEvents,force);if(isComplete){if(this._timeline.autoRemoveChildren)this._enabled(false,false);this._active=false}if(!suppressEvents&&this.vars[callback])this.vars[callback].apply(this.vars[callback+"Scope"]||this,this.vars[callback+"Params"]||_blankArray)}};p._kill=function(vars,target){if(vars==="all")vars=null;if(vars==null)if(target==null||target===this.target)return this._enabled(false,false);target=typeof target!=="string"?target||this._targets||this.target:TweenLite.selector(target)||
target;var i,overwrittenProps,p,pt,propLookup,changed,killProps,record;if((target instanceof Array||_isSelector(target))&&typeof target[0]!=="number"){i=target.length;while(--i>-1)if(this._kill(vars,target[i]))changed=true}else{if(this._targets){i=this._targets.length;while(--i>-1)if(target===this._targets[i]){propLookup=this._propLookup[i]||{};this._overwrittenProps=this._overwrittenProps||[];overwrittenProps=this._overwrittenProps[i]=vars?this._overwrittenProps[i]||{}:"all";break}}else if(target!==
this.target)return false;else{propLookup=this._propLookup;overwrittenProps=this._overwrittenProps=vars?this._overwrittenProps||{}:"all"}if(propLookup){killProps=vars||propLookup;record=vars!==overwrittenProps&&overwrittenProps!=="all"&&vars!==propLookup&&(vars==null||vars._tempKill!==true);for(p in killProps){if(pt=propLookup[p]){if(pt.pg&&pt.t._kill(killProps))changed=true;if(!pt.pg||pt.t._overwriteProps.length===0){if(pt._prev)pt._prev._next=pt._next;else if(pt===this._firstPT)this._firstPT=pt._next;
if(pt._next)pt._next._prev=pt._prev;pt._next=pt._prev=null}delete propLookup[p]}if(record)overwrittenProps[p]=1}if(!this._firstPT)this._enabled(false,false)}}return changed};p.invalidate=function(){if(this._notifyPluginsOfEnabled)TweenLite._onPluginEvent("_onDisable",this);this._firstPT=null;this._overwrittenProps=null;this._onUpdate=null;this._startAt=null;this._initted=this._active=this._notifyPluginsOfEnabled=false;this._propLookup=this._targets?{}:[];return this};p._enabled=function(enabled,ignoreTimeline){if(!_tickerActive)_ticker.wake();
if(enabled&&this._gc){var targets=this._targets,i;if(targets){i=targets.length;while(--i>-1)this._siblings[i]=_register(targets[i],this,true)}else this._siblings=_register(this.target,this,true)}Animation.prototype._enabled.call(this,enabled,ignoreTimeline);if(this._notifyPluginsOfEnabled)if(this._firstPT)return TweenLite._onPluginEvent(enabled?"_onEnable":"_onDisable",this);return false};TweenLite.to=function(target,duration,vars){return new TweenLite(target,duration,vars)};TweenLite.from=function(target,
duration,vars){vars.runBackwards=true;vars.immediateRender=vars.immediateRender!=false;return new TweenLite(target,duration,vars)};TweenLite.fromTo=function(target,duration,fromVars,toVars){toVars.startAt=fromVars;toVars.immediateRender=toVars.immediateRender!=false&&fromVars.immediateRender!=false;return new TweenLite(target,duration,toVars)};TweenLite.delayedCall=function(delay,callback,params,scope,useFrames){return new TweenLite(callback,0,{delay:delay,onComplete:callback,onCompleteParams:params,
onCompleteScope:scope,onReverseComplete:callback,onReverseCompleteParams:params,onReverseCompleteScope:scope,immediateRender:false,useFrames:useFrames,overwrite:0})};TweenLite.set=function(target,vars){return new TweenLite(target,0,vars)};TweenLite.killTweensOf=TweenLite.killDelayedCallsTo=function(target,vars){var a=TweenLite.getTweensOf(target),i=a.length;while(--i>-1)a[i]._kill(vars,target)};TweenLite.getTweensOf=function(target){if(target==null)return[];target=typeof target!=="string"?target:
TweenLite.selector(target)||target;var i,a,j,t;if((target instanceof Array||_isSelector(target))&&typeof target[0]!=="number"){i=target.length;a=[];while(--i>-1)a=a.concat(TweenLite.getTweensOf(target[i]));i=a.length;while(--i>-1){t=a[i];j=i;while(--j>-1)if(t===a[j])a.splice(i,1)}}else{a=_register(target).concat();i=a.length;while(--i>-1)if(a[i]._gc)a.splice(i,1)}return a};var TweenPlugin=_class("plugins.TweenPlugin",function(props,priority){this._overwriteProps=(props||"").split(",");this._propName=
this._overwriteProps[0];this._priority=priority||0;this._super=TweenPlugin.prototype},true);p=TweenPlugin.prototype;TweenPlugin.version="1.9.1";TweenPlugin.API=2;p._firstPT=null;p._addTween=function(target,prop,start,end,overwriteProp,round){var c,pt;if(end!=null&&(c=typeof end==="number"||end.charAt(1)!=="="?Number(end)-start:parseInt(end.charAt(0)+"1",10)*Number(end.substr(2)))){this._firstPT=pt={_next:this._firstPT,t:target,p:prop,s:start,c:c,f:typeof target[prop]==="function",n:overwriteProp||
prop,r:round};if(pt._next)pt._next._prev=pt}};p.setRatio=function(v){var pt=this._firstPT,min=1E-6,val;while(pt){val=pt.c*v+pt.s;if(pt.r)val=val+(val>0?0.5:-0.5)>>0;else if(val<min)if(val>-min)val=0;if(pt.f)pt.t[pt.p](val);else pt.t[pt.p]=val;pt=pt._next}};p._kill=function(lookup){var a=this._overwriteProps,pt=this._firstPT,i;if(lookup[this._propName]!=null)this._overwriteProps=[];else{i=a.length;while(--i>-1)if(lookup[a[i]]!=null)a.splice(i,1)}while(pt){if(lookup[pt.n]!=null){if(pt._next)pt._next._prev=
pt._prev;if(pt._prev){pt._prev._next=pt._next;pt._prev=null}else if(this._firstPT===pt)this._firstPT=pt._next}pt=pt._next}return false};p._roundProps=function(lookup,value){var pt=this._firstPT;while(pt){if(lookup[this._propName]||pt.n!=null&&lookup[pt.n.split(this._propName+"_").join("")])pt.r=value;pt=pt._next}};TweenLite._onPluginEvent=function(type,tween){var pt=tween._firstPT,changed,pt2,first,last,next;if(type==="_onInitAllProps"){while(pt){next=pt._next;pt2=first;while(pt2&&pt2.pr>pt.pr)pt2=
pt2._next;if(pt._prev=pt2?pt2._prev:last)pt._prev._next=pt;else first=pt;if(pt._next=pt2)pt2._prev=pt;else last=pt;pt=next}pt=tween._firstPT=first}while(pt){if(pt.pg)if(typeof pt.t[type]==="function")if(pt.t[type]())changed=true;pt=pt._next}return changed};TweenPlugin.activate=function(plugins){var i=plugins.length;while(--i>-1)if(plugins[i].API===TweenPlugin.API)_plugins[(new plugins[i])._propName]=plugins[i];return true};_gsDefine.plugin=function(config){if(!config||!config.propName||!config.init||
!config.API)throw"illegal plugin definition.";var propName=config.propName,priority=config.priority||0,overwriteProps=config.overwriteProps,map={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},Plugin=_class("plugins."+propName.charAt(0).toUpperCase()+propName.substr(1)+"Plugin",function(){TweenPlugin.call(this,propName,priority);this._overwriteProps=overwriteProps||[]},config.global===true),p=Plugin.prototype=new TweenPlugin(propName),prop;p.constructor=
Plugin;Plugin.API=config.API;for(prop in map)if(typeof config[prop]==="function")p[map[prop]]=config[prop];Plugin.version=config.version;TweenPlugin.activate([Plugin]);return Plugin};a=window._gsQueue;if(a){for(i=0;i<a.length;i++)a[i]();for(p in _defLookup)if(!_defLookup[p].func);}_tickerActive=false})(window);
(window._gsQueue||(window._gsQueue=[])).push(function(){window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(TweenPlugin,TweenLite){var CSSPlugin=function(){TweenPlugin.call(this,"css");this._overwriteProps.length=0},_hasPriority,_suffixMap,_cs,_overwriteProps,_specialProps={},p=CSSPlugin.prototype=new TweenPlugin("css");p.constructor=CSSPlugin;CSSPlugin.version="1.9.3";CSSPlugin.API=2;CSSPlugin.defaultTransformPerspective=0;p="px";CSSPlugin.suffixMap={top:p,right:p,bottom:p,
left:p,width:p,height:p,fontSize:p,padding:p,margin:p,perspective:p};var _numExp=/(?:\d|\-\d|\.\d|\-\.\d)+/g,_relNumExp=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,_valuesExp=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_NaNExp=/[^\d\-\.]/g,_suffixExp=/(?:\d|\-|\+|=|#|\.)*/g,_opacityExp=/opacity *= *([^)]*)/,_opacityValExp=/opacity:([^;]*)/,_alphaFilterExp=/alpha\(opacity *=.+?\)/i,_rgbhslExp=/^(rgb|hsl)/,_capsExp=/([A-Z])/g,_camelExp=/-([a-z])/gi,_urlExp=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
_camelFunc=function(s,g){return g.toUpperCase()},_horizExp=/(?:Left|Right|Width)/i,_ieGetMatrixExp=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,_ieSetMatrixExp=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,_commasOutsideParenExp=/,(?=[^\)]*(?:\(|$))/gi,_DEG2RAD=Math.PI/180,_RAD2DEG=180/Math.PI,_forcePT={},_doc=document,_tempDiv=_doc.createElement("div"),_tempImg=_doc.createElement("img"),_internals=CSSPlugin._internals={_specialProps:_specialProps},_agent=navigator.userAgent,_autoRound,_reqSafariFix,
_isSafari,_isFirefox,_isSafariLT6,_ieVers,_supportsOpacity=function(){var i=_agent.indexOf("Android"),d=_doc.createElement("div"),a;_isSafari=_agent.indexOf("Safari")!==-1&&_agent.indexOf("Chrome")===-1&&(i===-1||Number(_agent.substr(i+8,1))>3);_isSafariLT6=_isSafari&&Number(_agent.substr(_agent.indexOf("Version/")+8,1))<6;_isFirefox=_agent.indexOf("Firefox")!==-1;/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(_agent);_ieVers=parseFloat(RegExp.$1);d.innerHTML="<a style='top:1px;opacity:.55;'>a</a>";a=d.getElementsByTagName("a")[0];
return a?/^0.55/.test(a.style.opacity):false}(),_getIEOpacity=function(v){return _opacityExp.test(typeof v==="string"?v:(v.currentStyle?v.currentStyle.filter:v.style.filter)||"")?parseFloat(RegExp.$1)/100:1},_log=function(s){if(window.console);},_prefixCSS="",_prefix="",_checkPropPrefix=function(p,e){e=e||_tempDiv;var s=e.style,a,i;if(s[p]!==undefined)return p;p=p.charAt(0).toUpperCase()+p.substr(1);a=["O","Moz","ms","Ms","Webkit"];i=5;while(--i>-1&&s[a[i]+p]===undefined);if(i>=0){_prefix=i===3?"ms":
a[i];_prefixCSS="-"+_prefix.toLowerCase()+"-";return _prefix+p}return null},_getComputedStyle=_doc.defaultView?_doc.defaultView.getComputedStyle:function(){},_getStyle=CSSPlugin.getStyle=function(t,p,cs,calc,dflt){var rv;if(!_supportsOpacity)if(p==="opacity")return _getIEOpacity(t);if(!calc&&t.style[p])rv=t.style[p];else if(cs=cs||_getComputedStyle(t,null)){t=cs.getPropertyValue(p.replace(_capsExp,"-$1").toLowerCase());rv=t||cs.length?t:cs[p]}else if(t.currentStyle){cs=t.currentStyle;rv=cs[p]}return dflt!=
null&&(!rv||rv==="none"||rv==="auto"||rv==="auto auto")?dflt:rv},_convertToPixels=function(t,p,v,sfx,recurse){if(sfx==="px"||!sfx)return v;if(sfx==="auto"||!v)return 0;var horiz=_horizExp.test(p),node=t,style=_tempDiv.style,neg=v<0,pix;if(neg)v=-v;if(sfx==="%"&&p.indexOf("border")!==-1)pix=v/100*(horiz?t.clientWidth:t.clientHeight);else{style.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;";if(sfx==="%"||!node.appendChild){node=t.parentNode||_doc.body;style[horiz?"width":
"height"]=v+sfx}else style[horiz?"borderLeftWidth":"borderTopWidth"]=v+sfx;node.appendChild(_tempDiv);pix=parseFloat(_tempDiv[horiz?"offsetWidth":"offsetHeight"]);node.removeChild(_tempDiv);if(pix===0&&!recurse)pix=_convertToPixels(t,p,v,sfx,true)}return neg?-pix:pix},_calculateOffset=function(t,p,cs){if(_getStyle(t,"position",cs)!=="absolute")return 0;var dim=p==="left"?"Left":"Top",v=_getStyle(t,"margin"+dim,cs);return t["offset"+dim]-(_convertToPixels(t,p,parseFloat(v),v.replace(_suffixExp,""))||
0)},_getAllStyles=function(t,cs){var s={},i,tr;if(cs=cs||_getComputedStyle(t,null))if(i=cs.length)while(--i>-1)s[cs[i].replace(_camelExp,_camelFunc)]=cs.getPropertyValue(cs[i]);else for(i in cs)s[i]=cs[i];else if(cs=t.currentStyle||t.style)for(i in cs)s[i.replace(_camelExp,_camelFunc)]=cs[i];if(!_supportsOpacity)s.opacity=_getIEOpacity(t);tr=_getTransform(t,cs,false);s.rotation=tr.rotation*_RAD2DEG;s.skewX=tr.skewX*_RAD2DEG;s.scaleX=tr.scaleX;s.scaleY=tr.scaleY;s.x=tr.x;s.y=tr.y;if(_supports3D){s.z=
tr.z;s.rotationX=tr.rotationX*_RAD2DEG;s.rotationY=tr.rotationY*_RAD2DEG;s.scaleZ=tr.scaleZ}if(s.filters)delete s.filters;return s},_cssDif=function(t,s1,s2,vars,forceLookup){var difs={},style=t.style,val,p,mpt;for(p in s2)if(p!=="cssText")if(p!=="length")if(isNaN(p))if(s1[p]!==(val=s2[p])||forceLookup&&forceLookup[p])if(p.indexOf("Origin")===-1)if(typeof val==="number"||typeof val==="string"){difs[p]=val==="auto"&&(p==="left"||p==="top")?_calculateOffset(t,p):(val===""||val==="auto"||val==="none")&&
typeof s1[p]==="string"&&s1[p].replace(_NaNExp,"")!==""?0:val;if(style[p]!==undefined)mpt=new MiniPropTween(style,p,style[p],mpt)}if(vars)for(p in vars)if(p!=="className")difs[p]=vars[p];return{difs:difs,firstMPT:mpt}},_dimensions={width:["Left","Right"],height:["Top","Bottom"]},_margins=["marginLeft","marginRight","marginTop","marginBottom"],_getDimension=function(t,p,cs){var v=parseFloat(p==="width"?t.offsetWidth:t.offsetHeight),a=_dimensions[p],i=a.length;cs=cs||_getComputedStyle(t,null);while(--i>
-1){v-=parseFloat(_getStyle(t,"padding"+a[i],cs,true))||0;v-=parseFloat(_getStyle(t,"border"+a[i]+"Width",cs,true))||0}return v},_parsePosition=function(v,recObj){if(v==null||v===""||v==="auto"||v==="auto auto")v="0 0";var a=v.split(" "),x=v.indexOf("left")!==-1?"0%":v.indexOf("right")!==-1?"100%":a[0],y=v.indexOf("top")!==-1?"0%":v.indexOf("bottom")!==-1?"100%":a[1];if(y==null)y="0";else if(y==="center")y="50%";if(x==="center"||isNaN(parseFloat(x)))x="50%";if(recObj){recObj.oxp=x.indexOf("%")!==
-1;recObj.oyp=y.indexOf("%")!==-1;recObj.oxr=x.charAt(1)==="=";recObj.oyr=y.charAt(1)==="=";recObj.ox=parseFloat(x.replace(_NaNExp,""));recObj.oy=parseFloat(y.replace(_NaNExp,""))}return x+" "+y+(a.length>2?" "+a[2]:"")},_parseChange=function(e,b){return typeof e==="string"&&e.charAt(1)==="="?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(b)},_parseVal=function(v,d){return v==null?d:typeof v==="string"&&v.charAt(1)==="="?parseInt(v.charAt(0)+"1",10)*Number(v.substr(2))+
d:parseFloat(v)},_parseAngle=function(v,d,p,directionalEnd){var min=1E-6,cap,split,dif,type,result;if(v==null)result=d;else if(typeof v==="number")result=v*_DEG2RAD;else{cap=Math.PI*2;split=v.split("_");dif=Number(split[0].replace(_NaNExp,""))*(v.indexOf("rad")===-1?_DEG2RAD:1)-(v.charAt(1)==="="?0:d);type=split[1];if(type&&directionalEnd)directionalEnd[p]=d+dif;if(type==="short"){dif=dif%cap;if(dif!==dif%(cap/2))dif=dif<0?dif+cap:dif-cap}else if(type==="cw"&&dif<0)dif=(dif+cap*9999999999)%cap-(dif/
cap|0)*cap;else if(type==="ccw"&&dif>0)dif=(dif-cap*9999999999)%cap-(dif/cap|0)*cap;result=d+dif}if(result<min&&result>-min)result=0;return result},_colorLookup={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,
255,255,0]},_hue=function(h,m1,m2){h=h<0?h+1:h>1?h-1:h;return(h*6<1?m1+(m2-m1)*h*6:h<0.5?m2:h*3<2?m1+(m2-m1)*(2/3-h)*6:m1)*255+0.5|0},_parseColor=function(v){var c1,c2,c3,h,s,l;if(!v||v==="")return _colorLookup.black;if(typeof v==="number")return[v>>16,v>>8&255,v&255];if(v.charAt(v.length-1)===",")v=v.substr(0,v.length-1);if(_colorLookup[v])return _colorLookup[v];if(v.charAt(0)==="#"){if(v.length===4){c1=v.charAt(1),c2=v.charAt(2),c3=v.charAt(3);v="#"+c1+c1+c2+c2+c3+c3}v=parseInt(v.substr(1),16);
return[v>>16,v>>8&255,v&255]}if(v.substr(0,3)==="hsl"){v=v.match(_numExp);h=Number(v[0])%360/360;s=Number(v[1])/100;l=Number(v[2])/100;c2=l<=0.5?l*(s+1):l+s-l*s;c1=l*2-c2;if(v.length>3)v[3]=Number(v[3]);v[0]=_hue(h+1/3,c1,c2);v[1]=_hue(h,c1,c2);v[2]=_hue(h-1/3,c1,c2);return v}v=v.match(_numExp)||_colorLookup.transparent;v[0]=Number(v[0]);v[1]=Number(v[1]);v[2]=Number(v[2]);if(v.length>3)v[3]=Number(v[3]);return v},_colorExp="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(p in _colorLookup)_colorExp+=
"|"+p+"\\b";_colorExp=new RegExp(_colorExp+")","gi");var _getFormatter=function(dflt,clr,collapsible,multi){if(dflt==null)return function(v){return v};var dColor=clr?(dflt.match(_colorExp)||[""])[0]:"",dVals=dflt.split(dColor).join("").match(_valuesExp)||[],pfx=dflt.substr(0,dflt.indexOf(dVals[0])),sfx=dflt.charAt(dflt.length-1)===")"?")":"",delim=dflt.indexOf(" ")!==-1?" ":",",numVals=dVals.length,dSfx=numVals>0?dVals[0].replace(_numExp,""):"",formatter;if(!numVals)return function(v){return v};if(clr){formatter=
function(v){var color,vals,i,a;if(typeof v==="number")v+=dSfx;else if(multi&&_commasOutsideParenExp.test(v)){a=v.replace(_commasOutsideParenExp,"|").split("|");for(i=0;i<a.length;i++)a[i]=formatter(a[i]);return a.join(",")}color=(v.match(_colorExp)||[dColor])[0];vals=v.split(color).join("").match(_valuesExp)||[];i=vals.length;if(numVals>i--)while(++i<numVals)vals[i]=collapsible?vals[(i-1)/2>>0]:dVals[i];return pfx+vals.join(delim)+delim+color+sfx+(v.indexOf("inset")!==-1?" inset":"")};return formatter}formatter=
function(v){var vals,a,i;if(typeof v==="number")v+=dSfx;else if(multi&&_commasOutsideParenExp.test(v)){a=v.replace(_commasOutsideParenExp,"|").split("|");for(i=0;i<a.length;i++)a[i]=formatter(a[i]);return a.join(",")}vals=v.match(_valuesExp)||[];i=vals.length;if(numVals>i--)while(++i<numVals)vals[i]=collapsible?vals[(i-1)/2>>0]:dVals[i];return pfx+vals.join(delim)+sfx};return formatter},_getEdgeParser=function(props){props=props.split(",");return function(t,e,p,cssp,pt,plugin,vars){var a=(e+"").split(" "),
i;vars={};for(i=0;i<4;i++)vars[props[i]]=a[i]=a[i]||a[(i-1)/2>>0];return cssp.parse(t,vars,pt,plugin)}},_setPluginRatio=_internals._setPluginRatio=function(v){this.plugin.setRatio(v);var d=this.data,proxy=d.proxy,mpt=d.firstMPT,min=1E-6,val,pt,i,str;while(mpt){val=proxy[mpt.v];if(mpt.r)val=val>0?val+0.5>>0:val-0.5>>0;else if(val<min&&val>-min)val=0;mpt.t[mpt.p]=val;mpt=mpt._next}if(d.autoRotate)d.autoRotate.rotation=proxy.rotation;if(v===1){mpt=d.firstMPT;while(mpt){pt=mpt.t;if(!pt.type)pt.e=pt.s+
pt.xs0;else if(pt.type===1){str=pt.xs0+pt.s+pt.xs1;for(i=1;i<pt.l;i++)str+=pt["xn"+i]+pt["xs"+(i+1)];pt.e=str}mpt=mpt._next}}},MiniPropTween=function(t,p,v,next,r){this.t=t;this.p=p;this.v=v;this.r=r;if(next){next._prev=this;this._next=next}},_parseToProxy=_internals._parseToProxy=function(t,vars,cssp,pt,plugin,shallow){var bpt=pt,start={},end={},transform=cssp._transform,oldForce=_forcePT,i,p,xp,mpt,firstPT;cssp._transform=null;_forcePT=vars;pt=firstPT=cssp.parse(t,vars,pt,plugin);_forcePT=oldForce;
if(shallow){cssp._transform=transform;if(bpt){bpt._prev=null;if(bpt._prev)bpt._prev._next=null}}while(pt&&pt!==bpt){if(pt.type<=1){p=pt.p;end[p]=pt.s+pt.c;start[p]=pt.s;if(!shallow){mpt=new MiniPropTween(pt,"s",p,mpt,pt.r);pt.c=0}if(pt.type===1){i=pt.l;while(--i>0){xp="xn"+i;p=pt.p+"_"+xp;end[p]=pt.data[xp];start[p]=pt[xp];if(!shallow)mpt=new MiniPropTween(pt,xp,p,mpt,pt.rxp[xp])}}}pt=pt._next}return{proxy:start,end:end,firstMPT:mpt,pt:firstPT}},CSSPropTween=_internals.CSSPropTween=function(t,p,s,
c,next,type,n,r,pr,b,e){this.t=t;this.p=p;this.s=s;this.c=c;this.n=n||"css_"+p;if(!(t instanceof CSSPropTween))_overwriteProps.push(this.n);this.r=r;this.type=type||0;if(pr){this.pr=pr;_hasPriority=true}this.b=b===undefined?s:b;this.e=e===undefined?s+c:e;if(next){this._next=next;next._prev=this}},_parseComplex=CSSPlugin.parseComplex=function(t,p,b,e,clrs,dflt,pt,pr,plugin,setRatio){pt=new CSSPropTween(t,p,0,0,pt,setRatio?2:1,null,false,pr,b,e);e+="";var ba=b.split(", ").join(",").split(" "),ea=e.split(", ").join(",").split(" "),
l=ba.length,autoRound=_autoRound!==false,i,xi,ni,bv,ev,bnums,enums,bn,rgba,temp,cv,str;if(e.indexOf(",")!==-1||b.indexOf(",")!==-1){ba=ba.join(" ").replace(_commasOutsideParenExp,", ").split(" ");ea=ea.join(" ").replace(_commasOutsideParenExp,", ").split(" ");l=ba.length}if(l!==ea.length){ba=(dflt||"").split(" ");l=ba.length}pt.plugin=plugin;pt.setRatio=setRatio;for(i=0;i<l;i++){bv=ba[i];ev=ea[i];bn=parseFloat(bv);if(bn||bn===0)pt.appendXtra("",bn,_parseChange(ev,bn),ev.replace(_relNumExp,""),autoRound&&
ev.indexOf("px")!==-1,true);else if(clrs&&(bv.charAt(0)==="#"||_colorLookup[bv]||_rgbhslExp.test(bv))){str=ev.charAt(ev.length-1)===","?"),":")";bv=_parseColor(bv);ev=_parseColor(ev);rgba=bv.length+ev.length>6;if(rgba&&!_supportsOpacity&&ev[3]===0){pt["xs"+pt.l]+=pt.l?" transparent":"transparent";pt.e=pt.e.split(ea[i]).join("transparent")}else{if(!_supportsOpacity)rgba=false;pt.appendXtra(rgba?"rgba(":"rgb(",bv[0],ev[0]-bv[0],",",true,true).appendXtra("",bv[1],ev[1]-bv[1],",",true).appendXtra("",
bv[2],ev[2]-bv[2],rgba?",":str,true);if(rgba){bv=bv.length<4?1:bv[3];pt.appendXtra("",bv,(ev.length<4?1:ev[3])-bv,str,false)}}}else{bnums=bv.match(_numExp);if(!bnums)pt["xs"+pt.l]+=pt.l?" "+bv:bv;else{enums=ev.match(_relNumExp);if(!enums||enums.length!==bnums.length)return pt;ni=0;for(xi=0;xi<bnums.length;xi++){cv=bnums[xi];temp=bv.indexOf(cv,ni);pt.appendXtra(bv.substr(ni,temp-ni),Number(cv),_parseChange(enums[xi],cv),"",autoRound&&bv.substr(temp+cv.length,2)==="px",xi===0);ni=temp+cv.length}pt["xs"+
pt.l]+=bv.substr(ni)}}}if(e.indexOf("=")!==-1)if(pt.data){str=pt.xs0+pt.data.s;for(i=1;i<pt.l;i++)str+=pt["xs"+i]+pt.data["xn"+i];pt.e=str+pt["xs"+i]}if(!pt.l){pt.type=-1;pt.xs0=pt.e}return pt.xfirst||pt},i=9;p=CSSPropTween.prototype;p.l=p.pr=0;while(--i>0){p["xn"+i]=0;p["xs"+i]=""}p.xs0="";p._next=p._prev=p.xfirst=p.data=p.plugin=p.setRatio=p.rxp=null;p.appendXtra=function(pfx,s,c,sfx,r,pad){var pt=this,l=pt.l;pt["xs"+l]+=pad&&l?" "+pfx:pfx||"";if(!c)if(l!==0&&!pt.plugin){pt["xs"+l]+=s+(sfx||"");
return pt}pt.l++;pt.type=pt.setRatio?2:1;pt["xs"+pt.l]=sfx||"";if(l>0){pt.data["xn"+l]=s+c;pt.rxp["xn"+l]=r;pt["xn"+l]=s;if(!pt.plugin){pt.xfirst=new CSSPropTween(pt,"xn"+l,s,c,pt.xfirst||pt,0,pt.n,r,pt.pr);pt.xfirst.xs0=0}return pt}pt.data={s:s+c};pt.rxp={};pt.s=s;pt.c=c;pt.r=r;return pt};var SpecialProp=function(p,options){options=options||{};this.p=options.prefix?_checkPropPrefix(p)||p:p;_specialProps[p]=_specialProps[this.p]=this;this.format=options.formatter||_getFormatter(options.defaultValue,
options.color,options.collapsible,options.multi);if(options.parser)this.parse=options.parser;this.clrs=options.color;this.multi=options.multi;this.keyword=options.keyword;this.dflt=options.defaultValue;this.pr=options.priority||0},_registerComplexSpecialProp=_internals._registerComplexSpecialProp=function(p,options,defaults){if(typeof options!=="object")options={parser:defaults};var a=p.split(","),d=options.defaultValue,i,temp;defaults=defaults||[d];for(i=0;i<a.length;i++){options.prefix=i===0&&options.prefix;
options.defaultValue=defaults[i]||d;temp=new SpecialProp(a[i],options)}},_registerPluginProp=function(p){if(!_specialProps[p]){var pluginName=p.charAt(0).toUpperCase()+p.substr(1)+"Plugin";_registerComplexSpecialProp(p,{parser:function(t,e,p,cssp,pt,plugin,vars){var pluginClass=(window.GreenSockGlobals||window).com.greensock.plugins[pluginName];if(!pluginClass){_log("Error: "+pluginName+" js file not loaded.");return pt}pluginClass._cssRegister();return _specialProps[p].parse(t,e,p,cssp,pt,plugin,
vars)}})}};p=SpecialProp.prototype;p.parseComplex=function(t,b,e,pt,plugin,setRatio){var kwd=this.keyword,i,ba,ea,l,bi,ei;if(this.multi)if(_commasOutsideParenExp.test(e)||_commasOutsideParenExp.test(b)){ba=b.replace(_commasOutsideParenExp,"|").split("|");ea=e.replace(_commasOutsideParenExp,"|").split("|")}else if(kwd){ba=[b];ea=[e]}if(ea){l=ea.length>ba.length?ea.length:ba.length;for(i=0;i<l;i++){b=ba[i]=ba[i]||this.dflt;e=ea[i]=ea[i]||this.dflt;if(kwd){bi=b.indexOf(kwd);ei=e.indexOf(kwd);if(bi!==
ei){e=ei===-1?ea:ba;e[i]+=" "+kwd}}}b=ba.join(", ");e=ea.join(", ")}return _parseComplex(t,this.p,b,e,this.clrs,this.dflt,pt,this.pr,plugin,setRatio)};p.parse=function(t,e,p,cssp,pt,plugin,vars){return this.parseComplex(t.style,this.format(_getStyle(t,this.p,_cs,false,this.dflt)),this.format(e),pt,plugin)};CSSPlugin.registerSpecialProp=function(name,onInitTween,priority){_registerComplexSpecialProp(name,{parser:function(t,e,p,cssp,pt,plugin,vars){var rv=new CSSPropTween(t,p,0,0,pt,2,p,false,priority);
rv.plugin=plugin;rv.setRatio=onInitTween(t,e,cssp._tween,p);return rv},priority:priority})};var _transformProps="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),_transformProp=_checkPropPrefix("transform"),_transformPropCSS=_prefixCSS+"transform",_transformOriginProp=_checkPropPrefix("transformOrigin"),_supports3D=_checkPropPrefix("perspective")!==null,_getTransform=function(t,cs,rec){var tm=rec?t._gsTransform||{skewY:0}:{skewY:0},invX=tm.scaleX<0,min=2E-5,rnd=
1E5,minPI=-Math.PI+1E-4,maxPI=Math.PI-1E-4,zOrigin=_supports3D?parseFloat(_getStyle(t,_transformOriginProp,cs,false,"0 0 0").split(" ")[2])||tm.zOrigin||0:0,s,m,i,n,dec,scaleX,scaleY,rotation,skewX,difX,difY,difR,difS;if(_transformProp)s=_getStyle(t,_transformPropCSS,cs,true);else if(t.currentStyle){s=t.currentStyle.filter.match(_ieGetMatrixExp);s=s&&s.length===4?s[0].substr(4)+","+Number(s[2].substr(4))+","+Number(s[1].substr(4))+","+s[3].substr(4)+","+(tm?tm.x:0)+","+(tm?tm.y:0):null}m=(s||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||
[];i=m.length;while(--i>-1){n=Number(m[i]);m[i]=(dec=n-(n|=0))?(dec*rnd+(dec<0?-0.5:0.5)|0)/rnd+n:n}if(m.length===16){var a13=m[8],a23=m[9],a33=m[10],a14=m[12],a24=m[13],a34=m[14];if(tm.zOrigin){a34=-tm.zOrigin;a14=a13*a34-m[12];a24=a23*a34-m[13];a34=a33*a34+tm.zOrigin-m[14]}if(!rec||a14!==tm.x||a24!==tm.y||a34!==tm.z){var a11=m[0],a21=m[1],a31=m[2],a41=m[3],a12=m[4],a22=m[5],a32=m[6],a42=m[7],a43=m[11],angle=tm.rotationX=Math.atan2(a32,a33),xFlip=angle<minPI||angle>maxPI,t1,t2,t3,t4,cos,sin,yFlip,
zFlip;if(angle){cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a12*cos+a13*sin;t2=a22*cos+a23*sin;t3=a32*cos+a33*sin;t4=a42*cos+a43*sin;a13=a12*-sin+a13*cos;a23=a22*-sin+a23*cos;a33=a32*-sin+a33*cos;a43=a42*-sin+a43*cos;a12=t1;a22=t2;a32=t3}angle=tm.rotationY=Math.atan2(a13,a11);if(angle){yFlip=angle<minPI||angle>maxPI;cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a11*cos-a13*sin;t2=a21*cos-a23*sin;t3=a31*cos-a33*sin;t4=a41*cos-a43*sin;a23=a21*sin+a23*cos;a33=a31*sin+a33*cos;a43=a41*sin+a43*cos;a11=
t1;a21=t2;a31=t3}angle=tm.rotation=Math.atan2(a21,a22);if(angle){zFlip=angle<minPI||angle>maxPI;cos=Math.cos(-angle);sin=Math.sin(-angle);a11=a11*cos+a12*sin;t2=a21*cos+a22*sin;a22=a21*-sin+a22*cos;a32=a31*-sin+a32*cos;a21=t2}if(zFlip&&xFlip)tm.rotation=tm.rotationX=0;else if(zFlip&&yFlip)tm.rotation=tm.rotationY=0;else if(yFlip&&xFlip)tm.rotationY=tm.rotationX=0;tm.scaleX=(Math.sqrt(a11*a11+a21*a21)*rnd+0.5>>0)/rnd;tm.scaleY=(Math.sqrt(a22*a22+a23*a23)*rnd+0.5>>0)/rnd;tm.scaleZ=(Math.sqrt(a32*a32+
a33*a33)*rnd+0.5>>0)/rnd;tm.skewX=0;tm.perspective=a43?1/(a43<0?-a43:a43):0;tm.x=a14;tm.y=a24;tm.z=a34}}else if((!_supports3D||m.length===0||tm.x!==m[4]||tm.y!==m[5]||!tm.rotationX&&!tm.rotationY)&&!(tm.x!==undefined&&_getStyle(t,"display",cs)==="none")){var k=m.length>=6,a=k?m[0]:1,b=m[1]||0,c=m[2]||0,d=k?m[3]:1;tm.x=m[4]||0;tm.y=m[5]||0;scaleX=Math.sqrt(a*a+b*b);scaleY=Math.sqrt(d*d+c*c);rotation=a||b?Math.atan2(b,a):tm.rotation||0;skewX=c||d?Math.atan2(c,d)+rotation:tm.skewX||0;difX=scaleX-Math.abs(tm.scaleX||
0);difY=scaleY-Math.abs(tm.scaleY||0);if(Math.abs(skewX)>Math.PI/2&&Math.abs(skewX)<Math.PI*1.5)if(invX){scaleX*=-1;skewX+=rotation<=0?Math.PI:-Math.PI;rotation+=rotation<=0?Math.PI:-Math.PI}else{scaleY*=-1;skewX+=skewX<=0?Math.PI:-Math.PI}difR=(rotation-tm.rotation)%Math.PI;difS=(skewX-tm.skewX)%Math.PI;if(tm.skewX===undefined||difX>min||difX<-min||difY>min||difY<-min||difR>minPI&&difR<maxPI&&difR*rnd>>0!==0||difS>minPI&&difS<maxPI&&difS*rnd>>0!==0){tm.scaleX=scaleX;tm.scaleY=scaleY;tm.rotation=
rotation;tm.skewX=skewX}if(_supports3D){tm.rotationX=tm.rotationY=tm.z=0;tm.perspective=parseFloat(CSSPlugin.defaultTransformPerspective)||0;tm.scaleZ=1}}tm.zOrigin=zOrigin;for(i in tm)if(tm[i]<min)if(tm[i]>-min)tm[i]=0;if(rec)t._gsTransform=tm;return tm},_setIETransformRatio=function(v){var t=this.data,ang=-t.rotation,skew=ang+t.skewX,rnd=1E5,a=(Math.cos(ang)*t.scaleX*rnd>>0)/rnd,b=(Math.sin(ang)*t.scaleX*rnd>>0)/rnd,c=(Math.sin(skew)*-t.scaleY*rnd>>0)/rnd,d=(Math.cos(skew)*t.scaleY*rnd>>0)/rnd,
style=this.t.style,cs=this.t.currentStyle,filters,val;if(!cs)return;val=b;b=-c;c=-val;filters=cs.filter;style.filter="";var w=this.t.offsetWidth,h=this.t.offsetHeight,clip=cs.position!=="absolute",m="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+b+", M21="+c+", M22="+d,ox=t.x,oy=t.y,dx,dy;if(t.ox!=null){dx=(t.oxp?w*t.ox*0.01:t.ox)-w/2;dy=(t.oyp?h*t.oy*0.01:t.oy)-h/2;ox+=dx-(dx*a+dy*b);oy+=dy-(dx*c+dy*d)}if(!clip){var mult=_ieVers<8?1:-1,marg,prop,dif;dx=t.ieOffsetX||0;dy=t.ieOffsetY||
0;t.ieOffsetX=Math.round((w-((a<0?-a:a)*w+(b<0?-b:b)*h))/2+ox);t.ieOffsetY=Math.round((h-((d<0?-d:d)*h+(c<0?-c:c)*w))/2+oy);for(i=0;i<4;i++){prop=_margins[i];marg=cs[prop];val=marg.indexOf("px")!==-1?parseFloat(marg):_convertToPixels(this.t,prop,parseFloat(marg),marg.replace(_suffixExp,""))||0;if(val!==t[prop])dif=i<2?-t.ieOffsetX:-t.ieOffsetY;else dif=i<2?dx-t.ieOffsetX:dy-t.ieOffsetY;style[prop]=(t[prop]=Math.round(val-dif*(i===0||i===2?1:mult)))+"px"}m+=", sizingMethod='auto expand')"}else{dx=
w/2;dy=h/2;m+=", Dx="+(dx-(dx*a+dy*b)+ox)+", Dy="+(dy-(dx*c+dy*d)+oy)+")"}if(filters.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1)style.filter=filters.replace(_ieSetMatrixExp,m);else style.filter=m+" "+filters;if(v===0||v===1)if(a===1)if(b===0)if(c===0)if(d===1)if(!clip||m.indexOf("Dx=0, Dy=0")!==-1)if(!_opacityExp.test(filters)||parseFloat(RegExp.$1)===100)if(filters.indexOf("gradient(")===-1)style.removeAttribute("filter")},_set3DTransformRatio=function(v){var t=this.data,style=this.t.style,
perspective=t.perspective,a11=t.scaleX,a12=0,a13=0,a14=0,a21=0,a22=t.scaleY,a23=0,a24=0,a31=0,a32=0,a33=t.scaleZ,a34=0,a41=0,a42=0,a43=perspective?-1/perspective:0,angle=t.rotation,zOrigin=t.zOrigin,cma=",",rnd=1E5,cos,sin,t1,t2,t3,t4,ffProp,n,sfx;if(_isFirefox){ffProp=style.top?"top":style.bottom?"bottom":parseFloat(_getStyle(this.t,"top",null,false))?"bottom":"top";t1=_getStyle(this.t,ffProp,null,false);n=parseFloat(t1)||0;sfx=t1.substr((n+"").length)||"px";t._ffFix=!t._ffFix;style[ffProp]=(t._ffFix?
n+0.05:n-0.05)+sfx}if(angle||t.skewX){t1=a11*Math.cos(angle);t2=a22*Math.sin(angle);angle-=t.skewX;a12=a11*-Math.sin(angle);a22=a22*Math.cos(angle);a11=t1;a21=t2}angle=t.rotationY;if(angle){cos=Math.cos(angle);sin=Math.sin(angle);t1=a11*cos;t2=a21*cos;t3=a33*-sin;t4=a43*-sin;a13=a11*sin;a23=a21*sin;a33=a33*cos;a43*=cos;a11=t1;a21=t2;a31=t3;a41=t4}angle=t.rotationX;if(angle){cos=Math.cos(angle);sin=Math.sin(angle);t1=a12*cos+a13*sin;t2=a22*cos+a23*sin;t3=a32*cos+a33*sin;t4=a42*cos+a43*sin;a13=a12*
-sin+a13*cos;a23=a22*-sin+a23*cos;a33=a32*-sin+a33*cos;a43=a42*-sin+a43*cos;a12=t1;a22=t2;a32=t3;a42=t4}if(zOrigin){a34-=zOrigin;a14=a13*a34;a24=a23*a34;a34=a33*a34+zOrigin}a14=(t1=(a14+=t.x)-(a14|=0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a14:a14;a24=(t1=(a24+=t.y)-(a24|=0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a24:a24;a34=(t1=(a34+=t.z)-(a34|=0))?(t1*rnd+(t1<0?-0.5:0.5)|0)/rnd+a34:a34;style[_transformProp]="matrix3d("+(a11*rnd>>0)/rnd+cma+(a21*rnd>>0)/rnd+cma+(a31*rnd>>0)/rnd+cma+(a41*rnd>>0)/rnd+cma+(a12*rnd>>
0)/rnd+cma+(a22*rnd>>0)/rnd+cma+(a32*rnd>>0)/rnd+cma+(a42*rnd>>0)/rnd+cma+(a13*rnd>>0)/rnd+cma+(a23*rnd>>0)/rnd+cma+(a33*rnd>>0)/rnd+cma+(a43*rnd>>0)/rnd+cma+a14+cma+a24+cma+a34+cma+(perspective?1+-a34/perspective:1)+")"},_set2DTransformRatio=function(v){var t=this.data,targ=this.t,style=targ.style,ffProp,t1,n,sfx,ang,skew,rnd,sx,sy;if(_isFirefox){ffProp=style.top?"top":style.bottom?"bottom":parseFloat(_getStyle(targ,"top",null,false))?"bottom":"top";t1=_getStyle(targ,ffProp,null,false);n=parseFloat(t1)||
0;sfx=t1.substr((n+"").length)||"px";t._ffFix=!t._ffFix;style[ffProp]=(t._ffFix?n+0.05:n-0.05)+sfx}if(!t.rotation&&!t.skewX)style[_transformProp]="matrix("+t.scaleX+",0,0,"+t.scaleY+","+t.x+","+t.y+")";else{ang=t.rotation;skew=ang-t.skewX;rnd=1E5;sx=t.scaleX*rnd;sy=t.scaleY*rnd;style[_transformProp]="matrix("+(Math.cos(ang)*sx>>0)/rnd+","+(Math.sin(ang)*sx>>0)/rnd+","+(Math.sin(skew)*-sy>>0)/rnd+","+(Math.cos(skew)*sy>>0)/rnd+","+t.x+","+t.y+")"}};_registerComplexSpecialProp("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",
{parser:function(t,e,p,cssp,pt,plugin,vars){if(cssp._transform)return pt;var m1=cssp._transform=_getTransform(t,_cs,true),style=t.style,min=1E-6,i=_transformProps.length,v=vars,endRotations={},m2,skewY,copy,orig,has3D,hasChange,dr;if(typeof v.transform==="string"&&_transformProp){copy=style.cssText;style[_transformProp]=v.transform;style.display="block";m2=_getTransform(t,null,false);style.cssText=copy}else if(typeof v==="object"){m2={scaleX:_parseVal(v.scaleX!=null?v.scaleX:v.scale,m1.scaleX),scaleY:_parseVal(v.scaleY!=
null?v.scaleY:v.scale,m1.scaleY),scaleZ:_parseVal(v.scaleZ!=null?v.scaleZ:v.scale,m1.scaleZ),x:_parseVal(v.x,m1.x),y:_parseVal(v.y,m1.y),z:_parseVal(v.z,m1.z),perspective:_parseVal(v.transformPerspective,m1.perspective)};dr=v.directionalRotation;if(dr!=null)if(typeof dr==="object")for(copy in dr)v[copy]=dr[copy];else v.rotation=dr;m2.rotation=_parseAngle("rotation"in v?v.rotation:"shortRotation"in v?v.shortRotation+"_short":"rotationZ"in v?v.rotationZ:m1.rotation*_RAD2DEG,m1.rotation,"rotation",endRotations);
if(_supports3D){m2.rotationX=_parseAngle("rotationX"in v?v.rotationX:"shortRotationX"in v?v.shortRotationX+"_short":m1.rotationX*_RAD2DEG||0,m1.rotationX,"rotationX",endRotations);m2.rotationY=_parseAngle("rotationY"in v?v.rotationY:"shortRotationY"in v?v.shortRotationY+"_short":m1.rotationY*_RAD2DEG||0,m1.rotationY,"rotationY",endRotations)}m2.skewX=v.skewX==null?m1.skewX:_parseAngle(v.skewX,m1.skewX);m2.skewY=v.skewY==null?m1.skewY:_parseAngle(v.skewY,m1.skewY);if(skewY=m2.skewY-m1.skewY){m2.skewX+=
skewY;m2.rotation+=skewY}}has3D=m1.z||m1.rotationX||m1.rotationY||m2.z||m2.rotationX||m2.rotationY||m2.perspective;if(!has3D&&v.scale!=null)m2.scaleZ=1;while(--i>-1){p=_transformProps[i];orig=m2[p]-m1[p];if(orig>min||orig<-min||_forcePT[p]!=null){hasChange=true;pt=new CSSPropTween(m1,p,m1[p],orig,pt);if(p in endRotations)pt.e=endRotations[p];pt.xs0=0;pt.plugin=plugin;cssp._overwriteProps.push(pt.n)}}orig=v.transformOrigin;if(orig||_supports3D&&has3D&&m1.zOrigin)if(_transformProp){hasChange=true;orig=
(orig||_getStyle(t,p,_cs,false,"50% 50%"))+"";p=_transformOriginProp;pt=new CSSPropTween(style,p,0,0,pt,-1,"css_transformOrigin");pt.b=style[p];pt.plugin=plugin;if(_supports3D){copy=m1.zOrigin;orig=orig.split(" ");m1.zOrigin=(orig.length>2?parseFloat(orig[2]):copy)||0;pt.xs0=pt.e=style[p]=orig[0]+" "+(orig[1]||"50%")+" 0px";pt=new CSSPropTween(m1,"zOrigin",0,0,pt,-1,pt.n);pt.b=copy;pt.xs0=pt.e=m1.zOrigin}else pt.xs0=pt.e=style[p]=orig}else _parsePosition(orig+"",m1);if(hasChange)cssp._transformType=
has3D||this._transformType===3?3:2;return pt},prefix:true});_registerComplexSpecialProp("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});_registerComplexSpecialProp("borderRadius",{defaultValue:"0px",parser:function(t,e,p,cssp,pt,plugin){e=this.format(e);var props=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],style=t.style,ea1,i,es2,bs2,bs,es,bn,en,w,h,esfx,bsfx,rel,hn,vn,em;w=parseFloat(t.offsetWidth);
h=parseFloat(t.offsetHeight);ea1=e.split(" ");for(i=0;i<props.length;i++){if(this.p.indexOf("border"))props[i]=_checkPropPrefix(props[i]);bs=bs2=_getStyle(t,props[i],_cs,false,"0px");if(bs.indexOf(" ")!==-1){bs2=bs.split(" ");bs=bs2[0];bs2=bs2[1]}es=es2=ea1[i];bn=parseFloat(bs);bsfx=bs.substr((bn+"").length);rel=es.charAt(1)==="=";if(rel){en=parseInt(es.charAt(0)+"1",10);es=es.substr(2);en*=parseFloat(es);esfx=es.substr((en+"").length-(en<0?1:0))||""}else{en=parseFloat(es);esfx=es.substr((en+"").length)}if(esfx===
"")esfx=_suffixMap[p]||bsfx;if(esfx!==bsfx){hn=_convertToPixels(t,"borderLeft",bn,bsfx);vn=_convertToPixels(t,"borderTop",bn,bsfx);if(esfx==="%"){bs=hn/w*100+"%";bs2=vn/h*100+"%"}else if(esfx==="em"){em=_convertToPixels(t,"borderLeft",1,"em");bs=hn/em+"em";bs2=vn/em+"em"}else{bs=hn+"px";bs2=vn+"px"}if(rel){es=parseFloat(bs)+en+esfx;es2=parseFloat(bs2)+en+esfx}}pt=_parseComplex(style,props[i],bs+" "+bs2,es+" "+es2,false,"0px",pt)}return pt},prefix:true,formatter:_getFormatter("0px 0px 0px 0px",false,
true)});_registerComplexSpecialProp("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,p,cssp,pt,plugin){var bp="background-position",cs=_cs||_getComputedStyle(t,null),bs=this.format((cs?_ieVers?cs.getPropertyValue(bp+"-x")+" "+cs.getPropertyValue(bp+"-y"):cs.getPropertyValue(bp):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),es=this.format(e),ba,ea,i,pct,overlap,src;if(bs.indexOf("%")!==-1!==(es.indexOf("%")!==-1)){src=_getStyle(t,"backgroundImage").replace(_urlExp,
"");if(src&&src!=="none"){ba=bs.split(" ");ea=es.split(" ");_tempImg.setAttribute("src",src);i=2;while(--i>-1){bs=ba[i];pct=bs.indexOf("%")!==-1;if(pct!==(ea[i].indexOf("%")!==-1)){overlap=i===0?t.offsetWidth-_tempImg.width:t.offsetHeight-_tempImg.height;ba[i]=pct?parseFloat(bs)/100*overlap+"px":parseFloat(bs)/overlap*100+"%"}}bs=ba.join(" ")}}return this.parseComplex(t.style,bs,es,pt,plugin)},formatter:_parsePosition});_registerComplexSpecialProp("backgroundSize",{defaultValue:"0 0",formatter:_parsePosition});
_registerComplexSpecialProp("perspective",{defaultValue:"0px",prefix:true});_registerComplexSpecialProp("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});_registerComplexSpecialProp("transformStyle",{prefix:true});_registerComplexSpecialProp("backfaceVisibility",{prefix:true});_registerComplexSpecialProp("margin",{parser:_getEdgeParser("marginTop,marginRight,marginBottom,marginLeft")});_registerComplexSpecialProp("padding",{parser:_getEdgeParser("paddingTop,paddingRight,paddingBottom,paddingLeft")});
_registerComplexSpecialProp("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,p,cssp,pt,plugin){var b,cs,delim;if(_ieVers<9){cs=t.currentStyle;delim=_ieVers<8?" ":",";b="rect("+cs.clipTop+delim+cs.clipRight+delim+cs.clipBottom+delim+cs.clipLeft+")";e=this.format(e).split(",").join(delim)}else{b=this.format(_getStyle(t,this.p,_cs,false,this.dflt));e=this.format(e)}return this.parseComplex(t.style,b,e,pt,plugin)}});_registerComplexSpecialProp("textShadow",{defaultValue:"0px 0px 0px #999",
color:true,multi:true});_registerComplexSpecialProp("autoRound,strictUnits",{parser:function(t,e,p,cssp,pt){return pt}});_registerComplexSpecialProp("border",{defaultValue:"0px solid #000",parser:function(t,e,p,cssp,pt,plugin){return this.parseComplex(t.style,this.format(_getStyle(t,"borderTopWidth",_cs,false,"0px")+" "+_getStyle(t,"borderTopStyle",_cs,false,"solid")+" "+_getStyle(t,"borderTopColor",_cs,false,"#000")),this.format(e),pt,plugin)},color:true,formatter:function(v){var a=v.split(" ");
return a[0]+" "+(a[1]||"solid")+" "+(v.match(_colorExp)||["#000"])[0]}});_registerComplexSpecialProp("float,cssFloat,styleFloat",{parser:function(t,e,p,cssp,pt,plugin){var s=t.style,prop="cssFloat"in s?"cssFloat":"styleFloat";return new CSSPropTween(s,prop,0,0,pt,-1,p,false,0,s[prop],e)}});var _setIEOpacityRatio=function(v){var t=this.t,filters=t.filter,val=this.s+this.c*v>>0,skip;if(val===100)if(filters.indexOf("atrix(")===-1&&filters.indexOf("radient(")===-1){t.removeAttribute("filter");skip=!_getStyle(this.data,
"filter")}else{t.filter=filters.replace(_alphaFilterExp,"");skip=true}if(!skip){if(this.xn1)t.filter=filters=filters||"alpha(opacity=100)";if(filters.indexOf("opacity")===-1)t.filter+=" alpha(opacity="+val+")";else t.filter=filters.replace(_opacityExp,"opacity="+val)}};_registerComplexSpecialProp("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,p,cssp,pt,plugin){var b=parseFloat(_getStyle(t,"opacity",_cs,false,"1")),style=t.style,vb;e=parseFloat(e);if(p==="autoAlpha"){vb=_getStyle(t,
"visibility",_cs);if(b===1&&vb==="hidden"&&e!==0)b=0;pt=new CSSPropTween(style,"visibility",0,0,pt,-1,null,false,0,b!==0?"visible":"hidden",e===0?"hidden":"visible");pt.xs0="visible";cssp._overwriteProps.push(pt.n)}if(_supportsOpacity)pt=new CSSPropTween(style,"opacity",b,e-b,pt);else{pt=new CSSPropTween(style,"opacity",b*100,(e-b)*100,pt);pt.xn1=p==="autoAlpha"?1:0;style.zoom=1;pt.type=2;pt.b="alpha(opacity="+pt.s+")";pt.e="alpha(opacity="+(pt.s+pt.c)+")";pt.data=t;pt.plugin=plugin;pt.setRatio=_setIEOpacityRatio}return pt}});
var _removeProp=function(s,p){if(p)if(s.removeProperty)s.removeProperty(p.replace(_capsExp,"-$1").toLowerCase());else s.removeAttribute(p)},_setClassNameRatio=function(v){this.t._gsClassPT=this;if(v===1||v===0){this.t.className=v===0?this.b:this.e;var mpt=this.data,s=this.t.style;while(mpt){if(!mpt.v)_removeProp(s,mpt.p);else s[mpt.p]=mpt.v;mpt=mpt._next}if(v===1&&this.t._gsClassPT===this)this.t._gsClassPT=null}else if(this.t.className!==this.e)this.t.className=this.e};_registerComplexSpecialProp("className",
{parser:function(t,e,p,cssp,pt,plugin,vars){var b=t.className,cssText=t.style.cssText,difData,bs,cnpt,cnptLookup,mpt;pt=cssp._classNamePT=new CSSPropTween(t,p,0,0,pt,2);pt.setRatio=_setClassNameRatio;pt.pr=-11;_hasPriority=true;pt.b=b;bs=_getAllStyles(t,_cs);cnpt=t._gsClassPT;if(cnpt){cnptLookup={};mpt=cnpt.data;while(mpt){cnptLookup[mpt.p]=1;mpt=mpt._next}cnpt.setRatio(1)}t._gsClassPT=pt;pt.e=e.charAt(1)!=="="?e:b.replace(new RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+(e.charAt(0)==="+"?" "+e.substr(2):
"");if(cssp._tween._duration){t.className=pt.e;difData=_cssDif(t,bs,_getAllStyles(t),vars,cnptLookup);t.className=b;pt.data=difData.firstMPT;t.style.cssText=cssText;pt=pt.xfirst=cssp.parse(t,difData.difs,pt,plugin)}return pt}});var _setClearPropsRatio=function(v){if(v===1||v===0)if(this.data._totalTime===this.data._totalDuration){var all=this.e==="all",s=this.t.style,a=all?s.cssText.split(";"):this.e.split(","),i=a.length,transformParse=_specialProps.transform.parse,p;while(--i>-1){p=a[i];if(all)p=
p.substr(0,p.indexOf(":")).split(" ").join("");if(_specialProps[p])p=_specialProps[p].parse===transformParse?_transformProp:_specialProps[p].p;_removeProp(s,p)}}};_registerComplexSpecialProp("clearProps",{parser:function(t,e,p,cssp,pt){pt=new CSSPropTween(t,p,0,0,pt,2);pt.setRatio=_setClearPropsRatio;pt.e=e;pt.pr=-10;pt.data=cssp._tween;_hasPriority=true;return pt}});p="bezier,throwProps,physicsProps,physics2D".split(",");i=p.length;while(i--)_registerPluginProp(p[i]);p=CSSPlugin.prototype;p._firstPT=
null;p._onInitTween=function(target,vars,tween){if(!target.nodeType)return false;this._target=target;this._tween=tween;this._vars=vars;_autoRound=vars.autoRound;_hasPriority=false;_suffixMap=vars.suffixMap||CSSPlugin.suffixMap;_cs=_getComputedStyle(target,"");_overwriteProps=this._overwriteProps;var style=target.style,v,pt,pt2,first,last,next,zIndex,tpt,threeD;if(_reqSafariFix)if(style.zIndex===""){v=_getStyle(target,"zIndex",_cs);if(v==="auto"||v==="")style.zIndex=0}if(typeof vars==="string"){first=
style.cssText;v=_getAllStyles(target,_cs);style.cssText=first+";"+vars;v=_cssDif(target,v,_getAllStyles(target)).difs;if(!_supportsOpacity&&_opacityValExp.test(vars))v.opacity=parseFloat(RegExp.$1);vars=v;style.cssText=first}this._firstPT=pt=this.parse(target,vars,null);if(this._transformType){threeD=this._transformType===3;if(!_transformProp)style.zoom=1;else if(_isSafari){_reqSafariFix=true;if(style.zIndex===""){zIndex=_getStyle(target,"zIndex",_cs);if(zIndex==="auto"||zIndex==="")style.zIndex=
0}if(_isSafariLT6)style.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(threeD?"visible":"hidden")}pt2=pt;while(pt2&&pt2._next)pt2=pt2._next;tpt=new CSSPropTween(target,"transform",0,0,null,2);this._linkCSSP(tpt,null,pt2);tpt.setRatio=threeD&&_supports3D?_set3DTransformRatio:_transformProp?_set2DTransformRatio:_setIETransformRatio;tpt.data=this._transform||_getTransform(target,_cs,true);_overwriteProps.pop()}if(_hasPriority){while(pt){next=pt._next;pt2=first;while(pt2&&pt2.pr>pt.pr)pt2=
pt2._next;if(pt._prev=pt2?pt2._prev:last)pt._prev._next=pt;else first=pt;if(pt._next=pt2)pt2._prev=pt;else last=pt;pt=next}this._firstPT=first}return true};p.parse=function(target,vars,pt,plugin){var style=target.style,p,sp,bn,en,bs,es,bsfx,esfx,isStr,rel;for(p in vars){es=vars[p];sp=_specialProps[p];if(sp)pt=sp.parse(target,es,p,this,pt,plugin,vars);else{bs=_getStyle(target,p,_cs)+"";isStr=typeof es==="string";if(p==="color"||p==="fill"||p==="stroke"||p.indexOf("Color")!==-1||isStr&&_rgbhslExp.test(es)){if(!isStr){es=
_parseColor(es);es=(es.length>3?"rgba(":"rgb(")+es.join(",")+")"}pt=_parseComplex(style,p,bs,es,true,"transparent",pt,0,plugin)}else if(isStr&&(es.indexOf(" ")!==-1||es.indexOf(",")!==-1))pt=_parseComplex(style,p,bs,es,true,null,pt,0,plugin);else{bn=parseFloat(bs);bsfx=bn||bn===0?bs.substr((bn+"").length):"";if(bs===""||bs==="auto")if(p==="width"||p==="height"){bn=_getDimension(target,p,_cs);bsfx="px"}else if(p==="left"||p==="top"){bn=_calculateOffset(target,p,_cs);bsfx="px"}else{bn=p!=="opacity"?
0:1;bsfx=""}rel=isStr&&es.charAt(1)==="=";if(rel){en=parseInt(es.charAt(0)+"1",10);es=es.substr(2);en*=parseFloat(es);esfx=es.replace(_suffixExp,"")}else{en=parseFloat(es);esfx=isStr?es.substr((en+"").length)||"":""}if(esfx==="")esfx=_suffixMap[p]||bsfx;es=en||en===0?(rel?en+bn:en)+esfx:vars[p];if(bsfx!==esfx)if(esfx!=="")if(en||en===0)if(bn||bn===0){bn=_convertToPixels(target,p,bn,bsfx);if(esfx==="%"){bn/=_convertToPixels(target,p,100,"%")/100;if(bn>100)bn=100;if(vars.strictUnits!==true)bs=bn+"%"}else if(esfx===
"em")bn/=_convertToPixels(target,p,1,"em");else{en=_convertToPixels(target,p,en,esfx);esfx="px"}if(rel)if(en||en===0)es=en+bn+esfx}if(rel)en+=bn;if((bn||bn===0)&&(en||en===0)){pt=new CSSPropTween(style,p,bn,en-bn,pt,0,"css_"+p,_autoRound!==false&&(esfx==="px"||p==="zIndex"),0,bs,es);pt.xs0=esfx}else if(!es&&(es+""==="NaN"||es==null))_log("invalid "+p+" tween value: "+vars[p]);else{pt=new CSSPropTween(style,p,en||bn||0,0,pt,-1,"css_"+p,false,0,bs,es);pt.xs0=es==="none"&&(p==="display"||p.indexOf("Style")!==
-1)?bs:es}}}if(plugin)if(pt&&!pt.plugin)pt.plugin=plugin}return pt};p.setRatio=function(v){var pt=this._firstPT,min=1E-6,val,str,i;if(v===1&&(this._tween._time===this._tween._duration||this._tween._time===0))while(pt){if(pt.type!==2)pt.t[pt.p]=pt.e;else pt.setRatio(v);pt=pt._next}else if(v||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1E-6)while(pt){val=pt.c*v+pt.s;if(pt.r)val=val>0?val+0.5>>0:val-0.5>>0;else if(val<min)if(val>-min)val=0;if(!pt.type)pt.t[pt.p]=
val+pt.xs0;else if(pt.type===1){i=pt.l;if(i===2)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2;else if(i===3)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3;else if(i===4)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3+pt.xn3+pt.xs4;else if(i===5)pt.t[pt.p]=pt.xs0+val+pt.xs1+pt.xn1+pt.xs2+pt.xn2+pt.xs3+pt.xn3+pt.xs4+pt.xn4+pt.xs5;else{str=pt.xs0+val+pt.xs1;for(i=1;i<pt.l;i++)str+=pt["xn"+i]+pt["xs"+(i+1)];pt.t[pt.p]=str}}else if(pt.type===-1)pt.t[pt.p]=pt.xs0;else if(pt.setRatio)pt.setRatio(v);
pt=pt._next}else while(pt){if(pt.type!==2)pt.t[pt.p]=pt.b;else pt.setRatio(v);pt=pt._next}};p._enableTransforms=function(threeD){this._transformType=threeD||this._transformType===3?3:2};p._linkCSSP=function(pt,next,prev,remove){if(pt){if(next)next._prev=pt;if(pt._next)pt._next._prev=pt._prev;if(prev)prev._next=pt;else if(!remove&&this._firstPT===null)this._firstPT=pt;if(pt._prev)pt._prev._next=pt._next;else if(this._firstPT===pt)this._firstPT=pt._next;pt._next=next;pt._prev=prev}return pt};p._kill=
function(lookup){var copy=lookup,pt,p,xfirst;if(lookup.css_autoAlpha||lookup.css_alpha){copy={};for(p in lookup)copy[p]=lookup[p];copy.css_opacity=1;if(copy.css_autoAlpha)copy.css_visibility=1}if(lookup.css_className&&(pt=this._classNamePT)){xfirst=pt.xfirst;if(xfirst&&xfirst._prev)this._linkCSSP(xfirst._prev,pt._next,xfirst._prev._prev);else if(xfirst===this._firstPT)this._firstPT=pt._next;if(pt._next)this._linkCSSP(pt._next,pt._next._next,xfirst._prev);this._classNamePT=null}return TweenPlugin.prototype._kill.call(this,
copy)};var _getChildStyles=function(e,props,targets){var children,i,child,type;if(e.slice){i=e.length;while(--i>-1)_getChildStyles(e[i],props,targets);return}children=e.childNodes;i=children.length;while(--i>-1){child=children[i];type=child.type;if(child.style){props.push(_getAllStyles(child));if(targets)targets.push(child)}if((type===1||type===9||type===11)&&child.childNodes.length)_getChildStyles(child,props,targets)}};CSSPlugin.cascadeTo=function(target,duration,vars){var tween=TweenLite.to(target,
duration,vars),results=[tween],b=[],e=[],targets=[],_reservedProps=TweenLite._internals.reservedProps,i,difs,p;target=tween._targets||tween.target;_getChildStyles(target,b,targets);tween.render(duration,true);_getChildStyles(target,e);tween.render(0,true);tween._enabled(true);i=targets.length;while(--i>-1){difs=_cssDif(targets[i],b[i],e[i]);if(difs.firstMPT){difs=difs.difs;for(p in vars)if(_reservedProps[p])difs[p]=vars[p];results.push(TweenLite.to(targets[i],duration,difs))}}return results};TweenPlugin.activate([CSSPlugin]);
return CSSPlugin},true)});if(window._gsDefine)window._gsQueue.pop()();var io="undefined"===typeof module?{}:module.exports;
(function(){(function(exports,global){var io=exports;io.version="0.9.11";io.protocol=1;io.transports=[];io.j=[];io.sockets={};io.connect=function(host,details){var uri=io.util.parseUri(host),uuri,socket;if(global&&global.location){uri.protocol=uri.protocol||global.location.protocol.slice(0,-1);uri.host=uri.host||(global.document?global.document.domain:global.location.hostname);uri.port=uri.port||global.location.port}uuri=io.util.uniqueUri(uri);var options={host:uri.host,secure:"https"==uri.protocol,
port:uri.port||("https"==uri.protocol?443:80),query:uri.query||""};io.util.merge(options,details);if(options["force new connection"]||!io.sockets[uuri])socket=new io.Socket(options);if(!options["force new connection"]&&socket)io.sockets[uuri]=socket;socket=socket||io.sockets[uuri];return socket.of(uri.path.length>1?uri.path:"")}})("object"===typeof module?module.exports:this.io={},this);(function(exports,global){var util=exports.util={};var re=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;
var parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];util.parseUri=function(str){var m=re.exec(str||""),uri={},i=14;while(i--)uri[parts[i]]=m[i]||"";return uri};util.uniqueUri=function(uri){var protocol=uri.protocol,host=uri.host,port=uri.port;if("document"in global){host=host||document.domain;port=port||(protocol=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{host=host||"localhost";
if(!port&&protocol=="https")port=443}return(protocol||"http")+"://"+host+":"+(port||80)};util.query=function(base,addition){var query=util.chunkQuery(base||""),components=[];util.merge(query,util.chunkQuery(addition||""));for(var part in query)if(query.hasOwnProperty(part))components.push(part+"="+query[part]);return components.length?"?"+components.join("&"):""};util.chunkQuery=function(qs){var query={},params=qs.split("&"),i=0,l=params.length,kv;for(;i<l;++i){kv=params[i].split("=");if(kv[0])query[kv[0]]=
kv[1]}return query};var pageLoaded=false;util.load=function(fn){if("document"in global&&document.readyState==="complete"||pageLoaded)return fn();util.on(global,"load",fn,false)};util.on=function(element,event,fn,capture){if(element.attachEvent)element.attachEvent("on"+event,fn);else if(element.addEventListener)element.addEventListener(event,fn,capture)};util.request=function(xdomain){if(xdomain&&"undefined"!=typeof XDomainRequest&&!util.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&
(!xdomain||util.ua.hasCORS))return new XMLHttpRequest;if(!xdomain)try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null};if("undefined"!=typeof window)util.load(function(){pageLoaded=true});util.defer=function(fn){if(!util.ua.webkit||"undefined"!=typeof importScripts)return fn();util.load(function(){setTimeout(fn,100)})};util.merge=function merge(target,additional,deep,lastseen){var seen=lastseen||[],depth=typeof deep=="undefined"?2:deep,prop;for(prop in additional)if(additional.hasOwnProperty(prop)&&
util.indexOf(seen,prop)<0)if(typeof target[prop]!=="object"||!depth){target[prop]=additional[prop];seen.push(additional[prop])}else util.merge(target[prop],additional[prop],depth-1,seen);return target};util.mixin=function(ctor,ctor2){util.merge(ctor.prototype,ctor2.prototype)};util.inherit=function(ctor,ctor2){function f(){}f.prototype=ctor2.prototype;ctor.prototype=new f};util.isArray=Array.isArray||function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};util.intersect=function(arr,
arr2){var ret=[],longest=arr.length>arr2.length?arr:arr2,shortest=arr.length>arr2.length?arr2:arr;for(var i=0,l=shortest.length;i<l;i++)if(~util.indexOf(longest,shortest[i]))ret.push(shortest[i]);return ret};util.indexOf=function(arr,o,i){for(var j=arr.length,i=i<0?i+j<0?0:i+j:i||0;i<j&&arr[i]!==o;i++);return j<=i?-1:i};util.toArray=function(enu){var arr=[];for(var i=0,l=enu.length;i<l;i++)arr.push(enu[i]);return arr};util.ua={};util.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var a=
new XMLHttpRequest}catch(e){return false}return a.withCredentials!=undefined}();util.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);util.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)})("undefined"!=typeof io?io:module.exports,this);(function(exports,io){exports.EventEmitter=EventEmitter;function EventEmitter(){}EventEmitter.prototype.on=function(name,fn){if(!this.$events)this.$events={};if(!this.$events[name])this.$events[name]=
fn;else if(io.util.isArray(this.$events[name]))this.$events[name].push(fn);else this.$events[name]=[this.$events[name],fn];return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.once=function(name,fn){var self=this;function on(){self.removeListener(name,on);fn.apply(this,arguments)}on.listener=fn;this.on(name,on);return this};EventEmitter.prototype.removeListener=function(name,fn){if(this.$events&&this.$events[name]){var list=this.$events[name];if(io.util.isArray(list)){var pos=
-1;for(var i=0,l=list.length;i<l;i++)if(list[i]===fn||list[i].listener&&list[i].listener===fn){pos=i;break}if(pos<0)return this;list.splice(pos,1);if(!list.length)delete this.$events[name]}else if(list===fn||list.listener&&list.listener===fn)delete this.$events[name]}return this};EventEmitter.prototype.removeAllListeners=function(name){if(name===undefined){this.$events={};return this}if(this.$events&&this.$events[name])this.$events[name]=null;return this};EventEmitter.prototype.listeners=function(name){if(!this.$events)this.$events=
{};if(!this.$events[name])this.$events[name]=[];if(!io.util.isArray(this.$events[name]))this.$events[name]=[this.$events[name]];return this.$events[name]};EventEmitter.prototype.emit=function(name){if(!this.$events)return false;var handler=this.$events[name];if(!handler)return false;var args=Array.prototype.slice.call(arguments,1);if("function"==typeof handler)handler.apply(this,args);else if(io.util.isArray(handler)){var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++)listeners[i].apply(this,
args)}else return false;return true}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(n){return n<10?"0"+n:n}function date(d,key){return isFinite(d.valueOf())?d.getUTCFullYear()+"-"+f(d.getUTCMonth()+1)+"-"+f(d.getUTCDate())+"T"+f(d.getUTCHours())+":"+f(d.getUTCMinutes())+":"+f(d.getUTCSeconds())+
"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c===
"string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value instanceof Date)value=date(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)===
"[object Array]"){length=value.length;for(i=0;i<length;i+=1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1)if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?
": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);(function(exports,io){var parser=exports.parser={};var packets=parser.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var reasons=parser.reasons=
["transport not supported","client not handshaken","unauthorized"];var advice=parser.advice=["reconnect"];var JSON=io.JSON,indexOf=io.util.indexOf;parser.encodePacket=function(packet){var type=indexOf(packets,packet.type),id=packet.id||"",endpoint=packet.endpoint||"",ack=packet.ack,data=null;switch(packet.type){case "error":var reason=packet.reason?indexOf(reasons,packet.reason):"",adv=packet.advice?indexOf(advice,packet.advice):"";if(reason!==""||adv!=="")data=reason+(adv!==""?"+"+adv:"");break;
case "message":if(packet.data!=="")data=packet.data;break;case "event":var ev={name:packet.name};if(packet.args&&packet.args.length)ev.args=packet.args;data=JSON.stringify(ev);break;case "json":data=JSON.stringify(packet.data);break;case "connect":if(packet.qs)data=packet.qs;break;case "ack":data=packet.ackId+(packet.args&&packet.args.length?"+"+JSON.stringify(packet.args):"");break}var encoded=[type,id+(ack=="data"?"+":""),endpoint];if(data!==null&&data!==undefined)encoded.push(data);return encoded.join(":")};
parser.encodePayload=function(packets){var decoded="";if(packets.length==1)return packets[0];for(var i=0,l=packets.length;i<l;i++){var packet=packets[i];decoded+="ï¿½"+packet.length+"ï¿½"+packets[i]}return decoded};var regexp=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;parser.decodePacket=function(data){var pieces=data.match(regexp);if(!pieces)return{};var id=pieces[2]||"",data=pieces[5]||"",packet={type:packets[pieces[1]],endpoint:pieces[4]||""};if(id){packet.id=id;if(pieces[3])packet.ack="data";else packet.ack=
true}switch(packet.type){case "error":var pieces=data.split("+");packet.reason=reasons[pieces[0]]||"";packet.advice=advice[pieces[1]]||"";break;case "message":packet.data=data||"";break;case "event":try{var opts=JSON.parse(data);packet.name=opts.name;packet.args=opts.args}catch(e){}packet.args=packet.args||[];break;case "json":try{packet.data=JSON.parse(data)}catch(e){}break;case "connect":packet.qs=data||"";break;case "ack":var pieces=data.match(/^([0-9]+)(\+)?(.*)/);if(pieces){packet.ackId=pieces[1];
packet.args=[];if(pieces[3])try{packet.args=pieces[3]?JSON.parse(pieces[3]):[]}catch(e){}}break;case "disconnect":case "heartbeat":break}return packet};parser.decodePayload=function(data){if(data.charAt(0)=="ï¿½"){var ret=[];for(var i=1,length="";i<data.length;i++)if(data.charAt(i)=="ï¿½"){ret.push(parser.decodePacket(data.substr(i+1).substr(0,length)));i+=Number(length)+1;length=""}else length+=data.charAt(i);return ret}else return[parser.decodePacket(data)]}})("undefined"!=typeof io?io:module.exports,
"undefined"!=typeof io?io:module.parent.exports);(function(exports,io){exports.Transport=Transport;function Transport(socket,sessid){this.socket=socket;this.sessid=sessid}io.util.mixin(Transport,io.EventEmitter);Transport.prototype.heartbeats=function(){return true};Transport.prototype.onData=function(data){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting)this.setCloseTimeout();if(data!==""){var msgs=io.parser.decodePayload(data);if(msgs&&msgs.length)for(var i=
0,l=msgs.length;i<l;i++)this.onPacket(msgs[i])}return this};Transport.prototype.onPacket=function(packet){this.socket.setHeartbeatTimeout();if(packet.type=="heartbeat")return this.onHeartbeat();if(packet.type=="connect"&&packet.endpoint=="")this.onConnect();if(packet.type=="error"&&packet.advice=="reconnect")this.isOpen=false;this.socket.onPacket(packet);return this};Transport.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var self=this;this.closeTimeout=setTimeout(function(){self.onDisconnect()},
this.socket.closeTimeout)}};Transport.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};Transport.prototype.onConnect=function(){this.socket.onConnect();return this};Transport.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};Transport.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout)clearTimeout(this.reopenTimeout)};Transport.prototype.packet=
function(packet){this.send(io.parser.encodePacket(packet))};Transport.prototype.onHeartbeat=function(heartbeat){this.packet({type:"heartbeat"})};Transport.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};Transport.prototype.onClose=function(){var self=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};Transport.prototype.prepareUrl=function(){var options=this.socket.options;return this.scheme()+"://"+options.host+":"+options.port+"/"+options.resource+
"/"+io.protocol+"/"+this.name+"/"+this.sessid};Transport.prototype.ready=function(socket,fn){fn.call(this)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.Socket=Socket;function Socket(options){this.options={port:80,secure:false,document:"document"in global?document:false,resource:"socket.io",transports:io.transports,"connect timeout":1E4,"try multiple transports":true,"reconnect":true,"reconnection delay":500,"reconnection limit":Infinity,
"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,"manualFlush":false};io.util.merge(this.options,options);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||io.util.ua.hasCORS)){var self=this;io.util.on(global,"beforeunload",function(){self.disconnectSync()},false)}if(this.options["auto connect"]);
}io.util.mixin(Socket,io.EventEmitter);Socket.prototype.of=function(name){if(!this.namespaces[name]){this.namespaces[name]=new io.SocketNamespace(this,name);if(name!=="")this.namespaces[name].packet({type:"connect"})}return this.namespaces[name]};Socket.prototype.publish=function(){this.emit.apply(this,arguments);var nsp;for(var i in this.namespaces)if(this.namespaces.hasOwnProperty(i)){nsp=this.of(i);nsp.$emit.apply(nsp,arguments)}};function empty(){}Socket.prototype.handshake=function(fn){var self=
this,options=this.options;function complete(data){if(data instanceof Error){self.connecting=false;self.onError(data.message)}else fn.apply(null,data.split(":"))}var url=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,io.protocol,io.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!io.util.ua.hasCORS){var insertAt=document.getElementsByTagName("script")[0],script=document.createElement("script");script.src=url+"&jsonp="+io.j.length;
insertAt.parentNode.insertBefore(script,insertAt);io.j.push(function(data){complete(data);script.parentNode.removeChild(script)})}else{var xhr=io.util.request();xhr.open("GET",url,true);if(this.isXDomain())xhr.withCredentials=true;xhr.onreadystatechange=function(){if(xhr.readyState==4){xhr.onreadystatechange=empty;if(xhr.status==200)complete(xhr.responseText);else if(xhr.status==403)self.onError(xhr.responseText);else{self.connecting=false;!self.reconnecting&&self.onError(xhr.responseText)}}};xhr.send(null)}};
Socket.prototype.getTransport=function(override){var transports=override||this.transports,match;for(var i=0,transport;transport=transports[i];i++)if(io.Transport[transport]&&io.Transport[transport].check(this)&&(!this.isXDomain()||io.Transport[transport].xdomainCheck(this)))return new io.Transport[transport](this,this.sessionid);return null};Socket.prototype.connect=function(fn){if(this.connecting)return this;var self=this;self.connecting=true;this.handshake(function(sid,heartbeat,close,transports){self.sessionid=
sid;self.closeTimeout=close*1E3;self.heartbeatTimeout=heartbeat*1E3;if(!self.transports)self.transports=self.origTransports=transports?io.util.intersect(transports.split(","),self.options.transports):self.options.transports;self.setHeartbeatTimeout();function connect(transports){if(self.transport)self.transport.clearTimeouts();self.transport=self.getTransport(transports);if(!self.transport)return self.publish("connect_failed");self.transport.ready(self,function(){self.connecting=true;self.publish("connecting",
self.transport.name);self.transport.open();if(self.options["connect timeout"])self.connectTimeoutTimer=setTimeout(function(){if(!self.connected){self.connecting=false;if(self.options["try multiple transports"]){var remaining=self.transports;while(remaining.length>0&&remaining.splice(0,1)[0]!=self.transport.name);if(remaining.length)connect(remaining);else self.publish("connect_failed")}}},self.options["connect timeout"])})}connect(self.transports);self.once("connect",function(){clearTimeout(self.connectTimeoutTimer);
fn&&typeof fn=="function"&&fn()})});return this};Socket.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var self=this;this.heartbeatTimeoutTimer=setTimeout(function(){self.transport.onClose()},this.heartbeatTimeout)};Socket.prototype.packet=function(data){if(this.connected&&!this.doBuffer)this.transport.packet(data);else this.buffer.push(data);return this};Socket.prototype.setBuffer=function(v){this.doBuffer=
v;if(!v&&this.connected&&this.buffer.length)if(!this.options["manualFlush"])this.flushBuffer()};Socket.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};Socket.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open)this.of("").packet({type:"disconnect"});this.onDisconnect("booted")}return this};Socket.prototype.disconnectSync=function(){var xhr=io.util.request();var uri=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,
this.options.resource,io.protocol,"",this.sessionid].join("/")+"/?disconnect=1";xhr.open("GET",uri,false);xhr.send(null);this.onDisconnect("booted")};Socket.prototype.isXDomain=function(){var port=global.location.port||("https:"==global.location.protocol?443:80);return this.options.host!==global.location.hostname||this.options.port!=port};Socket.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer)this.setBuffer(false);this.emit("connect")}};
Socket.prototype.onOpen=function(){this.open=true};Socket.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};Socket.prototype.onPacket=function(packet){this.of(packet.endpoint).onPacket(packet)};Socket.prototype.onError=function(err){if(err&&err.advice)if(err.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect)this.reconnect()}this.publish("error",err&&err.reason?err.reason:err)};Socket.prototype.onDisconnect=function(reason){var wasConnected=
this.connected,wasConnecting=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(wasConnected||wasConnecting){this.transport.close();this.transport.clearTimeouts();if(wasConnected){this.publish("disconnect",reason);if("booted"!=reason&&this.options.reconnect&&!this.reconnecting)this.reconnect()}}};Socket.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var self=this,maxAttempts=this.options["max reconnection attempts"],
tryMultiple=this.options["try multiple transports"],limit=this.options["reconnection limit"];function reset(){if(self.connected){for(var i in self.namespaces)if(self.namespaces.hasOwnProperty(i)&&""!==i)self.namespaces[i].packet({type:"connect"});self.publish("reconnect",self.transport.name,self.reconnectionAttempts)}clearTimeout(self.reconnectionTimer);self.removeListener("connect_failed",maybeReconnect);self.removeListener("connect",maybeReconnect);self.reconnecting=false;delete self.reconnectionAttempts;
delete self.reconnectionDelay;delete self.reconnectionTimer;delete self.redoTransports;self.options["try multiple transports"]=tryMultiple}function maybeReconnect(){if(!self.reconnecting)return;if(self.connected)return reset();if(self.connecting&&self.reconnecting)return self.reconnectionTimer=setTimeout(maybeReconnect,1E3);if(self.reconnectionAttempts++>=maxAttempts)if(!self.redoTransports){self.on("connect_failed",maybeReconnect);self.options["try multiple transports"]=true;self.transports=self.origTransports;
self.transport=self.getTransport();self.redoTransports=true;self.connect()}else{self.publish("reconnect_failed");reset()}else{if(self.reconnectionDelay<limit)self.reconnectionDelay*=2;self.connect();self.publish("reconnecting",self.reconnectionDelay,self.reconnectionAttempts);self.reconnectionTimer=setTimeout(maybeReconnect,self.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(maybeReconnect,this.reconnectionDelay);this.on("connect",maybeReconnect)}})("undefined"!=
typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.SocketNamespace=SocketNamespace;function SocketNamespace(socket,name){this.socket=socket;this.name=name||"";this.flags={};this.json=new Flag(this,"json");this.ackPackets=0;this.acks={}}io.util.mixin(SocketNamespace,io.EventEmitter);SocketNamespace.prototype.$emit=io.EventEmitter.prototype.emit;SocketNamespace.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};SocketNamespace.prototype.packet=
function(packet){packet.endpoint=this.name;this.socket.packet(packet);this.flags={};return this};SocketNamespace.prototype.send=function(data,fn){var packet={type:this.flags.json?"json":"message",data:data};if("function"==typeof fn){packet.id=++this.ackPackets;packet.ack=true;this.acks[packet.id]=fn}return this.packet(packet)};SocketNamespace.prototype.emit=function(name){var args=Array.prototype.slice.call(arguments,1),lastArg=args[args.length-1],packet={type:"event",name:name};if("function"==typeof lastArg){packet.id=
++this.ackPackets;packet.ack="data";this.acks[packet.id]=lastArg;args=args.slice(0,args.length-1)}packet.args=args;return this.packet(packet)};SocketNamespace.prototype.disconnect=function(){if(this.name==="")this.socket.disconnect();else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};SocketNamespace.prototype.onPacket=function(packet){var self=this;function ack(){self.packet({type:"ack",args:io.util.toArray(arguments),ackId:packet.id})}switch(packet.type){case "connect":this.$emit("connect");
break;case "disconnect":if(this.name==="")this.socket.onDisconnect(packet.reason||"booted");else this.$emit("disconnect",packet.reason);break;case "message":case "json":var params=["message",packet.data];if(packet.ack=="data")params.push(ack);else if(packet.ack)this.packet({type:"ack",ackId:packet.id});this.$emit.apply(this,params);break;case "event":var params=[packet.name].concat(packet.args);if(packet.ack=="data")params.push(ack);this.$emit.apply(this,params);break;case "ack":if(this.acks[packet.ackId]){this.acks[packet.ackId].apply(this,
packet.args);delete this.acks[packet.ackId]}break;case "error":if(packet.advice)this.socket.onError(packet);else if(packet.reason=="unauthorized")this.$emit("connect_failed",packet.reason);else this.$emit("error",packet.reason);break}};function Flag(nsp,name){this.namespace=nsp;this.name=name}Flag.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};Flag.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,
arguments)}})("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports.websocket=WS;function WS(socket){io.Transport.apply(this,arguments)}io.util.inherit(WS,io.Transport);WS.prototype.name="websocket";WS.prototype.open=function(){var query=io.util.query(this.socket.options.query),self=this,Socket;if(!Socket)Socket=global.MozWebSocket||global.WebSocket;this.websocket=new Socket(this.prepareUrl()+query);this.websocket.onopen=function(){self.onOpen();
self.socket.setBuffer(false)};this.websocket.onmessage=function(ev){self.onData(ev.data)};this.websocket.onclose=function(){self.onClose();self.socket.setBuffer(true)};this.websocket.onerror=function(e){self.onError(e)};return this};if(io.util.ua.iDevice)WS.prototype.send=function(data){var self=this;setTimeout(function(){self.websocket.send(data)},0);return this};else WS.prototype.send=function(data){this.websocket.send(data);return this};WS.prototype.payload=function(arr){for(var i=0,l=arr.length;i<
l;i++)this.packet(arr[i]);return this};WS.prototype.close=function(){this.websocket.close();return this};WS.prototype.onError=function(e){this.socket.onError(e)};WS.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};WS.check=function(){return"WebSocket"in global&&!("__addTask"in WebSocket)||"MozWebSocket"in global};WS.xdomainCheck=function(){return true};io.transports.push("websocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,
this);(function(exports,io){exports.flashsocket=Flashsocket;function Flashsocket(){io.Transport.websocket.apply(this,arguments)}io.util.inherit(Flashsocket,io.Transport.websocket);Flashsocket.prototype.name="flashsocket";Flashsocket.prototype.open=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.open.apply(self,args)});return this};Flashsocket.prototype.send=function(){var self=this,args=arguments;WebSocket.__addTask(function(){io.Transport.websocket.prototype.send.apply(self,
args)});return this};Flashsocket.prototype.close=function(){WebSocket.__tasks.length=0;io.Transport.websocket.prototype.close.call(this);return this};Flashsocket.prototype.ready=function(socket,fn){function init(){var options=socket.options,port=options["flash policy port"],path=["http"+(options.secure?"s":"")+":/",options.host+":"+options.port,options.resource,"static/flashsocket","WebSocketMain"+(socket.isXDomain()?"Insecure":"")+".swf"];if(!Flashsocket.loaded){if(typeof WEB_SOCKET_SWF_LOCATION===
"undefined")WEB_SOCKET_SWF_LOCATION=path.join("/");if(port!==843)WebSocket.loadFlashPolicyFile("xmlsocket://"+options.host+":"+port);WebSocket.__initialize();Flashsocket.loaded=true}fn.call(self)}var self=this;if(document.body)return init();io.util.load(init)};Flashsocket.check=function(){if(!swfobject)return false;var ok=swfobject.getFlashPlayerVersion().major>=10;if(ok)flashWebSocket(true);return ok};Flashsocket.xdomainCheck=function(){return true};if(typeof window!="undefined")WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=
true;io.transports.push("flashsocket")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);if("undefined"!=typeof window)var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&
typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,
"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof O[["Active"].concat("Object").join("X")]!=D)try{var ad=new (window[["Active"].concat("Object").join("X")])(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,
mac:ac}}(),k=function(){if(!M.w3)return;if(typeof j.readyState!=D&&j.readyState=="complete"||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))f();if(!J){if(typeof j.addEventListener!=D)j.addEventListener("DOMContentLoaded",f,false);if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top)(function(){if(J)return;try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}if(M.wk)(function(){if(J)return;
if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})();s(f)}}();function f(){if(J)return;try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++)U[Y]()}function K(X){if(J)X();else U[U.length]=X}function s(Y){if(typeof O.addEventListener!=D)O.addEventListener("load",Y,false);else if(typeof j.addEventListener!=D)j.addEventListener("load",Y,false);else if(typeof O.attachEvent!=
D)i(O,"onload",Y);else if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else O.onload=Y}function h(){if(T)V();else H()}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else if(Y<10){Y++;setTimeout(arguments.callee,10);
return}X.removeChild(aa);Z=null;H()})()}else H()}function H(){var ag=o.length;if(ag>0)for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae)if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class"))ai.styleclass=
ae.getAttribute("class");if(ae.getAttribute("align"))ai.align=ae.getAttribute("align");var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++)if(X[ad].getAttribute("name").toLowerCase()!="movie")ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value");P(ai,ah,Y,ab)}else{p(ae);if(ab)ab(aa)}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT")if(typeof Y.SetVariable!=
D)X=Y;else{var Z=Y.getElementsByTagName(r)[0];if(Z)X=Z}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)aa.width="310";if(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)aa.height="137";j.title=j.title.slice(0,47)+" - Flash Player Installation";
var ad=M.ie&&M.win?["Active"].concat("").join("X"):"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D)ab.flashvars+="&"+ac;else ab.flashvars=ac;if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4)ae.parentNode.removeChild(ae);else setTimeout(arguments.callee,10)})()}u(aa,ab,X)}}function p(Y){if(M.ie&&
M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4)Y.parentNode.removeChild(Y);else setTimeout(arguments.callee,10)})()}else Y.parentNode.replaceChild(g(Y),Y)}function g(ab){var aa=C("div");if(M.win&&M.ie)aa.innerHTML=ab.innerHTML;else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++)if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==
8))aa.appendChild(ad[Z].cloneNode(true))}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312)return X;if(aa){if(typeof ai.id==D)ai.id=Y;if(M.ie&&M.win){var ah="";for(var ae in ai)if(ai[ae]!=Object.prototype[ae])if(ae.toLowerCase()=="data")ag.movie=ai[ae];else if(ae.toLowerCase()=="styleclass")ah+=' class="'+ai[ae]+'"';else if(ae.toLowerCase()!="classid")ah+=" "+ae+'="'+ai[ae]+'"';var af="";for(var ad in ag)if(ag[ad]!=Object.prototype[ad])af+='<param name="'+ad+'" value="'+ag[ad]+'" />';
aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai)if(ai[ac]!=Object.prototype[ac])if(ac.toLowerCase()=="styleclass")Z.setAttribute("class",ai[ac]);else if(ac.toLowerCase()!="classid")Z.setAttribute(ac,ai[ac]);for(var ab in ag)if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie")e(Z,ab,ag[ab]);aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=
C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT")if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4)b(Y);else setTimeout(arguments.callee,10)})()}else X.parentNode.removeChild(X)}function b(Z){var Y=c(Z);if(Y){for(var X in Y)if(typeof Y[X]=="function")Y[X]=null;Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}
function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac)return;var aa=j.getElementsByTagName("head")[0];if(!aa)return;var X=ad&&typeof ad=="string"?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",
X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0)n=j.styleSheets[j.styleSheets.length-1];G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r)n.addRule(ac,Y)}else if(n&&typeof j.createTextNode!=D)n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}function w(Z,X){if(!m)return;var Y=X?"visible":"hidden";if(J&&c(Z))c(Z).style.visibility=Y;else v("#"+Z,"visibility:"+Y)}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):
Y}var d=function(){if(M.ie&&M.win)window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++)I[ab][0].detachEvent(I[ab][1],I[ab][2]);var Z=N.length;for(var aa=0;aa<Z;aa++)y(N[aa]);for(var Y in M)M[Y]=null;M=null;for(var X in swfobject)swfobject[X]=null;swfobject=null})}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else if(Z)Z({success:false,id:ab})},getObjectById:function(X){if(M.w3)return z(X)},
embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r)for(var al in af)aj[al]=af[al];aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r)for(var ak in ad)am[ak]=ad[ak];if(Z&&typeof Z===r)for(var ai in Z)if(typeof am.flashvars!=D)am.flashvars+="&"+ai+"="+Z[ai];else am.flashvars=ai+"="+Z[ai];if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah)w(ah,true);X.success=
true;X.ref=an}else if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else w(ah,true);if(ac)ac(X)})}else if(ac)ac(X)},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3)return u(Z,Y,X);else return undefined},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A())P(Z,aa,X,Y)},removeSWF:function(X){if(M.w3)y(X)},createCSS:function(aa,Z,Y,X){if(M.w3)v(aa,Z,Y,X)},addDomLoadEvent:K,
addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z))Z=Z.split("?")[1];if(aa==null)return L(Z);var Y=Z.split("&");for(var X=0;X<Y.length;X++)if(Y[X].substring(0,Y[X].indexOf("="))==aa)return L(Y[X].substring(Y[X].indexOf("=")+1))}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win)l.style.display="block"}if(E)E(B)}a=false}}}}();function flashWebSocket(force){if(!force&&
("undefined"==typeof window||window.WebSocket))return;var console=window.console;if(!console||!console.log||!console.error)console={log:function(){},error:function(){}};if(!swfobject.hasFlashPlayerVersion("10.0.0")){console.error("Flash Player >= 10.0.0 is required.");return}if(location.protocol=="file:")console.error("WARNING: web-socket-js doesn't work in file:///... URL "+"unless you set Flash Security Settings properly. "+"Open the page via Web server i.e. http://...");WebSocket=function(url,
protocols,proxyHost,proxyPort,headers){var self=this;self.__id=WebSocket.__nextId++;WebSocket.__instances[self.__id]=self;self.readyState=WebSocket.CONNECTING;self.bufferedAmount=0;self.__events={};if(!protocols)protocols=[];else if(typeof protocols=="string")protocols=[protocols];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(self.__id,url,protocols,proxyHost||null,proxyPort||0,headers||null)})},0)};WebSocket.prototype.send=function(data){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";
var result=WebSocket.__flash.send(this.__id,encodeURIComponent(data));if(result<0)return true;else{this.bufferedAmount+=result;return false}};WebSocket.prototype.close=function(){if(this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING)return;this.readyState=WebSocket.CLOSING;WebSocket.__flash.close(this.__id)};WebSocket.prototype.addEventListener=function(type,listener,useCapture){if(!(type in this.__events))this.__events[type]=[];this.__events[type].push(listener)};WebSocket.prototype.removeEventListener=
function(type,listener,useCapture){if(!(type in this.__events))return;var events=this.__events[type];for(var i=events.length-1;i>=0;--i)if(events[i]===listener){events.splice(i,1);break}};WebSocket.prototype.dispatchEvent=function(event){var events=this.__events[event.type]||[];for(var i=0;i<events.length;++i)events[i](event);var handler=this["on"+event.type];if(handler)handler(event)};WebSocket.prototype.__handleEvent=function(flashEvent){if("readyState"in flashEvent)this.readyState=flashEvent.readyState;
if("protocol"in flashEvent)this.protocol=flashEvent.protocol;var jsEvent;if(flashEvent.type=="open"||flashEvent.type=="error")jsEvent=this.__createSimpleEvent(flashEvent.type);else if(flashEvent.type=="close")jsEvent=this.__createSimpleEvent("close");else if(flashEvent.type=="message"){var data=decodeURIComponent(flashEvent.message);jsEvent=this.__createMessageEvent("message",data)}else throw"unknown event type: "+flashEvent.type;this.dispatchEvent(jsEvent)};WebSocket.prototype.__createSimpleEvent=
function(type){if(document.createEvent&&window.Event){var event=document.createEvent("Event");event.initEvent(type,false,false);return event}else return{type:type,bubbles:false,cancelable:false}};WebSocket.prototype.__createMessageEvent=function(type,data){if(document.createEvent&&window.MessageEvent&&!window.opera){var event=document.createEvent("MessageEvent");event.initMessageEvent("message",false,false,data,null,null,window,null);return event}else return{type:type,data:data,bubbles:false,cancelable:false}};
WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__flash=null;WebSocket.__instances={};WebSocket.__tasks=[];WebSocket.__nextId=0;WebSocket.loadFlashPolicyFile=function(url){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(url)})};WebSocket.__initialize=function(){if(WebSocket.__flash)return;if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(!window.WEB_SOCKET_SWF_LOCATION){console.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");
return}var container=document.createElement("div");container.id="webSocketContainer";container.style.position="absolute";if(WebSocket.__isFlashLite()){container.style.left="0px";container.style.top="0px"}else{container.style.left="-100px";container.style.top="-100px"}var holder=document.createElement("div");holder.id="webSocketFlash";container.appendChild(holder);document.body.appendChild(container);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:true,
swliveconnect:true,allowScriptAccess:"always"},null,function(e){if(!e.success)console.error("[WebSocket] swfobject.embedSWF failed")})};WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var i=0;i<WebSocket.__tasks.length;++i)WebSocket.__tasks[i]();WebSocket.__tasks=[]},0)};WebSocket.__onFlashEvent=function(){setTimeout(function(){try{var events=
WebSocket.__flash.receiveEvents();for(var i=0;i<events.length;++i)WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i])}catch(e){console.error(e)}},0);return true};WebSocket.__log=function(message){console.log(decodeURIComponent(message))};WebSocket.__error=function(message){console.error(decodeURIComponent(message))};WebSocket.__addTask=function(task){if(WebSocket.__flash)task();else WebSocket.__tasks.push(task)};WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return false;
var mimeType=window.navigator.mimeTypes["application/x-shockwave-flash"];if(!mimeType||!mimeType.enabledPlugin||!mimeType.enabledPlugin.filename)return false;return mimeType.enabledPlugin.filename.match(/flashlite/i)?true:false};if(!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION)if(window.addEventListener)window.addEventListener("load",function(){WebSocket.__initialize()},false);else window.attachEvent("onload",function(){WebSocket.__initialize()})}flashWebSocket();(function(exports,io,global){exports.XHR=
XHR;function XHR(socket){if(!socket)return;io.Transport.apply(this,arguments);this.sendBuffer=[]}io.util.inherit(XHR,io.Transport);XHR.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};XHR.prototype.payload=function(payload){var msgs=[];for(var i=0,l=payload.length;i<l;i++)msgs.push(io.parser.encodePacket(payload[i]));this.send(io.parser.encodePayload(msgs))};XHR.prototype.send=function(data){this.post(data);return this};function empty(){}
XHR.prototype.post=function(data){var self=this;this.socket.setBuffer(true);function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;self.posting=false;if(this.status==200)self.socket.setBuffer(false);else self.onClose()}}function onload(){this.onload=empty;self.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(global.XDomainRequest&&this.sendXHR instanceof XDomainRequest)this.sendXHR.onload=this.sendXHR.onerror=onload;else this.sendXHR.onreadystatechange=stateChange;
this.sendXHR.send(data)};XHR.prototype.close=function(){this.onClose();return this};XHR.prototype.request=function(method){var req=io.util.request(this.socket.isXDomain()),query=io.util.query(this.socket.options.query,"t="+ +new Date);req.open(method||"GET",this.prepareUrl()+query,true);if(method=="POST")try{if(req.setRequestHeader)req.setRequestHeader("Content-type","text/plain;charset=UTF-8");else req.contentType="text/plain"}catch(e){}return req};XHR.prototype.scheme=function(){return this.socket.options.secure?
"https":"http"};XHR.check=function(socket,xdomain){try{var request=io.util.request(xdomain),usesXDomReq=global.XDomainRequest&&request instanceof XDomainRequest,socketProtocol=socket&&socket.options&&socket.options.secure?"https:":"http:",isXProtocol=global.location&&socketProtocol!=global.location.protocol;if(request&&!(usesXDomReq&&isXProtocol))return true}catch(e){}return false};XHR.xdomainCheck=function(socket){return XHR.check(socket,true)}})("undefined"!=typeof io?io.Transport:module.exports,
"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io){exports.htmlfile=HTMLFile;function HTMLFile(socket){io.Transport.XHR.apply(this,arguments)}io.util.inherit(HTMLFile,io.Transport.XHR);HTMLFile.prototype.name="htmlfile";HTMLFile.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var iframeC=this.doc.createElement("div");iframeC.className=
"socketio";this.doc.body.appendChild(iframeC);this.iframe=this.doc.createElement("iframe");iframeC.appendChild(this.iframe);var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+query;io.util.on(window,"unload",function(){self.destroy()})};HTMLFile.prototype._=function(data,doc){this.onData(data);try{var script=doc.getElementsByTagName("script")[0];script.parentNode.removeChild(script)}catch(e){}};HTMLFile.prototype.destroy=function(){if(this.iframe){try{this.iframe.src=
"about:blank"}catch(e){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};HTMLFile.prototype.close=function(){this.destroy();return io.Transport.XHR.prototype.close.call(this)};HTMLFile.check=function(socket){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window)try{var a=new (window[["Active"].concat("Object").join("X")])("htmlfile");return a&&io.Transport.XHR.check(socket)}catch(e){}return false};HTMLFile.xdomainCheck=function(){return false};
io.transports.push("htmlfile")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);(function(exports,io,global){exports["xhr-polling"]=XHRPolling;function XHRPolling(){io.Transport.XHR.apply(this,arguments)}io.util.inherit(XHRPolling,io.Transport.XHR);io.util.merge(XHRPolling,io.Transport.XHR);XHRPolling.prototype.name="xhr-polling";XHRPolling.prototype.heartbeats=function(){return false};XHRPolling.prototype.open=function(){var self=this;io.Transport.XHR.prototype.open.call(self);
return false};function empty(){}XHRPolling.prototype.get=function(){if(!this.isOpen)return;var self=this;function stateChange(){if(this.readyState==4){this.onreadystatechange=empty;if(this.status==200){self.onData(this.responseText);self.get()}else self.onClose()}}function onload(){this.onload=empty;this.onerror=empty;self.retryCounter=1;self.onData(this.responseText);self.get()}function onerror(){self.retryCounter++;if(!self.retryCounter||self.retryCounter>3)self.onClose();else self.get()}this.xhr=
this.request();if(global.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=onload;this.xhr.onerror=onerror}else this.xhr.onreadystatechange=stateChange;this.xhr.send(null)};XHRPolling.prototype.onClose=function(){io.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=empty;try{this.xhr.abort()}catch(e){}this.xhr=null}};XHRPolling.prototype.ready=function(socket,fn){var self=this;io.util.defer(function(){fn.call(self)})};
io.transports.push("xhr-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);(function(exports,io,global){var indicator=global.document&&"MozAppearance"in global.document.documentElement.style;exports["jsonp-polling"]=JSONPPolling;function JSONPPolling(socket){io.Transport["xhr-polling"].apply(this,arguments);this.index=io.j.length;var self=this;io.j.push(function(msg){self._(msg)})}io.util.inherit(JSONPPolling,io.Transport["xhr-polling"]);
JSONPPolling.prototype.name="jsonp-polling";JSONPPolling.prototype.post=function(data){var self=this,query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="socketio_iframe_"+this.index,iframe;form.className="socketio";form.style.position="absolute";form.style.top="0px";form.style.left="0px";form.style.display="none";form.target=id;form.method="POST";form.setAttribute("accept-charset",
"utf-8");area.name="d";form.appendChild(area);document.body.appendChild(form);this.form=form;this.area=area}this.form.action=this.prepareUrl()+query;function complete(){initIframe();self.socket.setBuffer(false)}function initIframe(){if(self.iframe)self.form.removeChild(self.iframe);try{iframe=document.createElement('<iframe name="'+self.iframeId+'">')}catch(e){iframe=document.createElement("iframe");iframe.name=self.iframeId}iframe.id=self.iframeId;self.form.appendChild(iframe);self.iframe=iframe}
initIframe();this.area.value=io.JSON.stringify(data);try{this.form.submit()}catch(e){}if(this.iframe.attachEvent)iframe.onreadystatechange=function(){if(self.iframe.readyState=="complete")complete()};else this.iframe.onload=complete;this.socket.setBuffer(true)};JSONPPolling.prototype.get=function(){var self=this,script=document.createElement("script"),query=io.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=
null}script.async=true;script.src=this.prepareUrl()+query;script.onerror=function(){self.onClose()};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt);this.script=script;if(indicator)setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe);document.body.removeChild(iframe)},100)};JSONPPolling.prototype._=function(msg){this.onData(msg);if(this.isOpen)this.get();return this};JSONPPolling.prototype.ready=
function(socket,fn){var self=this;if(!indicator)return fn.call(this);io.util.load(function(){fn.call(self)})};JSONPPolling.check=function(){return"document"in global};JSONPPolling.xdomainCheck=function(){return true};io.transports.push("jsonp-polling")})("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(typeof define==="function"&&define.amd)define([],function(){return io})})();
(function(window,undefined){var i,cachedruns,Expr,getText,isXML,compile,outermostContext,recompare,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,support={},dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=false,sortOrder=function(){return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,
slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+
attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),
"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rsibling=/[\x20\t\r\n\f]*[+~]/,
rnative=/^[^{]+\{\s*\[native code/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,runescape=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,funescape=function(_,escaped){var high="0x"+escaped-65536;return high!==high?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),
preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]);target.length=j-1}}}function isNative(fn){return rnative.test(fn+"")}function createCache(){var cache,keys=[];return cache=function(key,value){if(keys.push(key+=" ")>Expr.cacheLength)delete cache[keys.shift()];return cache[key]=value}}function markFunction(fn){fn[expando]=
true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{div=null}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;results=results||[];if(!selector||typeof selector!=="string")return results;if((nodeType=context.nodeType)!==1&&nodeType!==9)return[];if(documentIsHTML&&
!seed){if(match=rquickExpr.exec(selector))if(m=match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else return results}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,
context.getElementsByClassName(m));return results}if(support.qsa&&!rbuggyQSA.test(selector)){old=true;nid=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$&");else context.setAttribute("id",nid);nid="[id='"+nid+"'] ";i=groups.length;while(i--)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&context.parentNode||context;
newSelector=groups.join(",")}if(newSelector)try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:
preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement)return document;document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.attributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"});support.getElementsByClassName=assert(function(div){div.innerHTML=
"<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length)return false;div.lastChild.className="e";return div.getElementsByClassName("e").length===2});support.getByName=assert(function(div){div.id=expando+0;div.appendChild(document.createElement("a")).setAttribute("name",expando);div.appendChild(document.createElement("i")).setAttribute("name",expando);docElem.appendChild(div);var pass=doc.getElementsByName&&doc.getElementsByName(expando).length===
2+doc.getElementsByName(expando+0).length;docElem.removeChild(div);return pass});support.sortDetached=assert(function(div1){return div1.compareDocumentPosition&&div1.compareDocumentPosition(document.createElement("div"))&1});Expr.attrHandle=assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"})?{}:{"href":function(elem){return elem.getAttribute("href",2)},"type":function(elem){return elem.getAttribute("type")}};
if(support.getByName){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==
strundefined&&m.getAttributeNode("id").value===id?[m]:undefined:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);
if(tag==="*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};Expr.find["NAME"]=support.getByName&&function(tag,context){if(typeof context.getElementsByName!==strundefined)return context.getElementsByName(name)};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[":focus"];if(support.qsa=
isNative(doc.querySelectorAll)){assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});assert(function(div){var input=document.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("i","");if(div.querySelectorAll("[i^='']").length)rbuggyQSA.push("[*^$]="+
whitespace+"*(?:\"\"|'')");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=isNative(matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));
rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));contains=isNative(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=
true;return 0}var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(compare){if(compare&1||recompare&&b.compareDocumentPosition(a)===compare){if(a===doc||contains(preferredDoc,a))return-1;if(b===doc||contains(preferredDoc,b))return 1;return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1}return a.compareDocumentPosition?-1:1}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=
true;return 0}else if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:0;else if(aup===bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return document};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&!rbuggyQSA.test(expr))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,
name){var val;if((elem.ownerDocument||elem)!==document)setDocument(elem);if(documentIsHTML)name=name.toLowerCase();if(val=Expr.attrHandle[name])return val(elem);if(!documentIsHTML||support.attributes)return elem.getAttribute(name);return((val=elem.getAttributeNode(name))||elem.getAttribute(name))&&elem[name]===true?name:val&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=
[],j=0,i=0;hasDuplicate=!support.detectDuplicates;recompare=!support.sortDetached;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++])if(elem===results[i])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}return results};function siblingCheck(a,b){var cur=b&&a,diff=cur&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=
elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}getText=
Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)for(;node=elem[i];i++)ret+=getText(node);else if(nodeType===1||nodeType===9||nodeType===11)if(typeof elem.textContent==="string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,find:{},relative:{">":{dir:"parentNode",
first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~=")match[3]=" "+match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||
match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0]))return null;if(match[4])match[2]=match[4];else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,
3)}},filter:{"TAG":function(nodeName){if(nodeName==="*")return function(){return true};nodeName=nodeName.replace(runescape,funescape).toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&
elem.getAttribute("class")||"")})},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null)return operator==="!=";if(!operator)return true;result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===
check||result.slice(0,check.length+1)===check+"-":false}},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=
elem;while(node=node[dir])if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)return false;start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if(node.nodeType===
1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,
argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=
[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||
elem.innerText||getText(elem)).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||""))Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=
window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===docElem},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&
!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeName>"@"||elem.nodeType===3||elem.nodeType===4)return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();
return name==="input"&&elem.type==="button"||name==="button"},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===elem.type)},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,
length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);
return matchIndexes})}};for(i in{radio:true,checkbox:true,file:true,password:true,image:true})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||
soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,
groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml)while(elem=
elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===true||data===cachedruns)return data===true}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===true)return true}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,
context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=
setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,
matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=
elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),
matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=
++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1)).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=
function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1;if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++])if(matcher(elem,
context,xml)){results.push(elem);break}if(outermost){dirruns=dirrunsUnique;cachedruns=++matcherCachedRuns}}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>
0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group)group=tokenize(selector);i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=
compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed)if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=
(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context)return results;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,
seed);return results}break}}}compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector));return results}Expr.pseudos["nth"]=Expr.pseudos["eq"];function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;support.sortStable=expando.split("").sort(sortOrder).join("")===expando;setDocument();[0,0].sort(sortOrder);support.detectDuplicates=hasDuplicate;if(typeof define==="function"&&define.amd)define(function(){return Sizzle});else window.Sizzle=
Sizzle})(window);if(typeof JSON!=="object")JSON={};
(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=
gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function")value=value.toJSON(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(value.length!==undefined&&value.slice!==undefined){length=value.length;for(i=0;i<length;i+=1)partial[i]=
str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1)if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+
gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};if(typeof JSON.parse!=="function")JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();var com;
(function(com){(function(utils){var Cookie=function(){function Cookie(){}Cookie.set=function set(name,value,expires,path,domain,secure){if(typeof name!="string"||name=="")return;var today=new Date;today.setTime(today.getTime());if(expires){expires=expires*1E3;var expireDate=new Date(today.getTime()+expires)}document.cookie=name+"="+encodeURIComponent(value)+(expires?";expires="+expireDate.toUTCString():"")+(path?";path="+path:"")+(domain?";domain="+domain:"")+(secure?";secure":"")};Cookie.get=function get(name){var allCookies=
document.cookie.split(";"),tempCookie=[],cookieName="",cookieValue="",cookieFound=false;for(var i=0;i<allCookies.length;i++){tempCookie=allCookies[i].split("=");cookieName=tempCookie[0].replace(/^\s+|\s+$/g,"");if(cookieName==name){cookieFound=true;if(tempCookie.length>1)cookieValue=decodeURIComponent(tempCookie[1].replace(/^\s+|\s+$/g,""));return cookieValue;break}tempCookie=undefined;cookieName=""}if(!cookieFound)return undefined};Cookie.remove=function remove(name,path,domain){if(Cookie.get(name))document.cookie=
name+"="+(path?";path="+path:"")+(domain?";domain="+domain:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"};Cookie.isCookieEnabled=function isCookieEnabled(){var cookieEnabled=navigator.cookieEnabled?true:false;if(navigator.cookieEnabled===undefined&&!cookieEnabled){Cookie.set("test","true");var cookieEnabled=Cookie.get("test")?true:false;Cookie.remove("test")}return cookieEnabled};return Cookie}();utils.Cookie=Cookie})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){var cookieName="";var applicationName="";var debugMode=false;function setlog(config){cookieName=config.cookieName;applicationName=config.applicationName;debugMode=config.debugMode}com.setlog=setlog;function log(){var message=[];for(var _i=0;_i<arguments.length-0;_i++)message[_i]=arguments[_i+0];if(typeof window.console!=="undefined"&&(com.utils.Cookie.get(cookieName)=="1"||debugMode))window.console.log("TS:",applicationName,message,"\n")}com.log=log})(com||(com={}));var com;
(function(com){(function(utils){var ArrayUtils=function(){function ArrayUtils(){}ArrayUtils.indexOf=function indexOf(object,search){if(Array.prototype.hasOwnProperty("indexOf"))return object.indexOf(search);else{var l=object.length;for(var i=0;i<l;i++)if(object[i]===search)return i;return-1}};ArrayUtils.keyOf=function keyOf(object,search){for(var i in object)if(object[i]==search)return i};ArrayUtils.isArray=function isArray(v){return toString.apply(v)==="[object Array]"};ArrayUtils.isArrayLike=function isArrayLike(obj){var length=
obj.length,type=typeof obj;if(obj!=null&&obj==obj.window)return false;if(obj.nodeType===1&&length)return true;return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1).toString()in obj};ArrayUtils.each=function each(obj,callback,args){var value,i,length=obj.length,isArray=ArrayUtils.isArrayLike(obj);if(args)if(isArray)for(i=0;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(i=
0;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false)break}return obj};ArrayUtils.getObjectLength=function getObjectLength(obj){var length=0;for(var i in obj)length++;return length};ArrayUtils.mergeObject=function mergeObject(defaultObj,obj){var newObj={};for(var i in defaultObj)newObj[i]=defaultObj[i];for(var j in obj)newObj[j]=obj[j];return newObj};ArrayUtils.mergeArray=function mergeArray(defaultArray,
array){var l=array.length,i=defaultArray.length,j=0;if(typeof l==="number")for(;j<l;j++)defaultArray[i++]=array[j];else while(array[j]!==undefined)defaultArray[i++]=array[j++];defaultArray.length=i;return defaultArray};ArrayUtils.stringToJSON=function stringToJSON(str){var evalFunc=function(str){return(new Function("return "+str))()};var returnJSON=evalFunc(str);return returnJSON};return ArrayUtils}();utils.ArrayUtils=ArrayUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){})(com||(com={}));var com;
(function(com){(function(events){var EventDispatcher=function(){function EventDispatcher(){this._listeners=new Object;this._eventQueue=new Array;this._processingQueue=false}EventDispatcher.prototype.addEventListener=function(type_str,listening_obj,method_str,priority){if(type_str!=undefined&&listening_obj!=undefined&&method_str&&listening_obj[method_str]){if(this._listeners==undefined)this._listeners={};if(!this.isValidEvent(type_str))this._listeners[type_str]=[];if(this.isEventListener(type_str,
listening_obj,method_str))return;if(listening_obj[method_str]!=undefined)if(priority==null)this._listeners[type_str].push({type:type_str,listener_obj:listening_obj,listener_method:method_str});else if(typeof this._listeners[type_str][priority]!=="undefined")this._listeners[type_str].splice(priority,0,{type:type_str,listener_obj:listening_obj,listener_method:method_str});else this._listeners[type_str][priority]={type:type_str,listener_obj:listening_obj,listener_method:method_str}}else throw new Error("Missing event type or listener object reference: "+
method_str);};EventDispatcher.prototype.removeEventListener=function(type_str,listening_obj,method_str){var item;var eventItem;var listenerObj;var listenerMethod;var removeEntry;var eventArray;var previousLength;var removedItems;var eventObject;var currentObj;if(listening_obj!=undefined&&method_str&&listening_obj[method_str])if(type_str!=undefined){if(this.isValidEvent(type_str)){for(item in this._listeners[type_str]){listenerObj=this._listeners[type_str][item].listener_obj;listenerMethod=this._listeners[type_str][item].listener_method;
if(listenerObj==listening_obj){removeEntry=false;if(method_str.length>0){if(listenerMethod==method_str)removeEntry=true}else removeEntry=true;if(removeEntry==true){delete this._listeners[type_str][item];this._fixIndexing(this._listeners[type_str])}}}if(this._listeners[type_str].length<=0)delete this._listeners[type_str]}}else for(eventItem in this._listeners){eventArray=this._listeners[eventItem];previousLength=eventArray.length;removedItems=0;for(eventObject in eventArray){currentObj=eventArray[eventObject].listener_obj;
if(currentObj==listening_obj){removedItems++;delete this._listeners[eventItem][eventObject];this._fixIndexing(this._listeners[eventItem])}}if(removedItems>=previousLength)delete this._listeners[eventItem]}else throw new Error("Undefined listening object or method");};EventDispatcher.prototype.dispatchEvent=function(event_obj){if(event_obj.type!=undefined){if(this._listeners[event_obj.type]!=undefined){this._eventQueue.push(event_obj);if(!this._processingQueue){this._processingQueue=true;this.dispatchNextEvent()}}}else throw new Error("Undefined event type");
};EventDispatcher.prototype.dispatchNextEvent=function(){var obj;if(this._eventQueue.length>=1){var event_obj=this._eventQueue.shift();var listenerTypeList=this._listeners[event_obj.type];var n=listenerTypeList.length;for(obj=0;obj<n;obj++)if(listenerTypeList[obj]){var listener_obj=listenerTypeList[obj].listener_obj;var listener_method=String(listenerTypeList[obj].listener_method);var param_obj=listenerTypeList[obj].param_obj;if(event_obj.target==undefined)event_obj.target=this;event_obj.currentTarget=
this;listener_obj[listener_method].call(listener_obj,event_obj)}this.dispatchNextEvent()}else{this._eventQueue=new Array;this._processingQueue=false}};EventDispatcher.prototype.numberOfListeners=function(type_str){if(this.isValidEvent(type_str))return this._listeners[type_str].length;else return 0};EventDispatcher.prototype.isValidEvent=function(type_str){return this._listeners[type_str]!=undefined};EventDispatcher.prototype.isEventListener=function(type_str,listening_obj,method_str){var found=false;
var i;if(this._listeners[type_str]&&this._listeners[type_str].length>0)for(i=0;i<this._listeners[type_str].length;i++)if(typeof this._listeners[type_str][i]!=="undefined"&&listening_obj==this._listeners[type_str][i].listener_obj&&method_str==this._listeners[type_str][i].listener_method){found=true;break}return found};EventDispatcher.prototype.hasEventListener=function(type_str){return this._listeners[type_str]!=null};EventDispatcher.prototype._fixIndexing=function(sourceArray){sourceArray.sort();
var arrayLength=0;var item;for(item in sourceArray)if(sourceArray[item]==undefined||sourceArray[item]=="undefined")delete sourceArray[item];else arrayLength++;sourceArray.length=arrayLength};return EventDispatcher}();events.EventDispatcher=EventDispatcher})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){function getClassName(obj){var funcNameRegex=/function ([a-zA-Z0-9_\-$]+)/;var results=funcNameRegex.exec(obj.prototype.constructor.toString());return results&&results.length>1?results[1]:""}utils.getClassName=getClassName})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(core){var HUB=function(){function HUB(){this._table={};this._callStack={}}HUB.prototype.addHandler=function(event,classRef,callbackMethod){if(!event||event===""||classRef===null||callbackMethod===null)throw new Error("Parameter invalid!");else{var callbackObject={classRef:classRef,callbackMethod:callbackMethod};if(this._table[event]){if(com.utils.ArrayUtils.indexOf(this._table[event],callbackObject)===-1)this._table[event].push(callbackObject)}else this._table[event]=[callbackObject]}};
HUB.prototype.sendNote=function(caller,event){var args=[];for(var _i=0;_i<arguments.length-2;_i++)args[_i]=arguments[_i+2];if(!this._table[event])console.log("Notification does not have listeners:",event);else{this._callStack[event]=caller;var i,n;n=this._table[event].length;for(i=0;i<n;i++){var callbackObject=this._table[event][i];var args=Array.prototype["slice"].call(arguments);args.splice(0,2);callbackObject.classRef[callbackObject.callbackMethod].apply(callbackObject.classRef,args)}}};HUB.prototype.getLastCaller=
function(event){return this._callStack[event]};HUB.prototype.clearHandlers=function(event){if(!event||event==="")throw new Error("Parameter invalid!");else if(this._table[event])delete this._table[event];else console.log("Event does not have listeners.")};HUB.prototype.clearAllHandlers=function(){var i;for(i in this._table)delete this._table[i];this._table={}};return HUB}();core.HUB=HUB})(com.core||(com.core={}));var core=com.core})(com||(com={}));
var __extends=this.__extends||function(d,b){function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var com;
(function(com){(function(core){var BaseLogic=function(_super){__extends(BaseLogic,_super);function BaseLogic(){_super.call(this);this._inited=false}BaseLogic.prototype.inited=function(){return this._inited};BaseLogic.prototype.HUB=function(value){if(arguments.length){this._HUB=value;this.setup()}return this._HUB};BaseLogic.prototype.setup=function(){if(this._inited||!this._HUB)return false;this._inited=true;return true};return BaseLogic}(com.events.EventDispatcher);core.BaseLogic=BaseLogic})(com.core||
(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){(function(core){var ProjectBase=function(_super){__extends(ProjectBase,_super);function ProjectBase(){_super.call(this);this._logicList={};this._controllerList=[];this._HUB=new core.HUB}ProjectBase.prototype.init=function(){this._initLogics()};ProjectBase.prototype.addController=function(logic,controller){this._controllerList.push({logic:logic,controller:controller})};ProjectBase.prototype._initLogics=function(){var logic;var l=this._controllerList.length;var cName;var logicCName;var c;
for(var i=0;i<l;i++){c=this._controllerList[i];cName=com.utils.getClassName(c.logic);logicCName=cName.charAt(0).toLowerCase()+cName.substr(1);if(!this._logicList[logicCName]){logic=new c.logic;logic.HUB(this._HUB);this._logicList[logicCName]=logic}}};ProjectBase.prototype._registerControllers=function(){var c;var cont;var i;var l=this._controllerList.length;var cName;var logicCName;var s;var controller;for(var i=0;i<l;i++){c=this._controllerList[i];if(!c.controller)continue;controller=new c.controller;
for(s in this._logicList)if(this._logicList[s]instanceof c.logic){if(this._logicList[s]["controller"])this._logicList[s]["controller"](controller);else{var tmpName=com.utils.getClassName(c.controller);cName=tmpName.charAt(0).toLowerCase()+tmpName.slice(1);if(this._logicList[s][cName])this._logicList[s][cName](controller)}break}}};return ProjectBase}(com.events.EventDispatcher);core.ProjectBase=ProjectBase})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){(function(utils){var SingletonManager=function(){function SingletonManager(){}SingletonManager._instanceMap={};SingletonManager.getInstance=function getInstance(clazz){if(SingletonManager._instanceMap[clazz]==null)SingletonManager._instanceMap[clazz]=new clazz;return SingletonManager._instanceMap[clazz]};SingletonManager.setInstance=function setInstance(clazz){var args=[];for(var _i=0;_i<arguments.length-1;_i++)args[_i]=arguments[_i+1];if(SingletonManager._instanceMap[clazz]==null){var inst=
new clazz;inst.constructor.apply(inst,args);SingletonManager._instanceMap[clazz]=inst}};SingletonManager.contains=function contains(clazz){return SingletonManager._instanceMap[clazz]!=null};return SingletonManager}();utils.SingletonManager=SingletonManager})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(singletons){var URLProvider=function(){function URLProvider(){this._urlData={}}URLProvider.url=function url(name,replaceList,noFullUrl){if(typeof replaceList==="undefined")replaceList=null;if(typeof noFullUrl==="undefined")noFullUrl=false;return com.utils.SingletonManager.getInstance(URLProvider).getUrl(name,replaceList,noFullUrl)};URLProvider.replace=function replace(url,replaceList){if(!url)return url;for(var i in replaceList)url=url.split("{$"+i+"}").join(replaceList[i]);
return url};URLProvider.prototype.getUrl=function(name,replaceList,noFullUrl){if(typeof replaceList==="undefined")replaceList=null;if(typeof noFullUrl==="undefined")noFullUrl=false;if(!this._urlData)return null;var result=this._urlData[name]?this._urlData[name].url:"";result=URLProvider.replace(result,replaceList);var index=result.indexOf("://");if((index==-1||index>6)&&!noFullUrl)result=this._siteUrl+result;return result};URLProvider.prototype.urlData=function(value){if(arguments.length)this._urlData=
value;else return this._urlData};URLProvider.prototype.siteUrl=function(value){if(arguments.length){this._siteUrl=value;if(this._siteUrl.substr(this._siteUrl.length-1)!="/")this._siteUrl+="/"}else return this._siteUrl};return URLProvider}();singletons.URLProvider=URLProvider})(com.singletons||(com.singletons={}));var singletons=com.singletons})(com||(com={}));var com;
(function(com){(function(events){var Event=function(){function Event(type){this.type=type}Event.ACTIVATE="activate";Event.DEACTIVATE="deactivate";Event.COMPLETE="complete";Event.FAILED="failed";Event.CHANGE="change";Event.OPEN="open";Event.CLOSE="close";Event.REMOVE="remove";Event.SELECT="select";Event.RESIZE="resize";Event.ADDED="added";Event.ADDED_TO_STAGE="added";Event.REMOVED="removed";Event.POSITION_CHANGE="positionChange";Event.SUBMIT="onsubmit";Event.ERROR="onerror";Event.LOADED="onload";Event.PROGRESS=
"progress";Event.prototype.stopPropagation=function(){if(this.realEvent.stopPropagation)this.realEvent.stopPropagation();else this.realEvent.cancelBubble=true};return Event}();events.Event=Event})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var SocketConnectionEvent=function(_super){__extends(SocketConnectionEvent,_super);function SocketConnectionEvent(type,info){if(typeof info==="undefined")info={};_super.call(this,type);this.info=info}SocketConnectionEvent.CONNECTED="connected";SocketConnectionEvent.CONNECT_FAILED="connectFailed";SocketConnectionEvent.REJECTED="rejected";SocketConnectionEvent.CLOSED="closed";SocketConnectionEvent.ERROR="error";return SocketConnectionEvent}(events.Event);events.SocketConnectionEvent=
SocketConnectionEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var memberauction;(function(memberauction){var HUBNote=function(){function HUBNote(){}HUBNote.SEND_LINE="sendLine";HUBNote.SET_CHAT_MODE="setChatMode";HUBNote.REMAINING_TIME="remainingTime";HUBNote.AUCTION_JS_STATUS="auctionJSStatus";return HUBNote}();memberauction.HUBNote=HUBNote})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var ConfigChangeEvent=function(_super){__extends(ConfigChangeEvent,_super);function ConfigChangeEvent(type,value,oldValue){_super.call(this,type);this.value=value;this.oldValue=oldValue}ConfigChangeEvent.APPLET_URL="appletUrl";ConfigChangeEvent.STATUS="status";ConfigChangeEvent.USER_TYPE="userType";ConfigChangeEvent.MEMBER_ID="memberId";ConfigChangeEvent.CURRENT_MEMBER_ID="currentMemberId";ConfigChangeEvent.NEXT_AUCTION_TIME_STAMP="nextAuctionTimeStamp";ConfigChangeEvent.BID_COUNT=
"bidCount";ConfigChangeEvent.CURRENT_BID="currentBid";ConfigChangeEvent.REMANING_TIME="remainingTime";return ConfigChangeEvent}(com.events.Event);memberauction.ConfigChangeEvent=ConfigChangeEvent})(memberauction||(memberauction={}));var com;
(function(com){(function(events){var MouseEvent=function(_super){__extends(MouseEvent,_super);function MouseEvent(type){_super.call(this,type);this.delta=0;this.clientX=0;this.clientY=0}MouseEvent.CLICK="mouseClick";MouseEvent.DOUBLE_CLICK="mouseDoubleClick";MouseEvent.MOUSE_DOWN="mouseDown";MouseEvent.MOUSE_MOVE="mouseMove";MouseEvent.MOUSE_OUT="mouseOut";MouseEvent.MOUSE_OVER="mouseOver";MouseEvent.MOUSE_UP="mouseUp";MouseEvent.MOUSE_WHEEL="mouseWheel";MouseEvent.MOUSE_DRAG_END="mouseDragEnd";MouseEvent.MOUSE_DRAG_START=
"mouseDragEnd";return MouseEvent}(events.Event);events.MouseEvent=MouseEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var memberauction;
(function(memberauction){var AuctionStatus=function(){function AuctionStatus(){}AuctionStatus.OPEN="open";AuctionStatus.PENDING="pending";AuctionStatus.AUCTION_START="auctionStart";AuctionStatus.AUCTION_END="auctionEnd";AuctionStatus.AUCTION_IN_PROGRESS="auctionInProgress";return AuctionStatus}();memberauction.AuctionStatus=AuctionStatus})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var Config=function(_super){__extends(Config,_super);function Config(){_super.call(this);this._status=memberauction.AuctionStatus.PENDING;this._bidLimit=3;this._bidCount=0;this._gameBalance=0;this._privateBalance=0;this._memberId="";this._userType="";this._sessionId="m5ecf4bc0894213dcd625b0657a785f10";this._brandId="livejasmin";this._gmtOffset=0;this._timeFormat24=true}Config.prototype.setup=function(loaderObject){this.appletURL(loaderObject["memberauctionappleturl"]||{});
this.sessionId(loaderObject["sessionid"]||"");this.brandId(loaderObject["brandid"]||"livejasmin");this.gmtOffset(loaderObject["gmtoffset"]||0);this.timeFormat24(loaderObject["timeformat24"]==1);this.ip(loaderObject["ip"]||"");this.fmsApplication(loaderObject["fmsapplication"]||"twentysecauction");this.nodeIp(loaderObject["nodeip"]||"");this.nodeApplication(loaderObject["nodeapplication"]||"chat")};Config.prototype.status=function(value){if(arguments.length){var oldValue=this._status;this._status=
value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.STATUS,value,oldValue))}return this._status};Config.prototype.remainingTime=function(value){if(arguments.length){var oldValue=this._remainingTime;this._remainingTime=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.REMANING_TIME,value,oldValue))}return this._remainingTime};Config.prototype.currentBid=function(value){if(arguments.length){var oldValue=this._currentBid;
this._currentBid=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.CURRENT_BID,value,oldValue))}return this._currentBid};Config.prototype.auctionPrice=function(value){if(arguments.length)this._auctionPrice=value;return this._auctionPrice};Config.prototype.currentMemberId=function(value){if(arguments.length){var oldValue=this._currentMemberId;this._currentMemberId=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.CURRENT_MEMBER_ID,
value,oldValue))}return this._currentMemberId};Config.prototype.bidLimit=function(value){if(arguments.length)this._bidLimit=value;return this._bidLimit};Config.prototype.bidCount=function(value){if(arguments.length){var oldValue=this._bidCount;this._bidCount=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.BID_COUNT,value,oldValue))}return this._bidCount};Config.prototype.nextAuctionTimestamp=function(value){if(arguments.length){var oldValue=this._nextAuctionTimestamp;
this._nextAuctionTimestamp=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.NEXT_AUCTION_TIME_STAMP,value,oldValue))}return this._nextAuctionTimestamp};Config.prototype.nextAuctionPrice=function(value){if(arguments.length)this._nextAuctionPrice=value;return this._nextAuctionPrice};Config.prototype.prevAuctionPrice=function(value){if(arguments.length)this._prevAuctionPrice=value;return this._prevAuctionPrice};Config.prototype.endBid=function(value){if(arguments.length)this._endBid=
value;return this._endBid};Config.prototype.winnerMemberId=function(value){if(arguments.length)this._winnerMemberId=value;return this._winnerMemberId};Config.prototype.wonCredit=function(value){if(arguments.length)this._wonCredit=value;return this._wonCredit};Config.prototype.gameBalance=function(value){if(arguments.length)this._gameBalance=value;return this._gameBalance};Config.prototype.privateBalance=function(value){if(arguments.length)this._privateBalance=value;return this._privateBalance};Config.prototype.memberId=
function(value){if(arguments.length){var oldValue=this._memberId;this._memberId=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.MEMBER_ID,value,oldValue))}return this._memberId};Config.prototype.userType=function(value){if(arguments.length){var oldValue=this._userType;this._userType=value;this.dispatchEvent(new memberauction.ConfigChangeEvent(memberauction.ConfigChangeEvent.USER_TYPE,value,oldValue))}return this._userType};Config.prototype.sessionId=function(value){if(arguments.length)this._sessionId=
value;return this._sessionId};Config.prototype.brandId=function(value){if(arguments.length)this._brandId=value;return this._brandId};Config.prototype.gmtOffset=function(value){if(arguments.length)this._gmtOffset=value;return this._gmtOffset};Config.prototype.timeFormat24=function(value){if(arguments.length)this._timeFormat24=value;return this._timeFormat24};Config.prototype.nextAuctionDate=function(value){if(arguments.length)this._nextAuctionDate=value;return this._nextAuctionDate};Config.prototype.appletURL=
function(value){if(arguments.length){var oldValue=this._appletURL;this._appletURL=value}return this._appletURL};Config.prototype.ip=function(value){if(arguments.length)this._ip=value;return this._ip};Config.prototype.fmsApplication=function(value){if(arguments.length)this._fmsApplication=value;return this._fmsApplication};Config.prototype.nodeIp=function(value){if(arguments.length)this._nodeIp=value;return this._nodeIp};Config.prototype.nodeApplication=function(value){if(arguments.length)this._nodeApplication=
value;return this._nodeApplication};return Config}(com.events.EventDispatcher);memberauction.Config=Config})(memberauction||(memberauction={}));var com;(function(com){(function(socket){var FMSConnectionData=function(){function FMSConnectionData(socketUrl,fmsUrl,connectParams){this.socketUrl=socketUrl;this.fmsUrl=fmsUrl;this.connectParams=connectParams}return FMSConnectionData}();socket.FMSConnectionData=FMSConnectionData})(com.socket||(com.socket={}));var socket=com.socket})(com||(com={}));var com;
(function(com){(function(events){var SocketCallEvent=function(_super){__extends(SocketCallEvent,_super);function SocketCallEvent(type,params){_super.call(this,type);this.params=params}return SocketCallEvent}(events.Event);events.SocketCallEvent=SocketCallEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){var rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,core_trim="StringUtils".trim,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;var StringUtils=function(){function StringUtils(){}StringUtils.urlEncode=function urlEncode(o,pre){if(!o)return"";var buf=new Array;for(var key in o)if(o.hasOwnProperty(key)){var ov=o[key];var k=encodeURIComponent(key);if(typeof pre!="undefined")k=pre+"["+k+"]";var type=typeof ov;if(type=="undefined")buf.push(k+"=");else if(type!="function"&&type!=
"object")buf.push(k+"="+encodeURIComponent(ov));else if(typeof ov.length=="number"&&typeof ov.splice=="function"){var len=ov.length;if(len)for(var i=0;i<len;i++)buf.push(arguments.callee({"":ov[i]},k));else buf.push(k+"[]=")}else if(type=="object")for(var i in ov)if(ov.hasOwnProperty(i)){var t={};t[i]=ov[i];buf.push(arguments.callee(t,k))}}return buf.join("&")};StringUtils.urlDecode=function urlDecode(str,overwrite){if(typeof overwrite==="undefined")overwrite=false;if(!str||!str.length)return{};var obj=
{};var pairs=str.split("&");var pair,name,value;for(var i=0,len=pairs.length;i<len;i++){pair=pairs[i].split("=");name=decodeURIComponent(pair[0]);value=decodeURIComponent(pair[1]);if(overwrite!==true)if(typeof obj[name]=="undefined")obj[name]=value;else if(typeof obj[name]=="string"){obj[name]=[obj[name]];obj[name].push(value)}else obj[name].push(value);else obj[name]=value}return obj};StringUtils.getStrPos=function getStrPos(haystack,needle,offset){var i=(haystack+"").indexOf(needle,offset||0);if(i===
-1)return false;else return i};StringUtils.hashCode=function hashCode(str){var hash=0,i,charS;str="act";if(str.length!=0)for(i=0;i<str.length;i++){charS=str.charCodeAt(i);hash=(hash<<5)-hash+charS}return hash};StringUtils.ucfirst=function ucfirst(value){return value.charAt(0).toUpperCase()+value.slice(1)};StringUtils.lcfirst=function lcfirst(value){return value.charAt(0).toLowerCase()+value.slice(1)};StringUtils.camelCase=function camelCase(value){return value.replace(rmsPrefix,"ms-").replace(rdashAlpha,
StringUtils.fcamelCase)};StringUtils.fcamelCase=function(all,letter){return letter.toUpperCase()};StringUtils.trim=core_trim&&!core_trim.call("ï»¿Â ")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")};StringUtils.repeat=function repeat(str,length){return(new Array((length>0?length:0)+1)).join(str)};StringUtils.formatNumber=function formatNumber(num,length){if(typeof length==="undefined")length=2;return StringUtils.repeat("0",length-
num.toString().length)+num.toString()};return StringUtils}();utils.StringUtils=StringUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;(function(com){})(com||(com={}));var com;
(function(com){(function(utils){var core_strundefined=typeof undefined;utils.BrowserSupport=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length)return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));
input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={getSetAttribute:div.className!=="t",leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,
html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:document.compatMode==="CSS1Compat",innerText:typeof div["innerText"]!==core_strundefined,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div["test"]}catch(e){support.deleteExpando=
false}input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")==="";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","t");input.setAttribute("name","t");fragment=document.createDocumentFragment();fragment.appendChild(input);support.appendChecked=input.checked;support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;if(div.attachEvent){div.attachEvent("onclick",
function(){support.noCloneEvent=false});div.cloneNode(true).click()}for(i in{submit:true,change:true,focusin:true}){div.setAttribute(eventName="on"+i,"t");support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===false}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=
isSupported&&tds[0].offsetHeight===0;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=div.offsetWidth===4;support.doesNotIncludeMarginInBodyOffset=body.offsetTop!==1;if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||
{width:"4px"}).width==="4px";marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!==core_strundefined){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display=
"block";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=div.offsetWidth!==3;if(support.inlineBlockNeedsLayout)body.style.zoom="1"}body.removeChild(container);container=div=tds=marginDiv=null});all=select=fragment=opt=a=input=null;return support}})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(events){var FocusEvent=function(_super){__extends(FocusEvent,_super);function FocusEvent(type){_super.call(this,type)}FocusEvent.FOCUS="focus";FocusEvent.BLUR="blur";return FocusEvent}(events.Event);events.FocusEvent=FocusEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var VideoEvent=function(_super){__extends(VideoEvent,_super);function VideoEvent(type){_super.call(this,type)}VideoEvent.ABORT="abort";VideoEvent.CANPLAY="canplay";VideoEvent.CANPLAYTHROUGH="canplaythrough";VideoEvent.DURATIONCHANGE="durationchange";VideoEvent.EMPTIED="emptied";VideoEvent.ENDED="ended";VideoEvent.ERROR="media_error";VideoEvent.LOADEDDATA="loadeddata";VideoEvent.LOADEDMETADATA="loadedmetadata";VideoEvent.LOADSTART="loadstart";VideoEvent.PAUSE="pause";
VideoEvent.PLAY="play";VideoEvent.PLAYING="playing";VideoEvent.PROGRESS="progress";VideoEvent.RATECHANGE="ratechange";VideoEvent.SEEKED="seeked";VideoEvent.SEEKING="seeking";VideoEvent.STALLED="stalled";VideoEvent.SUSPEND="suspend";VideoEvent.TIMEUPDATE="timeupdate";VideoEvent.VOLUMECHANGE="volumechange";VideoEvent.WAITING="waiting";return VideoEvent}(events.Event);events.VideoEvent=VideoEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var WindowEvent=function(_super){__extends(WindowEvent,_super);function WindowEvent(){_super.apply(this,arguments)}WindowEvent.HASH_CHANGE="onhashchange";return WindowEvent}(com.events.Event);events.WindowEvent=WindowEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var KeyboardEvent=function(_super){__extends(KeyboardEvent,_super);function KeyboardEvent(type,charCode,keyCode,ctrlKey,altKey,shiftKey){_super.call(this,type);this.charCode=charCode;this.keyCode=keyCode;this.ctrlKey=ctrlKey;this.altKey=altKey;this.shiftKey=shiftKey}KeyboardEvent.KEY_DOWN="keyDown";KeyboardEvent.KEY_UP="keyUp";KeyboardEvent.KEY_PRESS="keyPress";return KeyboardEvent}(events.Event);events.KeyboardEvent=KeyboardEvent})(com.events||(com.events={}));var events=
com.events})(com||(com={}));var com;
(function(com){(function(events){var CustomKeyboardEvent=function(_super){__extends(CustomKeyboardEvent,_super);function CustomKeyboardEvent(type,charCode,keyCode,ctrlKey,altKey,shiftKey,param_data){_super.call(this,type,charCode,keyCode,ctrlKey,altKey,shiftKey);this.param_data=param_data?param_data:{}}return CustomKeyboardEvent}(events.KeyboardEvent);events.CustomKeyboardEvent=CustomKeyboardEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var CustomEvent=function(_super){__extends(CustomEvent,_super);function CustomEvent(type,param_data){_super.call(this,type);this.param_data=param_data?param_data:{}}return CustomEvent}(events.Event);events.CustomEvent=CustomEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(core){var Config=function(){function Config(){}Config.dev=false;return Config}();core.Config=Config})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){(function(utils){var ErrorConsole=function(){function ErrorConsole(){}ErrorConsole.log=function log(message){if(typeof message==="undefined")return;ErrorConsole._message=message;if(com.core.Config.dev||false){console.error(ErrorConsole._message);ErrorConsole._htmlLog()}else ErrorConsole._serverLog();ErrorConsole._message=""};ErrorConsole._serverLog=function _serverLog(){return true};ErrorConsole._htmlLog=function _htmlLog(){ErrorConsole._createHtmlConsole();var pre=document.createElement("pre");
var li=document.createElement("li");var timestampSpan=document.createElement("em");if(typeof ErrorConsole._message==="object"&&typeof window["JSON"]!=="undefined")pre.innerHTML=JSON.stringify(ErrorConsole._message,null,"  ");else pre.innerHTML=ErrorConsole._message;timestampSpan.innerHTML=(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds();li.appendChild(timestampSpan);li.appendChild(pre);ErrorConsole._htmlConsole.appendChild(li)};ErrorConsole._createHtmlConsole=function _createHtmlConsole(){if(typeof ErrorConsole._htmlConsole===
"undefined"){ErrorConsole._htmlConsole=document.createElement("ul");ErrorConsole._htmlConsole.className="debugConsole";ErrorConsole._htmlConsole.style["height"]="auto";var li=document.createElement("li");li.className="debugTitle";li.innerHTML="Console";li.addEventListener("click",function(){if(ErrorConsole._htmlConsole.style["height"]=="auto")ErrorConsole._htmlConsole.style["height"]="1em";else ErrorConsole._htmlConsole.style["height"]="auto"});ErrorConsole._htmlConsole.appendChild(li);document.body.appendChild(ErrorConsole._htmlConsole);
var styleCont=document.createElement("style");styleCont.innerText=".debugConsole {z-index: 1000;position: fixed;bottom: 0;right: 5px;height: auto;overflow: hidden;-webkit-transition: all .2s linear;-moz-transition: all .2s linear;transition: all .2s linear;list-style: none;margin: 0;padding: 0 10px 10px 10px;background-color: rgba(0, 0, 0, .8);border-radius: 5px 5px 0 0;min-width: 150px;font-size: 10px;color: #fff;box-shadow: rgba(0, 0, 0, .4) 0 0 5px;} .debugTitle {cursor: pointer;font-weight: bold;border-bottom: 1px solid rgba(255,255,255, .5);text-align: center;padding: 5px;margin-bottom: 5px;}";
document.getElementsByTagName("head")[0].appendChild(styleCont)}};return ErrorConsole}();utils.ErrorConsole=ErrorConsole})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(events){var EventHandler=function(){function EventHandler(){}EventHandler.on=function on(element,type_str,listening_obj,method_str,param_obj){if(element===null){com.utils.ErrorConsole.log("EventHandler.ts nincs megadva element.");return}if(!element["dispatcher"])element["dispatcher"]=new com.events.EventDispatcher;var param_data=param_obj?param_obj:{};element["dispatcher"].addEventListener(type_str,listening_obj,method_str);switch(type_str){case com.events.MouseEvent.MOUSE_OVER:if(!element.onmouseover)element.onmouseover=
function(event){EventHandler._mouseOverHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_OUT:if(!element.onmouseout)element.onmouseout=function(event){EventHandler._mouseOutHandler_(element,param_data,event)};break;case com.events.MouseEvent.CLICK:if(!element.onclick)element.onclick=function(event){EventHandler._mouseClickHandler_(element,param_data,event)};break;case com.events.MouseEvent.DOUBLE_CLICK:if(!element["onclicondblclick"])element["onclicondblclick"]=function(event){EventHandler._mouseDoubleClickHandler_(element,
param_data,event)};break;case com.events.MouseEvent.MOUSE_DOWN:if(!element.onmousedown)element.onmousedown=function(event){EventHandler._mouseDownHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_UP:if(!element.onmouseup)element.onmouseup=function(event){EventHandler._mouseUpHandler_(element,param_data,event)};if(!element.ondragend)element.ondragend=function(event){EventHandler._mouseDragEndHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_MOVE:if(!element.onmousemove)element.onmousemove=
function(event){EventHandler._mouseMoveHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_WHEEL:if(!element.onmousewheel)element.onmousewheel=function(event){EventHandler._mouseWheelHandler_(element,param_data,event)};if(element.addEventListener)element.addEventListener("DOMMouseScroll",function(event){EventHandler._mouseWheelHandler_(element,param_data,event)});break;case com.events.KeyboardEvent.KEY_DOWN:if(!element.onkeydown)element.onkeydown=function(event){EventHandler._keyDownHandler_(element,
param_data,event)};break;case com.events.KeyboardEvent.KEY_UP:if(!element.onkeyup)element.onkeyup=function(event){EventHandler._keyUpHandler_(element,param_data,event)};break;case com.events.KeyboardEvent.KEY_PRESS:if(!element.onkeypress)element.onkeypress=function(event){EventHandler._keyPressHandler_(element,param_data,event)};break;case com.events.FocusEvent.FOCUS:if(!element.onfocus)element.onfocus=function(event){EventHandler._focusHandler_(element,param_data,event)};break;case com.events.Event.CHANGE:if(!element.onchange)element.onchange=
function(event){EventHandler._changeHandler_(element,param_data,event)};break;case com.events.FocusEvent.BLUR:if(!element.onblur)element.onblur=function(event){EventHandler._blurHandler_(element,param_data,event)};break;case com.events.Event.SUBMIT:if(!element.onsubmit)element.onsubmit=function(event){EventHandler._submitHandler_(element,param_data,event)};break;case com.events.Event.RESIZE:if(!element.onresize)element.onresize=function(event){EventHandler._onresizeHandler_(element,param_data,event)};
break;case com.events.Event.LOADED:if(!element.onload)element.onload=function(event){EventHandler._loadedHandler_(element,param_data,event)};break;case com.events.Event.ERROR:if(!element.onerror)element.onerror=function(event){EventHandler._errorHandler_(element,param_data,event)};break;case com.events.Event.PROGRESS:try{if(!element.onprogress)element.onprogress=function(event){EventHandler._progressHandler_(element,param_data,event)}}catch(Error){}break;case com.events.VideoEvent.ERROR:if(element.addEventListener)element.addEventListener("error",
function(event){EventHandler._videoEventHandler_(element,param_data,event)});else element.attachEvent("onerror",function(event){EventHandler._videoEventHandler_(element,param_data,event)});break;case com.events.VideoEvent.ABORT:case com.events.VideoEvent.CANPLAY:case com.events.VideoEvent.CANPLAYTHROUGH:case com.events.VideoEvent.DURATIONCHANGE:case com.events.VideoEvent.EMPTIED:case com.events.VideoEvent.ENDED:case com.events.VideoEvent.LOADEDDATA:case com.events.VideoEvent.LOADEDMETADATA:case com.events.VideoEvent.LOADSTART:case com.events.VideoEvent.PAUSE:case com.events.VideoEvent.PLAY:case com.events.VideoEvent.PLAYING:case com.events.VideoEvent.PROGRESS:case com.events.VideoEvent.RATECHANGE:case com.events.VideoEvent.SEEKED:case com.events.VideoEvent.SEEKING:case com.events.VideoEvent.STALLED:case com.events.VideoEvent.SUSPEND:case com.events.VideoEvent.TIMEUPDATE:case com.events.VideoEvent.VOLUMECHANGE:case com.events.VideoEvent.WAITING:if(element.addEventListener)element.addEventListener(type_str,
function(event){EventHandler._videoEventHandler_(element,param_data,event)});else element.attachEvent("on"+type_str,function(event){EventHandler._videoEventHandler_(element,param_data,event)});break;case com.events.WindowEvent.HASH_CHANGE:if(!element.onhashchange)element.onhashchange=function(event){EventHandler._hashchangeHandler_(element,param_data,event)};break}};EventHandler.un=function un(element,type_str,listening_obj,method_str){if(element["dispatcher"]){element["dispatcher"].removeEventListener(type_str,
listening_obj,method_str);if(element["dispatcher"].hasEventListener(type_str))return}switch(type_str){case com.events.MouseEvent.MOUSE_OVER:element.onmouseover=null;break;case com.events.MouseEvent.MOUSE_OUT:element.onmouseout=null;break;case com.events.MouseEvent.CLICK:element.onclick=null;break;case com.events.MouseEvent.DOUBLE_CLICK:element["onclicondblclick"]=null;break;case com.events.MouseEvent.MOUSE_DOWN:element.onmousedown=null;break;case com.events.MouseEvent.MOUSE_UP:element.onmouseup=null;
break;case com.events.MouseEvent.MOUSE_MOVE:element.onmousemove=null;break;case com.events.MouseEvent.MOUSE_WHEEL:element.onmousewheel=null;break;case com.events.KeyboardEvent.KEY_DOWN:element.onkeydown=null;break;case com.events.KeyboardEvent.KEY_UP:element.onkeyup=null;break;case com.events.FocusEvent.FOCUS:element.onfocus=null;break;case com.events.FocusEvent.BLUR:element.onblur=null;break;case com.events.Event.SUBMIT:element.onsubmit=null;break;case com.events.Event.RESIZE:element.onresize=null;
break;case com.events.Event.LOADED:element.onload=null;break;case com.events.Event.ERROR:element.onerror=null;break}};EventHandler._mouseOverHandler_=function _mouseOverHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_OVER,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseOutHandler_=function _mouseOutHandler_(element,param_data,event){var realEvent=
event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_OUT,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseClickHandler_=function _mouseClickHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.CLICK,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseDoubleClickHandler_=
function _mouseDoubleClickHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.DOUBLE_CLICK,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseDownHandler_=function _mouseDownHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.MouseEvent(com.events.MouseEvent.MOUSE_DOWN);e.target=element;e.currentTarget=element;
e.realEvent=realEvent;e.clientX=realEvent.clientX;e.clientY=realEvent.clientY;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseUpHandler_=function _mouseUpHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_UP,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseDragEndHandler_=function _mouseDragEndHandler_(element,param_data,event){var realEvent=
event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_UP,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e);var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_DRAG_END,param_data);e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseMoveHandler_=function _mouseMoveHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.MouseEvent(com.events.MouseEvent.MOUSE_MOVE);
e.target=element;e.currentTarget=element;e.realEvent=realEvent;e.clientX=realEvent.clientX;e.clientY=realEvent.clientY;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseWheelHandler_=function _mouseWheelHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.MouseEvent(events.MouseEvent.MOUSE_WHEEL);e.target=element;e.currentTarget=element;e.realEvent=realEvent;e.delta=realEvent.detail?realEvent.detail*-1:realEvent.wheelDelta/120;element["dispatcher"].dispatchEvent(e)};
EventHandler._keyDownHandler_=function _keyDownHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_DOWN,realEvent.charCode,realEvent.keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._keyUpHandler_=function _keyUpHandler_(element,param_data,event){var realEvent=event||window.event;
var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_UP,realEvent.charCode,realEvent.keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._keyPressHandler_=function _keyPressHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_PRESS,realEvent.charCode,realEvent.keyCode,
realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._focusHandler_=function _focusHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.FocusEvent.FOCUS,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._changeHandler_=function _changeHandler_(element,
param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.CHANGE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._progressHandler_=function _progressHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.CHANGE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};
EventHandler._blurHandler_=function _blurHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.FocusEvent.BLUR,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._submitHandler_=function _submitHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.SUBMIT,param_data);e.target=element;e.currentTarget=
element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._onresizeHandler_=function _onresizeHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.RESIZE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._loadedHandler_=function _loadedHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.LOADED,
param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._errorHandler_=function _errorHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.ERROR,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._videoEventHandler_=function _videoEventHandler_(element,param_data,event){var realEvent=event||
window.event;var e=new com.events.CustomEvent(event.type,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._hashchangeHandler_=function _hashchangeHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.WindowEvent.HASH_CHANGE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};return EventHandler}();events.EventHandler=
EventHandler})(com.events||(com.events={}));var events=com.events})(com||(com={}));if(!window["Node"])var Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};
if(!window["NodeList"])var NodeList={length:undefined,item:undefined};var com;
(function(com){(function(utils){var vendorPrefix;var core_strundefined=typeof undefined;var support=com.utils.BrowserSupport();var ignoreMethods=["merge","getVendorPrefix","setStyle","dimensions","nodeName"];var CSS3properties=["alignContent","alignItems","alignSelf","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appRegion","appearance","aspectRatio","backfaceVisibility",
"backgroundClip","backgroundComposite","backgroundOrigin","backgroundSize","borderAfter","borderAfterColor","borderAfterStyle","borderAfterWidth","borderBefore","borderBeforeColor","borderBeforeStyle","borderBeforeWidth","borderEnd","borderEndColor","borderEndStyle","borderEndWidth","borderFit","borderHorizontalSpacing","borderImage","borderRadius","borderStart","borderStartColor","borderStartStyle","borderStartWidth","borderVerticalSpacing","boxAlign","boxDecorationBreak","boxDirection","boxFlex",
"boxFlexGroup","boxLines","boxOrdinalGroup","boxOrient","boxPack","boxReflect","boxShadow","clipPath","colorCorrection","columnAxis","columnBreakAfter","columnBreakBefore","columnBreakInside","columnCount","columnGap","columnProgression","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","columns","filter","flex","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","flowFrom","flowInto","fontFeatureSettings","fontKerning","fontSizeDelta",
"fontSmoothing","fontVariantLigatures","gridColumn","gridColumns","gridRow","gridRows","highlight","hyphenateCharacter","hyphenateLimitAfter","hyphenateLimitBefore","hyphenateLimitLines","hyphens","justifyContent","lineAlign","lineBoxContain","lineBreak","lineClamp","lineGrid","lineSnap","locale","logicalHeight","logicalWidth","marginAfter","marginAfterCollapse","marginBefore","marginBeforeCollapse","marginBottomCollapse","marginCollapse","marginEnd","marginStart","marginTopCollapse","marquee","marqueeDirection",
"marqueeIncrement","marqueeRepetition","marqueeSpeed","marqueeStyle","mask","maskBoxImage","maskBoxImageOutset","maskBoxImageRepeat","maskBoxImageSlice","maskBoxImageSource","maskBoxImageWidth","maskClip","maskComposite","maskImage","maskOrigin","maskPosition","maskPositionX","maskPositionY","maskRepeat","maskRepeatX","maskRepeatY","maskSize","maxLogicalHeight","maxLogicalWidth","minLogicalHeight","minLogicalWidth","nbspMode","order","paddingAfter","paddingBefore","paddingEnd","paddingStart","perspective",
"perspectiveOrigin","perspectiveOriginX","perspectiveOriginY","printColorAdjust","regionBreakAfter","regionBreakBefore","regionBreakInside","regionOverflow","rtlOrdering","rubyPosition","shapeInside","shapeMargin","shapeOutside","shapePadding","svgShadow","tapHighlightColor","textCombine","textDecorationsInEffect","textEmphasis","textEmphasisColor","textEmphasisPosition","textEmphasisStyle","textFillColor","textOrientation","textSecurity","textSizeAdjust","textStroke","textStrokeColor","textStrokeWidth",
"transform","transformOrigin","transformOriginX","transformOriginY","transformOriginZ","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","userDrag","userModify","userSelect","wrap","wrapFlow","wrapThrough","writingMode"];var avoidStylePostfix=["zIndex","opacity"];var core_rnotwhite=/\S+/g;var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=
/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input,class2type={},core_deletedIds=[],core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_splice=core_deletedIds.splice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty;
var _easeMap={},globals=window["GreenSockGlobals"]||window,CSSPlugin,TweenLite,_warned;TweenLite=globals.TweenMax||globals.TweenLite;if(TweenLite){globals=globals.com.greensock;CSSPlugin={}}Sizzle.selectors.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets&&(elem.style&&elem.style.display||com.get(elem).css("display"))==="none"};Sizzle.selectors.filters.visible=function(elem){return!Sizzle.selectors.filters.hidden(elem)};var DomCollection=
function(){function DomCollection(){this.length=0;this.DomCollection=true;this.attrHooks={};this.propHooks={};this.valHooks={};this.support=support;this.propFix={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"}}DomCollection.nodeName=function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===
name.toLowerCase()};DomCollection.nodeType=function nodeType(elem,nodeType){return elem.nodeType&&elem.nodeType===nodeType};DomCollection.setStyle=function setStyle(name,value,element){var style=element.style,css3Name=DomCollection.getVendorPrefixedCSSProperty(name,element);if(!utils.CommonUtils.isDefined(value))return;if(utils.CommonUtils.isNumber(value)&&com.utils.ArrayUtils.indexOf(avoidStylePostfix,css3Name)==-1)value+="px";if(com.utils.CommonUtils.isDefined(style[css3Name]))try{style[css3Name]=
value}catch(ex){}return element};DomCollection.getVendorPrefixedCSSProperty=function getVendorPrefixedCSSProperty(name,element){var style=element.style;if(com.utils.ArrayUtils.indexOf(CSS3properties,name)!==-1&&style[name]===undefined)return DomCollection.getVendorPrefix()+com.utils.StringUtils.ucfirst(name);return name};DomCollection.merge=function merge(first,second){var i,len=first.length;if(len===0&&second.length===0)return first;for(i=0;i<second.length;i++)first[len+i]=second[i];first.length+=
second.length;i=second=null;return first};DomCollection.dimensions=function dimensions(elements,name,prefix,value){if(!DomCollection.isDomCollection(elements))return undefined;var elem=elements[0],extras=0;var nameU=com.utils.StringUtils.ucfirst(name);if(utils.CommonUtils.isWindow(elem))return elem["inner"+nameU]?elem["inner"+nameU]:elem.document.documentElement["client"+nameU];var doc;if(elem.nodeType===Node.DOCUMENT_NODE){doc=elem.documentElement;return Math.max(elem.body["scroll"+nameU],doc["scroll"+
nameU],elem.body["offset"+nameU],doc["offset"+nameU],doc["client"+nameU])}if(utils.CommonUtils.isString(prefix)){switch(name){case "width":if(prefix=="inner"){extras+=elements.css("paddingLeft",true);extras+=elements.css("paddingRight",true)}else if(prefix=="outer"){extras+=elements.css("paddingLeft",true);extras+=elements.css("paddingRight",true);extras+=elements.css("borderLeftWidth",true);extras+=elements.css("borderRightWidth",true);if(value){extras+=elements.css("marginLeft",true);extras+=elements.css("marginRight",
true)}}break;case "height":if(prefix=="inner"){extras+=elements.css("paddingTop",true);extras+=elements.css("paddingBottom",true)}else if(prefix=="outer"){extras+=elements.css("paddingTop",true);extras+=elements.css("paddingBottom",true);extras+=elements.css("borderTopWidth",true);extras+=elements.css("borderBottomWidth",true);if(value){extras+=elements.css("marginTop",true);extras+=elements.css("marginBottom",true)}}break}value=undefined}return value===undefined?elements.css(name,true)+extras:elements.css(name,
value)};DomCollection.whereToInsert=function whereToInsert(elems,content,where){if(!DomCollection.isDomCollection(elems)||!arguments.length)return undefined;elems.each(function(index,elem){if(content.each===undefined&&content.nodeType===1)DomCollection.insertAdjacentElement(elem,where,content);else if(com.utils.ArrayUtils.isArrayLike(content))content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(elem,where,com.get(this).clone()[0]);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(elem,
where,this.data);break}})});return elems};DomCollection.insertWhere=function insertWhere(elems,content,where){if(!DomCollection.isDomCollection(elems)||!arguments.length)return undefined;if(com.utils.CommonUtils.isString(content))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);if(!utils.CommonUtils.isDefined(content))return undefined;var is_element=content.nodeType===Node.ELEMENT_NODE,is_array=com.utils.ArrayUtils.isArrayLike(content),is_DomCollection=
DomCollection.isDomCollection(content),len=content.length;elems.reverse().each(function(index,elem){if(com.utils.CommonUtils.isDefined(elem)&&com.utils.CommonUtils.isDefined(elem.nodeType))if(!is_DomCollection&&is_element)switch(elem.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(content,where,elem);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(content,where,elem);break}else if(is_array&&len)content.each(function(){switch(elem.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(this,
where,elem);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(this,where,elem.data);break}})});return elems};DomCollection.insertAdjacentElement=function insertAdjacentElement(insertRelativeTo,where,insertWhat){if(com.utils.CommonUtils.isDefined(insertRelativeTo["insertAdjacentElement"]))insertRelativeTo.insertAdjacentElement(where,insertWhat);else switch(where){case "beforeBegin":insertRelativeTo.parentNode.insertBefore(insertWhat,insertRelativeTo);break;case "afterBegin":insertRelativeTo.insertBefore(insertWhat,
insertRelativeTo.firstChild);break;case "beforeEnd":insertRelativeTo.appendChild(insertWhat);break;case "afterEnd":insertRelativeTo.parentNode.insertBefore(insertWhat,insertRelativeTo.nextSibling);break}return insertWhat};DomCollection.insertAdjacentHTML=function insertAdjacentHTML(insertRelativeTo,where,htmlToInsert){if(com.utils.CommonUtils.isDefined(insertRelativeTo["insertAdjacentHTML"]))insertRelativeTo.insertAdjacentHTML(where,htmlToInsert);else if(com.utils.CommonUtils.isDefined(insertRelativeTo)){var range=
document.createRange(),docFragmentToInsert=range.createContextualFragment(htmlToInsert);switch(where){case "beforeBegin":insertRelativeTo.parentNode.insertBefore(docFragmentToInsert,insertRelativeTo);break;case "afterBegin":insertRelativeTo.insertBefore(docFragmentToInsert,insertRelativeTo.firstChild);break;case "beforeEnd":insertRelativeTo.appendChild(docFragmentToInsert);break;case "afterEnd":insertRelativeTo.parentNode.insertBefore(docFragmentToInsert,insertRelativeTo.nextSibling);break}}};DomCollection.map=
function map(elems,callback,arg){var value,i,length=elems.length,isArray=com.utils.ArrayUtils.isArrayLike(elems),ret=[];if(isArray){i=0;for(;i<length;i++){value=callback.call(elems[i],elems[i],i,arg);if(value!=null)ret[ret.length]=value}}else for(i in elems){value=callback.call(elems[i],elems[i],i,arg);if(value!=null)ret[ret.length]=value}return DomCollection.merge(new DomCollection,core_concat.apply([],ret))};DomCollection.insertInsideWhere=function insertInsideWhere(elems,content,where){if(!DomCollection.isDomCollection(elems)||
!content)return undefined;if(com.utils.CommonUtils.isString(content)||DomCollection.nodeType(content,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);if(!DomCollection.isDomCollection(content))return undefined;elems.each(function(index,elem){content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(elem,where,index?com.get(this).clone()[0]:this);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(elem,
where,this.data);break}})});return elems};DomCollection.isDomCollection=function isDomCollection(v){return com.utils.CommonUtils.isDefined(v)&&com.utils.CommonUtils.isDefined(v.DomCollection)};DomCollection.getNodelist=function getNodelist(elements){return core_slice.call(elements,0,elements.length)};DomCollection.dir=function dir(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!com.get(cur).is(until))){if(cur.nodeType===1)matched.push(cur);
cur=cur[dir]}return matched};DomCollection.inArray=function inArray(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1};DomCollection.getVendorPrefix=function getVendorPrefix(){if(vendorPrefix)return vendorPrefix;var styles=[];if(!window.getComputedStyle){window["getComputedStyle"]=function(el,pseudo){return el.currentStyle};for(var k in window.getComputedStyle(document.documentElement,
""))styles.push(k)}else styles=window.getComputedStyle(document.documentElement,"");var pre=(core_slice.call(styles).join("").match(/-?(moz|webkit|ms)-?/)||styles["OLink"]===""&&["","o"])[1];vendorPrefix=pre;return pre};DomCollection.createCustomDOMEvent=function createCustomDOMEvent(target,name,event,param_data){var realEvent=event||window.event;var e=new com.events.CustomEvent(name,param_data);e.target=target;e.currentTarget=target;e.realEvent=realEvent;return e};DomCollection.createKeyboardDOMEvent=
function createKeyboardDOMEvent(target,name,keyCode,event,param_data){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(name,keyCode,keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=target;e.currentTarget=target;e.realEvent=realEvent;return e};DomCollection.prototype.find=function(selector,context){var ret=[],len,i=0;if(!com.utils.CommonUtils.isDefined(selector))return undefined;if(arguments.length===1&&this.length)context=this;this.context=
context;if(typeof selector=="string")if(com.utils.CommonUtils.isDefined(context)&&context.length){len=context.length;for(;i<len;i++)Sizzle(selector,context[i],ret);selector=ret}else selector=Sizzle(selector,DomCollection.isDomCollection(context)?context.removeTextNodes():context,ret);else if(selector.nodeType||utils.CommonUtils.isWindow(selector))selector=[selector];else if(!com.utils.ArrayUtils.isArrayLike(selector))return context||undefined;return DomCollection.merge(new DomCollection,selector)};
DomCollection.prototype.filter=function(selector,context){if(arguments.length===1)this.context=this;else this.context=context;return DomCollection.merge(new DomCollection,Sizzle.matches(selector,DomCollection.getNodelist(this.context)))};DomCollection.prototype.is=function(selector){return!!selector&&(typeof selector==="string"?Sizzle.selectors.match.needsContext.test(selector)?com.get(selector,this.context).index(this[0])>=0:this.filter(selector,this).length>0:this.filter(selector).length>0)};DomCollection.prototype.on=
function(type_str,listening_obj,method_str,param_obj){if(arguments.length<3)return undefined;this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||utils.CommonUtils.isWindow(this))com.events.EventHandler.on(this,type_str,listening_obj,method_str,param_obj||null)});return this};DomCollection.prototype.un=function(type_str,listening_obj,method_str){if(arguments.length<3)return undefined;this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||utils.CommonUtils.isWindow(this))com.events.EventHandler.un(this,
type_str,listening_obj,method_str)});return this};DomCollection.prototype.focus=function(){this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||com.utils.CommonUtils.isWindow(this))this.focus()});return this};DomCollection.prototype.click=function(){this.each(function(){this.onclick()});return this};DomCollection.prototype.blur=function(){this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||com.utils.CommonUtils.isWindow(this))this.blur()});return this};DomCollection.prototype.change=
function(){this.dispatchEvent(new com.events.CustomEvent(com.events.Event.CHANGE));return this};DomCollection.prototype.after=function(content){return DomCollection.whereToInsert(this,content,"afterEnd")};DomCollection.prototype.before=function(content){return DomCollection.whereToInsert(this,content,"beforeBegin")};DomCollection.prototype.insertAfter=function(content){return DomCollection.insertWhere(this,content,"afterEnd")};DomCollection.prototype.insertBefore=function(content){return DomCollection.insertWhere(this,
content,"beforeBegin")};DomCollection.prototype.clone=function(){var i,node,destElements,srcElements,clone,clones=[];this.each(function(index,elem){if(support.html5Clone||Sizzle.isXML(elem))clone=elem.cloneNode(true);if((!support.noCloneEvent||!support.noCloneChecked)&&(DomCollection.nodeType(elem,Node.ELEMENT_NODE)||DomCollection.nodeType(elem,Node.DOCUMENT_FRAGMENT_NODE))&&!Sizzle.isXML(elem)){destElements=com.get(clone);srcElements=com.get(elem)}destElements=srcElements=node=null;clones.push(clone)});
return DomCollection.merge(new DomCollection,clones)};DomCollection.prototype.replaceAll=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target))target=com.get(target);if(!DomCollection.isDomCollection(target))return undefined;var replacement=this;target.each(function(index){var elem=com.get(this);replacement.reverse().each(function(){if(index)com.get(this).clone().insertAfter(elem);else com.get(this).insertAfter(elem)});elem.remove()});return target};DomCollection.prototype.replaceWith=
function(newContent){if(!newContent)return undefined;if(com.utils.CommonUtils.isString(newContent)||newContent.nodeType!==undefined)newContent=com.get(newContent);if(!DomCollection.isDomCollection(newContent))return undefined;return newContent.replaceAll(this)};DomCollection.prototype.append=function(content){if(com.utils.CommonUtils.isString(content)||DomCollection.nodeType(content,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);
if(!DomCollection.isDomCollection(content))return undefined;this.each(function(index,elem){content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:elem.appendChild(index?com.get(this).clone()[0]:this);break}})});return this};DomCollection.prototype.appendTo=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target)||DomCollection.nodeType(target,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(target))target=com.create(target);else target=com.get(target);
if(!DomCollection.isDomCollection(target))return undefined;return DomCollection.insertInsideWhere(target,this,"beforeEnd")};DomCollection.prototype.prepend=function(content){return DomCollection.insertInsideWhere(this,content,"afterBegin")};DomCollection.prototype.prependTo=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target)||DomCollection.nodeType(target,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(target))target=com.create(target);else target=com.get(target);
if(!DomCollection.isDomCollection(target))return undefined;return DomCollection.insertInsideWhere(target,this,"afterBegin")};DomCollection.prototype.wrap=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||
!wrappingElement.length)return undefined;wrappingElement=com.get(wrappingElement[0]);this.each(function(index){var we=index?wrappingElement.clone():wrappingElement;com.get(this).replaceWith(we);we.append(this)});return this};DomCollection.prototype.wrapAll=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);
else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||!wrappingElement.length)return undefined;var wrap=com.get(wrappingElement[0]).clone();if(this[0].parentNode&&this[0].nodeType===1){wrap.insertBefore(this[0]);wrap.append(this)}return this};DomCollection.prototype.wrapInner=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=
com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||!wrappingElement.length)return undefined;return this.each(function(){var self=com.get(this),contents=self.contents();if(contents.length)contents.wrapAll(wrappingElement);else self.append(wrappingElement)})};DomCollection.prototype.unwrap=function(){this.parent().each(function(){if(!DomCollection.nodeName(this,
"body")){var cn=DomCollection.merge(new DomCollection,this.childNodes).detach();com.get(this).replaceWith(cn)}});return this};DomCollection.prototype.contents=function(){var contents=new DomCollection;this.each(function(i,elem){contents=DomCollection.merge(contents,DomCollection.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:elem.childNodes)});return contents};DomCollection.prototype.parent=function(){var ret=[];this.each(function(i,elem){var parent=elem.parentNode;if(parent&&
parent.nodeType!==11&&com.utils.ArrayUtils.indexOf(ret,parent)===-1)ret.push(parent)});return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.parents=function(until){var matched=[],dir="parentNode";this.each(function(){var cur=this[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!com.get(cur).is(until))){if(cur.nodeType===1&&!until)matched.push(cur);cur=cur[dir]}if(until&&com.utils.DomCollection.nodeType(cur,Node.ELEMENT_NODE)&&!cur["documentElement"]&&
com.get(cur).is(until))matched.push(cur)});return DomCollection.merge(new DomCollection,matched)};DomCollection.prototype.html=function(content){if(com.utils.CommonUtils.isDefined(content))this.each(function(){this.innerHTML=content});else return com.utils.StringUtils.trim(this[0].innerHTML);return this};DomCollection.prototype.text=function(content){var innerText=this.support.innerText?"innerText":"textContent";if(com.utils.CommonUtils.isDefined(content))this.each(function(){this[innerText]=content});
else return com.utils.StringUtils.trim(this[0][innerText]);return this};DomCollection.prototype.attr=function(name,value){var _this=this;if(!name)return undefined;if(!this.length)return this;if(com.utils.CommonUtils.isObject(name)){com.utils.ArrayUtils.each(name,function(index,value){_this.attr(index,value)});return this}else if(!com.utils.CommonUtils.isString(name))return this;var hooks,notxml,ret,elem=this[0],nType=elem.nodeType;if(!elem||nType===Node.TEXT_NODE||nType===Node.COMMENT_NODE||nType===
Node.ATTRIBUTE_NODE)return;if(typeof elem.getAttribute===core_strundefined)return this.prop(name,value);notxml=nType!==Node.ELEMENT_NODE||!Sizzle.isXML(elem);if(notxml){name=name.toLowerCase();hooks=this.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined){com.utils.ArrayUtils.each(this,function(index,elem){if(value===null)elem.removeAttr(name);else if(hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else{elem.setAttribute(name,value+
"");return value}});return this}else if(hooks&&notxml&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else{if(typeof elem.getAttribute!==core_strundefined)ret=elem.getAttribute(name);return ret==null?undefined:ret}};DomCollection.prototype.removeAttr=function(value){var scope=this;if(!arguments.length)return undefined;com.utils.ArrayUtils.each(this,function(index,elem){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&elem.nodeType===1)while(name=attrNames[i++]){propName=
scope.propFix[name]||name;if(rboolean.test(name))if(!getSetAttribute&&ruseDefault.test(name))elem[com.utils.StringUtils.camelCase("default-"+name)]=elem[propName]=false;else elem[propName]=false;else com.get(elem).attr(name,"");elem.removeAttribute(getSetAttribute?name:propName)}return true});return this};DomCollection.prototype.prop=function(name,value){if(!name)return undefined;var ret,hooks,notxml,elem=this[0],nType=elem.nodeType;if(!elem||nType===Node.TEXT_NODE||nType===Node.COMMENT_NODE||nType===
Node.ATTRIBUTE_NODE)return;notxml=nType!==Node.ELEMENT_NODE||!Sizzle.isXML(elem);if(notxml){name=this.propFix[name]||name;hooks=this.propHooks[name]}if(value!==undefined){com.utils.ArrayUtils.each(this,function(index,elem){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value});return this}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else return elem[name]};DomCollection.prototype.removeProp=function(name){if(!name)return undefined;
name=this.propFix[name]||name;return com.utils.ArrayUtils.each(this,function(){try{this[name]=undefined;delete this[name]}catch(e){}return this})};DomCollection.prototype.val=function(value){var ret,hooks,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=this.valHooks[elem.type]||this.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}var scope=
this;return com.utils.ArrayUtils.each(this,function(i){var val=value,self=com.get(this);if(!DomCollection.nodeType(this,Node.ELEMENT_NODE))return;if(val==null)val="";else if(typeof val==="number")val+="";hooks=scope.valHooks[this.type]||scope.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined)this.value=val;return this})};DomCollection.prototype.data=function(name,value){if(!arguments.length)return undefined;if(value)if(com.utils.CommonUtils.isDefined(this.attr("data-"+
name)))return this.attr("data-"+name,value);else return this.prop("data-"+name,value);else if(com.utils.CommonUtils.isDefined(this.attr("data-"+name)))return this.attr("data-"+name);else return this.prop("data-"+name)};DomCollection.prototype.addClass=function(value){if(!arguments.length)return undefined;var cur,clazz,j,classes,proceed=typeof value==="string"&&value;classes=(value||"").match(core_rnotwhite)||[];if(proceed)this.each(function(index,elem){cur=elem.nodeType===1&&(elem.className?(" "+
elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+clazz+" ")<0)cur+=clazz+" ";elem.className=com.utils.StringUtils.trim(cur)}});return this};DomCollection.prototype.removeClass=function(value){if(!arguments.length)return undefined;var classes,cur,clazz,j,proceed=arguments.length===0||typeof value==="string"&&value;if(proceed){classes=(value||"").match(core_rnotwhite)||[];this.each(function(index,elem){cur=elem.nodeType===1&&(elem.className?(" "+elem.className+
" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+" ")>=0)cur=cur.replace(" "+clazz+" "," ");elem.className=value?com.utils.StringUtils.trim(cur):""}})}return this};DomCollection.prototype.toggleClass=function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";return this.each(function(){if(type==="string"){var className,i=0,self=com.get(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];while(className=classNames[i++]){state=
isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type===core_strundefined||type==="boolean"){if(this.className)com.get(this).data("__className__",this.className);this.className=this.className||value===false?"":com.get(this).data("__className__")||""}})};DomCollection.prototype.hasClass=function(selector){if(!arguments.length)return undefined;var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+
" ").replace(rclass," ").indexOf(className)>=0)return true;return false};DomCollection.prototype.each=function(callback){if(!arguments.length)return undefined;return com.utils.ArrayUtils.each(this,callback)};DomCollection.prototype.css=function(name,value,pseudoElement){if(!this.length)return this;if(!com.utils.CommonUtils.isDefined(value)&&typeof name==="string"){var selector=this[0],cssProp=DomCollection.getVendorPrefixedCSSProperty(name,selector);if(window.getComputedStyle!==undefined){var tmp=
window.getComputedStyle(selector,pseudoElement);return tmp[cssProp]}else if(com.utils.ArrayUtils.indexOf(["height","width"],cssProp)!==-1)return selector["offset"+com.utils.StringUtils.ucfirst(cssProp)]+"px";return selector.style[cssProp]}if(com.utils.CommonUtils.isDefined(value)&&value===true)return parseInt(this.css(name)||0);if(!com.utils.CommonUtils.isDefined(value)&&typeof name==="object"){var styles=name;utils.ArrayUtils.each(this,function(){for(var propName in styles)DomCollection.setStyle(propName,
styles[propName],this);return true})}else if(com.utils.CommonUtils.isDefined(value))utils.ArrayUtils.each(this,function(index,elem){DomCollection.setStyle(name,value,elem);return true});return this};DomCollection.prototype.show=function(){this.each(function(index,elem){if(!DomCollection.nodeType(elem,Node.ELEMENT_NODE))return;var DHEl=com.get(elem);var dp=DHEl.data("olddisplay");if(DHEl.css("display")==="none"&&!dp)DomCollection.setStyle("display","block",elem);else if(dp)DomCollection.setStyle("display",
dp,elem);else DomCollection.setStyle("display","block",elem)});return this};DomCollection.prototype.hide=function(){this.each(function(index,elem){if(!DomCollection.nodeType(elem,Node.ELEMENT_NODE))return;var DHEl=com.get(elem);var display=DHEl.css("display");if(display!=="none")DHEl.data("olddisplay",DHEl.css("display"));else DHEl.data("olddisplay",null);DomCollection.setStyle("display","none",elem)});return this};DomCollection.prototype.toggle=function(){this.each(function(index,elem){var DHEl=
com.get(elem);if(DHEl.css("display")==="none")DHEl.show();else DHEl.hide()});return this};DomCollection.prototype.width=function(value){return DomCollection.dimensions(this,"width",null,value)};DomCollection.prototype.height=function(value){return DomCollection.dimensions(this,"height",null,value)};DomCollection.prototype.innerWidth=function(){return DomCollection.dimensions(this,"width","inner")};DomCollection.prototype.innerHeight=function(){return DomCollection.dimensions(this,"height","inner")};
DomCollection.prototype.outerWidth=function(margin){return DomCollection.dimensions(this,"width","outer",margin)};DomCollection.prototype.outerHeight=function(margin){return DomCollection.dimensions(this,"height","outer",margin)};DomCollection.prototype.scrollLeft=function(value){if(!this.length)return undefined;if(value)return this.prop("scrollLeft",value);else return this.prop("scrollLeft")};DomCollection.prototype.scrollTop=function(value){if(!this.length)return undefined;if(value)return this.prop("scrollTop",
value);else return this.prop("scrollTop")};DomCollection.prototype.offset=function(coordinates){if(!this.length)return undefined;if(coordinates!==undefined){this.css(coordinates);return this}return{top:this.prop("offsetTop"),left:this.prop("offsetLeft")}};DomCollection.prototype.offsetParent=function(){return DomCollection.map(this,function(){var offsetParent=this.offsetParent||document.documentElement;while(offsetParent&&!DomCollection.nodeName(offsetParent,"html")&&com.get(offsetParent).css("position")===
"static")offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})};DomCollection.prototype.position=function(){var element=com.get(this[0])[0];var xPosition=0;var yPosition=0;while(element){xPosition+=element.offsetLeft-element.scrollLeft+element.clientLeft;yPosition+=element.offsetTop-element.scrollTop+element.clientTop;element=element.offsetParent}return{top:yPosition,left:xPosition}};DomCollection.prototype.remove=function(selector,returnDomCollectionObject){if(typeof returnDomCollectionObject===
"undefined")returnDomCollectionObject=false;var len,i,elem,context;if(arguments.length&&typeof selector!=="string"&&selector!==undefined)return undefined;if(selector===undefined)elem=this;else elem=this.find(selector);len=elem.length;for(i=0;i<len;i++)if(elem[i].parentNode!==undefined)elem[i].parentNode.removeChild(elem[i]);if(returnDomCollectionObject)return this;return DomCollection.getNodelist(this)};DomCollection.prototype.detach=function(selector){return this.remove(selector,true)};DomCollection.prototype.empty=
function(){if(!this.length)return undefined;var elem,i=0;for(;(elem=this[i])!=null;i++){while(elem.firstChild)elem.removeChild(elem.firstChild);if(elem.options&&DomCollection.nodeName(elem,"select"))elem.options.length=0}return this};DomCollection.prototype.slice=function(begin,end){var ret=[],len=this.length;for(var i=begin;i<Math.min(end,len);i++)ret.push(this[i]);return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.reverse=function(){var ret=[],len=this.length;if(len<2)return this;
for(var i=len-1;i>=0;i--)ret.push(this[i]);return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.first=function(){return this.eq(0)};DomCollection.prototype.last=function(){return this.eq(-1)};DomCollection.prototype.prevAll=function(){return DomCollection.dir(this[0],"previousSibling")};DomCollection.prototype.index=function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(com.utils.CommonUtils.isString(elem))return DomCollection.inArray(this[0],
com.get(elem));return DomCollection.inArray(elem.DomCollection?elem[0]:elem,this)};DomCollection.prototype.eq=function(i){var len=this.length,j=+i+(i<0?len:0);return DomCollection.merge(new DomCollection,j>=0&&j<len?[this[j]]:[])};DomCollection.prototype.removeTextNodes=function(){var _this=this;this.each(function(index,item){if(!DomCollection.nodeType(item,Node.ELEMENT_NODE)){core_splice.call(_this,index,1);if(index<_this.length)_this.removeTextNodes();return false}});return this};DomCollection.prototype.addEventListener=
function(type_str,listening_obj,method_str,priority){this.each(function(){if(!this["dispatcher"])this["dispatcher"]=new com.events.EventDispatcher;this["dispatcher"].addEventListener(type_str,listening_obj,method_str,priority)})};DomCollection.prototype.dispatchEvent=function(e){this.each(function(){if(!this["dispatcher"])this["dispatcher"]=new com.events.EventDispatcher;this["dispatcher"].dispatchEvent(e)})};DomCollection.prototype.animate=function(direction,duration,fromVars,toVars){if(!TweenLite||
!CSSPlugin){TweenLite=null;if(!_warned){com.utils.ErrorConsole.log("The TweenMax (or at least TweenLite and CSSPlugin) JavaScript file(s) required for the animation.");_warned=true}return}return TweenLite[direction].call(TweenLite,DomCollection.getNodelist(this),duration,fromVars,toVars)};return DomCollection}();utils.DomCollection=DomCollection})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var routing;var com;
(function(com){(function(core){var Router=function(){function Router(_routeTable){this._routeTable=_routeTable}Router.prototype.generateUrl=function(routeHandler,routeParams,queryParams,anchor,disableLang){if(typeof disableLang==="undefined")disableLang=true;if(typeof this._routeTable[routeHandler]!="string"){com.utils.ErrorConsole.log("The given route handler does not exists: "+routeHandler);return}var uri=this._routeTable[routeHandler];if(uri.indexOf("[")==0)uri=uri.substr(uri.indexOf("]")+1);if(uri.indexOf("{")!=
-1)for(var paramName in routeParams){var pattern=new RegExp("\\{"+paramName+":(?:\\w+|\\*)(?:\\(.+\\))?\\}");if(com.utils.CommonUtils.isString(routeParams[paramName]))uri=uri.replace(pattern,routeParams[paramName])}if(uri.indexOf("{")!=-1){com.utils.ErrorConsole.log("One or more route parameters are missing.");return}if(typeof queryParams=="object"){var queryString="";for(var qParam in queryParams)queryString+="&"+encodeURIComponent(qParam)+"="+encodeURIComponent(queryParams[qParam]);if(queryString.length>
0)uri=uri+"?"+queryString.slice(1)}else if(typeof queryParams=="string")uri=uri+"?"+queryParams;if(typeof anchor=="string"&&anchor.length>0)uri=uri+"#"+anchor;return uri};return Router}();core.Router=Router})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){var creationContainer=document.createElement("div");function get(selector,context){return(new com.utils.DomCollection).find(selector,context)}com.get=get;function create(htmlString){creationContainer.innerHTML=htmlString;if(creationContainer.childNodes)return com.get(creationContainer.childNodes);return undefined}com.create=create;function getUrl(routeHandler,routeParams,queryParams,anchor,disableLang){return com.utils.SingletonManager.getInstance(com.core.Router).generateUrl(routeHandler,
routeParams,queryParams,anchor,disableLang)}com.getUrl=getUrl})(com||(com={}));var com;
(function(com){(function(utils){var CommonUtils=function(){function CommonUtils(){}CommonUtils.isEmpty=function isEmpty(v,allowBlank){return v===null||v===undefined||com.utils.ArrayUtils.isArray(v)&&!v.length||(!allowBlank?v==="":false)};CommonUtils.isDate=function isDate(v){return toString.apply(v)==="[object Date]"};CommonUtils.isObject=function isObject(v){return!!v&&Object.prototype.toString.call(v)==="[object Object]"};CommonUtils.isPrimitive=function isPrimitive(v){return CommonUtils.isString(v)||
CommonUtils.isNumber(v)||CommonUtils.isBoolean(v)};CommonUtils.isFunction=function isFunction(v){return typeof v==="function"};CommonUtils.isNumber=function isNumber(v){return typeof v==="number"&&isFinite(v)};CommonUtils.isString=function isString(v){return typeof v==="string"};CommonUtils.isBoolean=function isBoolean(v){return typeof v==="boolean"};CommonUtils.isElement=function isElement(v){return!!v&&v.tagName};CommonUtils.isDefined=function isDefined(v){return typeof v!=="undefined"};CommonUtils.isWindow=
function isWindow(obj){return obj!=null&&obj==obj.window};CommonUtils.setElements=function setElements(elements){var generatedElements={};for(var i in elements)generatedElements[i]=com.get(elements[i]);return generatedElements};CommonUtils.isHTMLString=function isHTMLString(v){return/^<.+>$/.test(com.utils.StringUtils.trim(v))};CommonUtils.getBodyId=function getBodyId(){return document.getElementsByTagName("body")[0].id};CommonUtils.setBodyId=function setBodyId(bodyId){document.getElementsByTagName("body")[0].id=
bodyId};CommonUtils.getPageClassName=function getPageClassName(){var bodyId=CommonUtils.getBodyId();if(bodyId.length){var matches=bodyId.match(/^.+?_(\w+)$/);if(matches!==null&&matches.length==2)return matches[1]}com.utils.ErrorConsole.log("Nem talalhato oldal class nev.");return undefined};CommonUtils.getJSONDirection=function getJSONDirection(results,JSONRoute){var res=results,route=JSONRoute;if(route)if(route.indexOf(".")===-1)res=res[route];else{var stringSplit=route.split(".");com.utils.ArrayUtils.each(stringSplit,
function(i){if(res[stringSplit[i]]==undefined){com.utils.ErrorConsole.log("getJSONDirection: invalid route to json data");res=false}else res=res[stringSplit[i]]})}return res};return CommonUtils}();utils.CommonUtils=CommonUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(utils){var Browser=function(){function Browser(){}Browser.chrome=false;Browser.safari=false;Browser.opera=false;Browser.msie=false;Browser.webkit=false;Browser.mozilla=false;Browser.init=function init(){var matched=Browser.uaMatch(navigator.userAgent);if(matched.browser){Browser[matched.browser]=true;Browser.version=matched.version}if(Browser.chrome)Browser.webkit=true;else if(Browser.webkit)Browser.safari=true};Browser.uaMatch=function uaMatch(ua){ua=ua.toLowerCase();var match=
/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};return Browser}();utils.Browser=Browser;Browser.init()})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(socket){var SocketConnection=function(_super){__extends(SocketConnection,_super);function SocketConnection(options){if(typeof options==="undefined")options={"auto connect":false,"reconnect":false,"reconnection delay":500,"reconnect limit":5,"secure":false};_super.call(this);if(com.utils.Browser.msie&&com.utils.Browser.version>=10)options.transports=["flashsocket"];this._options=options;this._callBackListeners=new Array;this._socket=new io.Socket(options);this._socketNamespace=
new io.SocketNamespace(this._socket,"")}SocketConnection.prototype.options=function(value){if(arguments.length)io.util.merge(this._socket.options,value);else return this._socket.options};SocketConnection.prototype.connect=function(url,params){var _this=this;var uri=io.util.parseUri(url);uri.protocol=uri.protocol||(document?document.location.protocol.slice(0,-1):location.protocol.slice(0,-1));uri.host=uri.host||(document?document.domain:location.hostname);uri.port=uri.port||(document?document.location.port:
location.port);com.log(uri);var options={host:uri.host,secure:"https"==uri.protocol,port:uri.port||("https"==uri.protocol?443:80),query:uri.query||""};io.util.merge(this._socket.options,uri);this._params=params;io.heartbeatTimeout=1E4;this._socket.connect();this._socketNamespace.name=uri.path.length>1?uri.path:"";if(!this._socket.namespaces[this._socketNamespace.name]){this._socket.namespaces[this._socketNamespace.name]=this._socketNamespace;if(this._socketNamespace.name!=="")this._socket.namespaces[this._socketNamespace.name].packet({type:"connect"})}this._socketNamespace.on("connect",
function(socket){_this._connectHandler(socket)});this._socketNamespace.on("connect_failed",function(){_this._connectFailedHandler()});this._socketNamespace.on("error",function(info){_this._errorHandler(info)});this._socketNamespace.on("disconnect",function(){_this._disconnectHandler()})};SocketConnection.prototype.disconnect=function(){this._socketNamespace.disconnect()};SocketConnection.prototype.connected=function(){return this._socket.connected};SocketConnection.prototype.call=function(funcName){var data=
[];for(var _i=0;_i<arguments.length-1;_i++)data[_i]=arguments[_i+1];this._socketNamespace.emit(funcName,data)};SocketConnection.prototype._connectHandler=function(socket){this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.CONNECTED))};SocketConnection.prototype._connectFailedHandler=function(){this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.CONNECT_FAILED))};SocketConnection.prototype._errorHandler=function(info){com.log("SocketConnection._errorHandler",
info);this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.ERROR,info))};SocketConnection.prototype._disconnectHandler=function(){this._socketNamespace.removeAllListeners("connect");this._socketNamespace.removeAllListeners("connect_failed");this._socketNamespace.removeAllListeners("error");this._socketNamespace.removeAllListeners("disconnect");this._socket=new io.Socket(this._options);this._socketNamespace=new io.SocketNamespace(this._socket,"");var l=this._callBackListeners.length;
for(var i=0;i<l;i++)this._socketNamespace.on(this._callBackListeners[i].type,this._callBackListeners[i].listener);this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.CLOSED))};SocketConnection.prototype.addEventListener=function(type_str,listening_obj,method_str,priority){var _this=this;if(type_str!=com.events.SocketConnectionEvent.CONNECTED&&type_str!=com.events.SocketConnectionEvent.CLOSED&&type_str!=com.events.SocketConnectionEvent.REJECTED&&type_str!=com.events.SocketConnectionEvent.CONNECT_FAILED&&
!this.hasEventListener(type_str)){var listener=function(){var args=[];for(var _i=0;_i<arguments.length-0;_i++)args[_i]=arguments[_i+0];_this.dispatchEvent(new com.events.SocketCallEvent(type_str,args))};this._callBackListeners.push({type:type_str,listener:listener,listening_obj:listening_obj,method_str:method_str});this._socketNamespace.on(type_str,listener)}_super.prototype.addEventListener.call(this,type_str,listening_obj,method_str,priority)};SocketConnection.prototype.removeEventListener=function(type_str,
listening_obj,method_str){if(type_str!=com.events.SocketConnectionEvent.CONNECTED&&type_str!=com.events.SocketConnectionEvent.CLOSED&&type_str!=com.events.SocketConnectionEvent.REJECTED&&type_str!=com.events.SocketConnectionEvent.CONNECT_FAILED&&!this.hasEventListener(type_str)){this._socketNamespace.removeAllListeners(type_str);var l=this._callBackListeners.length;var listener;for(var i=0;i<l;i++){listener=this._callBackListeners[i];if(listener.type==type_str&&listener.listening_obj==listening_obj&&
listener.method_str==method_str){this._callBackListeners.splice(i,1);break}}}else _super.prototype.removeEventListener.call(this,type_str,listening_obj,method_str)};SocketConnection.prototype.transportName=function(){return this._socket&&this._socket["transport"]?this._socket["transport"].name:"unknown"};return SocketConnection}(com.events.EventDispatcher);socket.SocketConnection=SocketConnection})(com.socket||(com.socket={}));var socket=com.socket})(com||(com={}));var com;
(function(com){(function(socket){var FMSConnection=function(_super){__extends(FMSConnection,_super);function FMSConnection(){_super.call(this)}FMSConnection.prototype.connect=function(url,params){_super.prototype.connect.call(this,url,params);this.addEventListener("reject",this,"_rejectHandler")};FMSConnection.prototype._connectHandler=function(){this.addEventListener("accept",this,"_fmsAcceptHandler");this._socketNamespace.emit("connectFMS",this._params)};FMSConnection.prototype._fmsAcceptHandler=
function(){this.removeEventListener("accept",this,"_fmsAcceptHandler");this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.CONNECTED))};FMSConnection.prototype._rejectHandler=function(info){this.removeEventListener("reject",this,"_rejectHandler");this.dispatchEvent(new com.events.SocketConnectionEvent(com.events.SocketConnectionEvent.REJECTED,info))};FMSConnection.prototype.call=function(funcName){var data=[];for(var _i=0;_i<arguments.length-1;_i++)data[_i]=arguments[_i+
1];this._socketNamespace.emit("send",{event:funcName,data:data})};return FMSConnection}(socket.SocketConnection);socket.FMSConnection=FMSConnection})(com.socket||(com.socket={}));var socket=com.socket})(com||(com={}));var memberauction;
(function(memberauction){var UIController=function(_super){__extends(UIController,_super);function UIController(){_super.call(this);this._inited=false}UIController.prototype.setup=function(){if(this._inited)return};UIController.prototype.setComponent=function(id,component){if(this["_"+id]!==undefined)this["_"+id]=component;else throw new Error("Invalid component provided for "+this+": "+id);};UIController.prototype._startPrivateHandler=function(e){};return UIController}(com.events.EventDispatcher);
memberauction.UIController=UIController})(memberauction||(memberauction={}));var com;(function(com){(function(events){var TimerEvent=function(_super){__extends(TimerEvent,_super);function TimerEvent(type){_super.call(this,type)}TimerEvent.TIMER="timer";TimerEvent.TIMER_COMPLETE="timerComplete";return TimerEvent}(events.Event);events.TimerEvent=TimerEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){(function(timer){var Timer=function(_super){__extends(Timer,_super);function Timer(delay,repeatCount){if(typeof repeatCount==="undefined")repeatCount=0;this.currentCount=0,this.lastFired=0,this.running=false,this.startTime=0,this.delay=delay;this.repeatCount=repeatCount>0?repeatCount:0;_super.call(this)}Timer.prototype.start=function(){if(this.running)return;this.startTime=(new Date).getTime();this.lastFired=this.startTime;this.running=true;com.utils.timer.Timer.runningTimers.push(this)};
Timer.prototype.stop=function(){this.running=false;var idx=com.utils.ArrayUtils.indexOf(Timer.runningTimers,this);if(idx!=-1)com.utils.timer.Timer.runningTimers.splice(idx,1)};Timer.prototype.restart=function(){this.reset();this.start()};Timer.prototype.reset=function(){this.stop();this.currentCount=0};Timer.runningTimers=new Array;Timer.update=function update(){var actTime,i,lgth,timer;actTime=(new Date).getTime();lgth=Timer.runningTimers.length-1;for(i=lgth;i>=0;i--){timer=Timer.runningTimers[i];
if(!timer||!timer.running)continue;if(actTime-timer.lastFired<timer.delay)continue;else{timer.currentCount++;timer.lastFired=actTime;timer.dispatchEvent(new com.events.TimerEvent(com.events.TimerEvent.TIMER));if(timer.currentCount==timer.repeatCount&&timer.repeatCount>0){timer.stop();timer.dispatchEvent(new com.events.TimerEvent(com.events.TimerEvent.TIMER_COMPLETE))}}}};Timer.stopAll=function stopAll(){var i,lgth;lgth=Timer.runningTimers.length-1;for(i=lgth;i>=0;i--){var timer=com.utils.timer.Timer.runningTimers[i];
if(timer)timer.stop()}};Timer.shutdown=function shutdown(){com.utils.timer.Timer.stopAll();clearInterval(com.utils.timer.Timer.interval)};Timer.init=function(){if(!Timer.interval)Timer.interval=setInterval(function(){return Timer.update()},50)};return Timer}(com.events.EventDispatcher);timer.Timer=Timer})(utils.timer||(utils.timer={}));var timer=utils.timer})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));com.utils.timer.Timer.init();var memberauction;
(function(memberauction){var ConnectionLogic=function(_super){__extends(ConnectionLogic,_super);function ConnectionLogic(){_super.call(this);this._FMS=new com.socket.FMSConnection;this._config=com.utils.SingletonManager.getInstance(memberauction.Config);this._FMSList=[];this._reconnectTimer=new com.utils.timer.Timer(4E3,10);this._reconnectTimer.addEventListener(com.events.TimerEvent.TIMER,this,"_reconnectTimerHandler")}ConnectionLogic.prototype.controller=function(value){if(arguments.length){this._controller=
value;this.setup()}else return this._controller};ConnectionLogic.prototype.setup=function(){if(!_super.prototype.setup.call(this))return false;return true};ConnectionLogic.prototype._reconnectTimerHandler=function(e){this._reconnectTimer.stop();if(this._connectParams)this.connect(this._connectParams)};ConnectionLogic.prototype.connect=function(params){this._connectParams=params;params.connectParams={sid:this._config.sessionId(),type:"bidder",isMember:true};com.log("ConnectionLogic.connect",params.fmsUrl);
this._FMS.connect(params.socketUrl,params);this._FMS.addEventListener(com.events.SocketConnectionEvent.CONNECTED,this,"acceptHandler");this._FMS.addEventListener(com.events.SocketConnectionEvent.REJECTED,this,"acceptHandler");this._FMS.addEventListener(com.events.SocketConnectionEvent.CLOSED,this,"acceptHandler")};ConnectionLogic.prototype.FMS=function(){return this._FMS};ConnectionLogic.prototype.acceptHandler=function(e){com.log("ConnectionLogic.connectHandler ",e.type,this._FMS.transportName(),
e.info.params?e.info.params:e.info);if(e.type!=com.events.SocketConnectionEvent.CONNECTED)if(this._reconnectTimer.currentCount<5)this._reconnectTimer.start();else{this._reconnectTimer.reset();this._reconnectTimer.stop()}else if(this._reconnectTimer.running){this._reconnectTimer.reset();this._reconnectTimer.stop()}};return ConnectionLogic}(com.core.BaseLogic);memberauction.ConnectionLogic=ConnectionLogic})(memberauction||(memberauction={}));var com;
(function(com){(function(net){var URLResponse=function(){function URLResponse(response,responseJson,responseXml,status,statusText,header,headerText,total,loaded){this.response=response;this.responseJson=responseJson;this.responseXml=responseXml;this.status=status;this.statusText=statusText;this.header=header;this.headerText=headerText;this.total=total;this.loaded=loaded}return URLResponse}();net.URLResponse=URLResponse})(com.net||(com.net={}));var net=com.net})(com||(com={}));var com;
(function(com){(function(events){var URLEvent=function(_super){__extends(URLEvent,_super);function URLEvent(type,urlResponse){_super.call(this,type);this.urlResponse=urlResponse}URLEvent.SUCCESS="success";URLEvent.TIMEOUT="timeout";URLEvent.FAILED="failed";URLEvent.PROGRESS="progress";return URLEvent}(events.Event);events.URLEvent=URLEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;(function(com){})(com||(com={}));var com;
(function(com){(function(net){var URLLoader=function(_super){__extends(URLLoader,_super);function URLLoader(){_super.call(this);this.crossdomainProxyUrl=URLLoader.defaultCrossdomainProxyUrl;this.useCrossdomainProxy=URLLoader.defaultUseCrossdomainProxy;this.timeout=6E3;this.disableCaching=true;this.disableCachingParam="_dc";this.useDefaultHeader=true;this.method="POST";this.headers={};this.json=false;this.isFormData=false;this.noHeader=false;this._inProgress=false;this._isAborted=false}URLLoader.POST_HEADER=
"application/x-www-form-urlencoded; charset=UTF-8";URLLoader.XHR_HEADER="XMLHttpRequest";URLLoader.GET="GET";URLLoader.POST="POST";URLLoader._jsonpRefList={};URLLoader.defaultUseCrossdomainProxy=false;URLLoader.prototype.load=function(config){var _this=this;if(this._inProgress)this.abort();this._isAborted=false;this._inProgress=true;this.url=config.url?config.url:this.url;var url=this.url;this.data=config.data?config.data:this.data;this.method=config.method?config.method:this.method;this.json=config.json?
config.json:this.json;this.timeout=config.timeout?config.timeout:this.timeout;this.isFormData=config.isFormData?config.isFormData:false;this.noHeader=config.noHeader?config.noHeader:false;this.useCrossdomainProxy=config.useCrossdomainProxy!==undefined?config.useCrossdomainProxy:this.useCrossdomainProxy;this.crossdomainProxyUrl=config.crossdomainProxyUrl?config.crossdomainProxyUrl:this.crossdomainProxyUrl;var params;if(this.isFormData)params=this.data;else params=com.utils.StringUtils.urlEncode(this.data);
var crossDomain=url.toLowerCase().indexOf("http://")==0;if(this.method==URLLoader.GET&&this.disableCaching)url+=(url.indexOf("?")!=-1?"&":"?")+this.disableCachingParam+"="+(new Date).getTime();if(this.method==URLLoader.GET&&params){url+=(url.indexOf("?")!=-1?"&":"?")+params;params=""}if(crossDomain){var id=(new Date).getTime()+""+(Math.random()*1E4|0);URLLoader._jsonpRefList[id]=this;if(this.useCrossdomainProxy)url=this.crossdomainProxyUrl+"?callback=com.net.URLLoader._jsonpRefList[%22"+id+"%22]._jsonpResponseHandler&url="+
encodeURIComponent(url+(url.indexOf("?")!=-1?"&":"?"));else url+=(url.indexOf("?")!=-1?"&":"?")+"callback=com.net.URLLoader._jsonpRefList[%22"+id+"%22]._jsonpResponseHandler";var head=document.head||document.getElementsByTagName("head")[0];this._script=document.createElement("script");this._script.setAttribute("src",url);com.events.EventHandler.on(this._script,com.events.Event.ERROR,this,"_jsonpTimeout");this._timeoutTimer=setTimeout(function(){_this._jsonpTimeout()},this.timeout);head.appendChild(this._script)}else{this._httpRequest=
this.createHTTPObject();if(!this._httpRequest){com.utils.ErrorConsole.log("URLLoader.ts xhrrequest nem elerheto.");return}if(!this.url)com.utils.ErrorConsole.log("Url parameter must be given for URLRequest.");if(!this.noHeader){this.headers["X-Requested-With"]=URLLoader.XHR_HEADER;if(params&&this.useDefaultHeader&&!this.headers["Content-Type"])this.headers["Content-Type"]=URLLoader.POST_HEADER}this._httpRequest.open(this.method,url,true);for(var i in this.headers)this._httpRequest.setRequestHeader(i,
this.headers[i]);this._timeoutTimer=setTimeout(function(){_this._timeoutHandler()},this.timeout);this._pollTimer=setInterval(function(){_this._pollHandler()},50);try{this._httpRequest.onprogress=function(e){_this._progressHandler(e)}}catch(Error){}this._httpRequest.send(params)}};URLLoader.prototype.abort=function(){if(this._inProgress){if(this._timeoutTimer){clearTimeout(this._timeoutTimer);this._timeoutTimer=null}if(this._pollTimer){clearInterval(this._pollTimer);this._pollTimer=null}this._httpRequest=
undefined;this._inProgress=false;this._isAborted=true}};URLLoader.prototype._jsonpResponseHandler=function(response){if(this._script){var head=document.head||document.getElementsByTagName("head")[0];head.removeChild(this._script);this._script=null}if(this._timeoutTimer)clearTimeout(this._timeoutTimer);var key=com.utils.ArrayUtils.keyOf(URLLoader._jsonpRefList,this);if(key){delete URLLoader._jsonpRefList[key];if(!this._isAborted){var type=typeof response.contents;var status=response.status.http_code;
try{var responseJson=this.json?window["JSON"]?JSON.parse(response.contents):eval("("+response.contents+")"):null}catch(e){this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject))}var responseObject=new net.URLResponse(response.contents,responseJson,null,response.status.http_code,response.status.http_code_text?response.status.http_code_text:status>=200&&status<300?"OK":"ERROR");this.dispatchEvent(new com.events.URLEvent(status>=200&&status<300?com.events.URLEvent.SUCCESS:
com.events.URLEvent.FAILED,responseObject))}}this._inProgress=false};URLLoader.prototype.inProgress=function(){return this._inProgress};URLLoader.prototype._jsonpTimeout=function(){this._isAborted=true;this._inProgress=false;this._jsonpResponseHandler({});this._timeoutHandler()};URLLoader.prototype._pollHandler=function(){if(this._httpRequest&&this._httpRequest.readyState==4){if(this._timeoutTimer){clearTimeout(this._timeoutTimer);this._timeoutTimer=null}if(this._pollTimer){clearInterval(this._pollTimer);
this._pollTimer=null}this._handleTransactionResponse()}};URLLoader.prototype._progressHandler=function(e){var responseObject=new net.URLResponse;responseObject.total=e.total;responseObject.loaded=e.loaded;this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.PROGRESS,responseObject))};URLLoader.prototype._handleTransactionResponse=function(){this._inProgress=false;var httpStatus;var responseObject;try{httpStatus=this._httpRequest.status||13030}catch(e){httpStatus=13030}if(httpStatus>=200&&
httpStatus<300||com.utils.Browser.msie&&httpStatus==1223){responseObject=this._createResponseObject();this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.SUCCESS,responseObject))}else{var status;var statusText;switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=new net.URLResponse(null,null,null,0,httpStatus+": communication failure");this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject));break;default:responseObject=
this._createResponseObject();this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject));break}}};URLLoader.prototype._createResponseObject=function(){var obj={};var headerObj={};var headerStr="";try{headerStr=this._httpRequest.getAllResponseHeaders();var header=headerStr.split("\n");for(var i=0;i<header.length;i++){var delimitPos=header[i].indexOf(":");if(delimitPos!=-1)headerObj[header[i].substring(0,delimitPos)]=header[i].substring(delimitPos+2)}}catch(e){}var responseJson=
this.json?window["JSON"]?JSON.parse(this._httpRequest.responseText):eval("("+this._httpRequest.responseText+")"):null;return new net.URLResponse(this._httpRequest.responseText,responseJson,this._httpRequest.responseXML,this._httpRequest.status,this._httpRequest.statusText,headerObj,headerStr)};URLLoader.prototype._timeoutHandler=function(){if(this._timeoutTimer)clearTimeout(this._timeoutTimer);if(this._pollTimer)clearInterval(this._pollTimer);if(this._httpRequest){try{this._httpRequest.abort()}catch(e){}this._httpRequest=
undefined}var responseObject=new net.URLResponse(null,null,null,0,"408: request timeout");this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.TIMEOUT,responseObject));this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject))};URLLoader.prototype.createHTTPObject=function(){var http=false;if(typeof ActiveXObject!="undefined")try{http=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP")}catch(E){http=false}}else if(window["XMLHttpRequest"])try{http=
new XMLHttpRequest}catch(e){http=false}return http};return URLLoader}(com.events.EventDispatcher);net.URLLoader=URLLoader})(com.net||(com.net={}));var net=com.net})(com||(com={}));var com;
(function(com){(function(events){var FormEvent=function(_super){__extends(FormEvent,_super);function FormEvent(type,param_data){_super.call(this,type);this.param_data=param_data?param_data:{}}FormEvent.VALIDATE_SUCCESS="validateSuccess";FormEvent.VALIDATE_FAILURE="validateFailure";FormEvent.VALIDATE_REMOTE_SUCCESS="validateRemoteSuccess";FormEvent.VALIDATE_REMOTE_FAILURE="validateRemoteFailure";FormEvent.FORM_RESPONSE_SUCCESS="formResponseSuccess";FormEvent.FORM_RESPONSE_FAILURE="formResponseFailure";
FormEvent.CAPTCHA_SUCCESS="captchaSuccess";FormEvent.CAPTCHA_FAILURE="captchaFailed";return FormEvent}(events.Event);events.FormEvent=FormEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var AuctionWinnersManagerEvent=function(_super){__extends(AuctionWinnersManagerEvent,_super);function AuctionWinnersManagerEvent(type,value){_super.call(this,type);this.value=value}AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS="loadedAuctionWinners";AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS_FAILED="loadedAuctionWinnersFailed";return AuctionWinnersManagerEvent}(com.events.Event);events.AuctionWinnersManagerEvent=AuctionWinnersManagerEvent})(com.events||
(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(managers){(function(auction){var AuctionWinnersManager=function(_super){__extends(AuctionWinnersManager,_super);function AuctionWinnersManager(){_super.call(this);this._loader=new com.net.URLLoader;this._loader.addEventListener(com.events.URLEvent.SUCCESS,this,"_loadedHandler");this._loader.addEventListener(com.events.URLEvent.FAILED,this,"_errorHandler")}AuctionWinnersManager.prototype.loadAuctionWinners=function(){if(this._serviceURL!=null&&this._serviceURL!=undefined){this._loaderConfig=
{url:this._serviceURL,json:true,method:com.net.URLLoader.GET};this._loader.load(this._loaderConfig)}};AuctionWinnersManager.prototype._loadedHandler=function(e){try{if(e.urlResponse["statusText"]=="OK"){var data=e.urlResponse["response"];this.dispatchEvent(new com.events.AuctionWinnersManagerEvent(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS,data))}else this.dispatchEvent(new com.events.AuctionWinnersManagerEvent(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS_FAILED,
e.urlResponse))}catch(e){this.dispatchEvent(new com.events.AuctionWinnersManagerEvent(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS_FAILED,e.urlResponse))}};AuctionWinnersManager.prototype._errorHandler=function(e){this.dispatchEvent(new com.events.AuctionWinnersManagerEvent(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS_FAILED,e.urlResponse))};AuctionWinnersManager.prototype.serviceURL=function(value){if(arguments.length)this._serviceURL=value;return this._serviceURL};
return AuctionWinnersManager}(com.events.EventDispatcher);auction.AuctionWinnersManager=AuctionWinnersManager})(managers.auction||(managers.auction={}));var auction=managers.auction})(com.managers||(com.managers={}));var managers=com.managers})(com||(com={}));var memberauction;
(function(memberauction){var NumberSlider=function(){function NumberSlider(){this.mode=NumberSlider.COUNT_UP}NumberSlider.COUNT_DOWN="countDown";NumberSlider.COUNT_UP="countUp";NumberSlider.prototype.element=function(value){if(arguments.length)this._element=value;else return this._element;this._init()};NumberSlider.prototype.value=function(value){if(arguments.length){if(this._value==value)return;if(this._element&&this._value==null){this._value=value;this._targetValue=value;this._masterInner.innerHTML=
value+""}else{this._value=value;this._playTween()}}else return this._value};NumberSlider.prototype._playTween=function(){if(this._value==this._targetValue)return;this._targetValue=this._value;var tempInner=this._masterInner;this._masterInner=this._slaveInner;this._slaveInner=tempInner;if(this.mode==NumberSlider.COUNT_UP){this._slaveInner.innerHTML=this._value+"";this._slaveInner.style.top="-"+this._element.clientHeight+"px";TweenLite.to(this._masterInner,0.3,{top:this._element.clientHeight+"px",ease:Bounce.easeOut});
TweenLite.to(this._slaveInner,0.3,{top:"0px",ease:Bounce.easeOut})}else{this._slaveInner.innerHTML=this._value+"";this._slaveInner.style.top=this._element.clientHeight+"px";TweenLite.to(this._slaveInner,0.3,{top:"0px",ease:Bounce.easeOut});TweenLite.to(this._masterInner,0.3,{top:"-"+this._element.clientHeight+"px",ease:Bounce.easeOut})}};NumberSlider.prototype._init=function(){if(this._element){this._element.style.position="relative";this._element.style.overflow="hidden";this._inner1=document.createElement("div");
this._inner1.id="slider"+(Math.random()*1E3|0)+"_1";this._inner1.style.position="absolute";this._inner1.style.width=this._element.clientWidth+"px";this._inner1.style.height=this._element.clientHeight+"px";if(navigator.appVersion.indexOf("MSIE 7.")!=-1)this._inner1.style.left=0+"px";this._element.appendChild(this._inner1);this._inner2=document.createElement("div");this._inner2.style.position="absolute";this._inner2.style.width=this._element.clientWidth+"px";this._inner2.style.height=this._element.clientHeight+
"px";if(navigator.appVersion.indexOf("MSIE 7.")!=-1)this._inner2.style.left=0+"px";this._inner2.id="slider"+(Math.random()*1E3|0)+"_2";this._element.appendChild(this._inner2);this._masterInner=this._inner1;this._slaveInner=this._inner2}};return NumberSlider}();memberauction.NumberSlider=NumberSlider})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var AuctionSlider=function(){function AuctionSlider(sliderElementList){this._numSliderList=[];var length=sliderElementList.length;for(var i=0;i<length;i++){var numSlider=new memberauction.NumberSlider;numSlider.element(sliderElementList[i]);this._numSliderList.push(numSlider)}}AuctionSlider.prototype.sliderValue=function(value){if(value==undefined)return;var nValue=value|0;nValue=nValue>999?999:nValue<0?0:nValue;var sValue=com.utils.StringUtils.formatNumber(nValue,3);if(this._numSliderList.length==
sValue.length)for(var i=0;i<sValue.length;i++)this._numSliderList[i].value(+sValue.charAt(i))};return AuctionSlider}();memberauction.AuctionSlider=AuctionSlider})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var AuctionController=function(_super){__extends(AuctionController,_super);function AuctionController(){_super.call(this);this._inited=false;this._infoOpen=false;this._auctionSlider=new memberauction.AuctionSlider(com.get("[id^=memberauction_app_gyroscope_]"));this.currentBid(0);this._infoButton=com.get("#memberauction_game_rules");this._infoButtonOrigHeight=com.get("#memberauction_info_box").height()+"";this._infoButtonOrigPadding=com.get("#memberauction_info_box").css("padding");
com.get("#memberauction_info_box").height("0px");com.get("#memberauction_info_box").css("padding","0px");this._infoButton.on(com.events.MouseEvent.CLICK,this,"_infoButtonClickHandler")}AuctionController.prototype.setup=function(){if(this._inited)return};AuctionController.prototype.status=function(value){this._status=value;switch(this._status){case memberauction.AuctionStatus.OPEN:com.get(".memberauction_app_gyroscope").removeClass("disabled");com.get("#memberauction_time_remaining_text")[0].style.display=
"block";com.get("#memberauction_leading_box").show();com.get("#memberauction_credit_box").show();break;case memberauction.AuctionStatus.PENDING:com.get(".memberauction_app_gyroscope").addClass("disabled");com.get("#memberauction_time_remaining_text")[0].style.display="none";com.get("#memberauction_leading_box").hide();break}};AuctionController.prototype.auctionPrice=function(value){this._auctionPrice=value;com.get("#memberauction_get_credits")[0].innerHTML=this._auctionPrice};AuctionController.prototype.memberId=
function(value){this._memberId=value};AuctionController.prototype.remainingTime=function(value){com.get("#memberauction_time_text")[0].innerHTML=com.utils.StringUtils.formatNumber(value/60|0)+":"+com.utils.StringUtils.formatNumber(value%60|0);var min=value%60;if(min<=10&&min>0&&!TweenMax.isTweening(com.get("#memberauction_time_text")[0]))TweenMax.to(com.get("#memberauction_time_text")[0],0.5,{alpha:0.2,repeat:-1,yoyo:true,ease:Linear.easeNone});else if((min==0||min>10)&&TweenMax.isTweening(com.get("#memberauction_time_text")[0])){TweenMax.killTweensOf(com.get("#memberauction_time_text")[0]);
com.get("#memberauction_time_text").css({"opacity":"1"})}};AuctionController.prototype.currentBid=function(value){this._currentBid=value;if(this._auctionSlider)this._auctionSlider.sliderValue(this._currentBid)};AuctionController.prototype.showBeFirst=function(memberId){com.get("#memberauction_leading_credits_text").hide();com.get("#memberauction_member_id_text")[0].innerHTML=memberId;com.get("#memberauction_by_first_text")[0].style.display="inline"};AuctionController.prototype.currentWinnerInfo=function(winnerMemberId,
bid){if(winnerMemberId!=null||winnerMemberId!=undefined){com.get("#memberauction_by_first_text")[0].style.display="none";com.get("#memberauction_leading_credits_text")[0].style.display="inline";com.get("#memberauction_member_id_text")[0].innerHTML=winnerMemberId;com.get("#memberauction_leading_credits")[0].innerHTML=bid}};AuctionController.prototype.balance=function(privateBalance,gameBalance){com.get("#memberauction_private_credits")[0].innerHTML=privateBalance+"";com.get("#memberauction_game_credits")[0].innerHTML=
gameBalance+""};AuctionController.prototype.showAuctionCreditBox=function(){com.get("#memberauction_credit_box").show()};AuctionController.prototype._infoButtonClickHandler=function(e){TweenLite.to(com.get("#memberauction_info_box")[0],0.3,{delay:this._infoOpen?0:0.05,height:this._infoOpen?"0px":this._infoButtonOrigHeight});TweenLite.to(com.get("#memberauction_info_box")[0],0.05,{delay:this._infoOpen?0.3:0,padding:this._infoOpen?"0px":this._infoButtonOrigPadding});this._infoOpen=!this._infoOpen;com.get("#game_rules_arrow_top").css("visibility",
this._infoOpen?"visible":"hidden");com.get("#game_rules_arrow_bottom").css("visibility",this._infoOpen?"hidden":"visible")};return AuctionController}(com.events.EventDispatcher);memberauction.AuctionController=AuctionController})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var AuctionClosedController=function(_super){__extends(AuctionClosedController,_super);function AuctionClosedController(){_super.call(this);this._inited=false;this._soldLabel=com.get("#memberauction_sold");this._soldLabel.hide();com.get("#memberauction_winners_box").hide()}AuctionClosedController.prototype.setup=function(){if(this._inited)return};AuctionClosedController.prototype.status=function(value){this._status=value;switch(this._status){case memberauction.AuctionStatus.OPEN:com.get("#memberauction_time_start_text").hide();
com.get("#memberauction_winner_content").hide();com.get("#memberauction_winners_box").hide();this._soldLabel.hide();break;case memberauction.AuctionStatus.PENDING:com.get("#memberauction_winner_content").show();com.get("#memberauction_time_start_text ").show();com.get("#memberauction_time_text")[0].innerHTML=this.setNextAuctionDisplay(this._nextAuctionDate);this._soldLabel.show();break}};AuctionClosedController.prototype.nextAuctionPrice=function(value){this._nextAuctionPrice=value;com.get("#memberauction_get_credits")[0].innerHTML=
this._nextAuctionPrice};AuctionClosedController.prototype.nextAuctionDate=function(date){if(date)this._nextAuctionDate=date};AuctionClosedController.prototype.timeFormat24=function(value){this._timeFormat24=value};AuctionClosedController.prototype.winnerInfo=function(memberId,bid){if(memberId!=null||memberId!=undefined){com.get("#memberauction_member_id_winner_text")[0].innerHTML=memberId;com.get("#memberauction_won_credits")[0].innerHTML=bid}};AuctionClosedController.prototype.showAuctionWinners=
function(list){var winnerCards=com.get("[id ^= memberauction_winner_card_]");var l=winnerCards.length<=list.length?winnerCards.length:list.length;for(var i=0;i<l;i++){var winC=com.get("#memberauction_winner_card_"+(i+1));winC.find(".memberauction_winner_member_id").html(list[i]["member_id"]);winC.find(".memberauction_winn_get_credits").html(list[i]["won_credit"]);winC.find(".memberauction_winn_total_credits").html(list[i]["won_with_credit"]||this._nextAuctionPrice)}com.get("#memberauction_winners_box").show();
com.get("#memberauction_credit_box").hide()};AuctionClosedController.prototype.setNextAuctionDisplay=function(date){var time="";var hTime=this._timeFormat24?date.getHours():(date.getHours()+11)%12+1;var prefix=this._timeFormat24?"":date.getHours()>=12?" pm":" am";var min=com.utils.StringUtils.formatNumber(date.getMinutes()|0);var hours=com.utils.StringUtils.formatNumber(hTime|0);time=hours+":"+min+prefix;return time};return AuctionClosedController}(com.events.EventDispatcher);memberauction.AuctionClosedController=
AuctionClosedController})(memberauction||(memberauction={}));var memberauction;(function(memberauction){var FMSCall=function(){function FMSCall(){}FMSCall.SEND_REMAINING_TIME="sendRemainingTime";FMSCall.START_AUCTION="startAuction";FMSCall.END_AUCTION="endAuction";FMSCall.SEND_USER_DATA="sendUserData";FMSCall.SEND_NEW_BID_RESULT="sendNewBidResult";FMSCall.ADD_BID_RESULT="addBidResult";return FMSCall}();memberauction.FMSCall=FMSCall})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var AuctionLogic=function(_super){__extends(AuctionLogic,_super);function AuctionLogic(){_super.call(this);this._lastBid=0;this._config=com.utils.SingletonManager.getInstance(memberauction.Config);this._config.addEventListener(memberauction.ConfigChangeEvent.STATUS,this,"_statusChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.NEXT_AUCTION_TIME_STAMP,this,"_nextAuctionTimeStampChangeHandler");this._auctionWinnersManagers=new com.managers.auction.AuctionWinnersManager;
this._auctionWinnersManagers.serviceURL(com.singletons.URLProvider.url("auction_winner_service",{limit:"5",requestId:(new Date).getTime(),mask:1}));this._auctionWinnersManagers.addEventListener(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS,this,"_auctionWinnersLoadedHandler");this._auctionWinnersManagers.addEventListener(com.events.AuctionWinnersManagerEvent.LOADED_AUCTION_WINNERS_FAILED,this,"_auctionWinnersLoadedFailedHandler")}AuctionLogic.prototype.auctionController=function(value){if(arguments.length){this._auctionController=
value;this.setup()}else return this._auctionController};AuctionLogic.prototype.auctionClosedController=function(value){if(arguments.length){this._auctionClosedController=value;this.setup()}else return this._auctionClosedController};AuctionLogic.prototype.setup=function(){if(!this._FMS||!_super.prototype.setup.call(this))return false;this._FMS.addEventListener(memberauction.FMSCall.SEND_REMAINING_TIME,this,"_setRemainingTime");this._FMS.addEventListener(memberauction.FMSCall.START_AUCTION,this,"_startAuction");
this._FMS.addEventListener(memberauction.FMSCall.END_AUCTION,this,"_endAuction");this._FMS.addEventListener(memberauction.FMSCall.SEND_USER_DATA,this,"_setUserData");this._FMS.addEventListener(memberauction.FMSCall.SEND_NEW_BID_RESULT,this,"_newBidHandler");return true};AuctionLogic.prototype.FMS=function(FMS){this._FMS=FMS;this.setup()};AuctionLogic.prototype._setRemainingTime=function(e){this._config.remainingTime(e.params[0]<0?0:e.params[0]|0);this._config.currentBid(e.params[1]);if(this._auctionController){this._auctionController.remainingTime(this._config.remainingTime());
this._auctionController.currentBid(e.params[1])}};AuctionLogic.prototype._newBidHandler=function(e){com.log("newBid",e.params);this._config.remainingTime(e.params[0].remainingTime<0?0:e.params[0].remainingTime|0);this._config.currentBid(e.params[0].currentCredit);this._config.currentMemberId(e.params[0].currentMemberId);this._config.bidLimit(e.params[0].licitLimit);this._config.bidCount(e.params[0].licitCount);if(this._auctionController){this._auctionController.remainingTime(this._config.remainingTime());
this._auctionController.currentBid(e.params[1]);this._auctionController.currentWinnerInfo(this._config.currentMemberId(),this._config.currentBid());var privateBalance=this._config.currentMemberId()==this._config.memberId()?Math.round((this._config.privateBalance()-this._config.currentBid())*100)/100:this._config.privateBalance();var gameBalance=this._config.currentMemberId()==this._config.memberId()?Math.round((this._config.gameBalance()-this._config.currentBid())*100)/100:this._config.gameBalance();
if(this._lastBid!=0){gameBalance=parseFloat(gameBalance+"")+parseFloat(this._lastBid+"");privateBalance=parseFloat(privateBalance+"")+parseFloat(this._lastBid+"");this._config.privateBalance(privateBalance);this._config.gameBalance(gameBalance);this._lastBid=0}this._auctionController.balance(+privateBalance.toFixed(2)*100/100,+gameBalance.toFixed(2)*100/100)}};AuctionLogic.prototype._startAuction=function(e){com.log("startAuction",e.params);this._config.auctionPrice(e.params[0]);this._config.currentMemberId(null);
this._config.status(memberauction.AuctionStatus.OPEN);this._HUB.sendNote(this,memberauction.HUBNote.AUCTION_JS_STATUS,memberauction.AuctionStatus.AUCTION_START);this._config.bidCount(0);this._auctionController.showBeFirst(this._config.memberId())};AuctionLogic.prototype._endAuction=function(e){com.log("endAuction",e.params[0]);this._config.nextAuctionTimestamp(e.params[0].nextAuctionTime);this._config.nextAuctionPrice(e.params[0].nextAuctionPrice);this._config.status(memberauction.AuctionStatus.PENDING);
this._HUB.sendNote(this,memberauction.HUBNote.AUCTION_JS_STATUS,memberauction.AuctionStatus.AUCTION_END);this._config.currentMemberId(e.params[0].currentMemberId);this._config.currentBid(e.params[0].currentCredit);this._config.remainingTime(e.params[0].remainingTime);this._config.endBid(e.params[0].endCredit);this._config.wonCredit(e.params[0].wonCredit);this._config.winnerMemberId(e.params[0].winner);this._config.bidLimit(e.params[0].licitLimit);if(this._auctionClosedController){this._auctionClosedController.nextAuctionPrice(this._config.nextAuctionPrice()+
"");this._auctionClosedController.winnerInfo(this._config.winnerMemberId(),this._config.endBid())}};AuctionLogic.prototype._setUserData=function(e){com.log("setUserData",e.params[0]);this._config.memberId(e.params[0].memberid);this._config.userType(e.params[0].type);this._config.remainingTime(e.params[0].remainingTime<0?0:e.params[0].remainingTime|0);this._config.auctionPrice(e.params[0].auctionPrice);this._config.privateBalance(e.params[0].privateBalance);this._config.gameBalance(e.params[0].balance);
this._config.currentBid(e.params[0].currentCredit);this._config.currentMemberId(e.params[0].currentMemberId);this._config.bidLimit(e.params[0].licitLimit);this._config.bidCount(e.params[0].licitCount);this._config.nextAuctionTimestamp(e.params[0].nextAuctionTimestamp);this._config.nextAuctionPrice(e.params[0].nextAuctionPrice);this._config.prevAuctionPrice(e.params[0].prevAuctionPrice);this._config.winnerMemberId(e.params[0].winner);this._config.wonCredit(e.params[0].wonCredit);if(this._auctionController){if(e.params[0].status==
memberauction.AuctionStatus.OPEN){this._HUB.sendNote(this,memberauction.HUBNote.AUCTION_JS_STATUS,memberauction.AuctionStatus.AUCTION_IN_PROGRESS);if(this._config.currentBid()==0)this._auctionController.showBeFirst(this._config.memberId());else this._auctionController.currentWinnerInfo(this._config.currentMemberId(),this._config.currentBid())}if(this._config.status()==memberauction.AuctionStatus.OPEN){this._auctionController.currentWinnerInfo(this._config.currentMemberId(),this._config.currentBid());
this._auctionController.remainingTime(this._config.remainingTime());this._auctionController.auctionPrice(this._config.auctionPrice()+"")}else{if(this._auctionClosedController){this._auctionClosedController.nextAuctionPrice(this._config.nextAuctionPrice()+"");this._auctionClosedController.winnerInfo(this._config.winnerMemberId(),this._config.wonCredit())}if(e.params[0].status==memberauction.AuctionStatus.PENDING)this._auctionController.currentBid(this._config.wonCredit())}this._auctionController.memberId(this._config.memberId());
if(this._config.currentMemberId()==this._config.memberId())this._lastBid=this._config.currentBid();this._auctionController.balance(+this._config.privateBalance().toFixed(2)*100/100,+this._config.gameBalance().toFixed(2)*100/100)}this._config.status(e.params[0].status)};AuctionLogic.prototype._statusChangeHandler=function(e){switch(this._config.status()){case memberauction.AuctionStatus.OPEN:break;case memberauction.AuctionStatus.PENDING:this._auctionWinnersManagers.loadAuctionWinners();break}if(this._auctionController)this._auctionController.status(this._config.status());
if(this._auctionClosedController)this._auctionClosedController.status(this._config.status())};AuctionLogic.prototype._nextAuctionTimeStampChangeHandler=function(e){var time=(this._config.nextAuctionTimestamp()+this._config.gmtOffset())*1E3;var date=new Date(time);this._config.nextAuctionDate(date);if(this._auctionClosedController){this._auctionClosedController.timeFormat24(this._config.timeFormat24());this._auctionClosedController.nextAuctionDate(this._config.nextAuctionDate())}};AuctionLogic.prototype._auctionWinnersLoadedHandler=
function(e){if(this._auctionClosedController)this._auctionClosedController.showAuctionWinners(e.value)};AuctionLogic.prototype._auctionWinnersLoadedFailedHandler=function(e){if(this._auctionController)this._auctionController.showAuctionCreditBox()};return AuctionLogic}(com.core.BaseLogic);memberauction.AuctionLogic=AuctionLogic})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var UserType=function(){function UserType(){}UserType.GUEST="guest";UserType.MEMEBER="member";return UserType}();memberauction.UserType=UserType})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var BidResultMessage=function(){function BidResultMessage(){}BidResultMessage.NOT_ENOUGH_BALANCE="Not enough balance";BidResultMessage.BID_PROGRESS="BID PROGRESS";BidResultMessage.BID_LIMIT_REACHED="Bid limit reached";BidResultMessage.OVER_BID_RESTRICTED="Overbid restricted";return BidResultMessage}();memberauction.BidResultMessage=BidResultMessage})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var BidControllerEvent=function(_super){__extends(BidControllerEvent,_super);function BidControllerEvent(type){_super.call(this,type)}BidControllerEvent.ADD_BID="addBid";return BidControllerEvent}(com.events.Event);memberauction.BidControllerEvent=BidControllerEvent})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var MinToolTip=function(){function MinToolTip(content){this._offsetX=-5;this._toolTipInited=false;this._content=content}MinToolTip.prototype.showToolTip=function(){this._toolTipInited=true;this._content[0].style.left=com.get("#memberauction_bid_button")[0].offsetLeft+(com.get("#memberauction_bid_button")[0].offsetWidth*0.5-this._content[0].offsetWidth*0.5)+"px";this._content[0].style.opacity="1";this._content[0].style.visibility="visible"};MinToolTip.prototype.hideToolTip=
function(){this._toolTipInited=false;if(this._content){this._content[0].style.opacity="0";this._content[0].style.visibility="hidden"}};MinToolTip.prototype.toolTipInited=function(value){if(arguments.length)this._toolTipInited=value;return this._toolTipInited};return MinToolTip}();memberauction.MinToolTip=MinToolTip})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var BidController=function(_super){__extends(BidController,_super);function BidController(){_super.call(this);this._inited=false;this._bidButtonStatus=BidController.BID_BUTTON_DISABLED;this._gameBalance=0;this._currentBid=0;this._bidButton=com.get("#memberauction_bid_button")[0];this._buyCreditToolTip=new memberauction.MinToolTip(com.get("#memberauction_buycredit_tooltip"));this._bidToolTip=new memberauction.MinToolTip(com.get("#memberauction_bid_tooltip"));this._hurryToolTip=
new memberauction.MinToolTip(com.get("#memberauction_hurry_tooltip"))}BidController.BID_BUTTON_ACTIVE="bidButtonActive";BidController.BID_BUTTON_DISABLED="bidButtonDisabled";BidController.prototype.setup=function(){if(this._inited)return};BidController.prototype.status=function(value){this._status=value;switch(this._status){case memberauction.AuctionStatus.OPEN:this.bidButtonStatus(this._gameBalance>this._currentBid?BidController.BID_BUTTON_ACTIVE:BidController.BID_BUTTON_DISABLED);this._bidButton.style.display=
"inline-block";break;case memberauction.AuctionStatus.PENDING:this._bidButton.style.display="none";this.bidButtonStatus(BidController.BID_BUTTON_DISABLED);this._hideBidToolTip();this._buyCreditToolTip.hideToolTip();break}};BidController.prototype.userType=function(value){this._userType=value};BidController.prototype.bidLeft=function(value){if(arguments.length){this._bidLeft=value;com.get("#memberauction_no_bid_left").hide();com.get("#memberauction_bids_left").show();com.get("#memberauction_bid_count")[0].innerHTML=
value+"";if(this._bidLeft==0&&this._status==memberauction.AuctionStatus.OPEN){com.get("#memberauction_no_bid_left").show();com.get("#memberauction_bids_left").hide();this.bidButtonStatus(BidController.BID_BUTTON_DISABLED);this.hideHurryToolTip()}}else return this._bidLeft};BidController.prototype.currentBid=function(value){if(arguments.length)this._currentBid=value;else return this._currentBid};BidController.prototype.gameBalance=function(value){if(arguments.length){this._gameBalance=value;if(this._gameBalance<=
this._currentBid&&this._status==memberauction.AuctionStatus.OPEN&&this._bidLeft>0){this._buyCreditToolTip.showToolTip();this.hideHurryToolTip();this._hideBidToolTip();this.bidButtonStatus(BidController.BID_BUTTON_DISABLED)}else if(this._buyCreditToolTip.toolTipInited())this._buyCreditToolTip.hideToolTip()}else return this._gameBalance};BidController.prototype.isFirstPlace=function(value){this._isFirstPlace=value;if(this._isFirstPlace){this.bidButtonStatus(BidController.BID_BUTTON_DISABLED);this.hideHurryToolTip()}else if(this._gameBalance>
this._currentBid)this.bidButtonStatus(BidController.BID_BUTTON_ACTIVE)};BidController.prototype.showHurryToolTip=function(value){if(this._bidButtonStatus==BidController.BID_BUTTON_ACTIVE&&this._bidLeft>0&&this._gameBalance>this._currentBid){com.get("#memberauction_sec_left")[0].innerHTML=value+"";if(value<=1)this.hideHurryToolTip();else if(!this._hurryToolTip.toolTipInited()&&value>1)this._hurryToolTip.showToolTip()}};BidController.prototype.hideHurryToolTip=function(){this._hurryToolTip.hideToolTip()};
BidController.prototype.showBidResultDialog=function(bidResult){};BidController.prototype._showBidToolTip=function(){this._bidToolTip.showToolTip()};BidController.prototype._hideBidToolTip=function(){this._bidToolTip.hideToolTip()};BidController.prototype._bidButtonClickHandler=function(e){if(this._userType!=memberauction.UserType.GUEST)if(!this._isFirstPlace){this.bidButtonStatus(BidController.BID_BUTTON_DISABLED);this.dispatchEvent(new memberauction.BidControllerEvent(memberauction.BidControllerEvent.ADD_BID))}};
BidController.prototype.bidButtonStatus=function(status){this._bidButtonStatus=status;if(status==BidController.BID_BUTTON_ACTIVE){com.get("#memberauction_bid_button").removeClass("disabled");com.get("#memberauction_bid_button").addClass("active");com.events.EventHandler.on(this._bidButton,com.events.MouseEvent.CLICK,this,"_bidButtonClickHandler");com.events.EventHandler.on(this._bidButton,com.events.MouseEvent.MOUSE_OVER,this,"_showBidToolTip");com.events.EventHandler.on(this._bidButton,com.events.MouseEvent.MOUSE_OUT,
this,"_hideBidToolTip")}else{com.get("#memberauction_bid_button").removeClass("active");com.get("#memberauction_bid_button").addClass("disabled");com.events.EventHandler.un(this._bidButton,com.events.MouseEvent.CLICK,this,"_bidButtonClickHandler");if(this._bidLeft>0){this._bidToolTip.hideToolTip();com.events.EventHandler.un(this._bidButton,com.events.MouseEvent.MOUSE_OVER,this,"_showBidToolTip");com.events.EventHandler.un(this._bidButton,com.events.MouseEvent.MOUSE_OUT,this,"_hideBidToolTip")}}};
return BidController}(com.events.EventDispatcher);memberauction.BidController=BidController})(memberauction||(memberauction={}));var memberauction;
(function(memberauction){var BidLogic=function(_super){__extends(BidLogic,_super);function BidLogic(){_super.call(this);this._config=com.utils.SingletonManager.getInstance(memberauction.Config);this._config.addEventListener(memberauction.ConfigChangeEvent.STATUS,this,"statusChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.USER_TYPE,this,"userTypeChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.MEMBER_ID,this,"memberIdChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.CURRENT_MEMBER_ID,
this,"memberIdChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.BID_COUNT,this,"_bidCountChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.CURRENT_BID,this,"_currentBidChangeHandler");this._config.addEventListener(memberauction.ConfigChangeEvent.REMANING_TIME,this,"_remainingTimeChangeHandler")}BidLogic.prototype.controller=function(value){if(arguments.length){this._controller=value;this.setup()}else return this._controller};BidLogic.prototype.setup=
function(){if(!this._controller||!this._FMS||!_super.prototype.setup.call(this))return false;this._controller.status(this._config.status());this._controller.isFirstPlace(this._config.memberId()!=""&&this._config.memberId()!=undefined&&this._config.memberId()==this._config.currentMemberId());this._controller.userType(this._config.userType());this._controller.bidLeft(this._config.bidLimit()-this._config.bidCount());this._controller.addEventListener(memberauction.BidControllerEvent.ADD_BID,this,"_addBidHandler");
return true};BidLogic.prototype.statusChangeHandler=function(e){if(this._controller){this._controller.status(this._config.status());this._controller.currentBid(this._config.currentBid());this._setCurrentGameBallance()}};BidLogic.prototype.userTypeChangeHandler=function(e){if(this._controller)this._controller.userType(this._config.userType())};BidLogic.prototype.memberIdChangeHandler=function(e){if(this._controller){this._setCurrentGameBallance();this._controller.isFirstPlace(this._config.memberId()!=
""&&this._config.memberId()!=undefined&&this._config.memberId()==this._config.currentMemberId());this._controller.bidLeft(this._config.bidLimit()-this._config.bidCount())}};BidLogic.prototype._bidCountChangeHandler=function(e){if(this._controller)this._controller.bidLeft(this._config.bidLimit()-this._config.bidCount())};BidLogic.prototype._currentBidChangeHandler=function(e){if(this._controller){this._controller.currentBid(this._config.currentBid());this._setCurrentGameBallance();this._controller.bidLeft(this._config.bidLimit()-
this._config.bidCount())}};BidLogic.prototype._addBidHandler=function(e){if(this._FMS&&this._config.bidLimit()>this._config.bidCount())this._FMS.call("addBid",1,this._config.sessionId(),this._config.brandId())};BidLogic.prototype._remainingTimeChangeHandler=function(e){if(this._controller){if(this._config.remainingTime()<6)this._controller.showHurryToolTip(this._config.remainingTime());if(e.oldValue<6&&this._config.remainingTime()>5)this._controller.hideHurryToolTip()}};BidLogic.prototype.FMS=function(FMS){this._FMS=
FMS;this.setup();this._FMS.addEventListener(memberauction.FMSCall.ADD_BID_RESULT,this,"_addBidResultHandler")};BidLogic.prototype._setCurrentGameBallance=function(){if(this._controller){var gameBalance=Math.floor(this._config.gameBalance());this._controller.gameBalance(gameBalance)}};BidLogic.prototype._addBidResultHandler=function(e){if(e.params[0].err_desc!="OK")if(this._controller)this._controller.showBidResultDialog(e.params[0].err_desc)};return BidLogic}(com.core.BaseLogic);memberauction.BidLogic=
BidLogic})(memberauction||(memberauction={}));"use strict";var memberauction;
(function(memberauction){var MemberAuction=function(_super){__extends(MemberAuction,_super);function MemberAuction(skin,params){_super.call(this);this._skin=skin;this._params=params||{};this._config=com.utils.SingletonManager.getInstance(memberauction.Config);this._config.setup(this._params);var consoleLogConfig={applicationName:"MemberAuction",cookieName:"forceConsole",debugMode:false};com.setlog(consoleLogConfig);com.log("params",this._params);this._urlProvider=com.utils.SingletonManager.getInstance(com.singletons.URLProvider);
this._urlProvider.urlData(JSON.parse(this._config.appletURL()));this.addController(memberauction.ConnectionLogic,memberauction.UIController);this.addController(memberauction.AuctionLogic,memberauction.AuctionController);this.addController(memberauction.AuctionLogic,memberauction.AuctionClosedController);this.addController(memberauction.BidLogic,memberauction.BidController);this.init();this.preparingHandler()}MemberAuction.prototype.preparingHandler=function(e){if(true){this._registerControllers();
this._FMS=this._logicList["connectionLogic"].FMS();this._FMS.addEventListener(com.events.SocketConnectionEvent.CONNECTED,this,"_socketConnectionHandler");this._FMS.addEventListener(com.events.SocketConnectionEvent.REJECTED,this,"_socketConnectionHandler");this._FMS.addEventListener(com.events.SocketConnectionEvent.CLOSED,this,"_socketConnectionHandler");this.setLogics();this._logicList["connectionLogic"].connect(new com.socket.FMSConnectionData("http://"+this._config.nodeIp()+"/"+this._config.nodeApplication(),
"rtmp://"+this._config.ip()+"/"+this._config.fmsApplication()+"/_definst_",{}));this._HUB.addHandler(memberauction.HUBNote.AUCTION_JS_STATUS,this,"_auctionStatusForJS")}};MemberAuction.prototype.setLogics=function(){var s;for(s in this._logicList)if(s!="connectionLogic")this._logicList[s].FMS(this._FMS)};MemberAuction.prototype._socketConnectionHandler=function(e){if(this._params["connectionInfo"]){var connectionInfo=this._params["connectionInfo"];connectionInfo(e.type==com.events.SocketConnectionEvent.CONNECTED,
e.type)}};MemberAuction.prototype._auctionStatusForJS=function(status){if(this._params["auctionStatus"]){var auctionStatus=this._params["auctionStatus"];auctionStatus(status)}};MemberAuction.prototype.memberAuctionDisconnect=function(){if(this._FMS&&this._FMS.connected())this._FMS.disconnect()};return MemberAuction}(com.core.ProjectBase);memberauction.MemberAuction=MemberAuction})(memberauction||(memberauction={}));var com;
(function(com){(function(utils){var ArrayUtils=function(){function ArrayUtils(){}ArrayUtils.indexOf=function indexOf(object,search){if(Array.prototype.hasOwnProperty("indexOf"))return object.indexOf(search);else{var l=object.length;for(var i=0;i<l;i++)if(object[i]===search)return i;return-1}};ArrayUtils.keyOf=function keyOf(object,search){for(var i in object)if(object[i]==search)return i};ArrayUtils.isArray=function isArray(v){return toString.apply(v)==="[object Array]"};ArrayUtils.isArrayLike=function isArrayLike(obj){var length=
obj.length,type=typeof obj;if(obj!=null&&obj==obj.window)return false;if(obj.nodeType===1&&length)return true;return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1).toString()in obj};ArrayUtils.each=function each(obj,callback,args){var value,i,length=obj.length,isArray=ArrayUtils.isArrayLike(obj);if(args)if(isArray)for(i=0;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(i=
0;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false)break}return obj};ArrayUtils.getObjectLength=function getObjectLength(obj){var length=0;for(var i in obj)length++;return length};ArrayUtils.mergeObject=function mergeObject(defaultObj,obj){var newObj={};for(var i in defaultObj)newObj[i]=defaultObj[i];for(var j in obj)newObj[j]=obj[j];return newObj};ArrayUtils.mergeArray=function mergeArray(defaultArray,
array){var l=array.length,i=defaultArray.length,j=0;if(typeof l==="number")for(;j<l;j++)defaultArray[i++]=array[j];else while(array[j]!==undefined)defaultArray[i++]=array[j++];defaultArray.length=i;return defaultArray};ArrayUtils.stringToJSON=function stringToJSON(str){var evalFunc=function(str){return(new Function("return "+str))()};var returnJSON=evalFunc(str);return returnJSON};return ArrayUtils}();utils.ArrayUtils=ArrayUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){})(com||(com={}));var com;
(function(com){(function(events){var EventDispatcher=function(){function EventDispatcher(){this._listeners=new Object;this._eventQueue=new Array;this._processingQueue=false}EventDispatcher.prototype.addEventListener=function(type_str,listening_obj,method_str,priority){if(type_str!=undefined&&listening_obj!=undefined&&method_str&&listening_obj[method_str]){if(this._listeners==undefined)this._listeners={};if(!this.isValidEvent(type_str))this._listeners[type_str]=[];if(this.isEventListener(type_str,
listening_obj,method_str))return;if(listening_obj[method_str]!=undefined)if(priority==null)this._listeners[type_str].push({type:type_str,listener_obj:listening_obj,listener_method:method_str});else if(typeof this._listeners[type_str][priority]!=="undefined")this._listeners[type_str].splice(priority,0,{type:type_str,listener_obj:listening_obj,listener_method:method_str});else this._listeners[type_str][priority]={type:type_str,listener_obj:listening_obj,listener_method:method_str}}else throw new Error("Missing event type or listener object reference: "+
method_str);};EventDispatcher.prototype.removeEventListener=function(type_str,listening_obj,method_str){var item;var eventItem;var listenerObj;var listenerMethod;var removeEntry;var eventArray;var previousLength;var removedItems;var eventObject;var currentObj;if(listening_obj!=undefined&&method_str&&listening_obj[method_str])if(type_str!=undefined){if(this.isValidEvent(type_str)){for(item in this._listeners[type_str]){listenerObj=this._listeners[type_str][item].listener_obj;listenerMethod=this._listeners[type_str][item].listener_method;
if(listenerMethod==method_str){removeEntry=false;if(method_str.length>0){if(listenerMethod==method_str)removeEntry=true}else removeEntry=true;if(removeEntry==true){delete this._listeners[type_str][item];this._fixIndexing(this._listeners[type_str])}}}if(this._listeners[type_str].length<=0)delete this._listeners[type_str]}}else for(eventItem in this._listeners){eventArray=this._listeners[eventItem];previousLength=eventArray.length;removedItems=0;for(eventObject in eventArray){currentObj=eventArray[eventObject].listener_obj;
if(currentObj==listening_obj){removedItems++;delete this._listeners[eventItem][eventObject];this._fixIndexing(this._listeners[eventItem])}}if(removedItems>=previousLength)delete this._listeners[eventItem]}else throw new Error("Undefined listening object or method");};EventDispatcher.prototype.dispatchEvent=function(event_obj){if(event_obj.type!=undefined){if(this._listeners[event_obj.type]!=undefined){this._eventQueue.push(event_obj);if(!this._processingQueue){this._processingQueue=true;this.dispatchNextEvent()}}}else throw new Error("Undefined event type");
};EventDispatcher.prototype.dispatchNextEvent=function(){var obj;if(this._eventQueue.length>=1){var event_obj=this._eventQueue.shift();var listenerTypeList=this._listeners[event_obj.type];var n=listenerTypeList.length;for(obj=0;obj<n;obj++)if(listenerTypeList[obj]){var listener_obj=listenerTypeList[obj].listener_obj;var listener_method=String(listenerTypeList[obj].listener_method);var param_obj=listenerTypeList[obj].param_obj;if(event_obj.target==undefined)event_obj.target=this;event_obj.currentTarget=
this;listener_obj[listener_method].call(listener_obj,event_obj)}this.dispatchNextEvent()}else{this._eventQueue=new Array;this._processingQueue=false}};EventDispatcher.prototype.numberOfListeners=function(type_str){if(this.isValidEvent(type_str))return this._listeners[type_str].length;else return 0};EventDispatcher.prototype.isValidEvent=function(type_str){return this._listeners[type_str]!=undefined};EventDispatcher.prototype.isEventListener=function(type_str,listening_obj,method_str){var found=false;
var i;if(this._listeners[type_str]&&this._listeners[type_str].length>0)for(i=0;i<this._listeners[type_str].length;i++)if(typeof this._listeners[type_str][i]!=="undefined"&&listening_obj==this._listeners[type_str][i].listener_obj&&method_str==this._listeners[type_str][i].listener_method){found=true;break}return found};EventDispatcher.prototype.hasEventListener=function(type_str){return this._listeners[type_str]!=null};EventDispatcher.prototype._fixIndexing=function(sourceArray){sourceArray.sort();
var arrayLength=0;var item;for(item in sourceArray)if(sourceArray[item]==undefined||sourceArray[item]=="undefined")delete sourceArray[item];else arrayLength++;sourceArray.length=arrayLength};return EventDispatcher}();events.EventDispatcher=EventDispatcher})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){function getClassName(obj){var funcNameRegex=/function ([a-zA-Z0-9_\-$]+)/;var results=funcNameRegex.exec(obj.prototype.constructor.toString());return results&&results.length>1?results[1]:""}utils.getClassName=getClassName})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(core){var HUB=function(){function HUB(){this._table={};this._callStack={}}HUB.prototype.addHandler=function(event,classRef,callbackMethod){if(!event||event===""||classRef===null||callbackMethod===null)throw new Error("Parameter invalid!");else{var callbackObject={classRef:classRef,callbackMethod:callbackMethod};if(this._table[event]){if(com.utils.ArrayUtils.indexOf(this._table[event],callbackObject)===-1)this._table[event].push(callbackObject)}else this._table[event]=[callbackObject]}};
HUB.prototype.sendNote=function(caller,event){var args=[];for(var _i=0;_i<arguments.length-2;_i++)args[_i]=arguments[_i+2];if(!this._table[event])console.log("Notification does not have listeners:",event);else{this._callStack[event]=caller;var i,n;n=this._table[event].length;for(i=0;i<n;i++){var callbackObject=this._table[event][i];var args=Array.prototype["slice"].call(arguments);args.splice(0,2);callbackObject.classRef[callbackObject.callbackMethod].apply(callbackObject.classRef,args)}}};HUB.prototype.getLastCaller=
function(event){return this._callStack[event]};HUB.prototype.clearHandlers=function(event){if(!event||event==="")throw new Error("Parameter invalid!");else if(this._table[event])delete this._table[event];else console.log("Event does not have listeners.")};HUB.prototype.clearAllHandlers=function(){var i;for(i in this._table)delete this._table[i];this._table={}};return HUB}();core.HUB=HUB})(com.core||(com.core={}));var core=com.core})(com||(com={}));
var __extends=this.__extends||function(d,b){function __(){this.constructor=d}__.prototype=b.prototype;d.prototype=new __};var com;
(function(com){(function(core){var BaseLogic=function(_super){__extends(BaseLogic,_super);function BaseLogic(){_super.call(this);this._inited=false}BaseLogic.prototype.inited=function(){return this._inited};BaseLogic.prototype.HUB=function(value){if(arguments.length){this._HUB=value;this.setup()}return this._HUB};BaseLogic.prototype.setup=function(){if(this._inited||!this._HUB)return false;this._inited=true;return true};BaseLogic.prototype.destory=function(){};return BaseLogic}(com.events.EventDispatcher);
core.BaseLogic=BaseLogic})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){(function(core){var ProjectBase=function(_super){__extends(ProjectBase,_super);function ProjectBase(){_super.call(this);this._logicList={};this._controllerList=[];this._HUB=new core.HUB}ProjectBase.prototype.init=function(){this._initLogics()};ProjectBase.prototype.addController=function(logic,controller){this._controllerList.push({logic:logic,controller:controller})};ProjectBase.prototype._initLogics=function(){var logic;var l=this._controllerList.length;var cName;var logicCName;var c;
for(var i=0;i<l;i++){c=this._controllerList[i];cName=com.utils.getClassName(c.logic);logicCName=cName.charAt(0).toLowerCase()+cName.substr(1);if(!this._logicList[logicCName]){logic=new c.logic;logic.HUB(this._HUB);this._logicList[logicCName]=logic}}};ProjectBase.prototype._registerControllers=function(){var c;var cont;var i;var l=this._controllerList.length;var cName;var logicCName;var s;var controller;for(var i=0;i<l;i++){c=this._controllerList[i];if(!c.controller)continue;controller=new c.controller;
for(s in this._logicList)if(this._logicList[s]instanceof c.logic){if(this._logicList[s]["controller"])this._logicList[s]["controller"](controller);else{var tmpName=com.utils.getClassName(c.controller);cName=tmpName.charAt(0).toLowerCase()+tmpName.slice(1);if(this._logicList[s][cName])this._logicList[s][cName](controller)}break}}};ProjectBase.prototype.destroy=function(){var logic;var l=this._controllerList.length;var cName;var logicCName;var c;for(var i=0;i<l;i++){c=this._controllerList[i];cName=
com.utils.getClassName(c.logic);logicCName=cName.charAt(0).toLowerCase()+cName.substr(1);if(this._logicList[logicCName])try{if(this._logicList[logicCName]._controller&&typeof this._logicList[logicCName]._controller.destroy=="function")this._logicList[logicCName]._controller.destroy();if(typeof this._logicList[logicCName]=="function")this._logicList[logicCName].destroy()}catch(err){}}};return ProjectBase}(com.events.EventDispatcher);core.ProjectBase=ProjectBase})(com.core||(com.core={}));var core=
com.core})(com||(com={}));var com;
(function(com){(function(utils){var SingletonManager=function(){function SingletonManager(){}SingletonManager._instanceMap={};SingletonManager.getInstance=function getInstance(clazz){if(SingletonManager._instanceMap[clazz]==null)SingletonManager._instanceMap[clazz]=new clazz;return SingletonManager._instanceMap[clazz]};SingletonManager.setInstance=function setInstance(clazz){var args=[];for(var _i=0;_i<arguments.length-1;_i++)args[_i]=arguments[_i+1];if(SingletonManager._instanceMap[clazz]==null){var inst=
new clazz;inst.constructor.apply(inst,args);SingletonManager._instanceMap[clazz]=inst}};SingletonManager.contains=function contains(clazz){return SingletonManager._instanceMap[clazz]!=null};return SingletonManager}();utils.SingletonManager=SingletonManager})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(singletons){var URLProvider=function(){function URLProvider(){this._urlData={}}URLProvider.url=function url(name,replaceList,noFullUrl){if(typeof replaceList==="undefined")replaceList=null;if(typeof noFullUrl==="undefined")noFullUrl=false;return com.utils.SingletonManager.getInstance(URLProvider).getUrl(name,replaceList,noFullUrl)};URLProvider.replace=function replace(url,replaceList){if(!url)return url;for(var i in replaceList)url=url.split("{$"+i+"}").join(replaceList[i]);
return url};URLProvider.prototype.getUrl=function(name,replaceList,noFullUrl){if(typeof replaceList==="undefined")replaceList=null;if(typeof noFullUrl==="undefined")noFullUrl=false;if(!this._urlData)return null;var result=this._urlData[name]?this._urlData[name].url:"";result=URLProvider.replace(result,replaceList);var index=result.indexOf("://");if((index==-1||index>6)&&!noFullUrl)result=this._siteUrl+result;return result};URLProvider.prototype.urlData=function(value){if(arguments.length)this._urlData=
value;else return this._urlData};URLProvider.prototype.siteUrl=function(value){if(arguments.length){this._siteUrl=value;if(this._siteUrl.substr(this._siteUrl.length-1)!="/")this._siteUrl+="/"}else return this._siteUrl};return URLProvider}();singletons.URLProvider=URLProvider})(com.singletons||(com.singletons={}));var singletons=com.singletons})(com||(com={}));var com;
(function(com){(function(events){var Event=function(){function Event(type){this.type=type}Event.ACTIVATE="activate";Event.DEACTIVATE="deactivate";Event.COMPLETE="complete";Event.FAILED="failed";Event.CHANGE="change";Event.OPEN="open";Event.CLOSE="close";Event.REMOVE="remove";Event.SELECT="select";Event.RESIZE="resize";Event.ADDED="added";Event.ADDED_TO_STAGE="added";Event.REMOVED="removed";Event.POSITION_CHANGE="positionChange";Event.SUBMIT="submit";Event.ERROR="error";Event.LOADED="load";Event.PROGRESS=
"progress";Event.prototype.stopPropagation=function(){if(this.realEvent.stopPropagation)this.realEvent.stopPropagation();else this.realEvent.cancelBubble=true};return Event}();events.Event=Event})(com.events||(com.events={}));var events=com.events})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var ConfigChangeEvent=function(_super){__extends(ConfigChangeEvent,_super);function ConfigChangeEvent(type,value,oldValue){_super.call(this,type)}ConfigChangeEvent.STATUS="status";ConfigChangeEvent.USER_TYPE="userType";ConfigChangeEvent.MEMBER_ID="memberId";ConfigChangeEvent.CURRENT_MEMBER_ID="currentMemberId";return ConfigChangeEvent}(com.events.Event);mpimagesuploader.ConfigChangeEvent=ConfigChangeEvent})(mpimagesuploader||(mpimagesuploader={}));"use strict";var mpimagesuploader;
(function(mpimagesuploader){var Config=function(_super){__extends(Config,_super);function Config(){_super.call(this);this._appletURL={};this._memberId="";this._sessionId="m5ecf4bc0894213dcd625b0657a785f10"}Config.prototype.setup=function(loaderObject){this.appletURL(loaderObject["mpimagesuploaderappleturl"]||{});this.sessionId(loaderObject["sessionid"]||"");this.memberId(loaderObject["memberid"]||"");this.uploadify(loaderObject["uploadify"]||{});this.filetypes(loaderObject["filetypes"]||"");this.maxPictures(loaderObject["maxpictures"]||
10);this.forceFlashUploader(loaderObject["forceflashuploader"]||false);this.defaultImageURL=loaderObject["defaultimageurl"]||"";this.defaultThumbnailURL=loaderObject["defaultthumbnailurl"]||"";this._originalMaxPictures=this.maxPictures();this.getElementPosition=loaderObject["getElementPosition"]};Config.prototype.appletURL=function(value){if(arguments.length)this._appletURL=value;return this._appletURL};Config.prototype.upload_image_service=function(){return this._appletURL["upload_image_service"]["url"]};
Config.prototype.memberId=function(value){if(arguments.length){var oldValue=this._memberId;this._memberId=value}return this._memberId};Config.prototype.sessionId=function(value){if(arguments.length)this._sessionId=value;return this._sessionId};Config.prototype.uploaderStatus=function(value){if(arguments.length){var oldValue=this._uploaderStatus;this._uploaderStatus=value;this.dispatchEvent(new mpimagesuploader.ConfigChangeEvent(mpimagesuploader.ConfigChangeEvent.STATUS,value,oldValue))}return this._uploaderStatus};
Config.prototype.uploadify=function(value){if(arguments.length)this._uploadify=value;return this._uploadify};Config.prototype.filetypes=function(value){if(arguments.length)this._filetypes=value.split(",");return this._filetypes};Config.prototype.uploadedPictures=function(value){if(arguments.length)this._uploadedPictures=value;return this._uploadedPictures};Config.prototype.maxPictures=function(value){if(arguments.length)this._maxPictures=value;return this._maxPictures};Config.prototype.forceFlashUploader=
function(value){if(arguments.length)this._forceFlashUploader=value;return this._forceFlashUploader};Config.prototype.originalMaxPictures=function(value){if(arguments.length)this._originalMaxPictures=value;return this._originalMaxPictures};return Config}(com.events.EventDispatcher);mpimagesuploader.Config=Config})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var HUBNote=function(){function HUBNote(){}HUBNote.SHOW_UPLOADER="showUploader";HUBNote.SHOW_NO_PHOTO="showNoPhoto";return HUBNote}();mpimagesuploader.HUBNote=HUBNote})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageUploaderStatus=function(){function ImageUploaderStatus(){}ImageUploaderStatus.SHOW_FORM="show_form";ImageUploaderStatus.FILE_UPLOADING="file_uploading";ImageUploaderStatus.FILE_UPLOADED="file_uploaded";ImageUploaderStatus.ALL_FILES_UPLOADED="all_files_uploaded";ImageUploaderStatus.FILES_FAILED="files_uploaded";ImageUploaderStatus.SHOW_DIALOG="show_dialog";ImageUploaderStatus.HIDE_DIALOG="hide_dialog";ImageUploaderStatus.START_UPLOADING="start_uploading";ImageUploaderStatus.SHOW_UPLOAD_BUTTON=
"show_upload_bt";return ImageUploaderStatus}();mpimagesuploader.ImageUploaderStatus=ImageUploaderStatus})(mpimagesuploader||(mpimagesuploader={}));var com;
(function(com){(function(utils){var rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,core_trim="StringUtils".trim,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;var StringUtils=function(){function StringUtils(){}StringUtils.urlEncode=function urlEncode(o,pre){if(!o)return"";var buf=new Array;for(var key in o)if(o.hasOwnProperty(key)){var ov=o[key];var k=encodeURIComponent(key);if(typeof pre!="undefined")k=pre+"["+k+"]";var type=typeof ov;if(type=="undefined")buf.push(k+"=");else if(type!="function"&&type!=
"object")buf.push(k+"="+encodeURIComponent(ov));else if(typeof ov.length=="number"&&typeof ov.splice=="function"){var len=ov.length;if(len)for(var i=0;i<len;i++)buf.push(arguments.callee({"":ov[i]},k));else buf.push(k+"[]=")}else if(type=="object")for(var i in ov)if(ov.hasOwnProperty(i)){var t={};t[i]=ov[i];buf.push(arguments.callee(t,k))}}return buf.join("&")};StringUtils.urlDecode=function urlDecode(str,overwrite){if(typeof overwrite==="undefined")overwrite=false;if(!str||!str.length)return{};var obj=
{};var pairs=str.split("&");var pair,name,value;for(var i=0,len=pairs.length;i<len;i++){pair=pairs[i].split("=");name=decodeURIComponent(pair[0]);value=decodeURIComponent(pair[1]);if(overwrite!==true)if(typeof obj[name]=="undefined")obj[name]=value;else if(typeof obj[name]=="string"){obj[name]=[obj[name]];obj[name].push(value)}else obj[name].push(value);else obj[name]=value}return obj};StringUtils.getStrPos=function getStrPos(haystack,needle,offset){var i=(haystack+"").indexOf(needle,offset||0);if(i===
-1)return false;else return i};StringUtils.hashCode=function hashCode(str){var hash=0,i,charS;str="act";if(str.length!=0)for(i=0;i<str.length;i++){charS=str.charCodeAt(i);hash=(hash<<5)-hash+charS}return hash};StringUtils.ucfirst=function ucfirst(value){return value.charAt(0).toUpperCase()+value.slice(1)};StringUtils.lcfirst=function lcfirst(value){return value.charAt(0).toLowerCase()+value.slice(1)};StringUtils.camelCase=function camelCase(value){return value.replace(rmsPrefix,"ms-").replace(rdashAlpha,
StringUtils.fcamelCase)};StringUtils.fcamelCase=function(all,letter){return letter.toUpperCase()};StringUtils.trim=core_trim&&!core_trim.call("ï»¿Â ")?function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")};StringUtils.repeat=function repeat(str,length){return(new Array((length>0?length:0)+1)).join(str)};StringUtils.formatNumber=function formatNumber(num,length){if(typeof length==="undefined")length=2;return StringUtils.repeat("0",length-
num.toString().length)+num.toString()};StringUtils.escapeRegExp=function escapeRegExp(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")};return StringUtils}();utils.StringUtils=StringUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;(function(com){(function(core){var Config=function(){function Config(){}Config.dev=false;return Config}();core.Config=Config})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){(function(utils){var ErrorConsole=function(){function ErrorConsole(){}ErrorConsole.log=function log(message){if(typeof message==="undefined")return;ErrorConsole._message=message;if(com.core.Config.dev||false){console.error(ErrorConsole._message);ErrorConsole._htmlLog()}else ErrorConsole._serverLog();ErrorConsole._message=""};ErrorConsole._serverLog=function _serverLog(){return true};ErrorConsole._htmlLog=function _htmlLog(){ErrorConsole._createHtmlConsole();var pre=document.createElement("pre");
var li=document.createElement("li");var timestampSpan=document.createElement("em");if(typeof ErrorConsole._message==="object"&&typeof window["JSON"]!=="undefined")pre.innerHTML=JSON.stringify(ErrorConsole._message,null,"  ");else pre.innerHTML=ErrorConsole._message;timestampSpan.innerHTML=(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds();li.appendChild(timestampSpan);li.appendChild(pre);ErrorConsole._htmlConsole.appendChild(li)};ErrorConsole._createHtmlConsole=function _createHtmlConsole(){if(typeof ErrorConsole._htmlConsole===
"undefined"){ErrorConsole._htmlConsole=document.createElement("ul");ErrorConsole._htmlConsole.className="debugConsole";ErrorConsole._htmlConsole.style["height"]="auto";var li=document.createElement("li");li.className="debugTitle";li.innerHTML="Console";li.addEventListener("click",function(){if(ErrorConsole._htmlConsole.style["height"]=="auto")ErrorConsole._htmlConsole.style["height"]="1em";else ErrorConsole._htmlConsole.style["height"]="auto"});ErrorConsole._htmlConsole.appendChild(li);document.body.appendChild(ErrorConsole._htmlConsole);
var styleCont=document.createElement("style");styleCont.innerText=".debugConsole {z-index: 1000;position: fixed;bottom: 0;right: 5px;height: auto;overflow: hidden;-webkit-transition: all .2s linear;-moz-transition: all .2s linear;transition: all .2s linear;list-style: none;margin: 0;padding: 0 10px 10px 10px;background-color: rgba(0, 0, 0, .8);border-radius: 5px 5px 0 0;min-width: 150px;font-size: 10px;color: #fff;box-shadow: rgba(0, 0, 0, .4) 0 0 5px;} .debugTitle {cursor: pointer;font-weight: bold;border-bottom: 1px solid rgba(255,255,255, .5);text-align: center;padding: 5px;margin-bottom: 5px;}";
document.getElementsByTagName("head")[0].appendChild(styleCont)}};return ErrorConsole}();utils.ErrorConsole=ErrorConsole})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(utils){var CommonUtils=function(){function CommonUtils(){}CommonUtils.isEmpty=function isEmpty(v,allowBlank){return v===null||v===undefined||com.utils.ArrayUtils.isArray(v)&&!v.length||(!allowBlank?v==="":false)};CommonUtils.isDate=function isDate(v){return toString.apply(v)==="[object Date]"};CommonUtils.isObject=function isObject(v){return!!v&&Object.prototype.toString.call(v)==="[object Object]"};CommonUtils.isPrimitive=function isPrimitive(v){return CommonUtils.isString(v)||
CommonUtils.isNumber(v)||CommonUtils.isBoolean(v)};CommonUtils.isFunction=function isFunction(v){return typeof v==="function"};CommonUtils.isNumber=function isNumber(v){return typeof v==="number"&&isFinite(v)};CommonUtils.isString=function isString(v){return typeof v==="string"};CommonUtils.isBoolean=function isBoolean(v){return typeof v==="boolean"};CommonUtils.isElement=function isElement(v){return!!v&&v.tagName};CommonUtils.isDefined=function isDefined(v){return typeof v!=="undefined"};CommonUtils.isWindow=
function isWindow(obj){return obj!=null&&obj==obj.window};CommonUtils.setElements=function setElements(elements){var generatedElements={};for(var i in elements)generatedElements[i]=com.get(elements[i]);return generatedElements};CommonUtils.isHTMLString=function isHTMLString(v){return/^<.+>$/.test(com.utils.StringUtils.trim(v))};CommonUtils.getBodyId=function getBodyId(){return document.getElementsByTagName("body")[0].id};CommonUtils.setBodyId=function setBodyId(bodyId){document.getElementsByTagName("body")[0].id=
bodyId};CommonUtils.getPageClassName=function getPageClassName(){var bodyId=CommonUtils.getBodyId();if(bodyId.length){var matches=bodyId.match(/^.+?_(\w+)$/);if(matches!==null&&matches.length==2)return matches[1]}com.utils.ErrorConsole.log("Nem talalhato oldal class nev.");return undefined};CommonUtils.getJSONDirection=function getJSONDirection(results,JSONRoute){var res=results,route=JSONRoute;if(route)if(route.indexOf(".")===-1)res=res[route];else{var stringSplit=route.split(".");com.utils.ArrayUtils.each(stringSplit,
function(i){if(res[stringSplit[i]]==undefined){com.utils.ErrorConsole.log("getJSONDirection: invalid route to json data");res=false}else res=res[stringSplit[i]]})}return res};return CommonUtils}();utils.CommonUtils=CommonUtils})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;(function(com){})(com||(com={}));var com;
(function(com){(function(utils){var core_strundefined=typeof undefined;utils.BrowserSupport=function(){var support,all,a,input,select,fragment,opt,eventName,isSupported,i,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length)return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));
input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={getSetAttribute:div.className!=="t",leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:!!input.value,optSelected:opt.selected,enctype:!!document.createElement("form").enctype,
html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:document.compatMode==="CSS1Compat",innerText:typeof div["innerText"]!==core_strundefined,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div["test"]}catch(e){support.deleteExpando=
false}input=document.createElement("input");input.setAttribute("value","");support.input=input.getAttribute("value")==="";input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","t");input.setAttribute("name","t");fragment=document.createDocumentFragment();fragment.appendChild(input);support.appendChecked=input.checked;support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;if(div.attachEvent){div.attachEvent("onclick",
function(){support.noCloneEvent=false});div.cloneNode(true).click()}for(i in{submit:true,change:true,focusin:true}){div.setAttribute(eventName="on"+i,"t");support[i+"Bubbles"]=eventName in window||div.attributes[eventName].expando===false}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";(function(){var container,marginDiv,tds,divReset="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=
isSupported&&tds[0].offsetHeight===0;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";support.boxSizing=div.offsetWidth===4;support.doesNotIncludeMarginInBodyOffset=body.offsetTop!==1;if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||
{width:"4px"}).width==="4px";marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!==core_strundefined){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display=
"block";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=div.offsetWidth!==3;if(support.inlineBlockNeedsLayout)body.style.zoom="1"}body.removeChild(container);container=div=tds=marginDiv=null});all=select=fragment=opt=a=input=null;return support}})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(events){var MouseEvent=function(_super){__extends(MouseEvent,_super);function MouseEvent(type,param_data){_super.call(this,type);this.delta=0;this.clientX=0;this.clientY=0;this.param_data=param_data?param_data:{}}MouseEvent.CLICK="click";MouseEvent.DOUBLE_CLICK="clicondblclick";MouseEvent.MOUSE_DOWN="mouseDown";MouseEvent.MOUSE_MOVE="mouseMove";MouseEvent.MOUSE_OUT="mouseOut";MouseEvent.MOUSE_OVER="mouseOver";MouseEvent.MOUSE_UP="mouseUp";MouseEvent.MOUSE_WHEEL="mouseWheel";
MouseEvent.MOUSE_SCROLL="DOMMouseScroll";MouseEvent.MOUSE_DRAG_END="mouseDragEnd";MouseEvent.MOUSE_DRAG_START="mouseDragEnd";return MouseEvent}(events.Event);events.MouseEvent=MouseEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var FocusEvent=function(_super){__extends(FocusEvent,_super);function FocusEvent(type){_super.call(this,type)}FocusEvent.FOCUS="focus";FocusEvent.BLUR="blur";return FocusEvent}(events.Event);events.FocusEvent=FocusEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var VideoEvent=function(_super){__extends(VideoEvent,_super);function VideoEvent(type){_super.call(this,type)}VideoEvent.ABORT="abort";VideoEvent.CANPLAY="canplay";VideoEvent.CANPLAYTHROUGH="canplaythrough";VideoEvent.DURATIONCHANGE="durationchange";VideoEvent.EMPTIED="emptied";VideoEvent.ENDED="ended";VideoEvent.ERROR="media_error";VideoEvent.LOADEDDATA="loadeddata";VideoEvent.LOADEDMETADATA="loadedmetadata";VideoEvent.LOADSTART="loadstart";VideoEvent.PAUSE="pause";
VideoEvent.PLAY="play";VideoEvent.PLAYING="playing";VideoEvent.PROGRESS="progress";VideoEvent.RATECHANGE="ratechange";VideoEvent.SEEKED="seeked";VideoEvent.SEEKING="seeking";VideoEvent.STALLED="stalled";VideoEvent.SUSPEND="suspend";VideoEvent.TIMEUPDATE="timeupdate";VideoEvent.VOLUMECHANGE="volumechange";VideoEvent.WAITING="waiting";return VideoEvent}(events.Event);events.VideoEvent=VideoEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var WindowEvent=function(_super){__extends(WindowEvent,_super);function WindowEvent(){_super.apply(this,arguments)}WindowEvent.HASH_CHANGE="hashchange";WindowEvent.SCROLL="scroll";return WindowEvent}(com.events.Event);events.WindowEvent=WindowEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var KeyboardEvent=function(_super){__extends(KeyboardEvent,_super);function KeyboardEvent(type,charCode,keyCode,ctrlKey,altKey,shiftKey){_super.call(this,type);this.charCode=charCode;this.keyCode=keyCode;this.ctrlKey=ctrlKey;this.altKey=altKey;this.shiftKey=shiftKey}KeyboardEvent.KEY_DOWN="keyDown";KeyboardEvent.KEY_UP="keyUp";KeyboardEvent.KEY_PRESS="keyPress";return KeyboardEvent}(events.Event);events.KeyboardEvent=KeyboardEvent})(com.events||(com.events={}));var events=
com.events})(com||(com={}));var com;
(function(com){(function(events){var CustomKeyboardEvent=function(_super){__extends(CustomKeyboardEvent,_super);function CustomKeyboardEvent(type,charCode,keyCode,ctrlKey,altKey,shiftKey,param_data){_super.call(this,type,charCode,keyCode,ctrlKey,altKey,shiftKey);this.param_data=param_data?param_data:{}}return CustomKeyboardEvent}(events.KeyboardEvent);events.CustomKeyboardEvent=CustomKeyboardEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var CustomEvent=function(_super){__extends(CustomEvent,_super);function CustomEvent(type,param_data){_super.call(this,type);this.param_data=param_data?param_data:{}}return CustomEvent}(events.Event);events.CustomEvent=CustomEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var EventHandler=function(){function EventHandler(){}EventHandler.on=function on(element,type_str,listening_obj,method_str,param_obj){if(element===null){com.utils.ErrorConsole.log("EventHandler.ts nincs megadva element.");return}if(!element["dispatcher"])element["dispatcher"]=new com.events.EventDispatcher;var param_data=param_obj?param_obj:{};element["dispatcher"].addEventListener(type_str,listening_obj,method_str);switch(type_str){case com.events.MouseEvent.MOUSE_OVER:if(!element.onmouseover)element.onmouseover=
function(event){EventHandler._mouseOverHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_OUT:if(!element.onmouseout)element.onmouseout=function(event){EventHandler._mouseOutHandler_(element,param_data,event)};break;case com.events.MouseEvent.CLICK:if(!element.onclick)element.onclick=function(event){EventHandler._mouseClickHandler_(element,param_data,event)};break;case com.events.MouseEvent.DOUBLE_CLICK:if(!element["onclicondblclick"])element["onclicondblclick"]=function(event){EventHandler._mouseDoubleClickHandler_(element,
param_data,event)};break;case com.events.MouseEvent.MOUSE_DOWN:if(!element.onmousedown)element.onmousedown=function(event){EventHandler._mouseDownHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_UP:if(!element.onmouseup)element.onmouseup=function(event){EventHandler._mouseUpHandler_(element,param_data,event)};if(!element.ondragend)element.ondragend=function(event){EventHandler._mouseDragEndHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_MOVE:if(!element.onmousemove)element.onmousemove=
function(event){EventHandler._mouseMoveHandler_(element,param_data,event)};break;case com.events.MouseEvent.MOUSE_WHEEL:if(!element.onmousewheel)element.onmousewheel=function(event){EventHandler._mouseWheelHandler_(element,param_data,event)};if(element.addEventListener)element.addEventListener("DOMMouseScroll",function(event){EventHandler._mouseWheelHandler_(element,param_data,event)});break;case com.events.KeyboardEvent.KEY_DOWN:if(!element.onkeydown)element.onkeydown=function(event){EventHandler._keyDownHandler_(element,
param_data,event)};break;case com.events.KeyboardEvent.KEY_UP:if(!element.onkeyup)element.onkeyup=function(event){EventHandler._keyUpHandler_(element,param_data,event)};break;case com.events.KeyboardEvent.KEY_PRESS:if(!element.onkeypress)element.onkeypress=function(event){EventHandler._keyPressHandler_(element,param_data,event)};break;case com.events.FocusEvent.FOCUS:if(!element.onfocus)element.onfocus=function(event){EventHandler._focusHandler_(element,param_data,event)};break;case com.events.Event.CHANGE:if(!element.onchange)element.onchange=
function(event){EventHandler._changeHandler_(element,param_data,event)};break;case com.events.FocusEvent.BLUR:if(!element.onblur)element.onblur=function(event){EventHandler._blurHandler_(element,param_data,event)};break;case com.events.Event.SUBMIT:if(!element.onsubmit)element.onsubmit=function(event){EventHandler._submitHandler_(element,param_data,event)};break;case com.events.Event.RESIZE:if(!element.onresize)element.onresize=function(event){EventHandler._onresizeHandler_(element,param_data,event)};
break;case com.events.Event.LOADED:if(!element.onload)element.onload=function(event){EventHandler._loadedHandler_(element,param_data,event)};break;case com.events.Event.ERROR:if(!element.onerror)element.onerror=function(event){EventHandler._errorHandler_(element,param_data,event)};break;case com.events.Event.PROGRESS:try{if(!element.onprogress)element.onprogress=function(event){EventHandler._progressHandler_(element,param_data,event)}}catch(Error){}break;case com.events.VideoEvent.ERROR:if(element.addEventListener)element.addEventListener("error",
function(event){EventHandler._videoEventHandler_(element,param_data,event)});else element.attachEvent("onerror",function(event){EventHandler._videoEventHandler_(element,param_data,event)});break;case com.events.VideoEvent.ABORT:case com.events.VideoEvent.CANPLAY:case com.events.VideoEvent.CANPLAYTHROUGH:case com.events.VideoEvent.DURATIONCHANGE:case com.events.VideoEvent.EMPTIED:case com.events.VideoEvent.ENDED:case com.events.VideoEvent.LOADEDDATA:case com.events.VideoEvent.LOADEDMETADATA:case com.events.VideoEvent.LOADSTART:case com.events.VideoEvent.PAUSE:case com.events.VideoEvent.PLAY:case com.events.VideoEvent.PLAYING:case com.events.VideoEvent.PROGRESS:case com.events.VideoEvent.RATECHANGE:case com.events.VideoEvent.SEEKED:case com.events.VideoEvent.SEEKING:case com.events.VideoEvent.STALLED:case com.events.VideoEvent.SUSPEND:case com.events.VideoEvent.TIMEUPDATE:case com.events.VideoEvent.VOLUMECHANGE:case com.events.VideoEvent.WAITING:if(element.addEventListener)element.addEventListener(type_str,
function(event){EventHandler._videoEventHandler_(element,param_data,event)});else element.attachEvent("on"+type_str,function(event){EventHandler._videoEventHandler_(element,param_data,event)});break;case com.events.WindowEvent.HASH_CHANGE:if(!element.onhashchange)element.onhashchange=function(event){EventHandler._hashchangeHandler_(element,param_data,event)};break;case com.events.WindowEvent.SCROLL:if(!element.onscroll)element.onscroll=function(event){EventHandler._scrollHandler_(element,param_data,
event)};break}};EventHandler.un=function un(element,type_str,listening_obj,method_str){if(element["dispatcher"]){element["dispatcher"].removeEventListener(type_str,listening_obj,method_str);if(element["dispatcher"].hasEventListener(type_str))return}switch(type_str){case com.events.MouseEvent.MOUSE_OVER:element.onmouseover=null;break;case com.events.MouseEvent.MOUSE_OUT:element.onmouseout=null;break;case com.events.MouseEvent.CLICK:element.onclick=null;break;case com.events.MouseEvent.DOUBLE_CLICK:element["onclicondblclick"]=
null;break;case com.events.MouseEvent.MOUSE_DOWN:element.onmousedown=null;break;case com.events.MouseEvent.MOUSE_UP:element.onmouseup=null;break;case com.events.MouseEvent.MOUSE_MOVE:element.onmousemove=null;break;case com.events.MouseEvent.MOUSE_WHEEL:element.onmousewheel=null;break;case com.events.KeyboardEvent.KEY_DOWN:element.onkeydown=null;break;case com.events.KeyboardEvent.KEY_UP:element.onkeyup=null;break;case com.events.FocusEvent.FOCUS:element.onfocus=null;break;case com.events.FocusEvent.BLUR:element.onblur=
null;break;case com.events.Event.SUBMIT:element.onsubmit=null;break;case com.events.Event.RESIZE:element.onresize=null;break;case com.events.Event.LOADED:element.onload=null;break;case com.events.Event.ERROR:element.onerror=null;break}};EventHandler._mouseOverHandler_=function _mouseOverHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_OVER,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};
EventHandler._mouseOutHandler_=function _mouseOutHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_OUT,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseClickHandler_=function _mouseClickHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.CLICK,param_data);e.target=
element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseDoubleClickHandler_=function _mouseDoubleClickHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.DOUBLE_CLICK,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseDownHandler_=function _mouseDownHandler_(element,param_data,event){var realEvent=
event||window.event;var e=new com.events.MouseEvent(com.events.MouseEvent.MOUSE_DOWN);e.target=element;e.currentTarget=element;e.realEvent=realEvent;e.clientX=realEvent.clientX;e.clientY=realEvent.clientY;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseUpHandler_=function _mouseUpHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_UP,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};
EventHandler._mouseDragEndHandler_=function _mouseDragEndHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_UP,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e);var e=new com.events.CustomEvent(com.events.MouseEvent.MOUSE_DRAG_END,param_data);e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseMoveHandler_=function _mouseMoveHandler_(element,
param_data,event){var realEvent=event||window.event;var e=new com.events.MouseEvent(com.events.MouseEvent.MOUSE_MOVE);e.target=element;e.currentTarget=element;e.realEvent=realEvent;e.clientX=realEvent.clientX;e.clientY=realEvent.clientY;element["dispatcher"].dispatchEvent(e)};EventHandler._mouseWheelHandler_=function _mouseWheelHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.MouseEvent(events.MouseEvent.MOUSE_WHEEL);e.target=element;e.currentTarget=element;
e.realEvent=realEvent;e.delta=realEvent.detail?realEvent.detail*-1:realEvent.wheelDelta/120;element["dispatcher"].dispatchEvent(e)};EventHandler._keyDownHandler_=function _keyDownHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_DOWN,realEvent.charCode,realEvent.keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};
EventHandler._keyUpHandler_=function _keyUpHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_UP,realEvent.charCode,realEvent.keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._keyPressHandler_=function _keyPressHandler_(element,param_data,event){var realEvent=event||window.event;
var e=new com.events.CustomKeyboardEvent(com.events.KeyboardEvent.KEY_PRESS,realEvent.charCode,realEvent.keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._focusHandler_=function _focusHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.FocusEvent.FOCUS,param_data);e.target=element;e.currentTarget=element;
e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._changeHandler_=function _changeHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.CHANGE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._progressHandler_=function _progressHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.CHANGE,
param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._blurHandler_=function _blurHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.FocusEvent.BLUR,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._submitHandler_=function _submitHandler_(element,param_data,event){var realEvent=event||
window.event;var e=new com.events.CustomEvent(com.events.Event.SUBMIT,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._onresizeHandler_=function _onresizeHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.RESIZE,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._loadedHandler_=
function _loadedHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.LOADED,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._errorHandler_=function _errorHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.Event.ERROR,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};
EventHandler._videoEventHandler_=function _videoEventHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(event.type,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._hashchangeHandler_=function _hashchangeHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.WindowEvent.HASH_CHANGE,param_data);e.target=element;e.currentTarget=
element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};EventHandler._scrollHandler_=function _scrollHandler_(element,param_data,event){var realEvent=event||window.event;var e=new com.events.CustomEvent(com.events.WindowEvent.SCROLL,param_data);e.target=element;e.currentTarget=element;e.realEvent=realEvent;element["dispatcher"].dispatchEvent(e)};return EventHandler}();events.EventHandler=EventHandler})(com.events||(com.events={}));var events=com.events})(com||(com={}));
if(!window["Node"])var Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32};
if(!window["NodeList"])var NodeList={length:undefined,item:undefined};var com;
(function(com){(function(utils){var vendorPrefix;var core_strundefined=typeof undefined;var support=com.utils.BrowserSupport();var ignoreMethods=["merge","getVendorPrefix","setStyle","dimensions","nodeName"];var CSS3properties=["alignContent","alignItems","alignSelf","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","appRegion","appearance","aspectRatio","backfaceVisibility",
"backgroundClip","backgroundComposite","backgroundOrigin","backgroundSize","borderAfter","borderAfterColor","borderAfterStyle","borderAfterWidth","borderBefore","borderBeforeColor","borderBeforeStyle","borderBeforeWidth","borderEnd","borderEndColor","borderEndStyle","borderEndWidth","borderFit","borderHorizontalSpacing","borderImage","borderRadius","borderStart","borderStartColor","borderStartStyle","borderStartWidth","borderVerticalSpacing","boxAlign","boxDecorationBreak","boxDirection","boxFlex",
"boxFlexGroup","boxLines","boxOrdinalGroup","boxOrient","boxPack","boxReflect","boxShadow","clipPath","colorCorrection","columnAxis","columnBreakAfter","columnBreakBefore","columnBreakInside","columnCount","columnGap","columnProgression","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","columns","filter","flex","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","flowFrom","flowInto","fontFeatureSettings","fontKerning","fontSizeDelta",
"fontSmoothing","fontVariantLigatures","gridColumn","gridColumns","gridRow","gridRows","highlight","hyphenateCharacter","hyphenateLimitAfter","hyphenateLimitBefore","hyphenateLimitLines","hyphens","justifyContent","lineAlign","lineBoxContain","lineBreak","lineClamp","lineGrid","lineSnap","locale","logicalHeight","logicalWidth","marginAfter","marginAfterCollapse","marginBefore","marginBeforeCollapse","marginBottomCollapse","marginCollapse","marginEnd","marginStart","marginTopCollapse","marquee","marqueeDirection",
"marqueeIncrement","marqueeRepetition","marqueeSpeed","marqueeStyle","mask","maskBoxImage","maskBoxImageOutset","maskBoxImageRepeat","maskBoxImageSlice","maskBoxImageSource","maskBoxImageWidth","maskClip","maskComposite","maskImage","maskOrigin","maskPosition","maskPositionX","maskPositionY","maskRepeat","maskRepeatX","maskRepeatY","maskSize","maxLogicalHeight","maxLogicalWidth","minLogicalHeight","minLogicalWidth","nbspMode","order","paddingAfter","paddingBefore","paddingEnd","paddingStart","perspective",
"perspectiveOrigin","perspectiveOriginX","perspectiveOriginY","printColorAdjust","regionBreakAfter","regionBreakBefore","regionBreakInside","regionOverflow","rtlOrdering","rubyPosition","shapeInside","shapeMargin","shapeOutside","shapePadding","svgShadow","tapHighlightColor","textCombine","textDecorationsInEffect","textEmphasis","textEmphasisColor","textEmphasisPosition","textEmphasisStyle","textFillColor","textOrientation","textSecurity","textSizeAdjust","textStroke","textStrokeColor","textStrokeWidth",
"transform","transformOrigin","transformOriginX","transformOriginY","transformOriginZ","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","userDrag","userModify","userSelect","wrap","wrapFlow","wrapThrough","writingMode"];var avoidStylePostfix=["zIndex","opacity"];var core_rnotwhite=/\S+/g;var nodeHook,boolHook,rclass=/[\t\r\n]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i,rboolean=
/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input,class2type={},core_deletedIds=[],core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_splice=core_deletedIds.splice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty;
var _easeMap={},globals=window["GreenSockGlobals"]||window,CSSPlugin,TweenLite,_warned;TweenLite=globals.TweenMax||globals.TweenLite;if(TweenLite){globals=globals.com.greensock;CSSPlugin={}}Sizzle.selectors.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets&&(elem.style&&elem.style.display||com.get(elem).css("display"))==="none"};Sizzle.selectors.filters.visible=function(elem){return!Sizzle.selectors.filters.hidden(elem)};var DomCollection=
function(){function DomCollection(){this.length=0;this.DomCollection=true;this.attrHooks={};this.propHooks={};this.valHooks={};this.support=support;this.propFix={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"}}DomCollection.nodeName=function nodeName(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===
name.toLowerCase()};DomCollection.nodeType=function nodeType(elem,nodeType){return elem.nodeType&&elem.nodeType===nodeType};DomCollection.setStyle=function setStyle(name,value,element){var style=element.style,css3Name=DomCollection.getVendorPrefixedCSSProperty(name,element);if(!utils.CommonUtils.isDefined(value))return;if(utils.CommonUtils.isNumber(value)&&com.utils.ArrayUtils.indexOf(avoidStylePostfix,css3Name)==-1)value+="px";if(com.utils.CommonUtils.isDefined(style[css3Name]))try{style[css3Name]=
value}catch(ex){}return element};DomCollection.getVendorPrefixedCSSProperty=function getVendorPrefixedCSSProperty(name,element){var style=element.style;if(com.utils.ArrayUtils.indexOf(CSS3properties,name)!==-1&&style[name]===undefined)return DomCollection.getVendorPrefix()+com.utils.StringUtils.ucfirst(name);return name};DomCollection.merge=function merge(first,second){var i,len=first.length;if(len===0&&second.length===0)return first;for(i=0;i<second.length;i++)first[len+i]=second[i];first.length+=
second.length;i=second=null;return first};DomCollection.dimensions=function dimensions(elements,name,prefix,value){if(!DomCollection.isDomCollection(elements))return undefined;var elem=elements[0],extras=0;var nameU=com.utils.StringUtils.ucfirst(name);if(utils.CommonUtils.isWindow(elem))return elem["inner"+nameU]?elem["inner"+nameU]:elem.document.documentElement["client"+nameU];var doc;if(elem.nodeType===Node.DOCUMENT_NODE){doc=elem.documentElement;return Math.max(elem.body["scroll"+nameU],doc["scroll"+
nameU],elem.body["offset"+nameU],doc["offset"+nameU],doc["client"+nameU])}if(utils.CommonUtils.isString(prefix)){switch(name){case "width":if(prefix=="inner"){extras+=elements.css("paddingLeft",true);extras+=elements.css("paddingRight",true)}else if(prefix=="outer"){extras+=elements.css("paddingLeft",true);extras+=elements.css("paddingRight",true);extras+=elements.css("borderLeftWidth",true);extras+=elements.css("borderRightWidth",true);if(value){extras+=elements.css("marginLeft",true);extras+=elements.css("marginRight",
true)}}break;case "height":if(prefix=="inner"){extras+=elements.css("paddingTop",true);extras+=elements.css("paddingBottom",true)}else if(prefix=="outer"){extras+=elements.css("paddingTop",true);extras+=elements.css("paddingBottom",true);extras+=elements.css("borderTopWidth",true);extras+=elements.css("borderBottomWidth",true);if(value){extras+=elements.css("marginTop",true);extras+=elements.css("marginBottom",true)}}break}value=undefined}return value===undefined?elements.css(name,true)+extras:elements.css(name,
value)};DomCollection.whereToInsert=function whereToInsert(elems,content,where){if(!DomCollection.isDomCollection(elems)||!arguments.length)return undefined;elems.each(function(index,elem){if(content.each===undefined&&content.nodeType===1)DomCollection.insertAdjacentElement(elem,where,content);else if(com.utils.ArrayUtils.isArrayLike(content))content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(elem,where,com.get(this).clone()[0]);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(elem,
where,this.data);break}})});return elems};DomCollection.insertWhere=function insertWhere(elems,content,where){if(!DomCollection.isDomCollection(elems)||!arguments.length)return undefined;if(com.utils.CommonUtils.isString(content))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);if(!utils.CommonUtils.isDefined(content))return undefined;var is_element=content.nodeType===Node.ELEMENT_NODE,is_array=com.utils.ArrayUtils.isArrayLike(content),is_DomCollection=
DomCollection.isDomCollection(content),len=content.length;elems.reverse().each(function(index,elem){if(com.utils.CommonUtils.isDefined(elem)&&com.utils.CommonUtils.isDefined(elem.nodeType))if(!is_DomCollection&&is_element)switch(elem.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(content,where,elem);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(content,where,elem);break}else if(is_array&&len)content.each(function(){switch(elem.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(this,
where,elem);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(this,where,elem.data);break}})});return elems};DomCollection.insertAdjacentElement=function insertAdjacentElement(insertRelativeTo,where,insertWhat){if(com.utils.CommonUtils.isDefined(insertRelativeTo["insertAdjacentElement"]))insertRelativeTo.insertAdjacentElement(where,insertWhat);else switch(where){case "beforeBegin":insertRelativeTo.parentNode.insertBefore(insertWhat,insertRelativeTo);break;case "afterBegin":insertRelativeTo.insertBefore(insertWhat,
insertRelativeTo.firstChild);break;case "beforeEnd":insertRelativeTo.appendChild(insertWhat);break;case "afterEnd":insertRelativeTo.parentNode.insertBefore(insertWhat,insertRelativeTo.nextSibling);break}return insertWhat};DomCollection.insertAdjacentHTML=function insertAdjacentHTML(insertRelativeTo,where,htmlToInsert){if(com.utils.CommonUtils.isDefined(insertRelativeTo["insertAdjacentHTML"]))insertRelativeTo.insertAdjacentHTML(where,htmlToInsert);else if(com.utils.CommonUtils.isDefined(insertRelativeTo)){var range=
document.createRange(),docFragmentToInsert=range.createContextualFragment(htmlToInsert);switch(where){case "beforeBegin":insertRelativeTo.parentNode.insertBefore(docFragmentToInsert,insertRelativeTo);break;case "afterBegin":insertRelativeTo.insertBefore(docFragmentToInsert,insertRelativeTo.firstChild);break;case "beforeEnd":insertRelativeTo.appendChild(docFragmentToInsert);break;case "afterEnd":insertRelativeTo.parentNode.insertBefore(docFragmentToInsert,insertRelativeTo.nextSibling);break}}};DomCollection.map=
function map(elems,callback,arg){var value,i,length=elems.length,isArray=com.utils.ArrayUtils.isArrayLike(elems),ret=[];if(isArray){i=0;for(;i<length;i++){value=callback.call(elems[i],elems[i],i,arg);if(value!=null)ret[ret.length]=value}}else for(i in elems){value=callback.call(elems[i],elems[i],i,arg);if(value!=null)ret[ret.length]=value}return DomCollection.merge(new DomCollection,core_concat.apply([],ret))};DomCollection.insertInsideWhere=function insertInsideWhere(elems,content,where){if(!DomCollection.isDomCollection(elems)||
!content)return undefined;if(com.utils.CommonUtils.isString(content)||DomCollection.nodeType(content,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);if(!DomCollection.isDomCollection(content))return undefined;elems.each(function(index,elem){content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:DomCollection.insertAdjacentElement(elem,where,index?com.get(this).clone()[0]:this);break;case Node.TEXT_NODE:DomCollection.insertAdjacentHTML(elem,
where,this.data);break}})});return elems};DomCollection.isDomCollection=function isDomCollection(v){return com.utils.CommonUtils.isDefined(v)&&com.utils.CommonUtils.isDefined(v.DomCollection)};DomCollection.getNodelist=function getNodelist(elements){return core_slice.call(elements,0,elements.length)};DomCollection.dir=function dir(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!com.get(cur).is(until))){if(cur.nodeType===1)matched.push(cur);
cur=cur[dir]}return matched};DomCollection.inArray=function inArray(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1};DomCollection.getVendorPrefix=function getVendorPrefix(){if(vendorPrefix)return vendorPrefix;var styles=[];if(!window.getComputedStyle){window["getComputedStyle"]=function(el,pseudo){return el.currentStyle};for(var k in window.getComputedStyle(document.documentElement,
""))styles.push(k)}else styles=window.getComputedStyle(document.documentElement,"");var pre=(core_slice.call(styles).join("").match(/-?(moz|webkit|ms)-?/)||styles["OLink"]===""&&["","o"])[1];vendorPrefix=pre;return pre};DomCollection.createCustomDOMEvent=function createCustomDOMEvent(target,name,event,param_data){var realEvent=event||window.event;var e=new com.events.CustomEvent(name,param_data);e.target=target;e.currentTarget=target;e.realEvent=realEvent;return e};DomCollection.createKeyboardDOMEvent=
function createKeyboardDOMEvent(target,name,keyCode,event,param_data){var realEvent=event||window.event;var e=new com.events.CustomKeyboardEvent(name,keyCode,keyCode,realEvent.ctrlKey,realEvent.altKey,realEvent.shiftKey,param_data);e.target=target;e.currentTarget=target;e.realEvent=realEvent;return e};DomCollection.prototype.find=function(selector,context){var ret=[],len,i=0;if(!com.utils.CommonUtils.isDefined(selector))return undefined;if(arguments.length===1&&this.length)context=this;this.context=
context;if(typeof selector=="string")if(com.utils.CommonUtils.isDefined(context)&&context.length){len=context.length;for(;i<len;i++)Sizzle(selector,context[i],ret);selector=ret}else selector=Sizzle(selector,DomCollection.isDomCollection(context)?context.removeTextNodes():context,ret);else if(selector.nodeType||utils.CommonUtils.isWindow(selector))selector=[selector];else if(!com.utils.ArrayUtils.isArrayLike(selector))return context||undefined;return DomCollection.merge(new DomCollection,selector)};
DomCollection.prototype.filter=function(selector,context){if(arguments.length===1)this.context=this;else this.context=context;return DomCollection.merge(new DomCollection,Sizzle.matches(selector,DomCollection.getNodelist(this.context)))};DomCollection.prototype.is=function(selector){return!!selector&&(typeof selector==="string"?Sizzle.selectors.match.needsContext.test(selector)?com.get(selector,this.context).index(this[0])>=0:this.filter(selector,this).length>0:this.filter(selector).length>0)};DomCollection.prototype.on=
function(type_str,listening_obj,method_str,param_obj){if(arguments.length<3)return undefined;this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||utils.CommonUtils.isWindow(this))com.events.EventHandler.on(this,type_str,listening_obj,method_str,param_obj||null)});return this};DomCollection.prototype.un=function(type_str,listening_obj,method_str){if(arguments.length<3)return undefined;this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||utils.CommonUtils.isWindow(this))com.events.EventHandler.un(this,
type_str,listening_obj,method_str)});return this};DomCollection.prototype.focus=function(){this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||com.utils.CommonUtils.isWindow(this))this.focus()});return this};DomCollection.prototype.click=function(){this.each(function(){this.onclick()});return this};DomCollection.prototype.blur=function(){this.each(function(){if(DomCollection.nodeType(this,Node.ELEMENT_NODE)||com.utils.CommonUtils.isWindow(this))this.blur()});return this};DomCollection.prototype.change=
function(){this.dispatchEvent(new com.events.CustomEvent(com.events.Event.CHANGE));return this};DomCollection.prototype.after=function(content){return DomCollection.whereToInsert(this,content,"afterEnd")};DomCollection.prototype.before=function(content){return DomCollection.whereToInsert(this,content,"beforeBegin")};DomCollection.prototype.insertAfter=function(content){return DomCollection.insertWhere(this,content,"afterEnd")};DomCollection.prototype.insertBefore=function(content){return DomCollection.insertWhere(this,
content,"beforeBegin")};DomCollection.prototype.clone=function(){var i,node,destElements,srcElements,clone,clones=[];this.each(function(index,elem){if(support.html5Clone||Sizzle.isXML(elem))clone=elem.cloneNode(true);if((!support.noCloneEvent||!support.noCloneChecked)&&(DomCollection.nodeType(elem,Node.ELEMENT_NODE)||DomCollection.nodeType(elem,Node.DOCUMENT_FRAGMENT_NODE))&&!Sizzle.isXML(elem)){destElements=com.get(clone);srcElements=com.get(elem)}destElements=srcElements=node=null;clones.push(clone)});
return DomCollection.merge(new DomCollection,clones)};DomCollection.prototype.replaceAll=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target))target=com.get(target);if(!DomCollection.isDomCollection(target))return undefined;var replacement=this;target.each(function(index){var elem=com.get(this);replacement.reverse().each(function(){if(index)com.get(this).clone().insertAfter(elem);else com.get(this).insertAfter(elem)});elem.remove()});return target};DomCollection.prototype.replaceWith=
function(newContent){if(!newContent)return undefined;if(com.utils.CommonUtils.isString(newContent)||newContent.nodeType!==undefined)newContent=com.get(newContent);if(!DomCollection.isDomCollection(newContent))return undefined;return newContent.replaceAll(this)};DomCollection.prototype.append=function(content){if(com.utils.CommonUtils.isString(content)||DomCollection.nodeType(content,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(content))content=com.create(content);else content=com.get(content);
if(!DomCollection.isDomCollection(content))return undefined;this.each(function(index,elem){content.each(function(){switch(this.nodeType){case Node.ELEMENT_NODE:elem.appendChild(index!==0?com.get(this).clone()[0]:this);break}})});return this};DomCollection.prototype.appendTo=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target)||DomCollection.nodeType(target,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(target))target=com.create(target);else target=com.get(target);
if(!DomCollection.isDomCollection(target))return undefined;return DomCollection.insertInsideWhere(target,this,"beforeEnd")};DomCollection.prototype.prepend=function(content){return DomCollection.insertInsideWhere(this,content,"afterBegin")};DomCollection.prototype.prependTo=function(target){if(!target)return undefined;if(com.utils.CommonUtils.isString(target)||DomCollection.nodeType(target,Node.ELEMENT_NODE))if(com.utils.CommonUtils.isHTMLString(target))target=com.create(target);else target=com.get(target);
if(!DomCollection.isDomCollection(target))return undefined;return DomCollection.insertInsideWhere(target,this,"afterBegin")};DomCollection.prototype.wrap=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||
!wrappingElement.length)return undefined;wrappingElement=com.get(wrappingElement[0]);this.each(function(index){var we=index?wrappingElement.clone():wrappingElement;com.get(this).replaceWith(we);we.append(this)});return this};DomCollection.prototype.wrapAll=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);
else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||!wrappingElement.length)return undefined;var wrap=com.get(wrappingElement[0]).clone();if(this[0].parentNode&&this[0].nodeType===1){wrap.insertBefore(this[0]);wrap.append(this)}return this};DomCollection.prototype.wrapInner=function(wrappingElement){if(!wrappingElement)return undefined;if(com.utils.CommonUtils.isString(wrappingElement))if(com.utils.CommonUtils.isHTMLString(wrappingElement))wrappingElement=
com.create(wrappingElement);else wrappingElement=com.get(wrappingElement);else if(wrappingElement.nodeType)wrappingElement=com.get(wrappingElement);if(!DomCollection.isDomCollection(wrappingElement)||!wrappingElement.length)return undefined;return this.each(function(){var self=com.get(this),contents=self.contents();if(contents.length)contents.wrapAll(wrappingElement);else self.append(wrappingElement)})};DomCollection.prototype.unwrap=function(){this.parent().each(function(){if(!DomCollection.nodeName(this,
"body")){var cn=DomCollection.merge(new DomCollection,this.childNodes).detach();com.get(this).replaceWith(cn)}});return this};DomCollection.prototype.contents=function(){var contents=new DomCollection;this.each(function(i,elem){contents=DomCollection.merge(contents,DomCollection.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:elem.childNodes)});return contents};DomCollection.prototype.parent=function(){var ret=[];this.each(function(i,elem){var parent=elem.parentNode;if(parent&&
parent.nodeType!==11&&com.utils.ArrayUtils.indexOf(ret,parent)===-1)ret.push(parent)});return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.parents=function(until){var matched=[],dir="parentNode";this.each(function(){var cur=this[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!com.get(cur).is(until))){if(cur.nodeType===1&&!until)matched.push(cur);cur=cur[dir]}if(until&&com.utils.DomCollection.nodeType(cur,Node.ELEMENT_NODE)&&!cur["documentElement"]&&
com.get(cur).is(until))matched.push(cur)});return DomCollection.merge(new DomCollection,matched)};DomCollection.prototype.html=function(content){if(com.utils.CommonUtils.isDefined(content))this.each(function(){this.innerHTML=content});else return com.utils.StringUtils.trim(this[0].innerHTML);return this};DomCollection.prototype.text=function(content){var innerText=this.support.innerText?"innerText":"textContent";if(com.utils.CommonUtils.isDefined(content))this.each(function(){this[innerText]=content});
else return com.utils.StringUtils.trim(this[0][innerText]);return this};DomCollection.prototype.attr=function(name,value){var _this=this;if(!name)return undefined;if(!this.length)return this;if(com.utils.CommonUtils.isObject(name)){com.utils.ArrayUtils.each(name,function(index,value){_this.attr(index,value)});return this}else if(!com.utils.CommonUtils.isString(name))return this;var hooks,notxml,ret,elem=this[0],nType=elem.nodeType;if(!elem||nType===Node.TEXT_NODE||nType===Node.COMMENT_NODE||nType===
Node.ATTRIBUTE_NODE)return;if(typeof elem.getAttribute===core_strundefined)return this.prop(name,value);notxml=nType!==Node.ELEMENT_NODE||!Sizzle.isXML(elem);if(notxml){name=name.toLowerCase();hooks=this.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined){com.utils.ArrayUtils.each(this,function(index,elem){if(value===null)elem.removeAttr(name);else if(hooks&&notxml&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else{elem.setAttribute(name,value+
"");return value}});return this}else if(hooks&&notxml&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else{if(typeof elem.getAttribute!==core_strundefined)ret=elem.getAttribute(name);return ret==null?undefined:ret}};DomCollection.prototype.removeAttr=function(value){var scope=this;if(!arguments.length)return undefined;com.utils.ArrayUtils.each(this,function(index,elem){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&elem.nodeType===1)while(name=attrNames[i++]){propName=
scope.propFix[name]||name;if(rboolean.test(name))if(!getSetAttribute&&ruseDefault.test(name))elem[com.utils.StringUtils.camelCase("default-"+name)]=elem[propName]=false;else elem[propName]=false;else com.get(elem).attr(name,"");elem.removeAttribute(getSetAttribute?name:propName)}return true});return this};DomCollection.prototype.prop=function(name,value){if(!name)return undefined;var ret,hooks,notxml,elem=this[0],nType=elem.nodeType;if(!elem||nType===Node.TEXT_NODE||nType===Node.COMMENT_NODE||nType===
Node.ATTRIBUTE_NODE)return;notxml=nType!==Node.ELEMENT_NODE||!Sizzle.isXML(elem);if(notxml){name=this.propFix[name]||name;hooks=this.propHooks[name]}if(value!==undefined){com.utils.ArrayUtils.each(this,function(index,elem){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value});return this}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else return elem[name]};DomCollection.prototype.removeProp=function(name){if(!name)return undefined;
name=this.propFix[name]||name;return com.utils.ArrayUtils.each(this,function(){try{this[name]=undefined;delete this[name]}catch(e){}return this})};DomCollection.prototype.val=function(value){var ret,hooks,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=this.valHooks[elem.type]||this.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}var scope=
this;return com.utils.ArrayUtils.each(this,function(i){var val=value,self=com.get(this);if(!DomCollection.nodeType(this,Node.ELEMENT_NODE))return;if(val==null)val="";else if(typeof val==="number")val+="";hooks=scope.valHooks[this.type]||scope.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined)this.value=val;return this})};DomCollection.prototype.data=function(name,value){if(!arguments.length)return undefined;if(value)if(com.utils.CommonUtils.isDefined(this.attr("data-"+
name)))return this.attr("data-"+name,value);else return this.prop("data-"+name,value);else if(com.utils.CommonUtils.isDefined(this.attr("data-"+name)))return this.attr("data-"+name);else return this.prop("data-"+name)};DomCollection.prototype.addClass=function(value){if(!arguments.length)return undefined;var cur,clazz,j,classes,proceed=typeof value==="string"&&value;classes=(value||"").match(core_rnotwhite)||[];if(proceed)this.each(function(index,elem){cur=elem.nodeType===1&&(elem.className?(" "+
elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+clazz+" ")<0)cur+=clazz+" ";elem.className=com.utils.StringUtils.trim(cur)}});return this};DomCollection.prototype.removeClass=function(value){if(!arguments.length)return undefined;var classes,cur,clazz,j,proceed=arguments.length===0||typeof value==="string"&&value;if(proceed){classes=(value||"").match(core_rnotwhite)||[];this.each(function(index,elem){cur=elem.nodeType===1&&(elem.className?(" "+elem.className+
" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+" ")>=0)cur=cur.replace(" "+clazz+" "," ");elem.className=value?com.utils.StringUtils.trim(cur):""}})}return this};DomCollection.prototype.toggleClass=function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";return this.each(function(){if(type==="string"){var className,i=0,self=com.get(this),state=stateVal,classNames=value.match(core_rnotwhite)||[];while(className=classNames[i++]){state=
isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type===core_strundefined||type==="boolean"){if(this.className)com.get(this).data("__className__",this.className);this.className=this.className||value===false?"":com.get(this).data("__className__")||""}})};DomCollection.prototype.hasClass=function(selector){if(!arguments.length)return undefined;var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+
" ").replace(rclass," ").indexOf(className)>=0)return true;return false};DomCollection.prototype.each=function(callback){if(!arguments.length)return undefined;return com.utils.ArrayUtils.each(this,callback)};DomCollection.prototype.css=function(name,value,pseudoElement){if(!this.length)return this;if(!com.utils.CommonUtils.isDefined(value)&&typeof name==="string"){var selector=this[0],cssProp=DomCollection.getVendorPrefixedCSSProperty(name,selector);if(window.getComputedStyle!==undefined){var tmp=
window.getComputedStyle(selector,pseudoElement);return tmp[cssProp]}else if(com.utils.ArrayUtils.indexOf(["height","width"],cssProp)!==-1)return selector["offset"+com.utils.StringUtils.ucfirst(cssProp)]+"px";return selector.style[cssProp]}if(com.utils.CommonUtils.isDefined(value)&&value===true)return parseInt(this.css(name)||0);if(!com.utils.CommonUtils.isDefined(value)&&typeof name==="object"){var styles=name;utils.ArrayUtils.each(this,function(){for(var propName in styles)DomCollection.setStyle(propName,
styles[propName],this);return true})}else if(com.utils.CommonUtils.isDefined(value))utils.ArrayUtils.each(this,function(index,elem){DomCollection.setStyle(name,value,elem);return true});return this};DomCollection.prototype.show=function(){this.each(function(index,elem){if(!DomCollection.nodeType(elem,Node.ELEMENT_NODE))return;var DHEl=com.get(elem);var dp=DHEl.data("olddisplay");if(DHEl.css("display")==="none"&&!dp)DomCollection.setStyle("display","block",elem);else if(dp)DomCollection.setStyle("display",
dp,elem);else DomCollection.setStyle("display","block",elem)});return this};DomCollection.prototype.hide=function(){this.each(function(index,elem){if(!DomCollection.nodeType(elem,Node.ELEMENT_NODE))return;var DHEl=com.get(elem);var display=DHEl.css("display");if(display!=="none")DHEl.data("olddisplay",DHEl.css("display"));else DHEl.data("olddisplay",null);DomCollection.setStyle("display","none",elem)});return this};DomCollection.prototype.toggle=function(){this.each(function(index,elem){var DHEl=
com.get(elem);if(DHEl.css("display")==="none")DHEl.show();else DHEl.hide()});return this};DomCollection.prototype.width=function(value){return DomCollection.dimensions(this,"width",null,value)};DomCollection.prototype.height=function(value){return DomCollection.dimensions(this,"height",null,value)};DomCollection.prototype.innerWidth=function(){return DomCollection.dimensions(this,"width","inner")};DomCollection.prototype.innerHeight=function(){return DomCollection.dimensions(this,"height","inner")};
DomCollection.prototype.outerWidth=function(margin){return DomCollection.dimensions(this,"width","outer",margin)};DomCollection.prototype.outerHeight=function(margin){return DomCollection.dimensions(this,"height","outer",margin)};DomCollection.prototype.scrollLeft=function(value){if(!this.length)return undefined;if(value)return this.prop("scrollLeft",value);else return this.prop("scrollLeft")};DomCollection.prototype.scrollTop=function(value){if(!this.length)return undefined;if(value)return this.prop("scrollTop",
value);else return this.prop("scrollTop")};DomCollection.prototype.offset=function(coordinates){if(!this.length)return undefined;if(coordinates!==undefined){this.css(coordinates);return this}return{top:this.prop("offsetTop"),left:this.prop("offsetLeft")}};DomCollection.prototype.offsetParent=function(){return DomCollection.map(this,function(){var offsetParent=this.offsetParent||document.documentElement;while(offsetParent&&!DomCollection.nodeName(offsetParent,"html")&&com.get(offsetParent).css("position")===
"static")offsetParent=offsetParent.offsetParent;return offsetParent||document.documentElement})};DomCollection.prototype.position=function(){var element=com.get(this[0])[0];var xPosition=0;var yPosition=0;while(element){xPosition+=element.offsetLeft-element.scrollLeft+element.clientLeft;yPosition+=element.offsetTop-element.scrollTop+element.clientTop;element=element.offsetParent}return{top:yPosition,left:xPosition}};DomCollection.prototype.remove=function(selector,returnDomCollectionObject){if(typeof returnDomCollectionObject===
"undefined")returnDomCollectionObject=false;var len,i,elem,context;if(arguments.length&&typeof selector!=="string"&&selector!==undefined)return undefined;if(selector===undefined)elem=this;else elem=this.find(selector);len=elem.length;for(i=0;i<len;i++)if(elem[i].parentNode!==undefined)elem[i].parentNode.removeChild(elem[i]);if(returnDomCollectionObject)return this;return DomCollection.getNodelist(this)};DomCollection.prototype.detach=function(selector){return this.remove(selector,true)};DomCollection.prototype.empty=
function(){if(!this.length)return undefined;var elem,i=0;for(;(elem=this[i])!=null;i++){while(elem.firstChild)elem.removeChild(elem.firstChild);if(elem.options&&DomCollection.nodeName(elem,"select"))elem.options.length=0}return this};DomCollection.prototype.slice=function(begin,end){var ret=[],len=this.length;for(var i=begin;i<Math.min(end,len);i++)ret.push(this[i]);return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.reverse=function(){var ret=[],len=this.length;if(len<2)return this;
for(var i=len-1;i>=0;i--)ret.push(this[i]);return DomCollection.merge(new DomCollection,ret)};DomCollection.prototype.first=function(){return this.eq(0)};DomCollection.prototype.last=function(){return this.eq(-1)};DomCollection.prototype.prevAll=function(){return DomCollection.dir(this[0],"previousSibling")};DomCollection.prototype.index=function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(com.utils.CommonUtils.isString(elem))return DomCollection.inArray(this[0],
com.get(elem));return DomCollection.inArray(elem.DomCollection?elem[0]:elem,this)};DomCollection.prototype.eq=function(i){var len=this.length,j=+i+(i<0?len:0);return DomCollection.merge(new DomCollection,j>=0&&j<len?[this[j]]:[])};DomCollection.prototype.removeTextNodes=function(){var _this=this;this.each(function(index,item){if(!DomCollection.nodeType(item,Node.ELEMENT_NODE)){core_splice.call(_this,index,1);if(index<_this.length)_this.removeTextNodes();return false}});return this};DomCollection.prototype.addEventListener=
function(type_str,listening_obj,method_str,priority){this.each(function(){if(!this["dispatcher"])this["dispatcher"]=new com.events.EventDispatcher;this["dispatcher"].addEventListener(type_str,listening_obj,method_str,priority)})};DomCollection.prototype.dispatchEvent=function(e){this.each(function(){if(!this["dispatcher"])this["dispatcher"]=new com.events.EventDispatcher;this["dispatcher"].dispatchEvent(e)})};DomCollection.prototype.animate=function(direction,duration,fromVars,toVars){if(!TweenLite||
!CSSPlugin){TweenLite=null;if(!_warned){com.utils.ErrorConsole.log("The TweenMax (or at least TweenLite and CSSPlugin) JavaScript file(s) required for the animation.");_warned=true}return}return TweenLite[direction].call(TweenLite,DomCollection.getNodelist(this),duration,fromVars,toVars)};return DomCollection}();utils.DomCollection=DomCollection})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var routing;var com;
(function(com){(function(core){var Router=function(){function Router(_routeTable){this._routeTable=_routeTable}Router.prototype.generateUrl=function(routeHandler,routeParams,queryParams,anchor,disableLang){if(typeof disableLang==="undefined")disableLang=false;if(typeof this._routeTable[routeHandler]!="string"){com.utils.ErrorConsole.log("The given route handler does not exists: "+routeHandler);return}var uri=this._routeTable[routeHandler];if(uri.indexOf("[")==0)uri=uri.substr(uri.indexOf("]")+1);
if(uri.indexOf("{")!=-1)for(var paramName in routeParams){var pattern=new RegExp("\\{"+paramName+":(?:\\w+|\\*)(?:\\(.+\\))?\\}");if(com.utils.CommonUtils.isString(routeParams[paramName]))uri=uri.replace(pattern,routeParams[paramName])}if(uri.indexOf("{")!=-1){com.utils.ErrorConsole.log("One or more route parameters are missing.");return}if(typeof queryParams=="object"){var queryString="";for(var qParam in queryParams)queryString+="&"+encodeURIComponent(qParam)+"="+encodeURIComponent(queryParams[qParam]);
if(queryString.length>0)uri=uri+"?"+queryString.slice(1)}else if(typeof queryParams=="string")uri=uri+"?"+queryParams;if(typeof anchor=="string"&&anchor.length>0)uri=uri+"#"+anchor;return uri};return Router}();core.Router=Router})(com.core||(com.core={}));var core=com.core})(com||(com={}));var com;
(function(com){var creationContainer=document.createElement("div");function get(selector,context){return(new com.utils.DomCollection).find(selector,context)}com.get=get;function create(htmlString){creationContainer.innerHTML=htmlString;if(creationContainer.childNodes)return com.get(creationContainer.childNodes);return undefined}com.create=create;function getUrl(routeHandler,routeParams,queryParams,anchor,disableLang){return com.utils.SingletonManager.getInstance(com.core.Router).generateUrl(routeHandler,
routeParams,queryParams,anchor,disableLang)}com.getUrl=getUrl})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageUploadDialog=function(_super){__extends(ImageUploadDialog,_super);function ImageUploadDialog(dialog,form,progressBarHolder,progressBar,progessTitle,closeButton){_super.call(this);this._inited=false;this._dialog=dialog;this._form=form;this._progressBarHolder=progressBarHolder;this._progressBar=progressBar;this._progressTitle=progessTitle;this._titleElements={};this._closeButton=closeButton;this._closeButton.on(com.events.MouseEvent.CLICK,this,"_closeClickHandler");
this.hideProgressBar();this.getTitleElements()}ImageUploadDialog.prototype._closeClickHandler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.CLOSE))};ImageUploadDialog.prototype.show=function(){if(this._dialog)this._dialog.show()};ImageUploadDialog.prototype.hide=function(){if(this._dialog){this.hideProgressBar();this.hideAllTitleElements();this._dialog.hide()}};ImageUploadDialog.prototype.hideForm=function(){if(this._form)this._form.hide()};ImageUploadDialog.prototype.showForm=
function(){if(this._form)this._form.show()};ImageUploadDialog.prototype.hideProgressBar=function(){if(this._progressBarHolder)this._progressBarHolder.hide();if(this._progressTitle)this._progressTitle.hide()};ImageUploadDialog.prototype.showProgressBar=function(){if(this._progressTitle)this._progressTitle.show();if(this._progressBarHolder)this._progressBarHolder.show()};ImageUploadDialog.prototype.setProgressBarValue=function(percent){if(this._progressBar)this._progressBar.width(percent+"%")};ImageUploadDialog.prototype.getTitleElements=
function(hideElements){if(typeof hideElements==="undefined")hideElements=true;var titleElements=this._progressTitle.contents();var item;for(item in titleElements)if(!isNaN(item)&&typeof titleElements[item].id!="undefined"){this._titleElements[titleElements[item].id]=com.get("#"+titleElements[item].id);if(hideElements)this._titleElements[titleElements[item].id].hide()}};ImageUploadDialog.prototype.hideAllTitleElements=function(){var item;for(item in this._titleElements)this._titleElements[item].hide()};
ImageUploadDialog.prototype.setProgressTitleValue=function(values){var item;var subitem;this.hideAllTitleElements();for(item in values){if(typeof this._titleElements[item]=="undefined")this._titleElements[item]=com.get("#"+item);if(typeof values[item].elements!="undefined")for(subitem in values[item].elements)com.get("#"+subitem).html(values[item].elements[subitem]);this._titleElements[item].show()}};return ImageUploadDialog}(com.events.EventDispatcher);mpimagesuploader.ImageUploadDialog=ImageUploadDialog})(mpimagesuploader||
(mpimagesuploader={}));var com;
(function(com){(function(net){var URLResponse=function(){function URLResponse(response,responseJson,responseXml,status,statusText,header,headerText,total,loaded){this.response=response;this.responseJson=responseJson;this.responseXml=responseXml;this.status=status;this.statusText=statusText;this.header=header;this.headerText=headerText;this.total=total;this.loaded=loaded}return URLResponse}();net.URLResponse=URLResponse})(com.net||(com.net={}));var net=com.net})(com||(com={}));var com;
(function(com){(function(events){var URLEvent=function(_super){__extends(URLEvent,_super);function URLEvent(type,urlResponse){_super.call(this,type);this.urlResponse=urlResponse}URLEvent.SUCCESS="success";URLEvent.TIMEOUT="timeout";URLEvent.FAILED="failed";URLEvent.PROGRESS="progress";return URLEvent}(events.Event);events.URLEvent=URLEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){var Browser=function(){function Browser(){}Browser.chrome=false;Browser.safari=false;Browser.opera=false;Browser.msie=false;Browser.webkit=false;Browser.mozilla=false;Browser.init=function init(){var matched=Browser.uaMatch(navigator.userAgent);if(matched.browser){Browser[matched.browser]=true;Browser.version=matched.version}if(Browser.chrome)Browser.webkit=true;else if(Browser.webkit)Browser.safari=true};Browser.uaMatch=function uaMatch(ua){ua=ua.toLowerCase();var match=
/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};return Browser}();utils.Browser=Browser;Browser.init()})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var com;(function(com){})(com||(com={}));var com;
(function(com){(function(net){var URLLoader=function(_super){__extends(URLLoader,_super);function URLLoader(){_super.call(this);this.crossdomainProxyUrl=URLLoader.defaultCrossdomainProxyUrl;this.useCrossdomainProxy=URLLoader.defaultUseCrossdomainProxy;this.timeout=6E3;this.disableCaching=true;this.disableCachingParam="_dc";this.useDefaultHeader=true;this.method="POST";this.headers={};this.json=false;this.isFormData=false;this.noHeader=false;this._inProgress=false;this._isAborted=false}URLLoader.POST_HEADER=
"application/x-www-form-urlencoded; charset=UTF-8";URLLoader.XHR_HEADER="XMLHttpRequest";URLLoader.GET="GET";URLLoader.POST="POST";URLLoader._jsonpRefList={};URLLoader.defaultUseCrossdomainProxy=false;URLLoader.prototype.load=function(config){var _this=this;if(this._inProgress)this.abort();this._isAborted=false;this._inProgress=true;this.url=config.url?config.url:this.url;var url=this.url;this.data=config.data?config.data:this.data;this.method=config.method?config.method:this.method;this.json=config.json?
config.json:this.json;this.timeout=config.timeout?config.timeout:this.timeout;this.isFormData=config.isFormData?config.isFormData:false;this.noHeader=config.noHeader?config.noHeader:false;this.useCrossdomainProxy=config.useCrossdomainProxy!==undefined?config.useCrossdomainProxy:this.useCrossdomainProxy;this.crossdomainProxyUrl=config.crossdomainProxyUrl?config.crossdomainProxyUrl:this.crossdomainProxyUrl;var params;if(this.isFormData)params=this.data;else params=com.utils.StringUtils.urlEncode(this.data);
var crossDomain=typeof config.useCrossdomain!="undefined"?config.useCrossdomain:url.toLowerCase().indexOf("http://")==0;if(this.method==URLLoader.GET&&this.disableCaching)url+=(url.indexOf("?")!=-1?"&":"?")+this.disableCachingParam+"="+(new Date).getTime();if(this.method==URLLoader.GET&&params){url+=(url.indexOf("?")!=-1?"&":"?")+params;params=""}if(crossDomain){var id=(new Date).getTime()+""+(Math.random()*1E4|0);URLLoader._jsonpRefList[id]=this;if(this.useCrossdomainProxy)url=this.crossdomainProxyUrl+
(this.crossdomainProxyUrl.indexOf("?")!=-1?"&":"?")+"callback=com.net.URLLoader._jsonpRefList[%22"+id+"%22]._jsonpResponseHandler&url="+encodeURIComponent(url+(url.indexOf("?")!=-1?"&":"?"));else url+=(url.indexOf("?")!=-1?"&":"?")+"callback=com.net.URLLoader._jsonpRefList[%22"+id+"%22]._jsonpResponseHandler";var head=document.head||document.getElementsByTagName("head")[0];this._script=document.createElement("script");this._script.setAttribute("src",url);this._script.setAttribute("type","text/javascript");
com.events.EventHandler.on(this._script,com.events.Event.ERROR,this,"_jsonpTimeout");this._timeoutTimer=setTimeout(function(){_this._jsonpTimeout()},this.timeout);head.appendChild(this._script)}else{this._httpRequest=this.createHTTPObject();if(!this._httpRequest){com.utils.ErrorConsole.log("URLLoader.ts xhrrequest nem elerheto.");return}if(!this.url)com.utils.ErrorConsole.log("Url parameter must be given for URLRequest.");if(!this.noHeader){this.headers["X-Requested-With"]=URLLoader.XHR_HEADER;if(params&&
this.useDefaultHeader&&!this.headers["Content-Type"])this.headers["Content-Type"]=URLLoader.POST_HEADER}this._httpRequest.open(this.method,url,true);for(var i in this.headers)this._httpRequest.setRequestHeader(i,this.headers[i]);this._timeoutTimer=setTimeout(function(){_this._timeoutHandler()},this.timeout);this._pollTimer=setInterval(function(){_this._pollHandler()},50);try{this._httpRequest.upload.onprogress=function(e){_this._progressHandler(e)}}catch(err){}this._httpRequest.send(params)}};URLLoader.prototype.abort=
function(){if(this._inProgress){if(this._timeoutTimer){clearTimeout(this._timeoutTimer);this._timeoutTimer=null}if(this._pollTimer){clearInterval(this._pollTimer);this._pollTimer=null}this._httpRequest=undefined;this._inProgress=false;this._isAborted=true}};URLLoader.prototype._jsonpResponseHandler=function(response){if(this._script){var head=document.head||document.getElementsByTagName("head")[0];head.removeChild(this._script);this._script=null}if(this._timeoutTimer)clearTimeout(this._timeoutTimer);
var key=com.utils.ArrayUtils.keyOf(URLLoader._jsonpRefList,this);if(key){delete URLLoader._jsonpRefList[key];if(!this._isAborted){var type=typeof response.contents;var status=response.status.http_code;try{var responseJson=this.json?window["JSON"]?JSON.parse(response.contents):eval("("+response.contents+")"):null}catch(e){this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject))}var responseObject=new net.URLResponse(response.contents,responseJson,null,response.status.http_code,
response.status.http_code_text?response.status.http_code_text:status>=200&&status<300?"OK":"ERROR");this.dispatchEvent(new com.events.URLEvent(status>=200&&status<300?com.events.URLEvent.SUCCESS:com.events.URLEvent.FAILED,responseObject))}}this._inProgress=false};URLLoader.prototype.inProgress=function(){return this._inProgress};URLLoader.prototype._jsonpTimeout=function(){this._isAborted=true;this._inProgress=false;this._jsonpResponseHandler({});this._timeoutHandler()};URLLoader.prototype._pollHandler=
function(){if(this._httpRequest&&this._httpRequest.readyState==4){if(this._timeoutTimer){clearTimeout(this._timeoutTimer);this._timeoutTimer=null}if(this._pollTimer){clearInterval(this._pollTimer);this._pollTimer=null}this._handleTransactionResponse()}};URLLoader.prototype._progressHandler=function(e){var responseObject=new net.URLResponse;responseObject.total=e.total;responseObject.loaded=e.loaded;this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.PROGRESS,responseObject))};URLLoader.prototype._handleTransactionResponse=
function(){this._inProgress=false;var httpStatus;var responseObject;try{httpStatus=this._httpRequest.status||13030}catch(e){httpStatus=13030}if(httpStatus>=200&&httpStatus<300||com.utils.Browser.msie&&httpStatus==1223){responseObject=this._createResponseObject();this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.SUCCESS,responseObject))}else{var status;var statusText;switch(httpStatus){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:responseObject=new net.URLResponse(null,
null,null,0,httpStatus+": communication failure");this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject));break;default:responseObject=this._createResponseObject();this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject));break}}};URLLoader.prototype._createResponseObject=function(){var obj={};var headerObj={};var headerStr="";try{headerStr=this._httpRequest.getAllResponseHeaders();var header=headerStr.split("\n");for(var i=0;i<header.length;i++){var delimitPos=
header[i].indexOf(":");if(delimitPos!=-1)headerObj[header[i].substring(0,delimitPos)]=header[i].substring(delimitPos+2)}}catch(e){}var responseJson=this.json?window["JSON"]?JSON.parse(this._httpRequest.responseText):eval("("+this._httpRequest.responseText+")"):null;return new net.URLResponse(this._httpRequest.responseText,responseJson,this._httpRequest.responseXML,this._httpRequest.status,this._httpRequest.statusText,headerObj,headerStr)};URLLoader.prototype._timeoutHandler=function(){if(this._timeoutTimer)clearTimeout(this._timeoutTimer);
if(this._pollTimer)clearInterval(this._pollTimer);if(this._httpRequest){try{this._httpRequest.abort()}catch(e){}this._httpRequest=undefined}var responseObject=new net.URLResponse(null,null,null,0,"408: request timeout");this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.TIMEOUT,responseObject));this.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,responseObject))};URLLoader.prototype.createHTTPObject=function(){var http=false;if(typeof ActiveXObject!="undefined")try{http=
new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http=new ActiveXObject("Microsoft.XMLHTTP")}catch(E){http=false}}else if(window["XMLHttpRequest"])try{http=new XMLHttpRequest}catch(e){http=false}return http};return URLLoader}(com.events.EventDispatcher);net.URLLoader=URLLoader})(com.net||(com.net={}));var net=com.net})(com||(com={}));var com;
(function(com){(function(events){var FormEvent=function(_super){__extends(FormEvent,_super);function FormEvent(type,param_data){_super.call(this,type);this.param_data=param_data?param_data:{}}FormEvent.VALIDATE_SUCCESS="validateSuccess";FormEvent.VALIDATE_FAILURE="validateFailure";FormEvent.VALIDATE_REMOTE_SUCCESS="validateRemoteSuccess";FormEvent.VALIDATE_REMOTE_FAILURE="validateRemoteFailure";FormEvent.FORM_RESPONSE_SUCCESS="formResponseSuccess";FormEvent.FORM_RESPONSE_FAILURE="formResponseFailure";
FormEvent.CAPTCHA_SUCCESS="captchaSuccess";FormEvent.CAPTCHA_FAILURE="captchaFailed";return FormEvent}(events.Event);events.FormEvent=FormEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(events){var TimerEvent=function(_super){__extends(TimerEvent,_super);function TimerEvent(type){_super.call(this,type)}TimerEvent.TIMER="timer";TimerEvent.TIMER_COMPLETE="timerComplete";return TimerEvent}(events.Event);events.TimerEvent=TimerEvent})(com.events||(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(utils){(function(timer){var Timer=function(_super){__extends(Timer,_super);function Timer(delay,repeatCount){if(typeof repeatCount==="undefined")repeatCount=0;this.currentCount=0,this.lastFired=0,this.running=false,this.startTime=0,this.delay=delay;this.repeatCount=repeatCount>0?repeatCount:0;_super.call(this)}Timer.prototype.start=function(){if(this.running)return;this.startTime=(new Date).getTime();this.lastFired=this.startTime;this.running=true;com.utils.timer.Timer.runningTimers.push(this)};
Timer.prototype.stop=function(){this.running=false;var idx=com.utils.ArrayUtils.indexOf(Timer.runningTimers,this);if(idx!=-1)com.utils.timer.Timer.runningTimers.splice(idx,1)};Timer.prototype.restart=function(){this.reset();this.start()};Timer.prototype.reset=function(){this.stop();this.currentCount=0};Timer.runningTimers=new Array;Timer.update=function update(){var actTime,i,lgth,timer;actTime=(new Date).getTime();lgth=Timer.runningTimers.length-1;for(i=lgth;i>=0;i--){timer=Timer.runningTimers[i];
if(!timer||!timer.running)continue;if(actTime-timer.lastFired<timer.delay)continue;else{timer.currentCount++;timer.lastFired=actTime;timer.dispatchEvent(new com.events.TimerEvent(com.events.TimerEvent.TIMER));if(timer.currentCount==timer.repeatCount&&timer.repeatCount>0){timer.stop();timer.dispatchEvent(new com.events.TimerEvent(com.events.TimerEvent.TIMER_COMPLETE))}}}};Timer.stopAll=function stopAll(){var i,lgth;lgth=Timer.runningTimers.length-1;for(i=lgth;i>=0;i--){var timer=com.utils.timer.Timer.runningTimers[i];
if(timer)timer.stop()}};Timer.shutdown=function shutdown(){com.utils.timer.Timer.stopAll();clearInterval(com.utils.timer.Timer.interval)};Timer.init=function(){if(!Timer.interval)Timer.interval=setInterval(function(){return Timer.update()},50)};return Timer}(com.events.EventDispatcher);timer.Timer=Timer})(utils.timer||(utils.timer={}));var timer=utils.timer})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));com.utils.timer.Timer.init();var com;
(function(com){(function(utils){var MimeTypes=function(){function MimeTypes(){this.setMimeTypes()}MimeTypes.prototype.getExtensionFromMimeType=function(mimetype){var extension=[];for(var item in this.mimeTypes)if(this.mimeTypes[item]==mimetype)extension.push(item);return extension};MimeTypes.prototype.getMimeTypeFromExtension=function(extension){var mimetype="";if(this.mimeTypes.hasOwnProperty(extension))mimetype=this.mimeTypes[extension];return mimetype};MimeTypes.prototype.setMimeTypes=function(){this.mimeTypes=
{"a":"application/octet-stream","ai":"application/postscript","aif":"audio/x-aiff","aifc":"audio/x-aiff","aiff":"audio/x-aiff","au":"audio/basic","avi":"video/x-msvideo","bat":"text/plain","bin":"application/octet-stream","bmp":"image/bmp","c":"text/plain","cdf":"application/x-cdf","csh":"application/x-csh","css":"text/css","dll":"application/octet-stream","doc":"application/msword","dot":"application/msword","dvi":"application/x-dvi","eml":"message/rfc822","eps":"application/postscript","etx":"text/x-setext",
"exe":"application/octet-stream","gif":"image/gif","gtar":"application/x-gtar","h":"text/plain","hdf":"application/x-hdf","htm":"text/html","html":"text/html","jpe":"image/jpeg","jpeg":"image/jpeg","jpg":"image/jpg","js":"application/x-javascript","ksh":"text/plain","latex":"application/x-latex","m1v":"video/mpeg","man":"application/x-troff-man","me":"application/x-troff-me","mht":"message/rfc822","mhtml":"message/rfc822","mif":"application/x-mif","mov":"video/quicktime","movie":"video/x-sgi-movie",
"mp2":"audio/mpeg","mp3":"audio/mpeg","mp4":"video/mp4","mpa":"video/mpeg","mpe":"video/mpeg","mpeg":"video/mpeg","mpg":"video/mpeg","ms":"application/x-troff-ms","nc":"application/x-netcdf","nws":"message/rfc822","o":"application/octet-stream","obj":"application/octet-stream","oda":"application/oda","pbm":"image/x-portable-bitmap","pdf":"application/pdf","pfx":"application/x-pkcs12","pgm":"image/x-portable-graymap","png":"image/png","pnm":"image/x-portable-anymap","pot":"application/vnd.ms-powerpoint",
"ppa":"application/vnd.ms-powerpoint","ppm":"image/x-portable-pixmap","pps":"application/vnd.ms-powerpoint","ppt":"application/vnd.ms-powerpoint","pptx":"application/vnd.ms-powerpoint","ps":"application/postscript","pwz":"application/vnd.ms-powerpoint","py":"text/x-python","pyc":"application/x-python-code","pyo":"application/x-python-code","qt":"video/quicktime","ra":"audio/x-pn-realaudio","ram":"application/x-pn-realaudio","ras":"image/x-cmu-raster","rdf":"application/xml","rgb":"image/x-rgb","roff":"application/x-troff",
"rtx":"text/richtext","sgm":"text/x-sgml","sgml":"text/x-sgml","sh":"application/x-sh","shar":"application/x-shar","snd":"audio/basic","so":"application/octet-stream","src":"application/x-wais-source","swf":"application/x-shockwave-flash","t":"application/x-troff","tar":"application/x-tar","tcl":"application/x-tcl","tex":"application/x-tex","texi":"application/x-texinfo","texinfo":"application/x-texinfo","tif":"image/tiff","tiff":"image/tiff","tr":"application/x-troff","tsv":"text/tab-separated-values",
"txt":"text/plain","ustar":"application/x-ustar","vcf":"text/x-vcard","wav":"audio/x-wav","wiz":"application/msword","wsdl":"application/xml","xbm":"image/x-xbitmap","xlb":"application/vnd.ms-excel","xls":"application/vnd.ms-excel","xlsx":"application/vnd.ms-excel","xml":"text/xml","xpdl":"application/xml","xpm":"image/x-xpixmap","xsl":"application/xml","xwd":"image/x-xwindowdump","zip":"application/zip"}};return MimeTypes}();utils.MimeTypes=MimeTypes})(com.utils||(com.utils={}));var utils=com.utils})(com||
(com={}));var com;
(function(com){(function(managers){var FileUploadManager=function(_super){__extends(FileUploadManager,_super);function FileUploadManager(forceFlashUploader,uploadForm,uploadImageServiceURL,maxFileNum,acceptedFileTypes,isMultiple,isFlashAlternative,uploadify,uploadifyURL,expressinstallURL){if(typeof isMultiple==="undefined")isMultiple=true;if(typeof isFlashAlternative==="undefined")isFlashAlternative=true;if(typeof uploadify==="undefined")uploadify=null;if(typeof uploadifyURL==="undefined")uploadifyURL="";
if(typeof expressinstallURL==="undefined")expressinstallURL="";_super.call(this);this._successCounter=0;this._failedCounter=0;this._isHTML5=false;this._uploadForm=uploadForm;this._uploadImageServiceURL=uploadImageServiceURL;if(!forceFlashUploader)this.checkHTML5Compatibility();if(typeof acceptedFileTypes!="undefined")this._acceptedFileTypes=acceptedFileTypes;else this._acceptedFileTypes=[];this._fileQueue=0;this._successCounter=0;this._failedCounter=0;this._isFlashAlternative=isFlashAlternative;this._uploadify=
uploadify;this._uploadifyURL=uploadifyURL+"";this._expressinstallURL=expressinstallURL+"";this._isMultiple=isMultiple;this._fileLength=0;this._params=[];this._maxFileNum=maxFileNum;this._forceFlashUploader=forceFlashUploader;this.setupForm()}FileUploadManager.APC_UPLOAD_PROGRESS="APC_UPLOAD_PROGRESS";FileUploadManager.prototype.checkHTML5Compatibility=function(){try{var input=document.createElement("input");input.type="file";this._isHTML5=!!input.files;com.utils.Browser.init();if(com.utils.Browser.msie&&
com.utils.Browser.version<11)this._isHTML5=false}catch(err){this._isHTML5=false}};FileUploadManager.prototype.generateUploadingId=function(){this._uploadId=(new Date).getTime().toString();return this._uploadId};FileUploadManager.prototype.setupForm=function(){if(typeof this._uploadForm!="undefined"){this._fileInput=this._uploadForm.find('input[type="file"]');if(this._fileInput.length==1){var input=this._fileInput[0];if(!this._isHTML5)if(this._isFlashAlternative)this.setupUploadify();else;else{if(this._uploadify!=
null)this._uploadify.hide();if(this._isMultiple)this._fileInput.attr("multiple","multiple");else this._fileInput.attr("multiple","");this._fileInput.attr("accept",this._acceptedFileTypes.toString())}this._fileInput.on(com.events.Event.CHANGE,this,"_fileSelectHandler")}}};FileUploadManager.prototype.reset=function(){if(this._fileInput)try{this._fileInput[0].value="";if(this._fileInput[0].value){this._fileInput[0].type="text";this._fileInput[0].type="file"}}catch(e){}};FileUploadManager.prototype.setupUploadify=
function(e){if(typeof e==="undefined")e=null;var _this=this;if(typeof this._uploadify!="undefined"&&typeof this._uploadify.length!="undefined"){this._uploadifyName=this._uploadify.attr("id");var extensions="";var mimeTypes=new com.utils.MimeTypes;for(var i=0;i<this._acceptedFileTypes.length;i++)extensions+="*."+mimeTypes.getExtensionFromMimeType(this._acceptedFileTypes[i]).join(";*.")+";";this._fileInputName=this._fileInput.attr("name");var flashvars={"multi":true,"script":this._uploadImageServiceURL,
"swfName":this._uploadifyName,"fileDataName":this._fileInputName,"checkScript":false,"method":"POST","pagepath":"","folder":"","fileDesc":"Individual files","fileExt":extensions,"sizeLimit":1024E4,"queueSizeLimit":this._maxFileNum,"simUploadLimit":1,"hideButton":true,"width":120,"height":80,"label":com.get("#mpimagesuploader_uploader_browse_text")[0].innerHTML};var attributes={};var params={"wmode":"window","allowScriptAccess":"always"};swfobject.embedSWF(this._uploadifyURL,this._uploadifyName,"10px",
"10px","8",this._expressinstallURL,flashvars,params,attributes,this.swfObjectCallback);this._fileInput.hide();try{window[this._uploadifyName+"_uploadifyQueueFull"]=function(args){};window[this._uploadifyName+"_uploadifySelectOnce"]=function(args){_this._fileSelectHandler(null);_this._fileLength=args[0]["fileCount"]};window[this._uploadifyName+"_uploadifySelect"]=function(args){};window[this._uploadifyName+"_uploadifyCheckExist"]=function(args){};window[this._uploadifyName+"_uploadifyError"]=function(args){_this.uploadFailedHandler();
_this.uploadCompleted()};window[this._uploadifyName+"_uploadifyOpen"]=function(args){};window[this._uploadifyName+"_uploadifyComplete"]=function(args){_this.flashUploadSuccessHandler(args)};window[this._uploadifyName+"_uploadifyAllComplete"]=function(args){_this.allFilesUploaded()};window[this._uploadifyName+"_uploadifyProgress"]=function(args){_this.swfProgressHandler(args)}}catch(err){}}};FileUploadManager.prototype.getOffset=function(el){var _x=0;var _y=0;var _width=0;var _height=0;var el1=el;
while(el1&&!isNaN(el1.outerWidth())&&!isNaN(el1.outerHeight())){if(_width==0&&_height==0&&el1.outerWidth()!=0&&el1.outerHeight()!=0){_width=el1.outerWidth();_height=el1.outerHeight();break}el1=el1.parent()}if(_width==0&&_height==0){var ieElement=document.getElementById(el1.attr("id"));while(ieElement&&!isNaN(ieElement.offsetWidth)&&!isNaN(ieElement.offsetHeight)){if(_width==0&&_height==0&&ieElement.offsetWidth!=0&&ieElement.offsetHeight!=0){_width=ieElement.offsetWidth;_height=ieElement.offsetHeight;
break}ieElement=ieElement.parentElement}}var ieElementPosition;while(el&&!isNaN(el.offset().left)&&!isNaN(el.offset().top)){if(el.css("position")!="static"&&el.css("position")!=""){_x+=el.offset().left;_y+=el.offset().top}else if(el.css("position")=="")try{ieElementPosition=document.getElementById(el.attr("id"));if(ieElementPosition&&ieElementPosition.currentStyle.position!="static"){_x+=el.offset().left;_y+=el.offset().top}}catch(Error){}el=el.parent()}return{"left":_x,"top":_y,"width":_width,"height":_height}};
FileUploadManager.prototype.rePosition=function(){try{if(!this._isHTML5){var coordinates=this.getOffset(this._fileInput);var uploadify=com.get("#"+this._uploadifyName);var parentCoordinates=this.getOffset(uploadify.parent());uploadify.show();uploadify.css("position","absolute");uploadify.css("z-index","10000");uploadify.height(coordinates.height);uploadify.width(coordinates.width);uploadify.css("top",coordinates.top+parentCoordinates.top);uploadify.css("left",coordinates.left-parentCoordinates.left)}}catch(err){}};
FileUploadManager.prototype.swfProgressHandler=function(args){console.log("swfProgressHandler",args);var event=new com.events.Event(com.events.Event.PROGRESS);event.currentTarget=this;event.target=this;event.type=com.events.Event.PROGRESS;event["urlResponse"]={"loaded":args[2].bytesLoaded,"total":args[1].size};this.uploadProgressHandler(event)};FileUploadManager.prototype.swfObjectCallback=function(e){if(typeof e!=typeof undefined&&typeof e.ref!=typeof undefined&&typeof e.success!=typeof undefined&&
e.success)window[e.id+"_uploadifyObject"]=e.ref};FileUploadManager.prototype._fileSelectHandler=function(e){if(typeof e==="undefined")e=null;this._fileQueue=0;this._fileLength=0;var event=new com.events.Event(com.events.Event.CHANGE);if(e!=null&&typeof e.target!=typeof undefined&&e.target.files!=typeof undefined){this._file=e.target.files;this._fileInputName=e.target.name;if(this._file.length>this._maxFileNum)this._fileLength=this._maxFileNum;else this._fileLength=this._file.length;event.currentTarget=
this;event.target=this}this.dispatchEvent(event)};FileUploadManager.prototype.isHTML5=function(){return this._isHTML5};FileUploadManager.prototype.uploadId=function(){return this._uploadId};FileUploadManager.prototype.uploadImageServiceURL=function(){return this._uploadImageServiceURL};FileUploadManager.prototype.uploadFiles=function(){this._successCounter=0;this._failedCounter=0;if(this._isHTML5&&this._fileLength){this._uploadImageLoader=new com.net.URLLoader;this._uploadImageLoader.addEventListener(com.events.URLEvent.SUCCESS,
this,"uploadSuccessHandler");this._uploadImageLoader.addEventListener(com.events.URLEvent.FAILED,this,"uploadFailedHandler");this._uploadImageLoader.addEventListener(com.events.URLEvent.PROGRESS,this,"uploadProgressHandler");this.startAjaxUpload()}else this.startFlashUpload()};FileUploadManager.prototype.startFlashUpload=function(){if(typeof window[this._uploadifyName+"_uploadifyObject"]!=typeof undefined&&window[this._uploadifyName+"_uploadifyObject"])window[this._uploadifyName+"_uploadifyObject"].startFileUpload((new Date).getTime().toString(),
true)};FileUploadManager.prototype.startAjaxUpload=function(){if(this._fileQueue<this._fileLength&&typeof this._file[this._fileQueue]!==typeof undefined){var file=this._file[this._fileQueue];if(this.isFileAccepted(file.type)){var formData=new FormData;formData.append(this._fileInputName,file);formData.append("filename",file.name);if(this._params.length>0){var paramsLength=this._params.length-1;for(var i=paramsLength;i>0;--i)if(typeof this._params[i]!="undefined")formData.append(this._params[i]["key"],
this._params[i]["value"])}this._loaderConfig={url:this._uploadImageServiceURL,data:formData,method:com.net.URLLoader.POST,useCrossdomain:false,useCrossdomainProxy:false,json:true,timeout:24E4,isFormData:true,noHeader:true};this._uploadImageLoader.load(this._loaderConfig)}else this._uploadImageLoader.dispatchEvent(new com.events.URLEvent(com.events.URLEvent.FAILED,new com.net.URLResponse))}else if(this._failedCounter==0&&this._successCounter>0)this.allFilesUploaded();else this._fileInput.val(null)};
FileUploadManager.prototype.isFileAccepted=function(type){return this._acceptedFileTypes.indexOf(type)>-1||this._acceptedFileTypes.length==0?true:false};FileUploadManager.prototype.flashUploadSuccessHandler=function(args){if(args[1]&&args[1]["response"]&&args[1]["response"]["contents"])var data=args[1]["response"]["contents"];if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true")this._successCounter++;else this._failedCounter++;this._fileQueue++};FileUploadManager.prototype.uploadSuccessHandler=
function(e){if(typeof e==="undefined")e=null;var data=e.urlResponse.responseJson.contents;console.log("uploadSuccessHandler",e.urlResponse);if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true")this._successCounter++;else this._failedCounter++;this._fileQueue++;if(this._isHTML5){this.uploadCompleted();this.startAjaxUpload()}};FileUploadManager.prototype.uploadFailedHandler=function(e){if(typeof e==="undefined")e=null;this._failedCounter++;this._fileQueue++;
if(this._isHTML5){this.uploadCompleted();this.startAjaxUpload()}};FileUploadManager.prototype.uploadProgressHandler=function(e){var event=new com.events.Event(com.events.Event.PROGRESS);event.currentTarget=e.currentTarget;event.target=e.target;event.realEvent=e.urlResponse;try{this.dispatchEvent(event)}catch(err){}};FileUploadManager.prototype.uploadCompleted=function(e){if(typeof e==="undefined")e=null;var event=new com.events.Event(com.events.Event.LOADED);event.currentTarget=e!=null&&typeof e.currentTarget!=
"undefined"?e.currentTarget:this;event.target=e!=null&&typeof e.target!="undefined"?e.target:this;event.realEvent={total:1,loaded:1};this.dispatchEvent(event)};FileUploadManager.prototype.allFilesUploaded=function(){var event=new com.events.Event(com.events.Event.COMPLETE);this.dispatchEvent(event)};FileUploadManager.prototype.getUploadingFileIndex=function(){return this._fileQueue};FileUploadManager.prototype.getFileNumber=function(){return this._fileLength};FileUploadManager.prototype.getSuccessFileNumber=
function(){return this._successCounter};FileUploadManager.prototype.getFailedFileNumber=function(){return this._failedCounter};FileUploadManager.prototype.addParams=function(key,value){this._params.push({"key":key,"value":value})};FileUploadManager.prototype.destroy=function(){if(this._uploadImageLoader){this._uploadImageLoader.removeEventListener(com.events.URLEvent.SUCCESS,this,"uploadSuccessHandler");this._uploadImageLoader.removeEventListener(com.events.URLEvent.FAILED,this,"uploadFailedHandler");
this._uploadImageLoader.removeEventListener(com.events.URLEvent.PROGRESS,this,"uploadProgressHandler")}if(this._fileInput)this._fileInput.un(com.events.Event.CHANGE,this,"_fileSelectHandler")};FileUploadManager.prototype.forceSetupUploadify=function(){if(typeof this._uploadify!=typeof undefined){delete window[this._uploadifyName+"_uploadifyQueueFull"];delete window[this._uploadifyName+"_uploadifySelectOnce"];delete window[this._uploadifyName+"_uploadifySelect"];delete window[this._uploadifyName+"_uploadifyCheckExist"];
delete window[this._uploadifyName+"_uploadifyError"];delete window[this._uploadifyName+"_uploadifyOpen"];delete window[this._uploadifyName+"_uploadifyComplete"];delete window[this._uploadifyName+"_uploadifyAllComplete"];delete window[this._uploadifyName+"_uploadifyProgress"];delete window[this._uploadifyName+"_uploadifyObject"];delete this._uploadify;this._uploadify=com.create("<div></div>");this._uploadify.attr("id",this._uploadifyName);this.setupUploadify()}};return FileUploadManager}(com.events.EventDispatcher);
managers.FileUploadManager=FileUploadManager})(com.managers||(com.managers={}));var managers=com.managers})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageUploaderController=function(_super){__extends(ImageUploaderController,_super);function ImageUploaderController(){_super.call(this);this._inited=false;this.uploadedFiles=0;this._forceFlashUploader=false;this._uploadForm=com.get("#mpimagesuploader_uploader_form");this._missingPhoto=com.get("#mpimagesuploader_nophoto_box");this._missingPhotoUploadButton=com.get("#mpimagesuploader_nophoto_button");this._missingPhotoUploadButton.on(com.events.MouseEvent.CLICK,this,
"_missingPhotoUploadHandler");this._uploadDialog=new mpimagesuploader.ImageUploadDialog(com.get("#mpimagesuploader_uploader_box"),this._uploadForm,com.get("#mpimagesuploader_uploader_progressbar_box"),com.get("#mpimagesuploader_uploader_progressbar"),com.get("#mpimagesuploader_uploader_progressbar_info"),com.get("#mpimagesuploader_uploader_close_button"))}ImageUploaderController.prototype.setup=function(){if(this._inited)return;this._uploadManager=new com.managers.FileUploadManager(this._forceFlashUploader,
this._uploadForm,this._uploadImageService,this._maxFileNum,this._fileTypes,true,true,com.get("#flashUploader"),this._uploadifySettings["uploadifyurl"],this._uploadifySettings["expressinstall"]);this._uploadManager.addEventListener(com.events.Event.CHANGE,this,"_fileSelectedHandler");this._uploadManager.addEventListener(com.events.Event.PROGRESS,this,"_progressHandler");this._uploadManager.addEventListener(com.events.Event.LOADED,this,"_loadedHandler");this._uploadManager.addEventListener(com.events.Event.COMPLETE,
this,"_uploadCompleted");this._uploadDialog.addEventListener(com.events.Event.CLOSE,this,"_closeDialogHandler");this._uploadManager.addParams("memberid",this._memberid);this._uploadManager.addParams("sid",this._sessionid);this.status(mpimagesuploader.ImageUploaderStatus.HIDE_DIALOG);this._inited=true};ImageUploaderController.prototype.status=function(value){switch(value){case mpimagesuploader.ImageUploaderStatus.SHOW_UPLOAD_BUTTON:this.showMissingPhotoDialog();break;case mpimagesuploader.ImageUploaderStatus.ALL_FILES_UPLOADED:this.hideImageUploadDialog();
break;case mpimagesuploader.ImageUploaderStatus.FILE_UPLOADED:break;case mpimagesuploader.ImageUploaderStatus.FILE_UPLOADING:break;case mpimagesuploader.ImageUploaderStatus.FILES_FAILED:this.hideImageUploadDialog();break;case mpimagesuploader.ImageUploaderStatus.HIDE_DIALOG:this.hideImageUploadDialog();break;case mpimagesuploader.ImageUploaderStatus.SHOW_DIALOG:this.showImageUploadDialog();break;case mpimagesuploader.ImageUploaderStatus.SHOW_FORM:this.showImageUploadDialog();break;case mpimagesuploader.ImageUploaderStatus.START_UPLOADING:this._uploadDialog.hideForm();
this.repositionFlashUploader(true,false);this._uploadDialog.showProgressBar();this._uploadManager.uploadFiles();var event=new com.events.Event(com.events.Event.PROGRESS);event.currentTarget=this._uploadManager;event.target=this._uploadManager;event.type=com.events.Event.PROGRESS;event["urlResponse"]={"loaded":1,"total":100};this._progressHandler(event);break;default:break}};ImageUploaderController.prototype.repositionFlashUploader=function(defaultValue,enableInitedRepos){if(typeof enableInitedRepos===
"undefined")enableInitedRepos=true;var uploadifyObject=com.get("#flashUploader");uploadifyObject.css("position","absolute");if(defaultValue){if(this._inited&&enableInitedRepos)try{this._uploadManager.forceSetupUploadify();uploadifyObject=com.get("#flashUploader");uploadifyObject.css("position","absolute")}catch(err){}uploadifyObject.css("top",0);uploadifyObject.css("left",0);uploadifyObject.css("width",1);uploadifyObject.css("height",1);uploadifyObject.attr("width",1);uploadifyObject.attr("height",
1)}else if(typeof this.uploadifyPosition!=typeof undefined&&this.uploadifyPosition){uploadifyObject.css("top",this.uploadifyPosition.top+2);uploadifyObject.css("left",this.uploadifyPosition.left+2);uploadifyObject.css("width",this.uploadifyPosition.width-4);uploadifyObject.css("height",this.uploadifyPosition.height-4);uploadifyObject.css("zIndex",1E4);uploadifyObject.attr("width",this.uploadifyPosition.width-4);uploadifyObject.attr("height",this.uploadifyPosition.height-4)}};ImageUploaderController.prototype.showMissingPhotoDialog=
function(){if(this._missingPhoto)this._missingPhoto.show();this.hideImageUploadDialog()};ImageUploaderController.prototype.hideMissingPhotoDialog=function(){if(this._missingPhoto)this._missingPhoto.hide()};ImageUploaderController.prototype.showImageUploadDialog=function(){this.hideMissingPhotoDialog();if(this._uploadDialog){this._uploadDialog.hideAllTitleElements();this._uploadDialog.setProgressBarValue(0);this.setAllTitleValuesToDefault();this._uploadDialog.show();this._uploadManager.reset();com.get("#max_file_upload").html(this._maxFileNum.toString());
if(this._maxFileNum>0)com.get("#mpimagesuploader_uploader_browse").css("display","inline-block");else com.get("#mpimagesuploader_uploader_browse").hide()}};ImageUploaderController.prototype.hideImageUploadDialog=function(){if(this._uploadDialog){this._uploadDialog.showForm();this._uploadDialog.hide()}if(!this._uploadManager.isHTML5())this.repositionFlashUploader(true)};ImageUploaderController.prototype._missingPhotoUploadHandler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.OPEN))};
ImageUploaderController.prototype._fileSelectedHandler=function(e){var event=new com.events.Event(com.events.Event.CHANGE);event.currentTarget=e.currentTarget;event.target=e.target;this.dispatchEvent(event)};ImageUploaderController.prototype._uploadCompleted=function(e){this.uploadedFiles=this._uploadManager.getSuccessFileNumber();var event=new com.events.Event(com.events.Event.COMPLETE);event.currentTarget=e.currentTarget;event.target=e.target;this.dispatchEvent(event)};ImageUploaderController.prototype._closeDialogHandler=
function(e){this.uploadedFiles=this._uploadManager.getSuccessFileNumber();var event=new com.events.Event(com.events.Event.CLOSE);event.currentTarget=e.currentTarget;event.target=e.target;this.dispatchEvent(event)};ImageUploaderController.prototype._progressHandler=function(e){var event=new com.events.Event(com.events.Event.PROGRESS);event.currentTarget=e.currentTarget;event.target=e.target;this.dispatchEvent(event);var percent=0;if(typeof e.realEvent!="undefined")percent=Math.round(e.realEvent.loaded/
e.realEvent.total*100);var titleElements={"progressbar_info_progress":{}};titleElements["progressbar_info_progress"]["elements"]={"progressbar_info_progress_percent":percent,"progressbar_info_progress_file_index":this._uploadManager.getUploadingFileIndex()+1,"progressbar_info_progress_file_all":this._uploadManager.getFileNumber()};this._uploadDialog.setProgressBarValue(percent);this._uploadDialog.setProgressTitleValue(titleElements)};ImageUploaderController.prototype._loadedHandler=function(e){var infoText;
var percent;var titleElements={};var failed=false;this.uploadedFiles=this._uploadManager.getSuccessFileNumber();if(this._uploadManager.getUploadingFileIndex()==this._uploadManager.getFileNumber()){if(this._uploadManager.getFileNumber()==this._uploadManager.getSuccessFileNumber()){titleElements["progressbar_info_all_ok"]={};percent=100;failed=false}else if(this._uploadManager.getFileNumber()==this._uploadManager.getFailedFileNumber()){titleElements["progressbar_info_all_failed"]={};percent=0;failed=
true}else{percent=Math.round(this._uploadManager.getSuccessFileNumber()/this._uploadManager.getFileNumber()*100);titleElements["progressbar_info_result"]["elements"]={"progressbar_info_result_ok_num":this._uploadManager.getSuccessFileNumber(),"progressbar_info_result_failed_num":this._uploadManager.getFailedFileNumber()};if(this._uploadManager.getFileNumber()==this._uploadManager.getSuccessFileNumber()+this._uploadManager.getFailedFileNumber())failed=true}if(failed){var event=new com.events.Event(com.events.Event.FAILED);
event.currentTarget=this;event.target=this;this.dispatchEvent(event)}this._uploadDialog.setProgressTitleValue(titleElements);this._uploadDialog.setProgressBarValue(percent)}};ImageUploaderController.prototype.setAllTitleValuesToDefault=function(){var titleElements={};titleElements["progressbar_info_all_ok"]={};titleElements["progressbar_info_all_failed"]={};titleElements["progressbar_info_result"]={};titleElements["progressbar_info_progress"]={};titleElements["progressbar_info_result"]["elements"]=
{"progressbar_info_result_ok_num":"","progressbar_info_result_failed_num":""};titleElements["progressbar_info_progress"]["elements"]={"progressbar_info_progress_percent":"","progressbar_info_progress_file_index":"","progressbar_info_progress_file_all":""}};ImageUploaderController.prototype.uploadImageService=function(value){this._uploadImageService=value};ImageUploaderController.prototype.fileTypes=function(value){this._fileTypes=value};ImageUploaderController.prototype.uploadifySettings=function(value){this._uploadifySettings=
value};ImageUploaderController.prototype.memberid=function(value){this._memberid=value};ImageUploaderController.prototype.sessionid=function(value){this._sessionid=value};ImageUploaderController.prototype.forceFlashUploader=function(value){this._forceFlashUploader=value};ImageUploaderController.prototype.destroy=function(){if(this._uploadManager){this._uploadManager.destroy();this._uploadManager.removeEventListener(com.events.Event.CHANGE,this,"_fileSelectedHandler");this._uploadManager.removeEventListener(com.events.Event.PROGRESS,
this,"_progressHandler");this._uploadManager.removeEventListener(com.events.Event.LOADED,this,"_loadedHandler");this._uploadManager.removeEventListener(com.events.Event.COMPLETE,this,"_uploadCompleted")}if(this._uploadDialog)this._uploadDialog.removeEventListener(com.events.Event.CLOSE,this,"_closeDialogHandler")};ImageUploaderController.prototype.setUploadifyPosition=function(value){if(!this._uploadManager.isHTML5()){this.uploadifyPosition=value;this.repositionFlashUploader(false)}};ImageUploaderController.prototype.maxFileNum=
function(value){this._maxFileNum=value};return ImageUploaderController}(com.events.EventDispatcher);mpimagesuploader.ImageUploaderController=ImageUploaderController})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageUploaderEvent=function(_super){__extends(ImageUploaderEvent,_super);function ImageUploaderEvent(type,value,oldValue){_super.call(this,type)}ImageUploaderEvent.SELECTED="selected";return ImageUploaderEvent}(com.events.Event);mpimagesuploader.ImageUploaderEvent=ImageUploaderEvent})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageUploaderLogic=function(_super){__extends(ImageUploaderLogic,_super);function ImageUploaderLogic(){_super.call(this);this._config=com.utils.SingletonManager.getInstance(mpimagesuploader.Config);this._config.addEventListener(mpimagesuploader.ConfigChangeEvent.STATUS,this,"statusChangeHandler")}ImageUploaderLogic.prototype.controller=function(value){if(arguments.length){this._controller=value;this.setup()}else return this._controller};ImageUploaderLogic.prototype.setup=
function(){var setupResult=_super.prototype.setup.call(this);if(this._controller){this._controller.uploadImageService(com.singletons.URLProvider.url("upload_image_service",{memberId:this._config.memberId(),requestId:(new Date).getTime()}));this._controller.fileTypes(this._config.filetypes());this._controller.uploadifySettings(this._config.uploadify());this._controller.memberid(this._config.memberId());this._controller.sessionid(this._config.sessionId());this._controller.maxFileNum(this._config.maxPictures());
this._controller.forceFlashUploader(this._config.forceFlashUploader());this._controller.addEventListener(com.events.Event.OPEN,this,"_controllerHandler");this._controller.addEventListener(com.events.Event.CHANGE,this,"_controllerHandler");this._controller.addEventListener(com.events.Event.CLOSE,this,"_controllerHandler");this._controller.addEventListener(com.events.Event.COMPLETE,this,"_controllerHandler");this._controller.addEventListener(com.events.Event.PROGRESS,this,"_controllerHandler");this._controller.addEventListener(com.events.Event.FAILED,
this,"_controllerHandler");this._controller.setup()}return setupResult};ImageUploaderLogic.prototype._controllerHandler=function(e){this._config.uploadedPictures(this._controller.uploadedFiles);switch(e.type){case com.events.Event.OPEN:this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.SHOW_DIALOG);break;case com.events.Event.CHANGE:this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.START_UPLOADING);break;case com.events.Event.CLOSE:if(this._config.uploaderStatus()!=mpimagesuploader.ImageUploaderStatus.FILE_UPLOADING)this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.HIDE_DIALOG);
break;case com.events.Event.PROGRESS:if(this._config.uploaderStatus()!=mpimagesuploader.ImageUploaderStatus.FILE_UPLOADING)this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.FILE_UPLOADING);break;case com.events.Event.COMPLETE:this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.ALL_FILES_UPLOADED);break;case com.events.Event.FAILED:this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.FILES_FAILED);break}};ImageUploaderLogic.prototype.statusChangeHandler=function(e){if(this._controller){this._controller.maxFileNum(this._config.maxPictures());
if(e.target){this._controller.status(this._config.uploaderStatus());if(this._config.uploaderStatus()==mpimagesuploader.ImageUploaderStatus.SHOW_DIALOG)this._controller.setUploadifyPosition(this._config.getElementPosition("mpimagesuploader_uploader_browse"))}}};ImageUploaderLogic.prototype.showUploader=function(value){this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.SHOW_DIALOG)};ImageUploaderLogic.prototype.showNoPhoto=function(value){this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.SHOW_UPLOAD_BUTTON)};
ImageUploaderLogic.prototype.destroy=function(){if(this._controller){this._controller.removeEventListener(com.events.Event.OPEN,this,"_controllerHandler");this._controller.removeEventListener(com.events.Event.CHANGE,this,"_controllerHandler");this._controller.removeEventListener(com.events.Event.CLOSE,this,"_controllerHandler");this._controller.removeEventListener(com.events.Event.COMPLETE,this,"_controllerHandler");this._controller.removeEventListener(com.events.Event.PROGRESS,this,"_controllerHandler");
this._controller.removeEventListener(com.events.Event.FAILED,this,"_controllerHandler")}};return ImageUploaderLogic}(com.core.BaseLogic);mpimagesuploader.ImageUploaderLogic=ImageUploaderLogic})(mpimagesuploader||(mpimagesuploader={}));var com;
(function(com){(function(managers){(function(memberprofile){var MemberProfileData=function(){function MemberProfileData(){this.profileData=[]}return MemberProfileData}();memberprofile.MemberProfileData=MemberProfileData})(managers.memberprofile||(managers.memberprofile={}));var memberprofile=managers.memberprofile})(com.managers||(com.managers={}));var managers=com.managers})(com||(com={}));var com;
(function(com){(function(events){var MemberProfileImagesManagerEvent=function(_super){__extends(MemberProfileImagesManagerEvent,_super);function MemberProfileImagesManagerEvent(type,data,hash){if(typeof data==="undefined")data=null;if(typeof hash==="undefined")hash=null;_super.call(this,type);this.data=data;this.hash=hash}MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA="loadedImagesData";MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA_FAILED="loadedImagesDataFailed";MemberProfileImagesManagerEvent.SET_PROFILE_SUCCES=
"setProfileSucces";MemberProfileImagesManagerEvent.SET_PROFILE_FAILED="setProfileFailed";MemberProfileImagesManagerEvent.REMOVE_PROFILE_SUCCES="removeProfileSucces";MemberProfileImagesManagerEvent.REMOVE_PROFILE_FAILED="removeProfileFailed";MemberProfileImagesManagerEvent.DEL_IMAGE_SUCCES="delImageSucces";MemberProfileImagesManagerEvent.DEL_IMAGE_FAILED="delImageFailed";return MemberProfileImagesManagerEvent}(com.events.Event);events.MemberProfileImagesManagerEvent=MemberProfileImagesManagerEvent})(com.events||
(com.events={}));var events=com.events})(com||(com={}));var com;
(function(com){(function(managers){(function(memberprofile){var MemberProfileImageData=function(){function MemberProfileImageData(){}MemberProfileImageData.prototype.setImageData=function(data){if(!data)return;this.imageURL=data["link"];this.thumbnailURL=data["tmb_link"];this.hash=data["hash"];this.isProfile=data["profile"]=="1";this.status=data["status"];this.imageId=data["id"];this.converted=data["converted"]=="1"};return MemberProfileImageData}();memberprofile.MemberProfileImageData=MemberProfileImageData})(managers.memberprofile||
(managers.memberprofile={}));var memberprofile=managers.memberprofile})(com.managers||(com.managers={}));var managers=com.managers})(com||(com={}));var com;
(function(com){(function(managers){(function(memberprofile){var MemberProfileImagesManager=function(_super){__extends(MemberProfileImagesManager,_super);function MemberProfileImagesManager(){_super.call(this);this._imagesDataLoader=new com.net.URLLoader;this._imagesDataLoader.addEventListener(com.events.URLEvent.SUCCESS,this,"_imagesDataLoadedHandler");this._imagesDataLoader.addEventListener(com.events.URLEvent.FAILED,this,"_imagesDataErrorHandler");this._setProfileImageLoader=new com.net.URLLoader;
this._setProfileImageLoader.addEventListener(com.events.URLEvent.SUCCESS,this,"_setProfileLoadedHandler");this._setProfileImageLoader.addEventListener(com.events.URLEvent.FAILED,this,"_setProfileErrorHandler");this._removeProfileImageLoader=new com.net.URLLoader;this._removeProfileImageLoader.addEventListener(com.events.URLEvent.SUCCESS,this,"_removeProfileLoadedHandler");this._removeProfileImageLoader.addEventListener(com.events.URLEvent.FAILED,this,"_removeProfileErrorHandler");this._delImageLoader=
new com.net.URLLoader;this._delImageLoader.addEventListener(com.events.URLEvent.SUCCESS,this,"_delImageLoadedHandler");this._delImageLoader.addEventListener(com.events.URLEvent.FAILED,this,"_delImageErrorHandler")}MemberProfileImagesManager.prototype.loadImagesData=function(){if(this._imagesDataServiceURL!=null&&this._imagesDataServiceURL!=undefined){var requestId=(new Date).getTime()+""+(Math.random()*1E4|0);var crossdomain=this._imagesDataServiceURL+(this._imagesDataServiceURL.indexOf("?")!=-1?
"&":"?")+"requestId="+requestId;this._loaderConfig={url:this._imagesDataServiceURL,json:true,method:com.net.URLLoader.GET,useCrossdomain:false,useCrossdomainProxy:false};this._imagesDataLoader.load(this._loaderConfig)}};MemberProfileImagesManager.prototype._parseLoadedData=function(e){var data={};if(typeof e=="object"&&typeof e.urlResponse=="object"&&typeof e.urlResponse.response!==typeof undefined)if(typeof e.urlResponse.response=="string"&&typeof e.urlResponse.responseJson=="object"&&typeof e.urlResponse.responseJson.contents==
"object")data=e.urlResponse.responseJson.contents;else if(typeof e.urlResponse.response=="object")data=e.urlResponse.response;else data={};return data};MemberProfileImagesManager.prototype._imagesDataLoadedHandler=function(e){var data=this._parseLoadedData(e);if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true"){var memberProfileData=new memberprofile.MemberProfileData;var imgArr=data["images"];var l=imgArr.length;for(var i=0;i<l;i++){var imgOBJ=imgArr[i];
var memberProfileImageData=new memberprofile.MemberProfileImageData;memberProfileImageData.setImageData(imgOBJ);memberProfileData.profileData.push(memberProfileImageData)}this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA,memberProfileData))}else this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA_FAILED))};MemberProfileImagesManager.prototype._imagesDataErrorHandler=
function(e){this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA_FAILED))};MemberProfileImagesManager.prototype.setProfileImage=function(hash){if(this._setProfileImageServiceURL!=null&&this._setProfileImageServiceURL!=undefined){this._loaderConfig={url:com.singletons.URLProvider.replace(this._setProfileImageServiceURL,{hash:hash}),json:true,method:com.net.URLLoader.GET};this._setProfileImageLoader.load(this._loaderConfig)}};
MemberProfileImagesManager.prototype._setProfileLoadedHandler=function(e){var data=this._parseLoadedData(e);if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true")this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_SUCCES,null,data["hash"]));else this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_FAILED))};MemberProfileImagesManager.prototype._setProfileErrorHandler=
function(e){this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_FAILED))};MemberProfileImagesManager.prototype.removeProfileImage=function(hash){if(this._removeProfileImageServiceURL!=null&&this._removeProfileImageServiceURL!=undefined){this._loaderConfig={url:com.singletons.URLProvider.replace(this._removeProfileImageServiceURL,{hash:hash}),json:true,method:com.net.URLLoader.GET};this._removeProfileImageLoader.load(this._loaderConfig)}};
MemberProfileImagesManager.prototype._removeProfileLoadedHandler=function(e){var data=this._parseLoadedData(e);if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true")this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_SUCCES,null,data["hash"]));else this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_FAILED))};MemberProfileImagesManager.prototype._removeProfileErrorHandler=
function(e){this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_FAILED))};MemberProfileImagesManager.prototype.delImage=function(hash){if(this._delImageServiceURL!=null&&this._delImageServiceURL!=undefined){this._loaderConfig={url:com.singletons.URLProvider.replace(this._delImageServiceURL,{hash:hash}),json:true,method:com.net.URLLoader.GET,useCrossdomain:false};this._delImageLoader.load(this._loaderConfig)}};MemberProfileImagesManager.prototype._delImageLoadedHandler=
function(e){var data=this._parseLoadedData(e);if(data&&typeof data["success"]!==typeof undefined&&String(data["success"]).toLowerCase()=="true")this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_SUCCES,null,data["hash"]));else this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_FAILED))};MemberProfileImagesManager.prototype._delImageErrorHandler=function(e){this.dispatchEvent(new com.events.MemberProfileImagesManagerEvent(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_FAILED))};
MemberProfileImagesManager.prototype.imagesDataServiceURL=function(value){if(arguments.length)this._imagesDataServiceURL=value;return this._imagesDataServiceURL};MemberProfileImagesManager.prototype.setProfileImageServiceURL=function(value){if(arguments.length)this._setProfileImageServiceURL=value;return this._setProfileImageServiceURL};MemberProfileImagesManager.prototype.removeProfileImageServiceURL=function(value){if(arguments.length)this._removeProfileImageServiceURL=value;return this._removeProfileImageServiceURL};
MemberProfileImagesManager.prototype.delImageServiceURL=function(value){if(arguments.length)this._delImageServiceURL=value;return this._delImageServiceURL};return MemberProfileImagesManager}(com.events.EventDispatcher);memberprofile.MemberProfileImagesManager=MemberProfileImagesManager})(managers.memberprofile||(managers.memberprofile={}));var memberprofile=managers.memberprofile})(com.managers||(com.managers={}));var managers=com.managers})(com||(com={}));var com;
(function(com){(function(utils){(function(image){var ImageSlider=function(){function ImageSlider(){this._index=0;this._animated=true;this._animationInProgress=false}ImageSlider.NEXT_IMAGE="nextImage";ImageSlider.PREVIEW_IMAGE="previewImage";ImageSlider.prototype.element=function(value){if(arguments.length)this._element=value;else return this._element};ImageSlider.prototype.scrollImage=function(value){var maxIndex=this._data.length-1;var previousIndex=this._index;switch(value){case ImageSlider.NEXT_IMAGE:this._index=
maxIndex==this._index?0:this._index+1;break;case ImageSlider.PREVIEW_IMAGE:this._index=this._index==0?maxIndex:this._index-1;break}this.setImage(value==ImageSlider.PREVIEW_IMAGE)};ImageSlider.prototype.data=function(value){if(arguments.length){if(!this.compareData(value,this._data)){this.clear();this._data=[];this._data=value;var firstElement=this._data[0];this._element.append(firstElement);this._actualImage=firstElement;firstElement.style.zIndex=this._data.length+"";firstElement.style.width=this._element.width()+
"px";firstElement.style.height=this._element.height()+"px";firstElement.style.position="absolute"}}else return this._data};ImageSlider.prototype.addElement=function(value){if(this._element){if(!this._data){this.clear();this._data=new Array;var firstElement=value;this._element.append(value);this._actualImage=firstElement;firstElement.style.zIndex=this._data.length+"";firstElement.style.width=this._element.width()+"px";firstElement.style.height=this._element.height()+"px";firstElement.style.position=
"absolute";firstElement.style.opacity="0";TweenLite.to(firstElement,0,{opacity:0})}else{this._element.append(value);this._element[0].removeChild(value)}this._data.push(value)}};ImageSlider.prototype.compareSrcAttribute=function(attributes,value){var attrLength=attributes.length;for(var j=0;j<attrLength;j++)if(attributes[j].name=="src"&&attributes[j].value==value)return true;return false};ImageSlider.prototype.removeElement=function(value){var attributes;var dataLength=this._data.length;for(var i=
0;i<dataLength;i++)if(typeof this._data[i]!=typeof undefined&&typeof this._data[i].firstChild!=typeof undefined&&this._data[i].firstChild&&this._data[i].firstChild.attributes.length){attributes=this._data[i].firstChild.attributes;if(this.compareSrcAttribute(attributes,value)){this._data.splice(i,1);if(i==this._index){this._index--;this.correctIndex();this.scrollImage(ImageSlider.NEXT_IMAGE)}}}};ImageSlider.prototype.cleanData=function(){this._data=[];this._data=null;this._index=0};ImageSlider.prototype.animated=
function(value){if(arguments.length)this._animated=value;else return this._animated};ImageSlider.prototype.animationInProgress=function(value){if(arguments.length)this._animationInProgress=value;else return this._animationInProgress};ImageSlider.prototype.index=function(value){if(arguments.length){if(this._index!=value){var oldValue=this._index;this._index=value;this.correctIndex();this.setImage(this._index<oldValue?true:false)}}else return this._index};ImageSlider.prototype.showActualImage=function(){TweenLite.to(this._actualImage,
0,{opacity:1})};ImageSlider.prototype.setImage=function(reverse){var _this=this;if(this._data&&this._data.length>0){if(typeof this._data[this._index]==typeof undefined)this._index=0;var nextElement=this._data[this._index];var previousElement=this._actualImage;previousElement.style.zIndex=this._data.length+1+"";previousElement.style.position="absolute";var firstElement=this._data[0]==previousElement;this._element.append(nextElement);this._actualImage=nextElement;nextElement.style.width=this._element.width()+
"px";nextElement.style.height=this._element.height()+"px";nextElement.style.position="absolute";nextElement.style.zIndex=parseInt(previousElement.style.zIndex)+(reverse?-1:1)+"";if(this._animated){nextElement.style.left=reverse?0+"px":this._element.width()+"px";nextElement.style.opacity=reverse?"1":"0";var targetLeft=reverse?this._element.width():0;var duration=firstElement||reverse?0.6*0.5:0.5;this._animationInProgress=true;if(reverse)TweenLite.to(previousElement,duration,{opacity:1,left:targetLeft,
ease:Expo.easeInOut,onComplete:function(){_this._element[0].removeChild(previousElement);_this._animationInProgress=false}});else TweenLite.to(nextElement,duration,{opacity:1,left:targetLeft,ease:Expo.easeOut,onComplete:function(){_this._element[0].removeChild(previousElement);_this._animationInProgress=false}})}else{nextElement.style.left=0+"px";nextElement.style.opacity="1";this._animationInProgress=false}}};ImageSlider.prototype.compareData=function(valueA,valueB){if(valueA&&valueB&&valueA.length==
valueB.length){var n=valueA.length;for(var i=0;i<n;i++)if(valueA[i]!=valueB[i]);return true}return false};ImageSlider.prototype.correctIndex=function(){this._index=this._index<0?this._data.length-1:this._index;this._index=this._index<0||this._index>=this._data.length?0:this._index};ImageSlider.prototype.clear=function(){if(this._element&&this._element.parent().length)this._element.detach(">*")};return ImageSlider}();image.ImageSlider=ImageSlider})(utils.image||(utils.image={}));var image=utils.image})(com.utils||
(com.utils={}));var utils=com.utils})(com||(com={}));var com;
(function(com){(function(utils){(function(image){var Image=function(_super){__extends(Image,_super);function Image(){_super.call(this);this._fillArea=true;this._imageWidth=-1;this._imageHeight=-1}Image.prototype.element=function(value){if(arguments.length)this._element=value;else return this._element;this._init()};Image.prototype._init=function(){if(this._element){this._element.css({position:"relative",overflow:"hidden"});this._image=document.createElement("img");this._image.className=this._element[0].className+
"_image";this._element.append(this._image);com.events.EventHandler.on(this._image,com.events.Event.LOADED,this,"_imageLoadedHanler",null);com.events.EventHandler.on(this._image,com.events.Event.ERROR,this,"_imageLoaderErrorHanler",null)}};Image.prototype.fillArea=function(value){if(arguments.length){this._fillArea=value;this.draw()}else return this._fillArea};Image.prototype.imageURL=function(value){if(arguments.length){this._imageURL=value;this._image.src=this._imageURL}else return this._imageURL};
Image.prototype.imageWidth=function(value){if(arguments.length){this._imageWidth=value;this.draw()}else if(this._image!=null&&this._image!=undefined)return this._image.width;else return this._imageWidth};Image.prototype.imageHeight=function(value){if(arguments.length){this._imageHeight=value;this.draw()}else if(this._image!=null&&this._image!=undefined)return this._image.height;else return this._imageHeight};Image.prototype._imageLoadedHanler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.LOADED));
this.draw()};Image.prototype._imageLoaderErrorHanler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.ERROR))};Image.prototype.draw=function(){var thisWidth=this._imageWidth==-1?this._element.width():this._imageWidth;var thisHeight=this._imageHeight==-1?this._element.height():this._imageHeight;if(this._image!=null&&this._image!=undefined){if(this._fillArea){this._image.width=thisWidth;this._image.height=thisHeight}this.dispatchEvent(new com.events.Event(com.events.Event.RESIZE))}};
return Image}(com.events.EventDispatcher);image.Image=Image})(utils.image||(utils.image={}));var image=utils.image})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageWithData=function(_super){__extends(ImageWithData,_super);function ImageWithData(){_super.call(this)}ImageWithData.prototype.memberProfileImageData=function(value){if(arguments.length){this._memberProfileImageData=value;this._hash=this._memberProfileImageData.hash}else return this._memberProfileImageData};ImageWithData.prototype.hash=function(value){if(arguments.length)this._hash=value;else return this._hash};return ImageWithData}(com.utils.image.Image);mpimagesuploader.ImageWithData=
ImageWithData})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;(function(mpimagesuploader){var ImageSliderEvent=function(_super){__extends(ImageSliderEvent,_super);function ImageSliderEvent(type){_super.call(this,type)}ImageSliderEvent.SHOW_THUMBNAIL_VIEWER="showThumbnailViewer";return ImageSliderEvent}(com.events.Event);mpimagesuploader.ImageSliderEvent=ImageSliderEvent})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ImageSliderDialog=function(_super){__extends(ImageSliderDialog,_super);function ImageSliderDialog(iImageSliderDialog){_super.call(this);this._inited=false;this._imagesWithData=[];this._index=0;this._isKeyDown=false;this._centerSliderHideTimer=new com.utils.timer.Timer(100,1);this._centerSliderHideTimer.addEventListener(com.events.TimerEvent.TIMER,this,"_centerSliderHideTimerHandler");this._sliderHideTimer=new com.utils.timer.Timer(100,1);this._sliderHideTimer.addEventListener(com.events.TimerEvent.TIMER,
this,"_sliderHideTimerHandler");this._imageSlider=new com.utils.image.ImageSlider;this._imageSlider.element(iImageSliderDialog.imageSlider);this._leftSliderButton=iImageSliderDialog.leftSliderButton;this._rightSliderButton=iImageSliderDialog.rightSliderButton;this._centerSliderButton=iImageSliderDialog.centerSliderButton;this._editPhotosButton=iImageSliderDialog.editPhotosButton}ImageSliderDialog.prototype._sliderButtonClickHandler=function(e){if(this._imageSlider&&!this._imageSlider.animationInProgress())this._imageSlider.scrollImage(e.target==
this._leftSliderButton[0]?com.utils.image.ImageSlider.PREVIEW_IMAGE:com.utils.image.ImageSlider.NEXT_IMAGE)};ImageSliderDialog.prototype._keyDownHandler=function(e){if(this._imageSlider)if((e.keyCode==37||e.keyCode==39)&&!this._isKeyDown){this._isKeyDown=true;this._imageSlider.scrollImage(e.keyCode==37?com.utils.image.ImageSlider.PREVIEW_IMAGE:com.utils.image.ImageSlider.NEXT_IMAGE)}};ImageSliderDialog.prototype._keyUpHandler=function(e){this._isKeyDown=false};ImageSliderDialog.prototype._sliderButtonOutOverHandler=
function(e){switch(e.type){case com.events.MouseEvent.MOUSE_OVER:if(this._sliderHideTimer.running)this._sliderHideTimer.stop();if(e.target==this._leftSliderButton[0])this._leftSliderButton.find(">*")[0].style.display="block";else this._rightSliderButton.find(">*")[0].style.display="block";break;case com.events.MouseEvent.MOUSE_OUT:if(e.target==this._leftSliderButton[0])this._sliderTarget=this._leftSliderButton;else this._sliderTarget=this._rightSliderButton;this._sliderHideTimer.reset();this._sliderHideTimer.start();
break}};ImageSliderDialog.prototype._centerSliderButtonOutOverHandler=function(e){var element=this._centerSliderButton.find(">*");if(typeof element!=typeof undefined)switch(e.type){case com.events.MouseEvent.MOUSE_OVER:if(this._centerSliderHideTimer.running)this._centerSliderHideTimer.stop();element.css("display","block");break;case com.events.MouseEvent.MOUSE_OUT:this._centerSliderHideTimer.reset();this._centerSliderHideTimer.start();break}};ImageSliderDialog.prototype._centerSliderHideTimerHandler=
function(e){this._centerSliderHideTimer.stop();var element=this._centerSliderButton.find(">*");if(typeof element!=typeof undefined)element.css("display","none")};ImageSliderDialog.prototype._sliderHideTimerHandler=function(e){this._sliderHideTimer.stop();var element=this._sliderTarget.find(">*");if(typeof element!=typeof undefined)element.css("display","none")};ImageSliderDialog.prototype._editPhotosButtonClickHandler=function(e){if(typeof e.realEvent.preventDefault=="function")e.realEvent.preventDefault();
this.dispatchEvent(new mpimagesuploader.ImageSliderEvent(mpimagesuploader.ImageSliderEvent.SHOW_THUMBNAIL_VIEWER))};ImageSliderDialog.prototype.parseData=function(){if(this._memberProfileData&&this._imageSlider){this._imageSlider.cleanData();this._imagesWithData=[];var l=this._memberProfileData.profileData.length;for(var i=0;i<l;i++){var memberProfileImageData=this._memberProfileData.profileData[i];var img=com.create("<div></div>");img.attr("id","mp_image_"+i);img.addClass("mp_image");this._imageSlider.addElement(img[0]);
var image=new mpimagesuploader.ImageWithData;image.element(img);image.imageURL(memberProfileImageData.imageURL);image.memberProfileImageData(memberProfileImageData);image.imageWidth(this._imageSlider.element().width());image.imageHeight(this._imageSlider.element().height());this._imagesWithData.push(image);if(memberProfileImageData.isProfile)this._index=i}this._imageSlider.animated(false);this._imageSlider.index(this._index);this._imageSlider.animated(true);if(this._index==0)this._imageSlider.showActualImage();
if(l>1)this.showSlider();else this.hideSlider()}};ImageSliderDialog.prototype.memberProfileData=function(value){if(arguments.length){this._memberProfileData=value;this.parseData()}else return this._memberProfileData};ImageSliderDialog.prototype.showSlider=function(){if(this._memberProfileData&&this._memberProfileData.profileData.length>1){this._leftSliderButton[0].style.cursor="pointer";this._rightSliderButton[0].style.cursor="pointer";this._editPhotosButton[0].style.cursor="pointer";com.get(window).on(com.events.KeyboardEvent.KEY_DOWN,
this,"_keyDownHandler");com.get(window).on(com.events.KeyboardEvent.KEY_UP,this,"_keyUpHandler");this._leftSliderButton.on(com.events.MouseEvent.CLICK,this,"_sliderButtonClickHandler");this._leftSliderButton.on(com.events.MouseEvent.MOUSE_OUT,this,"_sliderButtonOutOverHandler");this._leftSliderButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_sliderButtonOutOverHandler");this._rightSliderButton.on(com.events.MouseEvent.CLICK,this,"_sliderButtonClickHandler");this._rightSliderButton.on(com.events.MouseEvent.MOUSE_OUT,
this,"_sliderButtonOutOverHandler");this._rightSliderButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_sliderButtonOutOverHandler")}this._editPhotosButton.on(com.events.MouseEvent.CLICK,this,"_editPhotosButtonClickHandler");this._centerSliderButton.on(com.events.MouseEvent.MOUSE_OUT,this,"_centerSliderButtonOutOverHandler");this._centerSliderButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_centerSliderButtonOutOverHandler")};ImageSliderDialog.prototype.hideSlider=function(hideCenter){if(typeof hideCenter===
"undefined")hideCenter=false;this._leftSliderButton[0].style.cursor="default";this._rightSliderButton[0].style.cursor="default";com.get(window).un(com.events.KeyboardEvent.KEY_DOWN,this,"_keyDownHandler");com.get(window).un(com.events.KeyboardEvent.KEY_UP,this,"_keyUpHandler");this._leftSliderButton.un(com.events.MouseEvent.CLICK,this,"_sliderButtonClickHandler");this._leftSliderButton.un(com.events.MouseEvent.MOUSE_OUT,this,"_sliderButtonOutOverHandler");this._leftSliderButton.un(com.events.MouseEvent.MOUSE_OVER,
this,"_sliderButtonOutOverHandler");this._rightSliderButton.un(com.events.MouseEvent.CLICK,this,"_sliderButtonClickHandler");this._rightSliderButton.un(com.events.MouseEvent.MOUSE_OUT,this,"_sliderButtonOutOverHandler");this._rightSliderButton.un(com.events.MouseEvent.MOUSE_OVER,this,"_sliderButtonOutOverHandler");if(this._memberProfileData&&this._memberProfileData.profileData.length>1||hideCenter){if(typeof this._centerSliderButton[0]!=typeof undefined)this._centerSliderButton[0].style.cursor="default";
var element=this._centerSliderButton.find(">*");if(typeof element!=typeof undefined)element.css("display","none");this._centerSliderButton[0].style.cursor="default";this._editPhotosButton.un(com.events.MouseEvent.CLICK,this,"_editPhotosButtonClickHandler");this._centerSliderButton.un(com.events.MouseEvent.MOUSE_OUT,this,"_centerSliderButtonOutOverHandler");this._centerSliderButton.un(com.events.MouseEvent.MOUSE_OVER,this,"_centerSliderButtonOutOverHandler")}else{this._editPhotosButton.on(com.events.MouseEvent.CLICK,
this,"_editPhotosButtonClickHandler");this._centerSliderButton.on(com.events.MouseEvent.MOUSE_OUT,this,"_centerSliderButtonOutOverHandler");this._centerSliderButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_centerSliderButtonOutOverHandler")}var leftSliderButtonElement=this._leftSliderButton.find(">*");if(typeof leftSliderButtonElement!=typeof undefined)leftSliderButtonElement.css("display","none");var rightSliderButtonElement=this._rightSliderButton.find(">*");if(typeof rightSliderButtonElement!=
typeof undefined)rightSliderButtonElement.css("display","none")};ImageSliderDialog.prototype.enableKeyBoardEvents=function(enabled){if(enabled){com.get(window).on(com.events.KeyboardEvent.KEY_DOWN,this,"_keyDownHandler");com.get(window).on(com.events.KeyboardEvent.KEY_UP,this,"_keyUpHandler")}else{com.get(window).un(com.events.KeyboardEvent.KEY_DOWN,this,"_keyDownHandler");com.get(window).un(com.events.KeyboardEvent.KEY_UP,this,"_keyUpHandler")}};ImageSliderDialog.prototype.deleteImage=function(hash){for(var i=
0;i<this._imagesWithData.length;i++){var image=this._imagesWithData[i];if(image.hash()==hash){if(this._imageSlider)this._imageSlider.removeElement(image.imageURL());this._imagesWithData.splice(i,1);return}}};ImageSliderDialog.prototype.setProfileimage=function(index){if(this._imageSlider)this._imageSlider.index(index)};ImageSliderDialog.prototype.showEditLabel=function(){if(this._editPhotosButton){var uploadLabel=this._editPhotosButton.find(".upload");if(uploadLabel)uploadLabel.hide();var editLabel=
this._editPhotosButton.find(".edit");if(editLabel)editLabel.show()}};ImageSliderDialog.prototype.showUploadLabel=function(){if(this._editPhotosButton){var uploadLabel=this._editPhotosButton.find(".upload");if(uploadLabel)uploadLabel.show();var editLabel=this._editPhotosButton.find(".edit");if(editLabel)editLabel.hide()}};ImageSliderDialog.prototype.clearMainImageHolder=function(){this._imageSlider.clear();this.showUploadLabel()};return ImageSliderDialog}(com.events.EventDispatcher);mpimagesuploader.ImageSliderDialog=
ImageSliderDialog})(mpimagesuploader||(mpimagesuploader={}));var com;
(function(com){(function(utils){(function(image){var ThumbnailViewer=function(){function ThumbnailViewer(){this._columnNumber=4;this._hGap=5;this._vGap=5;this._cellWidth=0;this._cellHeight=0}ThumbnailViewer.prototype.element=function(value){if(arguments.length){this._element=value;this._element.css({position:"relative",overflow:"hidden"});this.setCellSize()}else return this._element};ThumbnailViewer.prototype.data=function(value){if(arguments.length){if(!this.compareData(value,this._data)){this.clear();
this._data=value;var n=this._data.length;for(var i=0;i<n;i++)this._element.append(this._data[i]);this.draw()}}else return this._data};ThumbnailViewer.prototype.addElement=function(value){if(this._element){if(!this._data){this.clear();this._data=new Array}this._data.push(value);this._element.append(value);this.draw()}};ThumbnailViewer.prototype.removeElement=function(value){if(this._element&&com.get(value))this._element[0].removeChild(value);var l=this._data.length;for(var i=0;i<l;i++)if(this._data[i]==
value)this._data.splice(i,1)};ThumbnailViewer.prototype.cleanData=function(){this._data=null};ThumbnailViewer.prototype.columnNumber=function(value){if(arguments.length){this._columnNumber=value;this.draw()}else return this._columnNumber};ThumbnailViewer.prototype.hGap=function(value){if(arguments.length){this._hGap=value;this.setCellSize();this.draw()}else return this._hGap};ThumbnailViewer.prototype.vGap=function(value){if(arguments.length){this._vGap=value;this.setCellSize();this.draw()}else return this._vGap};
ThumbnailViewer.prototype.setCellSize=function(){var elementWidth=this._element.width();if(elementWidth<1)elementWidth=536;this._cellWidth=Math.round((elementWidth-(this._columnNumber>1?(this._columnNumber-1)*this._hGap*2:0))/this._columnNumber);this._cellHeight=Math.round(this._cellWidth*(3/4))};ThumbnailViewer.prototype.draw=function(){if(this._element)if(this._data&&this._data.length>0){var n=this._element.find(">*").length;for(var i=0;i<n;i++){var target=this._element.find(">*")[i];target.style.width=
(this._cellWidth<0?1:this._cellWidth)+"px";target.style.height=(this._cellHeight<0?1:this._cellHeight)+"px";target.style.marginLeft=this._hGap*0.5+"px";target.style.marginRight=this._hGap*0.5+"px";target.style.marginTop=this._vGap*0.5+"px";target.style.marginBottom=this._hGap*0.5+"px";target.style.cssFloat="left";target.style.styleFloat="left"}}};ThumbnailViewer.prototype.compareData=function(valueA,valueB){if(valueA&&valueB&&valueA.length==valueB.length){var n=valueA.length;for(var i=0;i<n;i++)if(valueA[i]!=
valueB[i]);return true}return false};ThumbnailViewer.prototype.clear=function(){if(this._element&&this._element.parent().length)this._element.detach(">*")};return ThumbnailViewer}();image.ThumbnailViewer=ThumbnailViewer})(utils.image||(utils.image={}));var image=utils.image})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var ImagePanelEvent=function(_super){__extends(ImagePanelEvent,_super);function ImagePanelEvent(type,hash){_super.call(this,type);this.hash=hash}ImagePanelEvent.DELETE_IMAGE="deleteImage";ImagePanelEvent.SET_PROFILE_IMAGE="setProfileImage";ImagePanelEvent.DELETE_PROFILE_IMAGE="deleteProfileImage";return ImagePanelEvent}(com.events.Event);mpimagesuploader.ImagePanelEvent=ImagePanelEvent})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ImagePanel=function(_super){__extends(ImagePanel,_super);function ImagePanel(deleteButton,addProfileButton,profileIcon,deleteToolTip,addProfileToolTip,profileToolTip){_super.call(this);this._imageDeleteInProgress=false;this._setProfileInProgress=false;this._deleteProfileInProgress=false;this._hideTimer=new com.utils.timer.Timer(100,1);this._hideTimer.addEventListener(com.events.TimerEvent.TIMER,this,"_hideTimerHandler");this._deleteButton=deleteButton;this._addProfileButton=
addProfileButton;this._profileIcon=profileIcon;this._deleteToolTip=deleteToolTip;this._addProfileToolTip=addProfileToolTip;this._profileToolTip=profileToolTip}ImagePanel.prototype.element=function(value){if(arguments.length){_super.prototype.element.call(this,value);this._element.css({overflow:"visible"});this._element.append(this._deleteButton);this._element.append(this._addProfileButton);this._element.append(this._profileIcon);this._element.append(this._deleteToolTip);this._element.append(this._addProfileToolTip);
this._element.append(this._profileToolTip);this._element.on(com.events.MouseEvent.MOUSE_OUT,this,"_mouseOutOverHandler");this._element.on(com.events.MouseEvent.MOUSE_OVER,this,"_mouseOutOverHandler");this._deleteButton.on(com.events.MouseEvent.CLICK,this,"_deleteButtonClickHandler");this._addProfileButton.on(com.events.MouseEvent.CLICK,this,"_addProfileButtonClickHandler");this._deleteButton.on(com.events.MouseEvent.MOUSE_OUT,this,"_iconsMouseOutOverHandler");this._addProfileButton.on(com.events.MouseEvent.MOUSE_OUT,
this,"_iconsMouseOutOverHandler");this._deleteButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_iconsMouseOutOverHandler");this._addProfileButton.on(com.events.MouseEvent.MOUSE_OVER,this,"_iconsMouseOutOverHandler")}else return _super.prototype.element.call(this)};ImagePanel.prototype.memberProfileImageData=function(value){if(arguments.length){this._memberProfileImageData=value;this._hash=this._memberProfileImageData.hash;this.isProfile(this._memberProfileImageData.isProfile)}else return this._memberProfileImageData};
ImagePanel.prototype.hash=function(value){if(arguments.length)this._hash=value;else return this._hash};ImagePanel.prototype.isProfile=function(value){if(arguments.length){this._isProfile=value;if(this._isProfile){this._addProfileButton.hide();this._profileIcon.show();this._profileIcon.on(com.events.MouseEvent.MOUSE_OUT,this,"_iconsMouseOutOverHandler");this._profileIcon.on(com.events.MouseEvent.MOUSE_OVER,this,"_iconsMouseOutOverHandler")}else{this.deleteProfileInProgress(false);this._profileIcon.hide();
this._profileIcon.un(com.events.MouseEvent.MOUSE_OUT,this,"_iconsMouseOutOverHandler");this._profileIcon.un(com.events.MouseEvent.MOUSE_OVER,this,"_iconsMouseOutOverHandler")}}else return this._isProfile};ImagePanel.prototype.imageDeleteInProgress=function(value){if(arguments.length){this._imageDeleteInProgress=value;if(!this._imageDeleteInProgress){this._deleteButton.hide();this._hideBorder()}else this._showBorder()}else return this._imageDeleteInProgress};ImagePanel.prototype.setProfileInProgress=
function(value){if(arguments.length){this._setProfileInProgress=value;if(!this._setProfileInProgress){this._addProfileButton.hide();this._hideBorder()}else this._showBorder()}else return this._setProfileInProgress};ImagePanel.prototype.deleteProfileInProgress=function(value){if(arguments.length){this._deleteProfileInProgress=value;if(!this._deleteProfileInProgress){this._addProfileButton.hide();this._hideBorder()}else this._showBorder()}else return this._setProfileInProgress};ImagePanel.prototype.deleteButton=
function(value){if(arguments.length)this._deleteButton=value;else return this._deleteButton};ImagePanel.prototype.addProfileButton=function(value){if(arguments.length)this._addProfileButton=value;else return this._addProfileButton};ImagePanel.prototype.profileIcon=function(value){if(arguments.length)this._profileIcon=value;else return this._profileIcon};ImagePanel.prototype._mouseOutOverHandler=function(e){if(e.stopPropagation)e.stopPropagation();else e.realEvent["cancelBubble"]=true;switch(e.type){case com.events.MouseEvent.MOUSE_OVER:if(this._hideTimer.running)this._hideTimer.stop();
this._deleteButton.show();if(!this._isProfile)this._addProfileButton.show();break;case com.events.MouseEvent.MOUSE_OUT:this._hideTimer.reset();this._hideTimer.start();break}};ImagePanel.prototype._hideTimerHandler=function(e){this._hideTimer.stop();if(!this._imageDeleteInProgress)this._deleteButton.hide();if(!this._setProfileInProgress)this._addProfileButton.hide()};ImagePanel.prototype._deleteButtonClickHandler=function(e){this.imageDeleteInProgress(true);this.dispatchEvent(new mpimagesuploader.ImagePanelEvent(mpimagesuploader.ImagePanelEvent.DELETE_IMAGE,
this._hash))};ImagePanel.prototype._addProfileButtonClickHandler=function(e){this.setProfileInProgress(true);this.dispatchEvent(new mpimagesuploader.ImagePanelEvent(mpimagesuploader.ImagePanelEvent.SET_PROFILE_IMAGE,this._hash))};ImagePanel.prototype._profileButtonClickHandler=function(e){this.deleteProfileInProgress(true);this.dispatchEvent(new mpimagesuploader.ImagePanelEvent(mpimagesuploader.ImagePanelEvent.DELETE_PROFILE_IMAGE,this._hash))};ImagePanel.prototype._showBorder=function(){if(this._element)TweenLite.to(this._element[0],
0.2,{css:{border:"1px solid #999999"},ease:Linear.easeNone})};ImagePanel.prototype._hideBorder=function(){if(this._element&&!this._deleteProfileInProgress&&!this._setProfileInProgress&&!this._deleteProfileInProgress)TweenLite.to(this._element[0],0.1,{css:{border:"1px solid transparent"},ease:Linear.easeNone})};ImagePanel.prototype._iconsMouseOutOverHandler=function(e){var targetTop=false;if(Ext.get(e.target).getTop()>375||Ext.get("mpimagesuploader_thumbnail").getHeight()==115||Ext.get(e.target).getTop()>
300&&Ext.get("mpimagesuploader_thumbnail").getHeight()==200)targetTop=true;switch(e.target){case this._deleteButton[0]:if(e.type==com.events.MouseEvent.MOUSE_OVER){if(targetTop)this._deleteToolTip.addClass("top");else this._deleteToolTip.removeClass("top");this._deleteToolTip.show()}else this._deleteToolTip.hide();break;case this._addProfileButton[0]:if(e.type==com.events.MouseEvent.MOUSE_OVER){if(targetTop)this._addProfileToolTip.addClass("top");else this._addProfileToolTip.removeClass("top");this._addProfileToolTip.show()}else this._addProfileToolTip.hide();
break;case this._profileIcon[0]:if(e.type==com.events.MouseEvent.MOUSE_OVER){if(targetTop)this._profileToolTip.addClass("top");else this._profileToolTip.removeClass("top");this._profileToolTip.show()}else this._profileToolTip.hide();break}};return ImagePanel}(com.utils.image.Image);mpimagesuploader.ImagePanel=ImagePanel})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ConfirmationDialog=function(_super){__extends(ConfirmationDialog,_super);function ConfirmationDialog(content,yesButton,noButton){if(typeof yesButton==="undefined")yesButton=null;if(typeof noButton==="undefined")noButton=null;_super.call(this);this._content=content;this._displayed=false;this._yesButton=yesButton;if(this._yesButton)this._yesButton.on(com.events.MouseEvent.CLICK,this,"_yesButtonClickHandler");this._noButton=noButton;if(this._noButton)this._noButton.on(com.events.MouseEvent.CLICK,
this,"_noButtonClickHandler")}ConfirmationDialog.prototype._yesButtonClickHandler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.SELECT))};ConfirmationDialog.prototype._noButtonClickHandler=function(e){this.dispatchEvent(new com.events.Event(com.events.Event.CLOSE))};ConfirmationDialog.prototype.content=function(value){if(arguments.length)this._content=value;else return this._content};ConfirmationDialog.prototype.show=function(forceShow){if(typeof forceShow==="undefined")forceShow=
false;if(!this._displayed||forceShow){this._content[0].style.display="inline-block";this._displayed=true;TweenLite.to(this._content[0],0.2,{alpha:1,ease:Linear.easeNone})}};ConfirmationDialog.prototype.hide=function(){var _this=this;if(this._displayed)TweenLite.to(this._content[0],0.1,{alpha:0,ease:Linear.easeNone,onComplete:function(){_this._displayed=false;_this._content.hide()}})};return ConfirmationDialog}(com.events.EventDispatcher);mpimagesuploader.ConfirmationDialog=ConfirmationDialog})(mpimagesuploader||
(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var ThumbnailViewerEvent=function(_super){__extends(ThumbnailViewerEvent,_super);function ThumbnailViewerEvent(type,hash){_super.call(this,type);this.hash=hash}ThumbnailViewerEvent.DELETE_IMAGE="deleteImage";ThumbnailViewerEvent.SET_PROFILE_IMAGE="setProfileImage";ThumbnailViewerEvent.DELETE_PROFILE_IMAGE="deleteProfileImage";return ThumbnailViewerEvent}(com.events.Event);mpimagesuploader.ThumbnailViewerEvent=ThumbnailViewerEvent})(mpimagesuploader||(mpimagesuploader={}));
var mpimagesuploader;
(function(mpimagesuploader){var ThumbnailViewerDialog=function(_super){__extends(ThumbnailViewerDialog,_super);function ThumbnailViewerDialog(iThumbnailViewerDialog){_super.call(this);this._inited=false;this._thumbnailY=0;this._deletingImage=false;this._thumbnailStage=iThumbnailViewerDialog.thumbnailStage;this._thumbnailViewer=new com.utils.image.ThumbnailViewer;this._thumbnailViewer.element(iThumbnailViewerDialog.thumbnailViewer);this._thumbnailY=iThumbnailViewerDialog.thumbnailViewer.position().top;this._imageDeleteButton=
iThumbnailViewerDialog.imageDeleteButton;this._addProfileImageButton=iThumbnailViewerDialog.addProfileImageButton;this._profileIcon=iThumbnailViewerDialog.profileIcon;this._deleteToolTip=iThumbnailViewerDialog.deleteToolTip;this._addProfileToolTip=iThumbnailViewerDialog.addProfileToolTip;this._profileToolTip=iThumbnailViewerDialog.profileToolTip;this._imageDeleteDialog=iThumbnailViewerDialog.imageDeleteToolTip;this._imageDeleteDialog.addEventListener(com.events.Event.SELECT,this,"_imageDeleteToolTipHandler");
this._imageDeleteDialog.addEventListener(com.events.Event.CLOSE,this,"_imageDeleteToolTipHandler");this._setProfileDialog=iThumbnailViewerDialog.setProfileToolTip;this._setProfileDialog.addEventListener(com.events.Event.SELECT,this,"_setProfileImageHandler");this._setProfileDialog.addEventListener(com.events.Event.CLOSE,this,"_setProfileImageHandler");this._deleteProfileDialog=iThumbnailViewerDialog.deleteProfileToolTip;this._deleteProfileDialog.addEventListener(com.events.Event.SELECT,this,"_deleteProfileImageHandler");
this._deleteProfileDialog.addEventListener(com.events.Event.CLOSE,this,"_deleteProfileImageHandler");this._forceShowDel=false;this._forceShowProf=false}ThumbnailViewerDialog.prototype.parseData=function(){if(this._memberProfileData&&this._thumbnailViewer){this._imagePanels=[];this._thumbnailViewer.cleanData();var l=this._memberProfileData.profileData.length;var deleteButton;var profileButton;var profileIconClone;var deleteToolTip;var addProfileToolTip;var profileToolTip;for(var i=0;i<l;i++){var memberProfileImageData=
this._memberProfileData.profileData[i];var img=com.create("<div></div>");img[0].id="mp_thumbimage_"+i;img.addClass("mp_thumbimage");if(com.utils.Browser.msie){deleteButton=com.create(this._imageDeleteButton[0].outerHTML);deleteButton.html("");deleteButton.append(com.create("<span></span>"));profileButton=com.create(this._addProfileImageButton[0].outerHTML);profileButton.html("");profileButton.append(com.create("<span></span>"));profileIconClone=com.create(this._profileIcon[0].outerHTML);profileIconClone.html("");
profileIconClone.append(com.create("<span></span>"));deleteToolTip=com.create(this._deleteToolTip[0].outerHTML);deleteToolTip.html("");deleteToolTip.append(com.create('<span class="hint_arrow_up"> </span>'));var deleteText=com.create(com.get("#delete_photo_text")[0].outerHTML);deleteText.attr("id",deleteText.attr("id")+"_"+i);deleteToolTip.append(deleteText);addProfileToolTip=com.create(this._addProfileToolTip[0].outerHTML);addProfileToolTip.html("");addProfileToolTip.append(com.create('<span class="hint_arrow_up"> </span>'));
var addProfText=com.create(com.get("#set_photo_text")[0].outerHTML);addProfText.attr("id",addProfText.attr("id")+"_"+i);addProfileToolTip.append(addProfText);profileToolTip=com.create(this._profileToolTip[0].outerHTML);profileToolTip.html("");profileToolTip.append(com.create('<span class="hint_arrow_up"> </span>'));var profText=com.create(com.get("#current_photo_text")[0].outerHTML);profText.attr("id",profText.attr("id")+"_"+i);profileToolTip.append(profText)}else{deleteButton=this._imageDeleteButton.clone();
profileButton=this._addProfileImageButton.clone();profileIconClone=this._profileIcon.clone();deleteToolTip=this._deleteToolTip.clone();addProfileToolTip=this._addProfileToolTip.clone();profileToolTip=this._profileToolTip.clone()}deleteButton.attr("id",deleteButton.attr("id")+"_"+i);profileButton.attr("id",profileButton.attr("id")+"_"+i);profileIconClone.attr("id",profileIconClone.attr("id")+"_"+i);deleteToolTip.attr("id",deleteToolTip.attr("id")+"_"+i);addProfileToolTip.attr("id",addProfileToolTip.attr("id")+
"_"+i);profileToolTip.attr("id",profileToolTip.attr("id")+"_"+i);var imagePanel=new mpimagesuploader.ImagePanel(deleteButton,profileButton,profileIconClone,deleteToolTip,addProfileToolTip,profileToolTip);imagePanel.element(img);imagePanel.imageURL(memberProfileImageData.thumbnailURL);imagePanel.memberProfileImageData(memberProfileImageData);imagePanel.addEventListener(mpimagesuploader.ImagePanelEvent.DELETE_IMAGE,this,"_handleDeleteImage");imagePanel.addEventListener(mpimagesuploader.ImagePanelEvent.SET_PROFILE_IMAGE,
this,"_handleSetProfileImage");imagePanel.addEventListener(mpimagesuploader.ImagePanelEvent.DELETE_PROFILE_IMAGE,this,"_handleDeleteProfileImage");this._thumbnailViewer.addElement(img[0]);this._imagePanels.push(imagePanel)}}};ThumbnailViewerDialog.prototype.memberProfileData=function(value){if(arguments.length){this._memberProfileData=value;this.parseData()}else return this._memberProfileData};ThumbnailViewerDialog.prototype.deleteImage=function(hash){for(var i=0;i<this._imagePanels.length;i++){var panel=
this._imagePanels[i];if(panel.hash()==hash){this.hideImageDeleteToolTip();this.clearDeleteImage();if(this._thumbnailViewer)this._thumbnailViewer.removeElement(panel.element()[0]);this._imagePanels.splice(i,1);return}}};ThumbnailViewerDialog.prototype.setProfileimage=function(hash){var profileImagePanel;for(var i=0;i<this._imagePanels.length;i++){var panel=this._imagePanels[i];panel.isProfile(false);if(panel.hash()==hash){this.hideSetProfileToolTip();this.clearSetProfileImage();profileImagePanel=panel}}if(profileImagePanel)profileImagePanel.isProfile(true)};
ThumbnailViewerDialog.prototype.removeProfileimage=function(hash){if(this._deleteProfileImage)this._deleteProfileImage.isProfile(false);this.hideDeleteProfileToolTip();this.clearDeleteProfileImage()};ThumbnailViewerDialog.prototype.hideAllDialogs=function(){this.hideDeleteProfileToolTip();this.hideImageDeleteToolTip();this.hideSetProfileToolTip();this.clearDeleteImage();this.clearSetProfileImage();this.clearDeleteProfileImage()};ThumbnailViewerDialog.prototype._handleDeleteImage=function(e){if(!this._prevDelTarget||
this._prevDelTarget!=e.target){this._prevDelTarget=e.target;this._forceShowDel=true}else this._forceShowDel=false;this.hideAllDialogs();if(this._setProfileImage)this._setProfileImage.setProfileInProgress(false);if(this._deleteProfileImage)this._deleteProfileImage.deleteProfileInProgress(false);var image=e.currentTarget;if(!this._deleteImage){this._deleteImage=image;this.showImageDeleteToolTip()}else if(this._deleteImage!=image){this._deleteImage.imageDeleteInProgress(false);this._deleteImage=image;
this.showImageDeleteToolTip()}};ThumbnailViewerDialog.prototype._handleSetProfileImage=function(e){if(!this._prevProfTarget||this._prevProfTarget!=e.target){this._prevProfTarget=e.target;this._forceShowProf=true}else this._forceShowProf=false;this.hideAllDialogs();if(this._deleteImage)this._deleteImage.imageDeleteInProgress(false);if(this._deleteProfileImage)this._deleteProfileImage.deleteProfileInProgress(false);var image=e.currentTarget;if(!this._setProfileImage){this._setProfileImage=image;this.showSetProfileToolTip()}else if(this._setProfileImage!=
image){this._setProfileImage.setProfileInProgress(false);this._setProfileImage=image;this.showSetProfileToolTip()}};ThumbnailViewerDialog.prototype._handleDeleteProfileImage=function(e){if(!this._prevProfDelTarget||this._prevProfDelTarget!=e.target){this._prevProfDelTarget=e.target;this._forceShowDelProf=true}else this._forceShowDelProf=false;this.hideAllDialogs();if(this._deleteImage)this._deleteImage.imageDeleteInProgress(false);if(this._setProfileImage)this._setProfileImage.setProfileInProgress(false);
var image=e.currentTarget;if(!this._deleteProfileImage){this._deleteProfileImage=image;this.showDeleteProfileToolTip()}else if(this._deleteProfileImage){this._deleteProfileImage=image;this.showDeleteProfileToolTip()}};ThumbnailViewerDialog.prototype._imageDeleteToolTipHandler=function(e){if(e.type==com.events.Event.CLOSE){this.clearDeleteImage();this.hideImageDeleteToolTip()}else if(e.type==com.events.Event.SELECT&&this._deleteImage&&!this._deletingImage){this._deletingImage=true;this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(mpimagesuploader.ThumbnailViewerEvent.DELETE_IMAGE,
this._deleteImage.hash()))}};ThumbnailViewerDialog.prototype._setProfileImageHandler=function(e){if(e.type==com.events.Event.CLOSE){this.clearSetProfileImage();this.hideSetProfileToolTip()}else if(e.type==com.events.Event.SELECT)this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,this._setProfileImage.hash()))};ThumbnailViewerDialog.prototype._deleteProfileImageHandler=function(e){if(e.type==com.events.Event.CLOSE){this.clearDeleteProfileImage();
this.hideDeleteProfileToolTip()}else if(e.type==com.events.Event.SELECT)this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(mpimagesuploader.ThumbnailViewerEvent.DELETE_PROFILE_IMAGE,this._deleteProfileImage.hash()))};ThumbnailViewerDialog.prototype.clearDeleteImage=function(){if(this._deleteImage){this._deleteImage.imageDeleteInProgress(false);this._deleteImage=null}};ThumbnailViewerDialog.prototype.clearSetProfileImage=function(){if(this._setProfileImage){this._setProfileImage.setProfileInProgress(false);
this._setProfileImage=null}};ThumbnailViewerDialog.prototype.clearDeleteProfileImage=function(){if(this._deleteProfileImage){this._deleteProfileImage.deleteProfileInProgress(false);this._deleteProfileImage=null}};ThumbnailViewerDialog.prototype.showImageDeleteToolTip=function(){if(this._deleteImage)this._imageDeleteDialog.show(this._forceShowDel)};ThumbnailViewerDialog.prototype.hideImageDeleteToolTip=function(){this._deletingImage=false;if(this._imageDeleteDialog)this._imageDeleteDialog.hide()};
ThumbnailViewerDialog.prototype.showSetProfileToolTip=function(){if(this._setProfileImage)this._setProfileDialog.show(this._forceShowProf)};ThumbnailViewerDialog.prototype.hideSetProfileToolTip=function(){if(this._setProfileDialog)this._setProfileDialog.hide()};ThumbnailViewerDialog.prototype.showDeleteProfileToolTip=function(){if(this._deleteProfileImage)this._deleteProfileDialog.show(this._forceShowDelProf)};ThumbnailViewerDialog.prototype.hideDeleteProfileToolTip=function(){if(this._deleteProfileDialog)this._deleteProfileDialog.hide()};
return ThumbnailViewerDialog}(com.events.EventDispatcher);mpimagesuploader.ThumbnailViewerDialog=ThumbnailViewerDialog})(mpimagesuploader||(mpimagesuploader={}));var com;(function(com){(function(geom){var Point=function(){function Point(x,y){this.x=x;this.y=y}return Point}();geom.Point=Point})(com.geom||(com.geom={}));var geom=com.geom})(com||(com={}));var com;
(function(com){(function(utils){(function(scroll){var SlimScroll=function(_super){__extends(SlimScroll,_super);function SlimScroll(element){_super.call(this);this._wheelStep=20;this._autoWidth=true;this._autoHeight=false;this._width=300;this._height=194;this._scrollBarClassName="";this._scrollBarWidth=6;this._scrollBarColor="#000";this._scrollBarOpacity=0.28;this._scrollBarPosition=SlimScroll.SCROLL_BAR_POSITION_RIGHT;this._scrollBarPaddingLeft=0;this._scrollBarPaddingRight=25;this._scrollBarPaddingTop=
0;this._scrollBarPaddingBottom=0;this._scrollBarStartPosition=SlimScroll.SCROLL_BAR_START_POSITION_TOP;this._scrollBarMinHeight=30;this.element(element)}SlimScroll.SCROLL_CONTENT="scrollContent";SlimScroll.SCROLL_BAR_POSITION_LEFT="scrollBarPositionLeft";SlimScroll.SCROLL_BAR_POSITION_RIGHT="scrollBarPositionRight";SlimScroll.SCROLL_BAR_START_POSITION_TOP="scrollBarStartPositionTop";SlimScroll.SCROLL_BAR_START_POSITION_BOTTOM="scrollBarStartPositionBottom";SlimScroll.prototype.update=function(){this._init()};
SlimScroll.prototype.element=function(value){if(arguments.length)this._element=value;else return this._element;this._init()};SlimScroll.prototype.wheelStep=function(value){if(arguments.length)this._wheelStep=value;else return this._wheelStep};SlimScroll.prototype.autoWidth=function(value){if(arguments.length){this._autoWidth=value;this._init()}else return this._autoWidth};SlimScroll.prototype.autoHeight=function(value){if(arguments.length){this._autoHeight=value;this._init()}else return this._autoHeight};
SlimScroll.prototype.width=function(value){if(arguments.length){this._width=value;this._init()}else return this._width};SlimScroll.prototype.height=function(value){if(arguments.length){this._height=value;this._init()}else return this._height};SlimScroll.prototype.scrollBarClassName=function(value){if(arguments.length){this._scrollBarClassName=value;this._initScrollBar()}else return this._scrollBarClassName};SlimScroll.prototype.scrollBarWidth=function(value){if(arguments.length){this._scrollBarWidth=
value;this._initScrollBar()}else return this._scrollBarWidth};SlimScroll.prototype.scrollBarColor=function(value){if(arguments.length){this._scrollBarColor=value;this._initScrollBar()}else return this._scrollBarColor};SlimScroll.prototype.scrollBarOpacity=function(value){if(arguments.length){this._scrollBarOpacity=value;this._initScrollBar()}else return this._scrollBarOpacity};SlimScroll.prototype.scrollBarPosition=function(value){if(arguments.length){this._scrollBarPosition=value;this._initScrollBar()}else return this._scrollBarPosition};
SlimScroll.prototype.scrollBarPaddingLeft=function(value){if(arguments.length){this._scrollBarPaddingLeft=value;this._initScrollBar()}else return this._scrollBarPaddingLeft};SlimScroll.prototype.scrollBarPaddingRight=function(value){if(arguments.length){this._scrollBarPaddingRight=value;this._initScrollBar()}else return this._scrollBarPaddingRight};SlimScroll.prototype.scrollBarPaddingTop=function(value){if(arguments.length){this._scrollBarPaddingTop=value;this._initScrollBar()}else return this._scrollBarPaddingTop};
SlimScroll.prototype.scrollBarPaddingBottom=function(value){if(arguments.length){this._scrollBarPaddingBottom=value;this._initScrollBar()}else return this._scrollBarPaddingBottom};SlimScroll.prototype.scrollBarStartPosition=function(value){if(arguments.length){this._scrollBarStartPosition=value;this._initScrollBar()}else return this._scrollBarStartPosition};SlimScroll.prototype._init=function(){if(this._element){this._height=this._autoHeight?this._element.parent().innerHeight():this._height;this._width=
this._autoWidth?this._element.parent().innerWidth():this._width;this._element.css({overflow:"hidden",width:this._autoWidth?"auto":this._width+"px",height:this._autoHeight?"auto":this._height+"px"});this._initScrollBar()}};SlimScroll.prototype._initScrollBar=function(){if(!this._scrollBar||this._scrollBar==null||this._scrollBar==undefined)this._scrollBar=com.create("<div/>");this._scrollBar.attr("id",this._scrollBarClassName);this._scrollBar.addClass(this._scrollBarClassName);this._scrollBar.css({background:this._scrollBarColor,
width:this._scrollBarWidth+"px",position:"absolute",top:this._scrollBarPaddingTop+"px",bottom:this._scrollBarPaddingBottom+"px",opacity:this._scrollBarOpacity+"","filter":"alpha(opacity ="+this._scrollBarOpacity*100+")","border-radius":this._scrollBarWidth+"px",BorderRadius:this._scrollBarWidth+"px",MozBorderRadius:this._scrollBarWidth+"px",WebkitBorderRadius:this._scrollBarWidth+"px",zIndex:99,cursor:"pointer",mozUserSelect:"mozNone",khtmlUserSelect:"none",webkitUserSelect:"none",oUserSelect:"none",
userSelect:"none"});if(this._scrollBarPosition==SlimScroll.SCROLL_BAR_POSITION_RIGHT)this._scrollBar.css({right:this._scrollBarPaddingRight+"px"});else this._scrollBar.css({left:this._scrollBarPaddingLeft+"px"});if(this._element){var scrollBarHeight=Math.max(this._element[0].clientHeight/this._element[0].scrollHeight*this._element[0].clientHeight,30)||0;var opacity=scrollBarHeight>=this._element[0].clientHeight?"0":this._scrollBarOpacity+"";this._scrollBar.css({height:scrollBarHeight+"px",opacity:opacity});
if(this._scrollBarStartPosition==SlimScroll.SCROLL_BAR_START_POSITION_BOTTOM){this._scrollBar.css({top:this._element.outerHeight()-this._scrollBar.outerHeight()});this._scrollContent(0,true)}else this._scrollContent(this._element[0].offsetTop,false,true);this._element.parent().append(this._scrollBar);this._element.on(com.events.MouseEvent.MOUSE_WHEEL,this,"_mouseWeelHandler");this._scrollBar.on(com.events.MouseEvent.MOUSE_DOWN,this,"_mouseDownHandler")}};SlimScroll.prototype._mouseWeelHandler=function(e){if(e&&
e.stopPropagation)e.stopPropagation();if(e.realEvent.preventDefault){e.realEvent.preventDefault();e.realEvent.returnValue=false}if(window.event){window.event.returnValue=false;window.event.cancelBubble=true}var delta=e["delta"]==3||e["delta"]==-3?e["delta"]/3:e["delta"];this._scrollContent(-delta/3,true)};SlimScroll.prototype._mouseDownHandler=function(e){this._dragPoint=new com.geom.Point(e.clientX,e.clientY);this._dragPosition=this._scrollBar.css("top",true);if(e&&e.stopPropagation)e.stopPropagation();
else if(e.realEvent&&e.realEvent.preventDefault)e.realEvent.preventDefault();com.events.EventHandler.on(document,com.events.MouseEvent.MOUSE_MOVE,this,"_mouseMoveHandler");com.events.EventHandler.on(document,com.events.MouseEvent.MOUSE_UP,this,"_mouseUpHandler")};SlimScroll.prototype._mouseUpHandler=function(e){com.events.EventHandler.un(document,com.events.MouseEvent.MOUSE_MOVE,this,"_mouseMoveHandler");com.events.EventHandler.un(document,com.events.MouseEvent.MOUSE_UP,this,"_mouseUpHandler")};SlimScroll.prototype._mouseMoveHandler=
function(e){var maxTop=this._element.outerHeight()-this._scrollBar.outerHeight()||0;var scrollTop=Math.max(0,Math.min(maxTop,this._dragPosition+e.clientY-this._dragPoint.y));this._element[0].scrollTop=scrollTop/maxTop*this._element.outerHeight();this._scrollBar.css("top",scrollTop);this.dispatchEvent(new com.events.Event(SlimScroll.SCROLL_CONTENT));if(e&&e.stopPropagation)e.stopPropagation();else if(e.realEvent&&e.realEvent.preventDefault)e.realEvent.preventDefault()};SlimScroll.prototype._scrollContent=
function(deltaY,isWeel,isJump){if(typeof isJump==="undefined")isJump=false;if(this._element==null&&this._element==undefined&&!this._scrollBar&&this._scrollBar==null&&this._scrollBar==undefined)return;this.dispatchEvent(new com.events.Event(SlimScroll.SCROLL_CONTENT));var delta=deltaY;var elementOuterHeight=this._element.outerHeight();var scrollBarOuterHeight=this._scrollBar.outerHeight();var maxTop=elementOuterHeight-scrollBarOuterHeight||0;if(isWeel){delta=parseInt(this._scrollBar.css("top"))+deltaY*
this._wheelStep/100*this._scrollBar.outerHeight();delta=Math.min(Math.max(delta,0),maxTop);delta=deltaY>0?Math.ceil(delta):Math.floor(delta);this._scrollBar.css({top:delta+"px"})}var percentScroll=parseInt(this._scrollBar.css("top"))/(this._element.outerHeight()-this._scrollBar.outerHeight());delta=percentScroll*(this._element[0].scrollHeight-this._element.outerHeight());if(isJump){delta=deltaY;var offsetTop=delta/this._element[0].scrollHeight*this._element.outerHeight()||0;offsetTop=Math.min(Math.max(offsetTop,
0),maxTop);this._scrollBar.css({top:offsetTop+"px"})}this._element[0].scrollTop=delta};return SlimScroll}(com.events.EventDispatcher);scroll.SlimScroll=SlimScroll})(utils.scroll||(utils.scroll={}));var scroll=utils.scroll})(com.utils||(com.utils={}));var utils=com.utils})(com||(com={}));var mpimagesuploader;
(function(mpimagesuploader){var GalleryController=function(_super){__extends(GalleryController,_super);function GalleryController(){_super.call(this);this._inited=false;var iImageSliderDialog={imageSlider:com.get("#mpimagesuploader_imageslider"),leftSliderButton:com.get("#mpimagesuploader_imageslider_left_section"),rightSliderButton:com.get("#mpimagesuploader_imageslider_right_section"),centerSliderButton:com.get("#mpimagesuploader_imageslider_center_section"),editPhotosButton:com.get("#mpimageslider_button_edit")};
this._imageSliderDialog=new mpimagesuploader.ImageSliderDialog(iImageSliderDialog);this._imageSliderDialog.addEventListener(mpimagesuploader.ImageSliderEvent.SHOW_THUMBNAIL_VIEWER,this,"_showThumbnailViewerHandler");var imageDeleteToolTip=new mpimagesuploader.ConfirmationDialog(com.get("#mp_image_delete_tooltip"),com.get("#mp_image_delete_tooltip_yes_button"),com.get("#mp_image_delete_tooltip_no_button"));var setProfileToolTip=new mpimagesuploader.ConfirmationDialog(com.get("#mp_set_profile_tooltip"),
com.get("#mp_set_profile_tooltip_yes_button"),com.get("#mp_set_profile_tooltip_no_button"));var deleteProfileToolTip=new mpimagesuploader.ConfirmationDialog(com.get("#mp_delete_profile_tooltip"),com.get("#mp_delete_profile_tooltip_yes_button"),com.get("#mp_delete_profile_tooltip_no_button"));var iThumbnailViewerDialog={thumbnailStage:com.get("#mpimagesuploader_thumbnail_body"),thumbnailViewer:com.get("#mpimagesuploader_thumbnail"),imageDeleteButton:com.get("#mpimage_delete_button"),addProfileImageButton:com.get("#mpadd_profile_image_button"),
profileIcon:com.get("#mpprofile_icon"),deleteToolTip:com.get("#delete_photo"),addProfileToolTip:com.get("#set_photo"),profileToolTip:com.get("#current_photo"),imageDeleteToolTip:imageDeleteToolTip,setProfileToolTip:setProfileToolTip,deleteProfileToolTip:deleteProfileToolTip};this._thumbnailViewer=new mpimagesuploader.ThumbnailViewerDialog(iThumbnailViewerDialog);this._thumbnailViewer.addEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_IMAGE,this,"_deleteImageHandler");this._thumbnailViewer.addEventListener(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,
this,"_setProfileImageHandler");this._thumbnailViewer.addEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_PROFILE_IMAGE,this,"_deleteProfileImageHandler");this._thumbnailViewerCloseButton=com.get("#mpimagesuploader_thumbnail_close_button");this._thumbnailViewerCloseButton.on(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");this._saveButton=com.get("#mpimagesuploader_save_button");this._saveButton.on(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");this._browseButton=com.get("#mpimagesuploader_browse_button");
this._browseButton.on(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");this._slimScroll=new com.utils.scroll.SlimScroll(com.get("#mpimagesuploader_thumbnail"));this._slimScroll.scrollBarClassName("mpimagesuploader_slim_scroll_bar");this._slimScroll.height(com.get("#mpimagesuploader_thumbnail_body").height());this._slimScroll.scrollBarColor("#666666");this._slimScroll.scrollBarPaddingRight(11);this._slimScroll.scrollBarOpacity(1);this._slimScroll.addEventListener(com.utils.scroll.SlimScroll.SCROLL_CONTENT,
this,"_scrollContentHandler")}GalleryController.prototype.setup=function(){if(this._inited)return};GalleryController.prototype._showThumbnailViewerHandler=function(e){if(this._thumbnailViewer&&this._memberProfileData)if(this._memberProfileData.profileData.length){this._setInfoText();this._showThumbnailViewer();this._slimScroll.update()}else this.dispatchEvent(new com.events.Event(com.events.Event.CLOSE));else this.dispatchEvent(new com.events.Event(com.events.Event.CLOSE))};GalleryController.prototype._setInfoText=
function(coverPhotoSet){if(typeof coverPhotoSet==="undefined")coverPhotoSet=false;if(this._thumbnailViewer&&this._memberProfileData){if(this.existProfileImage())if(coverPhotoSet){com.get("#mpimagesuploader_photos_text_2").hide();com.get("#mpimagesuploader_photos_text_1").show();com.get("#mpimagesuploader_set_cover_photo_text").show();com.get("#mpimagesuploader_choose_cover_photo_text").hide()}else{com.get("#mpimagesuploader_photos_text_1").hide();com.get("#mpimagesuploader_photos_text_2").show()}else{com.get("#mpimagesuploader_photos_text_2").hide();
com.get("#mpimagesuploader_photos_text_1").show();com.get("#mpimagesuploader_choose_cover_photo_text").show();com.get("#mpimagesuploader_set_cover_photo_text").hide()}if(this._afterUpload){com.get("#mpimagesuploader_number_photos_uploaded")[0].innerHTML=this._uploadedPictures;com.get("#mpimagesuploader_photos_uploaded_text").show()}else com.get("#mpimagesuploader_photos_uploaded_text").hide()}};GalleryController.prototype.memberProfileData=function(value,afterUpload,uploadedPictures){this._afterUpload=
afterUpload;if(uploadedPictures)this._uploadedPictures=uploadedPictures;else this._uploadedPictures=0;if(arguments.length){this._imageSliderDialog.showEditLabel();this._memberProfileData=value;if(this._imageSliderDialog)this._imageSliderDialog.memberProfileData(this._memberProfileData);if(this._thumbnailViewer)this._thumbnailViewer.memberProfileData(this._memberProfileData);if(this._afterUpload){this._setInfoText();this._showThumbnailViewer()}}else{this._imageSliderDialog.showUploadLabel();return this._memberProfileData}this._afterUpload=
false};GalleryController.prototype.deleteImage=function(hash){this.deleteProfileData(hash);if(this._memberProfileData.profileData.length==0)this.dispatchEvent(new com.events.Event(com.events.Event.REMOVED))};GalleryController.prototype.setProfileImage=function(hash){if(this._thumbnailViewer)this._thumbnailViewer.setProfileimage(hash);this.setProfileData(hash);this._setInfoText(true)};GalleryController.prototype.removeProfileImage=function(hash){if(this._thumbnailViewer)this._thumbnailViewer.removeProfileimage(hash);
this.setProfileData();this._setInfoText()};GalleryController.prototype.deleteProfileData=function(hash){for(var i=0;i<this._memberProfileData.profileData.length;i++){var imageData=this._memberProfileData.profileData[i];if(imageData.hash==hash){this._memberProfileData.profileData.splice(i,1);if(this._thumbnailViewer)this._thumbnailViewer.deleteImage(hash);if(this._imageSliderDialog)this._imageSliderDialog.deleteImage(hash);if(imageData.isProfile&&this._memberProfileData.profileData.length!=0){var profileHash=
this._memberProfileData.profileData.length<=i?this._memberProfileData.profileData[0].hash:this._memberProfileData.profileData[i].hash;this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,profileHash))}break}}this._setInfoText()};GalleryController.prototype.setProfileData=function(hash){if(typeof hash==="undefined")hash=null;if(this._memberProfileData)for(var i=0;i<this._memberProfileData.profileData.length;i++){var memberProfileImageData=
this._memberProfileData.profileData[i];if(memberProfileImageData.isProfile)memberProfileImageData.isProfile=false;if(hash!=null&&memberProfileImageData.hash==hash){memberProfileImageData.isProfile=true;if(this._imageSliderDialog)this._imageSliderDialog.setProfileimage(i)}}};GalleryController.prototype.existProfileImage=function(){if(this._memberProfileData){for(var i=0;i<this._memberProfileData.profileData.length;i++){var memberProfileImageData=this._memberProfileData.profileData[i];if(memberProfileImageData.isProfile)return true}return false}return false};
GalleryController.prototype._buttonsClickHandler=function(e){switch(e.target){case this._browseButton[0]:this._hideThumbnailViewer(false);this.dispatchEvent(new com.events.Event(com.events.Event.CLOSE));break;case this._saveButton[0]:case this._thumbnailViewerCloseButton[0]:this._hideThumbnailViewer(true);break}};GalleryController.prototype.showImageSlider=function(){if(this._imageSliderDialog)this._imageSliderDialog.showSlider()};GalleryController.prototype.hideImageSlider=function(all){if(typeof all===
"undefined")all=false;if(this._imageSliderDialog)this._imageSliderDialog.hideSlider(all)};GalleryController.prototype.setDialogsActivity=function(active,all){if(!active){this._hideThumbnailViewer(false);this.hideImageSlider(all)}else this.showImageSlider()};GalleryController.prototype.enableKeyBoardEvents=function(enabled){if(this._imageSliderDialog)this._imageSliderDialog.enableKeyBoardEvents(enabled)};GalleryController.prototype._hideThumbnailViewer=function(showSlider){if(typeof showSlider==="undefined")showSlider=
true;if(this._thumbnailViewer)this._thumbnailViewer.hideAllDialogs();com.get("#mpimagesuploader_thumbnail_box").hide();if(showSlider)this.showImageSlider()};GalleryController.prototype._showThumbnailViewer=function(){this._resizeThubnailViewer();com.get("#mpimagesuploader_thumbnail_box").show();this.hideImageSlider(true)};GalleryController.prototype._resizeThubnailViewer=function(){if(this._memberProfileData.profileData.length<=4)com.get("#mpimagesuploader_thumbnail").css({height:"115px"});else if(this._memberProfileData.profileData.length<=
8)com.get("#mpimagesuploader_thumbnail").css({height:"200px"});else com.get("#mpimagesuploader_thumbnail").css({height:"273px"})};GalleryController.prototype._scrollContentHandler=function(e){if(this._thumbnailViewer)this._thumbnailViewer.hideAllDialogs()};GalleryController.prototype._deleteImageHandler=function(e){this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(e.type,e.hash))};GalleryController.prototype._setProfileImageHandler=function(e){this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(e.type,
e.hash))};GalleryController.prototype._deleteProfileImageHandler=function(e){this.dispatchEvent(new mpimagesuploader.ThumbnailViewerEvent(e.type,e.hash))};GalleryController.prototype.clearMainImageHolder=function(){if(this._imageSliderDialog)this._imageSliderDialog.clearMainImageHolder()};GalleryController.prototype.destroy=function(){if(this._thumbnailViewer){this._thumbnailViewer.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_IMAGE,this,"_deleteImageHandler");this._thumbnailViewer.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,
this,"_setProfileImageHandler");this._thumbnailViewer.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_PROFILE_IMAGE,this,"_deleteProfileImageHandler")}if(this._thumbnailViewerCloseButton)this._thumbnailViewerCloseButton.un(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");if(this._saveButton)this._saveButton.un(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");if(this._browseButton)this._browseButton.un(com.events.MouseEvent.CLICK,this,"_buttonsClickHandler");if(this._slimScroll)this._slimScroll.removeEventListener(com.utils.scroll.SlimScroll.SCROLL_CONTENT,
this,"_scrollContentHandler");if(this._imageSliderDialog)this._imageSliderDialog.hideSlider()};return GalleryController}(com.events.EventDispatcher);mpimagesuploader.GalleryController=GalleryController})(mpimagesuploader||(mpimagesuploader={}));var mpimagesuploader;
(function(mpimagesuploader){var GalleryLogic=function(_super){__extends(GalleryLogic,_super);function GalleryLogic(){_super.call(this);this._reloadImageDataTimer=new com.utils.timer.Timer(1E3*15,1);this._reloadImageDataTimer.addEventListener(com.events.TimerEvent.TIMER,this,"_reloadImageDataTimerHandler");this._config=com.utils.SingletonManager.getInstance(mpimagesuploader.Config);this._config.addEventListener(mpimagesuploader.ConfigChangeEvent.STATUS,this,"_statusChangeHandler");this._memberProfileImagesManager=
new com.managers.memberprofile.MemberProfileImagesManager;this._memberProfileImagesManager.imagesDataServiceURL(com.singletons.URLProvider.url("check_image_service",{memberId:this._config.memberId(),requestId:(new Date).getTime()}));this._memberProfileImagesManager.setProfileImageServiceURL(com.singletons.URLProvider.url("set_profile_service",{memberId:this._config.memberId(),requestId:(new Date).getTime()}));this._memberProfileImagesManager.removeProfileImageServiceURL(com.singletons.URLProvider.url("remove_profile_service",
{memberId:this._config.memberId(),requestId:(new Date).getTime()}));this._memberProfileImagesManager.delImageServiceURL(com.singletons.URLProvider.url("del_image_service",{memberId:this._config.memberId(),requestId:(new Date).getTime()}));this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA,this,"_loadedImagesDataHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA_FAILED,
this,"_loadedImagesDataFailedHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_SUCCES,this,"_setProfileHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_FAILED,this,"_setProfileFailedHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_SUCCES,this,"_removeProfileHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_FAILED,
this,"_removeProfileFailedHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_SUCCES,this,"_delImageHandler");this._memberProfileImagesManager.addEventListener(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_FAILED,this,"_delImageFailedHandler");this._memberProfileImagesManager.loadImagesData();this._afterUpload=false}GalleryLogic.UPLOAD_WINDOW="uploadWindow";GalleryLogic.THUMBNAIL_WINDOW="thumbnailWindow";GalleryLogic.IMAGE_SLIDER_WINDOW=
"imageSliderWindow";GalleryLogic.prototype.controller=function(value){if(arguments.length){this._controller=value;this.setup()}else return this._controller};GalleryLogic.prototype.setup=function(){if(!this._controller||!_super.prototype.setup.call(this))return false;this._controller.addEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_IMAGE,this,"_deleteImageHandler");this._controller.addEventListener(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,this,"_setProfileImageHandler");
this._controller.addEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_PROFILE_IMAGE,this,"_deleteProfileImageHandler");this._controller.addEventListener(com.events.Event.CLOSE,this,"_showUploader");this._controller.addEventListener(com.events.Event.REMOVED,this,"_allRemovedHandler");return true};GalleryLogic.prototype.setDialogsActivity=function(active,all){if(typeof all==="undefined")all=false;if(this._controller)this._controller.setDialogsActivity(active,all)};GalleryLogic.prototype.enableKeyBoardEvents=
function(enabled){if(this._controller)this._controller.enableKeyBoardEvents(enabled)};GalleryLogic.prototype._statusChangeHandler=function(e){switch(this._config.uploaderStatus()){case mpimagesuploader.ImageUploaderStatus.SHOW_DIALOG:this.setDialogsActivity(false,true);break;case mpimagesuploader.ImageUploaderStatus.HIDE_DIALOG:this.setDialogsActivity(true);break;case mpimagesuploader.ImageUploaderStatus.FILES_FAILED:case mpimagesuploader.ImageUploaderStatus.ALL_FILES_UPLOADED:this._afterUpload=true;
this._memberProfileImagesManager.loadImagesData();break}};GalleryLogic.prototype._showUploader=function(existProfileData){if(typeof existProfileData==="undefined")existProfileData=true;if(existProfileData)this._HUB.sendNote(this,mpimagesuploader.HUBNote.SHOW_UPLOADER);else this.setDialogsActivity(true)};GalleryLogic.prototype._deleteImageHandler=function(e){if(this._memberProfileImagesManager)this._memberProfileImagesManager.delImage(e.hash)};GalleryLogic.prototype._setProfileImageHandler=function(e){if(this._memberProfileImagesManager)this._memberProfileImagesManager.setProfileImage(e.hash)};
GalleryLogic.prototype._deleteProfileImageHandler=function(e){if(this._memberProfileImagesManager)this._memberProfileImagesManager.removeProfileImage(e.hash)};GalleryLogic.prototype._loadedImagesDataHandler=function(e){if(e.data.profileData.length!=0){this.calculateMaxPictures(e.data.profileData.length);if(this._controller){this._checkConvertFailedImage(e.data,this._afterUpload);this._controller.memberProfileData(e.data,this._afterUpload,this._config.uploadedPictures())}}else{this._controller.clearMainImageHolder();
this._controller.hideImageSlider();this.setDialogsActivity(false)}this._afterUpload=false};GalleryLogic.prototype._loadedImagesDataFailedHandler=function(e){};GalleryLogic.prototype._removeProfileHandler=function(e){if(this._controller&&e.hash)this._controller.removeProfileImage(e.hash)};GalleryLogic.prototype._removeProfileFailedHandler=function(e){};GalleryLogic.prototype._setProfileHandler=function(e){if(this._controller&&e.hash)this._controller.setProfileImage(e.hash)};GalleryLogic.prototype._setProfileFailedHandler=
function(e){};GalleryLogic.prototype._delImageHandler=function(e){if(this._controller&&e.hash){this._controller.deleteImage(e.hash);var maxPictures=this._config.maxPictures()+1;maxPictures=maxPictures>-1?maxPictures:0;this._config.maxPictures(maxPictures)}};GalleryLogic.prototype._delImageFailedHandler=function(e){};GalleryLogic.prototype._allRemovedHandler=function(e){if(this._memberProfileImagesManager)this._memberProfileImagesManager.loadImagesData()};GalleryLogic.prototype.destroy=function(){if(this._controller){this._controller.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_IMAGE,
this,"_deleteImageHandler");this._controller.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.SET_PROFILE_IMAGE,this,"_setProfileImageHandler");this._controller.removeEventListener(mpimagesuploader.ThumbnailViewerEvent.DELETE_PROFILE_IMAGE,this,"_deleteProfileImageHandler");this._controller.removeEventListener(com.events.Event.CLOSE,this,"_showUploader");this._controller.removeEventListener(com.events.Event.REMOVED,this,"_allRemovedHandler")}if(this._memberProfileImagesManager){this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA,
this,"_loadedImagesDataHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.LOADED_IMAGES_DATA_FAILED,this,"_loadedImagesDataFailedHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_SUCCES,this,"_setProfileHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.SET_PROFILE_FAILED,this,"_setProfileFailedHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_SUCCES,
this,"_removeProfileHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.REMOVE_PROFILE_FAILED,this,"_removeProfileFailedHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_SUCCES,this,"_delImageHandler");this._memberProfileImagesManager.removeEventListener(com.events.MemberProfileImagesManagerEvent.DEL_IMAGE_FAILED,this,"_delImageFailedHandler")}};GalleryLogic.prototype.calculateMaxPictures=
function(uploadedImagesNumber){if(this._config){var maxPictures=this._config.originalMaxPictures()-uploadedImagesNumber;maxPictures=maxPictures>-1?maxPictures:0;this._config.maxPictures(maxPictures)}};GalleryLogic.prototype._checkConvertFailedImage=function(data,isAfterUpload){var l=data.profileData.length;var isProfile=false;for(var i=0;i<l;i++){var memberProfileImageData=data.profileData[i];if(!memberProfileImageData.converted){memberProfileImageData.imageURL=this._config.defaultImageURL;memberProfileImageData.thumbnailURL=
this._config.defaultThumbnailURL;if(!this._reloadImageDataTimer.running){this._reloadImageDataTimer.reset();this._reloadImageDataTimer.start()}}if(memberProfileImageData.isProfile)isProfile=true}if(isAfterUpload&&!isProfile){data.profileData[0].isProfile=true;if(this._memberProfileImagesManager)this._memberProfileImagesManager.setProfileImage(data.profileData[0].hash)}};GalleryLogic.prototype._reloadImageDataTimerHandler=function(e){this._reloadImageDataTimer.stop();if(this._memberProfileImagesManager)this._memberProfileImagesManager.loadImagesData()};
return GalleryLogic}(com.core.BaseLogic);mpimagesuploader.GalleryLogic=GalleryLogic})(mpimagesuploader||(mpimagesuploader={}));"use strict";var mpimagesuploader;
(function(mpimagesuploader){var MemberProfileImagesUploader=function(_super){__extends(MemberProfileImagesUploader,_super);function MemberProfileImagesUploader(skin,params){_super.call(this);this._skin=skin;this._params=params||{};this._config=com.utils.SingletonManager.getInstance(mpimagesuploader.Config);this._config.setup(this._params);this._urlProvider=com.utils.SingletonManager.getInstance(com.singletons.URLProvider);this._urlProvider.urlData(this._config.appletURL());this.addController(mpimagesuploader.ImageUploaderLogic,
mpimagesuploader.ImageUploaderController);this.addController(mpimagesuploader.GalleryLogic,mpimagesuploader.GalleryController);this.init();this.preparingHandler()}MemberProfileImagesUploader.prototype.preparingHandler=function(e){if(true){this._registerControllers();this._HUB.addHandler(mpimagesuploader.HUBNote.SHOW_UPLOADER,this._logicList["imageUploaderLogic"],"showUploader");this._HUB.addHandler(mpimagesuploader.HUBNote.SHOW_NO_PHOTO,this._logicList["imageUploaderLogic"],"showNoPhoto")}};MemberProfileImagesUploader.prototype.enableKeyBoardEvents=
function(enabled){if(this._logicList&&this._logicList["galleryLogic"])this._logicList["galleryLogic"].enableKeyBoardEvents(enabled)};MemberProfileImagesUploader.prototype.anotherWindowOpen=function(isOpen){if(isOpen)if(this._config)this._config.uploaderStatus(mpimagesuploader.ImageUploaderStatus.HIDE_DIALOG);var active=!isOpen;if(this._logicList&&this._logicList["galleryLogic"])this._logicList["galleryLogic"].setDialogsActivity(active)};return MemberProfileImagesUploader}(com.core.ProjectBase);mpimagesuploader.MemberProfileImagesUploader=
MemberProfileImagesUploader})(mpimagesuploader||(mpimagesuploader={}));Chaos.AjaxQueue=function(){this.init()};Chaos.AjaxQueue.ACTION_QUIT="quit";Chaos.AjaxQueue.ACTION_GETNEXT="getnext";
Chaos.extend(Chaos.AjaxQueue,Ext.util.Observable,{_requests:undefined,_running:undefined,_runningConfig:undefined,_stopNext:false,actionOnError:Chaos.AjaxQueue.ACTION_GETNEXT,maxRequestCount:0,init:function(){this._requests=[]},reset:function(){this._requests=[];if(this.isRunning())Chaos.Ajax.abort(this._running.tId);this._running=undefined;this._runningConfig=undefined;this._stopNext=false;return this},stopNext:function(){this._stopNext=true;return this},cancelAll:function(){this.reset();return this},
request:function(config,runImmediately){var configCopy={};Ext.apply(configCopy,config);runImmediately=runImmediately||true;configCopy.originalSuccess=configCopy.success;configCopy.success=this.onRequestSuccess;configCopy.originalError=configCopy.error;configCopy.error=this.onRequestError;configCopy.originalFailure=configCopy.failure;configCopy.failure=this.onRequestFailure;configCopy.originalScope=configCopy.scope;configCopy.scope=this;var result=this.push(configCopy);if(runImmediately==true)this.process();
return result},process:function(){this._stopNext=false;if(!this.isRunning()){var config=this.getNext();if(typeof config=="undefined")return false;this._running=Chaos.Ajax.request(config);this._runningConfig=config}return this},push:function(config){var queueLength=this._requests.length;if(queueLength>=this.maxRequestCount&&this.maxRequestCount!=0)return false;this._requests.push(config);return this},getNext:function(){return this._requests.shift()},isRunning:function(){return typeof this._running!=
"undefined"},_removeRunning:function(){this._running=undefined;this._runningConfig=undefined},onRequestSuccess:function(response,options){var config=this._runningConfig,success=this._runningConfig.originalSuccess,result;if(typeof success=="function")result=success.call(config.originalScope||this||window,response,options);this._removeRunning();if(result!==false&&this._stopNext!==true)this.process();return result},onRequestError:function(response,options){var config=this._runningConfig,error=this._runningConfig.originalError,
result;if(typeof error=="function")result=error.call(config.originalScope||this||window,response,options);this._removeRunning();if(this.actionOnError==Chaos.AjaxQueue.ACTION_GETNEXT&&result!==false&&this._stopNext!==true)this.process();return result},onRequestFailure:function(response,options){var config=this._runningConfig,failure=this._runningConfig.originalFailure,result;if(typeof error=="function")result=failure.call(config.originalScope||this||window,response,options);this._removeRunning();if(this.actionOnError==
Chaos.AjaxQueue.ACTION_GETNEXT&&result!==false&&this._stopNext!==true)this.process();return result}});Chaos.Application=function(){this.init()};Chaos.Application.getInstance=function(){if(!(Chaos.Application.prototype.instance instanceof Chaos.Application))Chaos.Application.prototype.instance=new Chaos.Application;return Chaos.Application.prototype.instance};Chaos.Application.PAGE_NAMESPACE="Chaos.page";Chaos.Application.DEFAULT_PAGE_ID="index";Chaos.Application.EVENT_LAYOUTCHANGE="layoutChange";
Chaos.Application.LAYOUT_PREFIX="layout-";Chaos.Application.LAYOUT_CLASS="Chaos.layout.";
Ext.extend(Chaos.Application,Ext.util.Observable,{router:null,layout:null,init:function(){if(Chaos.Ajax)Chaos.Ajax.init();this.broadcaster=Chaos.Broadcaster;var obj={};obj[Chaos.Application.EVENT_LAYOUTCHANGE]=true;this.addEvents(obj);window.onerror=this.handleError},run:function(){this.pageId=document.body.id;this._initLayout();this._initPage()},_getLayoutName:function(){var body=Ext.get(document.body);var classNames=body.dom.className.split(/\s+/);for(var idx in classNames){var name=classNames[idx];
if(typeof name=="string"){var prefixIndex=name.indexOf(Chaos.Application.LAYOUT_PREFIX);if(prefixIndex==0){var prefixLength=Chaos.Application.LAYOUT_PREFIX.length;return name.substr(prefixLength,1).toUpperCase()+name.substr(prefixLength+1,name.length-prefixLength)}}}return undefined},_initLayout:function(){var layoutName=this._getLayoutName(),layout;layout=eval("new "+Chaos.Application.LAYOUT_CLASS+layoutName+"(document.body, {})");this.setLayout(layout)},_initPage:function(){try{var pageId=document.body.id||
Chaos.Application.DEFAULT_PAGE_ID;var pageClass=Chaos.Application.PAGE_NAMESPACE+"."+pageId;this.getLayout().setPage(eval("new "+pageClass+"(document.body, {})"))}catch(e){}},handleError:function(errorMsg,url,lineNumber){console.info(">>>>>>"+errorMsg+" -- "+url+" @ "+lineNumber)},getRouter:function(){return this.router},setRouter:function(router){if(router instanceof Chaos.Router)this.router=router;else throw"Invalid router object provided.";},setLayout:function(layout){if(layout instanceof Chaos.Layout&&
layout!==this.layout){if(this.layout instanceof Chaos.Layout)this.layout.destroy();this.fireEvent(Chaos.Application.EVENT_LAYOUTCHANGE,{oldLayout:this.layout,newLayout:layout});this.layout=layout}window.layout=layout},getLayout:function(){return this.layout}});Chaos.BroadcasterClass=function(){this.init()};
Chaos.BroadcasterClass.getInstance=function(){if(!(Chaos.BroadcasterClass.prototype.instance instanceof Chaos.BroadcasterClass))Chaos.BroadcasterClass.prototype.instance=new Chaos.BroadcasterClass;return Chaos.BroadcasterClass.prototype.instance};Ext.extend(Chaos.BroadcasterClass,Ext.util.Observable,{init:function(){}});Chaos.Broadcaster=Chaos.BroadcasterClass.getInstance();Ext.namespace("Chaos");Chaos.HistoryHelper=function(){this.init()};
Chaos.HistoryHelper.getInstance=function(){if(!(Chaos.HistoryHelper.prototype.instance instanceof Chaos.HistoryHelper))Chaos.HistoryHelper.prototype.instance=new Chaos.HistoryHelper;return Chaos.HistoryHelper.prototype.instance};Chaos.HistoryHelper.EVENT_BEFORE_POPSTATE="before-popstate";Chaos.HistoryHelper.EVENT_POPSTATE="popstate";Chaos.HistoryHelper.EVENT_PUSHSTATE="pushState";Chaos.HistoryHelper.EVENT_REPLACESTATE="replaceState";Chaos.HistoryHelper.EVENT_REGISTER_ACTION="registerAction";
Chaos.HistoryHelper.EVENT_REMOVE_ACTION="removeAction";Chaos.HistoryHelper.EVENT_REGISTER_COMPONENT="registerComponent";
Chaos.HistoryHelper.EVENT_STATE_CHANGE="stateChange",Ext.extend(Chaos.HistoryHelper,Ext.util.Observable,{_actions:{},_components:{},_currentState:{},init:function(){this.addEvents(Chaos.HistoryHelper.EVENT_BEFORE_POPSTATE,Chaos.HistoryHelper.EVENT_POPSTATE,Chaos.HistoryHelper.EVENT_PUSHSTATE,Chaos.HistoryHelper.EVENT_REPLACESTATE,Chaos.HistoryHelper.EVENT_REGISTER_ACTION,Chaos.HistoryHelper.EVENT_REMOVE_ACTION,Chaos.HistoryHelper.EVENT_REGISTER_COMPONENT,Chaos.HistoryHelper.EVENT_STATE_CHANGE);Ext.fly(window).on(Chaos.HistoryHelper.EVENT_POPSTATE,
this.onPopState,this)},_isHistorySupported:function(){return typeof window.history=="object"&&typeof window.history.pushState=="function"&&typeof window.history.replaceState=="function"},pushState:function(params,componentParams){if(this._isHistorySupported()){window.history.pushState(params,componentParams.title,componentParams.url);this.fireEvent(Chaos.HistoryHelper.EVENT_PUSHSTATE,{scope:this,params:params,componentParams:componentParams})}},getState:function(){if(window.history.state!=undefined)return window.history.state;
return undefined},replaceState:function(params,componentParams){if(this._isHistorySupported()){window.history.replaceState(params,componentParams.title,componentParams.url);this.fireEvent(Chaos.HistoryHelper.EVENT_REPLACESTATE,{scope:this,params:params,componentParams:componentParams})}},onPopState:function(ev){this.fireEvent(Chaos.HistoryHelper.EVENT_BEFORE_POPSTATE,ev);var stateObj=ev.browserEvent.state,currentState,newState,action;for(var i in stateObj){currentState=this._currentState[i].state;
newState=stateObj[i].state;action=this._actions[currentState][newState];if(action!=undefined){if(typeof action.fn=="string")if(action.scope)action.scope[action.fn](stateObj[i]);else this._components[i][action.fn].call(this._components[i],stateObj[i]);else if(typeof action.fn=="function")action.fn.call(action.scope||this._components[i],stateObj[i]);this._currentState[i].state=stateObj[i].state}}this.fireEvent(Chaos.HistoryHelper.EVENT_POPSTATE,stateObj)},registerComponent:function(component,params){this._components[component.name]=
component;this._currentState[component.name]={state:params.state,url:params.url||location.href,name:params.name||"",title:params.name||"",params:params.params||""};this.replaceState(this._currentState,this._currentState[component.name]);this._components[component.name].on("stateChange",this.onAddNewStateChange,this);this.fireEvent("registerComponent",component,params.state)},onAddNewStateChange:function(ev){this._currentState[ev.cmpName]={state:ev.state,url:ev.url||"",name:ev.name||"",params:ev.params||
""};if(ev.stateChange!=undefined&&ev.stateChange=="replace")this.replaceState(this._currentState,this._currentState[ev.cmpName]);else this.pushState(this._currentState,this._currentState[ev.cmpName])},registerActions:function(currentState,newState,fn,scope){if(!this._actions[currentState])this._actions[currentState]={};this._actions[currentState][newState]={};this._actions[currentState][newState].fn=fn;this._actions[currentState][newState].scope=scope||undefined;this.fireEvent(Chaos.HistoryHelper.EVENT_REGISTER_ACTION,
currentState,newState,fn,scope)},removeAction:function(actionName){if(this._actions[actionName]){delete this._actions[actionName];this.fireEvent(Chaos.HistoryHelper.EVENT_REMOVE_ACTION,actionName)}}});Chaos.History=Chaos.HistoryHelper.getInstance();Chaos.History.EVENT_BEFORE_POPSTATE=Chaos.HistoryHelper.EVENT_BEFORE_POPSTATE;Chaos.History.EVENT_POPSTATE=Chaos.HistoryHelper.EVENT_POPSTATE;Chaos.History.EVENT_PUSHSTATE=Chaos.HistoryHelper.EVENT_PUSHSTATE;Chaos.History.EVENT_REPLACESTATE=Chaos.HistoryHelper.EVENT_REPLACESTATE;
Chaos.History.EVENT_REGISTER_ACTION=Chaos.HistoryHelper.EVENT_REGISTER_ACTION;Chaos.History.EVENT_REMOVE_ACTION=Chaos.HistoryHelper.EVENT_REMOVE_ACTION;Chaos.History.EVENT_REGISTER_COMPONENT=Chaos.HistoryHelper.EVENT_REGISTER_COMPONENT;Chaos.History.EVENT_STATE_CHANGE=Chaos.HistoryHelper.EVENT_STATE_CHANGE;Ext.namespace("Chaos.plugin");Chaos.Plugin=function(config){var defaultConfig={};config=Ext.applyIf(config,defaultConfig);this.originalConfig=config;Ext.apply(this,config)};
Chaos.extend(Chaos.Plugin,Ext.util.Observable,{events:undefined,name:"plugin",init:function(host){this.host=host;this.element=host.element;if(this.events instanceof Object)for(var event in this.events){if(typeof this.host.events[event]=="undefined")throw new Error("event ("+event+") not exist for host class ("+this.host.name+")");switch(typeof this.events[event]){case "string":this.host.on(event,this[this.events[event]],this);break;case "function":this.host.on(event,this.events[event],this);break;
default:console.warn("plugin "+this.name+"has invalid event handler for '"+event+"'");break}}if(typeof this.bind=="function")this.bind.call(this)},bind:function(){},unbind:function(){}});Chaos.Router=function(routeTable,i18n){this.init(routeTable,i18n)};
Ext.extend(Chaos.Router,Ext.util.Observable,{routeTable:undefined,i18n:undefined,init:function(routeTable,i18n){this.routeTable={};Ext.apply(this.routeTable,routeTable);if(i18n instanceof Chaos.I18n)this.i18n=i18n},generateUrl:function(routeHandler,routeParams,queryParams,anchor,disableLang){if(typeof this.routeTable[routeHandler]!="string")throw"The given route handler does not exists: "+routeHandler;var uri=this.routeTable[routeHandler];if(uri.indexOf("[")==0)uri=uri.substr(uri.indexOf("]")+1);
if(uri.indexOf("{")!=-1)for(paramName in routeParams){var pattern=new RegExp("\\{"+paramName+":(?:\\w+|\\*)(?:\\(.+\\))?\\}");uri=uri.replace(pattern,routeParams[paramName])}if(uri.indexOf("{")!=-1)throw"One or more route parameters are missing.";if(typeof queryParams=="object"){var queryString="";for(var qParam in queryParams)queryString+="&"+encodeURIComponent(qParam)+"="+encodeURIComponent(queryParams[qParam]);if(queryString.length>0)uri=uri+"?"+queryString.slice(1)}else if(typeof queryParams==
"string")uri=uri+"?"+queryParams;if(typeof anchor=="string"&&anchor.length>0)uri=uri+"#"+anchor;var userType=this.getUserType();uri=(typeof userType!="undefined"&&disableLang!=true?"/"+userType:"")+uri;if(this.i18n instanceof Chaos.I18n&&disableLang!=true)uri="/"+this.i18n.getLanguage()+uri;return uri},getUserType:function(sessionId){var session=sessionId||Chaos.Cookie.get("session")||Chaos.Config.get("sessionId"),userChar;if(session==undefined)return undefined;userChar=session.toString().substr(0,
1);switch(userChar){case "f":return"free";case "p":case "m":return"member";default:return undefined}return undefined}});Chaos.WindowMgr=function(){Chaos.WindowMgr.superclass.constructor.call(this);this.init()};Chaos.WindowMgr.TYPE_MULTI="multi";Chaos.WindowMgr.TYPE_MODAL="modal";Chaos.WindowMgr.TYPE_EXCLUSIVE="exclusive";
Chaos.extend(Chaos.WindowMgr,Ext.util.Observable,{_groups:{},_windows:{},_defaultGroupId:0,defaultGroup:{active:undefined,handleZIndexes:false,minZIndex:1E4,type:Chaos.WindowMgr.TYPE_MULTI,hideAllOnBodyClick:false,autoRegister:true,showDuration:undefined,hideDuration:undefined},init:function(){Ext.apply(this._groups[this._defaultGroupId],this.defaultGroup);Ext.getBody().on("click",this.onBodyClick,this)},register:function(win,groupId,config){var groupId=groupId||win.getGroupId()||this._defaultGroupId||
0,winId=win.getId(),group=this.getGroup(groupId);Ext.apply(group,config||{});if(typeof group=="undefined")this.createGroup(groupId);if(typeof groupId!="undefined")win.setGroupId(groupId);if(win.manager)win.manager.unregister(win.getId());win.manager=this;win.on("show",this.onWindowShow,this);win.on("hide",this.onWindowHide,this);this.getGroup(groupId).windows[winId]=win;this._windows[winId]=win;return this},isRegistered:function(win){var result=typeof this._windows[win.getId()]!="undefined";return result},
setGroup:function(groupId,config){var group=this.getGroup(groupId||this._defaultGroupId||0);Ext.apply(group,config||{})},getGroup:function(groupId){if(typeof this._groups[groupId]=="undefined")this.createGroup(groupId);return this._groups[groupId]},createGroup:function(groupId){this._groups[groupId]={};Ext.apply(this._groups[groupId],this.defaultGroup);this._groups[groupId].windows={};return this},unregister:function(win){var winId=win instanceof Chaos.Window?win.getId():win,groupId=win.getGroupId();
var winObj=this.getWindow(win);if(winObj){winObj.un("show",this.onWindowShow,this);winObj.un("hide",this.onWindowHide,this)}win.manager=undefined;delete this._groups[groupId].windows[winId]},getWindow:function(win){var groupId=win.getGroupId(),winId=win.getId()},hideAll:function(xwin){for(var groupId in this._groups)this.hideGroup(groupId,xwin);return this},hideGroup:function(groupId,xwin){var group=this._groups[groupId],windows=group.windows;group.active=undefined;for(var winId in windows){var win=
windows[winId];if(win!==xwin)if(win.isVisible)win.hide()}return this},setActive:function(win){var groupId=win.getGroupId()||0;this.getGroup(groupId).active=win},getActive:function(groupId){return this.getGroup(groupId).active},onBodyClick:function(ev,target,options){for(var groupId in this._groups){var group=this.getGroup(groupId);if(group.hideAllOnBodyClick==true)this.hideGroup(groupId)}},onWindowShow:function(obj){var win=obj.window,group=this.getGroup(win.getGroupId());switch(group.type){case Chaos.WindowMgr.TYPE_MULTI:break;
case Chaos.WindowMgr.TYPE_MODAL:this.hideGroup(win.getGroupId(),win);break;case Chaos.WindowMgr.TYPE_EXCLUSIVE:this.hideAll(win);break}},onWindowHide:function(obj){var win=obj.window},destroy:function(){delete this._windows;delete this._groups}});Chaos.WinMgr=new Chaos.WindowMgr;Ext.namespace("JSM.component");JSM.component.JsonPHelper=function(){this.init()};
JSM.component.JsonPHelper.getInstance=function(){if(!(JSM.component.JsonPHelper.prototype.instance instanceof JSM.component.JsonPHelper))JSM.component.JsonPHelper.prototype.instance=new JSM.component.JsonPHelper;return JSM.component.JsonPHelper.prototype.instance};JSM.component.JsonPHelper.RESPONSE_CALLBACK="JSM.component.JsonP.response";JSM.component.JsonPHelper.EVENT_BEFORE_REQUEST="jsonp-before-request";JSM.component.JsonPHelper.EVENT_RESPONSE="jsonp-response";
JSM.component.JsonPHelper.EVENT_SUCCESS="jsonp-success";JSM.component.JsonPHelper.EVENT_ERROR="jsonp-error";JSM.component.JsonPHelper.GLOBALEVENT_REQUEST_ERROR="jsonp-request-error";
Chaos.extend(JSM.component.JsonPHelper,Ext.util.Observable,{name:"JsonPHelper",_callbackScope:undefined,_requests:undefined,_requestTimeouts:undefined,_requestTimeoutDelay:2500,_requestQueue:undefined,init:function(){this._requests={};this._requestQueue={};this._requestTimeouts={};this.headEl=document.getElementsByTagName("head")[0];this.addEvents(JSM.component.JsonPHelper.EVENT_BEFORE_REQUEST,JSM.component.JsonPHelper.EVENT_RESPONSE,JSM.component.JsonPHelper.EVENT_SUCCESS,JSM.component.JsonPHelper.EVENT_ERROR);
Chaos.addEvents(JSM.component.JsonPHelper.GLOBALEVENT_REQUEST_ERROR)},setUrl:function(url,requestId){var src=url+(url.indexOf("?")+1?"&":"?");return src+="callBack="+encodeURIComponent(JSM.component.JsonPHelper.RESPONSE_CALLBACK)+"&requestId="+encodeURIComponent(requestId)},request:function(options){this.fireEvent(JSM.component.JsonPHelper.EVENT_BEFORE_REQUEST,{options:options});var requestId=Chaos.generateId("request");this._requestTimeouts[requestId]=new Ext.util.DelayedTask(function(){Chaos.fireEvent(JSM.component.JsonPHelper.GLOBALEVENT_REQUEST_ERROR,
{scope:this,options:options});if(this._requests[requestId]){try{Ext.fly(this._requests[requestId].dom).remove()}catch(exception){}delete this._requests[requestId]}if(this._requests[requestId])this._requests[requestId].aborted=true;else;},this);this._requestTimeouts[requestId].delay(options.timeout||this._requestTimeoutDelay);var src=this.setUrl(options.url,requestId),newScript=document.createElement("script");this._callbackScope=options.scope||this||window;newScript.type="text/javascript";newScript.src=
src;options.dom=this.headEl.appendChild(newScript);options.autoAbort=options.autoAbort?options.autoAbort:false;options.aborted=false;this._requests[requestId]=options;if(!Ext.isIE7)Ext.fly(options.dom).remove()},response:function(response){var _request=this._requests[response.requestId];if(_request){if(this._requestTimeouts[response.requestId])this._requestTimeouts[response.requestId].cancel();if(!_request.autoAbort||_request.autoAbort&&!_request.aborted){var jsonResponse={};jsonResponse.json=response;
this.fireEvent(JSM.component.JsonPHelper.EVENT_RESPONSE,{response:jsonResponse});if(response)if(response.success||response.status)this.responseCallback(_request.success,_request.scope,jsonResponse,JSM.component.JsonPHelper.EVENT_SUCCESS);else this.responseCallback(_request.error,_request.scope,jsonResponse,JSM.component.JsonPHelper.EVENT_ERROR);if(Ext.isIE7){Ext.fly(_request.dom).remove();delete this._requests[response.requestId]}}else;}},responseCallback:function(callback,callbackScope,response,
eventName){if(typeof callback=="function"){callback.call(callbackScope||this,response);this.fireEvent(eventName,{response:response})}}});JSM.component.JsonP=JSM.component.JsonPHelper.getInstance();Ext.namespace("JSM.component");JSM.component.PerformerSpotBlock=function(){this.init()};
Ext.extend(JSM.component.PerformerSpotBlock,Ext.util.Observable,{name:"PerformerSpotBlock",templates:{"favorites":'<div id="favorite_container_{id}" class="small '+"{statusCls}"+'">'+'<a id="favorite_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{href}" target="{target}">'+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+"{badgeBlock}"+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<img id="favimg_{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>",
"history":'<div id="myhistory_container_{id}" class="small '+"{statusCls}"+'">'+'<a id="myhistory_{id}" class="perf_link" href="{href}">'+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<span class="history_status history_type">{historyType}</span>'+'<span class="history_status history_time">{historyTime}</span>'+'<img id="historyimg_{name}_{id}" src="{src}" alt="{name}" />'+"</a>"+"</div>","performer":'<div id="container_{id}" class="{containerClass} '+"{statusCls}"+'">'+'<a id="performer_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{href}" target="{target}">'+
"{debugText}"+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+"{badgeBlock}"+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<img id="perfimg_{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>","freePeeks":'<div id="container_{id}" class="{containerClass} commercial_container">'+'<a id="performer_{id}" class="{anchorClass} freepeeks" href="#" target="{target}">'+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+'<span class="data">{flashInitData}</span>'+'<img id="{imageId}" src="{src}" alt="{name}" />'+
"</a>"+"</div>","freeCredits":'<div id="container_{id}" class="{containerClass} commercial_container">'+'<a id="performer_{id}" class="{anchorClass} freecredits" href="#" target="{target}">'+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+'<span class="data">{flashInitData}</span>'+'<img id="{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>","newCategories":'<div id="container_{id}" class="{containerClass} commercial_container">'+'<img id="{imageId}" src="{src}" alt="{name}" />'+
"</div>","default":'<div id="container_{id}" class="{containerClass} commercial_container">'+'<a id="performer_{id}" class="{anchorClass}" href="{href}" target="{target}">'+'<img id="{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>"},_tplObj:undefined,init:function(){this._tplObj={}},getTplObject:function(){return this._tplObj},applyTemplate:function(values){if(this._tplObj[values.blockType]===undefined)if(this.templates[values.blockType]!==undefined)this._tplObj[values.blockType]=new Chaos.Template(this.templates[values.blockType]);
else this._tplObj[values.blockType]=new Chaos.Template(this.templates["default"]);return this._tplObj[values.blockType].applyTemplate(values)}});Ext.namespace("JSM");JSM.SessionClass=function(){this.init()};JSM.SessionClass.getInstance=function(){if(!(JSM.SessionClass.prototype.instance instanceof JSM.SessionClass))JSM.SessionClass.prototype.instance=new JSM.SessionClass;return JSM.SessionClass.prototype.instance};JSM.SessionClass.EVENT_SESSION_EXPIRED="session-expired";
Ext.extend(JSM.SessionClass,Ext.util.Observable,{route:undefined,delayTime:25*60*1E3,cookieName:"session",init:function(){Chaos.addEvents(JSM.SessionClass.EVENT_SESSION_EXPIRED);this.getCookieOnLoad()},getCookieOnLoad:function(){this.cookieValueOnLoad=Chaos.Cookie.get(this.cookieName)},checkUserSession:function(config){this.route=config.route?config.route:this.route;this.delayTime=config.delayTime?config.delayTime:this.delayTime;this.cookieName=config.cookieName?config.cookieName:this.cookieName;
var checkerTask=new Ext.util.DelayedTask(function(){this.start()},this);checkerTask.delay(this.delayTime)},start:function(){this.sessionCheckTask=Ext.TaskMgr.start({run:this.sessionChecker,interval:this.delayTime,scope:this})},stop:function(){Ext.TaskMgr.stop(this.sessionCheckTask)},sessionChecker:function(){this.setOldSessionCookie();this.getOldUserType();Chaos.Ajax.request({type:"json",method:"post",url:Chaos.getUrl(this.route,{},{},""),scope:this,success:this.checkCookieChanges,error:this.checkCookieChanges,
failure:this.checkCookieChanges})},setOldSessionCookie:function(){this.oldSessionCookieValue=this.getSessionCookie()},setNewSessionCookie:function(){this.newSessionCookieValue=this.getSessionCookie()},getSessionCookie:function(){return Chaos.Cookie.get(this.cookieName)},checkCookieChanges:function(){this.setNewSessionCookie();this.getNewUserType();if(this.newSessionCookieValue!=this.oldSessionCookieValue&&this.oldUserType==this.newUserType){this.fireExpired();return false}return true},fireExpired:function(){Chaos.fireEvent(JSM.SessionClass.EVENT_SESSION_EXPIRED,
this)},getUserType:function(){return application.router.getUserType()},getOldUserType:function(){this.oldUserType=this.getUserType()},getNewUserType:function(){this.newUserType=this.getUserType()},sessionCheckerError:function(response){if(Chaos.Cookie.get("forceConsole"))console.info("error: ",response)},sessionCheckerFailure:function(e){if(Chaos.Cookie.get("forceConsole"))console.info("failure: ",e)},isAlive:function(){return application.isLoggedIn()&&this.getUserType()!=undefined||!application.isLoggedIn()&&
this.getUserType()==undefined}});JSM.Session=JSM.SessionClass.getInstance();Ext.namespace("JSM.template");JSM.template.Template=function(config){Ext.apply(this,config);this.init()};
Ext.extend(JSM.template.Template,Ext.util.Observable,{name:"Template",tpl:"",validateData:true,_tpl:undefined,init:function(){},getTemplate:function(){return this._tpl},_setTemplateParams:function(data){if(!data||data==={}||data===null)return"";return{id:data.id}},render:function(data){this._tpl=new Ext.Template(this.tpl);if(this.validateData)this._validateData(data);return this._tpl.applyTemplate(this._setTemplateParams(data))},_validateData:function(data){if(typeof data==="undefined"||data==={}||
data===null)throw"Invalid data for template applying: "+data;}});Ext.namespace("JSM.util");JSM.util.Util=function(config){JSM.util.Util.superclass.constructor.call(this,config);this.init()};JSM.util.Util.GLOBALEVENT_SET_SCROLL="set-scroll";
Chaos.extend(JSM.util.Util,Ext.util.Observable,{isScrollingDisabled:false,isOverflowHidden:false,entityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},init:function(){if(!("filter"in Array.prototype))Array.prototype.filter=function(filter,scope){var other=[];for(var i=0;i<this.length;i++)if(i in this&&filter.call(scope,this[i],i,this))other.push(this[i]);return other};this.isWin8=navigator.userAgent.match("Windows NT 6.2")?true:false;this.isX64=navigator.userAgent.match("Win64")?
true:false;Chaos.addEvents(JSM.util.Util.GLOBALEVENT_SET_SCROLL)},addUnloadEvent:function(eventHandler,scope){fixUnload=function(){if(document.readyState=="interactive"){stop=function(){document.detachEvent("onstop",stop);unload()};document.attachEvent("onstop",stop);window.setTimeout(function(){document.detachEvent("onstop",stop)},0)}};unload=function(){try{eventHandler.call(scope||this)}catch(exception){}};try{window.attachEvent("onunload",unload);window.attachEvent("onbeforeunload",fixUnload)}catch(exception){Ext.fly(window).on("unload",
unload)}},logMetroUI:function(){var url=Chaos.getUrl("ListPageAjax/LogWin8Events",{},{},""),cookieName="metro_status",metroCookie=Chaos.Cookie.get(cookieName),date=new Date,midnight=new Date(date.getFullYear(),date.getMonth(),date.getDate()+1,0,0,0),expiration=Math.round((midnight.getTime()-date.getTime())/1E3);if(this.metroDetect("ShockwaveFlash.ShockwaveFlash")&&this.isWin8&&this.isX64){if(!metroCookie){Chaos.Cookie.set(cookieName,1,expiration,"/");Chaos.Log.log(url,{},false)}}else if(this.isWin8&&
Ext.isIE10)if(metroCookie!=2){Chaos.Cookie.set(cookieName,2,expiration,"/");Chaos.Log.log(url,{},false)}},isProduct:function(){return window.location.host.indexOf(".dev")==-1&&window.location.host.indexOf(".test")==-1},getDomain:function(){var hostArray=window.location.host.split(".");return hostArray[hostArray.length-2]+"."+hostArray[hostArray.length-1]},getEnv:function(){if(window.location.host.match(".dev"))return"dev";else if(window.location.host.match(".test"))return"test";else if(window.location.host.match(".com"))return"prod";
return undefined},getBrowserWidth:function(){return Ext.getBody().getWidth()},getBrowserHeight:function(){return Ext.getBody().getHeight()},hasQueryParam:function(param){if(typeof param=="string")return window.location.search.indexOf(param)!=-1;else;},disableScroll:function(disabled){if(!this.isScrollingDisabled===disabled){this.isScrollingDisabled=disabled;switch(disabled){case true:if(this.lastScrollTop==undefined)this.lastScrollTop=this.getScrollTop();if(this.getScrollTop()!=this.lastScrollTop)this.currentScrolling();
Ext.fly(window).on("scroll",this.currentScrolling,this);if(!Ext.isMac)Ext.fly(document).on("keydown",this.setScrollDisabled,this);if(Ext.isGecko)Ext.getBody().on("DOMMouseScroll",this.setScrollDisabled,this);else Ext.fly(document).on("mousewheel",this.setScrollDisabled,this);break;case false:Ext.fly(window).un("scroll",this.currentScrolling,this);if(!Ext.isMac)Ext.fly(document).un("keydown",this.setScrollDisabled,this);if(Ext.isGecko)Ext.getBody().un("DOMMouseScroll",this.setScrollDisabled,this);
else Ext.fly(document).un("mousewheel",this.setScrollDisabled,this);this.lastScrollTop=undefined;break}Chaos.fireEvent(JSM.util.Util.GLOBALEVENT_SET_SCROLL,{scope:this,isDisabled:disabled})}},currentScrolling:function(){if(this.getScrollTop()!=this.lastScrollTop)window.scrollTo(0,this.lastScrollTop)},hideBodyOverFlow:function(){if(this.isOverflowHidden){Ext.getBody().removeClass("overflow");Ext.get("header").setWidth("100%");this.isOverflowHidden=false}else{Ext.getBody().addClass("overflow");Ext.get("header").setWidth(Ext.get("header").getWidth()-
17);this.isOverflowHidden=true}},setScrollDisabled:function(ev){if(ev.type=="mousewheel"||ev.type=="DOMMouseScroll"||ev.type=="keydown"&&(ev.keyCode==38||ev.keyCode==40))ev.preventDefault()},getScrollTop:function(){var currentScrollTop=0;if(document.documentElement&&document.documentElement.scrollTop)currentScrollTop=document.documentElement.scrollTop;else if(document.body)currentScrollTop=document.body.scrollTop;return currentScrollTop},setCursor:function(type){var body=Ext.getBody();if(type!=undefined)body.setStyle("cursor",
type);else body.setStyle("cursor","default")},getBodyId:function(){return Ext.getBody().id},isCurrentPage:function(id){return this.getBodyId()==id},isAuthPage:function(){return this.isCurrentPage("auth.loginmember")||this.isCurrentPage("signup.signupmember")||this.isCurrentPage("auth.forgotpassword")},isSecurePage:function(){return document.location.protocol=="https:"},setSessionIdOnLinks:function(block,session){if(session)Chaos.Config.set("sessionId",session);if(block)block.select("a").each(function(){if(Chaos.Config.get("flashWarningMsg").match(this.dom.href)==
null)this.dom.href=JSM.Util.UrlHelper.refreshUrlSession(this.dom.href)})},setUrlProtocol:function(url,protocol){var currentUrlArray=url.split("://");switch(protocol){case "http":return currentUrlArray[0]=="https"?"http://"+currentUrlArray[1]:url;break;case "https":return currentUrlArray[0]=="http"?"https://"+currentUrlArray[1]:url;break;default:console.error("Given argument is not a valid protocol: ",protocol);break}return undefined},isSecureUrl:function(url){var isSecure=url.match("https://");return isSecure==
null?false:true},console:function(type,id,content){},setGlobalMethods:function(global,methods,scope){if(typeof window[global]=="undefined")window[global]={};var max=methods.length,i,method;for(i=0;i<max;i++){method=methods[i];window[global][method]=function(method){return function(){scope[method].apply(scope,arguments)}}(methods[i])}},trim:function(text){if(typeof text=="string")return text.replace(/^\s\s*/,"").replace(/\s\s*$/,"");return text},escapeHTML:function(string){var self=this;return String(string).replace(/[&<>"'\/]/g,
function(s){return self.entityMap[s]})},unEscapeHTML:function(string){var div=document.createElement("div");div.innerHTML=string;var child=div.childNodes[0];return child?child.nodeValue:""},isEqualArrays:function(a,b){return a.filter(function(current,index,all){return b.indexOf(current)>=0}).length==a.length&&a.length==b.length},getIEVersion:function(){var version=-1;if(navigator.appName=="Microsoft Internet Explorer"){var userAgent=navigator.userAgent;var ieVerRegexp=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
if(ieVerRegexp.exec(userAgent)!=null)version=parseFloat(RegExp.$1)}else if(navigator.appName=="Netscape"){var ua=navigator.userAgent;var re=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(re.exec(ua)!=null)version=parseFloat(RegExp.$1)}return version},metroDetect:function(activeXObjectType){var supported=null;try{supported=!!new ActiveXObject(activeXObjectType)}catch(e){supported=false}return!supported&&Ext.isIE&&parseInt(this.getIEVersion())>=10&&this.isWin8&&this.isX64},getSessionId:function(){return Chaos.Cookie.get("session")||
Chaos.Config.get("sessionId")},fireMouseEvent:function(el,type,handler,handlerScope){var _el=el.hasOwnProperty("dom")?el.dom:el,evt=document.createEvent("MouseEvents");evt.initMouseEvent(type,true,true,window,0,0,0,0,0,false,false,false,false,0,null);var canceled=!_el.dispatchEvent(evt);if(canceled){if(typeof handler=="function")handler.call(handlerScope||this,evt)}else;},getNavigatorInfo:function(){var _navigator={},_navigatorParams=["userAgent","platform","oscpu","cookieEnabled","language"],i;for(i=
0;i<_navigatorParams.length;i++)_navigator[_navigatorParams[i]]=navigator[_navigatorParams[i]];return _navigator},getMouseButton:function(ev){var mouseButton;if(Ext.isIE7||Ext.isIE8)mouseButton=ev.button+1;else mouseButton=ev.browserEvent.which;return mouseButton},_onAutoGrowFieldUpdate:function(ev,target,options){var _field=options.field,shadowEl=options.shadowEl,noFlickerPad=options.noFlickerPad,minHeight=options.minHeight,minWidth=options.minWidth,type=options.type;var times=function(string,number){for(var i=
0,r="";i<number;i++)r+=string;return r};var val=_field.getValue().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return times("&nbsp;",space.length-1)+" "});if(ev&&ev.browserEvent&&ev.browserEvent.type==="keydown"&&ev.getCharCode()===13&&type==="textarea")val+="<br />";if(type=="textarea"){shadowEl.setStyle("width",_field.getWidth());shadowEl.dom.innerHTML=val+(noFlickerPad===0?"...":"");_field.setHeight(Math.max(shadowEl.getHeight()+
noFlickerPad,minHeight))}else if(type==="text"){shadowEl.dom.innerHTML=val;_field.setWidth(shadowEl.getWidth()+noFlickerPad)}},addAutoGrow:function(field,type){return this.addShadowEl(field,type,true)},addShadowEl:function(field,type,isNeededEventHandler){var _field=Ext.get(field),eventParams,minHeight=parseInt(_field.getStyle("min-height"))==0?_field.getHeight():parseInt(_field.getStyle("min-height")),minWidth=parseInt(_field.getStyle("min-width"))==0?_field.getWidth():parseInt(_field.getStyle("min-width")),
noFlickerPad=_field.hasClass("autogrow-short")?false:parseInt(_field.getStyle("lineHeight"))||0,shadowId=Chaos.generateId("autogrow-"+_field.dom.name||_field.dom.type),shadowEl=Ext.DomHelper.append(Ext.getBody(),{id:shadowId,style:"position: absolute;"+"top: -10000px;"+"left: -10000px;"+(type==="textarea"?"width: "+_field.getWidth()+"px;":"")+"font-size: "+_field.getStyle("fontSize")+";"+"font-family: "+_field.getStyle("fontFamily")+";"+"font-weight: "+_field.getStyle("fontWeight")+";"+"line-height: "+
_field.getStyle("lineHeight")+";"+"resize: none;"+"word-wrap: break-word"},true);_field.addClass(shadowId);eventParams={shadowEl:shadowEl,field:_field,noFlickerPad:noFlickerPad,minHeight:minHeight,minWidth:minWidth,type:type};if(isNeededEventHandler){_field.on("change",this._onAutoGrowFieldUpdate,this,eventParams).on("keyup",this._onAutoGrowFieldUpdate,this,eventParams).on("keypress",this._onAutoGrowFieldUpdate,this,eventParams).on("keydown",this._onAutoGrowFieldUpdate,this,eventParams);this._onAutoGrowFieldUpdate(undefined,
undefined,eventParams)}return shadowEl},appendShadowEl:function(currentEl,shadowEl){shadowEl.dom.innerHTML=currentEl.dom.innerHTML;if(shadowEl.dom.children)for(var i=0;i<shadowEl.dom.children.length;i++){var _currentChildNodeName=shadowEl.dom.children[i].nodeName.toLowerCase();if(_currentChildNodeName==="li")shadowEl.select(_currentChildNodeName).item(i).display("inline")}},removeAutoGrow:function(field,isNeededEventHandler){var _field=Ext.get(field),classList=_field.dom.className.split(" "),cls;
for(cls=0;cls<classList.length;cls++)if(classList[cls].match("autogrow-")){Ext.fly(classList[cls]).remove();_field.removeClass(classList[cls])}if(isNeededEventHandler)_field.un("change",this._onAutoGrowFieldUpdate,this).un("keyup",this._onAutoGrowFieldUpdate,this).un("keydown",this._onAutoGrowFieldUpdate,this);_field.setHeight("");return field},arrayDiff:function(arr1){var retArr={},argl=arguments.length,k1="",i=1,k="",arr={};arr1keys:for(k1 in arr1)for(i=1;i<argl;i++){arr=arguments[i];for(k in arr)if(arr[k]===
arr1[k1])continue arr1keys;retArr[k1]=arr1[k1]}return retArr},getObjectSize:function(obj){var size=0,key;for(key in obj)if(obj.hasOwnProperty(key))size++;return size},getOSType:function(){var ua=navigator.userAgent.toLowerCase();return{isWin2K:/windows nt 5.0/.test(ua),isXP:/windows nt 5.1/.test(ua),isVista:/windows nt 6.0/.test(ua),isWin7:/windows nt 6.1/.test(ua),isWin80:/windows nt 6.2/.test(ua),isWin81:/windows nt 6.3/.test(ua)}}});JSM.Util=new JSM.util.Util;
if(typeof Ext.isIE9=="undefined")Ext.isIE9=JSM.Util.getIEVersion()=="9";if(typeof Ext.isIE10=="undefined")Ext.isIE10=JSM.Util.getIEVersion()=="10";if(typeof Ext.isIE11=="undefined")Ext.isIE11=JSM.Util.getIEVersion()=="11";if(typeof window.innerWidth==="undefined")window.innerWidth=document.documentElement.clientWidth;if(typeof window.innerHeight==="undefined")window.innerHeight=document.documentElement.clientHeight;
Chaos.Log={log:function(url,params,useQuery,callbacks){var generatedUrl,queryParams,_params=params||{},_callbacks={success:{fn:Chaos.emptyFn,scope:window},error:{fn:Chaos.emptyFn,scope:window},failure:{fn:Chaos.emptyFn,scope:window}};if(typeof callbacks=="boolean")_callbacks=Ext.applyIf(callbacks,_callbacks);switch(typeof url){case "undefined":throw new Error("URL for sending log is undefined!");break;case "string":generatedUrl=url;break;case "object":if(useQuery===true)queryParams=_params;else queryParams=
url.queryParams;generatedUrl=Chaos.getUrl(url.routeHandler,url.routeParams||{},queryParams||{},url.anchor||"",url.disableLang||"");break}Chaos.Ajax.request({type:"json",url:generatedUrl,params:_params,method:"post",xdomain:_params.xdomain||false,checkSession:false,success:function(response){_callbacks.success.fn.call(_callbacks.success.scope,response)},error:function(response){_callbacks.error.fn.call(_callbacks.error.scope,response)},failure:function(response){_callbacks.failure.fn.call(_callbacks.failure.scope,
response)}})}};
Chaos.Util={getBodyHeight:function(){var D=document;return Math.max(Math.max(D.body.scrollHeight,D.documentElement.scrollHeight),Math.max(D.body.offsetHeight,D.documentElement.offsetHeight),Math.max(D.body.clientHeight,D.documentElement.clientHeight))},getBodyWidth:function(){var D=document;return Math.max(Math.max(D.body.scrollWidth,D.documentElement.scrollWidth),Math.max(D.body.offsetWidth,D.documentElement.offsetWidth),Math.max(D.body.clientWidth,D.documentElement.clientWidth))},base64Encode:function(str){var keyStr=
"ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=",str=escape(str),output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;do{chr1=str.charCodeAt(i++);chr2=str.charCodeAt(i++);chr3=str.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2))enc3=enc4=64;else if(isNaN(chr3))enc4=64;output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<
str.length);return output},base64Decode:function(str){var keyStr="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=",output="",chr1,chr2,chr3="",enc1,enc2,enc3,enc4="",i=0;var base64test=/[^A-Za-z0-9\+\/\=]/g;if(base64test.exec(str)){console.warn("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.");return false}str=str.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{enc1=keyStr.indexOf(str.charAt(i++));
enc2=keyStr.indexOf(str.charAt(i++));enc3=keyStr.indexOf(str.charAt(i++));enc4=keyStr.indexOf(str.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64)output=output+String.fromCharCode(chr2);if(enc4!=64)output=output+String.fromCharCode(chr3);chr1=chr2=chr3="";enc1=enc2=enc3=enc4=""}while(i<str.length);return unescape(output)},isFullyVisibleOnViewPort:function(el){var top=el.dom.offsetTop;var left=el.dom.offsetLeft;var width=
el.dom.offsetWidth;var height=el.dom.offsetHeight;while(el.offsetParent){el=el.dom.offsetParent;top+=el.dom.offsetTop;left+=el.dom.offsetLeft}if(Ext.isIE7||Ext.isIE8)return top>=document.documentElement.scrollTop&&left>=document.documentElement.scrollLeft&&top+height<=document.documentElement.scrollTop+document.documentElement.clientHeight&&left+width<=document.documentElement.scrollLeft+document.documentElement.clientWidth;else return top>=window.pageYOffset&&left>=window.pageXOffset&&top+height<=
window.pageYOffset+window.innerHeight&&left+width<=window.pageXOffset+window.innerWidth;return undefined},getVisibleSize:function(el){var top=el.dom.offsetTop;var left=el.dom.offsetLeft;var width=el.dom.offsetWidth;var height=el.dom.offsetHeight;while(el.offsetParent){el=el.dom.offsetParent;top+=el.dom.offsetTop;left+=el.dom.offsetLeft}if(Ext.isIE7||Ext.isIE8)return{height:height-(top+height-(document.documentElement.scrollTop+document.documentElement.clientHeight)),width:width-(left+width-(document.documentElement.scrollLeft+
document.documentElement.clientWidth))};else return{height:height-(top+height-(window.pageYOffset+window.innerHeight)),width:width-(left+width-(window.pageXOffset+window.innerWidth))};return undefined},isOnViewPort:function(elem){var topPos,viewportheight,elemHeight;elemHeight=elem.dom.offsetHeight;if(Ext.isGecko3||Ext.isSafari||Ext.isChrome)topPos=document.body.scrollTop;else topPos=document.documentElement.scrollTop;if(typeof window.innerHeight!="undefined")viewportheight=window.innerHeight;else if(typeof document.documentElement.clientHeight!=
"undefined")viewportheight=document.documentElement.clientHeight;else viewportheight=document.getElementsByTagName("body")[0].clientHeight;return topPos-elemHeight<elem.dom.offsetTop&&elem.dom.offsetTop<topPos+viewportheight-elemHeight},isFullyVisible:function(el,container){try{var offset=el.getOffsetsTo(container);return offset[1]>=0&&Ext.get(container).getHeight()-el.getHeight()>=offset[1]}catch(exception){return false}},checkMouseCrossedWindowBorder:function(e,t){var from=e.browserEvent.fromElement,
to=e.browserEvent.toElement;if(typeof from==="undefined"&&typeof to==="undefined"){var related=e.browserEvent.relatedTarget;if(!related||related.nodeName=="HTML")return true;return false}else return!to||!from},getUrlParams:function(url){var regex=/(?:\?|#|&(?:amp;)?)([^=&#]+)(?:=?([^&#]*))/g,match,params={},decode=function(s){return decodeURIComponent(s.replace(/\+/g," "))},currUrl;currUrl=typeof url=="undefined"?window.location.href:url;while(match=regex.exec(currUrl))params[decode(match[1])]=decode(match[2]);
return params},removePartsFromUrl:function(parts,url){var currUrl=typeof url=="undefined"?window.location.href:url,urlParams=this.getUrlParams(currUrl);for(var i=0;i<parts.length;i++)if(urlParams[parts[i]]!=undefined){var urlQueryPart=parts[i];if(currUrl.match("&"+urlQueryPart))currUrl=currUrl.replace("&"+urlQueryPart+"="+urlParams[urlQueryPart],"");else if(currUrl.match("#"+urlQueryPart))currUrl=currUrl.replace("#"+urlQueryPart,"");else currUrl=currUrl.replace("?"+urlQueryPart+"="+urlParams[urlQueryPart],
"")}else;return currUrl}};
Chaos.Validator={patterns:{"username":/^[a-zA-Z0-9]+$/,"loginname":/^[a-zA-Z0-9\-\_]+$/,"email":/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,"password":/^[a-zA-Z0-9]+$/,"simple":/^\w*(?=.{6,})\w*$/,"url":/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,"number":/^[0-9]*/,"htmlTags":/(<([^>]+)>)/ig},min:function(value,config){if(this.empty(value))return value.length>=(typeof config==
"object"?config.limit:config)},max:function(value,config){if(this.empty(value))return value.length<=(typeof config=="object"?config.limit:config)},empty:function(value){if(value===""||value===null||value===false||typeof value==="undefined"||typeof value==="number"&&isNaN(value))return false;else return true},equals:function(value,config){if(this.empty(value))if(config.isStrist)return value===config.dom.value;else return value==(typeof config=="object"?config.dom.value:config)},choose:function(value,
defaultText){return value!=defaultText},type:function(value,config){if(!config)return typeof value;return typeof value==(typeof config=="object"?config.type:config)},username:function(value){if(this.empty(value)){var emailPattern=this.getPattern("username");if(emailPattern)return emailPattern.test(value)}},loginname:function(value){if(this.empty(value)){var emailPattern=this.getPattern("loginname");if(emailPattern)return emailPattern.test(value)}},email:function(value){if(this.empty(value)){var emailPattern=
this.getPattern("email");if(emailPattern)return emailPattern.test(value)}},password:function(value){if(this.empty(value)){var passwordPattern=this.getPattern("password");if(passwordPattern)return passwordPattern.test(value)}},simple:function(value){if(this.empty(value)){var simplePattern=this.getPattern("simple");if(simplePattern)return simplePattern.test(value)}},url:function(value){if(this.empty(value)){var urlPattern=this.getPattern("url");if(urlPattern)return urlPattern.test(value)}},number:function(value){if(this.empty(value)){var numberPattern=
this.getPattern("number");if(numberPattern)return numberPattern.test(value)}},removeHTMLTags:function(text){return String(text).replace(this.getPattern("htmlTags"),"")},getPattern:function(value){return this.patterns[value]},remote:function(field,value,url,element,showErrMsg,form,callback,xDomainNeeded){if(value!=""&&value&&value.length>3){var params={value:value},method=xDomainNeeded?"POST":"GET",requestUrl=xDomainNeeded?Chaos.Ajax.setXDomainUrl(url,true):url;Chaos.Ajax.request({url:requestUrl,method:method,
params:params,type:"json",xdomain:xDomainNeeded||false,success:function(response,opts){form.hideError(field);if(typeof callback=="function")callback.call(form,true,response,opts)},error:function(response,opts){if(showErrMsg){var errors=response.json.errors;if(typeof errors=="string"){form.fireEvent("showerror",field.dom,errors);form.showError(field.dom,errors)}else if(typeof errors=="object")for(var fieldName in errors){var msg=errors[fieldName];form.fireEvent("showerror",field.dom,msg);form.showError(field.dom,
msg)}}if(typeof callback=="function")callback.call(form,false,response,opts);return true},failure:function(response,opts){if(typeof callback=="function")callback.call(form,false,response,opts);return false},scope:Chaos.Validator})}}};Ext.namespace("JSM.util");
JSM.util.Flash={_keyboardHelperEnabled:false,disconnectListPagePlayer:function(LPP,onLoadNeeded){var self=this;this.flashObj=LPP;switch(typeof LPP){case "string":this.flashObj=Chaos.getFlashMovieObject(LPP);break;case "object":this.flashObj=LPP;break}if(onLoadNeeded===true)Ext.get(window).on("load",function(){if(typeof self.flashObj!="undefined"&&typeof self.flashObj.disconnect=="function")self.flashObj.disconnect()},this);else if(typeof this.flashObj!="undefined"&&typeof this.flashObj.disconnect==
"function")this.flashObj.disconnect()},getFlashVersion:function(){try{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{axo.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,
",").match(/^,?(.+),?$/)[1]}catch(e){}}return"0,0,0"},checkFlashVersion:function(minVersion){var userFlashVersion=this.getFlashVersion(),minFlashVersion=minVersion,defaultMinVersion="10,0,22";if(minFlashVersion==undefined)minFlashVersion=defaultMinVersion;var splittedMinVersion=minFlashVersion.split(","),splittedUserVersion=userFlashVersion.split(","),minVers0=parseInt(splittedMinVersion[0]),userVers0=parseInt(splittedUserVersion[0]),minVers1=parseInt(splittedMinVersion[1]),userVers1=parseInt(splittedUserVersion[1]),
minVers2=parseInt(splittedMinVersion[2]),userVers2=parseInt(splittedUserVersion[2]);if(userVers0<minVers0)return false;else if(userVers0==minVers0)if(userVers1<minVers1)return false;else if(userVers1==minVers1)if(userVers2<minVers2)return false;else if(userVers2==minVers2)return true;else return true;else return true;else return true},minimize:function(flashObj){var style={width:"1px",height:"1px",left:"0px",top:"0px"};Ext.fly(flashObj).setStyle(style)},enableKeyboardHelper:function(enable,options){if(Ext.isMac)if(typeof enable!=
"undefined")if(enable&&!JSM.util.Flash._keyboardHelperEnabled){JSM.util.Flash._keyboardHelperEnabled=true;Ext.fly(window).on("keyup",JSM.util.Flash.onWindowKeyUp,JSM.util.Flash,options)}else if(!enable&&JSM.util.Flash._keyboardHelperEnabled){JSM.util.Flash._keyboardHelperEnabled=false;Ext.fly(window).un("keyup",JSM.util.Flash.onWindowKeyUp,JSM.util.Flash)}},onWindowKeyUp:function(ev,target,options){var pressedKey,callback;for(pressedKey in options)if(ev.getCharCode()==pressedKey){callback=options[pressedKey];
if(typeof Ext.fly("chatapplet").dom[callback]=="function")Ext.fly("chatapplet").dom[callback](pressedKey)}}};window.FLASH={};window.FLASH.enableKeyboardHelper=JSM.util.Flash.enableKeyboardHelper;
JSM.Util.UrlHelper={patterns:{onlyLetters:/^[a-zA-Z]+$/,ulrPathPart:/^\/[a-zA-Z]+\/$/,urlHashPart:/#([a-z0-9-]+;|[a-z0-9-]+)/},getUrlObject:function(){return location},refreshUrlSession:function(url){var sessionParam="session="+Chaos.Config.get("sessionId"),hashValue="";if(this.hasValidHash(url)){hashValue=this.getHashValue(url);url=url.replace(hashValue[0],"")}if(url.indexOf("session=")==-1){if(url.indexOf("?")==-1)sessionParam="?"+sessionParam;else sessionParam="&"+sessionParam;url+=sessionParam}else{var urlSplitArray=
url.split("session=");if(urlSplitArray[1].indexOf("&")==-1)url=urlSplitArray[0]+sessionParam;else url=urlSplitArray[0]+sessionParam+"&"+urlSplitArray[1].split("&")[1]}return url+(hashValue[0]||"")},hasQueryParam:function(url){var queryRegex=new RegExp("[\\?&]");return queryRegex.test(url)},hasValidHash:function(text){var queryRegex=new RegExp(this.patterns.urlHashPart);return queryRegex.test(text)},getHashValue:function(text){return text.match(this.patterns.urlHashPart)},getUrlHost:function(){var loc=
this.getUrlObject();return loc.protocol+"//"+loc.host},insertMemberType:function(memberType,url){var _url=url||location;if(_url.indexOf(memberType)==-1){var _location=_url.split("/"+this.getLanguage())[0],_pathname=_url.split("/"+this.getLanguage())[1];return _location+"/"+this.getLanguage()+"/"+memberType+(_pathname||"")}return _url},getLanguage:function(){return Chaos.I18n.getInstance().getLanguage()},getMemberType:function(sessionId){return application.router.getUserType(sessionId)}};
Chaos.Connection=function(config){Chaos.Connection.superclass.constructor.call(this,config);this.init()};Chaos.Connection.TYPE_JSON="json";Chaos.Connection.TYPE_HTML="html";
Ext.extend(Chaos.Connection,Ext.data.Connection,{requests:undefined,commands:undefined,defaultOptions:{type:"html",success:Chaos.emptyFn,error:Chaos.emptyFn,failure:Chaos.emptyFn,callback:Chaos.emptyFn,method:"GET"},init:function(){this.requests={};this.commands={};this.on("requestcomplete",this.onRequestComplete,this);this.addEvents({"beforeajaxrequest":true,"callback":true,"success":true,"error":true,"failure":true,"abort":true,"abortall":true,"remove":true,"registerCommand":true,"unregisterCommand":true})},
onRequestComplete:function(conn,response,options){},onRequestException:function(conn,response,options){},request:function(options){Ext.applyIf(options,this.defaultOptions);var requestData={success:options.success,callback:options.callback,error:options.error,failure:options.failure,scope:options.scope};options.callback=this.onCallback;options.error=this.onError;options.success=this.onSuccess;options.failure=this.onFailure;requestData.scope=options.scope;options.scope=this;this.fireEvent("beforeajaxrequest",
this,options,requestData);var rqObj=Chaos.Connection.superclass.request.call(this,options);requestData.xhr=rqObj;this.requests[rqObj.tId]=requestData;return rqObj},_fireCallback:function(callback,args,scope){if(Chaos.isFunction(callback)){if(typeof args=="object"&&!Chaos.isArray(args))args=Array.prototype.slice(args);return callback.apply(scope,args)}return undefined},onCallback:function(response,options){if(typeof options.callback=="function")options.callback.call(options.scope,response,options);
var requestData=this.requests[response.tId];this.fireEvent("callback",this,response,options,requestData)},onError:function(response,options){if(typeof options.error=="function")options.error.call(options.scope,response,options);var requestData=this.requests[response.tId];this.fireEvent("error",this,response,options,requestData)},onSuccess:function(response,options){var requestData=this.requests[response.tId];if(typeof requestData=="undefined")throw new Error("request error: requestData not found");
switch(options.type.toLowerCase()){case Chaos.Connection.TYPE_JSON:try{response.json=Ext.decode(response.responseText,true)}catch(e){response.json={};this._fireCallback(requestData.error,[response,options,requestData],requestData.scope);return}var success=!(response.json.success===0||response.json.success===false||response.json.success==="0");if(success==true)var callbackResult=this._fireCallback(requestData.success,[response,options,requestData],requestData.scope);else var callbackResult=this._fireCallback(requestData.error,
[response,options,requestData],requestData.scope);if(callbackResult!==false){if(typeof response.redirectUrl=="string")document.location=data.redirectUrl;this._fireCommand(response)}else return false;break;case Chaos.Connection.TYPE_HTML:this._fireCallback(requestData.success,[response,options,requestData],requestData.scope);return;break;default:this._fireCallback(requestData.failure,[response,options,requestData],requestData.scope);return;break}this.fireEvent("success",this,response,options,requestData)},
_fireCommand:function(response){if(typeof response.json.command=="object")for(var commandName in response.json.command)if(typeof this.commands[commandName]=="object")this._fireCallback(this.commands[commandName].fn,response.json.command[commandName]||{},this.commands[commandName].scope||this||window)},onFailure:function(response,options){var requestData=this.requests[response.tId];this._fireCallback(requestData.failure,[response,options,requestData],requestData.scope);this.fireEvent("failure",this,
response,options,requestData)},getRequest:function(tId){return this.requests[tId]},abort:function(tId){if(tId instanceof Object)tId=tId.tId;if(typeof this.requests[tId]!="undefined"){this.requests[tId].xhr.conn.abort();this.remove(tId)}},abortAll:function(){this.fireEvent("abortall",this);for(var tId in this.requests)this.abort(tId)},remove:function(tId){this.fireEvent("remove",this,tId);delete this.requests[tId]},registerCommand:function(name,fn,scope){this.fireEvent("registerCommand",this,name,
fn,scope);this.commands[name]={fn:fn,scope:scope}},unregisterCommand:function(name){this.fireEvent("unregisterCommand",this,name,fn,scope);if(this.commands[name])delete this.commands[name]}});Chaos.Ajax=new Chaos.Connection;
Chaos.Template=function(){Chaos.Template.superclass.constructor.apply(this,arguments);var me=this,s=me.html,re=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,nameRe=/^<tpl\b[^>]*?for="(.*?)"/,ifRe=/^<tpl\b[^>]*?if="(.*?)"/,execRe=/^<tpl\b[^>]*?exec="(.*?)"/,m,id=0,tpls=[],VALUES="values",PARENT="parent",XINDEX="xindex",XCOUNT="xcount",RETURN="return ",WITHVALUES="with(values){ ";s=["<tpl>",s,"</tpl>"].join("");while(m=s.match(re)){var m2=m[0].match(nameRe),m3=m[0].match(ifRe),m4=m[0].match(execRe),
exp=null,fn=null,exec=null,name=m2&&m2[1]?m2[1]:"";if(m3){exp=m3&&m3[1]?m3[1]:null;if(exp)fn=new Function(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+RETURN+Ext.util.Format.htmlDecode(exp)+"; }")}if(m4){exp=m4&&m4[1]?m4[1]:null;if(exp)exec=new Function(VALUES,PARENT,XINDEX,XCOUNT,WITHVALUES+Ext.util.Format.htmlDecode(exp)+"; }")}if(name)switch(name){case ".":name=new Function(VALUES,PARENT,WITHVALUES+RETURN+VALUES+"; }");break;case "..":name=new Function(VALUES,PARENT,WITHVALUES+RETURN+PARENT+"; }");break;
default:name=new Function(VALUES,PARENT,WITHVALUES+RETURN+name+"; }")}tpls.push({id:id,target:name,exec:exec,test:fn,body:m[1]||""});s=s.replace(m[0],"{xtpl"+id+"}");++id}for(var i=tpls.length-1;i>=0;--i)me.compileTpl(tpls[i]);me.master=tpls[tpls.length-1];me.tpls=tpls};
Ext.extend(Chaos.Template,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(id,values,parent,xindex,xcount){var me=this,len,t=me.tpls[id],vs,buf=[];if(t.test&&!t.test.call(me,values,parent,xindex,xcount)||t.exec&&t.exec.call(me,values,parent,xindex,xcount))return"";vs=t.target?t.target.call(me,values,parent):values;len=vs.length;parent=t.target?values:parent;if(t.target&&Ext.isArray(vs)){for(var i=
0,len=vs.length;i<len;i++)buf[buf.length]=t.compiled.call(me,vs[i],parent,i+1,len);return buf.join("")}return t.compiled.call(me,vs,parent,xindex,xcount)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=this.disableFormats!==true,sep=Ext.isGecko?"+":",",body;function fn(m,name,format,args,math){if(name.substr(0,4)=="xtpl")return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'";var v;if(name===".")v="values";else if(name==="#")v="xindex";else if(name.indexOf(".")!=
-1)v=name;else v="values['"+name+"']";if(math)v="("+v+math+")";if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this.")format="fm."+format+"(";else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="("+v+" === undefined ? '' : "}return"'"+sep+format+v+args+")"+sep+"'"}function codeFn(m,code){return"'"+sep+"("+code.replace(/\\'/g,"'")+")"+sep+"'"}if(Ext.isGecko)body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,
"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};";else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("")}eval(body);return this},applyTemplate:function(values){return this.master.compiled.call(this,values,{},1,1)},compile:function(){return this}});Chaos.Template.prototype.apply=Chaos.Template.prototype.applyTemplate;
Chaos.Template.from=function(el){el=Ext.getDom(el);return new Chaos.Template(el.value||el.innerHTML)};Ext.namespace("Chaos.Block");Chaos.Block=function(el,config){Chaos.Block.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.Block,Chaos.Object,{name:"block",headTag:undefined,bodyTag:"",footTag:undefined,wrapHead:undefined,wrapBody:undefined,wrapFoot:undefined,headTpl:undefined,bodyTpl:undefined,footTpl:undefined,headData:undefined,bodyData:undefined,footData:undefined,mustRender:false,rendered:false,init:function(el,config){this.headData={};this.bodyData={};this.footData={};Chaos.Block.superclass.init.call(this,el,config);this.addEvents({"render":true})},render:function(){if(this.mustRender){this.empty();
if(Chaos.isDefined(this.headTag)){var headTag=this.headTag;var bodyTag=this.bodyTag;var footTag=this.footTag;this.headTpl=new Ext.Template(this.headTag);var elem=this.headTpl.append(this.element,this.headData);if(typeof this.wrapHead!="undefined"&&this.wrapHead!="")Ext.get(elem).wrap(this.wrapHead)}if(Chaos.isDefined(this.bodyTag)){this.bodyTpl=new Ext.Template(this.bodyTag);var elem=this.bodyTpl.append(this.element,this.bodyData);if(typeof this.wrapBody!="undefined"&&this.wrapBody!="")Ext.get(elem).wrap(this.wrapBody)}if(Chaos.isDefined(this.footTag)){this.footTpl=
new Ext.Template(this.footTag);var elem=this.footTpl.append(this.element,this.footData);if(typeof this.wrapFoot!="undefined"&&this.wrapFoot!="")Ext.get(elem).wrap(this.wrapFoot)}this.fireEvent("render",{block:this})}this.rendered=true},setData:function(dataType,data,forceRender){switch(dataType){case "head":case "header":this.headData=data;break;case "body":default:this.bodyData=data;break;case "foot":case "footer":this.footData=data;break}if(forceRender)this.rendered=false;this.render();return this},
destroy:function(removeElement){this.unbind();this.empty();if(removeElement===true)this.element.remove()},empty:function(){if(Chaos.isDefined(this.element)&&!Chaos.isNull(this.element))this.element.dom.innerHTML="";this.rendered=false},bind:function(){this.on("init",this.render,this)},unbind:function(){this.un("init",this.render,this)}});Chaos.Captcha=function(el,config){Chaos.Captcha.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.Captcha,Chaos.Object,{captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:"captcha",init:function(el,config){Chaos.Captcha.superclass.init.call(this,el,config)},fillCaptcha:function(){var captchaValue=Ext.fly(this.captchaId).getValue(),captchaUrl=Chaos.getUrl(this.captchaUrl,{captchaId:captchaValue},{},""),captchaText;if(captchaValue!="")Chaos.Ajax.request({method:"GET",type:"json",url:captchaUrl,scope:this,success:function(response){captchaText=
response.json.data.text;Ext.fly(this.captchaInputId).dom.value=captchaText;this.refreshCaptcha(response.json.data.src)}})},refreshCaptcha:function(captchaImageSrc){var captcha=this.element;captcha.set({src:captchaImageSrc})},bind:function(){Chaos.Captcha.superclass.bind.call(this);Ext.fly(this.captchaRefreshBtnId).on("click",function(ev){this.fillCaptcha();ev.preventDefault()},this)},unbind:function(){Chaos.Captcha.superclass.unbind.call(this);Ext.fly(this.captchaRefreshBtnId).un("click",this.refreshCaptcha)}});
Chaos.Container=function(el,config){Chaos.Container.superclass.constructor.call(this,el,config)};Chaos.Container.EVENT_ADD_COMPONENT="add-component";Chaos.Container.EVENT_REMOVE_COMPONENT="remove-component";Chaos.Container.GLOBAL_COMPONENT_NAME="global";
Chaos.extend(Chaos.Container,Chaos.Object,{name:"GeneralContainer",_components:undefined,init:function(el,config){this._components={};this.addEvents(Chaos.Container.EVENT_ADD_COMPONENT,Chaos.Container.EVENT_REMOVE_COMPONENT);this.getCmp=this.getComponent;if(config.items instanceof Object)this.addComponents(config.items);if(config.globals instanceof Object)for(var globalIndex in config.globals){var globalItem=config.globals[globalIndex];this.addGlobalEvent(globalIndex,globalItem)}Chaos.Container.superclass.init.call(this,
el,config)},addGlobalEvent:function(eventName,eventHandler){var configObj={component:Chaos.Broadcaster,listeners:{}};configObj.listeners[eventName]=eventHandler;this.addComponent(configObj,Chaos.Container.GLOBAL_COMPONENT_NAME)},addComponents:function(componentList){for(var itemIndex in componentList){var cmpObj=componentList[itemIndex];this.addComponent(cmpObj,itemIndex)}},addComponent:function(config,id){var component=config.component,listeners=config.listeners||{},scope=listeners.scope||this||
window,id=id||component.getId();this._components[id]=component;this._components[id].listeners=listeners;this[id]=component;this.fireEvent(Chaos.Container.EVENT_ADD_COMPONENT,component,listeners,this);this._setListeners({listeners:listeners,component:component,scope:scope,method:"on"})},getComponent:function(id){var cmp=this._components[id];return cmp},removeComponent:function(name){var component=this._components[name],listeners=component.listeners,scope=listeners.scope||this||window;this._setListeners({listeners:listeners,
component:component,scope:scope,method:"un"});delete this[name];delete this._components[name]},_setListeners:function(params){var listeners=params.listeners,component=params.component,scope=params.scope||this||window,method=params.method||"on",event,fn;if(typeof listeners=="object")for(event in listeners){fn=listeners[event];if(event!="scope")if(typeof fn=="string")component[method](event,this[fn],scope);else{if(typeof this[fn]=="undefined"){console.warn("event handler does not exist: ",fn);return}component[method](event,
fn,scope)}}},bind:function(){Chaos.Container.superclass.bind.call(this)},unbind:function(){Chaos.Container.superclass.unbind.call(this)}});Chaos.form.Form=function(el,config){Chaos.form.Form.superclass.constructor.call(this,el,config)};
Ext.extend(Chaos.form.Form,Chaos.Object,{name:"form",isAjax:true,fields:undefined,fieldSelector:"input, select, textarea",validator:true,decorator:true,captcha:true,inputHint:true,inputError:true,init:function(el,config){Chaos.form.Form.superclass.init.call(this,el,config);this.fields={};this.addEvents({"initForm":true,"submit":true,"beforeSubmit":true,"afterSubmit":true,"validate":true,"validateField":true,"inputFocus":true,"inputKeypress":true,"inputBlur":true,"submitError":true,"submitSuccess":true});
if(this.element.dom.tagName.toLowerCase()!="form")throw new Error("The given element is not a form.");this.fireEvent("initForm",this);this.collectAllFields()},collectAllFields:function(){var allFields=this.element.select(this.fieldSelector);for(var i=0;i<allFields.length;i++)this.addField(allFields[i])},addField:function(){this.fireEvent("addField",field,this);var field=this.fields[currField.dom.name];if(!(field instanceof Object))this.fields[currField.dom.name]={ids:[currField.dom.id]};else field.ids.push(currField.dom.id)},
onInputFocus:function(ev,target,options){this.fireEvent("inputFocus",ev,target,options)},onInputBlur:function(ev,target,options){this.fireEvent("inputBlur",ev,target,options)},submit:function(url){ev.preventDefault();this.locked=true;this.fireEvent("validate",this);if(this.validate()===false){this.locked=false;return false}if(!this.fireEvent("beforesubmit",this))return;if(this.isAjax){var form=this.element.dom;Chaos.Ajax.request({url:url||form.action||"/",method:form.method.toUpperCase(),form:form,
type:Chaos.Connection.TYPE_JSON,success:this.onSubmitSuccess,error:this.onSubmitError,failure:this.onSubmitFailure,scope:this})}else this.element.dom.submit()},onSubmitSuccess:function(response,opts,rqData){this.fireEvent("submitSuccess",this,response,opts,rqData);if(this.originalConfig.success instanceof Function)var result=this.originalConfig.success.call(this,response,opts,rqData,this);return result||true},onSubmitError:function(response,opts,rqData){this.fireEvent("submitError",this,response,
opts,rqData);if(this.originalConfig.error instanceof Function)var result=this.originalConfig.error.call(this,response,opts,rqData,this);return result||true},onSubmitFailure:function(response,opts,rqData){this.fireEvent("submitFailure",this,response,opts,rqData);if(this.originalConfig.failure instanceof Function)var result=this.originalConfig.failure.call(this,response,opts,rqData,this);return result||false},onInputFocus:function(ev,target,options){this.fireEvent("inputFocus",ev,target,options,this)},
onInputBlur:function(ev,target,options){this.fireEvent("inputBlur",ev,target,options,this)},onInputKeypress:function(ev,target,options){this.fireEvent("inputKeypress",ev,target,options,this)},bind:function(){this.element.on("submit",this.submit,this);this.element.select(this.fieldSelector).on("focus",this.onInputFocus,this).on("blur",this.onInputBlur,this).on("keypress",this.onInputKeypress,this)},unbind:function(){this.element.un("submit",this.submit,this)}});Ext.namespace("Chaos.layout");
Chaos.Layout=function(el,config){Chaos.Layout.superclass.constructor.call(this,el,config)};Chaos.Layout.EVENT_PAGECHANGE="pagechange";Chaos.Layout.EVENT_BEFORE_PAGELOAD="pagechange";
Chaos.extend(Chaos.Layout,Chaos.Object,{element:undefined,name:"layout",pageCtId:"main_content",pageCt:undefined,pageClass:Chaos.Page,init:function(el,config){this.addEvents({"pagechange":true,"beforepageload":true});for(var widget in this.widgetsConfig){var widgetConfig=this.widgetsConfig[widget];this.widgets[widget]=new widgetConfig.object(widgetConfig.el,widgetConfig.config)}Chaos.Application.getInstance().setLayout(this);Chaos.Layout.superclass.init.call(this,el,config)},bind:function(){Chaos.Layout.superclass.bind.call(this)},
unbind:function(){Chaos.Layout.superclass.unbind.call(this)},getPage:function(){return this.page},setPage:function(page){var id=this.element.getAttribute("id");if(page instanceof this.pageClass&&id!=this.id){this.fireEvent(Chaos.Layout.EVENT_PAGECHANGE,{layout:this,oldPage:this.page,newPage:page});this.page=page;this.page.layout=this;this.loadPage()}},loadPage:function(){if(this.page instanceof this.pageClass){this.fireEvent(Chaos.Layout.EVENT_BEFORE_PAGELOAD,{layout:this,oldPage:this.page});if(this.page.load instanceof
Function)this.page.load()}}});Chaos.Mask=function(el,config){Chaos.Mask.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.Mask,Chaos.Object,{name:"mask",maskEl:null,template:undefined,maskId:undefined,maskClass:"chaos-mask-ct",msgClass:"chaos-mask-message",tpl:'<div id="{maskId}" class="{maskcls} {cls}">'+'<p class="{msgclass}">{message}</p>'+"</div>",message:"Loading...",appendTo:null,duration:0.2,useDefaultZindex:false,defaultZindex:9E3,top:undefined,left:undefined,width:undefined,height:undefined,position:"absolute",appendToEl:undefined,insertionMethod:"insertBefore",maskOpacity:0,maskPosition:"page",
isVisibleMask:false,autoShow:false,maskColor:"black",_isShown:false,useCursor:false,resizeOnWindowResize:true,init:function(el,config){Chaos.Mask.superclass.init.call(this,el,config);this.addEvents({"beforeshow":true,"beforehide":true,"show":true,"hide":true});if(this.autoShow)this.show();if(!this.maskId)this.maskId=Chaos.generateId("mask")},show:function(event){if(!this._isShown){if(this.useCursor)Ext.getBody().setStyle("cursor","wait");this._isShown=true;this.fireEvent("beforeshow",{mask:this});
var position=this.element.getStyle("position");if(position!="absolute"&&position!="relative"&&position!="fixed")this.element.setStyle("position","relative");if(this.appendTo===null||typeof this.appendTo=="undefined")this.appendToEl=this.element;else if(typeof this.appendTo=="string")this.appendToEl=this.element.select(this.appendTo).item(0);else if(this.appendTo instanceof Ext.Element)this.appendToEl=this.appendTo;var _mask=this.getMask();if(_mask)this.maskEl=_mask;else{this.template=new Ext.Template(this.tpl);
this.template[this.insertionMethod](this.appendToEl,{maskId:this.maskId,maskcls:this.maskClass,msgclass:this.msgClass,cls:this.cls,message:this.message});this.maskEl=this.getMask()}this.maskEl.setStyle({display:"none"});var appendToElParams=this.getPosition();this.maskEl.setStyle({"width":appendToElParams.width,"height":appendToElParams.height,"top":appendToElParams.top,"left":appendToElParams.left,"z-index":appendToElParams["z-index"],"display":"block"});if(this.isVisibleMask&&this.maskColor)try{this.maskEl.setStyle({"opacity":0,
"background-color":this.maskColor})}catch(exception){try{this.maskEl.setStyle({"background":this.maskColor})}catch(exception){}}this.setPosition(appendToElParams["top"],appendToElParams["left"],this.appendToEl);TweenLite.to(this.maskEl.dom,this.duration||0,{opacity:this.maskOpacity||1,onCompleteScope:this,onComplete:function(){if(Ext.isIE9)this.maskEl.dom.style.opacity=this.maskOpacity||1}});var messageEl=this.maskEl.select("."+this.msgClass).item(0);if(messageEl!=null)messageEl.setStyle({top:(this.maskEl.getHeight()-
messageEl.getHeight())/2});this.fireEvent("show",{mask:this})}},getMask:function(){return Ext.get(this.maskId)},getPosition:function(){var isLocal=this.maskPosition=="local"?true:"";return{"top":(this.top!=undefined?this.top:this.top+this.appendToEl.getTop(isLocal)||this.appendToEl.getTop(isLocal))+"px","left":(this.left!=undefined?this.left:this.appendToEl.getLeft(isLocal))+"px","width":(this.width||this.appendToEl.getWidth())+"px","height":(this.height||(this.top?this.appendToEl.getHeight()-this.top:
this.appendToEl.getHeight()))+"px","z-index":this.useDefaultZindex?this.defaultZindex:parseInt(this.appendToEl.getStyle("z-index"))+1||this.defaultZindex}},setPosition:function(top,left,reference){var position=this.position,leftVal,topVal;if(this.appendToEl.getStyle("position")=="fixed")position="fixed";leftVal=left==undefined?reference.getLeft(true):left;topVal=top==undefined?reference.getTop(true):top;this.maskEl.setStyle({"position":position,"left":leftVal,"top":topVal})},hide:function(){if(this._isShown){this._isShown=
false;this.fireEvent("beforehide",{mask:this});if(this.useCursor)Ext.getBody().setStyle("cursor","default");if(typeof this.maskEl=="object"&&this.maskEl!==null){var self=this;TweenLite.to(this.maskEl.dom,this.duration||0,{opacity:0,onCompleteScope:this.maskEl,onComplete:function(){this.remove();delete self.maskEl}});this.template=undefined}this.fireEvent("hide",{mask:this})}},isVisible:function(){return this._isShown},onWindowResize:function(){if(this.maskEl&&this.resizeOnWindowResize)this.maskEl.setStyle(this.getPosition())},
setReference:function(referenceEl){this.appendTo=referenceEl;return this.appendTo},bind:function(){Chaos.Mask.superclass.bind.call(this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){Chaos.Mask.superclass.unbind.call(this);Ext.fly(window).un("resize",this.onWindowResize,this)}});Chaos.Widget=function(el,config){Chaos.Widget.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.Widget,Chaos.Object,{init:function(el,config){Chaos.Widget.superclass.init.call(this,el,config)},bind:function(){Chaos.Widget.superclass.bind.call()},unbind:function(){Chaos.Widget.superclass.unbind.call()}});Ext.namespace("JSM.component.Accordion");JSM.component.Accordion=function(el,config){JSM.component.Accordion.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.Accordion,Chaos.Object,{name:"Accordion",openSel:".link",activeRowClass:"active",activeRowSel:".active",contentPrefix:"content_",durationTime:0.5,rowContentSel:".answer",_activeId:undefined,_elHeight:{},init:function(el,config){JSM.component.Accordion.superclass.init.call(this,el,config);this.storeHeights()},storeHeights:function(){var that=this;this.element.select(this.rowContentSel).each(function(t){var rowContent=Ext.get(t),rowContentParent=rowContent.parent(that.rowContentSel);
rowContent.setStyle({position:"absolute",visibility:"hidden",display:"block"});if(rowContentParent!==null){rowContentParent.setStyle({position:"absolute",visibility:"hidden",display:"block"});that._elHeight[rowContent.dom.id]=rowContent.getHeight();rowContentParent.setStyle({position:"static",visibility:"visible",display:"none"})}else that._elHeight[rowContent.dom.id]=rowContent.getHeight();rowContent.setStyle({position:"static",visibility:"visible",display:"none"})})},onRowClick:function(ev,target){var link=
Ext.get(target),contentId=link.dom.id.split("_")[1],contentEl=Ext.get(this.contentPrefix+contentId);if(contentEl){ev.stopPropagation();ev.preventDefault();if(link.hasClass(this.activeRowClass)){link.removeClass(this.activeRowClass);this.hideContent(contentEl)}else{var easing=null;if(!Ext.isIE7&&!Ext.isIE8)easing="Expo.easeInOut";this.clearActiveElement(link);link.addClass(this.activeRowClass);TweenMax.to(contentEl.dom,this.durationTime,{css:{height:this._elHeight[contentEl.dom.id],display:"block"},
ease:easing,onStart:function(){contentEl.setStyle({display:"block",overflow:"hidden",height:"0px",paddingTop:"5px"})},onComplete:function(){contentEl.setStyle({height:"auto"})}});Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_ACCORDION,{scope:this})}}},clearActiveElement:function(clicked){var self=this,content,link;this.element.select(this.activeRowSel).each(function(){link=Ext.get(this);content=Ext.get(self.contentPrefix+this.id.split("_")[1]);if(!content.contains(clicked.id)){link.removeClass(self.activeRowClass);
self.hideContent(content)}})},hideContent:function(content){var parentAnswer=content.parent(this.rowContentSel),duration=this.durationTime;if(parentAnswer!==null)duration=parentAnswer.isVisible()?duration:0;var easing=null;if(!Ext.isIE7&&!Ext.isIE8)easing="Expo.easeInOut";TweenMax.to(content.dom,duration,{css:{height:"0px",display:"none",paddingTop:"0px"},ease:easing})},bind:function(){JSM.component.Accordion.superclass.bind.call(this);this.element.select(this.openSel).on("click",this.onRowClick,
this)},unbind:function(){JSM.component.Accordion.superclass.unbind.call(this);this.element.select(this.openSel).un("click",this.onRowClick,this)}});Ext.namespace("JSM.component");JSM.component.ActionHelper=function(el,config){JSM.component.ActionHelper.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.ActionHelper,Chaos.Object,{name:"ActionHelperHelper",actionPostFix:"",params:undefined,_actions:undefined,_potencialActions:undefined,init:function(el,config){JSM.component.ActionHelper.superclass.init.call(this,el,config);this._actions={};this.params={};this._potencialActions=[]},setPotencialActions:function(action){var isAlreadySet=false;for(var i=0,length=this._potencialActions.length;i<length;i++)if(this._potencialActions[i]==action)isAlreadySet=true;if(!isAlreadySet)this._potencialActions.push(action)},
registerAction:function(params){var _autoFire=typeof params.autoFire=="undefined"?true:false,name=params.name,fn=params.fn||Chaos.emptyFn(),scope=params.scope,callback=params.callback,callbackScope=params.callbackScope,removable=params.removable;if(typeof this._actions[name]=="undefined"){this._actions[name]={};this._actions[name].scope=scope||this||window;this._actions[name].fn=fn}else;if(callback&&callbackScope)callback.call(callbackScope);if(_autoFire)this.fireAction(name);return this._actions},
isRegisteredAction:function(action){return Chaos.isObject(this._actions[action])},fireAction:function(action){var _isFired=false,_currentAction,isFirstAction=true;if(this.isRegisteredAction(action))for(var i=0;i<this._potencialActions.length;i++){_currentAction=this._actions[action];if(Chaos.isFunction(_currentAction.fn)&&this._potencialActions[i]==action){_currentAction.fn.call(_currentAction.scope,this.params);_isFired=true;isFirstAction=false}}return _isFired},deleteAction:function(name){if(typeof this._actions[name]!=
"undefined")delete this._actions[name];return this._actions},bind:function(){JSM.component.ActionHelper.superclass.bind.call(this)},unbind:function(){JSM.component.ActionHelper.superclass.unbind.call(this)}});Ext.namespace("JSM.component.Button");JSM.component.Button=function(el,config){JSM.component.Button.superclass.constructor.call(this,el,config)};JSM.component.Button.BUTTON_CLICK="button-click";JSM.component.Button.STATE_ON="on";JSM.component.Button.STATE_OFF="off";
Chaos.extend(JSM.component.Button,Chaos.Object,{name:"Button",offCls:"",onCls:"selected",defaultState:JSM.component.Button.STATE_OFF,_state:JSM.component.Button.STATE_OFF,warningTagClass:".warning_tag",isHideWaringBlock:true,init:function(el,config){JSM.component.Button.superclass.init.call(this,el,config);this.addEvents(JSM.component.Button.BUTTON_CLICK);this.setState(config.defaultState)},setState:function(defaultState){if(defaultState==JSM.component.Button.STATE_OFF){this.element.replaceClass(this.onCls,
this.offCls);this._state=JSM.component.Button.STATE_OFF}else{this.element.addClass(this.onCls);this._state=JSM.component.Button.STATE_ON}},getState:function(){var stateBtn;if(this._state==JSM.component.Button.STATE_OFF)stateBtn=JSM.component.Button.STATE_OFF;else stateBtn=JSM.component.Button.STATE_ON;return stateBtn},onButtonClick:function(ev,target,options){ev.preventDefault();ev.stopPropagation();if(this.getState()==JSM.component.Button.STATE_OFF){this.element.addClass(this.onCls);this._state=
JSM.component.Button.STATE_ON}else{this.element.replaceClass(this.onCls,this.offCls);this._state=JSM.component.Button.STATE_OFF}this.onHideErrors();this.fireEvent(JSM.component.Button.BUTTON_CLICK,ev,target,options)},onHideErrors:function(){if(this.isHideWaringBlock==true)Ext.getBody().select(this.warningTagClass).fadeOut()},bind:function(){JSM.component.Button.superclass.bind.call(this);this.element.on("click",this.onButtonClick,this)},unbind:function(){JSM.component.Button.superclass.unbind.call(this);
this.element.un("click",this.onButtonClick,this)}});Ext.namespace("JSM.component");JSM.component.Carousel=function(el,config){JSM.component.Carousel.superclass.constructor.call(this,el,config)};JSM.component.Carousel.LEFT_BUTTON=37;JSM.component.Carousel.RIGHT_BUTTON=39;
Chaos.extend(JSM.component.Carousel,Chaos.Object,{name:"Carousel",elems:undefined,title:undefined,titleClass:"favorite_title",maxVisibleElems:9,scrollDuration:0.5,elemWidth:undefined,carouselContainerId:"carousel_inner",carouselBlockId:"carousel_inner_block",carouselInnerBlockSel:".inner_ul",carouselBlockTpl:'<div class="header">'+"<h2 class={title_cls}>{title}</h2>"+'<a class="close_button" href="#">&nbsp;</a>'+"</div>"+"<div id={container_id}>"+'<a href="#" class={arrow_prev_cls}>'+'<span class="icon_prev"></span>'+
"</a>"+"<div id={container_inner_id}>"+"<ul id={ul_id}>"+"<li id={prev_container_id}>"+"<ul class={inner_ul_cls}></ul>"+"</li>"+"<li id={middle_container_id}>"+"<ul class={inner_ul_cls}></ul>"+"</li>"+"<li id={next_container_id}>"+"<ul class={inner_ul_cls}></ul>"+"</li>"+"</ul>"+"</div>"+'<a href="#" class={arrow_next_cls}>'+'<span class="icon_next"></span>'+"</a>"+'<div class="clear"></div>'+"</div>",carouselBlockData:{},carouselTpl:undefined,containerWidth:undefined,subContainerWidth:0,containerPos:undefined,
allItemsWidth:undefined,carouselItems:undefined,position:0,enableAnim:true,operation:undefined,innerContainer:undefined,isSetContainerWidth:false,blockLineClass:"empty",topLineClass:"top_image_line",middleLineClass:"middle_image_line",bottomLineClass:"bottom_image_line",prevContainerId:"prev_container",middleContainerId:"middle_container",nextContainerId:"next_container",prevContainerEl:"empty",middleContainerEl:"empty",nextContainerEl:"empty",eventController:function(){},scrollPrevEnabled:false,
scrollNextEnabled:false,init:function(el,config){Ext.apply(this.carouselBlockData,this.config,{div_id:"favorite_container",title:this.title,title_cls:this.titleClass,container_id:"carousel_container",container_inner_id:"carousel_inner",arrow_prev_cls:"arrow_prev",arrow_next_cls:"arrow_next",prev_container_id:this.prevContainerId,middle_container_id:this.middleContainerId,next_container_id:this.nextContainerId,inner_ul_cls:"inner_ul",ul_id:this.carouselBlockId});this.addEvents({"prevClick":true,"nextClick":true,
"commonEvent":true,"firstElementsReady":true});this.initCarousel();JSM.component.Carousel.superclass.init.call(this,el,config)},createTemplate:function(tplConfig){if(typeof tplConfig=="string"){var newTpl=new Ext.Template(tplConfig);return newTpl}else throw new Error("Can't create template from this, or its type is not string: "+tplConfig);},initCarousel:function(){this.mainTpl=this.createTemplate(this.carouselBlockTpl);this.mainTpl.insertFirst(this.element,this.carouselBlockData);this.carouselItems=
this.createTemplate(this.carouselTpl);this.container=Ext.get(this.carouselBlockId);this.getBlocks();var i=0;this.blockLineClass=this.topLineClass;while(i<this.maxVisibleElems&&i<this.elems.length){Ext.get(this.carouselItems.append(this.middleContainerEl,this.elems[i])).addClass(this.blockLineClass+" curr_block");i++;this.setImageLineClass(i)}this.prevArrowButton=this.element.select(".arrow_prev");this.nextArrowButton=this.element.select(".arrow_next");this.arrowButtons=this.element.select(".arrow_prev, .arrow_next");
this.arrowButtons.focus();if(this.elems.length<=this.maxVisibleElems)this.displayArrow("both",false);else{this.displayArrow("prev",false);this.scrollPosNext();this.insertNext(this.getNextElems());this.scrollNextEnabled=true}this.setAllBlockSize();this.eventController();this.fireEvent("firstElementsReady",{"carousel":this,"items":this.element.select(".curr_block")})},getBlocks:function(){this.prevContainerEl=Ext.get(this.prevContainerId).child(this.carouselInnerBlockSel);this.middleContainerEl=Ext.get(this.middleContainerId).child(this.carouselInnerBlockSel);
this.nextContainerEl=Ext.get(this.nextContainerId).child(this.carouselInnerBlockSel)},setImageLineClass:function(index){if(index%3==0)switch(index){case 3:this.blockLineClass=this.middleLineClass;break;case 6:this.blockLineClass=this.bottomLineClass;break}},getPrevElems:function(){var result=[];for(var i=0;i<this.maxVisibleElems;i++)if(this.elems[this.getPrevIndex(i)]!=undefined)result.push(this.elems[this.getPrevIndex(i)]);return result},getNextElems:function(){var result=[];for(var i=0;i<this.maxVisibleElems;i++)if(this.elems[this.getNextIndex(i)]!=
undefined)result.push(this.elems[this.getNextIndex(i)]);return result},getPrevIndex:function(index){return this.position-this.maxVisibleElems+index},getNextIndex:function(index){return this.position+index>=this.elems.length?undefined:this.position+index},scrollPosPrev:function(){this.position-=this.maxVisibleElems;if(this.operation=="next")this.position-=this.maxVisibleElems;this.operation="prev"},scrollPosNext:function(){this.position+=this.maxVisibleElems;if(this.operation=="prev")this.position+=
this.maxVisibleElems;this.operation="next"},insertPrev:function(items){this.blockLineClass=this.topLineClass;var prevContainer,prevContainerEl;prevContainerEl=Ext.get(this.prevContainerId);if(prevContainerEl==null){prevContainer=this.createTemplate("<li id={prev_container_id}><ul class={inner_ul_cls}></ul></li>");prevContainer.insertFirst(Ext.get(this.carouselBlockId),this.carouselBlockData)}prevContainerEl=Ext.get(this.prevContainerId).select(".inner_ul").item(0);for(var i=0;i<items.length;i++){this.setImageLineClass(i);
Ext.get(this.carouselItems.append(prevContainerEl,items[i])).addClass(this.blockLineClass+" prev_block")}},insertNext:function(items){this.blockLineClass=this.topLineClass;var nextContainer,nextContainerEl;nextContainerEl=Ext.get(this.nextContainerId);if(nextContainerEl==null){nextContainer=this.createTemplate("<li id={next_container_id}><ul class={inner_ul_cls}></ul></li>");nextContainer.append(Ext.get(this.carouselBlockId),this.carouselBlockData)}nextContainerEl=Ext.get(this.nextContainerId).select(".inner_ul").item(0);
for(var i=0;i<items.length;i++){this.setImageLineClass(i);Ext.get(this.carouselItems.append(nextContainerEl,items[i])).addClass(this.blockLineClass+" next_block")}},isBeginningOfList:function(){if(this.position<=0)return true;return false},isEndOfList:function(){if(this.position>=this.elems.length)return true;return false},setAllBlockSize:function(){this.allElems=this.container.select("li");this.allItemsWidth=this.allElems.elements.length*this.elemWidth;this.container.setStyle({"width":this.allItemsWidth+
"px"});this.containerWidth=this.maxVisibleElems>=this.allElems.elements.length?this.allElems.elements.length*this.elemWidth:this.maxVisibleElems*this.elemWidth;this.subContainerWidth=3*this.elemWidth;Ext.fly(this.container.findParent("div")).setStyle({"width":this.subContainerWidth+"px"});this.styleObject={"width":this.subContainerWidth+"px","left":this.subContainerWidth+"px"};this.getBlocks();this.prevContainerEl.setStyle(this.styleObject);this.middleContainerEl.setStyle(this.styleObject);this.nextContainerEl.setStyle(this.styleObject);
this.container.setStyle({"right":this.subContainerWidth+"px"})},onHandleKeyDown:function(ev){ev.preventDefault();switch(ev.getCharCode()){case JSM.component.Carousel.LEFT_BUTTON:if(this.scrollPrevEnabled)this.onScrollContent(ev,"prev");break;case JSM.component.Carousel.RIGHT_BUTTON:if(this.scrollNextEnabled)this.onScrollContent(ev,"next");break;default:break}},onScrollContent:function(ev,direction){ev.stopPropagation();ev.preventDefault();if(this.enableAnim==true){var scrollDirection;if(direction!=
undefined&&ev.type=="keydown")scrollDirection=direction;else if(ev.type=="click")scrollDirection=ev.target.className.split("_")[1];this.enableAnim=false;var self=this;switch(scrollDirection){case "prev":this.scrollPosPrev();this.container.animate({"right":{by:-parseInt(this.subContainerWidth),unit:"px"}},this.scrollDuration,function(){var items=self.element.select(".next_block");self.fireEvent("commonEvent",{"carousel":self,"items":items});var nextBlock=Ext.fly(self.nextContainerId);if(nextBlock)nextBlock.remove();
var middleContainerEl=Ext.get(self.middleContainerId);var prevContainerEl=Ext.get(self.prevContainerId);middleContainerEl.set({id:self.nextContainerId});prevContainerEl.set({id:self.middleContainerId});Ext.fly(self.nextContainerId).select(".curr_block").replaceClass("curr_block","next_block");Ext.fly(self.middleContainerId).select(".prev_block").replaceClass("prevt_block","curr_block");if(!self.isBeginningOfList()){self.insertPrev(self.getPrevElems());self.setPositions()}else self.displayArrow("prev",
false);self.displayArrow("next",true);self.enableAnim=true;var items=self.element.select(".curr_block");self.fireEvent("prevClick",{"carousel":self,"items":items})},"easeOut","run");break;case "next":this.scrollPosNext();this.container.animate({"right":{by:parseInt(this.subContainerWidth),unit:"px"}},this.scrollDuration,function(){var items=self.element.select(".prev_block");self.fireEvent("commonEvent",{"carousel":self,"items":items});var prevBlock=Ext.fly(self.prevContainerId);if(prevBlock)prevBlock.remove();
var middleContainerEl=Ext.get(self.middleContainerId);var nextContainerEl=Ext.get(self.nextContainerId);middleContainerEl.set({id:self.prevContainerId});nextContainerEl.set({id:self.middleContainerId});Ext.fly(self.prevContainerId).select(".curr_block").replaceClass("curr_block","prev_block");Ext.fly(self.middleContainerId).select(".next_block").replaceClass("next_block","curr_block");if(!self.isEndOfList()){self.insertNext(self.getNextElems());self.setPositions()}else{self.container.setStyle({"right":self.subContainerWidth*
2+"px"});self.displayArrow("next",false)}self.displayArrow("prev",true);self.enableAnim=true;items=self.element.select(".curr_block");self.fireEvent("nextClick",{"carousel":self,"items":items})},"easeOut","run");break}}},setPositions:function(){this.getBlocks();this.prevContainerEl.setStyle(this.styleObject);this.middleContainerEl.setStyle(this.styleObject);this.nextContainerEl.setStyle(this.styleObject);this.container.setStyle({"right":this.subContainerWidth*2+"px"})},displayArrow:function(arrow,
displayed){if(typeof arrow=="string"&&typeof displayed=="boolean"){switch(arrow){case "prev":if(!this.prevArrowButton)arrow=this.element.select(".arrow_prev");else arrow=this.prevArrowButton;this.scrollPrevEnabled=displayed;break;case "next":if(!this.nexArrowButton)arrow=this.element.select(".arrow_next");else arrow=this.nextArrowButton;this.scrollNextEnabled=displayed;break;default:if(!this.arrowButtons)arrow=this.element.select(".arrow_prev, .arrow_next");else arrow=this.arrowButtons;this.scrollPrevEnabled=
displayed;this.scrollNextEnabled=displayed;break}arrow.setVisible(displayed)}},bind:function(){JSM.component.Carousel.superclass.bind.call(this);this.arrowButtons.on("click",this.onScrollContent,this);this.element.on("keydown",this.onHandleKeyDown,this)},unbind:function(){JSM.component.Carousel.superclass.unbind.call(this);this.arrowButtons.un("click",this.onScrollContent,this);this.element.un("keydown",this.onHandleKeyDown,this)}});Ext.namespace("JSM.component.CarouselGallery");
JSM.component.CarouselGallery=function(el,config){JSM.component.CarouselGallery.superclass.constructor.call(this,el,config)};JSM.component.CarouselGallery.CAROUSELGALLERY_NAV_NEXT_CLICK="carouselgallery-nav-next";JSM.component.CarouselGallery.CAROUSELGALLERY_NAV_PREV_CLICK="carouselgallery-nav-prev";JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_NEXT_FINISHED="carouselgallery-anim-next-finished";JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_PREV_FINISHED="carouselgallery-anim-prev-finished";
JSM.component.CarouselGallery.CAROUSELGALLERY_FIRST_IMAGE_LOADED="carouselgallery-first-image-loaded";JSM.component.CarouselGallery.CAROUSELGALLERY_VOTE_BTN_CLICK="carouselgallery-vote-btn-click";JSM.component.CarouselGallery.CAROUSELGALLERY_ACTIVE_THUMB_MOUSEOUT="carouselgallery-activethumb-mouseleave";
Chaos.extend(JSM.component.CarouselGallery,Chaos.Object,{name:"CarouselGallery",defaultNavValue:undefined,carouselBottomRightTextSel:".carousel_links",carouselBottomLeftTextSel:".details",settings:{},_settings:{_enabled:true,infiniteScroll:true,duration:0.5,autoPlay:true,autoPlayInterval:5E3,navPositionMod:5,distance:12,opacity:0.3},activePanelSel:".active",activePanelCls:"active",playBtnCls:"play",pauseBtnCls:"pause",carouselContainerWrapperId:"awards_top",carouselContainerId:"awards_carousel",nextNavigationId:"carousel_next_nav",
prevNavigationId:"carousel_prev_nav",carouselVoteButtonSel:".vote_btn",panelPrefix:"panel_",preloadDataSel:".imageData",_nextNavigationEl:undefined,_prevNavigationEl:undefined,_activePanelEl:undefined,_carouselContainerEl:undefined,_carouselSlideShowNavId:"carousel_slideshow_nav",_carouselSlideShowNavEl:undefined,nextRequestUrl:"Awards/CarouselNext",prevRequestUrl:"Awards/CarouselPrevious",currentLayout:undefined,sizes:{bigWidth:1138,bigHeight:640,middleWidth:1138,middleHeight:640,smallWidth:830,
smallHeight:470,scalePercent:90},_imageDimensions:{width:null,height:null,scaledWidth:null,scaledHeight:null,marginTop:null,marginLeft:null},_autoPlayTask:undefined,_firstRun:true,_maxImageCount:undefined,_activePanelIndex:undefined,isWindowResized:false,_listId:undefined,_panels:undefined,_textAnim:undefined,carouselFavoriteBtnId:"carousel_favorites",myFavoriteCls:"myfavorite",myFavoriteSel:".myfavorite",favoriteBtnSel:".add_favorite",init:function(el,config){JSM.component.CarouselGallery.superclass.init.call(this,
el,config);this._applySettings();this.addEvents(JSM.component.CarouselGallery.CAROUSELGALLERY_NAV_NEXT_CLICK,JSM.component.CarouselGallery.CAROUSELGALLERY_NAV_PREV_CLICK,JSM.component.CarouselGallery.CAROUSELGALLERY_ACTIVE_THUMB_MOUSEOUT);this._carouselContainerEl=Ext.get(this.carouselContainerId);this._listId=this._carouselContainerEl.dom.getAttribute("data-list-id");this._nextNavigationEl=Ext.get(this.nextNavigationId);this._prevNavigationEl=Ext.get(this.prevNavigationId);this._playPauseButtonContainer=
Ext.get(this._carouselSlideShowNavId);this._activePanelEl=Ext.get(this._carouselContainerEl.select(this.activePanelSel)).item(0);this._carouselSlideShowNavEl=Ext.get(this._carouselSlideShowNavId);this._maxImageCount=this._carouselContainerEl.select("li").elements.length-1;this._defaultImageUrl=this._carouselContainerEl.dom.getAttribute("data-defaultimg");if(this._settings.autoPlay&&this._maxImageCount>0)this.autoPlay();if(this._maxImageCount==0){this._playPauseButtonContainer.hide();this._prevNavigationEl.hide();
this._nextNavigationEl.hide()}this._panels=this.getPanels();this.animateTexts(this._panels.current);this.bindEvents();this.onAwardsWindowResize();this.firstImagePreloadCheck();Chaos.Cookie.remove("awardsActualSlide");Chaos.Cookie.set("awardsActualSlide",this.getActiveElementIndex(),6E4,"/");Chaos.fireEvent(JSM.component.CarouselGallery.CAROUSELGALLERY_FIRST_IMAGE_LOADED,{scope:this,panel:this._activePanelEl})},_applySettings:function(){Ext.apply(this._settings,this.settings)},onCarouselVoteBtnClick:function(ev,
el){ev.preventDefault();if(application.isLoggedIn())Chaos.fireEvent(JSM.component.CarouselGallery.CAROUSELGALLERY_VOTE_BTN_CLICK,{element:el,event:ev,scope:this.scope||this});else Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:false})},recalculateImageDimensions:function(layoutType){switch(layoutType){default:case "small":this._imageDimensions.width=this.sizes.smallWidth;this._imageDimensions.height=this.sizes.smallHeight;this._imageDimensions.scaledWidth=
this.sizes.smallWidth*(this.sizes.scalePercent/100);this._imageDimensions.scaledHeight=Math.round(this._imageDimensions.scaledWidth/16*9);this._imageDimensions.marginLeft=Math.floor((this._imageDimensions.width-this._imageDimensions.scaledWidth)/2);this._imageDimensions.marginTop=Math.floor((this._imageDimensions.height-this._imageDimensions.scaledHeight)/2);break;case "middle":this._imageDimensions.width=this.sizes.middleWidth;this._imageDimensions.height=this.sizes.middleHeight;this._imageDimensions.scaledWidth=
this.sizes.middleWidth*(this.sizes.scalePercent/100);this._imageDimensions.scaledHeight=Math.round(this._imageDimensions.scaledWidth/16*9);this._imageDimensions.marginLeft=Math.floor((this._imageDimensions.width-this._imageDimensions.scaledWidth)/2);this._imageDimensions.marginTop=Math.floor((this._imageDimensions.height-this._imageDimensions.scaledHeight)/2);break;case "big":this._imageDimensions.width=this.sizes.bigWidth;this._imageDimensions.height=this.sizes.bigHeight;this._imageDimensions.scaledWidth=
this.sizes.bigWidth*(this.sizes.scalePercent/100);this._imageDimensions.scaledHeight=Math.round(this._imageDimensions.scaledWidth/16*9);this._imageDimensions.marginLeft=Math.floor((this._imageDimensions.width-this._imageDimensions.scaledWidth)/2);this._imageDimensions.marginTop=Math.floor((this._imageDimensions.height-this._imageDimensions.scaledHeight)/2);break}this._activePanelEl.setStyle({width:this._imageDimensions.width+"px",height:this._imageDimensions.height+"px"})},autoPlay:function(){var showNextPanel=
function(){this._carouselSlideShowNavEl.removeClass(this.playBtnCls);this._carouselSlideShowNavEl.addClass(this.pauseBtnCls);if(this._firstRun){this._firstRun=false;return}this.onNextNavigationElClick()};this._autoPlayTask=Ext.TaskMgr.start({scope:this,run:showNextPanel,interval:this._settings.autoPlayInterval})},pauseSlideShow:function(){this._carouselSlideShowNavEl.removeClass(this.pauseBtnCls);this._carouselSlideShowNavEl.addClass(this.playBtnCls);if(this._autoPlayTask)Ext.TaskMgr.stop(this._autoPlayTask)},
getPanels:function(){if(this._maxImageCount==1){var prevPanel=this._activePanelEl.prev()?this._activePanelEl.prev():this._activePanelEl.next(),nextPanel=this._activePanelEl.next()?this._activePanelEl.next():this._activePanelEl.prev();return{current:this._activePanelEl,next:nextPanel,prev:prevPanel}}if(this._maxImageCount==0){this._settings._enabled=false;return{current:this._activePanelEl,next:this._activePanelEl,prev:this._activePanelEl}}return{current:this._activePanelEl,next:this._activePanelEl.next(),
prev:this._activePanelEl.prev()}},animateTexts:function(panel){if(!panel)return;var self=this,bottomRightTextEl=panel.select(this.carouselBottomRightTextSel).item(0),bottomLeftTextEl=panel.select(this.carouselBottomLeftTextSel).item(0),leftTextWidth=bottomLeftTextEl.getWidth(),rightTextWidth=bottomRightTextEl.getWidth();bottomRightTextEl.setStyle("right","-"+rightTextWidth+"px");if(this._textAnim)this._textAnim.pause();this._textAnim=TweenLite.fromTo(bottomLeftTextEl.dom,this._settings.duration,{css:{autoAlpha:0,
left:"-"+leftTextWidth}},{delay:self._settings.duration,css:{autoAlpha:1,left:self._settings.distance},onComplete:function(){TweenLite.fromTo(bottomRightTextEl.dom,self._settings.duration,{css:{autoAlpha:0,right:"-"+rightTextWidth}},{css:{autoAlpha:1,right:self._settings.distance}})}})},getActiveElementIndex:function(){return this._activePanelEl?this._activePanelEl.dom.id.split("_")[1]:1},doCarouselAnimation:function(direction){if(!this._settings._enabled)return;this._panels=this.getPanels();if(!this._panels[direction])return;
var self=this,panel=direction?this._panels[direction]:this._panels["next"];this._settings._enabled=false;this.animateTexts(panel);this.checkIfPanelIsFavorite(panel);if(direction==="next"){this._sendPerformerRequest(this.nextRequestUrl,this._listId,direction);this._panels.current.setStyle({zIndex:1501});TweenLite.to(this._panels.current.dom,this._settings.duration,{left:-self._imageDimensions.width,onComplete:function(){self.onAwardsWindowResize();if(self.isWindowResized){self._panels.current.setStyle({left:-self._imageDimensions.width+
"px"});self.isWindowResized=false}}});TweenLite.fromTo(this._panels.next.dom,this._settings.duration,{marginLeft:self._imageDimensions.marginLeft+"px",marginTop:self._imageDimensions.marginTop+"px",opacity:0,width:Math.round(self._imageDimensions.scaledWidth),height:Math.round(self._imageDimensions.scaledHeight),left:0,zIndex:1E3},{margin:0,opacity:1,width:self._imageDimensions.width,height:self._imageDimensions.height,onComplete:function(){self._panels.current.setStyle("zIndex",1E3);self._panels.next.setStyle("zIndex",
1501);self._panels.current.removeClass(self.activePanelCls);self._panels.next.addClass(self.activePanelCls);self._activePanelEl=self._panels.next;self.onAwardsWindowResize();if(self.isWindowResized){var temp={width:self._imageDimensions.width,height:self._imageDimensions.height};self._panels.current.setStyle(temp);self._panels.prev.setStyle(temp);self._panels.next.setStyle(temp)}Chaos.fireEvent(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_NEXT_FINISHED,{scope:self,panel:self._panels.next});
Chaos.Cookie.remove("awardsActualSlide");Chaos.Cookie.set("awardsActualSlide",self.getActiveElementIndex(),6E4,"/");self._settings._enabled=true}})}else if(direction==="prev"){this._sendPerformerRequest(this.prevRequestUrl,this._listId,direction);this._panels.current.setStyle({zIndex:1E3});this._panels.prev.addClass(this.activePanelCls);TweenLite.fromTo(this._panels.prev.dom,this._settings.duration,{margin:0,opacity:1,width:self._imageDimensions.width,height:self._imageDimensions.height,left:-self._imageDimensions.width,
zIndex:1501},{left:0});TweenLite.to(this._panels.current.dom,this._settings.duration,{marginLeft:self._imageDimensions.marginLeft+"px",marginTop:self._imageDimensions.marginTop+"px",opacity:0,width:Math.round(self._imageDimensions.scaledWidth),height:Math.round(self._imageDimensions.scaledHeight),onComplete:function(){self._panels.current.removeClass(self.activePanelCls);self._activePanelEl=self._panels.prev;if(self.isWindowResized){var temp={width:self._imageDimensions.width+"px",height:self._imageDimensions.height+
"px"};self._panels.prev.setStyle(temp);self._panels.next.setStyle(temp);self._panels.current.setStyle(temp);self.isWindowResized=false}Chaos.fireEvent(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_PREV_FINISHED,{scope:self,panel:self._panels.prev});Chaos.Cookie.remove("awardsActualSlide");Chaos.Cookie.set("awardsActualSlide",self.getActiveElementIndex(),6E4,"/");self._settings._enabled=true}})}this.onCarouselImageLoaded(false,panel.select("img").item(0).dom)},checkIfPanelIsFavorite:function(panel){var panelFavoriteBtn=
Ext.get(this.carouselFavoriteBtnId).select(this.favoriteBtnSel).item(0),isPanelFavorite=Ext.get(panel).select(this.myFavoriteSel).item(0)?true:false;if(isPanelFavorite)panelFavoriteBtn.addClass(this.myFavoriteCls);else panelFavoriteBtn.removeClass(this.myFavoriteCls)},onNextNavigationElClick:function(ev){if(!this._panels.next)this._panels=this.getPanels();if(ev){ev.preventDefault();this.pauseSlideShow()}this.doCarouselAnimation("next")},onPrevNavigationElClick:function(ev){if(!this._panels.prev)this._panels=
this.getPanels();if(ev){this.pauseSlideShow();ev.preventDefault()}this.doCarouselAnimation("prev")},onActiveCarouselThumbMouseLeave:function(ev,el){this.fireEvent(JSM.component.CarouselGallery.CAROUSELGALLERY_ACTIVE_THUMB_MOUSEOUT,{element:el,event:ev,scope:this.scope||this})},onBodyKeyDown:function(ev){if(JSM.Util.getScrollTop()<=Ext.get(this.carouselContainerWrapperId).getHeight())switch(ev.keyCode){case 39:this.onNextNavigationElClick(ev);this.pauseSlideShow();break;case 37:this.onPrevNavigationElClick(ev);
this.pauseSlideShow();break}},onCarouselSlideShowNavClick:function(ev){ev.preventDefault();if(this._carouselSlideShowNavEl.hasClass(this.playBtnCls))this.autoPlay();else if(this._carouselSlideShowNavEl.hasClass(this.pauseBtnCls))this.pauseSlideShow()},onAwardsWindowResize:function(ev){this._currentLayout=layoutManager.getCurrentLayout().split("-")[1];this.recalculateImageDimensions(this._currentLayout);this.setSliderArrowsPositions();if(ev)this.isWindowResized=true},setSliderArrowsPositions:function(){if(this._currentLayout==
"small")this.defaultNavValue="-120";else this.defaultNavValue=0;this._prevNavigationEl.setStyle("left",this.defaultNavValue+"px");this._nextNavigationEl.setStyle("right",this.defaultNavValue+"px")},onCarouselImageLoaded:function(ev,img){var preloadData=Ext.decode(Ext.get(img).next(this.preloadDataSel).dom.innerHTML);if(preloadData=="banned")return;var staticServer=preloadData["static"].replace("www.",""),src;var img2=new Image;img2.src=img.src;if(img2.width<10){src=staticServer+"/"+preloadData.fallback+
"?cno="+preloadData.cno;var img3=new Image;img3.src=src;Ext.get(img3).on("load",function(){if(img3.width<10){src=this._defaultImageUrl;img.src=src}},this);if(src)img.src=src}},_sendPerformerRequest:function(url,_listId,direction){if(this._maxImageCount==1)return;var paramObj={listId:_listId},self=this;Chaos.Ajax.request({type:"json",method:"post",url:Chaos.getUrl(url,paramObj,{},""),scope:this,params:paramObj,success:function(response){self.performerRequestSuccessCallback(response,direction)},error:function(err){console.error("Request failed.",
err)}})},performerRequestSuccessCallback:function(response,direction){this.newPerfTpl=new Ext.Template(response.json.data.content);this.newPerfTpl=this.newPerfTpl.applyTemplate();var removeEl;if(!this._panels[direction])this._panels=this.getPanels();if(direction=="prev"){removeEl=this._carouselContainerEl.dom.children[2];this._carouselContainerEl.dom.removeChild(removeEl);var firstPanelEl=this._carouselContainerEl.select("li").item(0);if(firstPanelEl)Ext.DomHelper.insertBefore(firstPanelEl,this.newPerfTpl,
true);else console.error("No first panel")}else{removeEl=this._carouselContainerEl.dom.children[0];this._carouselContainerEl.dom.removeChild(removeEl);Ext.DomHelper.append(this._carouselContainerEl,this.newPerfTpl,true)}},firstImagePreloadCheck:function(){var firstPanels=[],i=0;this._panels=this.getPanels();firstPanels.push(this._panels.prev.select("img").item(0));firstPanels.push(this._panels.current.select("img").item(0));firstPanels.push(this._panels.next.select("img").item(0));for(;i<firstPanels.length;i++)this.onCarouselImageLoaded(0,
firstPanels[i].dom)},moveNextBtnMouseOver:function(){var modifiedRight=this.defaultNavValue-this._settings.navPositionMod;TweenLite.to(this._nextNavigationEl.dom,this._settings.duration,{right:modifiedRight,autoAlpha:1})},moveNextBtnMouseOut:function(){var self=this;TweenLite.to(this._nextNavigationEl.dom,this._settings.duration,{right:self.defaultNavValue,autoAlpha:self._settings.opacity})},nextBtnDown:function(){var self=this;TweenLite.to(this._nextNavigationEl.dom,this._settings.duration/2,{top:self._settings.distance+
self._settings.navPositionMod})},prevBtnDown:function(){var self=this;TweenLite.to(this._prevNavigationEl.dom,this._settings.duration/2,{top:self._settings.distance+self._settings.navPositionMod})},nextBtnUp:function(){var self=this;TweenLite.to(this._nextNavigationEl.dom,this._settings.duration,{top:self._settings.distance})},prevBtnUp:function(){var self=this;TweenLite.to(this._prevNavigationEl.dom,this._settings.duration,{top:self._settings.distance})},playPauseButtonMouseEnter:function(){var el=
Ext.get(this._carouselSlideShowNavId);TweenLite.to(el.dom,this.settings.duration,{autoAlpha:1})},playPauseButtonMouseLeave:function(){var el=Ext.get(this._carouselSlideShowNavId),self=this;TweenLite.to(el.dom,this._settings.duration,{autoAlpha:self._settings.opacity})},movePrevBtnMouseOver:function(){var modifiedLeft=this.defaultNavValue-this._settings.navPositionMod;TweenLite.to(this._prevNavigationEl.dom,this._settings.duration,{left:modifiedLeft,autoAlpha:1})},movePrevBtnMouseOut:function(){var self=
this;TweenLite.to(this._prevNavigationEl.dom,this._settings.duration,{left:self.defaultNavValue,autoAlpha:self._settings.opacity})},bindEvents:function(){this._nextNavigationEl.on("click",this.onNextNavigationElClick,this).on("mouseover",this.moveNextBtnMouseOver,this).on("mouseout",this.moveNextBtnMouseOut,this).on("mousedown",this.nextBtnDown,this).on("mouseup",this.nextBtnUp,this);this._prevNavigationEl.on("click",this.onPrevNavigationElClick,this).on("mouseover",this.movePrevBtnMouseOver,this).on("mouseout",
this.movePrevBtnMouseOut,this).on("mousedown",this.prevBtnDown,this).on("mouseup",this.prevBtnUp,this);this._playPauseButtonContainer.on("mouseenter",this.playPauseButtonMouseEnter,this).on("mouseleave",this.playPauseButtonMouseLeave,this);this._carouselSlideShowNavEl.on("click",this.onCarouselSlideShowNavClick,this);this.element.on("mouseleave",this.onActiveCarouselThumbMouseLeave,this,{delegate:this.activePanelSel})},bind:function(){JSM.component.CarouselGallery.superclass.bind.call(this);Ext.fly(window).on("resize",
this.onAwardsWindowResize,this);Ext.select(this.carouselContainerId+" li img").on("load",this.onCarouselImageLoaded,this);Ext.getBody().on("click",this.onCarouselVoteBtnClick,this,{delegate:this.carouselVoteButtonSel}).on("keydown",this.onBodyKeyDown,this)},unbind:function(){JSM.component.CarouselGallery.superclass.unbind.call(this);Ext.fly(window).un("resize",this.onAwardsWindowResize,this);Ext.select(this.carouselContainerId+" li img").un("load",this.onCarouselImageLoaded,this);Ext.getBody().un("click",
this.onCarouselVoteBtnClick,this,{delegate:this.carouselVoteButtonSel}).un("keydown",this.onBodyKeyDown,this)}});Ext.namespace("JSM.component");JSM.component.CharacterCounter=function(el,config){JSM.component.CharacterCounter.superclass.constructor.call(this,el,config)};JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED="warning-limit-reached";JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED="max-char-limit-reached";JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING="warning-limit-falling";
Chaos.extend(JSM.component.CharacterCounter,Chaos.Object,{name:"CharacterCounter",maxChar:4E3,warningChar:undefined,maxCharText:undefined,warningCharText:undefined,hasWarningLimit:true,maxCharCallback:Chaos.emptyFn,warningCharCallback:Chaos.emptyFn,inputId:"message",counterId:"char_number",charInfoId:undefined,messageErrorId:"message_error",isShowCounter:true,maxCharSoundId:"max_char_sound",isMaxCharSound:false,computeMaxChar:false,_warningLimitReached:false,_maxCharLimitReached:false,_warningLimitFalling:false,
_warningLimitUp:false,_inputEl:undefined,_counterEl:undefined,init:function(el,config){this._inputEl=Ext.get(this.inputId);if(this.computeMaxChar)this.maxChar=parseInt(this._inputEl.dom.attributes.maxLength.value);JSM.component.CharacterCounter.superclass.init.call(this,el,config);this.addEvents(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING);this._refreshCounter(false)},
onCharCounterKeyup:function(){this._refreshCounter(true)},_refreshCounter:function(enableSound){this.charLeft=this.maxChar-this._inputEl.dom.value.length;if(this.isShowCounter)this._counterEl=Ext.get(this.counterId);this.checkCharNumber(enableSound);if(this.isShowCounter)if(this.charLeft>=0)this._counterEl.dom.innerHTML=this.charLeft;else this._counterEl.dom.innerHTML=0},checkCharNumber:function(enableSound){if(this.isWarningNeeded()){this.fireEvent(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,
this);this.warningCharCallback();this._warningLimitUp=true}else if(this.isMaxCharReached()){this._inputEl.dom.value=this._inputEl.dom.value.substr(0,this.maxChar);this.fireEvent(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,{scope:this,field:this._inputEl});this.maxCharCallback();if(this.isMaxCharSound&&enableSound)this.playAudio()}else{if(this._warningLimitUp){this.fireEvent(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING,{scope:this,field:this._inputEl});this._warningLimitUp=
false}this._warningLimitReached=false;this._maxCharLimitReached=false;this._warningLimitFalling=false;if(Ext.fly(this.charInfoId))Ext.fly(this.charInfoId).hide()}},isWarningNeeded:function(){return this.warningChar&&(this.charLeft<this.warningChar&&this.charLeft>0)&&this.hasWarningLimit},isMaxCharReached:function(){return this.charLeft<=0},preventDragAndDrop:function(e){e.preventDefault()},resetCounter:function(){if(this.isShowCounter)Ext.fly(this.counterId).dom.innerHTML=this.maxChar;this.charLeft=
this.maxChar;if(Ext.fly(this.charInfoId))Ext.fly(this.charInfoId).hide()},onInputFocus:function(ev){this.checkCharNumber(false)},onInputBlur:function(ev){if(Ext.fly(this.charInfoId))Ext.fly(this.charInfoId).hide()},playAudio:function(){this.removeAudioTag();this._audioEl=Ext.DomHelper.append(this.element.id,{tag:"audio",id:this.maxCharSoundId,preload:"auto",children:[{tag:"source",src:Chaos.Config.get("maxCharLimitMp3AudioUrl"),type:"audio/mpeg"},{tag:"source",src:Chaos.Config.get("maxCharLimitOggAudioUrl"),
type:"audio/ogg"}]},true);try{this._audioEl=Ext.get(this.maxCharSoundId);var audio=this._audioEl.dom;audio.play()}catch(e){}},removeAudioTag:function(){if(this._audioEl)this._audioEl.remove()},bind:function(){JSM.component.CharacterCounter.superclass.bind.call(this);this._inputEl.on({"keyup":{fn:this.onCharCounterKeyup,scope:this},"focus":{fn:this.onInputFocus,scope:this},"blur":{fn:this.onInputBlur,scope:this}});if(Ext.isChrome||Ext.isSafari)this._inputEl.on("dragover",this.preventDragAndDrop,this);
else this._inputEl.on("drop",this.preventDragAndDrop,this)},unbind:function(){JSM.component.CharacterCounter.superclass.unbind.call(this);this._inputEl.un({"keyup":{fn:this.onCharCounterKeyup,scope:this},"focus":{fn:this.onInputFocus,scope:this},"blur":{fn:this.onInputBlur,scope:this}});if(Ext.isChrome||Ext.isSafari)this._inputEl.un("dragover",this.preventDragAndDrop,this);else this._inputEl.un("drop",this.preventDragAndDrop,this);this.removeAudioTag()}});Ext.namespace("JSM.component");
JSM.component.ContentSlider=function(el,config){JSM.component.ContentSlider.superclass.constructor.call(this,el,config)};JSM.component.ContentSlider.EVENT_SHOW="contentslider-show";JSM.component.ContentSlider.EVENT_REFRESH="contentslider-refresh";JSM.component.ContentSlider.EVENT_PREV_BTN_CLICK="prev-button-click";JSM.component.ContentSlider.EVENT_NEXT_BTN_CLICK="next-button-click";
Chaos.extend(JSM.component.ContentSlider,Chaos.Object,{name:"ContentSlider",slides:undefined,newZIndex:1,slideWidth:640,duration:0.5,clsIndex:0,clsName:"img-",easing:"Expo.easeInOut",activeItemCls:"active",itemsToSlide:"div",forcedDisabledCls:"forcedDisabled",enableKeyboard:true,useArrayMode:false,_sliderEl:undefined,_prevBtnEl:undefined,_nextBtnEl:undefined,_prevMaskEl:undefined,_nextMaskEl:undefined,_current:0,_isSliderHovered:false,_isKeydownEnabled:true,_elementsArr:[],_elementsCount:0,_isTweening:false,
_activeTweens:0,_isNeededMoreImage:true,defaultElementsArrayLength:undefined,init:function(el,config){this.setSliderElements();this.addEvents(JSM.component.ContentSlider.EVENT_SHOW,JSM.component.ContentSlider.EVENT_PREV_BTN_CLICK,JSM.component.ContentSlider.EVENT_NEXT_BTN_CLICK);JSM.component.ContentSlider.superclass.init.call(this,el,config)},setSliderElements:function(){this._sliderEl=Ext.get(this.sliderId);this._prevBtnEl=Ext.get(this.prevBtnId);this._nextBtnEl=Ext.get(this.nextBtnId);if(this.nextMaskId){this._nextMaskEl=
Ext.get(this.nextMaskId);this._prevMaskEl=Ext.get(this.prevMaskId)}},onElementsChanged:function(data){this.setElementsArray(data)},onAddNextElem:function(imageParams){var _imageElementsLength,removeElem;if(imageParams.imageElem.dom){_imageElementsLength=this.slides.elements.length;this._elementsArr.push(imageParams.imageElem.dom);this._sliderEl.dom.appendChild(imageParams.imageElem.dom);this._elementsArr.slice(0,1);removeElem=this._sliderEl.dom.childNodes[0];this._sliderEl.dom.removeChild(removeElem);
this._elementsCount=this._elementsArr.length;this.slides=this._sliderEl.select(this.itemsToSlide);this.newZIndex=_imageElementsLength;this._current--}},onAddPrevElem:function(imageParams){var _imageElementsLength,removeElem;if(imageParams.imageElem.dom){_imageElementsLength=this.slides.elements.length;this._elementsArr.unshift(imageParams.imageElem.dom);this._sliderEl.dom.insertBefore(imageParams.imageElem.dom,this._sliderEl.dom.childNodes[0]);this._elementsArr.pop();removeElem=this._sliderEl.dom.childNodes[_imageElementsLength];
this._sliderEl.dom.removeChild(removeElem);this._elementsCount=this._elementsArr.length;this.slides=this._sliderEl.select(this.itemsToSlide);this.newZIndex=_imageElementsLength;this._current++}},setElementsArray:function(data){this._elementsArr=data.sliderElements;this._elementsCount=this._elementsArr.length;if(data.overlayJustOpened)this._current=parseInt(data.startElementIndex)},onElementsDeleted:function(data){this._elementsArr=data.elementsArr;this._elementsCount=this._elementsArr.length;var deletedIndex=
parseInt(data.deletedIndex);if(this._current>deletedIndex)this._current--;else if(this._current===deletedIndex)if(this._current!==0)this.current--;this.initSlider()},onMainSlideChanged:function(data){if(this._current!==parseInt(data.newIndex)){this._current=parseInt(data.newIndex);TweenMax.fromTo(data.sliderEl.dom,0.5,{css:{alpha:0,display:"none"}},{css:{alpha:1,display:"block"}})}},_isEnabledAnimate:function(){var _middleImageElem=Math.round(this.defaultElementsArrayLength/2)-1,_currentLength=this.slides.elements.length,
_isAnimate;try{_isAnimate=TweenMax.isTweening(this.slides.elements)}catch(e){}return!_isAnimate&&this._current==_middleImageElem||!_isAnimate&&_currentLength<this.defaultElementsArrayLength},onSliderPrevClick:function(ev,target){if(ev)ev.preventDefault();if(this._isEnabledAnimate()){if(this.slides.elements.length<this.defaultElementsArrayLength)this._isNeededMoreImage=false;var _nextRequestElem,currentItem,_prevElem,oldPrevCurrentItem;if(this._current===0){this._current=this.slides.elements.length-
1;_prevElem=0}else{this._current--;_prevElem=this._current+1}currentItem=this.slides.item(this._current);TweenMax.fromTo(currentItem.dom,this.duration,{css:{opacity:0,left:-this.slideWidth}},{css:{opacity:1,left:0},ease:this.easing,onStartScope:this,onStart:function(){this.setZIndex()},onCompleteScope:this,onComplete:function(){oldPrevCurrentItem=this.slides.item(_prevElem);this.fireEvent(JSM.component.ContentSlider.EVENT_PREV_BTN_CLICK,{slideDirection:"prev",currentItemId:oldPrevCurrentItem.id,isNeededMoreImage:this._isNeededMoreImage})}})}},
onSliderNextClick:function(ev,target){if(ev)ev.preventDefault();if(this._isEnabledAnimate()){if(this.slides.elements.length<this.defaultElementsArrayLength)this._isNeededMoreImage=false;var _nextRequestElem,currentItem,_prevElem,oldNextCurrentItem;if(this._current===this.slides.elements.length-1){this._current=0;_prevElem=this.slides.elements.length-1}else{this._current++;_prevElem=this._current-1}currentItem=this.slides.item(this._current);TweenMax.fromTo(currentItem.dom,this.duration,{css:{opacity:0,
right:-this.slideWidth}},{css:{opacity:1,right:0},ease:this.easing,onStartScope:this,onStart:function(){this.setZIndex()},onCompleteScope:this,onComplete:function(){oldNextCurrentItem=this.slides.item(_prevElem);this.fireEvent(JSM.component.ContentSlider.EVENT_NEXT_BTN_CLICK,{slideDirection:"next",currentItemId:oldNextCurrentItem.id,isNeededMoreImage:this._isNeededMoreImage})}})}},onSliderMouseOver:function(){this._isSliderHovered=true},onSliderMouseOut:function(){this._isSliderHovered=false},onSliderKeyDown:function(ev){if(this._isKeydownEnabled)switch(ev.keyCode){case 37:if(this.useArrayMode===
true)this.onSliderPrevClick_useArray();else this.onSliderPrevClick();break;case 39:if(this.useArrayMode===true)this.onSliderNextClick_useArray();else this.onSliderNextClick();break;default:break}},initSlider:function(){this._elementsCount=this._elementsArr.length;this._current=1;this.disableSlider();if(this.useArrayMode===false){this.slides=this._sliderEl.select(this.itemsToSlide);this.newZIndex=this.slides.elements.length}if(this._elementsCount>1)this.enableSlider();if(this.useArrayMode===true)if(this._elementsCount>
0){this.deleteSlides();this.setStartingSlide_useArray()}else this.deleteSlides();else this.setStartingSlide()},setStartingSlide:function(){var count=0;if(this.element.select("."+this.activeItemCls).item(0)!==null)for(var i=0;i<this.slides.elements.length;i++){if(this.slides.item(i).hasClass(this.activeItemCls))break;count++}this._current=count;this.setZIndex()},setZIndex:function(){this.slides.each(function(elem){var elemZIndex=elem.getStyle("zIndex");if(elemZIndex>0)elem.setStyle({zIndex:elemZIndex-
1})});this.slides.item(this._current).setStyle({zIndex:this.newZIndex})},setStartingSlide_useArray:function(){var currentEl=this._elementsArr[this._current];if(currentEl){currentEl.className=this.clsName+this.clsIndex;this._sliderEl.dom.appendChild(currentEl)}},deleteSlides:function(){this._sliderEl.dom.innerHTML=""},onSliderPrevClick_useArray:function(ev,target){var elementsCount=this._elementsArr.length-1;if(this._activeTweens<elementsCount){var prevItem=this.element.select("."+this.clsName+this.clsIndex).item(0);
if(this._current===0)this._current=elementsCount;else this._current--;this.clsIndex++;this._elementsArr[this._current].className=this.clsName+this.clsIndex;this._sliderEl.dom.appendChild(this._elementsArr[this._current]);var currentItem=this.element.select("."+this.clsName+this.clsIndex).item(0);if(prevItem!==null)TweenMax.fromTo(currentItem.dom,this.duration,{css:{alpha:0,right:this.slideWidth}},{css:{alpha:1,right:0},ease:this.easing,onStartScope:this,onStart:function(){this._activeTweens++},onCompleteScope:this,
onComplete:function(){if(prevItem!==null){this._activeTweens--;if(this._sliderEl.select(this.itemsToSlide).elements.length>1)prevItem.remove()}}})}},onSliderNextClick_useArray:function(ev,target){var elementsCount=this._elementsArr.length-1;if(this._activeTweens<elementsCount){var prevItem=this.element.select("."+this.clsName+this.clsIndex).item(0);if(this._current===elementsCount)this._current=0;else this._current++;this.clsIndex++;this._elementsArr[this._current].className=this.clsName+this.clsIndex;
this._sliderEl.dom.appendChild(this._elementsArr[this._current]);var currentItem=this.element.select("."+this.clsName+this.clsIndex).item(0);if(prevItem!==null)TweenMax.fromTo(currentItem.dom,this.duration,{css:{alpha:0,right:-this.slideWidth}},{css:{alpha:1,right:0},ease:this.easing,onStartScope:this,onStart:function(){this._activeTweens++},onCompleteScope:this,onComplete:function(){if(prevItem!==null){this._activeTweens--;if(this._sliderEl.select(this.itemsToSlide).elements.length>1)prevItem.remove()}}})}},
disableSlider:function(){this._prevBtnEl.addClass(this.forcedDisabledCls);this._nextBtnEl.addClass(this.forcedDisabledCls);if(this._prevMaskEl){this._nextMaskEl.addClass(this.forcedDisabledCls);this._prevMaskEl.addClass(this.forcedDisabledCls)}if(this.useArrayMode===true){if(this._prevBtnEl)this._prevBtnEl.un("click",this.onSliderPrevClick_useArray,this);if(this._prevMaskEl)this._prevMaskEl.un("click",this.onSliderPrevClick_useArray,this);if(this._nextBtnEl)this._nextBtnEl.un("click",this.onSliderNextClick_useArray,
this);if(this._nextMaskEl)this._nextMaskEl.un("click",this.onSliderNextClick_useArray,this)}else{if(this._prevBtnEl)this._prevBtnEl.un("click",this.onSliderPrevClick,this);if(this._prevMaskEl)this._prevMaskEl.un("click",this.onSliderPrevClick,this);if(this._nextBtnEl)this._nextBtnEl.un("click",this.onSliderNextClick,this);if(this._nextMaskEl)this._nextMaskEl.un("click",this.onSliderNextClick,this)}if(this.enableKeyboard){this.element.un("mouseover",this.onSliderMouseOver,this);this.element.un("mouseout",
this.onSliderMouseOut,this);Ext.getBody().un("keydown",this.onSliderKeyDown,this)}},enableSlider:function(){this._prevBtnEl.removeClass(this.forcedDisabledCls);this._nextBtnEl.removeClass(this.forcedDisabledCls);if(this._prevMaskEl){this._nextMaskEl.removeClass(this.forcedDisabledCls);this._prevMaskEl.removeClass(this.forcedDisabledCls)}if(this.useArrayMode===true){if(this._prevBtnEl)this._prevBtnEl.on("click",this.onSliderPrevClick_useArray,this);if(this._prevMaskEl)this._prevMaskEl.on("click",this.onSliderPrevClick_useArray,
this);if(this._nextBtnEl)this._nextBtnEl.on("click",this.onSliderNextClick_useArray,this);if(this._nextMaskEl)this._nextMaskEl.on("click",this.onSliderNextClick_useArray,this)}else{if(this._prevBtnEl)this._prevBtnEl.on("click",this.onSliderPrevClick,this);if(this._prevMaskEl)this._prevMaskEl.on("click",this.onSliderPrevClick,this);if(this._nextBtnEl)this._nextBtnEl.on("click",this.onSliderNextClick,this);if(this._nextMaskEl)this._nextMaskEl.on("click",this.onSliderNextClick,this)}if(this.enableKeyboard){this.element.on("mouseover",
this.onSliderMouseOver,this);this.element.on("mouseout",this.onSliderMouseOut,this);Ext.getBody().on("keydown",this.onSliderKeyDown,this)}},bind:function(){JSM.component.ContentSlider.superclass.bind.call(this)},unbind:function(){this.disableSlider();JSM.component.ContentSlider.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.Countdown=function(el,config){JSM.component.Countdown.superclass.constructor.call(this,el,config)};JSM.component.Countdown.EVENT_END="Countdown-end";
JSM.component.Countdown.EVENT_START="Countdown-start";JSM.component.Countdown.EVENT_STOP="Countdown-start";JSM.component.Countdown.EVENT_SECOND="Countdown-second";JSM.component.Countdown.EVENT_MINUTE="Countdown-minute";JSM.component.Countdown.EVENT_HOUR="Countdown-hour";JSM.component.Countdown.EVENT_DAY="Countdown-day";JSM.component.Countdown.EVENT_WEEK="Countdown-week";JSM.component.Countdown.EVENT_YEAR="Countdown-year";
Chaos.extend(JSM.component.Countdown,Chaos.Object,{name:"Countdown",timestamp:null,template:"[{y}] [{w}] [{d}] [{h}] [{m}] [{s}]",hideOnZero:["y","w"],dataSelector:"data-time",_timeObject:{y:0,w:0,d:0,h:0,m:0,s:0},_timePrevObject:undefined,_timerTask:undefined,_task:undefined,_targetElement:undefined,_tempstamp:null,_template:undefined,init:function(el,config){this.addEvents(JSM.component.Countdown.EVENT_START,JSM.component.Countdown.EVENT_END,JSM.component.Countdown.EVENT_STOP,JSM.component.Countdown.EVENT_SECOND,
JSM.component.Countdown.EVENT_MINUTE,JSM.component.Countdown.EVENT_HOUR,JSM.component.Countdown.EVENT_DAY,JSM.component.Countdown.EVENT_WEEK,JSM.component.Countdown.EVENT_YEAR);this._targetElement=el;this.getTimestamp();this.startTimer();JSM.component.Countdown.superclass.init.call(this,el,config)},startTimer:function(){this._timerTask=new Ext.util.TaskRunner;this._task={run:this.generate,interval:1E3,scope:this};this.start()},generate:function(){this._tempstamp=this.timestamp;if(this.template.indexOf("{y}")>=
0){this._timeObject.y=Math.floor(this._tempstamp/(60*60*24*365));this._tempstamp-=60*60*24*365*this._timeObject.y}if(this.template.indexOf("{w}")>=0){this._timeObject.w=Math.floor(this._tempstamp/(60*60*24*7));this._tempstamp-=60*60*24*7*this._timeObject.w}if(this.template.indexOf("{d}")>=0){this._timeObject.d=Math.floor(this._tempstamp/(60*60*24));this._tempstamp-=60*60*24*this._timeObject.d}this._timeObject.h=Math.floor(this.timestamp%(60*60*24)/(60*60));this._timeObject.m=Math.floor(this.timestamp%
(60*60*24)%(60*60)/60);this._timeObject.s=Math.floor(this.timestamp%(60*60*24)%(60*60)%60);this.callEvents();this.draw();this._timePrevObject=this._timeObject;this.timestamp--},getTimestamp:function(){this.timestamp=parseInt(this.timestamp||this._targetElement.getAttribute(this.dataSelector)||this._targetElement.dom.getAttribute(this.dataSelector))},draw:function(){var output=this.template;for(var i=0;i<this.hideOnZero.length;i++){if(this._timeObject[this.hideOnZero[i]]!==0)continue;var replaceString=
"{"+this.hideOnZero[i]+"}";output=this.template.replace(new RegExp("[[^[]*\\"+replaceString+".*?]","gm"),"")}output=output.replace(/\]/g,"").replace(/\[/g,"").replace("{y}",this._timeObject.y.toString()).replace("{w}",this._timeObject.w.toString()).replace("{d}",this._timeObject.d.toString()).replace("{h}",this._timeObject.h.toString()).replace("{m}",this._timeObject.m.toString()).replace("{s}",this._timeObject.s.toString());this._targetElement.dom.innerHTML=output},callEvents:function(){if(!this._timePrevObject)return;
var dataObject={timestamp:this._tempstamp,currentTimes:this._timeObject,prevTimes:this._timeObject};if(this._timeObject.y!==this._timePrevObject.y)this.fireEvent(JSM.component.Countdown.EVENT_YEAR,{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_YEAR);if(this._timeObject.w!==this._timePrevObject.w)this.fireEvent(JSM.component.Countdown.EVENT_WEEK,{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_WEEK);if(this._timeObject.d!==this._timePrevObject.d)this.fireEvent(JSM.component.Countdown.EVENT_DAY,
{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_DAY);if(this._timeObject.h!==this._timePrevObject.h)this.fireEvent(JSM.component.Countdown.EVENT_HOUR,{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_HOUR);if(this._timeObject.m!==this._timePrevObject.m)this.fireEvent(JSM.component.Countdown.EVENT_MINUTE,{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_MINUTE);if(this._timeObject.s!==this._timePrevObject.s)this.fireEvent(JSM.component.Countdown.EVENT_SECOND,
{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_SECOND);if(this._timeObject.y===0&&this._timeObject.w===0&&this._timeObject.d===0&&this._timeObject.h===0&&this._timeObject.m===0&&this._timeObject.s===0){this._timerTask.stop(this._task);this.fireEvent(JSM.component.Countdown.EVENT_END,{data:dataObject,scope:this.scope||this||window},JSM.component.Countdown.EVENT_END)}},start:function(){this._timerTask.start(this._task);this.fireEvent(JSM.component.Countdown.EVENT_START,
{timestamp:this._tempstamp,scope:this.scope||this||window},JSM.component.Countdown.EVENT_START)},stop:function(){this._timerTask.stop(this._task);this.fireEvent(JSM.component.Countdown.EVENT_STOP,{timestamp:this._tempstamp,scope:this.scope||this||window},JSM.component.Countdown.EVENT_STOP)},inArray:function(needle,haystack){for(var i=0;i<haystack.length;i++)if(haystack[i]==needle)return true;return false},bind:function(){JSM.component.Countdown.superclass.bind.call(this)},unbind:function(){JSM.component.Countdown.superclass.unbind.call(this)}});
Ext.namespace("JSM.component");JSM.component.ErrorLogHelper=function(){this.init(Ext.getBody(),{})};JSM.component.ErrorLogHelper.getInstance=function(){if(!(JSM.component.ErrorLogHelper.prototype.instance instanceof JSM.component.ErrorLogHelper))JSM.component.ErrorLogHelper.prototype.instance=new JSM.component.ErrorLogHelper;return JSM.component.ErrorLogHelper.prototype.instance};JSM.component.ErrorLogHelper_LEVEL_NOTICE="notice";JSM.component.ErrorLogHelper_LEVEL_WARNING="warning";
JSM.component.ErrorLogHelper_LEVEL_ERROR="error";JSM.component.ErrorLogHelper_HEADER_MESSAGE_DEFAULT="Default message: Unknown warning or error";JSM.component.ErrorLogHelper_DEFAULT_ERROR_TYPE="Error";JSM.component.ErrorLogHelper_RESULT_STATUS_ERROR=0;JSM.component.ErrorLogHelper_RESULT_STATUS_SUCCESS=1;
Chaos.extend(JSM.component.ErrorLogHelper,Chaos.Object,{name:"ErrorLogHelper",errorLogUrl:undefined,devNick:undefined,logFormParams:{formId:"bob_form",headerMessageInputId:"bob_header_message",levelInputId:"bob_level",detailsInputId:"bob_details"},iframeId:"bob_frame",errorLogEnabled:true,_defaultParams:undefined,_errorLogConfig:undefined,init:function(el,config){JSM.component.ErrorLogHelper.superclass.init.call(this,el,config);this.errorLogUrl=Chaos.Config.get("bobekUrlJasmin2frontend");window.onerror=
function(){return false};this._defaultParams={name:undefined,level:JSM.component.ErrorLogHelper_LEVEL_WARNING,headerMessage:JSM.component.ErrorLogHelper_HEADER_MESSAGE_DEFAULT,sessionId:Chaos.Cookie.get("session"),details:{"VARS":{}}};if(this.devNick&&JSM.Util.getEnv()=="dev")this._defaultParams.devNick=this.devNick},appError:function(exception,message,name,details,level){var errorType;if(exception instanceof Error)if(exception instanceof TypeError)errorType="TypeError";else if(exception instanceof
ReferenceError)errorType="ReferenceError";else if(exception instanceof EvalError)errorType="EvalError";else if(exception instanceof RangeError)errorType="RangeError";else if(exception instanceof SyntaxError)errorType="SyntaxError";else if(exception instanceof URIError)errorType="URIError";var _details=details||{},_nameSplit=exception.fileName.split(".js")[0].split("/"),_name=name||"JSM."+_nameSplit[_nameSplit.length-2]+"."+_nameSplit[_nameSplit.length-1];_details.host=location.host;JSM.component.ErrorLog._sendLog({name:errorType,
level:level||JSM.component.ErrorLogHelper_LEVEL_ERROR,headerMessage:message||errorType+": "+_name,filename:exception.fileName||"",line:exception.lineNumber||0,details:{"VARS":_details}})},exception:function(message,name,details,level){var _options={name:name,level:level||JSM.component.ErrorLogHelper_LEVEL_ERROR,headerMessage:name+" "+(level||JSM.component.ErrorLogHelper_LEVEL_ERROR)+": "+message,line:details.lineNumber||0,filename:details.fileName||""};if(typeof details=="object")_options.details=
{"VARS":details};JSM.component.ErrorLog._sendLog(_options)},handleApplicationError:function(errorMsg,errorUrl,lineNumber){if(!errorMsg.match("TypeError:")&&JSM.Util.getEnv()!="dev")this._sendLog({name:"APPLICATION",level:JSM.component.ErrorLogHelper_LEVEL_ERROR,headerMessage:errorMsg,errorUrl:errorUrl,line:lineNumber,filename:errorUrl,details:{"VARS":{host:location.host}}});return false},addErrorLogEvents:function(){var event,currentEvent,currentEventName;for(event in arguments){currentEventName=
arguments[event];currentEvent=Chaos.Broadcaster.events[currentEventName];if(currentEvent&&currentEvent.listeners[0].scope.name!=this.name||!currentEvent)Chaos.Broadcaster.on(currentEventName,this._commonEventHandler,this)}},_commonEventHandler:function(ev){var options=ev.options,errorLog=options.errorLog;if(errorLog)this._sendLog(errorLog)},getLogUrl:function(options){var _options,opt,queryString="?";_options=this._setParams(options);for(opt in _options)queryString+=opt+"="+options[opt]+"&";queryString=
queryString.substring(0,queryString.length-1);return this.errorLogUrl+queryString},_setParams:function(logParams){var _logParams;if(typeof logParams=="object"){_logParams=Ext.applyIf(logParams,this._defaultParams);if(typeof logParams.details=="object")logParams.details=Ext.util.JSON.encode(logParams.details);return _logParams}return this._defaultParams},_addHeaderMessagePrefix:function(params){var _prefix=("@"+params.name+"-"+params.level).toUpperCase();if(!params.headerMessage.match(_prefix))params.headerMessage=
_prefix+": "+params.headerMessage;return params},_sendLog:function(options){if(this.errorLogEnabled){options.node=Chaos.getMeta("node");options.details=this._setDefaultDetailsVars(options.details);options.url=this.getLogUrl(options);options.success=JSM.component.ErrorLogHelper._sendLogSuccess;options.error=JSM.component.ErrorLogHelper._sendLogError;options.scope=this;try{JSM.component.JsonP.request(options)}catch(exception){}}},_setDefaultDetailsVars:function(details){var _details=details||{VARS:{}};
if(typeof _details.VARS=="object"){_details.VARS.navigator=JSM.Util.getNavigatorInfo();_details.VARS.location=location.href;_details.VARS.clientIp=Chaos.Config.get("clientIp");_details.VARS.node=Chaos.getMeta("node");_details.VARS.hasFlash=JSM.util.Flash.getFlashVersion()!="0,0,0"&&JSM.util.Flash.getFlashVersion()!=false;_details.VARS.memberType=application.router.getUserType()||"guest";_details.VARS.session=Chaos.Cookie.get("session");_details.VARS.siteLanguage=Chaos.Cookie.get("site_lang");_details.VARS.category=
Chaos.Config.get("superCategory")}return _details},_sendLogSuccess:function(response){},_sendLogError:function(result){},_sendLogFailure:function(result){},__setPublicErrorTypes__:function(){var args=arguments,errorType,currentErrorType;for(errorType in args){currentErrorType=args[errorType];try{JSM.component.ErrorLog[currentErrorType].prototype=new Error;JSM.component.ErrorLog[currentErrorType].prototype.constructor=JSM.component.ErrorLog[currentErrorType];JSM[currentErrorType]=JSM.component.ErrorLog[currentErrorType]}catch(exception){}}}});
Ext.namespace("JSM.component");JSM.component.FirstBill=function(el,config){JSM.component.FirstBill.superclass.constructor.call(this,el,config)};JSM.component.FirstBill.EVENT_GET_SECURE_FRAME_SRC_SUCCESS="get-secure-frame-src-success";JSM.component.FirstBill.EVENT_IFRAME_READY="iframe-ready";JSM.component.FirstBill.EVENT_PAYMENT_PENDING="payment-pending";JSM.component.FirstBill.EVENT_PAYMENT_APPROVED="payment-approved";JSM.component.FirstBill.EVENT_PAYMENT_DECLINE="payment-decline";
JSM.component.FirstBill.EVENT_PAYMENT_STATUS_UNKNOWN="payment-unknown";JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK="get-decline-block";JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_SUCCESS="get-decline-block-success";JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_ERROR="get-decline-block-error";JSM.component.FirstBill.PAYMENT_STATUS_PENDING="pending";JSM.component.FirstBill.PAYMENT_STATUS_DECLINED="declined";JSM.component.FirstBill.PAYMENT_STATUS_APPROVED="approved";
JSM.component.FirstBill.PAYMENT_STATUS_UNKNOWN="unknown";
Ext.extend(JSM.component.FirstBill,Chaos.Object,{name:"FirstBill",getSecureFrameRoute:"FirstBillOverlay/GetIframeUrl",isIframeLoadedRoute:"FirstBillOverlay/IsIframeLoaded",getPaymentStatusRoute:"FirstBillOverlay/GetPurchaseStatus",getDeclinedBlockRoute:"FirstBillOverlay/GetDeclinedBlock",secureIframeCheckAjaxTimeout:5E3,maxIframeLoadCheckNumber:3,iframeLoadCheckRetryTimeout:1E3,checkPaymentTimeouts:{},startAutoCheck:false,storedToken:undefined,_selectedCreditValue:undefined,_iframeToken:undefined,
_temporaryToken:undefined,_iframeLoadCheckRetryCounter:0,_delayedIframeLoadCheckTask:undefined,_checkPaymentTimeouts:{standard:1E3,prolonged:3E4},_checkPaymentStatusDelayedTask:undefined,_setProlongedTimeoutToCheckPaymentStatusTask:undefined,_checkPaymentTimeout:undefined,init:function(el,config){JSM.component.FirstBill.superclass.init.call(this,el,config);this.addEvents(JSM.component.FirstBill.EVENT_SUBMIT_SUCCESS,JSM.component.FirstBill.EVENT_SUBMIT_ERROR,JSM.component.FirstBill.EVENT_SUBMIT_FAILURE,
JSM.component.FirstBill.EVENT_PAYMENT_PENDING,JSM.component.FirstBill.EVENT_PAYMENT_APPROVED,JSM.component.FirstBill.EVENT_PAYMENT_DECLINE,JSM.component.FirstBill.EVENT_PAYMENT_STATUS_UNKNOWN,JSM.component.FirstBill.EVENT_GET_SECURE_FRAME_SRC_SUCCESS,JSM.component.FirstBill.EVENT_IFRAME_READY,JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK,JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_SUCCESS,JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_ERROR);Ext.apply(this._checkPaymentTimeouts,this.checkPaymentTimeouts);
this._checkPaymentTimeout=this._checkPaymentTimeouts.standard;if(this.startAutoCheck){if(this.storedToken)this.setIframeToken(this.storedToken);this.startCheckPaymentStatus()}},setSelectedPackage:function(packageEl){if(packageEl&&packageEl instanceof Ext.Element)return this._setSelectedCreditValue(this._getCreditValueFromSelectedPackage(packageEl))},getSelectedCreditValue:function(){return this._selectedCreditValue},_getCreditValueFromSelectedPackage:function(packageEl){return packageEl.dom.rel},
_setSelectedCreditValue:function(selectedCreditValue){return this._selectedCreditValue=selectedCreditValue},getSecureFrameSrc:function(){Chaos.Ajax.request({method:"POST",type:"json",scope:this,url:this.getSecureFrameUrl(),success:this._getSecureFrameSrcSuccess,error:this._getSecureFrameSrcError,failure:this._getSecureFrameSrcFailure})},getSecureFrameUrl:function(){return Chaos.getUrl(this.getSecureFrameRoute,{},{selectedPackageId:this.getSelectedCreditValue()})},_getSecureFrameSrcSuccess:function(response){this._resetIframeLoadCheckRertyCounter();
this._temporaryToken=response.json.data.token;this.fireEvent(JSM.component.FirstBill.EVENT_GET_SECURE_FRAME_SRC_SUCCESS,{scope:this,response:response})},setIframeToken:function(token){this._iframeToken=token},getIframeToken:function(){return this._iframeToken},_getSecureFrameSrcError:function(response){this._redirectToSecurePage()},_getSecureFrameSrcFailure:function(response){this._redirectToSecurePage()},getCheckIframeAjaxUrl:function(){return Chaos.getUrl(this.isIframeLoadedRoute,{},{token:this._temporaryToken})},
checkIsIframeLoaded:function(){if(!(this._delayedIframeLoadCheckTask instanceof Ext.util.DelayedTask))this._delayedIframeLoadCheckTask=new Ext.util.DelayedTask(function(){this.checkIsIframeLoaded()},this);Chaos.Ajax.request({method:"POST",type:"json",scope:this,timeout:this.secureIframeCheckAjaxTimeout,url:this.getCheckIframeAjaxUrl(),params:{token:this._temporaryToken},success:this._isIframeLoadedSuccess,error:this._isIframeLoadedError,failure:this._isIframeLoadedFailure})},_isIframeLoadedSuccess:function(response){this._isIframeLoaded(response)},
_isIframeLoadedError:function(response){this._retryIframeLoadCheck()},_isIframeLoadedFailure:function(response){this._redirectToSecurePage()},_isIframeLoaded:function(response){if(!response.json.data.isLoaded)this._retryIframeLoadCheck();else this.fireEvent(JSM.component.FirstBill.EVENT_IFRAME_READY,{scope:this})},_retryIframeLoadCheck:function(){this._increaseIframeLoadCheckRetryCounter();if(this.getIframeLoadCheckRertyCounter()<this.maxIframeLoadCheckNumber){if(this._delayedIframeLoadCheckTask)this._delayedIframeLoadCheckTask.delay(this.iframeLoadCheckRetryTimeout)}else this._redirectToSecurePage()},
getIframeLoadCheckRertyCounter:function(){return this._iframeLoadCheckRetryCounter},_increaseIframeLoadCheckRetryCounter:function(){return this._iframeLoadCheckRetryCounter++},_resetIframeLoadCheckRertyCounter:function(){return this._iframeLoadCheckRetryCounter=0},_redirectToSecurePage:function(){location.href=Chaos.getUrl("Credit/Index",{},{redirect:1})},startCheckPaymentStatus:function(){if(!(this._checkPaymentStatusDelayedTask instanceof Ext.util.DelayedTask))this._checkPaymentStatusDelayedTask=
new Ext.util.DelayedTask(this.checkPaymentStatus,this);this._checkPaymentStatusDelayedTask.delay(this._checkPaymentTimeout);if(!(this._setProlongedTimeoutToCheckPaymentStatusTask instanceof Ext.util.DelayedTask)){this._setProlongedTimeoutToCheckPaymentStatusTask=new Ext.util.DelayedTask(function(){this._checkPaymentTimeout=this._checkPaymentTimeouts.prolonged},this);this._setProlongedTimeoutToCheckPaymentStatusTask.delay(this._checkPaymentTimeouts.prolonged)}},stopCheckPaymentStatus:function(){this._checkPaymentStatusDelayedTask.cancel();
delete this._checkPaymentStatusDelayedTask;this._setProlongedTimeoutToCheckPaymentStatusTask.cancel();delete this._setProlongedTimeoutToCheckPaymentStatusTask},_getCurrentCheckPaymentTimeout:function(){return this._checkPaymentTimeout},checkPaymentStatus:function(){Chaos.Ajax.request({method:"GET",type:"json",scope:this,url:this.getCheckPaymentStatusUrl(),success:this._checkPaymentStatusSuccess,error:this._checkPaymentStatusError,failure:this._checkPaymentStatusFailure})},getCheckPaymentStatusUrl:function(){return Chaos.getUrl(this.getPaymentStatusRoute,
{},{token:this.getIframeToken()})},getDeclinedBlock:function(params){Chaos.Ajax.request({method:"POST",type:"json",scope:this,url:this.getDeclinedBlockUrl(),params:params||{},success:this._getDeclinedBlockSuccess,error:this._getDeclinedBlockError,failure:this._getDeclinedBlockError});this.fireEvent(JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK,{scope:this})},getDeclinedBlockUrl:function(){return Chaos.getUrl(this.getDeclinedBlockRoute)},_getDeclinedBlockSuccess:function(response){this.fireEvent(JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_SUCCESS,
{scope:this,response:response})},_getDeclinedBlockError:function(response){this.fireEvent(JSM.component.FirstBill.EVENT_GET_DECLINE_BLOCK_ERROR,{scope:this,response:response})},_checkPaymentStatusSuccess:function(response){this._checkCurrentPaymentStatus(response)},_checkPaymentStatusError:function(response){},_checkPaymentStatusFailure:function(response){},_checkCurrentPaymentStatus:function(response){var status=response.json.data.status;switch(status){case JSM.component.FirstBill.PAYMENT_STATUS_APPROVED:this._manageStatusApproved(response);
break;case JSM.component.FirstBill.PAYMENT_STATUS_DECLINED:this._manageStatusDeclined(response);break;case JSM.component.FirstBill.PAYMENT_STATUS_UNKNOWN:this._manageStatusUnknown(response);break;case JSM.component.FirstBill.PAYMENT_STATUS_PENDING:default:this.fireEvent(JSM.component.FirstBill.EVENT_PAYMENT_PENDING,{scope:this});this._manageStatusPending(response);break}},_manageStatusApproved:function(response){this.fireEvent(JSM.component.FirstBill.EVENT_PAYMENT_APPROVED,{scope:this,response:response});
this.stopCheckPaymentStatus()},_manageStatusDeclined:function(response){this.fireEvent(JSM.component.FirstBill.EVENT_PAYMENT_DECLINE,{scope:this,response:response});this.stopCheckPaymentStatus()},_manageStatusPending:function(response){this.startCheckPaymentStatus()},_manageStatusUnknown:function(response){this.fireEvent(JSM.component.FirstBill.EVENT_PAYMENT_STATUS_UNKNOWN,{scope:this,response:response});this.stopCheckPaymentStatus()},bind:function(){JSM.component.FirstBill.superclass.bind.call(this)},
unbind:function(){JSM.component.FirstBill.superclass.unbind.call(this);delete this._delayedIframeLoadCheckTask}});Ext.namespace("JSM.component");JSM.component.GoogleAnalytics=function(el,config){JSM.component.GoogleAnalytics.superclass.constructor.call(this,el,config)};JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES="favorites-click";JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_SLIDER="favorites_slider";JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_FAVORITES="favorites_button";
JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_HISTORY="history_button";JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION="auction-click";JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_SLIDER="auction_slider";JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_RULES="auction_rules";JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_GETCREDITS="auction_getcredits";JSM.component.GoogleAnalytics.TRACK_TYPE_SORTER="sorter-click";JSM.component.GoogleAnalytics.TRACK_TYPE_SORTER_SLIDER="sorter_slider";
JSM.component.GoogleAnalytics.TRACK_TYPE_SIGNUP="sign_up_overlay_opened_from";JSM.component.GoogleAnalytics.TRACK_TYPE_LOGIN="login";JSM.component.GoogleAnalytics.TRACK_TYPE_CATEGORY="category";JSM.component.GoogleAnalytics.TRACK_TYPE_BANNER="listpage-banner-click";JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER="header-click";JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER_LOGOUT="logout-click";JSM.component.GoogleAnalytics.TRACK_TYPE_FOOTER="footer-click";
JSM.component.GoogleAnalytics.TRACK_TYPE_MEMBER="member";JSM.component.GoogleAnalytics.TRACK_TYPE_GUEST="guest";JSM.component.GoogleAnalytics.TRACK_TYPE_SEARCH="search";JSM.component.GoogleAnalytics.TRACK_TYPE_PURCHASEFAILED="purchase-failed";JSM.component.GoogleAnalytics.TRACK_TYPE_PURCHASESUCCESS="purchase-success";JSM.component.GoogleAnalytics.TRACK_TYPE_FILTERSEARCH="filter-search";JSM.component.GoogleAnalytics.TRACK_TYPE_TOPMODEL="topmodel";
JSM.component.GoogleAnalytics.TRACK_TYPE_TOPMODEL_STANDALONE="topmodel-standalone";JSM.component.GoogleAnalytics.TRACK_TYPE_PURCHASE="purchase";JSM.component.GoogleAnalytics.TRACK_TYPE_FAILED="failed";JSM.component.GoogleAnalytics.TRACK_TYPE_SUCCESS="success";JSM.component.GoogleAnalytics.TRACK_TYPE_PRIVATE="private";JSM.component.GoogleAnalytics.TRACK_TYPE_START="start";JSM.component.GoogleAnalytics.TRACK_TYPE_END="end";
Chaos.extend(JSM.component.GoogleAnalytics,Chaos.Object,{name:"GoogleAnalytics",init:function(el,config){if(Chaos.Cookie.get("analyticsTracking")){var event=Ext.decode(Chaos.Cookie.get("analyticsTracking"));this.track(event.category,event.event,event.label,event.value);Chaos.Cookie.remove("analyticsTracking","/")}this.track(JSM.component.GoogleAnalytics.TRACK_TYPE_CATEGORY,Chaos.Config.get("superCategory"),"",1);JSM.component.GoogleAnalytics.superclass.init.call(this,el,config)},track:function(category,
event,label,value){if(typeof _gaq!=="undefined")_gaq.push(["_trackEvent",category,event,label,value]);else if(typeof ga!=="undefined")ga("send","event",category,event,label,value,{"nonInteraction":1})},bind:function(){JSM.component.GoogleAnalytics.superclass.bind.call(this)},unbind:function(){JSM.component.GoogleAnalytics.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.ImageGallery=function(el,config){JSM.component.ImageGallery.superclass.constructor.call(this,el,config)};
JSM.component.ImageGallery.EVENT_GALLERY_IMAGES_INIT="gallery-images-init";JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_CHANGED="gallery-image-changed";JSM.component.ImageGallery.EVENT_GALLERY_CURRENT_COUNT_CHANGED="gallery-current-count-changed";JSM.component.ImageGallery.EVENT_GALLERY_MAX_COUNT_CHANGED="gallery-max-count-changed";JSM.component.ImageGallery.EVENT_GALLERY_HIDE="gallery-hide";JSM.component.ImageGallery.EVENT_GALLERY_SHOW="gallery-show";
JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR="gallery-image-list-error";JSM.component.ImageGallery.EVENT_GALLERY_ADD_NEXT_ELEMENT="gallery-add-next-element";JSM.component.ImageGallery.EVENT_GALLERY_ADD_PREV_ELEMENT="gallery-add-prev-element";
Chaos.extend(JSM.component.ImageGallery,Chaos.Object,{name:"ImageGallery",imageGalleryId:"overlay_image_gallery",imageGalleryContainerId:"image_gallery_container",imageGalleryBoxId:"image_gallery_box",closeButtonCls:"close_button",prevImageButtonId:"prev_image_button",nextImageButtonId:"next_image_button",navigationPrevMaskId:"navigation_prev_mask",navigationNextMaskId:"navigation_next_mask",getOpenGalleryUrl:"Gallery/OpenGallery",getGalleryImageUrl:"Gallery/GetImageData",activeCls:"active",imageBoxCls:"image_box",
padlockImageId:"padlock",_overlayJustOpened:true,_galleryImagesLinkArray:[],_galleryImagesIdArray:[],init:function(el,config){JSM.component.ImageGallery.superclass.init.call(this,el,config);this.addEvents(JSM.component.ImageGallery.EVENT_GALLERY_IMAGES_INIT,JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_CHANGED,JSM.component.ImageGallery.EVENT_GALLERY_CURRENT_COUNT_CHANGED,JSM.component.ImageGallery.EVENT_GALLERY_MAX_COUNT_CHANGED,JSM.component.ImageGallery.EVENT_GALLERY_HIDE,JSM.component.ImageGallery.EVENT_GALLERY_SHOW,
JSM.component.ImageGallery.EVENT_GALLERY_ADD_NEXT_ELEMENT,JSM.component.ImageGallery.EVENT_GALLERY_ADD_PREV_ELEMENT,JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR)},openImageGallery:function(){this._galleryImagesArrayRequest()},oneMoreImageRequest:function(requestParams){this.setSlideDirection(requestParams.slideDirection);this.setMiddleImageId(requestParams.currentItemId);this._gallerySingleImageRequest()},getSingleImageUrl:function(){return Chaos.getUrl(this.getGalleryImageUrl,{performerId:this.performerName,
imageId:this.getMiddleImageId(),direction:this.getSlideDirection()})},_gallerySingleImageRequest:function(){Chaos.Ajax.request({url:this.getSingleImageUrl(),scope:this,type:"json",success:this._gallerySingleImageRequestSuccess,error:this._gallerySingleImageRequestError,failure:this._gallerySingleImageRequestFailure})},_gallerySingleImageRequestSuccess:function(response){var _imageProperties={},_imageLink=response.json.data[0].link,_imageId=response.json.data[0].id,_imgBox,self=this;_imageProperties.imageLink=
_imageLink;_imageProperties.imageElem;if(_imageLink===""&&_imageId===this.padlockImageId){_imgBox=this._createPadlockImageBox(_imageId);_imageProperties.imageElem=_imgBox;this._selectSlideDirection(_imageProperties)}else{var img=new Image;img.src=_imageLink;_imgBox=this._wrapCurrentImage(img,_imageId);_imageProperties.imageElem=_imgBox;if(img.complete)this._selectSlideDirection(_imageProperties);else img.onload=function(){self._selectSlideDirection(_imageProperties)}}},_selectSlideDirection:function(imageProperties){if(this.getSlideDirection()===
"next")this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_ADD_NEXT_ELEMENT,{imageLink:imageProperties.imageLink,imageElem:imageProperties.imageElem});if(this.getSlideDirection()==="prev")this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_ADD_PREV_ELEMENT,{imageLink:imageProperties.imageLink,imageElem:imageProperties.imageElem})},_gallerySingleImageRequestError:function(response){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR,{scope:this})},_gallerySingleImageRequestFailure:function(response){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR,
{scope:this})},getImageArrayUrl:function(){return Chaos.getUrl(this.getOpenGalleryUrl,{performerId:this.performerName,imageId:this.clickedImageParentId})},_galleryImagesArrayRequest:function(){Chaos.Ajax.request({url:this.getImageArrayUrl(),scope:this,type:"json",success:this._galleryImagesArrayRequestSuccess,error:this._galleryImagesArrayRequestError,failure:this._galleryImagesArrayRequestFailure})},_galleryImagesArrayRequestSuccess:function(response){var _galleryImagesLinkArray=[],_galleryImagesIdArray=
[],_imageArrayLength,_middleImageElem,_imageArray=response.json.data.imageLinkArray,_maxImagesCount=response.json.data.maxImageCount;for(var i in _imageArray)if(_imageArray.hasOwnProperty(i)){_galleryImagesLinkArray.push({link:_imageArray[i].link});_galleryImagesIdArray.push(_imageArray[i].id)}_imageArrayLength=_imageArray.length;_middleImageElem=Math.round(_imageArrayLength/2)-1;this.setGalleryImagesLinkArray(_galleryImagesLinkArray);this.setGalleryImagesIdArray(_galleryImagesIdArray);this.setMaxImageCount(_maxImagesCount);
this.setMiddleImageId(_galleryImagesIdArray[_middleImageElem]);this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_MAX_COUNT_CHANGED,{maxImagesCount:this.getMaxImageCount(),scope:this});this.setCurrentImageCount(this.clickedImageCount);this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_CURRENT_COUNT_CHANGED,{currentImagesCount:this.getCurrentImageCount(),scope:this});this.setGalleryImages()},getLastDisplayedCount:function(){var _lastDisplayedCount=this.isDisplayedImageLessThanMaxImg?this.displayedImageNumber+
1:this.getMaxImageCount();return _lastDisplayedCount},_galleryImagesArrayRequestError:function(response){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR,{scope:this})},_galleryImagesArrayRequestFailure:function(response){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_LIST_ERROR,{scope:this})},incrementImageCounter:function(){this._incrementCurrentImageCount();this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_CURRENT_COUNT_CHANGED,{currentImagesCount:this.getCurrentImageCount(),
scope:this})},_incrementCurrentImageCount:function(){var imageCount=this.getCurrentImageCount();imageCount++;imageCount=imageCount===this.getLastDisplayedCount()+1?1:imageCount;this.setCurrentImageCount(imageCount)},decrementImageCounter:function(){this._decrementCurrentImageCount();this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_CURRENT_COUNT_CHANGED,{currentImagesCount:this.getCurrentImageCount(),scope:this})},_decrementCurrentImageCount:function(){var imageCount=this.getCurrentImageCount();
imageCount--;imageCount=imageCount===0?this.getLastDisplayedCount():imageCount;this.setCurrentImageCount(imageCount)},preloadImages:function(responseArr,elementsArr){var img,currentId,_imgBox,self=this,_galleryImagesArray=this.getGalleryImagesLinkArray(),_galleryImagesArrayLength=_galleryImagesArray.length;var _middleImageElem=Math.round(_galleryImagesArrayLength/2)-1;this.imageArrayLength=_galleryImagesArrayLength;for(var i=0;i<_galleryImagesArrayLength;i++){currentId=this.getGalleryImagesIdArray()[i];
if(responseArr[i]!=undefined){var img=new Image;img.onload=function(){self.imageArrayLength--;if(self.imageArrayLength<=0){self.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGE_CHANGED,{scope:self,sliderElements:elementsArr});self.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_IMAGES_INIT,{})}};img.src=responseArr[i];_imgBox=this._wrapCurrentImage(img,currentId);elementsArr[i]=_imgBox.dom;if(currentId===this.clickedImageParentId){_imgBox.addClass(this.activeCls);elementsArr[i]=_imgBox.dom}}else{this.imageArrayLength--;
_imgBox=this._createPadlockImageBox(currentId);elementsArr[i]=_imgBox.dom}}},_wrapCurrentImage:function(img,id){var _imgBox;_imgBox=Ext.DomHelper.append(this.imageGalleryBoxId,{id:id,tag:"div",cls:this.imageBoxCls,children:[{tag:"img",src:img.src}]},true);return _imgBox},_createPadlockImageBox:function(id){var _imgBox;_imgBox=Ext.DomHelper.append(this.imageGalleryBoxId,{id:id,tag:"div",cls:this.imageBoxCls,children:[{tag:"span",cls:this.lockIconCls},{tag:"span",cls:this.hiddenPicturesInfoCls,html:Chaos.translate(this.membersOnlyText)}]},
true);return _imgBox},setGalleryImages:function(){this._elementsArr=[];this._responseArr=[];var _galleryImagesArray=this.getGalleryImagesLinkArray(),counter=0;for(var current in _galleryImagesArray){var currentImage=_galleryImagesArray[current];if(currentImage.link)this._responseArr[current]=currentImage.link}if(_galleryImagesArray.length>0)this.preloadImages(this._responseArr,this._elementsArr)},galleryHide:function(){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_HIDE,this)},galleryShow:function(){this.fireEvent(JSM.component.ImageGallery.EVENT_GALLERY_SHOW,
this)},setMaxImageCount:function(imageMaxCount){this._maxImageCount=imageMaxCount},getMaxImageCount:function(){return this._maxImageCount},setCurrentImageCount:function(imageCount){this._currentImageCount=imageCount},getCurrentImageCount:function(){return this._currentImageCount},setGalleryImagesLinkArray:function(imagesLinkArray){this._galleryImagesLinkArray=imagesLinkArray},getGalleryImagesLinkArray:function(){return this._galleryImagesLinkArray},setGalleryImagesIdArray:function(imagesIdArray){this._galleryImagesIdArray=
imagesIdArray},getGalleryImagesIdArray:function(){return this._galleryImagesIdArray},setSlideDirection:function(slideDirection){this._slideDirection=slideDirection},getSlideDirection:function(){return this._slideDirection},setMiddleImageId:function(middleImageId){this._middleImageId=middleImageId},getMiddleImageId:function(){return this._middleImageId},bind:function(){JSM.component.ImageGallery.superclass.bind.call(this)},unbind:function(){JSM.component.ImageGallery.superclass.unbind.call(this)}});
Ext.namespace("JSM.component");JSM.component.ImageLoader=function(el,config){JSM.component.ImageLoader.superclass.constructor.call(this,el,config)};JSM.component.ImageLoader.EVENT_SECOND_BLOCK_LOADING="second-block-loading";JSM.component.ImageLoader.EVENT_THIRD_BLOCK_LOADING="third-block-loading";JSM.component.ImageLoader.EVENT_IMAGE_LOAD_ERROR="imageload-error";JSM.component.ImageLoader.EVENT_IMAGE_LOAD_READY="imageload-ready";
Chaos.extend(JSM.component.ImageLoader,Chaos.Object,{name:"imageloader",mainContainerId:"listpage",firstContainerId:"listpage_0",serverNumber:4,imgServer:["img0","img1","img2","img3"],imageDataSel:".image_data",duration:0.2,enableLoadNewBlock:true,isAnimationNeeded:true,imageBoxIdPrefix:"performer_",imageIdPrefix:"perfimg_",statusCls:"status",containerIdPrefix:"container_",_sectionCounter:0,_blockCounter:0,_durationDefault:undefined,_durationCache:undefined,_imageArray:[],_imageIndex:0,_failedServerNames:new Array,
init:function(el,config){this._durationDefault=this.duration;this._durationCache=this.duration+0.3;this.mainContainerEl=Ext.get(this.mainContainerId);this.addEvents(JSM.component.ImageLoader.EVENT_SECOND_BLOCK_LOADING,JSM.component.ImageLoader.EVENT_THIRD_BLOCK_LOADING,JSM.component.ImageLoader.EVENT_IMAGE_LOAD_ERROR,JSM.component.ImageLoader.EVENT_IMAGE_LOAD_READY);this.secondBlockEventFired=false;this.thirdBlockEventFired=false;this.allAninReadyEventFired=false;this.imageLoaderCalled=0;this.statuses=
["offline","free","private","members_only"],JSM.component.ImageLoader.superclass.init.call(this,el,config);var time=new Date;JSM.Util.console("info","listPageTest",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds(),"-> ImageLoader : Init done...")},getImgData:function(containerId,direction){var time=new Date;JSM.Util.console("info","listPageTest",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds(),"-> ImageLoader : Get IMG data");
if(containerId!=undefined&&containerId!=""&&Ext.fly(containerId)){this.imageLoaderCalled++;this.containerEl=Ext.get(containerId);this.allElementsLength=this.containerEl.select(this.imageDataSel).elements.length;this.downloaded=0;this._blockCounter=0;this.firstImageBlockEl=Ext.get(this.containerEl.down("div",1));if(this.firstImageBlockEl)this.imageBlockArray=this.firstImageBlockEl.getSibling("div");if(this.imageBlockArray==null){this.imageBlockArray=new Array;this.imageBlockArray.push(this.firstImageBlockEl)}else this.imageBlockArray.unshift(this.firstImageBlockEl);
if(typeof direction=="string"&&direction=="bottomUp")this.imageBlockArray.reverse();this.handleLoadingBlocks()}},handleLoadingBlocks:function(){if(this.imageBlockArray[this._blockCounter]){var _imageArrayFirstBlock=this.imageBlockArray[this._blockCounter].select(this.imageDataSel).elements.sort(this.randomSort);if(this._blockCounter<this.imageBlockArray.length-1){this._blockCounter++;var _imageArraySecondBlock=this.imageBlockArray[this._blockCounter].select(this.imageDataSel).elements.sort(this.randomSort);
var _imageArray=_imageArrayFirstBlock.concat(_imageArraySecondBlock)}else _imageArray=_imageArrayFirstBlock;this.animCounter=0;this.loadCurrentBlock(_imageArray)}},loadCurrentBlock:function(_imageArray){this._sectionCounter++;if(this.containerEl&&(this.containerEl.dom!=null||this.containerEl.dom!=undefined)){if(this.containerEl.dom.id==this.firstContainerId&&this._sectionCounter==2&&!this.secondBlockEventFired){this.secondBlockEventFired=true;this.fireEvent(JSM.component.ImageLoader.EVENT_SECOND_BLOCK_LOADING,
this)}if(this.containerEl.dom.id==this.firstContainerId&&this._sectionCounter==3&&!this.thirdBlockEventFired){this.thirdBlockEventFired=true;this.fireEvent(JSM.component.ImageLoader.EVENT_THIRD_BLOCK_LOADING,this)}if(this.containerEl.dom.id!=this.firstContainerId&&this._sectionCounter>=3&&!this.thirdBlockEventFired){this.thirdBlockEventFired=true;this.fireEvent(JSM.component.ImageLoader.EVENT_THIRD_BLOCK_LOADING,this)}}this.currentImagesLength=_imageArray.length;if(_imageArray.length>0)this.prepareImagesForDownload(_imageArray,
0)},getQueuedElements:function(){var queuedElements=this.mainContainerEl.select(this.imageDataSel).elements.reverse();return queuedElements},loadQueuedElements:function(){this.loadCurrentBlock(this.getQueuedElements())},prepareImagesForDownload:function(_imageArray,index){var self=this,imageData,newImage;if(index<_imageArray.length){imageData=Ext.decode(_imageArray[index].innerHTML);newImage=this.downloadImage(imageData.picture,this.createImageFromImageData(imageData));if(newImage.complete){this.duration=
this._durationCache;this.createImage(newImage,imageData.id,self)}else{this.duration=this._durationDefault;newImage.onload=function(){self.createImage(this,imageData.id,self)}}index++;self.prepareImagesForDownload(_imageArray,index);newImage.onerror=function(error){self.removeUnnecessaryTags(Ext.get(this.imageBoxIdPrefix+imageData.id));var perfLink=Ext.get(this.imageBoxIdPrefix+imageData.id),perfContainer=perfLink.parent("div"),size=perfContainer.dom.className.split(" ")[0],gravityCategory=perfLink.getAttribute("rev");
if(self.isSearchPage())newImage=self.createDefaultImage(this,imageData.id);else self.fireEvent(JSM.component.ImageLoader.EVENT_IMAGE_LOAD_ERROR,{id:this.id.split("_")[2],size:size,time:"0",gravityCategory:gravityCategory},this);if(self.isAnimationNeeded)self.showImageWithAnimation(Ext.get(this.containerIdPrefix+imageData.id));else self.showImageWithoutAnimation(Ext.get(this.containerIdPrefix+imageData.id))}}},createImageFromImageData:function(imageData){var newImg=new Image;newImg.id=imageData.imgId||
this.imageIdPrefix+imageData.pid+"_"+imageData.id;newImg.alt=imageData.pid+" | "+imageData.text;return newImg},createDefaultImage:function(imageObj,currentId){var currentPerformer=Ext.get(this.imageBoxIdPrefix+currentId);var defaultThumbSrc=this.getDefaultThumbNailSrc(this.getNewImageSize(currentPerformer));currentPerformer.createChild({tag:"img",id:imageObj.id,src:defaultThumbSrc,alt:imageObj.alt})},getNewImage:function(wrongImgObj,currentBlock){var currentId=currentBlock.id.split("_")[1];var requestPerformerUrl=
Chaos.getUrl("ListPageAjax/PerformersSwap",{listPageId:Chaos.getMeta("listPageId")},{},""),previousModel={id:wrongImgObj.img.id.split("_")[2],size:wrongImgObj.size};Chaos.Ajax.request({type:"json",url:requestPerformerUrl,method:"POST",scope:this,params:{performers:"["+Ext.encode(previousModel)+"]",swapped:""},success:function(response){var res=response.json.data,imgObj={},newImg,self=this,oldHref;for(var i in res){imgObj.id=res[i].pid+" | "+Chaos.translate("Free Live Sex Chat");imgObj.imgId=this.imageIdPrefix+
res[i].pid+"_"+res[i].id;newImg=this.downloadImage(this.setImgUrl(this.imgServer[0],res[i].img_url),this.createImageFromImageData(imgObj));newImg.onload=function(){self.createImage(this,currentId,self);currentBlock.id=this.imageBoxIdPrefix+res[i].id;currentBlock.dom.rel=res[i].tags;oldHref=currentBlock.dom.href;currentBlock.dom.href=oldHref.split(oldHref.split("/")[oldHref.split("/").length-1])[0]+res[i].pid;var currentParent=currentBlock.parent("div");currentParent.id=this.containerIdPrefix+res[i].id;
currentParent.dom.className=wrongImgObj.size+" "+self.statuses[res[i].status];if(currentBlock.select(this.statusCls))currentBlock.select("."+this.statusCls).remove();if(!currentBlock.first("img").id.match(res[i].pid))currentBlock.first("img").remove();if(res[i].favourite=="1")if(currentBlock.select(".add_favorite"))currentBlock.select(".add_favorite").addClass("myfavorite")}}this.sendSwappedIDForServer(previousModel.id,requestPerformerUrl)}})},sendSwappedIDForServer:function(id,url){var swapArray=
[];swapArray.push(id);Chaos.Ajax.request({type:"json",url:url,method:"POST",scope:this,params:{performers:"",swapped:Ext.encode(swapArray)},success:function(){},error:function(e){}})},getNewImageSize:function(currentPerformer){if(currentPerformer!=null)var imageSize=currentPerformer.parent("div").dom.className.split(" ")[0];else return null;return imageSize},getDefaultThumbNailSrc:function(size){switch(size){case "small":return Chaos.Config.get("newPerformerImageSmall");default:return Chaos.Config.get("newPerformerImageBig")}},
downloadImage:function(src,imageObject){var objImage=new Image;objImage.src=src;objImage.id=imageObject.id;objImage.alt=imageObject.alt;return objImage},setImgUrl:function(server,src){src="http://"+server+"."+src.slice(src.indexOf(".")+1);return src},removeUnnecessaryTags:function(currentPerformer){if(currentPerformer){if(currentPerformer.select(this.imageDataSel))currentPerformer.select(this.imageDataSel).remove();if(currentPerformer.select("noscript"))currentPerformer.select("noscript").remove()}},
createImage:function(currentImgObj,currentId,self){var currentPerformer=Ext.get(this.imageBoxIdPrefix+currentId);if(currentPerformer!=null&&currentPerformer.select("img").item(0)==null){this.removeUnnecessaryTags(currentPerformer);if(self.isDownloadSuccessful(currentImgObj)){currentPerformer.createChild({tag:"img",id:currentImgObj.id,src:currentImgObj.src,alt:currentImgObj.alt});if(self.isAnimationNeeded)self.showImageWithAnimation(Ext.get(self.containerIdPrefix+currentId));else self.showImageWithoutAnimation(Ext.get(self.containerIdPrefix+
currentId));this._failedServerNames=[]}else{var newServerName=self.getImgServer(this.getImgServerNameFromImageUrl(currentImgObj.src));if(typeof newServerName!="undefined"&&newServerName.match("img")){var reloadedImg=self.downloadImage(self.setImgUrl(newServerName,currentImgObj.src),currentImgObj);reloadedImg.onload=function(){self.createImage(this,currentId,self)}}else{this._failedServerNames=[];if(currentImgObj.src.match("tmbImage")){var newImg=this.tryAnotherImageSource(currentImgObj,currentPerformer);
newImg.onload=function(){if(!self.isDownloadSuccessful(this)){self.createDefaultImage(currentImgObj,currentId);if(!self.isSearchPage()){var wrongImgObj={};wrongImgObj.img=currentImgObj;wrongImgObj.size=currentPerformer.parent("div").dom.className.split(" ")[0];var gravityCategory=currentPerformer.getAttribute("rev");self.fireEvent(JSM.component.ImageLoader.EVENT_IMAGE_LOAD_ERROR,{id:this.id.split("_")[2],size:wrongImgObj.size,time:"0",gravityCategory:gravityCategory},this)}}else if(Ext.isIE)currentPerformer.createChild({tag:"img",
id:currentImgObj.id,src:this.src,alt:currentImgObj.alt,style:"filter:alpha(opacity=100)"});else currentPerformer.createChild({tag:"img",id:currentImgObj.id,src:this.src,alt:currentImgObj.alt})}}else if(this.isSearchPage())this.createDefaultImage(currentImgObj,currentId);else{var wrongImgObj={};wrongImgObj.img=currentImgObj;wrongImgObj.size=currentPerformer.parent("div").dom.className.split(" ")[0];var gravityCategory=currentPerformer.getAttribute("rev");self.fireEvent(JSM.component.ImageLoader.EVENT_IMAGE_LOAD_ERROR,
{id:this.id.split("_")[2],size:wrongImgObj.size,time:"0",gravityCategory:gravityCategory},this)}if(self.isAnimationNeeded)self.showImageWithAnimation(Ext.get(self.containerIdPrefix+currentId));else self.showImageWithoutAnimation(Ext.get(self.containerIdPrefix+currentId))}}}},tryAnotherImageSource:function(currentImgObj){var newImage,newSrc;newSrc=currentImgObj.src.split("tmbImage")[0]+"image.jpg";newImage=this.downloadImage(newSrc,currentImgObj);return newImage},reloadImageSrc:function(newSrc,imageEl){imageEl.dom.src=
newSrc},isDownloadSuccessful:function(newImage){if(newImage.width==2&&newImage.height==2)return false;else return true},showImageWithAnimation:function(el){var self=this;if(el.getStyle("opacity")==0||el.getStyle("filter")=="alpha(opacity=0)"){if(el.select("img").item(0))el.setStyle("background-image","url("+el.select("img").item(0).getAttribute("src")+")");if(Ext.isIE){el.select("img, .perf_link, .status, .status span:first-child").animate({opacity:{to:0.99,from:0}},this.duration,null,"easeNone",
"motion");el.select(".bg").animate({opacity:{to:0.5,from:0}},this.duration,null,"easeNone","motion");el.animate({opacity:{to:0.99,from:0}},this.duration,function(){this.dom.style.opacity=1;this.select(".badge").setStyle("display","block");self.showImageCallBack()},"easeNone","run")}else el.animate({opacity:{to:1,from:0}},this.duration,function(){self.showImageCallBack()},"easeNone","motion")}},showImageWithoutAnimation:function(el){el.setStyle({"opacity":1,"background-image":"url("+el.select("img").item(0).getAttribute("src")+
")"});this.showImageCallBack()},showImageCallBack:function(){this.animCounter++;this.downloaded++;if(this.imageLoaderCalled>=1&&this.downloaded==this.allElementsLength){if(!this.secondBlockEventFired){this.secondBlockEventFired=true;this.fireEvent(JSM.component.ImageLoader.EVENT_SECOND_BLOCK_LOADING,this)}if(!this.thirdBlockEventFired){this.thirdBlockEventFired=true;this.fireEvent(JSM.component.ImageLoader.EVENT_THIRD_BLOCK_LOADING,this)}}if(this.animCounter==this.currentImagesLength-2)if(this._blockCounter<
this.imageBlockArray.length-1){this._blockCounter++;this.handleLoadingBlocks()}else this.loadQueuedElements();if(this.downloaded==this.allElementsLength){var time=new Date;JSM.Util.console("info","listPageTest",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds(),"-> ImageLoader : All images loaded!");this.fireEvent(JSM.component.ImageLoader.EVENT_IMAGE_LOAD_READY,{scope:this})}},randomSort:function(){return parseInt(Math.random()*10)%2},isSearchPage:function(){if(Chaos.getMeta("isSearchPage")==
"1")return true;return false},getImgServerNameFromImageUrl:function(src){if(typeof src=="string")return src.split("://")[1].split(".")[0];return undefined},getImgServer:function(wrongServerIndex){this._failedServerNames.push(wrongServerIndex);var newServerIndex=this.getNewServerIndex();return newServerIndex},getNewServerIndex:function(){var tempArray=new Array,availableServers=new Array;for(var i=0;i<this.imgServer.length;i++)tempArray[this.imgServer[i]]=true;for(var j=0;j<this._failedServerNames.length;j++)if(tempArray[this._failedServerNames[j]])delete tempArray[this._failedServerNames[j]];
else tempArray[this._failedServerNames[j]]=true;for(var k in tempArray)availableServers.push(k);if(availableServers[availableServers.length-1]=="remove")availableServers.pop();if(availableServers.length>0){tempArray=[];var maxNum=availableServers.length;return availableServers[Math.floor(Math.random()*maxNum)]}else return undefined}});Ext.namespace("JSM.component");JSM.component.ListPagePlayer=function(el,config){JSM.component.ListPagePlayer.superclass.constructor.call(this,el,config)};
JSM.component.ListPagePlayer.EVENT_MOUSE_OUT="listpageplayer-stopped";JSM.component.ListPagePlayer.EVENT_MOUSE_OVER="listpageplayer-started";JSM.component.ListPagePlayer.EVENT_APPLET_CLICK="listpageplayer-click";
Chaos.extend(JSM.component.ListPagePlayer,Chaos.Object,{name:"ListPagePlayer",nodeId:undefined,fullScreen:false,flashObj:undefined,maxWidth:567,maxHeight:322,playerPosTop:0,playerPosLeft:0,defaultZIndex:100,listPagePlayerDivEl:undefined,backConContainerSel:"backconn_container",performerName:"",performerId:"",performerStatus:"",requestTask:undefined,isPlaying:false,fadeDuration:0.2,isPulsingEnabled:false,perfContainerSel:"container_",perfLinkSel:"performer_",perfImgSel:"perfimg_",perfImgBigClass:"big",
perfImgSmallClass:"small",freeClass:"free",offlineClass:"offline",hoverSel:"hover",noScriptSel:".image_data",showPlayerDelay:10,randomPlayerTask:undefined,isPlayerEnabled:true,isRandomPlayerEnabled:true,overlayId:"overlay",headerId:"header",isWindowHasFocus:true,indexPageId:"index.index",randomPerfBox:undefined,delayStopTask:undefined,loadDataObject:{},loadDataSel:".data",isNoStopStream:false,isMouseClick:false,autoPlayerNeeded:true,useBodyOffsetTop:false,commercialContainerCls:"commercial_container",
ieClickAreaId:"ie_clickarea",teaserUrlKey:"teaser_url",teaserThumbnailName:"thumbnail",isMouseOverWindow:true,perfImgCloneSel:"clone",awardsPageId:"awards",appletFlagPosition:"upperLeft",_flashPlayerConfig:{},_firstImgId:undefined,bodyId:undefined,init:function(el,config){JSM.component.ListPagePlayer.superclass.init.call(this,el,config);this.bodyId=Ext.getBody().id;if(Ext.isIE7){Ext.DomHelper.insertBefore(Ext.get(this.overlayId),{tag:"a",id:this.ieClickAreaId,href:"#",html:"&nbsp;"});Ext.fly(this.ieClickAreaId).on("click",
this.onIE7Click,this)}this._flashPlayerConfig={appendToId:undefined,objectId:undefined,objectName:undefined,url:undefined,flashVars:undefined};this.addEvents(JSM.component.ListPagePlayer.EVENT_APPLET_CLICK);this.createPlayer();this.startRandomPlayer();this.nodeId=Chaos.getMeta("node");JSM.Util.setGlobalMethods("lpp",["appletClick"],this)},appletClick:function(name,pid){this.fireEvent(JSM.component.ListPagePlayer.EVENT_APPLET_CLICK,{scope:this,name:name,id:pid})},onIE7Click:function(ev){ev.preventDefault();
this.fireEvent(JSM.component.ListPagePlayer.EVENT_APPLET_CLICK,{scope:this,name:this.performerName,id:this.performerId})},createPlayer:function(){Ext.apply(this._flashPlayerConfig,this.flashPlayerConfig);Ext.DomHelper.append(Ext.get(this._flashPlayerConfig.appendToId),{tag:"object",id:this._flashPlayerConfig.objectId,classid:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,115",width:"1",height:"1",type:"application/x-shockwave-flash",
html:'<param name="movie" value="'+this._flashPlayerConfig.url+'" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowFullscreen" value="true" />'+'<param name="scale" value="noscale" />'+'<param name="quality" value="high" />'+'<param name="wmode" value="transparent" />'+'<param name="menu" value="false" />'+'<param name="FlashVars" value="objectID='+this._flashPlayerConfig.objectId+"&"+this._flashPlayerConfig.flashVars+'" />'+'<embed src="'+this._flashPlayerConfig.url+'" FlashVars=objectID='+
this._flashPlayerConfig.objectId+'_embed&"'+this._flashPlayerConfig.flashVars+'" quality="high" bgcolor="#000000" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" id="'+this._flashPlayerConfig.objectId+'_embed" name="'+this._flashPlayerConfig.objectName+'" allowScriptAccess="always" allowFullscreen="true" scale="noscale" width="1" height="1" wmode="transparent"></embed>'},true);this.listPagePlayerDivEl=Ext.get(this._flashPlayerConfig.appendToId);this.flashObj=
Chaos.getFlashMovieObject(this._flashPlayerConfig.objectId)},startRandomPlayer:function(){this.stopRandomPlayer();if(this.autoPlayerNeeded&&this.element.select("."+this.hoverSel).getCount()==0)if(Ext.getBody().dom.id==this.indexPageId&&!parseInt(Chaos.getMeta("isSearchPage"))){this.firstRandomPlayerTask=new Ext.util.DelayedTask(this.setRandomPlayer,this,["first"]);this.randomPlayerTask=new Ext.util.DelayedTask(this.setRandomPlayer,this);this.firstRandomPlayerTask.delay(200)}else this.isRandomPlayerEnabled=
false},fixLinks:function(){Ext.get(this.ieClickAreaId).dom.href=Ext.get(this.perfLinkSel+this.performerId).dom.href},stopRandomPlayer:function(){if(this.firstRandomPlayerTask){this.firstRandomPlayerTask.cancel();this.firstRandomPlayerTask=undefined}if(this.randomPlayerTask){this.randomPlayerTask.cancel();this.randomPlayerTask=undefined}},setRandomPlayer:function(randomType){switch(randomType){case "first":this.checkIfFirstBigPicIsReady();break;default:this.showRandomPlayer();break}},checkIfFirstBigPicIsReady:function(){var firstBigThumb=
this.element.select("."+this.perfImgBigClass).item(0);if(firstBigThumb&&firstBigThumb.hasClass(this.commercialContainerCls)){this.showRandomPlayer();return false}if(firstBigThumb&&firstBigThumb.child("img")&&this._firstImgId!=firstBigThumb.child("img").id){this._firstImgId=firstBigThumb.child("img").id;this.showRandomPlayer(firstBigThumb)}else this.firstRandomPlayerTask.delay(200)},showRandomPlayer:function(el){if((this.isWindowHasFocus||!this.isWindowHasFocus&&this.isMouseOverWindow)&&this.isRandomPlayerEnabled&&
this.randomPlayerTask&&!Ext.fly(this.overlayId).isVisible()&&!parseInt(Chaos.getMeta("isSearchPage"))&&this.isPlayerEnabled){var perfArray=this.element.select("."+this.freeClass).elements,visPerfArray=[],perfBox=undefined,perfLink=undefined,perfImg=undefined,perfName=undefined,prevImg=undefined,self=this;if(perfArray.length==0){this.randomPlayerTask.cancel();this.randomPlayerTask.delay(3E3);return}else for(var i in perfArray)if(typeof perfArray[i]=="object")if(Chaos.Util.isFullyVisibleOnViewPort(Ext.get(perfArray[i])))visPerfArray.push(Ext.get(perfArray[i]).dom);
if(visPerfArray.length==0){this.randomPlayerTask.cancel();this.randomPlayerTask.delay(3E3);return}else{if(el==undefined)while(!perfBox)perfBox=Ext.get(visPerfArray[Math.floor(Math.random()*visPerfArray.length)]);else perfBox=el;perfLink=perfBox.child("a");perfImg=perfBox.child("img");if(perfImg)perfName=perfImg.id.split("_")[1]}if(perfName&&perfName!=this.performerName){this.randomPerfBox=perfBox;perfLink.addClass(this.hoverSel);prevImg=Ext.get(this.perfImgSel+this.performerName+"_"+this.performerId);
if(prevImg!=null){TweenLite.to(prevImg.dom,this.fadeDuration,{opacity:1,onCompleteScope:this,onComplete:function(){this.initListPagePlayer(perfBox,perfLink,perfImg,perfImg.id.split("_")[2])}});prevImg.parent("a").removeClass(this.hoverSel)}else this.initListPagePlayer(perfBox,perfLink,perfImg,perfImg.id.split("_")[2]);this.randomPlayerTask.cancel()}else{this.randomPlayerTask.cancel();this.randomPlayerTask.delay(300);return}}if(Ext.isIE7)this.fixLinks()},onThumbsMouseover:function(ev,linkTarget){this.perfLink=
Ext.get(linkTarget);if(this.perfLink&&this.isPlayerEnabled){var perfNumId=this.perfLink.id.split("_")[1],perfBox=Ext.get(this.perfContainerSel+perfNumId),perfImg=this.perfLink.child("img");if(this.delayStopTask!=undefined){this.delayStopTask.cancel();this.delayStopTask=undefined}this.element.select("."+this.hoverSel).removeClass(this.hoverSel);this.perfLink.addClass(this.hoverSel);if(this.isRandomPlayerEnabled&&this.randomPlayerTask&&this.randomPerfBox!=null){var randomPerformerId=this.randomPerfBox.id.split("_")[1],
targetPerformerId=perfNumId;this.randomPlayerTask.cancel();this.isRandomPlayerEnabled=false;if(randomPerformerId!=targetPerformerId){this.element.select("img").setOpacity(1);this.stopFlashStream()}}var time=new Date;JSM.Util.console("warn","forcePlayerConsole","onThumbsMouseover       : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());if(perfImg&&!this.isPlaying&&(perfImg.getStyle("opacity")==1||perfImg.getStyle("opacity")==0.99)){this.initListPagePlayer(perfBox,
this.perfLink,perfImg,perfNumId);this.overedPerfBox=perfBox}this.fireEvent(JSM.component.ListPagePlayer.EVENT_MOUSE_OVER,this);if(Ext.isIE7)this.fixLinks()}},initListPagePlayer:function(perfBox,perfLink,perfImg,perfNumId){var playerWidth=1,playerHeight=1,time=new Date;JSM.Util.console("warn","forcePlayerConsole","initListPagePlayer      : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());this.perfLink=perfLink;if(perfLink&&perfLink.hasClass(this.hoverSel)&&
this.listPagePlayerDivEl&&this.isPlayerEnabled){this.overedPerformerLink=perfLink;playerWidth=perfLink.getWidth();playerHeight=perfLink.getHeight();this.flashObj.width=playerWidth;this.flashObj.height=playerHeight;this.performerId=perfNumId;this.performerName=perfImg.dom.id.split("_")[1];this.performerStatus=perfBox.dom.className.split(" ")[1];this.playerPosTop=this.useBodyOffsetTop?perfBox.getTop()-JSM.Util.getScrollTop():perfBox.getTop();this.playerPosLeft=perfBox.getLeft();this.stopFlashStream();
if(Ext.isIE7){this.playerPosTop-=2;this.playerPosLeft-=2}this.listPagePlayerDivEl.setStyle({"z-index":this.defaultZIndex,"left":this.playerPosLeft+"px","top":this.playerPosTop+"px","width":playerWidth+"px","height":playerHeight+"px"});if(Ext.isIE7)Ext.get(this.ieClickAreaId).setStyle({"left":this.playerPosLeft+"px","top":this.playerPosTop+"px","width":this.widthX+"px","height":this.heightX+"px"});this.loadDataObject={};var dataEl=Ext.get(perfLink).select(this.loadDataSel).item(0);if(dataEl)this.loadDataObject=
Ext.decode(Ext.get(perfLink).select(this.loadDataSel).item(0).dom.innerHTML);this.requestTask=new Ext.util.DelayedTask(this.getListPagePlayerParams,this);this.requestTask.delay(200)}},getListPagePlayerParams:function(){if(this.isPlaying==false){this.isPlaying=true;var time=new Date;JSM.Util.console("warn","forcePlayerConsole","getConnectionParams     : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("warn","forcePlayerConsole","performerName           : ",
this.performerName);try{this.backConnPlugin.getConnectionParams(this.performerName,this.nodeId,"setListPagePlayerParams")}catch(exception){throw new JSM.exception(exception,this.name,new Error);}}},resetListPagePlayer:function(){if(!this.fullScreen&&this.flashObj){this.flashObj.width=1;this.flashObj.height=1;this.listPagePlayerDivEl.setStyle({"opacity":"0","left":"0","top":"0","width":"1px","height":"1px"});if(Ext.isSafari)this.listPagePlayerDivEl.setStyle({"opacity":"0.01"})}},setListPagePlayerParams:function(obj){var data=
Ext.decode(obj),time=new Date;JSM.Util.console("warn","forcePlayerConsole","setListPagePlayerParams : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("warn","forcePlayerConsole","params                  : ",data);for(var key in this.loadDataObject)if(key===this.teaserUrlKey){var teaserUrl=this.loadDataObject[key]||"";if(teaserUrl.indexOf(".flv")!==-1)if(this.element.select("."+this.hoverSel).item(0).parent("div").hasClass(this.perfImgSmallClass))data[key]=
teaserUrl.replace(".flv",this.teaserThumbnailName+".flv");else data[key]=this.loadDataObject[key]}else data[key]=this.loadDataObject[key]||"";if(this.performerName==data.performer_id&&this.isPlaying==true){data.teaser_type=data.teaser_type?data.teaser_type.toUpperCase():"";data.pid=this.performerId;data.perf_url=this.perfLink.dom.href;if(this.bodyId.indexOf(this.awardsPageId)!=-1)data.flag_position=this.appletFlagPosition;if(this.performerStatus==this.offlineClass&&data.teaser_duration=="")return false;
JSM.Util.console("warn","forcePlayerConsole","LPP.startPlay           : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());try{this.flashObj.startPlay(Ext.encode(data))}catch(e){}this.listPagePlayerDivEl.setOpacity(1);this.startFlashStream()}},stopFlashStream:function(){if(Ext.fly(this._flashPlayerConfig.appendToId))JSM.util.Flash.disconnectListPagePlayer(this._flashPlayerConfig.appendToId);if(Chaos.isDefined(this.requestTask)){this.requestTask.cancel();this.requestTask=
undefined}this.isPlaying=false;this.element.select("img").setOpacity(1)},startFlashStream:function(){var time=new Date;JSM.Util.console("warn","forcePlayerConsole","startFlashStream        : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());var perfLink=Ext.get(this.perfLinkSel+this.performerId),perfBox=Ext.get(this.perfContainerSel+this.performerId),self=this;if(perfLink!=null){var perfImg=Ext.get(perfLink.select("img").elements[0]);if(perfBox.select("."+this.perfImgCloneSel).elements.length==
0&&perfImg)perfBox.createChild({tag:"img",cls:this.perfImgCloneSel,src:perfImg.dom.src});perfImg.setOpacity(0);if(Ext.isIE10)perfImg.dom.style.opacity=0;if(self.isRandomPlayerEnabled&&self.randomPlayerTask){self.randomPlayerTask.cancel();self.randomPlayerTask.delay(self.showPlayerDelay*1E3)}}},onThumbsMouseout:function(ev){var perfLink=Ext.get(this.perfLinkSel+this.performerId),perfBox=Ext.get(this.perfContainerSel+this.performerId),perfBoxSize=perfBox?Ext.get(this.perfContainerSel+this.performerId).dom.className.split(" ")[0]:
0;this.overedPerformerLink=undefined;this.overedPerfBox=undefined;if(Ext.isIE7&&typeof ev!=="undefined"&&!ev.srcElement&&ev.type==="resize")return;if(perfLink!=null){if(this.isNoStopStream==false)this.stopFlashStream();try{this.element.select("."+this.perfImgCloneSel).remove()}catch(e){}this.element.select("."+this.hoverSel).removeClass(this.hoverSel);this.element.select("img").setOpacity(1);this.resetListPagePlayer();if((this.isWindowHasFocus||!this.isWindowHasFocus&&this.isMouseOverWindow)&&Ext.getBody().dom.id==
this.indexPageId&&!parseInt(Chaos.getMeta("isSearchPage"))&&this.randomPlayerTask){this.isRandomPlayerEnabled=true;this.randomPlayerTask.delay(1E3)}}this.fireEvent(JSM.component.ListPagePlayer.EVENT_MOUSE_OUT,this)},checkIfCurrentModelIsOffline:function(perfLink){if(this.overedPerformerLink!=undefined&&perfLink.item(0).id==this.overedPerformerLink.id)this.stopFlashStream()},onFocus:function(){if(this.isPlayerEnabled&&!this.isWindowHasFocus){var isStopStream=true;this.isWindowHasFocus=true;if(Ext.isIE8&&
this.isMouseClick==true||this.isNoStopStream==true)isStopStream=false;if(Ext.getBody().dom.id==this.indexPageId&&!parseInt(Chaos.getMeta("isSearchPage"))&&isStopStream==true){if(this.randomPlayerTask)this.randomPlayerTask.cancel();this.isRandomPlayerEnabled=true;this.resetListPagePlayer();this.stopFlashStream();this.showRandomPlayer()}}},onBlur:function(){var isStopStream=true;this.isWindowHasFocus=false;if(Ext.isIE8&&this.isMouseClick==true||this.isNoStopStream==true)isStopStream=false;if(isStopStream==
true){this.resetListPagePlayer();this.stopFlashStream()}if(Ext.getBody().dom.id==this.indexPageId&&!parseInt(Chaos.getMeta("isSearchPage"))){this.isRandomPlayerEnabled=false;if(this.randomPlayerTask)this.randomPlayerTask.cancel()}},onBrowserMouseover:function(e,t){if(Chaos.Util.checkMouseCrossedWindowBorder(e,t)){var perfNumId=t.id.split("_")[2],perfBox=Ext.get(this.perfContainerSel+perfNumId);this.isMouseOverWindow=true;if(Ext.getBody().dom.id==this.indexPageId&&!parseInt(Chaos.getMeta("isSearchPage"))&&
this.randomPlayerTask){this.isRandomPlayerEnabled=true;this.randomPlayerTask.delay(1E3)}}},onBrowserMouseout:function(e,t){if(Chaos.Util.checkMouseCrossedWindowBorder(e,t)){var perfLink=Ext.get(this.perfLinkSel+this.performerId);this.isMouseOverWindow=false;this.stopFlashStream();if(this.randomPlayerTask){this.randomPlayerTask.cancel();this.isRandomPlayerEnabled=false}this.overedPerformerLink=undefined;this.overedPerfBox=undefined;if(perfLink!=null){this.element.select("."+this.hoverSel).removeClass(this.hoverSel);
this.element.select("img").setOpacity(1);this.resetListPagePlayer()}}},onStopRandomPlayerScroll:function(){if(this.randomPerfBox!=undefined)if(!Chaos.Util.isFullyVisibleOnViewPort(this.randomPerfBox)&&this.overedPerfBox==this.randomPerfbox){this.resetListPagePlayer();this.stopFlashStream();if(this.randomPlayerTask){this.randomPlayerTask.cancel();this.randomPlayerTask.delay(1E3)}}},bind:function(){JSM.component.ListPagePlayer.superclass.bind.call(this);Ext.fly(this.overlayId).on("mouseover",this.onThumbsMouseout,
this);Ext.fly(window).on("resize",this.onThumbsMouseout,this);Ext.fly(window).on("blur",this.onThumbsMouseout,this);Ext.fly(document).on("mouseover",this.onBrowserMouseover,this);Ext.fly(document).on("mouseout",this.onBrowserMouseout,this);Ext.fly(window).on("scroll",this.onStopRandomPlayerScroll,this);if(Ext.isIE7||Ext.isIE8)Ext.fly(document).on({"focusin":this.onFocus,"focusout":this.onBlur,scope:this});else Ext.fly(window).on({"focus":this.onFocus,"blur":this.onBlur,scope:this})},unbind:function(){JSM.component.ListPagePlayer.superclass.unbind.call(this);
Ext.fly(this.overlayId).un("mouseover",this.onThumbsMouseout,this);Ext.fly(window).un("resize",this.onThumbsMouseout,this);Ext.fly(window).un("blur",this.onThumbsMouseout,this);Ext.fly(document).un("mouseover",this.onBrowserMouseover,this);Ext.fly(document).un("mouseout",this.onBrowserMouseout,this);Ext.fly(window).un("scroll",this.onStopRandomPlayerScroll,this);if(Ext.isIE7||Ext.isIE8)Ext.fly(document).un({"focusin":this.onFocus,"focusout":this.onBlur,scope:this});else Ext.fly(window).un({"focus":this.onFocus,
"blur":this.onBlur,scope:this});this.listPagePlayerDivEl.dom.innerHTML=""}});Ext.namespace("JSM.component");JSM.component.Lister=function(el,config){JSM.component.Lister.superclass.constructor.call(this,el,config)};JSM.component.Lister.DIRECTION_DOWN="down";JSM.component.Lister.DIRECTION_UP="up";JSM.component.Lister.INSERT_DOWN_DONE="insert-down-done";JSM.component.Lister.INSERT_UP_DONE="insert-up-done";JSM.component.Lister.REMOVE_BLOCK="remove-block";JSM.component.Lister.SHOW_MORE_ERROR="show-more-error";
JSM.component.Lister.META_IS_SINGLE_PAGE="isSinglePage";JSM.component.Lister.CONTENT_LOAD_ENABLED="0";JSM.component.Lister.CONTENT_LOAD_DISABLED="1";
Chaos.extend(JSM.component.Lister,Chaos.Object,{name:"Lister",containerBoxId:undefined,nextContentUrl:undefined,prevContentUrl:undefined,prevContentRouteParams:{},nextContentRouteParams:{},prevContentQueryParams:{},nextContentQueryParams:{},pageParamName:undefined,pageParamType:undefined,showMoreBtnId:"show_more_btn_container",showMoreBtnContainerSel:undefined,pageIdPrefix:"listpage_",pageCls:"page",pageHeight:undefined,currentContentId:0,showMoreDirection:JSM.component.Lister.DIRECTION_DOWN,enableDelete:true,
maxListPages:2,removedPagesFromTop:0,removedPagesFromBottom:0,bottomLoaderId:"loader_bottom",bottomLoaderEl:undefined,autoLoadNum:0,maxAutoLoadNum:2,currentPage:0,enableAjax:true,enableScrollUp:true,enableScrollDown:true,extraShowMore:0,enableExtraShowMore:false,callBackFn:undefined,buildFromJSONData:false,isScrollAfterRemove:false,init:function(el,config){window.scrollTo(0,0);this.tempScrollTop=0;this.pageHeight=this.getPageHeight();this.bottomLoaderEl=Ext.get(this.bottomLoaderId);this.isSinglePage=
Chaos.getMeta(JSM.component.Lister.META_IS_SINGLE_PAGE);this.showMoreBtnEl=Ext.get(this.showMoreBtnId);this.addEvents(JSM.component.Lister.INSERT_UP_DONE,JSM.component.Lister.INSERT_DOWN_DONE,JSM.component.Lister.REMOVE_BLOCK);this.urlObject={prev:{routeHandler:this.prevContentUrl,routeParams:this.prevContentRouteParams,queryParams:this.prevContentQueryParams},next:{routeHandler:this.nextContentUrl,routeParams:this.nextContentRouteParams,queryParams:this.nextContentQueryParams}};JSM.component.Lister.superclass.init.call(this,
el,config);this.ImageCheckerPlugin=this.plugins["ImageChecker-plugin"];if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+0)}catch(exception){console.error("@JS-ERROR: ",exception)}},getPageHeight:function(){return this.element.select("."+this.pageCls).item(0).getHeight()},resetCounters:function(){this.currentPage=0;this.currentContentId=0},onListScroll:function(){if(this.isSinglePage==0)if(!this.isScrollAfterRemove){this.currentScrollTop=JSM.Util.getScrollTop();
if(this.currentScrollTop>=this.tempScrollTop){this.showMoreDirection=JSM.component.Lister.DIRECTION_DOWN;if(this.currentScrollTop>this.getActivatePoint()&&this.enableScrollDown)if(this.autoLoadNum<this.maxAutoLoadNum||this.removedPagesFromBottom!=0){this.enableScrollDown=false;this.autoLoadNum++;this.onScrollDown()}}else{this.showMoreDirection=JSM.component.Lister.DIRECTION_UP;if(this.currentScrollTop==0&&this.enableScrollUp)if(this.removedPagesFromTop!=0){this.enableScrollUp=false;this.onScrollUp()}}this.tempScrollTop=
this.currentScrollTop}else this.isScrollAfterRemove=false},onScrollDown:function(){this.showMoreBtnEl.setStyle("display","none");this.bottomLoaderEl.setStyle("display","inline-block");if(Ext.fly(this.pageIdPrefix+(this.currentPage+1))==null)this.getContent(this.getUrl("next"),this.insertDown)},onScrollUp:function(){if(Ext.fly(this.pageIdPrefix+(this.currentPage-this.maxListPages))==null)this.getContent(this.getUrl("prev"),this.insertUp)},insertDown:function(response){if(response.json.success==true&&
response.json.data.isLast!=2&&(response.json.data.content.performers.length>0||response.json.data.content.performers!=null)){this.currentPage++;var lastPageBlock=this.element.select("."+this.pageCls+":last").item(0),newContent;if(this.buildFromJSONData){if(typeof this.plugins.ListPageBuilder!="undefined")newContent=this.plugins.ListPageBuilder.setBlocks(response.json.data)}else newContent=response.json.data.content;Ext.DomHelper.insertAfter(lastPageBlock,{id:this.pageIdPrefix+this.currentPage,cls:this.pageCls,
html:newContent});this.showMoreDirection=JSM.component.Lister.DIRECTION_DOWN;this.removePageIfNeeded();this.enableScrollUp=true;if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+this.currentPage)}catch(exception){console.error("@JS-ERROR: ",exception)}this.checkLastPage(response.json.data.isLast);this.fireEvent(JSM.component.Lister.INSERT_DOWN_DONE,{container:this.pageIdPrefix+this.currentPage});return Ext.get(this.pageIdPrefix+this.currentPage)}else{this.bottomLoaderEl.setStyle("display",
"none");this.showMoreBtnEl.setStyle("display","none");this.fireEvent(JSM.component.Lister.SHOW_MORE_ERROR,this)}return undefined},insertUp:function(response){var firstPageBlock=this.element.select("."+this.pageCls+":first").item(0),newContent;if(this.buildFromJSONData){if(typeof this.plugins.ListPageBuilder!="undefined")newContent=this.plugins.ListPageBuilder.setBlocks(response.json.data)}else newContent=response.json.data.content;var newAppendedBlock=Ext.DomHelper.insertBefore(firstPageBlock,{id:this.pageIdPrefix+
(this.currentPage-this.maxListPages),cls:this.pageCls,html:newContent},true);window.scrollTo(0,newAppendedBlock.getHeight());this.fireEvent(JSM.component.Lister.INSERT_UP_DONE,{container:this.pageIdPrefix+(this.currentPage-this.maxListPages)});if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+(this.currentPage-this.maxListPages))}catch(exception){console.error("@JS-ERROR: ",exception)}this.currentPage--;this.showMoreDirection=JSM.component.Lister.DIRECTION_UP;
this.removePageIfNeeded();this.enableScrollDown=true;this.checkLastPage(response.json.data.isLast)},getActivatePoint:function(){var pages=this.element.select("."+this.pageCls),pageCount=pages.getCount();return Math.round((pageCount-1)*this.pageHeight+this.pageHeight/3)},getContent:function(url,successCallback){if(typeof this.callBackFn=="function")successCallback=this.callBackFn;Chaos.Ajax.request({type:"json",url:url,scope:this,success:successCallback,error:function(){this.checkLastPage(true);this.fireEvent(JSM.component.Lister.SHOW_MORE_ERROR,
this)},failure:function(){this.checkLastPage(true);this.fireEvent(JSM.component.Lister.SHOW_MORE_ERROR,this)},method:"GET"})},getUrl:function(direction){var urlObj=this.urlObject[direction],queryParam=direction=="next"?this.currentPage+1:this.currentPage-this.maxListPages;if(this.pageParamType!=undefined&&this.pageParamName!=undefined){if(this.pageParamType=="query")urlObj.queryParams[this.pageParamName]=queryParam;if(this.pageParamType=="route")urlObj.routeParams[this.pageParamName]=queryParam}return Chaos.getUrl(urlObj.routeHandler,
urlObj.routeParams,urlObj.queryParams(),"")},onShowMoreClick:function(ev){ev.preventDefault();if(this.enableAjax){this.bottomLoaderEl.setStyle("display","inline-block");this.showMoreBtnEl.setStyle("display","none");this.showMoreDirection=JSM.component.Lister.DIRECTION_DOWN;this.getContent(this.getUrl("next"),this.insertDown);this.autoLoadNum=0}},removePageIfNeeded:function(){var pages=this.element.select("."+this.pageCls);if(pages.getCount()>this.maxListPages){this.isScrollAfterRemove=true;if(this.showMoreDirection==
JSM.component.Lister.DIRECTION_DOWN){this.fireEvent(JSM.component.Lister.REMOVE_BLOCK,{container:pages.item(0).dom.id});pages.item(0).remove();this.removedPagesFromTop++;if(this.removedPagesFromBottom>0)this.removedPagesFromBottom--;window.scrollTo(0,this.currentScrollTop-this.pageHeight)}else{this.fireEvent(JSM.component.Lister.REMOVE_BLOCK,{container:pages.item(pages.getCount()-1).dom.id});pages.item(pages.getCount()-1).remove();this.removedPagesFromTop--;this.removedPagesFromBottom++}this.tempScrollTop=
this.currentScrollTop-this.pageHeight}},enableLoadContent:function(enable){switch(this.showMoreDirection){case JSM.component.Lister.DIRECTION_UP:this.enableScrollUp=enable;break;case JSM.component.Lister.DIRECTION_DOWN:default:this.enableScrollDown=enable;break}},checkLastPage:function(isLast){this.bottomLoaderEl.setStyle("display","none");switch(isLast){case 0:this.showMoreBtnEl.setStyle("display","inline-block");this.enableLoadContent(true);break;case 1:this.enableLoadContent(false);this.showMoreBtnEl.setStyle("display",
"none");break;case 2:this.enableLoadContent(false);this.showMoreBtnEl.setStyle("display","none");this.fireEvent(JSM.component.Lister.SHOW_MORE_ERROR,this);break;default:this.showMoreBtnEl.setStyle("display","none");break}},onWindowResize:function(){this.pageHeight=this.getPageHeight()},bind:function(){if(this.containerBoxId){Ext.fly(this.containerBoxId).on("scroll",this.onListScroll,this);Ext.fly(this.containerBoxId).on("keydown",this.onListScroll,this)}else if(Ext.isIE8||Ext.isIE7){Ext.fly(window).on("scroll",
this.onListScroll,this);Ext.fly(window).on("keydown",this.onListScroll,this)}else{Ext.get(document).on("scroll",this.onListScroll,this);Ext.get(document).on("keydown",this.onListScroll,this)}Ext.fly(window).on("resize",this.onWindowResize,this);if(this.showMoreBtnEl!=null)this.showMoreBtnEl.on("click",this.onShowMoreClick,this);JSM.component.Lister.superclass.bind.call(this)},unbind:function(){if(this.containerBoxId){Ext.fly(this.containerBoxId).un("scroll",this.onListScroll,this);Ext.fly(this.containerBoxId).un("keydown",
this.onListScroll,this)}else if(Ext.isIE8||Ext.isIE7){Ext.fly(window).un("scroll",this.onListScroll,this);Ext.fly(window).un("keydown",this.onListScroll,this)}else{Ext.get(document).un("scroll",this.onListScroll,this);Ext.get(document).un("keydown",this.onListScroll,this)}Ext.fly(window).on("resize",this.onWindowResize,this);if(this.showMoreBtnEl!=null)this.showMoreBtnEl.un("click",this.onShowMoreClick,this);JSM.component.Lister.superclass.unbind.call(this)}});
JSM.component.ListerOld=function(el,config){JSM.component.ListerOld.superclass.constructor.call(this,el,config)};JSM.component.ListerOld.DIRECTION_DOWN="down";JSM.component.ListerOld.DIRECTION_UP="up";JSM.component.ListerOld.INSERT_DOWN_DONE="insert-down-done";JSM.component.ListerOld.INSERT_UP_DONE="insert-up-done";JSM.component.ListerOld.REMOVE_BLOCK="remove-block";JSM.component.ListerOld.SHOW_MORE_ERROR="show-more-error";JSM.component.ListerOld.META_IS_SINGLE_PAGE="isSinglePage";
JSM.component.ListerOld.CONTENT_LOAD_ENABLED="0";JSM.component.ListerOld.CONTENT_LOAD_DISABLED="1";
Chaos.extend(JSM.component.ListerOld,Chaos.Object,{name:"Lister",containerBoxId:undefined,nextContentUrl:undefined,prevContentUrl:undefined,prevContentRouteParams:{},nextContentRouteParams:{},prevContentQueryParams:{},nextContentQueryParams:{},pageParamName:undefined,pageParamType:undefined,showMoreBtnId:"show_more_btn_container",showMoreBtnContainerSel:undefined,contentId:"lister_",contentCls:undefined,currentContentId:0,showMoreDirection:JSM.component.ListerOld.DIRECTION_DOWN,enableDelete:true,
maxPages:3,loaderCls:undefined,distanceOfBottom:600,autoLoadNum:3,currentPage:0,enableAjax:true,enableScrollUp:true,enableScrollDown:true,maxLoadedPage:0,extraShowMore:0,enableExtraShowMore:false,init:function(el,config){window.scrollTo(0,0);this.isSinglePage=Chaos.getMeta(JSM.component.ListerOld.META_IS_SINGLE_PAGE);this.maxLoadedPage=this.maxPages-1;this.showMoreBtnEl=Ext.get(this.showMoreBtnId);if(this.contentCls==undefined)Ext.fly(this.contentId+this.currentContentId).addClass(this.getContentCls());
this.addEvents(JSM.component.ListerOld.INSERT_UP_DONE,JSM.component.ListerOld.INSERT_DOWN_DONE,JSM.component.ListerOld.REMOVE_BLOCK);this.urlObject={prev:{routeHandler:this.prevContentUrl,routeParams:this.prevContentRouteParams,queryParams:this.prevContentQueryParams},next:{routeHandler:this.nextContentUrl,routeParams:this.nextContentRouteParams,queryParams:this.nextContentQueryParams}};JSM.component.ListerOld.superclass.init.call(this,el,config)},getContentCls:function(){return this.contentCls=this.contentCls==
undefined?Chaos.generateId():this.contentCls},onCheckScrollDirection:function(){this.currentScrollTop=this.getScrollTop();this.containerHeight=Ext.get(this.element).getHeight();if(this.containerBoxId!=undefined)this.containerBoxHeight=Ext.get(this.containerBoxId).dom.clientHeight;else this.containerBoxHeight=Ext.isIE7||Ext.isIE8?document.documentElement.clientHeight:Ext.fly(window).dom.innerHeight;this.bottomActivate=this.containerHeight-this.containerBoxHeight-this.distanceOfBottom;if(this.tempScrollTop<
this.currentScrollTop&&this.currentScrollTop>=this.bottomActivate&&this.enableScrollDown){if(this.currentPage<this.maxPages-1&&this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN||this.currentPage>this.maxPages-1&&this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP||this.extraShowMore>0&&this.enableExtraShowMore||this.showMoreDirection=="down"&&this.showMoreBtnEl==null){this.enableScrollDown=false;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN)this.displayLoader("show",
this.showMoreBtnId);if(this.extraShowMore>0)--this.extraShowMore;else this.enableExtraShowMore=false;this.doScrollDown()}}else if(this.tempScrollTop>this.currentScrollTop&&this.currentScrollTop<=this.distanceOfBottom&&this.enableScrollUp)if(this.currentPage<this.maxPages-1&&this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP||this.currentPage>this.maxPages-1&&this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN||this.showMoreDirection=="up"&&this.showMoreBtnEl==null){this.enableScrollUp=
false;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP)this.displayLoader("show");this.doScrollUp()}this.tempScrollTop=this.currentScrollTop},doScrollDown:function(){if(this.enableDelete)this.removeTop();if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN){var nextContentId=this.currentPage+1;if(Ext.get(nextContentId)==null)this.getContent(this.getUrl("next"),this.insertDown)}else if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP&&this.enableDelete)this.getContent(this.getUrl("prev"),
this.insertDown);if(this.extraShowMore>0&&this.enableExtraShowMore);},doScrollUp:function(){if(this.enableDelete)this.removeBottom();if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP){var nextContentId=this.currentPage+1;if(Ext.get(nextContentId)==null)this.getContent(this.getUrl("next"),this.insertUp)}else if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN&&this.enableDelete){this.extraShowMore++;this.enableExtraShowMore=true;this.getContent(this.getUrl("prev"),this.insertUp)}},
getUrl:function(direction){var urlObj=this.urlObject[direction],queryParam=direction=="next"?this.currentPage+1:this.currentPage-this.maxPages;if(this.pageParamType!=undefined&&this.pageParamName!=undefined){if(this.pageParamType=="query")urlObj.queryParams[this.pageParamName]=queryParam;if(this.pageParamType=="route")urlObj.routeParams[this.pageParamName]=queryParam}return Chaos.getUrl(urlObj.routeHandler,urlObj.routeParams,urlObj.queryParams,"")},getScrollTop:function(){var currentScrollTop;if(this.containerBoxId==
undefined)if(document.documentElement&&document.documentElement.scrollTop)currentScrollTop=document.documentElement.scrollTop;else{if(document.body)currentScrollTop=document.body.scrollTop}else currentScrollTop=Ext.get(this.containerBoxId).dom.scrollTop;return currentScrollTop},displayLoader:function(display){if(this.showMoreBtnEl!=null)switch(display){case "show":this.displayShowMoreBtn("hide");Ext.DomHelper.insertAfter(this.showMoreBtnEl,{tag:"span",cls:this.loaderCls,html:"&nbsp;"});break;case "hide":var loader=
this.element.select("."+this.loaderCls);if(loader!=null)loader.remove();this.displayShowMoreBtn("show");break}else switch(display){case "show":this.element.select("."+this.loaderCls).setStyle("display","block");break;case "hide":this.element.select("."+this.loaderCls).setStyle("display","none");break}},onCheckShowMoreBtnOpt:function(ev){ev.preventDefault();if(this.enableAjax){this.maxLoadedPage++;this.displayLoader("show",this.showMoreBtnId);if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN){if(this.enableDelete)this.removeTop()}else if(this.enableDelete)this.removeBottom();
this.getContent(this.getUrl("next"),this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN?this.insertDown:this.insertUp)}},getContent:function(url,successCallback){if(this.isSinglePage==JSM.component.ListerOld.CONTENT_LOAD_ENABLED)Chaos.Ajax.request({type:"json",url:url,scope:this,success:successCallback,error:function(){this.onCheckIsLast(true);this.fireEvent(JSM.component.ListerOld.SHOW_MORE_ERROR,this)},failure:function(){this.onCheckIsLast(true);this.fireEvent(JSM.component.ListerOld.SHOW_MORE_ERROR,
this)},method:"GET"})},insertDown:function(response){this.currentContentId=0;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN)this.currentContentId=++this.currentPage;else{this.currentContentId=this.currentPage-this.maxPages;this.currentPage--}Ext.DomHelper.insertAfter(this.element.select("."+this.contentCls+":last").item(0),{id:this.contentId+this.currentContentId,cls:this.getContentCls(),html:response.json.data.content});this.onCheckIsLast(response.json.data.isLast);this.fireEvent(JSM.component.ListerOld.INSERT_DOWN_DONE,
{container:this.contentId+this.currentContentId});return Ext.get(this.contentId+this.currentContentId)},insertUp:function(response){if(this.enableDelete)this.removeBottom();this.currentContentId=0;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP)this.currentContentId=++this.currentPage;else{this.currentContentId=this.currentPage-this.maxPages;this.currentPage--}Ext.DomHelper.insertBefore(this.element.select("."+this.contentCls+":first").item(0),{id:this.contentId+this.currentContentId,
cls:this.getContentCls(),html:response.json.data.content});this.onCheckIsLast(response.json.data.isLast);var newPos=Ext.get(this.contentId+this.currentContentId).getHeight();if(this.containerBoxId!=undefined)Ext.get(this.containerBoxId).scrollTo("top",newPos);else window.scroll(0,newPos);this.fireEvent(JSM.component.ListerOld.INSERT_UP_DONE,{container:this.contentId+this.currentContentId})},removeContainer:function(id){this.fireEvent(JSM.component.ListerOld.REMOVE_BLOCK,{container:id});if(Ext.fly(id))Ext.fly(id).remove()},
removeTop:function(){var currentDomPages=this.element.select("."+this.contentCls).elements.length,removeContainerNum;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_UP)removeContainerNum=this.currentPage;else removeContainerNum=this.currentPage-(this.maxPages-1);if(currentDomPages>=this.maxPages)this.removeContainer(this.contentId+removeContainerNum)},removeBottom:function(){var currentDomPages=this.element.select("."+this.contentCls).elements.length;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN)var removeContainerNum=
this.currentPage;else var removeContainerNum=this.currentPage-(this.maxPages-1);if(currentDomPages>=this.maxPages)this.removeContainer(this.contentId+removeContainerNum)},onCheckIsLast:function(isLast){if(isLast==true){this.enableAjax=false;if(this.showMoreDirection==JSM.component.ListerOld.DIRECTION_DOWN){this.enableScrollUp=true;this.enableScrollDown=false}else{this.enableScrollUp=false;this.enableScrollDown=true}this.displayLoader("hide",this.showMoreBtnId);this.displayShowMoreBtn("hide");if(this.showMoreBtnContainerSel)this.element.select(this.showMoreBtnContainerSel).setDisplayed(false)}else if(isLast==
false){this.enableAjax=true;this.enableScrollUp=true;this.enableScrollDown=true;this.displayLoader("hide",this.showMoreBtnId)}else if(isLast==2){this.displayLoader("hide",this.showMoreBtnId);this.displayShowMoreBtn("hide");if(this.showMoreBtnContainerSel)this.element.select(this.showMoreBtnContainerSel).setDisplayed(false);this.fireEvent(JSM.component.ListerOld.SHOW_MORE_ERROR,this)}},displayShowMoreBtn:function(display){if(this.showMoreBtnEl!=null)switch(display){case "show":this.showMoreBtnEl.parent().show();
this.showMoreBtnEl.show();break;case "hide":this.showMoreBtnEl.setStyle("display","none");break}},resetLister:function(){this.enableScrollUp=true;this.enableScrollDown=true;this.currentPage=0},getOffset:function(){var firstPage=this.currentPage-this.maxPages;if(firstPage<0)firstPage=0;var lastPage=this.currentPage;return firstPage+"-"+lastPage},bind:function(){if(this.containerBoxId==undefined)if(Ext.isIE8||Ext.isIE7)this.doc=Ext.fly(window);else this.doc=Ext.get(document);else this.doc=Ext.get(this.containerBoxId);
if(this.doc!=null)this.doc.on({"scroll":{fn:this.onCheckScrollDirection,scope:this},"keydown":{fn:this.onCheckScrollDirection,scope:this}});if(this.showMoreBtnEl!=null)this.showMoreBtnEl.on("click",this.onCheckShowMoreBtnOpt,this);JSM.component.ListerOld.superclass.bind.call(this)},unbind:function(){this.doc.un("scroll",this.onCheckScrollDirection,this);this.doc.un("keydown",this.onCheckScrollDirection,this);if(this.showMoreBtnEl!=null)this.showMoreBtnEl.un("click",this.onCheckShowMoreBtnOpt,this);
JSM.component.ListerOld.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.MemberAuction=function(el,config){JSM.component.MemberAuction.superclass.constructor.call(this,el,config)};JSM.component.MemberAuction.PANEL_BEFORE_SHOW="auction-panel-before-show";JSM.component.MemberAuction.PANEL_SHOW="auction-panel-show";JSM.component.MemberAuction.PANEL_REOPEN="auction-panel-reopen";JSM.component.MemberAuction.PANEL_BEFORE_HIDE="auction-panel-before-hide";
JSM.component.MemberAuction.PANEL_HIDE="auction-panel-hide";JSM.component.MemberAuction.GETBLOCK_SUCCESS="getblock-success";JSM.component.MemberAuction.GETBLOCK_ERROR="getblock-error";JSM.component.MemberAuction.CONNECTION_READY="connection-ready";JSM.component.MemberAuction.CONNECTION_CLOSED="connection-closed";JSM.component.MemberAuction.STATUS_OPEN="auctionStart";JSM.component.MemberAuction.STATUS_IN_PROGRESS="auctionInProgress";JSM.component.MemberAuction.STATUS_END="auctionEnd";
JSM.component.MemberAuction.STATUS_CLOSED="closed";JSM.component.MemberAuction.EVENT_AUCTION_START="auction-start";JSM.component.MemberAuction.EVENT_AUCTION_IN_PROGRESS="auction-in-progress";JSM.component.MemberAuction.EVENT_AUCTION_END="auction-end";JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK="get-credits-click";JSM.component.MemberAuction.EVENT_GET_RULES_CLICK="get-rules-click";JSM.component.MemberAuction.EVENT_AUCTION_BUTTON_CLICK="auction-button-click";
JSM.component.MemberAuction.EVENT_AUCTION="auction-click";JSM.component.MemberAuction.EVENT_UNLOAD="window-unload";
Chaos.extend(JSM.component.MemberAuction,Chaos.Object,{name:"MemberAuction",memberAuctionBlockUrl:"Auction/GetMemberAuctionBlock",containerId:"memberauction_container",slideBlockId:"listpage",mainContainerId:"container",innerContainerId:"inner_container",memberAuctionContentId:"memberauction_content",getCreditsButtonId:"memberauction_buy_credits_button",getCreditsLinkId:"memberauction_buycredit_link",auctionBlockId:"auction_block",gameRulesLinkId:"memberauction_game_text",footerId:"footer",slideDuration:0.3,
buttonId:"auction_button",panelTopPosition:40,panelBlockBottomHeight:45,maskOpacity:0.9,defaultZIndex:1598,scrollBarUpdateDelay:300,_isConnected:false,_getCreditsButtonEl:undefined,_getCreditsLinkEl:undefined,_scrollbar:undefined,_auctionBlockEl:undefined,_gameRulesLinkEl:undefined,init:function(el,config){JSM.component.MemberAuction.superclass.init.call(this,el,config);this.addEvents(JSM.component.MemberAuction.PANEL_BEFORE_SHOW,JSM.component.MemberAuction.PANEL_SHOW,JSM.component.MemberAuction.PANEL_REOPEN,
JSM.component.MemberAuction.PANEL_BEFORE_HIDE,JSM.component.MemberAuction.PANEL_HIDE,JSM.component.MemberAuction.GETBLOCK_SUCCESS,JSM.component.MemberAuction.GETBLOCK_ERROR,JSM.component.MemberAuction.CONNECTION_READY,JSM.component.MemberAuction.CONNECTION_CLOSED,JSM.component.MemberAuction.EVENT_AUCTION_START,JSM.component.MemberAuction.EVENT_AUCTION_IN_PROGRESS,JSM.component.MemberAuction.EVENT_AUCTION_END,JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK,JSM.component.MemberAuction.EVENT_UNLOAD);
try{this._getBlock()}catch(exception){console.error("@JS-ERROR: ",exception)}JSM.Util.addUnloadEvent(this.onWindowUnload,this)},auctionStatus:function(status){if(status)switch(status){case JSM.component.MemberAuction.STATUS_OPEN:this.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION_START,{scope:this});break;case JSM.component.MemberAuction.STATUS_IN_PROGRESS:this.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION_IN_PROGRESS,{scope:this});break;case JSM.component.MemberAuction.STATUS_END:this.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION_END,
{scope:this});break;default:case JSM.component.MemberAuction.STATUS_CLOSED:break}},connectionInfo:function(online){if(online){this._isConnected=true;this.fireEvent(JSM.component.MemberAuction.CONNECTION_READY,{scope:this})}else{this._isConnected=false;this.fireEvent(JSM.component.MemberAuction.CONNECTION_CLOSED,{scope:this})}},isConnected:function(){return this._isConnected},emptyContent:function(){if(Ext.fly(this.containerId))Ext.fly(this.containerId).remove()},_getBlock:function(){try{var url=Chaos.getUrl(this.memberAuctionBlockUrl,
{},{},"")}catch(exception){}Chaos.Ajax.request({type:"json",method:"get",scope:this,url:url,success:this._getBlockSuccess,error:this._getBlockError,failure:this._getBlockFailure})},_getBlockSuccess:function(response){var _content=response.json.data.content;if(_content){Ext.DomHelper.append(this.auctionBlockId,{tag:"div",id:this.containerId,html:_content});if(response.json.data.appletParams){this._createSlidePanel();this.fireEvent(JSM.component.MemberAuction.GETBLOCK_SUCCESS,{scope:this,appletParams:response.json.data.appletParams})}else;
this._bindElements();this._auctionBlockEl=Ext.get(this.auctionBlockId)}},_getBlockError:function(response){this.fireEvent(JSM.component.MemberAuction.GETBLOCK_ERROR,{scope:this})},_getBlockFailure:function(response){this.fireEvent(JSM.component.MemberAuction.GETBLOCK_ERROR,{scope:this})},_createSlidePanel:function(){if(!(this._auctionPanel instanceof JSM.component.SlidePanel)){this._auctionPanel=new JSM.component.SlidePanel(this.element,{slideBlockContainerId:this.innerContainerId,slideBlockId:this.slideBlockId,
slideDuration:this.slideDuration,isFloating:true,buttonId:this.buttonId,defaultZIndex:1600,maskConfig:{appendTo:Ext.get(this.mainContainerId),isVisibleMask:true,defaultZindex:this.defaultZIndex,top:this.panelTopPosition,maskOpacity:this.maskOpacity,duration:this.slideDuration,insertionMethod:"append",position:"fixed"}});this._auctionPanel.on(JSM.component.SlidePanel.EVENT_BEFORE_SHOW,this.onAuctionPanelBeforeShow,this);this._auctionPanel.on(JSM.component.SlidePanel.EVENT_SHOW,this.onAuctionPanelShow,
this);this._auctionPanel.on(JSM.component.SlidePanel.EVENT_BEFORE_HIDE,this.onAuctionPanelBeforeHide,this);this._auctionPanel.on(JSM.component.SlidePanel.EVENT_HIDE,this.onAuctionPanelHide,this)}return this._auctionPanel},_setScrollBar:function(){if(!(this._scrollbar instanceof JSM.component.Scroller))try{this._scrollbar=new JSM.component.Scroller(this.auctionBlockId,{containerId:this.memberAuctionContentId,contentSel:"#"+this.containerId,useNativeScroll:!Ext.isIE,manageBackgroundScroll:true,bottomValue:0,
scrollBlockPosition:"relative",autoHideScrollBar:!Ext.isIE7})}catch(exception){console.error("@JS-ERROR: ",exception)}return this._scrollbar},_setBlockHeight:function(){if(this._auctionBlockEl){var footerEl=Ext.get(this.footerId),footerHeight=Chaos.Util.getVisibleSize(footerEl).height;if(footerHeight<0)footerHeight=0;this._auctionBlockEl.setHeight(Ext.getBody().getHeight()-this.panelTopPosition-this.panelBlockBottomHeight-footerHeight)}},onAuctionPanelBeforeShow:function(ev){this.fireEvent(JSM.component.MemberAuction.PANEL_BEFORE_SHOW,
{scope:this,ev:ev})},onAuctionPanelShow:function(ev){Chaos.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION,{action:JSM.component.MemberAuction.EVENT_AUCTION_BUTTON_CLICK});this.fireEvent(JSM.component.MemberAuction.PANEL_SHOW,{scope:this,ev:ev})},onAuctionPanelBeforeHide:function(ev){this.fireEvent(JSM.component.MemberAuction.PANEL_BEFORE_HIDE,{scope:this,ev:ev});this.disableScroll(false)},onAuctionPanelHide:function(ev){this.fireEvent(JSM.component.MemberAuction.PANEL_HIDE,{scope:this,ev:ev})},
disableScroll:function(disable){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL,{scope:this,disable:disable})},show:function(){if(this._auctionPanel){this._setBlockHeight();this._auctionPanel.show();this._setScrollBar()}this.disableScroll(true)},hide:function(callback,callbackScope){if(this._auctionPanel)this._auctionPanel.hide(callback,callbackScope);this.disableScroll(false)},reOpen:function(){this.fireEvent(JSM.component.MemberAuction.PANEL_REOPEN,{scope:this})},_bindElements:function(){this._getCreditsButtonEl=
Ext.get(this.getCreditsButtonId);this._getCreditsLinkEl=Ext.get(this.getCreditsLinkId);try{this._getCreditsButtonEl.on("click",this.onGetCreditsButtonClick,this);this._getCreditsLinkEl.on("click",this.onGetCreditsLinkClick,this)}catch(exception){console.error("@JS-ERROR: ",exception)}this._gameRulesLinkEl=Ext.get(this.gameRulesLinkId);this._gameRulesLinkEl.on("click",this.onGameRulesLinkClick,this)},onGameRulesLinkClick:function(){Chaos.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION,{action:JSM.component.MemberAuction.EVENT_GET_RULES_CLICK});
if(!(this._delayedScrollUpdater instanceof Ext.util.DelayedTask))this._delayedScrollUpdater=new Ext.util.DelayedTask(function(){try{this._scrollbar.setScrollBarHeight()}catch(exception){console.error("@JS-ERROR: ",exception)}},this);this._delayedScrollUpdater.delay(this.scrollBarUpdateDelay)},getPanel:function(){return this._auctionPanel},onGetCreditsButtonClick:function(ev){ev.preventDefault();Chaos.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION,{action:JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK});
this.fireEvent(JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK,{scope:this})},onGetCreditsLinkClick:function(ev){ev.preventDefault();Chaos.fireEvent(JSM.component.MemberAuction.EVENT_AUCTION,{action:JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK});this.fireEvent(JSM.component.MemberAuction.EVENT_GET_CREDITS_CLICK,{scope:this})},isVisible:function(){if(this._auctionPanel)return this._auctionPanel.isVisible();return false},onWindowUnload:function(){this.fireEvent(JSM.component.MemberAuction.EVENT_UNLOAD,
{scope:this})},onWindowResize:function(){this._setBlockHeight()},bind:function(){JSM.component.MemberAuction.superclass.bind.call(this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){JSM.component.MemberAuction.superclass.unbind.call(this);if(this._getCreditsButtonEl)this._getCreditsButtonEl.un("click",this.onGetCreditsButtonClick,this);if(this._getCreditsLinkEl)this._getCreditsLinkEl.un("click",this.onGetCreditsLinkClick,this);Ext.fly(window).un("resize",this.onWindowResize,
this);this._gameRulesLinkEl.un("click",this.onGameRulesLinkClick,this);if(this._auctionPanel){this._auctionPanel.un(JSM.component.SlidePanel.EVENT_BEFORE_SHOW,this.onAuctionPanelBeforeShow,this);this._auctionPanel.un(JSM.component.SlidePanel.EVENT_SHOW,this.onAuctionPanelShow,this);this._auctionPanel.un(JSM.component.SlidePanel.EVENT_BEFORE_HIDE,this.onAuctionPanelBeforeHide,this);this._auctionPanel.un(JSM.component.SlidePanel.EVENT_HIDE,this.onAuctionPanelHide,this)}}});Ext.namespace("JSM.component");
JSM.component.MessageConversation=function(el,config){JSM.component.MessageConversation.superclass.constructor.call(this,el,config)};JSM.component.MessageConversation.PRICE_TYPE_FREE="0";
JSM.component.MessageConversation.EVENT_SEND_MESSAGE_SUCCESS="send-message-success",JSM.component.MessageConversation.EVENT_SEND_MESSAGE_ERROR="send-message-error",JSM.component.MessageConversation.EVENT_SEND_MESSAGE_FAILURE="send-message-failure",Chaos.extend(JSM.component.MessageConversation,Chaos.Object,{name:"MessageConversation",replyMessageFormId:"reply_message_form",replyMessageInputId:"reply_message",blockHeight:undefined,replyToId:"reply_to",conversationRoute:"Messages/Conversation",conversationType:"model",
conversationListSel:".conversation_list",blockId:"overlay_container",messageBlockId:"overlay_message",overlayWarningTagClass:"bottom_warning_tag",charCounterId:"message_char_number",warningCharLimitNumber:2E3,maxCharLimitNumber:4E3,maxCharTextTranslate:undefined,warningCharTextTranslate:undefined,messageCharInfoBlockId:"message_char_info",infoBlockEl:undefined,messageErrorId:"message_error",conversationContainerId:"conversation_container",isLast:false,messageContSel:".message_container",threadIdSel:'input[name="threadId"]',
maskOpacity:0.3,messageInfoBlock:"message_info_block",isSupport:false,textFieldHeight:50,animateDuration:0.15,submitButtonId:"send_message",creditPriceNewId:"credit_price_new",_replyMessageInputEl:undefined,_conversationList:undefined,_conversationPage:0,_threadId:undefined,_isPageLoading:false,_firstMessageItemEl:undefined,_messageInfoBlockEl:undefined,_textFieldEnlarged:false,_price:undefined,_characterCounterCmp:undefined,init:function(el,config){this.maxCharTextTranslate=Chaos.translate("You&#39;ve reached the maximum length of this message<br />(4000 characters)."),
this.warningCharTextTranslate=Chaos.translate("You&#39;ve exceeded the maximum length of one message. If you continue writing, the price of two messages will be deducted.");this.setComponents();JSM.component.MessageConversation.superclass.init.call(this,el,config);this.addEvents(JSM.component.MessageConversation.EVENT_SEND_MESSAGE_SUCCESS,JSM.component.MessageConversation.EVENT_SEND_MESSAGE_ERROR,JSM.component.MessageConversation.EVENT_SEND_MESSAGE_FAILURE);this._inProgressMask=new Chaos.Mask(this.messageBlockId,
{top:0,left:0,maskOpacity:this.maskOpacity,isVisibleMask:true,useCursor:true,maskPosition:JSM.Util.isCurrentPage("messages.conversation")?"page":"local",appendTo:JSM.Util.isCurrentPage("messages.conversation")?Ext.getBody():Ext.get(this.messageBlockId),insertionMethod:"append"});this._threadId=this.element.select(this.threadIdSel).item(0).dom.value;this._messageInfoBlockEl=Ext.get(this.messageInfoBlock);this._price=Ext.get(this.creditPriceNewId).dom.innerHTML},setComponents:function(){this._replyMessageInputEl=
Ext.get(this.replyMessageInputId);this.infoBlockEl=Ext.get(this.messageCharInfoBlockId);this._conversationList=this.element.select(this.conversationListSel).item(0);try{this._scrollPane=new JSM.component.ScrollPane(this.conversationContainerId,{contentSel:this.conversationListSel,isSetHeight:true,isAutoHide:false,hideOnMouseout:false,scrollDelta:5,isAnimateScrollBar:false})}catch(exception){console.error("@JS-ERROR: ",exception)}if(this._scrollPane.isScrollNeeded()){this._scrollPane.scrollToBottom();
this._scrollPane.element.on("mousewheel",this.onConversationScroll,this)}this._characterCounterCmp=new JSM.component.CharacterCounter(this.replyMessageFormId,{maxChar:this.maxCharLimitNumber,warningChar:this.warningCharLimitNumber,inputId:this.replyMessageInputId,counterId:this.charCounterId,charInfoId:this.messageCharInfoBlockId,maxCharText:this.maxCharTextTranslate,warningCharText:this.warningCharTextTranslate,hasWarningLimit:!this.isSupport,isMaxCharSound:true});this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,
this.onWarningLimitReached,this);this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING,this.onWarningLimitFalling,this);this._conversationForm=new JSM.form.Form(this.replyMessageFormId,{scope:this,submitSel:"#"+this.submitButtonId,maskMode:"disabled",isAjax:true,handleToken:true,showHints:true,showErrorsOnEdit:false,showErrorsOnBlur:true,showErrorsOnSubmit:true,
showErrorsPos:"bottom",disableSubmitOnSubmit:true,success:this.onSendNewMessageSuccess,error:this.onSendNewMessageError,generalErrorSel:"."+this.overlayWarningTagClass,errorNodeClass:this.overlayWarningTagClass,useModalForGeneralErrors:false,rules:{}});this._conversationForm.on("submit",this.onSubmit,this);this._replyMessageInputEl.on("focus",this.onFocus,this).on("blur",this.onBlur,this)},onConversationScroll:function(){if(this._scrollPane.element.dom.scrollTop<10&&!this._isPageLoading){this._isPageLoading=
true;this._firstMessageItemEl=this.element.select(this.messageContSel).item(0);Chaos.Ajax.request({type:"json",method:"GET",url:Chaos.getUrl(this.conversationRoute,{threadId:this._threadId},{page:++this._conversationPage}),scope:this,success:this.pageLoadSuccess,error:function(){},failure:function(){}})}},pageLoadSuccess:function(response){if(response.json.success){var newBlock=Ext.DomHelper.insertBefore(this._firstMessageItemEl,{html:response.json.data.content},true);this._scrollPane.computeHeight();
this._scrollPane.element.dom.scrollTop=newBlock.getHeight();this._scrollPane.show();if(!response.json.data.isLast)this._isPageLoading=false}},onWarningLimitReached:function(){var actualCredit=Ext.get(this.creditPriceNewId).dom.innerHTML;this.infoBlockEl.dom.innerHTML='<div class="arrow">&nbsp;</div><span class="info_icon">&nbsp;</span><p>'+this.warningCharTextTranslate+"</p>";if(!this.infoBlockEl.isVisible())this.infoBlockEl.show();if(actualCredit!=JSM.component.MessageConversation.PRICE_TYPE_FREE)if(this._price==
actualCredit)Ext.get(this.creditPriceNewId).dom.innerHTML=2*actualCredit;if(Ext.fly(this.messageErrorId)!=null)Ext.fly(this.messageErrorId).hide()},onWarningLimitFalling:function(){var actualCredit=Ext.get(this.creditPriceNewId).dom.innerHTML;if(actualCredit!=JSM.component.MessageConversation.PRICE_TYPE_FREE)if(actualCredit==2*this._price)Ext.get(this.creditPriceNewId).dom.innerHTML=actualCredit/2},onMaxCharLimitReached:function(){this.infoBlockEl.dom.innerHTML='<div class="arrow">&nbsp;</div><span class="info_icon">&nbsp;</span><p>'+
this.maxCharTextTranslate+"</p>";if(!this.infoBlockEl.isVisible())this.infoBlockEl.show()},onFocus:function(ev,target){this.enlargeTextField(Ext.get(target),true,"focus");this.hideError();this.displayMessageInfo("block")},onBlur:function(ev,target){this.enlargeTextField(Ext.get(target),false,"blur");this.displayMessageInfo("none")},enlargeTextField:function(field,enlarge,callback){if(this._textFieldEnlarged!=enlarge){var fieldParent=field.parent("form"),self=this,value=enlarge?this.textFieldHeight:
-this.textFieldHeight;fieldParent.animate({height:{by:value,unit:"px"}},this.animateDuration,function(){self._textFieldEnlarged=enlarge});field.animate({height:{by:value,unit:"px"}},this.animateDuration,function(){if(callback)field[callback]()})}},hideError:function(){if(this._conversationForm)this._conversationForm.hideAllErrors()},displayMessageInfo:function(display){var _display=typeof display!="undefined"?display:"block";this._messageInfoBlockEl.setDisplayed(_display)},onSubmit:function(ev){this.displayMessageInfo("none");
if(this._inProgressMask)this._inProgressMask.show()},onSendNewMessageSuccess:function(id,response){if(this._inProgressMask)this._inProgressMask.hide();this._replyMessageInputEl.dom.value="";this._characterCounterCmp.resetCounter();if(response&&response.json.data.content&&response.json.success){var newMessage=response.json.data.content;Ext.DomHelper.append(this.element.select(this.conversationListSel).item(0),newMessage);this._scrollPane.element.dom.scrollTop=this._conversationList.getHeight();this._scrollPane.computeHeight();
this._scrollPane.show();this.fireEvent(JSM.component.MessageConversation.EVENT_SEND_MESSAGE_SUCCESS,{scope:this,response:response})}else this.onSendNewMessageError()},onSendNewMessageError:function(){if(this._inProgressMask)this._inProgressMask.hide()},bind:function(){JSM.component.MessageConversation.superclass.bind.call(this)},unbind:function(){JSM.component.MessageConversation.superclass.unbind.call(this);this.hideError();if(this._scrollPane){this._scrollPane.unbind();delete this._scrollPane}if(this._conversationForm){this._conversationForm.un("submit",
this.onSubmit,this);this._conversationForm.unbind();delete this._conversationForm}if(this._characterCounterCmp){this._characterCounterCmp.un(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,this.onWarningLimitReached,this);this._characterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);this._characterCounterCmp.unbind();delete this._characterCounterCmp}if(this._inProgressMask)this._inProgressMask.hide();if(this._replyMessageInputEl)this._replyMessageInputEl.un("focus",
this.onFocus,this).un("blur",this.onBlur,this)}});Ext.namespace("JSM.component.MessageSupport");JSM.component.MessageSupport=function(el,config){JSM.component.MessageSupport.superclass.constructor.call(this,el,config)};JSM.component.MessageSupport.EVENT_SEND_MESSAGE_SUCCESS="send-message-success";
Chaos.extend(JSM.component.MessageSupport,Chaos.Object,{name:"MessageSupport",newMessageFormId:"message_form",subjectSelectId:"subject_select",warningTagClass:"warning_tag",messageCharInfoBlockId:"message_char_info",inputId:"support_message",isOverlay:false,mainBlockId:"overlay_container",messageBlockId:"overlay_message",maxCharLimitNumber:4E3,maxCharTextTranslate:undefined,counterId:"message_char_number",messageBackLinkId:"message_back",_infoBlockEl:undefined,_characterCounterCmp:undefined,init:function(el,
config){this._inProgressMask=new Chaos.Mask(this.messageBlockId,{top:0,left:0,maskOpacity:0.3,isVisibleMask:true,useCursor:true,appendTo:JSM.Util.isCurrentPage("messages.newsupportmessage")?Ext.getBody():Ext.get(this.messageBlockId),maskPosition:JSM.Util.isCurrentPage("messages.newsupportmessage")?"page":"local",insertionMethod:"append"});this.addEvents(JSM.component.MessageSupport.EVENT_SEND_MESSAGE_SUCCESS);this.setComponents();JSM.component.MessageSupport.superclass.init.call(this,el,config);this.maxCharTextTranslate=
Chaos.translate("You&#39;ve reached the maximum length of this message<br />("+this.maxCharLimitNumber+" characters).");this.maxCharTextMessage='<span class="arrow">&nbsp;</span><span class="info_icon">&nbsp;</span><p>'+this.maxCharTextTranslate+"</p>";this._infoBlockEl=Ext.get(this.messageCharInfoBlockId)},setComponents:function(){this._selectList=new JSM.component.SelectList(this.subjectSelectId,{inputSel:".select",hiddenInputSel:"input[name=subject_selected]",listItemSel:".select_link",pageId:this.element,
hasMoreList:true,scrollPaneContainerId:"subject_options"});this._newMessageForm=new JSM.form.Form(this.newMessageFormId,{scope:this,submitSel:"#send_message",maskMode:"disabled",isAjax:true,handleToken:true,showHints:true,showErrorsOnEdit:false,showErrorsOnBlur:false,showErrorsOnSubmit:true,disableSubmitOnSubmit:true,success:this.onSendNewMessageSuccess,error:this.onSendNewMessageError,isDisabledOnEnter:true,generalErrorSel:".error_text",errorNodeClass:this.warningTagClass,cssClass:this.warningTagClass,
useModalForGeneralErrors:true,rules:{}});this._inputValue=Ext.get(this.newMessageFormId).select("input[type=text]").item(0).dom.value;this._characterCounterCmp=new JSM.component.CharacterCounter(this.newMessageFormId,{inputId:this.inputId,counterId:this.counterId,maxChar:this.maxCharLimitNumber,hasWarningLimit:false,maxCharText:this.maxCharTextTranslate,charInfoId:this.messageCharInfoBlockId,isMaxCharSound:true});this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxCharLimitReached,this);this._newMessageForm.on("submit",this.onSubmit,this)},onSubmit:function(ev){if(this._inProgressMask)this._inProgressMask.show()},hideError:function(){Ext.getBody().select("."+this.warningTagClass).remove()},onSendNewMessageSuccess:function(id,response){if(this._inProgressMask)this._inProgressMask.hide();if(this.isOverlay)this.fireEvent(JSM.component.MessageSupport.EVENT_SEND_MESSAGE_SUCCESS,{scope:this,response:response});else{var redirectUrl=response.json.data.redirectUrl;
if(redirectUrl)window.location.href=redirectUrl}},onSendNewMessageError:function(){if(this._inProgressMask)this._inProgressMask.hide()},onMaxCharLimitReached:function(){this._infoBlockEl.dom.innerHTML=this.maxCharTextMessage;if(!this._infoBlockEl.isVisible())this._infoBlockEl.show()},bind:function(){JSM.component.MessageSupport.superclass.bind.call(this)},unbind:function(){JSM.component.MessageSupport.superclass.unbind.call(this);if(this._newMessageForm){this._newMessageForm.hideAllErrors();this._newMessageForm.un("submit",
this.onSubmit,this);this._newMessageForm.unbind();delete this._newMessageForm}if(this._inProgressMask)this._inProgressMask.hide()}});Ext.namespace("JSM.component");JSM.component.Messages=function(el,config){JSM.component.Messages.superclass.constructor.call(this,el,config)};JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK="new-message-click";JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK="support-message-click";JSM.component.Messages.EVENT_THREAD_CLICK="thread-click";
JSM.component.Messages.EVENT_DELETE_THREAD_CLICK="delete-thread-click";
Chaos.extend(JSM.component.Messages,Chaos.Object,{name:"Messages",isOverlay:false,newMessageButtonId:"new_message_btn",messageToSupportButtonId:"message_to_support",messageListContainerId:"message_list",messageThreadsContainerId:"message_list_container",maxVisibleThreadsNumber:6,threadItemCls:"message_item",threadAnchorCls:"message_link",deleteThreadButtonCls:"delete",deletePopupId:"message_delete_box",maxChar:4E3,messageListPagerUrl:"Message/OverlayGetMessages",newMessageFormId:"message_form",deleteThreadRoute:"Messages/DeleteThread",
yesButtonId:"yes",noButtonId:"no",_currentThreadId:undefined,_newMessageButtonEl:undefined,_messageToSupportButtonEl:undefined,_messageListContainerEl:undefined,_messageThreadsContainerEl:undefined,_deleteThreadPopupEl:undefined,_yesButtonEl:undefined,_noButtonEl:undefined,_isAjaxInProgress:false,_pageId:0,init:function(el,config){JSM.component.Messages.superclass.init.call(this,el,config);this.addEvents(JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK,JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK,
JSM.component.Messages.EVENT_THREAD_CLICK,JSM.component.Messages.EVENT_DELETE_THREAD_CLICK);var allThreadsNumber;this._newMessageButtonEl=Ext.get(this.newMessageButtonId);this._messageToSupportButtonEl=Ext.get(this.messageToSupportButtonId);this._messageListContainerEl=Ext.get(this.messageListContainerId);this._messageThreadsContainerEl=Ext.get(this.messageThreadsContainerId);this._deleteThreadPopupEl=Ext.get(this.deletePopupId);this._yesButtonEl=Ext.get(this.yesButtonId);if(this._yesButtonEl)this._yesButtonEl.on("click",
this.onYesButtonClick,this);this._noButtonEl=Ext.get(this.noButtonId);if(this._noButtonEl)this._noButtonEl.on("click",this.onNoButtonClick,this);if(this._messageListContainerEl){allThreadsNumber=this._messageThreadsContainerEl.select("."+this.threadItemCls).getCount();if(allThreadsNumber>this.maxVisibleThreadsNumber){this._scrollPane=new JSM.component.ScrollPane(this._messageListContainerEl,{contentSel:"ul",isAutoHide:false,hideOnMouseout:false,isSetHeight:true,scrollDelta:5,isAnimateScrollBar:false});
this._scrollPane.element.dom.scrollTop=0;this._scrollPane.on("scrollpane-scrollend",this.onScrollEnd,this)}}if(this.isOverlay){if(this._newMessageButtonEl)this._newMessageButtonEl.on("click",this.onNewMessageButtonClick,this);if(this._messageToSupportButtonEl)this._messageToSupportButtonEl.on("click",this.onMessageToSupportButtonClick,this)}this.bindMessageList()},onScrollEnd:function(){if(!this._isAjaxInProgress){this._isAjaxInProgress=true;Chaos.Ajax.request({url:Chaos.getUrl("Messages/ShowMoreThread",
{"page":++this._pageId},{},""),type:"json",method:"GET",xdomain:false,scope:this,success:this._onAjaxSuccess,error:this._onAjaxError,failure:this._onAjaxError})}},_onAjaxSuccess:function(response){if(response.json.success&&response.json.data.content!=""){if(!response.json.data.isLast)this._isAjaxInProgress=false;this._messageThreadsContainerEl.dom.innerHTML+=response.json.data.content;this._scrollPane.show();this._treadAnchorItemsEl.un("click",this.onThreadAnchorItemClick,this);this._deleteThreadButtons.un("click",
this.onDeleteThreadButtonClick,this);this.bindMessageList()}},_onAjaxError:function(response){this._isAjaxInProgress=false;console.error("Message load error: ",response)},onNewMessageButtonClick:function(ev,target){if(this.isOverlay){ev.preventDefault();this.fireEvent(JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK,{scope:this,ev:ev,target:target})}},onMessageToSupportButtonClick:function(ev,target){if(this.isOverlay){ev.preventDefault();this.fireEvent(JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK,
{scope:this,ev:ev,target:target})}},onThreadAnchorItemClick:function(ev,target){if(this.isOverlay){ev.preventDefault();this.fireEvent(JSM.component.Messages.EVENT_THREAD_CLICK,{scope:this,ev:ev,target:target})}},onDeleteThreadButtonClick:function(ev,target){ev.preventDefault();var targetedThread=Ext.get(target).findParent("a",3,true);this._currentThreadId=targetedThread.dom.rel;if(this._currentThreadId){this._currentThread=targetedThread.findParent("li",2,true);if(this._deleteThreadPopupEl)this._deleteThreadPopupEl.show({duration:0.2})}this.fireEvent(JSM.component.Messages.EVENT_DELETE_THREAD_CLICK,
{scope:this,ev:ev,target:target})},onYesButtonClick:function(ev,target){ev.preventDefault();if(this._currentThreadId){JSM.Util.setCursor("wait");var deleteUrl=Chaos.getUrl(this.deleteThreadRoute,{threadId:this._currentThreadId},{},"");Chaos.Ajax.request({url:deleteUrl,method:"get",scope:this,success:function(response){JSM.Util.setCursor("default");if(this._currentThread)this._currentThread.remove();delete this._currentThreadId;delete this._currentThread;if(this._deleteThreadPopupEl)this._deleteThreadPopupEl.hide({duration:0.2});
this._scrollPane.scrollToBottom();this._scrollPane.show()},error:function(e){console.log("error")},failure:function(e){console.log("failure")}})}},onNoButtonClick:function(ev){ev.preventDefault();this._deleteThreadPopupEl.hide({duration:0.2})},bindMessageList:function(){this._treadAnchorItemsEl=this.element.select("."+this.threadAnchorCls);if(this._treadAnchorItemsEl.getCount()>0)this._treadAnchorItemsEl.on("click",this.onThreadAnchorItemClick,this);this._deleteThreadButtons=this.element.select("."+
this.deleteThreadButtonCls);if(this._deleteThreadButtons.getCount()>0)this._deleteThreadButtons.on("click",this.onDeleteThreadButtonClick,this)},bind:function(){JSM.component.Messages.superclass.bind.call(this)},unbind:function(){JSM.component.Messages.superclass.unbind.call(this);if(this._scrollPane){this._scrollPane.un("scrollpane-scrollend",this.onScrollEnd,this);this._scrollPane.unbind()}if(this._messageLister)this._messageLister.unbind();if(this._messageToSupportButtonEl)this._messageToSupportButtonEl.un("click",
this.onMessageToSupportButtonClick,this);if(this._treadItemsEl)this._treadItemsEl.un("click",this.onThreadItemClick,this);if(this._deleteThreadButtons)this._deleteThreadButtons.un("click",this.onDeleteThreadButtonClick,this)}});Ext.namespace("JSM.component");JSM.component.NewMessage=function(el,config){JSM.component.NewMessage.superclass.constructor.call(this,el,config)};JSM.component.NewMessage.PRICE_TYPE_FREE="0";JSM.component.NewMessage.PRICE_TYPE_MEMBER="1.2";
JSM.component.NewMessage.PRICE_TYPE_TOPMEMBER="1";
JSM.component.NewMessage.EVENT_SEND_MESSAGE_SUCCESS="send-message-success",JSM.component.NewMessage.EVENT_SEND_MESSAGE_ERROR="send-message-error",JSM.component.NewMessage.EVENT_SEND_MESSAGE_FAILURE="send-message-failure",Chaos.extend(JSM.component.NewMessage,Chaos.Object,{name:"NewMessage",newMessageFormId:"message_form",maxCharTextTranslate:undefined,warningCharTextTranslate:undefined,warningCharLimitNumber:2E3,maxCharLimitNumber:4E3,searchFieldNeeded:true,noResultString:undefined,creditInfoRoute:undefined,
messageCharInfoBlockId:"message_char_info",creditPriceBlockId:undefined,creditTextId:undefined,messageErrorId:"message_error",delayedGetCreditInfoTime:200,nameInputId:"to",isOverlay:false,mainBlockId:"overlay_container",messageBlockId:"overlay_message",oneMessagePrice:undefined,messageToId:"to",maxMessageToCharLimitNumber:20,_creditPriceBlockEl:undefined,_infoBlockEl:undefined,_lastSentName:undefined,_nameInputEl:undefined,_price:undefined,_messageToCharacterCounterCmp:undefined,_characterCounterCmp:undefined,
init:function(el,config){this.addEvents(JSM.component.NewMessage.EVENT_SEND_MESSAGE_SUCCESS,JSM.component.NewMessage.EVENT_SEND_MESSAGE_ERROR,JSM.component.NewMessage.EVENT_SEND_MESSAGE_FAILURE);this.freeText=Chaos.translate("Sending this message is free.");this.maxCharTextTranslate=Chaos.translate("You&#39;ve reached the maximum length of this message<br />("+this.maxCharLimitNumber+" characters).");this.warningCharTextTranslate=Chaos.translate("You&#39;ve exceeded the maximum length of one message. If you continue writing, the price of two messages will be deducted.");
this.creditPriceText=Chaos.translate('Sending this message costs <span><span class="credit_price" id="'+this.creditPriceBlockId+'">1.2</span> Credits</span>');this.warningCharTextMessage='<span class="arrow">&nbsp;</span><span class="info_icon">&nbsp;</span><p>'+this.warningCharTextTranslate+"</p>";this.maxCharTextMessage='<span class="arrow">&nbsp;</span><span class="info_icon">&nbsp;</span><p>'+this.maxCharTextTranslate+"</p>";this._infoBlockEl=Ext.get(this.messageCharInfoBlockId);this._creditPriceBlockEl=
Ext.get(this.creditPriceBlockId);this._nameInputEl=Ext.get(this.nameInputId);this.autoSuggestConfig={categoryId:"category_type",searchFieldId:this.nameInputId,delaying:500,suggestUrlRoute:"Messages/PerformerSearch",autoSuggestId:"auto_suggest_msg",relBlockId:"message_form",appendToId:Ext.isIE7?"message_form":"auto_suggest_container",listElement:"li",extendFieldNeeded:false,changeFieldIdOnEnter:"message",listItemHoverClass:"active_suggestion",hideAutoSuggestList:false,minCharLength:4,clickOnListElements:true};
this.setComponents();this.delayedGetCreditTask=new Ext.util.DelayedTask(function(){this.getCreditInfo()},this);this._inProgressMask=new Chaos.Mask(this.messageBlockId,{top:0,left:0,maskOpacity:0.3,isVisibleMask:true,useCursor:true,appendTo:JSM.Util.isCurrentPage("messages.newmessage")?Ext.getBody():Ext.get(this.messageBlockId),insertionMethod:"append"});JSM.component.NewMessage.superclass.init.call(this,el,config)},onDelayedGetCreditInfo:function(){this.delayedGetCreditTask.delay(this.delayedGetCreditInfoTime)},
getCreditInfo:function(){var name=Ext.fly(this.nameInputId).dom.value;if(name!=""&&this._lastSentName!=name){this._lastSentName=name;Chaos.Ajax.request({type:"json",url:Chaos.getUrl(this.creditInfoRoute,{performerName:name},{},""),method:"POST",scope:this,success:this.getCreditInfoSuccess,error:this.getCreditInfoError,failure:this.getCreditInfoFailure})}},getCreditInfoSuccess:function(response){var res=response.json;if(res.price!=undefined&&res.price!=JSM.component.NewMessage.PRICE_TYPE_FREE){if(Ext.fly(this.creditPriceBlockId)==
null)Ext.fly(this.creditTextId).dom.innerHTML=this.creditPriceText;Ext.fly(this.creditPriceBlockId).dom.innerHTML=res.price}else Ext.fly(this.creditTextId).dom.innerHTML=this.freeText;this._price=res.price},setComponents:function(){if(this.searchFieldNeeded){this._messageNameField=new JSM.component.SearchField(this.nameInputId,{loaderId:"new_message_loader",loaderClass:"loader_gif",loaderBlurClass:"loader_gif_blur",resetButtonClass:"reset_search_button",createLoader:true,loaderFor:this.nameInputId,
noResultString:Chaos.translate("No result - try something else"),isDisabledOnEnter:true});if(Chaos.Config.get("isAutoSuggestEnabled"))this._messageNameField.addPlugin("AutoSuggest",this.autoSuggestConfig)}this._newMessageForm=new JSM.form.Form(this.newMessageFormId,{scope:this,isAjax:true,handleToken:true,showErrorsOnEdit:false,showErrorsOnBlur:true,isDisabledOnEnter:true,success:this.onSendNewMessageSuccess,error:this.onSendNewMessageError,useModalForGeneralErrors:false,generalErrorSel:".warning_tag",
formErrorSel:".warning_tag",hasCaptcha:false,errorHideDuration:0,hintHideDuration:0});this._newMessageForm.on("submit",this.onSubmit,this);this._newMessageForm.on("inputFocus",this._newMessageForm.hideAllErrors,this._newMessageForm);this._characterCounterCmp=new JSM.component.CharacterCounter(this.newMessageFormId,{maxChar:this.maxCharLimitNumber,warningChar:this.warningCharLimitNumber,inputId:"message",counterId:"message_char_number",charInfoId:this.messageCharInfoBlockId,maxCharText:this.maxCharTextTranslate,
warningCharText:this.warningCharTextTranslate,isMaxCharSound:true});this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,this.onWarningLimitReached,this);this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);this._characterCounterCmp.on(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING,this.onWarningLimitFalling,this);this._messageToCharacterCounterCmp=new JSM.component.CharacterCounter(this.newMessageFormId,
{inputId:this.messageToId,maxChar:this.maxMessageToCharLimitNumber,isShowCounter:false,hasWarningLimit:false,isMaxCharSound:true})},onWarningLimitReached:function(){var actualCredit=Ext.get(this.creditPriceBlockId).dom.innerHTML;this._infoBlockEl.dom.innerHTML=this.warningCharTextMessage;Ext.get(this.messageCharInfoBlockId).show();if(this._price!=undefined&&this._price!=JSM.component.NewMessage.PRICE_TYPE_FREE){if(JSM.component.NewMessage.PRICE_TYPE_MEMBER||JSM.component.NewMessage.PRICE_TYPE_TOPMEMBER==
this._price)Ext.get(this.creditPriceBlockId).dom.innerHTML=2*this._price}else if(actualCredit!=JSM.component.NewMessage.PRICE_TYPE_FREE)if(JSM.component.NewMessage.PRICE_TYPE_MEMBER==actualCredit||JSM.component.NewMessage.PRICE_TYPE_TOPMEMBER==actualCredit)Ext.get(this.creditPriceBlockId).dom.innerHTML=2*actualCredit;if(Ext.fly(this.messageErrorId)!=null)Ext.fly(this.messageErrorId).hide()},onWarningLimitFalling:function(){var actualCredit=Ext.get(this.creditPriceBlockId).dom.innerHTML;if(this._price!=
undefined&&JSM.component.NewMessage.PRICE_TYPE_MEMBER){if(JSM.component.NewMessage.PRICE_TYPE_MEMBER||JSM.component.NewMessage.PRICE_TYPE_TOPMEMBER==actualCredit/2)Ext.get(this.creditPriceBlockId).dom.innerHTML=this._price}else if(actualCredit!=JSM.component.NewMessage.PRICE_TYPE_FREE)if(JSM.component.NewMessage.PRICE_TYPE_MEMBER||JSM.component.NewMessage.PRICE_TYPE_TOPMEMBER==actualCredit/2)Ext.get(this.creditPriceBlockId).dom.innerHTML=actualCredit/2},onMaxCharLimitReached:function(){this._infoBlockEl.dom.innerHTML=
this.maxCharTextMessage;if(!this._infoBlockEl.isVisible())this._infoBlockEl.show()},onSubmit:function(){if(this._inProgressMask)this._inProgressMask.show()},onSendNewMessageSuccess:function(id,response){if(this._inProgressMask&&this.isOverlay)this._inProgressMask.hide();if(this.isOverlay)this.fireEvent(JSM.component.NewMessage.EVENT_SEND_MESSAGE_SUCCESS,{scope:this,response:response});else{var redirectUrl=response.json.data.redirectUrl;if(redirectUrl)window.location.href=redirectUrl}},onSendNewMessageError:function(e){if(this._inProgressMask)this._inProgressMask.hide()},
getCreditInfoError:function(){},getCreditInfoFailure:function(){},bind:function(){JSM.component.NewMessage.superclass.bind.call(this);if(this._nameInputEl)this._nameInputEl.on("blur",this.onDelayedGetCreditInfo,this)},unbind:function(){JSM.component.NewMessage.superclass.unbind.call(this);if(this._messageNameField){this._messageNameField.unbind();delete this._messageNameField}if(this._characterCounterCmp){this._characterCounterCmp.un(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_REACHED,this.onWarningLimitReached,
this);this._characterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);this._characterCounterCmp.un(JSM.component.CharacterCounter.EVENT_WARNING_LIMIT_FALLING,this.onMaxCharLimitReached,this);this._characterCounterCmp.unbind();delete this._characterCounter}if(this._newMessageForm){this._newMessageForm.hideAllErrors();this._newMessageForm.un("inputFocus",this._newMessageForm.hideAllErrors,this._newMessageForm);this._newMessageForm.un("submit",
this.onSubmit,this);this._newMessageForm.unbind();delete this._newMessageForm}if(this._nameInputEl)this._nameInputEl.un("blur",this.onDelayedGetCreditInfo,this);if(this._inProgressMask)this._inProgressMask.hide()}});Ext.namespace("JSM.component");JSM.component.PerformerSwap=function(el,config){JSM.component.PerformerSwap.superclass.constructor.call(this,el,config)};JSM.component.PerformerSwap.MODEL_SWAPPED="model-swapped";JSM.component.PerformerSwap.GLOBALEVENT_MODEL_SWAP="model-swap";
JSM.component.PerformerSwap.GLOBALEVENT_START_QUICK_SWAP="quick-swap";JSM.component.PerformerSwap.GLOBALEVENT_QUICK_SWAP_SUCCESS="quick-swap-success";JSM.component.PerformerSwap.DISPLAY_TYPE_QIUCK="quick";JSM.component.PerformerSwap.DISPLAY_TYPE_ANIMATION="animation";JSM.component.PerformerSwap.STATUS_OFFLINE="offline";JSM.component.PerformerSwap.STATUS_FREE="free";JSM.component.PerformerSwap.STATUS_PRIVATE="private";JSM.component.PerformerSwap.META_IS_SEARCHPAGE=Chaos.getMeta("isSearchPage");
JSM.component.PerformerSwap.DEFAULT_IMAGE_URL_BIG=Chaos.Config.get("newPerformerImageBig");JSM.component.PerformerSwap.DEFAULT_IMAGE_URL_SMALL=Chaos.Config.get("newPerformerImageSmall");
Chaos.extend(JSM.component.PerformerSwap,Chaos.Object,{name:"PerformerSwap",swapRouteHandler:"undefined",offlineSel:undefined,animDuration:0.2,imgSel:"img",perfBoxSel:".big:not(.commercial_container), .small:not(.commercial_container)",perfBoxIdPrefix:"container_",perfLinkIdPrefix:"performer_",prefImgIdPrefix:"perfimg_",performerArray:[],swappedArray:[],addFavClass:"add_favorite",myFavClass:"myfavorite",myFavSel:".myfavorite",perfLinkSel:".perf_link",overlayId:"overlay",badgeSel:".badge",checkAreaTask:undefined,
performerSwapTask:undefined,perfSwapDelay:3,perfSwapEnabled:true,isAjaxEnabled:true,isMainPage:false,mainPageBodyId:"index.index",animType:"animation",imgServer:["img0","img1","img2","img3"],ajaxQueue:undefined,perfSwapErrorCounter:0,perfSwapErrorLimit:5,perfSwapErrorDelay:1,hoveredThumbClass:"hover",dataClass:"data",statusClass:"status",statusSel:".status",offlineStatusClass:"offline",freeStatusClass:"free",privateStatusClass:"private",listPageOrderType:"listPageOrderType",_currentOrderType:undefined,
init:function(el,config){this.isMainPage=Ext.getBody().id==this.mainPageBodyId&&parseInt(JSM.component.PerformerSwap.META_IS_SEARCHPAGE)==0;JSM.component.PerformerSwap.superclass.init.call(this,el,config);this.addEvents(JSM.component.PerformerSwap.MODEL_SWAPPED);Chaos.addEvents(JSM.component.PerformerSwap.GLOBALEVENT_MODEL_SWAP,JSM.component.PerformerSwap.GLOBALEVENT_START_QUICK_SWAP,JSM.component.PerformerSwap.GLOBALEVENT_QUICK_SWAP_SUCCESS);Chaos.Broadcaster.on(JSM.component.PerformerSwap.GLOBALEVENT_START_QUICK_SWAP,
this.onStartQuickSwap,this);this.privateStatusTranslate=Chaos.translate("In Private Chat");this.offlineStatusTranslate=Chaos.translate("Offline");this.freeChatTranslate=Chaos.translate("Free Live Sex Chat");if(this.isMainPage){this.performerSwapTask=new Ext.util.DelayedTask(this.requestNewPerformers,this);this.performerSwapTask.delay(this.perfSwapDelay*1E3)}else this.perfSwapEnabled=false;this.statuses=[JSM.component.PerformerSwap.STATUS_OFFLINE,JSM.component.PerformerSwap.STATUS_FREE,JSM.component.PerformerSwap.STATUS_PRIVATE,
JSM.component.PerformerSwap.STATUS_PRIVATE]},isPerfInSwapArray:function(performerObject){for(var i=0;i<this.performerArray.length;i++)if(this.performerArray[i].id==performerObject.id)return true;return false},areaCheck:function(){var isOverlayVisible=Ext.get(this.overlayId).isVisible();if(Chaos.Cookie.get("forceSwapConsole")){var time=new Date;console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : areaCheck            -> perfSwapEnabled = ",this.perfSwapEnabled);console.info("["+
time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : areaCheck            -> isOverlayVisible = ",isOverlayVisible)}if(this.perfSwapEnabled&&isOverlayVisible==false){var perfBoxes=this.element.select(this.perfBoxSel);perfBoxes.each(this.checkPerfBoxes,this)}},checkPerfBoxes:function(perfBox){var perfLinkEl=perfBox.select(this.perfLinkSel).item(0);this._currentOrderType=Chaos.Config.get(this.listPageOrderType);if(perfLinkEl&&Chaos.Util.isOnViewPort(perfBox)&&!perfBox.hasClass(JSM.component.PerformerSwap.STATUS_FREE)&&
!perfLinkEl.hasClass(this.hoveredThumbClass)&&this.getSwapPerfByOrderType(perfBox))this._prepareCurrentBox(perfBox,perfLinkEl,true)},getSwapPerfByOrderType:function(perfBox){this._currentOrderType=Chaos.Config.get(this.listPageOrderType);if(this._currentOrderType==="recommended")return true;else return perfBox.hasClass(JSM.component.PerformerSwap.STATUS_OFFLINE)?true:false},_prepareCurrentBox:function(perfBox,perfLinkEl,addToSwapArray){var perfObj={};perfObj.id=perfBox.dom.id.split("_")[1];perfObj.size=
perfBox.dom.className.split(" ")[0];if(perfBox.hasClass(JSM.component.PerformerSwap.STATUS_OFFLINE))perfObj.time=this.perfSwapDelay;else if(perfBox.hasClass(JSM.component.PerformerSwap.STATUS_PRIVATE))perfObj.time=this.perfSwapDelay*2;if(addToSwapArray)if(this.performerArray.length==0)this.performerArray.push(perfObj);else if(!this.isPerfInSwapArray(perfObj))this.performerArray.push(perfObj);perfObj.gravityCategory=perfLinkEl.dom.getAttribute("rev");return perfObj},requestNewPerformers:function(){this.areaCheck();
if(Chaos.Cookie.get("forceSwapConsole")){var time=new Date;console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : requestNewPerformers -> Waiting performers: ",this.performerArray.length)}if(this.performerArray.length>0){if(Chaos.Cookie.get("forceSwapConsole"))console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : requestNewPerformers -> performerArray: ",this.performerArray);var oldPerformers=[];for(var i=0;i<this.performerArray.length;i++)if(this.performerArray[i].time>
0)this.performerArray[i].time=this.performerArray[i].time-this.perfSwapDelay;else{var currentPerfLink=Ext.get(this.perfLinkIdPrefix+this.performerArray[i].id);if(currentPerfLink!=null&&!currentPerfLink.hasClass(JSM.component.PerformerSwap.STATUS_FREE)&&!currentPerfLink.hasClass(this.hoveredThumbClass))oldPerformers.push(this.performerArray[i]);else this.performerArray.splice(i,1)}if(Chaos.Cookie.get("forceSwapConsole")){console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+
"] : requestNewPerformers -> Performers need to swap : ",oldPerformers.length);console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : requestNewPerformers -> isAjaxEnabled           : ",this.isAjaxEnabled)}if(oldPerformers.length>0&&this.isAjaxEnabled){this.isAjaxEnabled=false;this.swapLogParams={performers:oldPerformers,swapped:this.swappedArray};this._sendRequest(oldPerformers,false)}else this.resetSwapTask()}else this.resetSwapTask()},_sendRequest:function(swapList,isQuickSwap){this.ajaxQueue.request({type:"json",
url:Chaos.getUrl(this.swapRouteHandler,{listPageId:Chaos.getMeta("listPageId")},Chaos.Config.get("isWide")?{wide:Chaos.Config.get("isWide")||false,layout:layoutManager.getCurrentLayout()}:{},""),params:{performers:Ext.encode(swapList),swapped:Ext.encode(this.swappedArray)},method:"POST",scope:this,success:function(response){this.requestSuccess(response,isQuickSwap)},error:this.requestError})},requestSuccess:function(response,isQuickSwap){if(Chaos.Cookie.get("forceSwapConsole")){var time=new Date;
console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : requestSuccess       -> Response: ",response.json)}this.isAjaxEnabled=true;this.perfSwapErrorCounter=0;if(response.json.data.isDisabled){this.perfSwapEnabled=false;this.performerArray=[]}else if(this.perfSwapEnabled||isQuickSwap){var swapArray=[];this.swappedArray=[];for(var i in response.json.data.swapData){var perfBoxEl=Ext.get(this.perfBoxIdPrefix+i);if(perfBoxEl){swapArray.push({oldPerf:perfBoxEl,newPerf:response.json.data.swapData[i]});
for(var x=0;x<this.performerArray.length;x++)if(this.performerArray[x].id==i)this.performerArray.splice(x,1)}}if(swapArray.length>0)if(!this.isNewModel(swapArray))this.swapPerfBoxes(this.filterDuplication(swapArray),0,this.animType,isQuickSwap);else this.swapPerfBoxes(swapArray,0,this.animType,isQuickSwap);swapArray=[];this.resetSwapTask()}},requestError:function(response){if(Chaos.Cookie.get("forceSwapConsole")){var time=new Date;console.info("["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+
"] : reuqestError         -> isAjaxEnabled = true")}this.isAjaxEnabled=true;this.perfSwapErrorCounter++;if(this.perfSwapErrorCounter==this.perfSwapErrorLimit){this.perfSwapErrorCounter=0;this.performerSwapTask.delay(this.perfSwapErrorDelay*60*1E3)}else this.resetSwapTask()},onStartQuickSwap:function(ev){var perfLink,_preparedBox,_preparedBoxes=[];for(var i=0;i<ev.length;i++){perfLink=ev[i].perfBox.select(this.perfLinkSel).item(0);if(perfLink){_preparedBox=this._prepareCurrentBox(ev[i].perfBox,perfLink,
false);_preparedBoxes.push(_preparedBox)}}this._sendRequest(_preparedBoxes,true)},swapPerfBoxes:function(perfBoxArray,index,type,isQuickSwap){index=typeof index=="undefined"?0:index;var self=this;if(index<perfBoxArray.length&&perfBoxArray[index]&&(this.perfSwapEnabled==true||isQuickSwap)&&Ext.get(perfBoxArray[index].oldPerf.select("a").elements[0]))if(!Ext.get(perfBoxArray[index].oldPerf.select("a").elements[0]).hasClass(this.hoveredThumbClass)&&!perfBoxArray[index].oldPerf.child("noscript"))switch(type){case JSM.component.PerformerSwap.DISPLAY_TYPE_QIUCK:this.hidePerfBoxIE78(perfBoxArray[index].oldPerf,
type);this.hideCurrentModel(perfBoxArray[index].oldPerf,perfBoxArray[index].newPerf);this.createNewModellBox(perfBoxArray[index].oldPerf,perfBoxArray,index,type);break;case JSM.component.PerformerSwap.DISPLAY_TYPE_ANIMATION:this.hidePerfBoxIE78(perfBoxArray[index].oldPerf,type);if(Ext.isIE9)perfBoxArray[index].oldPerf.dom.style.opacity=0;try{TweenMax.to(perfBoxArray[index].oldPerf.dom,this.animDuration,{alpha:0,onCompleteScope:perfBoxArray[index].oldPerf,onComplete:function(){this.dom.style.opacity=
0;self.hideCurrentModel(this,perfBoxArray[index].newPerf);self.createNewModellBox(this,perfBoxArray,index,type)}})}catch(exception){}break}},isNewModel:function(swapArray){var currentId;for(var i=0;i<swapArray.length;i++)if(swapArray[i].newPerf!=undefined){currentId=swapArray[i].newPerf.id;if(!this.checkCurrentId(currentId))return false}return true},checkCurrentId:function(id){return!this.element.select("div[id$=_"+id+"]").getCount()>0},filterDuplication:function(swapArray){var currentId,correct=
[],duplicatedId=[];for(var i=0;i<swapArray.length;i++)if(swapArray[i].newPerf!=undefined){currentId=swapArray[i].newPerf.id;if(this.checkCurrentId(currentId))correct.push(swapArray[i]);else duplicatedId.push(currentId)}return correct},hideCurrentModel:function(oldPerf,newPerf){if(oldPerf.child("noscript"))return;var box=oldPerf,size=box.dom.className.split(" ")[0];box.select(this.badgeSel).remove();box.select(this.statusSel).remove();box.dom.id=box.dom.id.split("_")[0]+"_"+newPerf.id;box.dom.className=
size+" "+this.statuses[newPerf.status]},createNewModellBox:function(oldPerf,perfBoxArray,index,type){var box=oldPerf,newPerf=perfBoxArray[index]!=undefined?perfBoxArray[index].newPerf:perfBoxArray.newPerf,perfFav=Ext.get(oldPerf.select("."+this.addFavClass).item(0)),perfLinkEl=Ext.get(oldPerf.select(this.perfLinkSel).item(0)),status=Ext.get(oldPerf.select("."+this.statusClass).item(0)),data=oldPerf.select("."+this.dataClass).item(0),self=this,size=oldPerf.dom.className.split(" ")[0];if(perfLinkEl){box.dom.id=
"container_"+newPerf.id;perfLinkEl.dom.href=Chaos.getUrl("Chat/Performer",{performerId:newPerf.pid},{},"");perfLinkEl.dom.id=perfLinkEl.dom.id.split("_")[0]+"_"+newPerf.id;perfLinkEl.dom.rel=newPerf.search_suggest;if(data){var dataObject=Ext.decode(data.dom.innerHTML);for(var key in newPerf)if(dataObject.hasOwnProperty(key))dataObject[key]=newPerf[key];data.dom.innerHTML=Ext.encode(dataObject)}if(newPerf.active_badge)this.createChild(perfLinkEl,"&nbsp;","badge "+newPerf.active_badge);if(parseInt(newPerf.favourite)==
1)perfFav.dom.className=this.addFavClass+" "+this.myFavClass;else perfFav.dom.className=this.addFavClass;if(parseInt(newPerf.status)!=1)switch(parseInt(newPerf.status)){case 0:this.createChild(perfLinkEl,this.offlineStatusTranslate,this.statusClass);break;case 2:case 3:this.createChild(perfLinkEl,this.privateStatusTranslate,this.statusClass);break}else if(status)status.remove();var objImage=new Image;objImage.id=this.prefImgIdPrefix+newPerf.pid+"_"+newPerf.id;objImage.alt=newPerf.pid+" | "+this.freeChatTranslate;
var onloadProcess=function(img,checkImage){var imgTag=Ext.get(box.child(self.imgSel));if(imgTag==null){perfLinkEl.createChild({tag:self.imgSel,id:objImage.id,src:objImage.src,alt:objImage.alt});imgTag=Ext.get(box.child(self.imgSel))}if(checkImage)if(self.isSwappedImageIsCorrect(img)){imgTag.dom.src=img.src;self.displayNewModellBox(box,type,perfBoxArray,index)}else if(self.isSearchPage){imgTag.dom.src=self.reloadSwappedImage(img.src,perfBoxArray[index]);self.displayNewModellBox(box,type,perfBoxArray,
index)}else{var newPerfObj={};newPerfObj.id=newPerf.id;newPerfObj.time=0;newPerfObj.size=size;newPerfObj.gravity_category=newPerf.gravity_category;self.restartPerfSwap(newPerfObj)}else{imgTag.dom.src=img.src;self.displayNewModellBox(box,type,perfBoxArray,index)}imgTag.dom.id=img.id;imgTag.dom.alt=img.alt;self.showPerfBoxIE78(box,type)};objImage.onload=function(){if(onloadTask){onloadTask.cancel();onloadTask=undefined;onloadProcess(this,true)}};objImage.src=newPerf.profilePictureUrl;var onloadTask=
new Ext.util.DelayedTask(function(){onloadProcess(objImage,false)});onloadTask.delay(1E3)}},createChild:function(parentEl,html,cls){parentEl.createChild({tag:"span",cls:cls||this.statusClass,html:html||"&nbsp;"})},displayNewModellBox:function(box,displayType,perfBoxArray,index){if(box.select("img").item(0))box.setStyle("background-image","url("+box.select("img").item(0).getAttribute("src")+")");switch(displayType){case JSM.component.PerformerSwap.DISPLAY_TYPE_QIUCK:box.setStyle({opacity:1});box.dom.style.opacity=
1;break;Chaos.fireEvent(JSM.component.PerformerSwap.GLOBALEVENT_MODEL_SWAP,{scope:this,box:box});case JSM.component.PerformerSwap.DISPLAY_TYPE_ANIMATION:try{TweenMax.to(box.dom,this.animDuration,{alpha:1,onCompleteScope:this,onComplete:function(){Chaos.fireEvent(JSM.component.PerformerSwap.GLOBALEVENT_MODEL_SWAP,{scope:this,box:box})}})}catch(exception){}break}this.swappedArray.push(perfBoxArray[index].oldPerf.id.split("_")[1]);index++;if(perfBoxArray[index]!=undefined)this.swapPerfBoxes(perfBoxArray,
index,displayType)},isSwappedImageIsCorrect:function(img){return img.width!=2||img.height!=2},reloadSwappedImage:function(currentUrl,currentPerf){var i,reloadedImg,newSrcArray,self=this,currentSize=currentPerf.oldPerf.dom.className.split(" ")[0];newSrcArray=this.getNewSrc(currentUrl);for(i=0;i<newSrcArray.length;i++){reloadedImg=new Image;reloadedImg.src=newSrcArray[i];reloadedImg.onload=function(){if(self.isSwappedImageIsCorrect(this))return reloadedImg.src}}this.getDefaultImgUrl(currentSize)},getDefaultImgUrl:function(size){switch(size){case "big":return JSM.component.PerformerSwap.DEFAULT_IMAGE_URL_BIG;
default:return JSM.component.PerformerSwap.DEFAULT_IMAGE_URL_SMALL}},getNewSrc:function(currentSrc){var newSrcArray=[],i,currentServerName=currentSrc.split("http://")[1].substr(0,4),srcBegin=currentSrc.split(currentServerName)[0],srcEnd=currentSrc.split(currentServerName)[1];for(i=0;i<this.imgServer.length;i++)if(this.imgServer[i]!=currentServerName)newSrcArray.push(srcBegin+this.imgServer[i]+srcEnd);return newSrcArray},createDefaultImage:function(currentBlock){var currentSize=currentBlock.parent("div").dom.className.split(" ")[0],
src=this.getDefaultImgUrl(currentSize);currentBlock.select(this.imgSel).elements[0].src=src},restartPerfSwap:function(obj){this.performerArray.push(obj);this.performerSwapTask.cancel();this.requestNewPerformers()},onAddModelToSwapList:function(params){if(params.id!=undefined&&params.container!=undefined){var thumbSize=params.container.dom.className.split(" ")[0],gravityCategory=params.container.child("a").getAttribute("rev");this.addedModels.push({id:params.id,size:thumbSize,gravityCategory:gravityCategory})}},
hidePerfBoxIE78:function(el,type){var currentEl;if(Ext.isIE7||Ext.isIE8)switch(type){case JSM.component.PerformerSwap.DISPLAY_TYPE_QIUCK:el.select("img, "+this.perfLinkSel).setStyle({opacity:0});break;case JSM.component.PerformerSwap.DISPLAY_TYPE_ANIMATION:var bgImage=el.getStyle("background-image");el.setStyle("background-image","none");currentEl=el.select("img, "+this.perfLinkSel+", "+this.statusSel);try{TweenMax.allTo(currentEl.elements,this.animDuration,{alpha:0,onCompleteAll:function(){this.setStyle("background-image",
bgImage)}})}catch(exception){}break}},showPerfBoxIE78:function(el,type){var self=this,currentEl;if(Ext.isIE7||Ext.isIE8)switch(type){case JSM.component.PerformerSwap.DISPLAY_TYPE_QIUCK:el.select("img, "+this.perfLinkSel).setStyle({opacity:0.99});el.select(this.statusSel).setStyle({opacity:0.99});el.select(this.badgeSel).setStyle("display","block");el.select(this.myFavSel).setStyle("display","block");break;case JSM.component.PerformerSwap.DISPLAY_TYPE_ANIMATION:currentEl=el.select("img, "+this.perfLinkSel+
", "+this.statusSel);try{TweenMax.allTo(currentEl.elements,this.animDuration,{alpha:0.99,onCompleteAll:function(){this.select(self.badgeSel).setStyle("display","block");this.select(self.myFavClass).setStyle("display","block")}})}catch(exception){}break}},resetSwapOnHover:function(ev,target){var perfId=Ext.get(target).parent().dom.id.split("_")[1],perfBox=Ext.get(this.perfBoxIdPrefix+perfId),perfSize=perfBox.dom.className.split(" ")[0],perfStatus=perfBox.dom.className.split(" ")[1];if(perfStatus!=
JSM.component.PerformerSwap.STATUS_FREE){if(perfStatus==JSM.component.PerformerSwap.STATUS_OFFLINE)perfBox.removeClass(this.hoveredThumbClass);for(var i=0;i<this.performerArray.length;i++)if(this.performerArray[i].id==perfId)this.performerArray.splice(i,1);var perfObj={};perfObj.id=perfId;perfObj.size=perfSize;switch(perfStatus){case JSM.component.PerformerSwap.STATUS_OFFLINE:perfObj.time=this.perfSwapDelay;break;case JSM.component.PerformerSwap.STATUS_PRIVATE:perfObj.time=this.perfSwapDelay*2;break}perfObj.gravityCategory=
perfBox.getAttribute("rev");this.performerArray.push(perfObj)}},stopSwapTask:function(){if(this.perfSwapEnabled&&this.performerSwapTask){var time=new Date;JSM.Util.console("info","forceSwapConsole","["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : stopSwapTask");this.performerSwapTask.cancel()}},resetSwapTask:function(){if(this.perfSwapEnabled&&this.performerSwapTask){var time=new Date;JSM.Util.console("info","forceSwapConsole","["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+
"] : resetSwapTask");this.performerSwapTask.delay(this.perfSwapDelay*1E3)}},onFocus:function(){if(this.perfSwapEnabled==false){var time=new Date;JSM.Util.console("info","forceSwapConsole","["+time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+"] : onFocus              -> perfSwapEnabled = true");this.isAjaxEnabled=true;this.perfSwapEnabled=true;this.resetSwapTask()}},onBlur:function(){if(this.perfSwapEnabled){var time=new Date;JSM.Util.console("info","forceSwapConsole","["+time.getHours()+
":"+time.getMinutes()+":"+time.getSeconds()+"] : onBlur               -> perfSwapEnabled = false");this.isAjaxEnabled=false;this.perfSwapEnabled=false;this.stopSwapTask()}},bind:function(){JSM.component.PerformerSwap.superclass.bind.call(this);if(this.isMainPage)if(Ext.isIE7||Ext.isIE8)Ext.fly(document).on({"focusin":this.onFocus,"focusout":this.onBlur,scope:this});else Ext.fly(window).on({"focus":this.onFocus,"blur":this.onBlur,scope:this})},unbind:function(){JSM.component.PerformerSwap.superclass.unbind.call(this);
if(this.isMainPage)if(Ext.isIE7||Ext.isIE8)Ext.fly(document).un({"focusin":this.onFocus,"focusout":this.onBlur,scope:this});else Ext.fly(window).un({"focus":this.onFocus,"blur":this.onBlur,scope:this});Chaos.Broadcaster.un(JSM.component.PerformerSwap.GLOBALEVENT_START_QUICK_SWAP,this.onStartQuickSwap,this)}});Ext.namespace("JSM.component");JSM.component.RefreshList=function(el,config){JSM.component.RefreshList.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.RefreshList,Chaos.Object,{name:"RefreshList",forceRefresh:false,init:function(el,config){JSM.component.RefreshList.superclass.init.call(this,el,config);this.task={run:this.checkList,interval:this.refreshInterval,scope:this};this.startTask()},checkList:function(){if(this.forceRefresh)this.refreshList();else{var checkUrl=this.getCheckUrl(this.checkParams);Chaos.Ajax.request({url:checkUrl,method:"GET",type:"json",success:this.refreshList,error:this.supportMessageLister,scope:this})}},
refreshList:function(){var refreshUrl=this.getRefreshListUrl(this.refreshParams);this.supportMessageLister();Chaos.Ajax.request({type:"json",url:refreshUrl,method:"GET",scope:this,success:this.changeListContent,error:this.errorHandler,failure:this.errorHandler})},changeListContent:function(response){var content=response.json.data.content;if(Ext.get(this.listContainerId)!=null)Ext.get(this.listContainerId).dom.innerHTML=content;this.callback(this.scope);this.fireEvent("refreshListFinish",{container:this.listContainerId})},
supportMessageLister:function(response){if(typeof response!="undefined")if(response.json.support_badge>0){Ext.get("support_msg_badge").show();Ext.get("support_msg_num").dom.innerHTML=response.json.support_badge}},startTask:function(){Ext.TaskMgr.start(this.task)},stopTask:function(){Ext.TaskMgr.stop(this.task)},bind:function(){JSM.component.RefreshList.superclass.bind.call(this)},unbind:function(){JSM.component.RefreshList.superclass.unbind.call(this)}});Ext.namespace("JSM.component");
JSM.component.ScrollPane=function(el,config){JSM.component.ScrollPane.superclass.constructor.call(this,el,config)};JSM.component.ScrollPane.EVENT_MOUSEWHEEL="scrollpane-mousewheel";JSM.component.ScrollPane.EVENT_SCROLLEND="scrollpane-scrollend";
Chaos.extend(JSM.component.ScrollPane,Chaos.Object,{name:"ScrollPane",width:14,useTemplate:true,scrollPaneSel:".scroll-pane",scrollBarSel:".scrollbar",contentSel:"#content",templateParams:{},defaultHeight:30,hideOnMouseout:true,hideDelayTime:500,showDuration:0.2,hideDuration:0,scrollDelta:15,isAutoHide:true,isSetHeight:false,disabledSetHeight:false,isAnimateScrollBar:true,minScrollBarHeight:25,_scrollPos:0,_isMoving:false,_scrollEl:null,_scrollBarEl:null,_templateSrc:'<div class="scroll-pane" style= "display: block; position: absolute; padding: 6px 0; right: 9px; top: 0; width: 6px; z-index: 10;">'+
'<div class="scrollbar" style="-moz-transition: all 25ms ease 0s; background-clip: content-box;">'+"</div>"+"</div>",init:function(el,config){this.element.setStyle({"position":"relative","overflow":"hidden"});if(this.useTemplate==true&&this.element.child(this.scrollPaneSel)==null){this.tmpObj=new Chaos.Template(this._templateSrc);this._scrollEl=this.tmpObj.append(this.element,this.templateParams,true)}else this._scrollEl=this.element.child(this.scrollPaneSel);this.addEvents(JSM.component.ScrollPane.EVENT_MOUSEWHEEL,
JSM.component.ScrollPane.EVENT_SCROLLEND);if(this.isScrollNeeded){this.contentEl=this.element.child(this.contentSel);this._scrollBarEl=this._scrollEl.child(this.scrollBarSel);if(!this.hideOnMouseout)this.show(this.showDuration);this.computeHeight();this.hideTask=new Ext.util.DelayedTask(this.onScrollHide,this)}this._scrollEl.setStyle({"position":"absolute","height":this.element.getHeight()-this._scrollEl.getPadding("tb")+"px"});JSM.component.ScrollPane.superclass.init.call(this,el,config)},onScrollMouseDown:function(ev,
target,opts){this.startMouseY=ev.getXY()[1];this.startScrollPos=this.getScrollPos();var offsetPos=this.startMouseY-this.element.getY();if(offsetPos>this._scrollPos&&offsetPos<this._scrollPos+this.height);else{this.setScrollPos(offsetPos-this.height/2);this.startScrollPos=this.getScrollPos()}this._isMoving=true;this.disableSelect()},onScrollMouseUp:function(ev,target,opts){this._isMoving=false;this.enableSelect()},onScrollMouseMove:function(ev,target,opts){if(!this._isMoving)return;if(this.isSetHeight==
true)this.computeHeight();var offsetPos=ev.getXY()[1]-this.startMouseY+this.startScrollPos;this.setScrollPos(offsetPos);ev.preventDefault();ev.stopPropagation()},setScrollPos:function(_scrollPos){var realInterval=this.frameHeight-this.height-this._scrollEl.getPadding("b");_scrollPos=_scrollPos<0?0:_scrollPos>realInterval?realInterval:_scrollPos;this._scrollPos=_scrollPos;this.contentEl.dom.style.position="absolute";this.element.scrollTo("top",Math.round(_scrollPos/realInterval*(this.canvasHeight-
this.frameHeight)));this._scrollEl.setTop(this.element.dom.scrollTop);this._scrollBarEl.dom.style.marginTop=Math.round(_scrollPos)+"px";var tmp=document.createElement("div");this.element.dom.appendChild(tmp);tmp.innerHTML=Math.random();tmp.parentNode.removeChild(tmp);if(_scrollPos>=realInterval)this.fireEvent(JSM.component.ScrollPane.EVENT_SCROLLEND,{scope:this})},getScrollPos:function(){return this._scrollPos},isScrollNeeded:function(){return this.element.getHeight()<this.contentEl.getHeight()},
scrollToBottom:function(){this.setScrollPos(this.canvasHeight-this.frameHeight)},computeHeight:function(){this.frameHeight=this.element.getHeight()-this._scrollEl.getPadding("b");this.canvasHeight=this.contentEl.getHeight();if(parseInt(this.frameHeight)==0||parseInt(this.canvasHeight)==0)return this.defaultHeight;var ratio=this.frameHeight/this.canvasHeight;return this.frameHeight*ratio},setHeight:function(value){var _newHeight=Math.round(value);_newHeight=_newHeight<this.minScrollBarHeight?this.minScrollBarHeight:
_newHeight;this.height=_newHeight;this._scrollBarEl.setHeight(_newHeight)},show:function(){this._scrollEl.stopFx();if(this.disabledSetHeight==false)this.setHeight(this.computeHeight());if(this.frameHeight>this.canvasHeight)this._scrollEl.hide();else this._scrollEl.show();if(this.showDuration!=0){this._scrollEl.animate({opacity:{from:0,to:1}},this.showDuration);if(this.isAnimateScrollBar==true)this._scrollBarEl.animate({opacity:{from:0,to:1}},this.showDuration)}var pos=Math.round((this.frameHeight-
this.height-this._scrollEl.getPadding("b"))*(this.element.dom.scrollTop/(this.canvasHeight-this.frameHeight)));this.setScrollPos(pos)},hide:function(){if(this.isSetHeight==true)this.disabledSetHeight=true;if(this._scrollEl.isVisible()){if(this.hideDuration>0)this._scrollEl.animate({duration:this.hideDuration,opacity:{from:1,to:0}});else this._scrollEl.hide();if(this.isAnimateScrollBar==true)this._scrollBarEl.animate({duration:this.hideDuration,opacity:{from:1,to:0}})}},onScrollHide:function(){this.hide()},
onMouseEnter:function(){if(this.hideOnMouseout){this.hideTask.cancel();this.show(this.showDuration)}},onMouseLeave:function(){if(!this._isMoving&&this.hideOnMouseout){this.hideTask.cancel();this.hideTask.delay(this.hideDelayTime)}},onBodyMouseLeave:function(ev,target){this.onMouseLeave(ev,target)},disableSelect:function(){var html=Ext.get(document.getElementsByTagName("html")[0]);html.on("dragstart",function(ev){console.info("dragStart");ev.preventDefault();return false}).on("selectstart",function(ev){console.info("selectStart");
ev.preventDefault();return false});delete html;Ext.DomHelper.disableSelect(Ext.getBody().dom);Ext.DomHelper.disableSelect(this.element.dom)},enableSelect:function(){var html=Ext.get(document.getElementsByTagName("html")[0]);html.un("dragstart",function(ev){console.info("dragStart");ev.preventDefault();return false}).un("selectstart",function(ev){console.info("selectStart");ev.preventDefault();return false});delete html;Ext.DomHelper.enableSelect(Ext.getBody().dom);Ext.DomHelper.enableSelect(this.element.dom)},
onMouseWheel:function(ev){ev.preventDefault();if(this.isSetHeight==true)this.computeHeight();var pos=Math.round((this.frameHeight-this.height-this._scrollEl.getPadding("b"))*(this.element.dom.scrollTop/(this.canvasHeight-this.frameHeight)));if(ev.getWheelDelta()>0)this.setScrollPos(pos-this.scrollDelta);else if(ev.getWheelDelta()<0)this.setScrollPos(pos+this.scrollDelta);this.fireEvent(JSM.component.ScrollPane.EVENT_MOUSEWHEEL,{scope:this,ev:ev,pos:pos})},onWindowResize:function(){this.computeHeight()},
bind:function(){this.element.on("mouseenter",this.onMouseEnter,this).on("mouseleave",this.onMouseLeave,this);this.element.on("mousewheel",this.onMouseWheel,this);this._scrollEl.on("mousedown",this.onScrollMouseDown,this);Ext.getBody().on("mouseup",this.onScrollMouseUp,this).on("mousemove",this.onScrollMouseMove,this).on("mouseleave",this.onBodyMouseLeave,this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){this.element.un("mouseenter",this.onMouseEnter,this).un("mouseleave",
this.onMouseLeave,this);this.element.un("mousewheel",this.onMouseWheel,this);this._scrollEl.un("mousedown",this.onScrollMouseDown,this);Ext.getBody().un("mouseup",this.onScrollMouseUp,this).un("mousemove",this.onScrollMouseMove,this).un("mouseleave",this.onBodyMouseLeave,this);Ext.fly(window).un("resize",this.onWindowResize,this)}});Ext.namespace("JSM.component");JSM.component.Scroller=function(el,config){JSM.component.Scroller.superclass.constructor.call(this,el,config)};
JSM.component.Scroller.EVENT_SCROLL="scroller-scroll";JSM.component.Scroller.EVENT_SCROLL_TOP="scroller-top";JSM.component.Scroller.EVENT_SCROLL_BOTTOM="scroller-bottom";JSM.component.Scroller.SCROLL_DIRECTION_UP="scroll-direction-up";JSM.component.Scroller.SCROLL_DIRECTION_DOWN="scroll-direction-down";
Chaos.extend(JSM.component.Scroller,Chaos.Object,{name:"Scroller",tpl:'<div class="{cls}"><span>&nbsp;</span></div>',containerId:undefined,contentId:undefined,mainContainerId:undefined,scrollBarClass:"scrollbar-handle",useNativeScroll:true,scrollDelta:30,manageBackgroundScroll:true,bottomValue:0,minScrollBarHeight:25,animateScrollBarDisplay:true,animateDuration:0.3,autoHideScrollBar:false,_scrollBarEl:undefined,_containerEl:undefined,_contentEl:undefined,_isScrollingWithMouse:false,_currentScrollPosition:0,
_startY:0,_topPosition:0,_isScrollDisabled:true,_isElementOvered:false,_isScrollBarNeeded:false,init:function(el,config){this._containerEl=Ext.get(this.containerId);this._containerEl.setStyle({"width":this.element.getWidth()+17+"px","overflow-x":"hidden","overflow-y":"scroll","position":"absolute"});this._containerEl.scrollTo("top",0);if(!this.contentId)this._contentEl=this._containerEl;else{this._contentEl=Ext.get(this.contentId);this._contentEl.setStyle({"overflow":"hidden"})}this.addEvents(JSM.component.Scroller.EVENT_SCROLL,
JSM.component.Scroller.EVENT_SCROLL_TOP,JSM.component.Scroller.EVENT_SCROLL_BOTTOM);if(!this.useNativeScroll)this.disableScroll(true);this.setScrollBar();JSM.component.Scroller.superclass.init.call(this,el,config)},setScrollBar:function(){var _scrollbarTpl=new Ext.Template(this.tpl);this._scrollBarEl=_scrollbarTpl.append(this.element.dom,{cls:this.scrollBarClass},true);if(this.autoHideScrollBar)this._scrollBarEl.setOpacity(0);this.setScrollBarHeight();return this._scrollBarEl},getScrollBar:function(){return this._scrollBarEl},
getRatio:function(){return this._contentEl.dom.scrollHeight!=0?this._containerEl.getHeight()/this._contentEl.dom.scrollHeight:this._contentEl.dom.scrollHeight},setScrollBarHeight:function(){var _containerHeight=this._containerEl.getHeight(),_newHeight=_containerHeight*this.getRatio();_newHeight=_newHeight<this.minScrollBarHeight?this.minScrollBarHeight:_newHeight;this.getScrollBar().setHeight(_newHeight);this.setScrollBarPosition();this._isScrollBarNeeded=_newHeight!=_containerHeight;if(this._isElementOvered)this.displayScrollBar(this._isScrollBarNeeded)},
onContainerScroll:function(ev){if(!this.useNativeScroll){this.fireEvent(JSM.component.Scroller.EVENT_SCROLL,{ev:ev,scope:this});var _delta=ev.getWheelDelta(),_scrollTop;_scrollTop=(_delta<0?1:-1)*this.scrollDelta;this._containerEl.dom.scrollTop+=_scrollTop;this.checkEdges();ev.preventDefault()}this.setScrollBarPosition();this.fireEvent(JSM.component.Scroller.EVENT_SCROLL,{ev:ev,scope:this})},onContainerMousewheel:function(ev){if(this.useNativeScroll){this.fireEvent(JSM.component.Scroller.EVENT_SCROLL,
{ev:ev,scope:this});this.setScrollDirection(ev);this.checkEdges()}},setScrollBarPosition:function(){var _position=this._containerEl.dom.scrollTop/this.getContentHeight(),_scrollPosition=_position*this.getBoxHeight();if(!isNaN(_position)){this.getScrollBar().setStyle("top",Math.round(_scrollPosition)+"px");if(!this._isScrollingWithMouse)this._currentScrollPosition=_scrollPosition}else this.displayScrollBar(false)},getContentHeight:function(){return this._containerEl.dom.scrollHeight-this._containerEl.getHeight()},
onScrollBarMouseDown:function(ev){JSM.Util.setCursor("pointer");this._startY=ev.browserEvent.clientY;this._isScrollingWithMouse=true;this.element.on("mousemove",this.onMouseMove,this);this.element.on("mouseup",this.onMouseUp,this);this.disableSelect();return false},onScrollBarMouseOver:function(){if(!this._isScrollDisabled)this.disableScroll(true)},onScrollBarMouseOut:function(){if(this._isScrollDisabled)this.disableScroll(false)},onBodyMouseUp:function(){if(this._isScrollingWithMouse){this.mouseUp();
JSM.Util.setCursor()}},onMouseMove:function(ev){if(this._isScrollingWithMouse){var _scrollPosition=ev.browserEvent.clientY-this._startY+this._currentScrollPosition;var contentPosition=_scrollPosition/this.getBoxHeight();this._containerEl.scrollTo("top",Math.round(this.getContentHeight()*contentPosition));if(!this.useNativeScroll)this.setScrollBarPosition();this.checkEdges()}},onMouseUp:function(){this.mouseUp()},mouseUp:function(){this._currentScrollPosition=Math.ceil(this._containerEl.dom.scrollTop/
this.getContentHeight()*this.getBoxHeight());this._isScrollingWithMouse=false;this.enableSelect()},getBoxHeight:function(){return this.element.getHeight()-this._scrollBarEl.getHeight()},checkEdges:function(){if(this.bottomValue&&this._containerEl.dom.scrollTop>this.getContentHeight()-this.bottomValue)if(this.getScrollDirection()==JSM.component.Scroller.SCROLL_DIRECTION_UP){this.fireEvent(JSM.component.Scroller.EVENT_SCROLL_TOP,{scope:this});return true}else{this.fireEvent(JSM.component.Scroller.EVENT_SCROLL_BOTTOM,
{scope:this});return true}else if(this._containerEl.dom.scrollTop==this.getContentHeight()&&this.getScrollDirection()==JSM.component.Scroller.SCROLL_DIRECTION_DOWN||this._containerEl.dom.scrollTop===0&&this.getScrollDirection()==JSM.component.Scroller.SCROLL_DIRECTION_UP){if(!this._isScrollDisabled)this.disableScroll(true);if(this.getScrollDirection()==JSM.component.Scroller.SCROLL_DIRECTION_UP){this.fireEvent(JSM.component.Scroller.EVENT_SCROLL_TOP,{scope:this});return true}else{this.fireEvent(JSM.component.Scroller.EVENT_SCROLL_BOTTOM,
{scope:this});return true}}else if(this._isScrollDisabled)this.disableScroll(false);return false},setScrollDirection:function(ev){var _dir=ev.getWheelDelta()==1?JSM.component.Scroller.SCROLL_DIRECTION_UP:JSM.component.Scroller.SCROLL_DIRECTION_DOWN;if(this.getScrollDirection()!=_dir)this._scrollDirection=_dir;return this._scrollDirection},getScrollDirection:function(){return this._scrollDirection},disableSelect:function(){var html=Ext.get(document.getElementsByTagName("html")[0]);html.on("dragstart",
function(ev){ev.preventDefault();return false}).on("selectstart",function(ev){ev.preventDefault();return false});delete html;Ext.DomHelper.disableSelect(Ext.getBody().dom);Ext.DomHelper.disableSelect(this.element.dom)},enableSelect:function(){var html=Ext.get(document.getElementsByTagName("html")[0]);html.un("dragstart",function(ev){ev.preventDefault();return false}).un("selectstart",function(ev){ev.preventDefault();return false});delete html;Ext.DomHelper.enableSelect(Ext.getBody().dom);Ext.DomHelper.enableSelect(this.element.dom)},
onDocumentMouseMove:function(ev,target){if(this._containerEl.contains(target)||target.className==this.scrollBarClass||this.getScrollBar().contains(target)){if(!this._isElementOvered){if(this.autoHideScrollBar)this.displayScrollBar(this._isScrollBarNeeded);this._isElementOvered=true}}else if(this._isElementOvered){if(this.autoHideScrollBar)this.displayScrollBar(false);this._isElementOvered=false;if(!this._isScrollDisabled)this.disableScroll(true)}},onWindowResize:function(){this.setScrollBarHeight()},
disableScroll:function(disable){if(typeof disable=="boolean"&&this.manageBackgroundScroll){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL,{scope:this,disable:disable});this._isScrollDisabled=disable}},displayScrollBar:function(display){var animate=this.animateScrollBarDisplay?{duration:this.animateDuration}:false,alpha=display?1:0;if(this.animateScrollBarDisplay)TweenMax.to(this.getScrollBar().dom,this.animateDuration,{alpha:alpha});else if(display)this.getScrollBar().show();else this.getScrollBar().hide(animate)},
bind:function(){JSM.component.Scroller.superclass.bind.call(this);var wheelEvent=Ext.isGecko?"DOMMouseScroll":"mousewheel";if(this.useNativeScroll){this._containerEl.on("scroll",this.onContainerScroll,this);this._containerEl.on(wheelEvent,this.onContainerMousewheel,this)}else this._containerEl.on(wheelEvent,this.onContainerScroll,this);this.getScrollBar().on("mousedown",this.onScrollBarMouseDown,this).on("mouseover",this.onScrollBarMouseOver,this).on("mouseout",this.onScrollBarMouseOut,this);Ext.getBody().on("mouseup",
this.onBodyMouseUp,this);Ext.get(document).on("mousemove",this.onDocumentMouseMove,this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){JSM.component.Scroller.superclass.unbind.call(this);var wheelEvent=Ext.isGecko?"DOMMouseScroll":"mousewheel";if(this.useNativeScroll){this._containerEl.un("scroll",this.onContainerScroll,this);this._containerEl.un(wheelEvent,this.onContainerMousewheel,this)}else this._containerEl.un(wheelEvent,this.onContainerScroll,this);this.disableScroll(false);
Ext.get(document).un("mousemove",this.onDocumentMouseMove,this);this.getScrollBar().un("mousedown",this.onScrollBarMouseDown,this);Ext.getBody().un("mouseup",this.onBodyMouseUp,this)}});Ext.namespace("JSM.component");JSM.component.SearchField=function(el,config){JSM.component.SearchField.superclass.constructor.call(this,el,config)};JSM.component.SearchField.SEARCHFIELD_KEYPRESS="searchFieldKeyPress";JSM.component.SearchField.SEARCHFIELD_KEYUP="searchFieldKeyUp";
JSM.component.SearchField.SEARCHFIELD_ENTERPRESSED="searchFieldEnterPressed";JSM.component.SearchField.SEARCHFIELD_BLUR="searchFieldBlur";JSM.component.SearchField.SEARCHFIELD_FOCUS="searchFieldFocus";JSM.component.SearchField.SEARCHFIELD_SUBMIT="searchFieldSubmit";JSM.component.SearchField.SEARCHFIELD_CLICK="searchFieldClick";JSM.component.SearchField.SEARCHFIELD_CLICKSUBMIT="searchFieldClickSubmit";JSM.component.SearchField.SEARCHFIELD_ONDELETE_FIELDVALUE="onDeleteSearchFieldValue";
JSM.component.SearchField.SEARCHFIELD_MOUSEOVER_ONSUBMITBUTTON="searchFieldMouseOverOnSubmitButton";JSM.component.SearchField.SEARCHFIELD_MOUSEOUT_ONSUBMITBUTTON="searchFieldMouseOutOnSubmitButton";JSM.component.SearchField.EVENT_SEARCHFIELD_VALUE_CHANGE="searchfield-value-change";
Chaos.extend(JSM.component.SearchField,Chaos.Object,{name:"searchfield",durationShow:1,durationHide:1,doSubmitOnEnter:false,createLoader:false,resetButtonClass:"reset_search_button",loaderClass:"loader_gif",loaderId:"loader_anim",originalValue:undefined,noResultString:undefined,showLoader:"showLoader",showReset:"showReset",hideAll:"hideAll",hoverFieldClass:"hover_field",inputFieldSel:".input_field",isDisabledOnEnter:false,maxSearchFieldCharLimitNumber:100,headerSearchBarId:"header_search_bar",_preventBlurOnSubmit:false,
_searchFieldCharacterCounterCmp:undefined,init:function(el,config){this.formDomEl=this.element.findParent("form");this.formEl=Ext.get(this.formDomEl);this.inputFieldEl=this.formEl.select(this.inputFieldSel).item(0);if(this.doSubmitOnEnter==true)this.submitButtonEl=this.formEl.select("input[type=submit]");this.addEvents(JSM.component.SearchField.SEARCHFIELD_KEYPRESS,JSM.component.SearchField.SEARCHFIELD_KEYUP,JSM.component.SearchField.SEARCHFIELD_ENTERPRESSED,JSM.component.SearchField.SEARCHFIELD_BLUR,
JSM.component.SearchField.SEARCHFIELD_FOCUS,JSM.component.SearchField.SEARCHFIELD_SUBMIT,JSM.component.SearchField.SEARCHFIELD_CLICK,JSM.component.SearchField.SEARCHFIELD_CLICKSUBMIT,JSM.component.SearchField.SEARCHFIELD_ONDELETE_FIELDVALUE,JSM.component.SearchField.SEARCHFIELD_MOUSEOVER_ONSUBMITBUTTON,JSM.component.SearchField.SEARCHFIELD_MOUSEOUT_ONSUBMITBUTTON,JSM.window.DropDownMenu.STATE_PANEL_OPENED,JSM.window.DropDownMenu.STATE_PANEL_HIDED,JSM.component.Button.BUTTON_CLICK,JSM.window.DropDownMenu.EVENT_MENU_ITEM_CLICK,
JSM.window.DropDownMenu.EVENT_BODY_CLICK,JSM.window.DropDownMenu.EVENT_SUB_MENU_HIDE,JSM.component.SearchField.EVENT_SEARCHFIELD_VALUE_CHANGE);this.preventAutoComplete();if(this.createLoader===true)this.createLoaderContainer(this.loaderFor);this.loaderEl=Ext.get(this.loaderId);if(this.element.dom.value!=""){this.originalValue=this.element.dom.value;this.handleLoader(this.showReset);this.loaderEl.on("click",this.onLoaderClick,this)}else if(!this.createLoader)this.loaderEl.on("click",this.onDeleteSearchFieldValue,
this);this._searchFieldCharacterCounterCmp=new JSM.component.CharacterCounter(this.formDomEl.id,{maxChar:this.maxSearchFieldCharLimitNumber,hasWarningLimit:false,inputId:this.headerSearchBarId,isShowCounter:false,isMaxCharSound:true});JSM.component.SearchField.superclass.init.call(this,el,config)},preventAutoComplete:function(){this.element.set({"autocomplete":"off"})},onLoaderClick:function(ev,target){if(target.className==this.resetButtonClass)this.jumpToMainPage()},jumpToMainPage:function(){window.location.replace(Chaos.getConfig("mainPageUrl"))},
createLoaderContainer:function(loaderFor){if(!Ext.get(this.loaderId)){var insertBlock=Ext.get(loaderFor);Ext.DomHelper.insertAfter(insertBlock,{tag:"div",id:this.loaderId});this.loaderEl=Ext.get(this.loaderId);this.loaderEl.on("click",this.onDeleteSearchFieldValue,this)}},handleLoader:function(method){switch(method){case this.showLoader:this.loaderEl.dom.className=this.loaderClass;break;case this.showReset:this.loaderEl.dom.className=this.resetButtonClass;break;case this.hideAll:this.loaderEl.set({"class":null});
break}},onDeleteSearchFieldValue:function(ev,target){if(Ext.get(ev.target).hasClass(this.resetButtonClass)){this.fireEvent(JSM.component.SearchField.SEARCHFIELD_ONDELETE_FIELDVALUE,ev);this.element.dom.value="";this.element.focus();this.handleLoader(this.hideAll)}else this.element.focus()},show:function(params){if(!this.formEl.isVisible())this.formEl.fadeIn(params);else if(params.callback!=undefined)params.callback()},hide:function(params){this.formEl.fadeOut(params)},onChangeSearchFieldBg:function(){if(this.inputFieldEl)this.inputFieldEl.removeClass(this.hoverFieldClass);
if(this.formEl)this.formEl.removeClass(this.hoverFieldClass);if(this.loaderEl.hasClass(this.loaderClass))this.handleLoader(this.showReset)},onFireClickOnElement:function(ev,target,options){this.fireEvent(JSM.component.SearchField.SEARCHFIELD_CLICK,ev,target,options,this)},onFireKeyPress:function(ev,target,options){if(ev.getCharCode()==13&&Ext.isIE8&&this.isDisabledOnEnter==true){ev.preventDefault();ev.stopPropagation()}this.fireEvent(JSM.component.SearchField.SEARCHFIELD_KEYPRESS,ev,target,options,
this);if(this._searchFieldValue!=this.element.dom.value){this._searchFieldValue=this.element.dom.value;this.fireEvent(JSM.component.SearchField.EVENT_SEARCHFIELD_VALUE_CHANGE,ev,target,options,this)}},onFireKeyUp:function(ev,target,options){if(this.originalValue!=undefined&&this.originalValue!=this.element.dom.value){this.loaderEl.un("click",this.onLoaderClick,this);this.originalValue=undefined;this.loaderEl.on("click",this.onDeleteSearchFieldValue,this)}this.fireEvent(JSM.component.SearchField.SEARCHFIELD_KEYUP,
ev,target,options,this)},onFireOnFocus:function(ev,target,options){if(this.inputFieldEl)this.inputFieldEl.addClass(this.hoverFieldClass);if(this.formEl)this.formEl.addClass(this.hoverFieldClass);this.fireEvent(JSM.component.SearchField.SEARCHFIELD_FOCUS,ev,target,options,this)},onFireOnBlur:function(ev,target,options){if(this._preventBlurOnSubmit){ev.preventDefault();this._preventBlurOnSubmit=false}else this.fireEvent(JSM.component.SearchField.SEARCHFIELD_BLUR,ev,target,options,this)},onFireOnSubmit:function(ev,
target,options){if(this.doSubmitOnEnter===true){this._preventBlurOnSubmit=true;this.fireEvent(JSM.component.SearchField.SEARCHFIELD_SUBMIT,ev,target,options,this)}},onFireClickOnSubmitButton:function(ev,target,options){if(this.doSubmitOnEnter===true){this._preventBlurOnSubmit=true;this.fireEvent(JSM.component.SearchField.SEARCHFIELD_CLICKSUBMIT,ev,target,options,this)}},onFireMouseOverOnSubmitButton:function(ev,target,options){this.fireEvent(JSM.component.SearchField.SEARCHFIELD_MOUSEOVER_ONSUBMITBUTTON,
ev,target,options,this)},onFireMouseOutOnSubmitButton:function(ev,target,options){this.fireEvent(JSM.component.SearchField.SEARCHFIELD_MOUSEOUT_ONSUBMITBUTTON,ev,target,options,this)},bind:function(){JSM.component.SearchField.superclass.bind.call(this);this.element.on({"click":{fn:this.onFireClickOnElement,scope:this},"keypress":{fn:this.onFireKeyPress,scope:this},"keyup":{fn:this.onFireKeyUp,scope:this},"focus":{fn:this.onFireOnFocus,scope:this},"blur":{fn:this.onFireOnBlur,scope:this},"submit":{fn:this.onFireOnSubmit,
scope:this}});this.element.on("blur",this.onChangeSearchFieldBg,this);this.formEl.on("submit",this.onFireOnSubmit,this);if(this.doSubmitOnEnter===true)this.submitButtonEl.on({"click":{fn:this.onFireClickOnSubmitButton,scope:this},"mouseover":{fn:this.onFireMouseOverOnSubmitButton,scope:this},"mouseout":{fn:this.onFireMouseOutOnSubmitButton,scope:this}})},unbind:function(){JSM.component.SearchField.superclass.unbind.call(this);this.element.un({"click":{fn:this.onFireClickOnElement,scope:this},"keypress":{fn:this.onFireKeyPress,
scope:this},"keyup":{fn:this.onFireKeyUp,scope:this},"focus":{fn:this.onFireOnFocus,scope:this},"blur":{fn:this.onFireOnBlur,scope:this},"submit":{fn:this.onFireOnSubmit,scope:this}});this.element.un("blur",this.onChangeSearchFieldBg,this);this.formEl.un("submit",this.onFireOnSubmit,this);if(this.doSubmitOnEnter===true)this.submitButtonEl.un({"click":{fn:this.onFireClickOnSubmitButton,scope:this},"mouseover":{fn:this.onFireMouseOverOnSubmitButton,scope:this},"mouseout":{fn:this.onFireMouseOutOnSubmitButton,
scope:this}});this.loaderEl.un("click",this.onDeleteSearchFieldValue,this);this.purgeListeners()}});Ext.namespace("JSM.component");JSM.component.SelectList=function(el,config){JSM.component.SelectList.superclass.constructor.call(this,el,config)};JSM.component.SelectList.EVENT_SHOW="selectlist-show";JSM.component.SelectList.EVENT_HIDE="selectlist-hide";JSM.component.SelectList.EVENT_ITEM_SELECT="selectlist-item-select";
Chaos.extend(JSM.component.SelectList,Chaos.Object,{name:"SelectList",selectFieldSel:".select",selectArrowSel:".select_arrow",dropDownListSel:".select_list_container",activeClass:"active",activeSel:".active",inputSel:undefined,hiddenInputSel:undefined,listItemSel:".list_item",listItemsEl:undefined,selectOptionSel:".select_option",hideEl:undefined,pageId:undefined,hasMoreList:false,scrollPaneContainerId:"language_list_container",preventDefault:true,hiddenItemClass:"hidden_item",removeMarginClass:"remove_margin",
optionEls:undefined,textContainerSel:".language_selection",defaultValue:undefined,cancelBtnSel:undefined,scrollPaneConfig:{contentSel:"ul"},isScrollPaneNeeded:true,_inputEl:undefined,_activeInputEl:undefined,_selectTagEl:undefined,_cancelBtnEl:undefined,_selectArrowEl:undefined,_activeArrowEl:undefined,_dropDownListsEl:undefined,_textContainerEl:undefined,_selectedListEl:undefined,init:function(el,config){this._inputEl=this.element.select(this.inputSel).item(0);this._selectTagEl=this.element.select("select").item(0);
this.defaultValue=this._inputEl.getValue();if(this.cancelBtnSel)this._cancelBtnEl=Ext.get(this.element.parent()).select(this.cancelBtnSel).item(0);JSM.component.SelectList.superclass.init.call(this,el,config);this.addEvents(JSM.component.SelectList.EVENT_SHOW,JSM.component.SelectList.EVENT_HIDE,JSM.component.SelectList.EVENT_ITEM_SELECT);this._selectArrowEl=this.element.select(this.selectArrowSel).item(0);this._selectedListEl=this.element.select(this.dropDownListSel).item(0);this._textContainerEl=
this.element.select(this.textContainerSel).item(0);this._dropDownListsEl=Ext.select(this.dropDownListSel)},onDropDownListClick:function(ev){ev.preventDefault();var getValue,text,sumOfListItem,selectListEl,optionEl;selectListEl=this.element.select(this.selectArrowSel).item(0);if(this.hiddenInputSel)this._hiddenInputEl=this.element.select(this.hiddenInputSel).item(0);this.optionEls=this._selectedListEl.select(this.selectOptionSel);if(!selectListEl.hasClass(this.activeClass)){if(this.hasMoreList==true)this._dropDownListsEl.each(this.onCloseOpenedList,
this);this._inputEl.focus();getValue=this._inputEl.getValue();sumOfListItem=this.optionEls.getCount();for(var i=0;i<=sumOfListItem-1;i++){optionEl=this.optionEls.item(i);text=this.getText(optionEl);if(getValue==text)optionEl.addClass(this.hiddenItemClass);else optionEl.removeClass(this.hiddenItemClass)}this._selectArrowEl.addClass(this.activeClass);this._selectedListEl.show();this.fireEvent(JSM.component.SelectList.EVENT_SHOW,{scope:this});if(Ext.isIE7&&this.hideEl!=null)this.hideEl.hide();if(Ext.get(this.scrollPaneContainerId)!=
null&&this.isScrollPaneNeeded&&!(this.selectListScrollPane instanceof JSM.component.ScrollPane))this.selectListScrollPane=new JSM.component.ScrollPane(this.scrollPaneContainerId,this.scrollPaneConfig);else if(this.selectListScrollPane)this.selectListScrollPane.show();Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_SELECT_LIST,{scope:this})}else this.onHideDropDownList()},onCloseOpenedList:function(target){if(target.isVisible()){target.setStyle("display","none");this.element.select(this.activeSel).removeClass(this.activeClass)}},
getText:function(el){var text;if(Ext.isIE)text=el.dom.children[0].innerText;else text=el.dom.children[0].textContent;return text},getHiddenInputEl:function(){return this._hiddenInputEl},onItemClick:function(ev,target){if(this.preventDefault)ev.preventDefault();var el=Ext.get(target),itemContent,hiddenContent;itemContent=el.dom.innerHTML;hiddenContent=el.getAttribute("rel");if(this._inputEl&&this._textContainerEl==null)this._inputEl.dom.value=itemContent;else this._textContainerEl.dom.innerHTML=itemContent;
if(this.getHiddenInputEl())this.getHiddenInputEl().dom.value=hiddenContent;if(this._selectTagEl){var optionArray=this._selectTagEl.dom.options;for(var i=0;i<optionArray.length;i++)if(optionArray[i].value==el.getAttribute("rel"))optionArray[i].selected=true}this.onHideDropDownList();this.fireEvent(JSM.component.SelectList.EVENT_ITEM_SELECT,{scope:this,target:el})},onHideDropDownList:function(ev,target){if(!this.element.contains(Ext.get(target))){if(Ext.isIE7&&this.hideEl!=null)this.hideEl.show();if(this.optionEls!=
undefined)this.optionEls.removeClass(this.removeMarginClass).removeClass(this.hiddenItemClass);this._selectedListEl.setStyle("display","none");this.fireEvent(JSM.component.SelectList.EVENT_HIDE,{scope:this});this.element.select(this.activeSel).removeClass(this.activeClass)}},onCancelBtnClick:function(){this._inputEl.dom.value=this.defaultValue},bind:function(){JSM.component.SelectList.superclass.bind.call(this);this.element.child(this.selectArrowSel).on("click",this.onDropDownListClick,this);this.element.select(this.inputSel).on("click",
this.onDropDownListClick,this);this.element.select(this.listItemSel).on("click",this.onItemClick,this);Ext.getBody().on("click",this.onHideDropDownList,this);if(this._cancelBtnEl)this._cancelBtnEl.on("click",this.onCancelBtnClick,this)},unbind:function(){JSM.component.SelectList.superclass.unbind.call(this);this.element.select(this.selectArrowSel).un("click",this.onDropDownListClick,this);this.element.select(this.inputSel).un("click",this.onDropDownListClick,this);this.element.select(this.listItemSel).un("click",
this.onItemClick,this);Ext.getBody().un("click",this.onHideDropDownList,this);if(this._cancelBtnEl)this._cancelBtnEl.un("click",this.onCancelBtnClick,this)}});Ext.namespace("JSM.component.SlideBox");JSM.component.SlideBox=function(el,config){JSM.component.SlideBox.superclass.constructor.call(this,el,config)};JSM.component.SlideBox.EVENT_SLIDEBOX_OPEN="slidebox-open";JSM.component.SlideBox.EVENT_SLIDEBOX_CLOSE="slidebox-close";JSM.component.SlideBox.EVENT_SLIDEBOX_HIDE="slidebox-hide";
Chaos.extend(JSM.component.SlideBox,Chaos.Object,{name:"slidebox",slideBoxLeftPos:0,topPosition:0,hideButtonSel:".hide_btn",closeButtonSel:".close_btn",durationTime:1,elementClass:undefined,isSlideBoxOpened:false,init:function(el,config){JSM.component.SlideBox.superclass.init.call(this,el,config);this.addEvents(JSM.component.SlideBox.EVENT_SLIDEBOX_CLOSE,JSM.component.SlideBox.EVENT_SLIDEBOX_HIDE);this.slideBox()},slideBox:function(){var self=this;this.element.setTop(this.topPosition);this.element.setVisible(true);
this.element.animate({left:{to:0,from:this.slideBoxLeftPos}},this.durationTime,function(){Chaos.fireEvent(JSM.component.SlideBox.EVENT_SLIDEBOX_OPEN,self);self.isSlideBoxOpened=true},"easeOut","run")},onHideBoxClick:function(ev,target,options){var callback,self=this;if(!this.element.hasClass(this.elementClass)){this.fireEvent(JSM.component.SlideBox.EVENT_SLIDEBOX_HIDE,ev,target,options);callback=function(){self.isSlideBoxOpened=false};this.element.animate({left:{to:this.slideBoxLeftPos,from:0}},this.durationTime,
callback,"easeOut","run")}},onCloseBoxClick:function(ev,target,options){if(!this.element.hasClass(this.elementClass))this.fireEvent(JSM.component.SlideBox.EVENT_SLIDEBOX_CLOSE,ev,target,options)},bind:function(){JSM.component.SlideBox.superclass.bind.call(this);this.element.select(this.hideButtonSel).on("click",this.onHideBoxClick,this);this.element.select(this.closeButtonSel).on("click",this.onCloseBoxClick,this)},unbind:function(){JSM.component.SlideBox.superclass.unbind.call(this);this.element.select(this.hideButtonSel).un("click",
this.onHideBoxClick,this);this.element.select(this.closeButtonSel).un("click",this.onCloseBoxClick,this)}});Ext.namespace("JSM.component");JSM.component.SlideButton=function(el,config){JSM.component.SlideButton.superclass.constructor.call(this,el,config)};JSM.component.SlideButton.BUTTON_CLICKED="slidebutton-clicked";JSM.component.SlideButton.BUTTON_SLIDE_IN="slidebutton-slide-in";JSM.component.SlideButton.BUTTON_SLIDE_OUT="slidebutton-slide-out";JSM.component.SlideButton.BUTTON_MOUSE_OVER="slidebutton-mouse-over";
JSM.component.SlideButton.BUTTON_MOUSE_OUT="slidebutton-mouse-out";JSM.component.SlideButton.BUTTON_READY="slidebutton-ready";
Chaos.extend(JSM.component.SlideButton,Chaos.Object,{name:"slideButton",slideButtonIconCls:"button_icon",slideButtonTitleSel:"fav_btn_title",slideButtonIconEl:undefined,slideButtonWidth:37,showLoading:false,duration:0.2,changeTitles:false,setLoadingTitle:false,loadingClass:"loading",disabledClass:"disabled-button",hiddenIconCls:"hidden_side_icon",additionalPadding:1,_slideButtonTitleEl:undefined,_isActive:false,_originalSlideButtonTitle:undefined,_slidedIn:false,_buttonMessageShown:false,_delayedHideMessage:false,
_isDisabled:false,horizontalDirection:"left",startHorizontalPosition:0,init:function(el,config){var _elementStyle={},_animVars={};JSM.component.SlideButton.superclass.init.call(this,el,config);this._slideButtonTitleEl=this.element.select("#"+this.slideButtonTitleSel).item(0);this._originalSlideButtonTitle=this._slideButtonTitleEl.dom.innerHTML;this._slideButtonIconEl=this.element.select("."+this.slideButtonIconCls).item(0);if(this.startHorizontalPosition!=0)this._slideButtonTitleEl.setStyle({width:0});
this.displayIcon();_elementStyle[this.horizontalDirection]=-this.element.getWidth()+"px";_elementStyle.visibility="visible";this.element.setStyle(_elementStyle);_animVars.css={};_animVars.css[this.horizontalDirection]=this._getHorizontalPosition();_animVars.onCompleteScope=this,_animVars.onComplete=function(){this.fireEvent(JSM.component.SlideButton.BUTTON_READY,{scope:this})};TweenLite.to(this.element.dom,this.duration,_animVars);this.addEvents(JSM.component.SlideButton.BUTTON_CLICKED,JSM.component.SlideButton.BUTTON_SLIDE_IN,
JSM.component.SlideButton.BUTTON_SLIDE_OUT,JSM.component.SlideButton.BUTTON_MOUSE_OVER,JSM.component.SlideButton.BUTTON_READY)},_getHorizontalPosition:function(){if(this.startHorizontalPosition!=0)return this.startHorizontalPosition;else{var horizontalPosition=-(this.element.getWidth()-this.slideButtonWidth);return horizontalPosition}},onButtonClick:function(ev,target,options){ev.preventDefault();if(!this._isDisabled&&!this._isAnimating&&!this.element.hasClass(this.disabledClass)){if(!this._isActive&&
this._slideButtonTitleEl)this.setActive(true);if(this.showLoading)this.displayLoader(true);if(this._buttonMessageShown)this.changeButtonTitle();this.fireEvent(JSM.component.SlideButton.BUTTON_CLICKED,ev,target,options)}},onButtonDoubleClick:function(ev){ev.preventDefault();return false},setActive:function(active){this._isActive=active},isActive:function(){return this._isActive},changeButtonTitle:function(newTitle){if(this.changeTitles)this._slideButtonTitleEl.dom.innerHTML=newTitle||this._originalSlideButtonTitle;
return this},changeButtonIcon:function(newIconClass){if(newIconClass)this._slideButtonIconEl.dom.className=newIconClass;else this._slideButtonIconEl.dom.className=this.slideButtonIconCls;return this},displayLoader:function(display){if(display&&!this.element.hasClass(this.loadingClass)){if(this.setLoadingTitle)this.changeButtonTitle(Chaos.translate("Loading"));this.element.addClass(this.loadingClass)}else if(!display)this.element.removeClass(this.loadingClass)},onButtonTextMouseEnter:function(){if(!this._isActive&&
!this._isDisabled){this.fireEvent(JSM.component.SlideButton.BUTTON_MOUSE_OVER,{scope:this});this.slideIn();if(this._delayedHideMessage){this._delayedHideMessage.cancel();delete this._delayedHideMessage}}},onButtonTextMouseLeave:function(){if(!this._isActive&&!this._isDisabled){this.fireEvent(JSM.component.SlideButton.BUTTON_MOUSE_OUT,{scope:this});this.slideOut()}if(this._delayedHideMessage){this._delayedHideMessage.cancel();delete this._delayedHideMessage}},slideIn:function(callback,scope){var _animObject=
{},_callbackEvent={},_buttonCurrentTextWidth;_animObject.cssVars={};if(!this._slidedIn&&!this._isDisabled){_animObject.cssVars[this.horizontalDirection]=this.startHorizontalPosition;_animObject.currentElement=this.element;_callbackEvent={event:JSM.component.SlideButton.BUTTON_SLIDE_IN,callback:callback,scope:scope};this.slideButton(_animObject,_callbackEvent)}else try{callback.call(scope||this)}catch(exception){}},slideOut:function(callback,scope){var _animObject={},_callbackEvent={},_buttonCurrentTextWidth;
_animObject.cssVars={};if(!this._isActive&&this._slidedIn&&!this._isDisabled){_animObject.cssVars[this.horizontalDirection]=this._getHorizontalPosition();_animObject.currentElement=this.element;_callbackEvent={event:JSM.component.SlideButton.BUTTON_SLIDE_OUT,callback:callback,scope:scope};this.slideButton(_animObject,_callbackEvent)}try{callback.call(scope||this)}catch(exception){}},slideButton:function(animObject,callbackEvent){if(!this._isDisabled){this._isAnimating=true;this._slidedIn=this._slidedIn?
false:true;TweenLite.to(animObject.currentElement.dom,this.duration,{css:animObject.cssVars,onCompleteScope:this,onComplete:function(){if(callbackEvent.event)this.fireEvent(callbackEvent.event,{scope:this});try{callbackEvent.callback.call(callbackEvent.scope||this)}catch(exception){}this._isAnimating=false}})}},showButtonMessage:function(message,delayedHideNum,callback,callbackScope){if(!this._isDisabled){if(delayedHideNum){this._delayedHideMessage=new Ext.util.DelayedTask(function(){this.hideButtonMessage();
if(callback&&typeof callback=="function")callback.call(callbackScope||this)},this);this._delayedHideMessage.delay(delayedHideNum)}this.changeButtonTitle(message);this.slideIn();this._buttonMessageShown=true}return this},cancelDelayedHideMessage:function(hide){if(this._delayedHideMessage){this._delayedHideMessage.cancel();delete this._delayedHideMessage}if(hide)this.hideButtonMessage()},hideButtonMessage:function(callback,callbackScope){if(!this._isDisabled){this.reset();if(this._delayedHideMessage)delete this._delayedHideMessage;
if(callback&&typeof callback=="function")callback.call(callbackScope||this);this._buttonMessageShown=false}return this},displayIcon:function(){var hiddenIconEl=this.element.select("."+this.hiddenIconCls);if(hiddenIconEl.getCount()>0){hiddenIconEl.item(0).removeClass(this.hiddenIconCls);hiddenIconEl.item(0).addClass(this.slideButtonIconCls)}},reset:function(){if(!this._isDisabled){this.setActive(false);this.changeButtonTitle();this.slideOut();this.cancelDelayedHideMessage()}},disable:function(disable){this.reset();
this._isDisabled=typeof disable=="boolean"?disable:true},isDisabled:function(){return this._isDisabled},bind:function(){JSM.component.SlideButton.superclass.bind.call(this);this.element.on("click",this.onButtonClick,this).on("dblclick",this.onButtonDoubleClick,this).on("mouseenter",this.onButtonTextMouseEnter,this).on("mouseleave",this.onButtonTextMouseLeave,this)},unbind:function(){JSM.component.SlideButton.superclass.unbind.call(this);this.element.un("click",this.onButtonClick,this).un("dblclick",
this.onButtonDoubleClick,this).un("mouseenter",this.onButtonTextMouseEnter,this).un("mouseleave",this.onButtonTextMouseLeave,this)}});Ext.namespace("JSM.component");JSM.component.SlidePanel=function(el,config){JSM.component.SlidePanel.superclass.constructor.call(this,el,config)};JSM.component.SlidePanel.EVENT_BEFORE_SHOW="slidepanel-before-show";JSM.component.SlidePanel.EVENT_SHOW="slidepanel-show";
JSM.component.SlidePanel.EVENT_BEFORE_HIDE="slidepanel-before-hide",JSM.component.SlidePanel.EVENT_HIDE="slidepanel-hide";JSM.component.SlidePanel.GLOBALEVENT_OPEN="slidepanel-open";JSM.component.SlidePanel.GLOBALEVENT_CLOSE="slidepanel-close";
Chaos.extend(JSM.component.SlidePanel,Chaos.Object,{name:"SlidePanel",isFloating:true,slideBlockContainerId:undefined,slideBlockId:undefined,slideBlockOpacity:0.3,slideBlockPosition:"relative",fadeSlideBlockDuration:0.3,slideDirection:"marginLeft",animate:true,slideDuration:0.2,contentUrl:undefined,closeButtonSel:".close_button",headerHoverId:"header_hover",headerContainerId:"header_container",useMask:true,maskConfig:undefined,autoShow:false,closeOnEsc:true,closeOnMaskClick:true,additionalWidth:0,
defaultZIndex:1601,buttonId:undefined,slidedButtonClass:"slided",disabledScrollClass:"scroll-disabled",additionalHeight:5,closeOnButtonClick:false,_buttonEl:undefined,_closeButtonEl:undefined,_headerContainerEl:undefined,_slideBlockContainerEl:undefined,_slideBlockEl:undefined,_isShown:false,_mask:undefined,_maskConfig:undefined,_isAnimating:false,_offsetWidth:0,_isActive:false,init:function(el,config){if(this.buttonId)this._buttonEl=Ext.get(this.buttonId);this._closeButtonEl=this.element.select(this.closeButtonSel).item(0);
this._slideBlockContainerEl=Ext.get(this.slideBlockContainerId);this._slideBlockEl=Ext.get(this.slideBlockId);this._headerHoverEl=Ext.get(this.headerHoverId);this._headerContainerEl=Ext.get(this.headerContainerId);if(this._slideBlockEl)this._slideBlockEl.setStyle({position:this.slideBlockPosition});if(this.useMask){this._maskConfig={tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',maskPosition:"local",isVisibleMask:false,maskOpacity:0.6,useDefaultZindex:true,defaultZindex:1599,maskClass:"slidepanel_mask",
resizeOnWindowResize:false};Ext.apply(this._maskConfig,this.maskConfig);this._mask=new Chaos.Mask(this.element,this._maskConfig)}JSM.component.SlidePanel.superclass.init.call(this,el,config);this.addEvents(JSM.component.SlidePanel.EVENT_BEFORE_SHOW,JSM.component.SlidePanel.EVENT_SHOW,JSM.component.SlidePanel.EVENT_BEFORE_HIDE,JSM.component.SlidePanel.EVENT_HIDE);Chaos.addEvents(JSM.component.SlidePanel.GLOBALEVENT_OPEN,JSM.component.SlidePanel.GLOBALEVENT_CLOSE);if(this.autoShow)this.show()},getOffsetWidth:function(){return this.element.getWidth()+
this.additionalWidth},show:function(){if(!this.isVisible()){this.fireEvent(JSM.component.SlidePanel.EVENT_BEFORE_SHOW,{scope:this});this.element.setStyle({display:"block"});this.element.setStyle({top:this._headerContainerEl.getTop(true)+this._headerContainerEl.getHeight()-this.additionalHeight+"px"});this._offsetWidth=this.getOffsetWidth();this.element.setStyle({marginLeft:-this._offsetWidth+"px",visibility:"visible"});if(this.isFloating)this.element.setStyle({"z-index":this.defaultZIndex});var animObject;
animObject=0;if(this._mask){this._mask.show();if(this.closeOnMaskClick)this._mask.getMask().on("click",this.onMaskClick,this)}this._slideContent(animObject,JSM.component.SlidePanel.EVENT_SHOW);this._isShown=true;this.setActive(true);this._slideBlockContainerEl.addClass(this.disabledScrollClass);Chaos.fireEvent(JSM.component.SlidePanel.GLOBALEVENT_OPEN,{scope:this})}},_slideContent:function(animObj,eventType,callback){var self,actualHeight;self=this;actualHeight=document.documentElement.offsetHeight-
this._headerHoverEl.getHeight();if(this.animate){this._isAnimating=true;try{TweenLite.to(this.element.dom,this.slideDuration,{css:{marginLeft:animObj},onCompleteScope:this,onComplete:function(){if(self.isFloating){self.fireEvent(eventType,{scope:self});self._isAnimating=false}if(callback)callback.call(self)}})}catch(e){}this.actualZindex=parseInt(this.element.parent().getStyle("z-index"));this.element.parent().setStyle("z-index",this.actualZindex+1);this.element.parent().parent().setStyle("z-index",
this.actualZindex+1);this.element.setHeight(actualHeight);if(!this.isFloating&&this._slideBlockEl){try{TweenLite.to(this.element.dom,this.slideDuration,{css:{marginLeft:animObj},onCompleteScope:this,onComplete:function(){self.fireEvent(eventType,{scope:self});self._isAnimating=false}})}catch(e){}if(this._mask){var _maskEl=this._mask.getMask();try{TweenLite.to(_maskEl.dom,this.slideDuration,{css:{position:"fixed"},onCompleteScope:this,onComplete:function(){self.fireEvent(eventType,{scope:self});self._isAnimating=
false}})}catch(e){}}}}else{var originalPos=this.element.getXY();this._offsetWidth=this.getOffsetWidth();var elementNewPos=this.isVisible()?originalPos[0]-this._offsetWidth+"px":originalPos[0]+this._offsetWidth+"px",slideBlockNewPos=this.isVisible()?originalPos[0]-this._offsetWidth+"px":this._offsetWidth+"px";this.element.setStyle(this.slideDirection,elementNewPos);if(!this.isFloating&&this._slideBlockEl)this._slideBlockEl.setStyle(this.slideDirection,slideBlockNewPos);this.fireEvent(eventType,{scope:this})}},
hide:function(callback,callbackScope){if(this.isVisible()){this.fireEvent(JSM.component.SlidePanel.EVENT_BEFORE_HIDE,{scope:this});var animObject;animObject=-this.getOffsetWidth();this._slideContent(animObject,JSM.component.SlidePanel.EVENT_HIDE,function(){this.element.dom.removeAttribute("style");this.element.setStyle({"display":"none","float":"left"});this.element.parent().setStyle("z-index",this.actualZindex-1);this.element.parent().parent().setStyle("z-index",this.actualZindex-1);this._slideBlockContainerEl.removeClass(this.disabledScrollClass);
if(typeof callback=="function")callback.call(callbackScope||this)});this._isShown=false;this.setActive(false);if(this._mask){this._mask.hide();if(this.closeOnMaskClick)this._mask.getMask().un("click",this.onMaskClick,this)}}Chaos.fireEvent(JSM.component.SlidePanel.GLOBALEVENT_CLOSE,{scope:this})},isVisible:function(){return this._isShown},onCloseButtonClick:function(ev){ev.preventDefault();this.hide()},onBodyKeyPress:function(ev){if(ev.getCharCode()==27&&!this._isAnimating&&this.isActive()){ev.preventDefault();
this.hide()}},onMaskClick:function(ev){ev.preventDefault();this.hide()},onWindowResize:function(){var actualHeight;actualHeight=window.innerHeight-this._headerHoverEl.getHeight();if(this._mask&&this._mask.getMask()){var _maskEl=this._mask.getMask(),_newWidth,_bodyWidth=Ext.getBody().getWidth();_newWidth=!this.isFloating?_bodyWidth-this.element.getWidth():_bodyWidth;_maskEl.setStyle({width:_newWidth+"px"});this.element.setHeight(actualHeight)}},isActive:function(){return this._isActive},setActive:function(active){this._isActive=
active},bind:function(){JSM.component.SlidePanel.superclass.bind.call(this);if(this._closeButtonEl)this._closeButtonEl.on("click",this.onCloseButtonClick,this);if(this._buttonEl&&this.closeOnButtonClick)this._buttonEl.on("click",this.onCloseButtonClick,this);if(this.closeOnEsc)Ext.getBody().on("keydown",this.onBodyKeyPress,this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){JSM.component.SlidePanel.superclass.unbind.call(this);if(this._closeButtonEl)this._closeButtonEl.un("click",
this.onCloseButtonClick,this);if(this._buttonEl&&this.closeOnButtonClick)this._buttonEl.un("click",this.onCloseButtonClick,this);if(this.closeOnEsc)Ext.getBody().un("keydown",this.onBodyKeyPress,this);Ext.fly(window).un("resize",this.onWindowResize,this)}});Ext.namespace("JSM.component");JSM.component.SlidePanelLister=function(el,config){JSM.component.SlidePanelLister.superclass.constructor.call(this,el,config)};JSM.component.SlidePanelLister.PANEL_BEFORE_OPEN="panellister-before-open";
JSM.component.SlidePanelLister.PANEL_OPEN="panellister-open";JSM.component.SlidePanelLister.PANEL_BEFORE_HIDE="panellister-before-hide";JSM.component.SlidePanelLister.PANEL_HIDE="panellister-hide";JSM.component.SlidePanelLister.CLICKED_ON_IMAGE="click-on-favorite-image";JSM.component.SlidePanelLister.IMAGE_MOUSEOVER="panellister-image-mouseover";JSM.component.SlidePanelLister.EVENT_SCROLL="panellister-scroll";JSM.component.SlidePanelLister.PANEL_CONTENT_LOADED="panellister-content-loaded";
JSM.component.SlidePanelLister.EVENT_LIST_REFRESH="panellister-list-refresh";JSM.component.SlidePanelLister.EVENT_AFTER_LIST_REFRESH="after-panellister-list-refresh";JSM.component.SlidePanelLister.EVENT_SLIDE_PANEL_LISTER_RESIZE="slide-panel-lister-resize";JSM.component.SlidePanelLister.EVENT_CONTENT_COMPLETE="content-complete";JSM.component.SlidePanelLister.EVENT_LOGIN_CLICK="panellister-login-click";JSM.component.SlidePanelLister.ORDER_TYPE_NAME="name";
JSM.component.SlidePanelLister.ORDER_TYPE_TIME="time";JSM.component.SlidePanelLister.ORDER_TYPE_STATUS="status";JSM.component.SlidePanelLister.CLICKED_ON_FAVORITES_SELECT_BUTTON="click-on-favorite-select-button";JSM.component.SlidePanelLister.CLICKED_ON_MYHISTORY_SELECT_BUTTON="click-on-myhistory-select-button";
Chaos.extend(JSM.component.SlidePanelLister,Chaos.Object,{name:"SlidePanelLister",panelListerItemClass:"small",slidePanelContainerId:"slidepanel_lister_container",slideBlockId:"listpage",noPanelListerCls:undefined,mainContainerId:"container",innerContainerId:"inner_container",contentId:"content",footerId:"footer",hoveredThumbId:undefined,maxVisibleElems:20,minOrderListLimit:10,buttonId:"favorite_button",orderTypeBodyTag:'<div id="favorites_ordertype_select" class="select">'+'<input type="text" value="Alphabetical" class="select textfield medium" readonly="readonly" name="order_type" id="order_type" />'+
'<input type="hidden" value="name" id="order_type_hidden" name="order_type_selected" />'+'<a href="#" class="select_arrow small"></a>'+'<div id="" class="select_list_container">'+'<ul class="select_replacement">'+'<li class="select_option">'+'<a href="#" class="list_item" name="time">by time</a>'+"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="name">by time</a>'+"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="status">by status</a>'+"</li>"+"</ul>"+
"</div>"+"</div>",orderTypeInputId:"order_type",additionalSlidePanelWidth:28,additionalContentWidth:200,maxColumnNumber:5,panelListerItemWidth:229,panelListerItemHeight:175,panelListerBottomMargin:101,scrollBarWidth:30,slideDuraion:0.3,panelTopPosition:40,noSlidePanelWidth:322,isAnimatedSlidePanel:true,isNeededFavoritesPlugin:true,panelListerMainContainerId:undefined,panelListerContainerId:undefined,getListedPerformersUrl:undefined,panelListerInnerContainerId:undefined,selectListElementId:undefined,
selectListInputSel:undefined,useMask:true,isSlidePanelNeeded:true,slidePanelBlockClsSel:undefined,animateStartPosition:undefined,isAnimatedEnded:true,slideListerSelectorId:"slide_lister_selector",noSlidePanelCls:"no_slidepanel",_index:0,_panelListItemsCount:0,_footerHeight:0,_panelListItems:undefined,_uniqueClass:undefined,_orderTypeSelectTpl:undefined,_clickOnImagesEnabled:true,_mouseWheelEnabled:true,_scrollBarNeeded:false,_isVisible:false,_mouseEventsEnabled:true,_noPanelListEl:undefined,_panelListerMainContainerEl:undefined,
_slideListerPanel:undefined,_scrollPane:undefined,_orderTypeSelectList:undefined,init:function(el,config){JSM.component.SlidePanelLister.superclass.init.call(this,el,config);this.needToShowFavourite=Chaos.Config.get("needToShowFavourite");this.addEvents(JSM.component.SlidePanelLister.CLICKED_ON_IMAGE,JSM.component.SlidePanelLister.PANEL_BEFORE_OPEN,JSM.component.SlidePanelLister.PANEL_OPEN,JSM.component.SlidePanelLister.PANEL_BEFORE_HIDE,JSM.component.SlidePanelLister.PANEL_HIDE,JSM.component.SlidePanelLister.IMAGE_MOUSEOVER,
JSM.component.SlidePanelLister.EVENT_SCROLL,JSM.component.SlidePanelLister.EVENT_LOGIN_CLICK,JSM.component.SlidePanelLister.PANEL_CONTENT_LOADED,JSM.component.SlidePanelLister.EVENT_LIST_REFRESH,JSM.component.SlidePanelLister.EVENT_AFTER_LIST_REFRESH,JSM.component.SlidePanelLister.EVENT_SLIDE_PANEL_LISTER_RESIZE,JSM.component.SlidePanelLister.EVENT_CONTENT_COMPLETE);Chaos.addEvents(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL);this.loadingCaptionTranslate=Chaos.translate("Loading");this.offlineStatusTranslate=
Chaos.translate("Offline");this.freeStatusTranslate=Chaos.translate("free");this.privateStatusTranslate=Chaos.translate("In Private Chat");this.memberChatStatusTranslate=Chaos.translate("In Member Chat");this.noListTranslate=this.noListTranslate?this.noListTranslate:Chaos.translate("No Favorites");this.titleTranslate=this.titleTranslate?this.titleTranslate:Chaos.translate("Favorites");this.emptyListTranslate=this.emptyListTranslate?this.emptyListTranslate:Chaos.translate("Click on the star icon to add a model to your list");
this.needTologinTranslate=this.needTologinTranslate?this.needTologinTranslate:Chaos.translate("Please log in to use this function");if(this.isNeededFavoritesPlugin)this.favoritesPlugin=this.plugins["Favorites-plugin"];this.listPageBuilderPlugin=this.plugins["ListPageBuilder"];this.getPanelListerList();this.setScroll(true);this.getMouseButton=JSM.Util.getMouseButton},emptyContent:function(){if(Ext.fly(this.panelListerMainContainerId))Ext.fly(this.panelListerMainContainerId).remove();if(this.element.hasClass(this.noPanelListerCls))this.element.removeClass(this.noPanelListerCls);
if(this._noPanelListEl instanceof Ext.Element)delete this._noPanelListEl},showNoPanelList:function(){var message=application.isLoggedIn()==true?this.emptyListTranslate:this.needTologinTranslate,self=this,_slideListerSelectorEl;_slideListerSelectorEl=Ext.get(this.slideListerSelectorId);this.element.dom.className="";this.element.addClass(this.noPanelListerCls);if(!(this._noPanelListEl instanceof Ext.Element))this._noPanelListEl=this.element.insertHtml("beforeEnd",'<div id="'+this.panelListerMainContainerId+
'">'+'<div id="'+this.panelListerContainerId+'">'+'<span class="'+this.panelListerIconClsSel+'">&nbsp</span>'+"<strong>"+this.noListTranslate+"</strong>"+'<p class="fav_info">'+message+"</p>"+"</div>"+"</div>",true);if(Chaos.Cookie.isCookieEnabled()&&!application.isLoggedIn())this.element.select("a").each(function(){Ext.get(this.dom).on("click",self.onAuthLinksClick,self)});this.checkFooterIsVisible();_slideListerSelectorEl.addClass(this.noSlidePanelCls);this.animatePanel(this.noSlidePanelWidth,true);
if(this.isSlidePanelNeeded)this.createSlidePanel();if(Ext.isOpera)this.element.setWidth("");this.newContentCompleted()},onAuthLinksClick:function(ev,target){if(!Ext.isIE7){ev.preventDefault();if(target.href.match("auth/login"))this.fireEvent(JSM.component.SlidePanelLister.EVENT_LOGIN_CLICK,{scope:this});else if(target.href.match("auth/sign-up"))Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,this);this.hide()}},getPanelListerList:function(orderType){var _orderType=orderType?{orderType:orderType}:
{};this._index=0;Chaos.Ajax.request({url:Chaos.getUrl(this.getListedPerformersUrl,{},_orderType,""),method:"get",type:"json",scope:this,success:this.getPanelListerListSuccess,error:this.getPanelListerListError,failure:this.getPanelListerListFailure})},getPanelListerListSuccess:function(response){if(this.isVisible()){this._index=0;var panelListerContainer=Ext.get(this.panelListerContainerId);try{TweenLite.to(panelListerContainer.dom,0.2,{opacity:0,onCompleteScope:this,onComplete:function(){this.processList(response,
true)}})}catch(e){}this.fireEvent(JSM.component.SlidePanelLister.EVENT_LIST_REFRESH,{scope:this})}else this.processList(response,false);this.fireEvent(JSM.component.SlidePanelLister.PANEL_CONTENT_LOADED,{scope:this})},getPanelListerListError:function(){this.showNoPanelList();this.newContentCompleted()},getPanelListerListFailure:function(){this.showNoPanelList()},processList:function(response,refresh){this.emptyContent();var result=response.json.data,content,panelListerBlock,_slideListerSelectorEl;
_slideListerSelectorEl=Ext.get(this.slideListerSelectorId);Ext.get(this.slideListerSelectorId).removeClass(this.noSlidePanelCls);this._panelListItems=result.performers;this._orderType=result.orderType;if(this.favoritesPlugin)this.favoritesPlugin.updateFavoritesList(this._panelListItems);if(this._panelListItems.length>0){this.setOrderList();this.element.dom.className="";if(!this.element.hasClass(this.panelListerMainContainerId))this.element.addClass(this.panelListerMainContainerId);this._panelListItemsCount=
this._panelListItems.length;content=this.getNextItems();panelListerBlock='<div id="'+this.panelListerContainerId+'">'+'<div id="'+this.panelListerInnerContainerId+'">'+'<div id="'+this.contentId+'">'+"<div class="+this.getUniqueClass()+">"+content+"</div>"+"</div>"+"</div>"+'<div class="clear"></div>'+"</div>";this.appendItems(panelListerBlock);this.checkFooterIsVisible();this.setListSize();if(this.isAnimatedEnded){if(this.isSlidePanelNeeded)this.createSlidePanel();this.initScrollBar()}this.bindItems()}else{if(this._orderTypeSelectListEl){this._orderTypeSelectListEl.remove();
delete this._orderTypeSelectListEl}this.showNoPanelList()}if(refresh)this.fireEvent(JSM.component.SlidePanelLister.EVENT_AFTER_LIST_REFRESH,{scope:this})},setOrderList:function(){if(!this._orderTypeSelectListEl){this._orderTypeSelectListEl=Ext.DomHelper.insertFirst(this.element,{tag:"div",id:this.selectListElementId,cls:this.selectListElementSel},true);var tpl=new Ext.Template(this.orderTypeBodyTag);tpl.append(this._orderTypeSelectListEl,this._tplConfig);this.setSelectList()}},getNextItems:function(){var content=
"",max=this.computeLayout().maxVisibles+this._index;for(this._index;this._index<max;this._index++)if(this._panelListItems&&this._panelListItems[this._index]){content+=this.plugins["ListPageBuilder"].setBlock(this._panelListItems[this._index]);delete this._panelListItems[this._index]}return content},appendItems:function(content){if(!Ext.fly(this.panelListerMainContainerId))Ext.DomHelper.append(this.element,{id:this.panelListerMainContainerId,html:content});else Ext.DomHelper.insertHtml("beforeEnd",
Ext.fly(this.contentId).dom,content);this.newContentCompleted();try{this.plugins["ImageChecker-plugin"].checkImageDownload(this.panelListerMainContainerId)}catch(exception){console.error("@JS-ERROR: ",exception)}if(this._scrollPane)this._scrollPane.setScrollBarHeight()},newContentCompleted:function(){if(!this._panelListerContainerEl){this._panelListerContainerEl=Ext.get(this.panelListerContainerId);this._panelListerMainContainerEl=Ext.get(this.panelListerMainContainerId);this._panelListerOrderTypeEl=
Ext.get(this.selectListElementId)}this.fireEvent(JSM.component.SlidePanelLister.EVENT_CONTENT_COMPLETE,{scope:this})},displayContainer:function(isShow){var display=isShow?"block":"none";if(Ext.fly(this.panelListerContainerId))Ext.fly(this.panelListerContainerId).setStyle("display",display);if(Ext.fly(this.selectListElementId))Ext.fly(this.selectListElementId).setStyle("display",display)},initScrollBar:function(){if(this._scrollBarNeeded)if(!(this._scrollPane instanceof JSM.component.Scroller)){this._scrollPane=
new JSM.component.Scroller(this.panelListerContainerId,{containerId:this.panelListerInnerContainerId,contentId:this.contentId,useNativeScroll:!Ext.isIE7,manageBackgroundScroll:!!Ext.isIE7,bottomValue:200});this._scrollPane.on(JSM.component.Scroller.EVENT_SCROLL,this.onScroll,this);this._scrollPane.on(JSM.component.Scroller.EVENT_SCROLL_BOTTOM,this.onScrollBottom,this)}else{this._scrollPane.un(JSM.component.Scroller.EVENT_SCROLL,this.onScroll,this);this._scrollPane.un(JSM.component.Scroller.EVENT_SCROLL_BOTTOM,
this.onScrollBottom,this);this._scrollPane.unbind();delete this._scrollPane;this.initScrollBar()}else if(!this._scrollBarNeeded)this.setScroll(true)},onScroll:function(ev){this.fireEvent(JSM.component.SlidePanelLister.EVENT_SCROLL,{ev:ev,scope:this})},onScrollBottom:function(ev){var _nextItems=this.getNextItems();if(_nextItems!=""){this.appendItems("<div class="+this.getUniqueClass()+">"+_nextItems+"</div>");this.bindItems()}},createSlidePanel:function(){if(!(this._slideListerPanel instanceof JSM.component.SlidePanel)){this._slideListerPanel=
new JSM.component.SlidePanel(this.slidePanelContainerId,{slideBlockContainerId:this.innerContainerId,slideBlockId:this.slideBlockId,slideDuration:this.slideDuraion,isFloating:true,buttonId:this.buttonId,closeOnButtonClick:true,defaultZIndex:1600,animate:this.isAnimatedSlidePanel,useMask:this.useMask,maskConfig:{appendTo:Ext.get(this.mainContainerId),isVisibleMask:true,defaultZindex:1598,top:this.panelTopPosition,maskOpacity:0.9,duration:this.slideDuraion,insertionMethod:"append",position:"fixed"}});
this._slideListerPanel.on(JSM.component.SlidePanel.EVENT_BEFORE_SHOW,this.onPanelListerBeforeShow,this);this._slideListerPanel.on(JSM.component.SlidePanel.EVENT_SHOW,this.onPanelListerShow,this);this._slideListerPanel.on(JSM.component.SlidePanel.EVENT_BEFORE_HIDE,this.onPaneListerlBeforeHide,this);this._slideListerPanel.on(JSM.component.SlidePanel.EVENT_HIDE,this.onPanelListerHide,this)}if(!this._slideListerPanel.isVisible())this._slideListerPanel.show();return this._slideListerPanel},getSlidePanel:function(){return this._slideListerPanel},
onPanelListerBeforeShow:function(){this._bodyScrollTop=JSM.Util.getScrollTop();if(!Ext.isIE7)JSM.Util.hideBodyOverFlow();else Ext.fly(window).on("scroll",this.onWindowScroll,this);this.fireEvent(JSM.component.SlidePanelLister.PANEL_BEFORE_OPEN,{scope:this})},onPanelListerShow:function(){this.setVisible(true);this.fireEvent(JSM.component.SlidePanelLister.PANEL_OPEN,{scope:this})},onPaneListerlBeforeHide:function(){if(!Ext.isIE7)JSM.Util.hideBodyOverFlow();else Ext.fly(window).un("scroll",this.onWindowScroll,
this);this.fireEvent(JSM.component.SlidePanelLister.PANEL_BEFORE_HIDE,{scope:this});if(this.favoritesPlugin)this.favoritesPlugin.hideTooltip(0);delete this._panelListItems;this._panelListItemsCount=0;this._index=0;if(this._scrollPane){this._scrollPane.unbind();delete this._scrollPane}this.setScroll(false)},onPanelListerHide:function(){this.setVisible(false);this.setScroll(false);this.emptyContent();this.fireEvent(JSM.component.SlidePanelLister.PANEL_HIDE,{scope:this})},isAnimating:function(){return this._slideListerPanel&&
this._slideListerPanel._isAnimating},setStatusClass:function(performers){var statuses=[this.offlineStatusTranslate,this.freeStatusTranslate,this.privateStatusTranslate,this.memberChatStatusTranslate];var statusCls=["offline","free","private","members_only"];for(var i=0;i<performers.length;i++){performers[i].statusClass=statusCls[performers[i].status];performers[i].status=statuses[performers[i].status];performers[i].statusSpan=performers[i].status!="free"?'<span class="status">'+performers[i].status+
"</span>":""}},bindItems:function(){var allItems=this.element.select("."+this._uniqueClass).item(0).select("."+this.panelListerItemClass);var self=this;this.element.select("."+this._uniqueClass).item(0).select("."+this.panelListerItemClass).each(function(){Ext.get(this.dom).on("mouseover",self.onPanelListImageMouseOver,self);Ext.get(this.dom).on("click",self.onPanelListImageClick,self)});if(this.favoritesPlugin)this.favoritesPlugin.bindItems(allItems.elements)},onPanelListImageClick:function(ev,target){if(this.getMouseButton(ev)==
1&&!ev.ctrlKey){ev.preventDefault();this.fireEvent(JSM.component.SlidePanelLister.CLICKED_ON_IMAGE,{ev:ev,target:target,scope:this})}},onPanelListImageMouseOver:function(ev,target){if(this._mouseEventsEnabled){var link=Ext.get(target).findParent("a");if(link&&link.id!=this.hoveredThumbId){var thumb=Ext.get(link).select("img").item(0);this.hoveredThumbId=link.id;this.fireEvent(JSM.component.SlidePanelLister.IMAGE_MOUSEOVER,ev,Ext.fly(target),{favLink:link,favThumb:thumb})}}},panelListImageMouseOut:function(){delete this.hoveredThumbId},
onResizeSlidePanelLister:function(){this.setPanelHeight()},getUniqueClass:function(){this._uniqueClass=Chaos.generateId(this.slidePanelBlockClsSel);return this._uniqueClass},computeLayout:function(){var _height=this.getPanelHeight(),_width=Ext.getBody().getWidth()-this.additionalContentWidth,_maxVisibleLineNumber=parseInt(_height/this.panelListerItemHeight),_maxLineNumber=_maxVisibleLineNumber+1,_optimalColumnNumber=Math.ceil(this._panelListItemsCount/_maxVisibleLineNumber),_optimalMaxColumnNumber=
parseInt(_width/this.panelListerItemWidth),_maxColumn=this.maxColumnNumber>0&&this.maxColumnNumber<=_optimalMaxColumnNumber?this.maxColumnNumber:parseInt(_width/this.panelListerItemWidth),_maxVisibles=(_maxLineNumber+1)*_maxColumn,_scrollBarNeeded=this._panelListItemsCount-_maxVisibleLineNumber*_maxColumn>0;return{maxColumnNumber:_optimalColumnNumber<_maxColumn?_optimalColumnNumber:_maxColumn,maxLineNumber:_maxLineNumber,maxVisibles:this._panelListItemsCount<_maxVisibles?this._panelListItemsCount:
_maxVisibles,scrollBarNeeded:_scrollBarNeeded}},setAnimateStartPosition:function(previousWidth){this.animateStartPosition=previousWidth?previousWidth:0},setListSize:function(){var panelListerContainer=Ext.get(this.panelListerContainerId),slidePanelListerContainer=Ext.get(this.slidePanelContainerId),panelListerBlock=this.element.select("."+this._uniqueClass).item(0),computedLayout=this.computeLayout();panelListerContainer.setOpacity(0);this.maxVisibleElems=computedLayout.maxVisibles;if(this._orderTypeSelectListEl)if(computedLayout.maxVisibles<
this.minOrderListLimit){this._orderTypeSelectListEl.hide();this._orderTypeSelectListEl.setStyle("display","none")}else this._orderTypeSelectListEl.show();this._scrollBarNeeded=computedLayout.scrollBarNeeded;var _width=computedLayout.maxColumnNumber*this.panelListerItemWidth+this.scrollBarWidth;if(_width!==this.animateStartPosition){this.isAnimatedEnded=false;this.animatePanel(_width,false)}else{if(Ext.isIE7)slidePanelListerContainer.setWidth(_width+this.additionalSlidePanelWidth);panelListerContainer.setWidth(_width);
if(panelListerBlock)panelListerBlock.setWidth(_width);this._fadePanelContainer(1)}if(Ext.isOpera)this.element.setWidth(_width+this.getSlidepanelOuterWidth());this.setPanelHeight()},animatePanel:function(width,isNoSlidePanel){try{TweenLite.fromTo(this.element.dom,this.slideDuraion,{css:{width:this.animateStartPosition}},{css:{width:width},onCompleteScope:this,onComplete:function(){this._fadePanelContainer(1);this.isAnimatedEnded=true;if(this.isSlidePanelNeeded)this.createSlidePanel();this.initScrollBar();
this.fireEvent(JSM.component.SlidePanelLister.EVENT_SLIDE_PANEL_LISTER_RESIZE,{actualWidth:width,isNoSlidePanel:isNoSlidePanel,scope:this})}})}catch(e){}},_fadePanelContainer:function(opacity){var panelListerContainer=Ext.get(this.panelListerContainerId);try{TweenLite.to(panelListerContainer.dom,this.slideDuraion,{css:{opacity:opacity}})}catch(e){}},getSlidepanelOuterWidth:function(){var marginRight,paddingLeft,outerWidth;marginRight=Ext.get(this.panelListerContainerId).getStyle("marginRight");paddingLeft=
this.element.getStyle("paddingLeft");marginRight=parseInt(marginRight.split("px")[0]);paddingLeft=parseInt(paddingLeft.split("px")[0]);outerWidth=marginRight+paddingLeft;return outerWidth},getPanelHeight:function(){return Ext.getBody().getHeight()-this.panelListerBottomMargin-this._footerHeight},setPanelHeight:function(){var _height=this.getPanelHeight();if(Ext.fly(this.panelListerContainerId))Ext.fly(this.panelListerContainerId).setHeight(_height);if(Ext.fly(this.panelListerInnerContainerId))Ext.fly(this.panelListerInnerContainerId).setHeight(_height)},
isVisible:function(){return this._isVisible},setVisible:function(isVis){this._isVisible=isVis;return this._isVisible},checkFooterIsVisible:function(){var _footerHeight=Chaos.Util.getVisibleSize(Ext.fly(this.footerId)).height;this._footerHeight=_footerHeight>=0?_footerHeight:0},refreshContent:function(orderType){this.getPanelListerList(orderType)},hide:function(){if(this._slideListerPanel&&this._slideListerPanel.isVisible())this._slideListerPanel.hide()},setScroll:function(disable){if(!!Ext.isIE7)Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL,
{scope:this,disable:disable})},onWindowScroll:function(ev){ev.preventDefault();window.scrollTo(0,this._bodyScrollTop)},setSelectList:function(){this._orderTypeSelectList=new JSM.component.SelectList(this.selectListElementId,{inputSel:this.selectListInputSel});this._orderTypeSelectList.on(JSM.component.SelectList.EVENT_SHOW,this.onOderTypeSelectListShow,this);this._orderTypeSelectList.on(JSM.component.SelectList.EVENT_HIDE,this.onOderTypeSelectListHide,this);this._orderTypeSelectList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,
this.onOderTypeSelectListItemSelect,this);return this._orderTypeSelectList},onOderTypeSelectListShow:function(){this._mouseEventsEnabled=true},onOderTypeSelectListHide:function(){this._mouseEventsEnabled=true},onOderTypeSelectListItemSelect:function(ev){this.refreshContent(ev.target.dom.name);this._orderTypeSelectList.onHideDropDownList()},bind:function(){JSM.component.SlidePanelLister.superclass.bind.call(this);Ext.fly(window).on("resize",this.onResizeSlidePanelLister,this)},unbind:function(){JSM.component.SlidePanelLister.superclass.unbind.call(this);
Ext.fly(window).un("resize",this.onResizeSlidePanelLister,this);if(this._slideListerPanel){this._slideListerPanel.un(JSM.component.SlidePanel.EVENT_SHOW,this.onPanelListerShow,this);this._slideListerPanel.un(JSM.component.SlidePanel.EVENT_HIDE,this.onPanelListerHide,this)}this.setScroll(false);if(this._orderTypeSelectList){this._orderTypeSelectList.un(JSM.component.SelectList.EVENT_SHOW,this.onOderTypeSelectListShow,this);this._orderTypeSelectList.un(JSM.component.SelectList.EVENT_HIDE,this.onOderTypeSelectListHide,
this);this._orderTypeSelectList.un(JSM.component.SelectList.EVENT_ITEM_SELECT,this.onOderTypeSelectListItemSelect,this)}}});Ext.namespace("JSM.component");JSM.component.StatusUpdater=function(el,config){JSM.component.StatusUpdater.superclass.constructor.call(this,el,config)};JSM.component.StatusUpdater.STATUS_CHANGE="status-changed";JSM.component.StatusUpdater.FREE_STATUS="free";JSM.component.StatusUpdater.OFFLINE_STATUS="offline";JSM.component.StatusUpdater.PRIVATE_STATUS="private";
JSM.component.StatusUpdater.MEMBERS_ONLY_STATUS="members_only";JSM.component.StatusUpdater.GLOBALEVENT_GLOBAL_STATUS_CHANGE="global-status-change";JSM.component.StatusUpdater.META_LISTPAGE_ID=Chaos.getMeta("listPageId");
Chaos.extend(JSM.component.StatusUpdater,Chaos.Object,{name:"StatusUpdater",containerIdPrefixes:["container_","favorite_container_","myhistory_container_"],perfLinkSel:".perf_link",overlayId:"overlay",statusClass:"status",offlineStatusCls:"offline",freeStatusCls:"free",privateStatusCls:"private",memberStatusCls:"members_only",imageSel:"img",commercialContainerCls:"commercial_container",init:function(el,config){JSM.component.StatusUpdater.superclass.init.call(this,el,config);this.addEvents(JSM.component.StatusUpdater.STATUS_CHANGE);
Chaos.addEvents(JSM.component.StatusUpdater.GLOBALEVENT_GLOBAL_STATUS_CHANGE);this.privateStatusTranslate=Chaos.translate("In Private Chat");this.offlineStatusTranslate=Chaos.translate("Offline");this.memberStatusTranslate=Chaos.translate("In Member Chat");this.freeChatTranslate=Chaos.translate("Free Live Sex Chat");this.statuses=[this.offlineStatusCls,this.freeStatusCls,this.privateStatusCls,this.privateStatusCls]},getNewStatuses:function(obj){var performers=Ext.decode(obj),prefixesLength=this.containerIdPrefixes.length,
prefix,i;JSM.Util.console("info","forceConsole",["[StatusUpdater] Performers: ",performers]);for(i in performers)for(prefix=0;prefix<prefixesLength;prefix++)this.updateStatuses(this.containerIdPrefixes[prefix]+i,performers[i]);Chaos.fireEvent(JSM.component.StatusUpdater.GLOBALEVENT_GLOBAL_STATUS_CHANGE,{scope:this,statuses:performers})},updateStatuses:function(containerId,status){var perfContainerEl,perfImgEl,perfLinkEl,oldStatus,newStatus;perfContainerEl=Ext.get(containerId);if(perfContainerEl==
null||perfContainerEl.hasClass(this.commercialContainerCls))return;perfImgEl=perfContainerEl.select(this.imageSel);if(perfImgEl.getCount()==0)return;perfLinkEl=perfContainerEl.select(this.perfLinkSel);if(perfLinkEl.getCount()==0||perfLinkEl.item(0).hasClass(this.commercialContainerCls))return;oldStatus=perfContainerEl.dom.className.split(" ")[1];newStatus=this.statuses[status];if(oldStatus==newStatus)return;JSM.Util.console("info","forceConsole",["[StatusUpdater] "+perfImgEl.item(0).id.split("_")[1]+
": "+oldStatus+"->"+newStatus]);switch(newStatus){case JSM.component.StatusUpdater.OFFLINE_STATUS:this.fireEvent(JSM.component.StatusUpdater.STATUS_CHANGE,{model:perfLinkEl.item(0),newStatus:newStatus,infoText:this.offlineStatusTranslate,newClass:"offline"});break;case JSM.component.StatusUpdater.FREE_STATUS:this.fireEvent(JSM.component.StatusUpdater.STATUS_CHANGE,{model:perfLinkEl.item(0),newStatus:newStatus,newClass:"free"});break;case JSM.component.StatusUpdater.PRIVATE_STATUS:case JSM.component.StatusUpdater.MEMBERS_ONLY_STATUS:this.fireEvent(JSM.component.StatusUpdater.STATUS_CHANGE,
{model:perfLinkEl.item(0),newStatus:newStatus,infoText:this.privateStatusTranslate,newClass:"private"});break}},bind:function(){JSM.component.StatusUpdater.superclass.bind.call(this)},unbind:function(){JSM.component.StatusUpdater.superclass.unbind.call(this)}});Ext.namespace("JSM.component.SupportChatOnline");JSM.component.SupportChatOnline=function(el,config){JSM.component.SupportChatOnline.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.SupportChatOnline,Chaos.Object,{name:"SupportChatOnline",supportChatOnlineId:"support_chat_online",supportChatOnlineWidth:0,supportChatOnlineIconSel:".support_chat_btn_icon",supportChatOnlineIconEl:undefined,leftPosition:0,activeSupportClass:"active_support",flashId:"support_chat_applet",chatAppletEl:undefined,confirmationClass:"chat_close_confirmation",durationTime:1,topPosition:0,notificationClass:"notification_icon",task:"taskIsEmpty",isLoadFlash:false,supporChatActiveCookie:"supportChatIsActive",
slideButton:undefined,isSetCookie:true,contentUrl:undefined,newMessageCount:1,isCloseChat:false,isHideChat:false,isWriteFirst:false,isOpened:false,isLoadSupportChatBlock:false,notificationPulseNumber:5,leftSideBtnContainerId:"left_side_btn_container",init:function(el,config){JSM.component.SupportChatOnline.superclass.init.call(this,el,config);var supportChatOnlineHtml="<div id="+this.supportChatOnlineId+"></div>";var supportChatOnlineTpl=new Ext.Template(supportChatOnlineHtml);supportChatOnlineTpl.append(Ext.getBody(),
supportChatOnlineTpl);this.supportChatOnlineIconEl=this.element.child(this.supportChatOnlineIconSel);this.leftPosition=-(this.element.getWidth()-29);this.topPosition=parseInt(Ext.get(this.leftSideBtnContainerId).dom.offsetTop)+parseInt(this.element.getPositioning().top);if(Ext.isIE7)this.topPosition=this.topPosition-2;if(Chaos.Cookie.get(this.supporChatActiveCookie)&&this.isSetCookie==true){this.element.toggleClass(this.activeSupportClass);Chaos.Cookie.remove(this.supporChatActiveCookie)}this.element.setStyle({left:this.leftPosition+
"px",visibility:"visible"})},onLoadSupportChatBlock:function(){Chaos.Ajax.request({method:"GET",type:"json",scope:this,url:this.contentUrl,xdomain:JSM.Util.isSecurePage()?true:false,success:function(response,options,requestData){var data=response.json;if(data.success){var html=data.content;var supportChatTpl=new Ext.Template(html);supportChatTpl.append(Ext.get("support_chat_online"),supportChatTpl);data.supportChatAppletParams.wmode=Ext.isMac?"opaque":"window";this.supportChatAppletUrl=data.supportChatAppletUrl;
this.supportChatAppletParams=data.supportChatAppletParams;this.supportChatAppletFlashvars=data.supportChatAppletFlashvars;this.supportChatAppletAttributes=data.supportChatAppletAttributes;this.chatAppletEl=Ext.get(this.supportChatOnlineId);this.loadFlashObject(this.chatAppletEl);this.setSlideBox()}},error:function(response,options,requestData){}})},loadFlashObject:function(el){var flashWidth=529;if(!Ext.isGecko)flashWidth=523;swfobject.embedSWF(this.supportChatAppletUrl,this.flashId,flashWidth,"246",
"9.0.0","expressInstall.swf",this.supportChatAppletFlashvars,this.supportChatAppletParams,this.supportChatAppletAttributes);this.supportChatOnlineWidth=el.getWidth();el.setLeft(-this.supportChatOnlineWidth+"px")},setSlideBox:function(){this.showSupportChat=new JSM.component.SlideBox(this.supportChatOnlineId,{slideBoxLeftPos:-this.supportChatOnlineWidth,durationTime:this.durationTime,topPosition:this.topPosition,elementClass:this.confirmationClass});this.showSupportChat.on(JSM.component.SlideBox.EVENT_SLIDEBOX_HIDE,
this.onButtonIconShow,this);this.showSupportChat.on(JSM.component.SlideBox.EVENT_SLIDEBOX_CLOSE,this.onFlashConfirmationShow,this);this.showSupportChat.on(JSM.component.SlideBox.EVENT_SLIDEBOX_HIDE,this.onChatAppletOpened,this)},onChatAppletShow:function(){if(!this.isOpened){this.isOpened=true;this.isSetCookie=true;this.isCloseChat=false;this.isHideChat=false;this.isWriteFirst=false;this.newMessageCount=1;if(!this.isLoadSupportChatBlock){this.onLoadSupportChatBlock();this.isLoadSupportChatBlock=true}else this.setSlideBox();
if(typeof this.task=="object"){Ext.TaskMgr.stop(this.task);this.supportChatOnlineIconEl.removeClass(this.notificationClass);this.task="taskIsEmpty"}this.slideButton.on("buttonMouseLeave",this.onButtonMouseLeave,this);if(this.element.hasClass(this.activeSupportClass))this.element.removeClass(this.activeSupportClass)}},onSupportButtonChange:function(){if(!this.element.hasClass(this.activeSupportClass))this.element.toggleClass(this.activeSupportClass);this.supportChatOnlineIconEl.dom.innerHTML=""},onFlashConfirmationShow:function(){if(!this.chatAppletEl.hasClass(this.confirmationClass))this.chatAppletEl.addClass(this.confirmationClass);
if(typeof this.task=="object"){Ext.TaskMgr.stop(this.task);this.supportChatOnlineIconEl.removeClass(this.notificationClass);this.task="taskIsEmpty"}this.supportChatOnlineIconEl.dom.innerHTML="";Ext.get(this.flashId).dom.closeChat()},adminTyping:function(supportWriting){if(supportWriting==1&&this.element.hasClass(this.activeSupportClass)&&this.task=="taskIsEmpty"&&this.isHideChat==true){this.notificationPulseTask();this.supportChatOnlineIconEl.dom.innerHTML=this.newMessageCount}},notificationPulseTask:function(){var self=
this;var counter=0;var notificationPulse=function(){if(!self.supportChatOnlineIconEl.hasClass(self.notificationClass))self.supportChatOnlineIconEl.addClass(self.notificationClass);self.supportChatOnlineIconEl.fadeOut();self.supportChatOnlineIconEl.fadeIn();counter++;if(counter==self.notificationPulseNumber){Ext.TaskMgr.stop(self.task);this.task="taskIsEmpty"}};this.task={run:notificationPulse,interval:1E3};Ext.TaskMgr.start(this.task)},newSupportMessage:function(){if(this.isHideChat==true)if(this.task==
"taskIsEmpty"&&this.isWriteFirst==false){this.notificationPulseTask();this.newMessageCount=1;this.supportChatOnlineIconEl.dom.innerHTML=this.newMessageCount;if(this.newMessageCount==1)this.newMessageCount++;this.isWriteFirst=true}else{this.supportChatOnlineIconEl.dom.innerHTML=this.newMessageCount;if(this.newMessageCount==1||this.newMessageCount>1)this.newMessageCount++}},cancelCloseSupportChat:function(){this.chatAppletEl.removeClass(this.confirmationClass)},onButtonIconShow:function(){this.isOpened=
false;var startLeftPos=this.element.getWidth(),self=this;if(this.isCloseChat==false)this.onSupportButtonChange();this.isHideChat=true;this.element.animate({left:{to:this.leftPosition,from:-startLeftPos}},0.75,function(){if(!Chaos.Cookie.get(self.supporChatActiveCookie)&&self.isSetCookie==true)Chaos.Cookie.set(self.supporChatActiveCookie,true)},"easeOut","run")},onCloseSupportChat:function(){if(this.isOpened){this.isOpened=false;this.isSetCookie=false;this.isCloseChat=true;if(Chaos.Cookie.get(this.supporChatActiveCookie))Chaos.Cookie.remove(this.supporChatActiveCookie);
if(this.element.hasClass(this.activeSupportClass))this.element.removeClass(this.activeSupportClass);if(this.supportChatOnlineWidth==0)this.supportChatOnlineWidth=this.chatAppletEl.getWidth();this.chatAppletEl.removeClass(this.confirmationClass);this.chatAppletEl.animate({left:{to:-this.supportChatOnlineWidth,from:0}},this.durationTime,this.onButtonIconShow(),"easeOut","run")}},onChatAppletOpened:function(){this.element.animate({left:{to:-this.element.getWidth(),from:this.leftPosition}},0.3,null,"easeOut",
"run")},bind:function(){JSM.component.SupportChatOnline.superclass.bind.call(this);this.slideButton.on(JSM.component.SlideButton.BUTTON_CLICKED,this.onChatAppletShow,this)},unbind:function(){JSM.component.SupportChatOnline.superclass.unbind.call(this);this.slideButton.un(JSM.component.SlideButton.BUTTON_CLICKED,this.onChatAppletShow,this);this.showSupportChat.un(JSM.component.SlideBox.EVENT_SLIDEBOX_OPENED,this.onButtonIconShow,this).un(JSM.component.SlideBox.EVENT_SLIDEBOX_CLOSE,this.onFlashConfirmationShow,
this).un(JSM.component.SlideBox.EVENT_SLIDEBOX_OPENED,this.onChatAppletOpened,this)}});Ext.namespace("JSM.component");JSM.component.TabMenu=function(el,config){JSM.component.TabMenu.superclass.constructor.call(this,el,config)};JSM.component.TabMenu.EVENT_CHANGE_TAB="tabmenu-change-tab";
Chaos.extend(JSM.component.TabMenu,Chaos.Object,{name:"TabMenu",contentIdPreFix:undefined,contentSel:undefined,activeTabClass:"selected",tabSelector:"li",changeDuration:0,defaultTabId:undefined,textErrorSel:".bottom_warning_tag",_menuItems:undefined,_contentItems:undefined,_lastTab:undefined,init:function(el,config){this._menuItems=this.element.select(this.tabSelector);this._contentItems=Ext.getBody().select(this.contentSel);this.addEvents(JSM.component.TabMenu.EVENT_CHANGE_TAB);this.checkTabs();
JSM.component.TabMenu.superclass.init.call(this,el,config)},checkTabs:function(){if(this.defaultTabId)this.changeTab(Ext.get(this.defaultTabId));else{var _this=this,_tabEl;this.element.select(this.tabSelector).each(function(){_tabEl=Ext.get(this);if(_tabEl.hasClass(_this.activeTabClass))_this.changeTab(_tabEl)})}},onTabBtnClick:function(ev,target){ev.preventDefault();var tabBtn=Ext.get(Ext.get(target).findParent(this.tabSelector));this.changeTab(tabBtn)},changeTab:function(tabMenuItemEl){var tabId=
tabMenuItemEl.id.split("_")[2];Ext.select(this.textErrorSel).hide();if(!tabMenuItemEl.hasClass(this.activeTabClass)){this._menuItems.removeClass(this.activeTabClass);tabMenuItemEl.addClass(this.activeTabClass);if(this.contentIdPreFix){var contentEl=Ext.get(this.contentIdPreFix+tabId);if(contentEl){this._contentItems.setStyle("display","none");contentEl.setStyle("display","block")}}this.fireEvent(JSM.component.TabMenu.EVENT_CHANGE_TAB,{scope:this,tabButton:tabMenuItemEl})}},bind:function(){JSM.component.TabMenu.superclass.bind.call(this);
if(this._menuItems)this._menuItems.on("click",this.onTabBtnClick,this)},unbind:function(){JSM.component.TabMenu.superclass.unbind.call(this);if(this._menuItems)this._menuItems.un("click",this.onTabBtnClick,this)}});JSM.component.TagSearch=function(el,config){JSM.component.TagSearch.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.TagSearch,Chaos.Object,{name:"tagsearch",searchId:"search",searchBarId:undefined,headerId:"header",headerEl:undefined,img:"img",listPage:undefined,searchHistory:"",autoSuggestBl:undefined,searchInput:undefined,performerTags:"",filterContId:"filter_container",init:function(el,config){this.headerEl=Ext.get(this.headerId);JSM.component.TagSearch.superclass.init.call(this,el,config);this.searchInput=Ext.get(this.searchBarId);this.searchHistory=this.searchInput.dom.value},insertTag:function(ev,
target){if(target&&!Ext.fly(this.filterContId).isVisible()&&Chaos.getMeta("isSearchPage")!=1){var img=Ext.get(target.id);if(img)if((img.findParent(".small")||img.findParent(".big"))&&Ext.get(this.autoSuggestBl)==null&&this.searchInput.dom.value==""&&document.activeElement.id!=this.searchBarId){var performerEl=Ext.get(target.id).findParent("a"),relAttr=performerEl.getAttribute("rel");if(relAttr!="undefined"||relAttr!="")this.searchInput.dom.value=this.performerTags=relAttr;this.searchInput.blur()}}},
clearTag:function(){if(!Ext.fly(this.filterContId).isVisible()&&Chaos.getMeta("isSearchPage")!=1)if(Ext.get(this.autoSuggestBl)==null&&this.searchInput.dom.value==this.performerTags&&document.activeElement.id!=this.searchBarId)this.searchInput.dom.value=this.searchHistory},bind:function(){JSM.component.TagSearch.superclass.bind.call(this);this.headerEl.on("mouseover",this.clearTag,this)},unbind:function(){JSM.component.TagSearch.superclass.unbind.call(this);this.headerEl.un("mouseover",this.clearTag,
this)}});Ext.namespace("JSM.component.ToggleBox");JSM.component.ToggleBox=function(el,config){JSM.component.ToggleBox.superclass.constructor.call(this,el,config)};JSM.component.ToggleBox.EVENT_ROW_CLICK="rowclick";JSM.component.ToggleBox.EVENT_OPEN="open";JSM.component.ToggleBox.EVENT_BEFORE_OPEN="before-open";JSM.component.ToggleBox.EVENT_AFTER_OPEN="after-open";JSM.component.ToggleBox.EVENT_CLOSE="close";JSM.component.ToggleBox.EVENT_BEFORE_CLOSE="before-close";
JSM.component.ToggleBox.EVENT_AFTER_CLOSE="after-close";
Chaos.extend(JSM.component.ToggleBox,Chaos.Object,{name:"toggleBox",rowSel:".content_row",rowPrefix:"row_",activeRowClass:"active_row",activeRowSel:".active_row",rowDataSel:".row_data, .edit",rowContentSel:".row_content",contentRows:undefined,contentPrefix:"content_",cancelSel:".cancel_btn",pageId:undefined,openSubElements:false,subElementClass:undefined,durationTime:1,isCancelClick:false,linkTagName:"a",isLinkClicked:false,init:function(el,config){this.contentRows=this.element.select(this.rowContentSel);
JSM.component.ToggleBox.superclass.init.call(this,el,config);this.addEvents(JSM.component.ToggleBox.EVENT_ROW_CLICK,JSM.component.ToggleBox.EVENT_OPEN,JSM.component.ToggleBox.EVENT_BEFORE_OPEN,JSM.component.ToggleBox.EVENT_AFTER_OPEN,JSM.component.ToggleBox.EVENT_CLOSE,JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,JSM.component.ToggleBox.EVENT_AFTER_CLOSE)},closeContainer:function(activeElement){this.fireEvent(JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,{box:activeElement,scope:this.scope||this||window},
JSM.component.ToggleBox.EVENT_BEFORE_CLOSE);var el;if(this.pageId!=undefined&&activeElement!=undefined)el=activeElement;else el=this.element.select(this.activeRowSel+" "+this.rowContentSel).item(0);if(this.isLinkClicked==false&&el!=null){el.syncFx().slideOut("t",{duration:this.durationTime,scope:this,easing:"backOut",block:false,concurrent:false,useDisplay:true,callback:function(){this.fireEvent(JSM.component.ToggleBox.EVENT_CLOSE,{box:this,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_CLOSE);
this.fireEvent(JSM.component.ToggleBox.EVENT_AFTER_CLOSE,{box:this,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_AFTER_CLOSE)}});this.element.select(this.activeRowSel+" "+this.rowDataSel).setDisplayed(true);if(this.openSubElements==false||el.parent(this.subElementClass)==null)el.parent(this.rowSel).removeClass(this.activeRowClass);else if(this.openSubElements==true)el.parent(this.subElementClass).select(this.activeRowSel).removeClass(this.activeRowClass)}else{this.element.select(this.rowSel).removeClass(this.activeRowClass);
this.isLinkClicked=false}},openContainer:function(contentContainerEl,rowContainerEl){if(contentContainerEl!=null)contentContainerEl.syncFx().slideIn("t",{duration:this.durationTime,easing:"backIn",scope:this,block:false,concurrent:false,callback:function(){this.fireEvent(JSM.component.ToggleBox.EVENT_OPEN,{box:this,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_OPEN);this.fireEvent(JSM.component.ToggleBox.EVENT_AFTER_OPEN,{box:this,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_AFTER_OPEN)}});
this.element.select(this.rowSel).removeClass(this.activeRowClass);rowContainerEl.addClass(this.activeRowClass);this.fireEvent(JSM.component.ToggleBox.EVENT_BEFORE_OPEN,{box:contentContainerEl,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_BEFORE_OPEN);Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_TOGGLE_BOX,{scope:this})},onRowClick:function(ev,target){if(Ext.isIE7||Ext.isIE8)this.isCancelClick=false;if(ev.target.className.length!=0){ev.preventDefault();ev.stopPropagation()}this.fireEvent(JSM.component.ToggleBox.EVENT_ROW_CLICK,
{box:this,scope:this.scope||this||window},JSM.component.ToggleBox.EVENT_ROW_CLICK);this.contentId=target.id.split("_")[1];this.rowContainer=Ext.get(this.rowPrefix+this.contentId);if(this.rowContainer&&!this.rowContainer.hasClass(this.activeRowClass)&&this.isCancelClick==false){var contentEl=this.element.select(this.activeRowSel+" "+this.rowContentSel).item(0);if(this.pageId==undefined&&contentEl!=null)this.closeContainer(contentEl);this.rowContainer.select(this.rowDataSel).setDisplayed(false);this.contentContainer=
Ext.get(this.contentPrefix+this.contentId);if(this.contentContainer!=null&&this.pageId!=undefined){this.contentContainer=this.element.select(this.rowContentSel).item(this.contentId-1);this.element.select(this.rowContentSel).each(this.onHideOpenedContainer,this);if(this.contentContainer.child(this.subElementClass)!=null||this.contentContainer.parent(this.subElementClass))this.openSubElements=true;else this.openSubElements=false}this.openContainer(this.contentContainer,this.rowContainer)}else if(this.pageId!=
undefined&&this.rowContainer.hasClass(this.activeRowClass))this.closeContainer(contentEl)},onHideOpenedContainer:function(target){var el=Ext.get(target),subContainer,clickedEl;subContainer=el.child(this.subElementClass);if(el.getStyle("display")=="block"&&this.openSubElements==false)this.closeContainer(el);else if(this.openSubElements==true)if(subContainer!=null){clickedEl=this.contentContainer.parent(this.subElementClass);if(clickedEl!=null)clickedEl.select(this.rowContentSel).each(this.onHideOpenedSubContainer,
this);else this.closeContainer(el)}},onHideOpenedSubContainer:function(target){var el=Ext.get(target);if(el.getStyle("display")=="block")this.closeContainer(el)},onCancelClick:function(ev,target){if(Ext.isIE7||Ext.isIE8)this.isCancelClick=true;this.closeContainer(Ext.get(target))},onLinkClick:function(){this.isLinkClicked=true},bind:function(){JSM.component.ToggleBox.superclass.bind.call(this);if(this.linkSel!=undefined)this.contentRows.select(this.linkSel).on("click",this.onLinkClick,this);this.element.on("click",
this.onRowClick,this,{delegate:this.rowSel});this.element.on("click",this.onCancelClick,this,{delegate:this.cancelSel,delay:10})},unbind:function(){JSM.component.ToggleBox.superclass.unbind.call(this);this.element.un("click",this.onRowClick,this);this.element.un("click",this.onCancelClick,this)}});Ext.namespace("JSM.component");JSM.component.TopSlideMessage=function(el,config){JSM.component.TopSlideMessage.superclass.constructor.call(this,el,config)},JSM.component.TopSlideMessage.EVENT_SHOW="topslidemessage-show";
JSM.component.TopSlideMessage.EVENT_HIDE="topslidemessage-hide";
Chaos.extend(JSM.component.TopSlideMessage,Chaos.Object,{name:"TopSlideMessage",closeMessageBtnCls:"close",warningMsgCls:".warning_tag",infoMsgCls:".info_tag",topWarningsId:"top_warnings",innerContentId:"inner_container",slidePanelId:"slidepanel_lister_container",headerId:"header_container",freechatId:"freechat",freechatAppletId:"chatapplet",messageTpl:'<div class="content">'+"<p>"+"{messageText}"+"</p>"+'<a class="{closeButtonCls}" href="#"><span>&nbsp;</span></a>'+"</div>",defaultTplData:{closeButtonCls:"close"},
tplData:{},autoShow:undefined,animDuration:0.4,removeMessage:true,isClosable:true,setDelayed:false,delayedTime:6E3,_topWarningsEl:undefined,_slidePanelEl:undefined,init:function(el,config){JSM.component.TopSlideMessage.superclass.init.call(this,el,config);this.addEvents(JSM.component.TopSlideMessage.EVENT_SHOW,JSM.component.TopSlideMessage.EVENT_HIDE);this._topWarningsEl=Ext.get(this.topWarningsId);this._slidePanelEl=Ext.get(this.slidePanelId);this.defaultHeaderTop=parseInt(Ext.get(this.headerId).getStyle("top"));
this.defaultPadding=Ext.get(this.innerContentId).getPadding("t");this.alertBlockHeight=Ext.get(this.topWarningsId).getHeight();if(this._slidePanelEl)this.defaultSlidePanelTop=parseInt(Ext.get(this.slidePanelId).getStyle("top"));if(this.setDelayed)this.delayedAnimation=new Ext.util.DelayedTask(this.display,this,[true]);this.createTpl()},createTpl:function(){Ext.applyIf(this.tplData,this.defaultTplData);var messageTpl=new Ext.Template(this.messageTpl);messageTpl.append(this.element,this.tplData);if(this.autoShow){if(this.setDelayed&&
typeof this.delayedAnimation!="undefined")this.delayedAnimation.delay(this.delayedTime);this.show()}if(this.isClosable){this.closeButtonEl=this.element.select("."+this.tplData.closeButtonCls);if(this.closeButtonEl!=undefined)this.closeButtonEl.on("click",this.onCloseButtonClick,this);else;}},show:function(){if(this._slidePanelEl)var currentSlidePanelTop=parseInt(Ext.get(this.slidePanelId).getStyle("top"));var innerPadding;this.element.setStyle("display","block");this._topWarningsEl.setVisible(true);
this.element.setHeight(this.alertBlockHeight,true);this.fireEvent(JSM.component.TopSlideMessage.EVENT_SHOW,this);if(JSM.Util.isCurrentPage("chat.performer")){Ext.get(this.headerId).setStyle("position","fixed");innerPadding=this.defaultPadding+this.alertBlockHeight+Ext.get(this.headerId).getHeight();Ext.get(this.headerId).animate({top:{to:parseInt(Ext.get(this.headerId).getStyle("top"))+this.alertBlockHeight}},this.animDuration,null,"easeOut","run")}else innerPadding=this.defaultPadding+this.alertBlockHeight;
Ext.get(this.topWarningsId).animate({top:{by:this.alertBlockHeight,unit:"px"}},this.animDuration,null,"easeOut","run");Ext.get(this.headerId).animate({top:{to:this.defaultHeaderTop+this.alertBlockHeight}},this.animDuration,null,"easeOut","run");if(this._slidePanelEl)Ext.get(this.slidePanelId).animate({top:{to:currentSlidePanelTop+this.alertBlockHeight}},this.animDuration,null,"easeOut","run");Ext.get(this.innerContentId).animate({paddingTop:{to:innerPadding}},this.animDuration,null,"easeOut","run");
Ext.select(this.warningMsgCls).animate({top:{by:this.alertBlockHeight,unit:"px"}},this.animDuration,null,"easeOut","run");Ext.select(this.infoMsgCls).animate({top:{by:this.alertBlockHeight,unit:"px"}},this.animDuration,null,"easeOut","run")},hide:function(){this.element.setStyle("display","none");this.element.setHeight(0,true);var self=this,currentHeaderTop=parseInt(Ext.get(this.headerId).getStyle("top")),currentPadding=Ext.get(this.innerContentId).getPadding("t"),innerPadding;if(this._slidePanelEl)var currentSlidePanelTop=
parseInt(Ext.get(this.slidePanelId).getStyle("top"));if(JSM.Util.isCurrentPage("chat.performer")){innerPadding=currentPadding-this.alertBlockHeight-Ext.get(this.headerId).getHeight();Ext.get(this.headerId).setStyle("position","relative");Ext.get(this.headerId).animate({top:{by:-this.alertBlockHeight,unit:"px"}},this.animDuration,function(){self.fireEvent(JSM.component.TopSlideMessage.EVENT_HIDE,{scope:self})},"easeOut","run")}else innerPadding=currentPadding-this.alertBlockHeight;Ext.get(this.topWarningsId).animate({top:{by:-this.alertBlockHeight,
unit:"px"}},this.animDuration,function(){if(self.removeMessage)self.element.dom.innerHTML=""},"easeOut","run");Ext.get(this.headerId).animate({top:{to:currentHeaderTop-this.alertBlockHeight}},this.animDuration,function(){self.fireEvent(JSM.component.TopSlideMessage.EVENT_HIDE,{scope:self})},"easeOut","run");if(this._slidePanelEl)Ext.get(this.slidePanelId).animate({top:{to:currentSlidePanelTop-this.alertBlockHeight}},this.animDuration,null,"easeOut","run");Ext.select(this.warningMsgCls).animate({top:{by:-this.alertBlockHeight,
unit:"px"}},this.animDuration,null,"easeOut","run");Ext.select(this.infoMsgCls).animate({top:{by:-this.alertBlockHeight,unit:"px"}},this.animDuration,null,"easeOut","run");Ext.get(this.innerContentId).animate({paddingTop:{to:innerPadding}},this.animDuration,null,"easeOut","run")},onCloseButtonClick:function(ev){ev.preventDefault();this.hide();this._topWarningsEl.setVisible(false);window.freeChatWindow.resizeFlashApplet()},bind:function(){JSM.component.TopSlideMessage.superclass.bind.call(this)},unbind:function(){JSM.component.TopSlideMessage.superclass.unbind.call(this);
this.closeButtonEl.un("click",this.onCloseButtonClick,this)}});Ext.namespace("JSM.component");JSM.component.Wall=function(el,config){JSM.component.Wall.superclass.constructor.call(this,el,config)};JSM.component.Wall.USERTYPE_MEMBER="member";
Chaos.extend(JSM.component.Wall,Chaos.Object,{name:"Wall",perfNameId:"perfId",showMoreId:"show_more",loaderId:"show_more_loader",wallListItemSel:"ul li",showMoreRoute:"Wall/GetWallPage",sendPostRoute:"Wall/SendWallMessage",parentId:"parentId",childId:"childId",postSel:".post.message",loadingCls:"loader_button",postFormId:"wall_form",postFormCharCounterId:"post_char_number",postFormCharInfoId:"post_char_info",memberContId:"profilname",replyFormId:"reply_form",replyFormCharCounterId:"reply_char_number",
replyFormCharInfoId:"reply_char_info",replyFormReplyInputId:"reply_form_replyId",charInfoSel:".char_info_bottom",writingCls:"write",postCls:"post message",answerCls:"answer",enableCls:"enabled",firstAnswerCls:"first",formTokenSel:'input[name="form_token"]',formTokenName:"form_token",itemTemplate:'<li id="item_{itemId}" class="{cls}">'+'<div class="reply">'+"<strong>{replyTranslate}</strong>"+'<a href="#"><em>&nbsp;</em></a>'+"</div>"+'<img src="{imageUrl}" alt="{memberId}" />'+"<strong>{memberId}</strong>"+
"<p>{text}</p>"+'<span class="time">{date}</span>'+"</li>",errorCls:"bottom_warning_tag",errorTemplate:'<div class="bottom_warning_tag show">'+'<span class="arrow">&nbsp;</span>'+'<span class="icon">&nbsp;</span>'+"<p>{errorText}</p>"+"</div>",antiFloodTimeout:5E3,preventFlooding:true,maxCharLimitNumber:4E3,noWallPostSel:".no_wall_posts",_showMoreEl:undefined,_loaderEl:undefined,_memberId:undefined,_performerId:undefined,_wallPage:1,_mainFormEl:undefined,_postFormCmp:undefined,_replyFormCmp:undefined,
_replyFormEl:undefined,_replyInputEl:undefined,_replyIdHiddenInputEl:undefined,_replyFormSendBtnEl:undefined,_selectedRow:undefined,_formSubmitEl:undefined,_formTokenInputs:undefined,_formInputEl:undefined,_errorEl:undefined,_antiFloodTask:undefined,_selectedItem:undefined,init:function(el,config){this._maxCharTextTranslate=Chaos.translate("You&#39;ve reached the maximum length of this message<br />(4000 characters)."),this._showMoreEl=Ext.get(this.showMoreId);this._loaderEl=Ext.get(this.loaderId);
this._performerId=Ext.get(this.perfNameId).dom.value;this._mainFormEl=Ext.get(this.postFormId);this._formInputEl=this._mainFormEl.select('input[type="text"]').item(0);this._formSubmitEl=this._mainFormEl.select('input[type="submit"]').item(0);this._formTokenInputs=this.element.select('input[name="'+this.formTokenName+'"]');this._postFormCmp=new JSM.form.Form(this.postFormId,{scope:this,isAjax:true,handleToken:true,tokenFieldName:this.formTokenName,showErrorsOnEdit:false,showErrorsPos:"bottom",disableSubmitOnSubmit:true,
disabledOnEnter:true,success:this.onPostSuccess,error:this.onPostError,generalErrorSel:".bottom_warning_tag",errorNodeClass:"bottom_warning_tag",useModalForGeneralErrors:false,rules:{}});this._postFormCmp.on("inputFocus",this.onInputFocus,this);this._postFormCmp.on("inputBlur",this.onInputBlur,this);this._postFormCharacterCounter=new JSM.component.CharacterCounter(this.postFormId,{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this._formInputEl,counterId:this.postFormCharCounterId,
charInfoId:this.postFormCharInfoId,maxCharText:this._maxCharTextTranslate});this._postFormCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);this._replyFormEl=Ext.get(this.replyFormId);this._replyInputEl=this._replyFormEl.select('input[type="text"]').item(0);this._replyIdHiddenInputEl=this._replyFormEl.select("#"+this.replyFormReplyInputId).item(0);this._replyFormCmp=new JSM.form.Form(this.replyFormId,{scope:this,isAjax:true,handleToken:true,
tokenFieldName:this.formTokenName,showErrorsOnEdit:false,showErrorsPos:"bottom",disableSubmitOnSubmit:true,disabledOnEnter:true,success:this.onReplySuccess,error:this.onReplyError,generalErrorSel:".bottom_warning_tag",errorNodeClass:"bottom_warning_tag",useModalForGeneralErrors:false,rules:{}});this._replyFormCmp.on("submit",this.onReplySubmit,this);this._replyFormCmp.on("inputBlur",this.onInputBlur,this);this._replyFormCharacterCounter=new JSM.component.CharacterCounter(this.replyFormId,{maxChar:this.maxCharLimitNumber,
hasWarningLimit:false,inputId:this._replyInputEl,counterId:this.replyFormCharCounterId,charInfoId:this.replyFormCharInfoId,maxCharText:this._maxCharTextTranslate});this._replyFormCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);if(this.preventFlooding)this._antiFloodTask=new Ext.util.DelayedTask(this.disableForm,this,[false]);JSM.component.Wall.superclass.init.call(this,el,config)},onMaxCharLimitReached:function(ev){ev.element.select(this.charInfoSel).show()},
onLoggedIn:function(data){var _response=data.response;var _memberType=application.router.getUserType(_response.jsm2sessionId);this._mainFormEl.dom.action=JSM.Util.UrlHelper.insertMemberType(_memberType,this._mainFormEl.dom.action);this._replyFormEl.dom.action=JSM.Util.UrlHelper.insertMemberType(_memberType,this._replyFormEl.dom.action);this.changeTokens({json:_response});if(_memberType==JSM.component.Wall.USERTYPE_MEMBER){this.element.addClass(this.enableCls);this._mainFormEl.fadeIn()}},hideElements:function(){this.resetSelectedRow()},
onPostSuccess:function(formId,response){if(response.json.data.messageId){var targetEl,tpl=new Ext.Template(this.itemTemplate),_noWallPostEl=this.element.select(this.noWallPostSel);if(this._memberId==undefined)this._memberId=Ext.get(this.memberContId).child("span").dom.innerHTML;this.changeTokens(response);var _tplData={itemId:response.json.data.messageId+"_"+response.json.data.messageId+"_1000000000",cls:this.postCls,imageUrl:response.json.data.memberProfilePicture||Chaos.Config.get("memberBgUrl"),
memberId:this._memberId,text:response.json.data.text||JSM.Util.escapeHTML(this._formInputEl.dom.value),date:Chaos.translate("Less than a minute ago"),replyTranslate:Chaos.translate("Reply")};if(this.element.select("ul").getCount()==0){Ext.DomHelper.append(this.element,'<ul></ul><div class="clear"></div>');targetEl=tpl.append(this.element.select("ul").item(0),_tplData)}else targetEl=tpl.insertBefore(this.element.select(this.wallListItemSel).item(0),_tplData);this._formInputEl.dom.value="";Ext.get(targetEl).on("click",
this.onItemClick,this);this._formInputEl.blur();if(this.preventFlooding)this.disableForm(true);if(this._postFormCharacterCounter)this._postFormCharacterCounter.resetCounter();this._selectedItem=undefined;if(_noWallPostEl)_noWallPostEl.remove()}},onPostError:function(formId,response){var tpl=new Ext.Template(this.errorTemplate);this._errorEl=tpl.append(this.postFormId,{errorText:Chaos.translate("Unable to send your message. Please try again later!")},true);if(this._postFormCharacterCounter)this._postFormCharacterCounter.resetCounter()},
onItemClick:function(ev,target){ev.stopPropagation();ev.preventDefault();this.hideErrors();if(this.element.hasClass(this.enableCls)){var _target=Ext.get(target);if(_target.dom.nodeName.toLowerCase()!="li")_target=Ext.get(_target.findParent("li"));if(this._selectedRow!=undefined)this._selectedRow.removeClass(this.writingCls);this._selectedRow=_target;if(!this._selectedRow.hasClass(this.writingCls)){this._selectedRow.addClass(this.writingCls);this._replyFormEl.setTop(this._selectedRow.dom.offsetTop+
this._selectedRow.dom.offsetHeight-this._mainFormEl.getHeight());this._replyInputEl.dom.value="";this._replyFormEl.setStyle("display","block")}if(typeof this._selectedItem=="undefined"||this._selectedItem!=_target){this._selectedItem=_target;this._replyInputEl.focus()}}},onInputFocus:function(){this.hideErrors();this.resetSelectedRow()},onInputBlur:function(){this.hideErrors()},onReplyFormInputFocus:function(){this.hideErrors()},hideErrors:function(){if(this._errorEl){this._errorEl.remove();delete this._errorEl}if(this._postFormCmp.errorLabels.text!==
undefined)this._postFormCmp.errorLabels.text.hide();if(this._replyFormCmp.errorLabels.text!==undefined)this._replyFormCmp.errorLabels.text.hide()},resetSelectedRow:function(){if(this._selectedRow!=undefined){this._selectedRow.removeClass(this.writingCls);this._replyFormEl.setStyle("display","none");this._selectedItem=undefined}},onReplySubmit:function(){this._replyIdHiddenInputEl.dom.value=this._selectedRow.dom.id.split("_")[1]},onReplySuccess:function(formId,response){if(response.json.data.messageId){if(this._memberId==
undefined)this._memberId=Ext.get(this.memberContId).child("span").dom.innerHTML;this.changeTokens(response);if(this._selectedRow.next()==null&&this._showMoreEl)this._showMoreEl.dom.href=this._showMoreEl.dom.href.split(this.childId)[0]+this.childId+"="+response.json.data.messageId;if(this._selectedRow.next()&&this._selectedRow.next().hasClass(this.firstAnswerCls))this._selectedRow.next().removeClass(this.firstAnswerCls);var tpl=new Ext.Template(this.itemTemplate);var comment=tpl.insertAfter(this._selectedRow,
{itemId:response.json.data.messageId+"_"+this._replyIdHiddenInputEl.dom.value+"_"+response.json.data.messageId,cls:this.answerCls+" "+this.firstAnswerCls,imageUrl:response.json.data.memberProfilePicture||Chaos.Config.get("memberBgUrl"),memberId:this._memberId,text:response.json.data.text||JSM.Util.escapeHTML(this._replyInputEl.dom.value),date:Chaos.translate("Less than a minute ago")});Ext.DomHelper.append(comment,'<div class="fade"></div><div class="line"></div>');this._replyInputEl.dom.value="";
this._replyIdHiddenInputEl.dom.value="";this.resetSelectedRow();if(this.preventFlooding)this.disableForm(true);if(this._replyFormCharacterCounter)this._replyFormCharacterCounter.resetCounter();this._selectedItem=undefined}},onReplyError:function(){var tpl=new Ext.Template(this.errorTemplate);this._errorEl=tpl.append(this.replyFormId,{errorText:Chaos.translate("Unable to send your message. Please try again later!")},true)},changeTokens:function(response){this._postFormCmp.changeToken(response);this._replyFormCmp.changeToken(response)},
onShowMoreClick:function(ev,target){ev.stopPropagation();ev.preventDefault();this._showMoreEl.setStyle({display:"none"});this._loaderEl.setStyle({display:"block"});var parentId=this._showMoreEl.dom.href.split(this.parentId+"=")[1].split("&")[0],childId=this._showMoreEl.dom.href.split(this.childId+"=")[1].split("&")[0];Chaos.Ajax.request({scope:this,type:"json",method:"GET",url:Chaos.getUrl(this.showMoreRoute,{performerId:this._performerId},{parentId:parentId,childId:childId}),success:this.onShowMoreSuccess,
error:function(){},failure:function(){}})},onShowMoreSuccess:function(response){this._loaderEl.setStyle({display:"none"});this._showMoreEl.setStyle({display:"inline-block"});Ext.DomHelper.append(this.element.select("ul").item(0),response.json.data.content);this.element.select(this.postSel).un("click",this.onItemClick,this);this.element.select(this.postSel).on("click",this.onItemClick,this);if(response.json.data.isLastPage)this._showMoreEl.remove();else{var list=this.element.select("li"),parentId=
list.item(list.getCount()-1).dom.id.split("_")[2],childId=list.item(list.getCount()-1).dom.id.split("_")[3];this._showMoreEl.dom.href=this._showMoreEl.dom.href.split("?")[0]+"?parentId="+parentId+"&childId="+childId}},disableForm:function(disable){if(disable)if(this._antiFloodTask&&this.preventFlooding)this._antiFloodTask.delay(this.antiFloodTimeout);this._postFormCmp.disableForm(disable);this._replyFormCmp.disableForm(disable)},onInputElKeyup:function(){if(this._formInputEl.dom.value.length>0)if(this._postFormCmp.errorLabels.text!==
undefined)this._postFormCmp.errorLabels.text.hide();if(this._replyInputEl.dom.value.length>0)if(this._replyFormCmp.errorLabels.text!==undefined)this._replyFormCmp.errorLabels.text.hide()},bind:function(){JSM.component.Wall.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);this.element.select(this.postSel).on("click",this.onItemClick,this);this._formInputEl.on("keyup",this.onInputElKeyup,this);this._replyInputEl.on("keyup",this.onInputElKeyup,
this);if(this._showMoreEl)this._showMoreEl.on("click",this.onShowMoreClick,this)},unbind:function(){JSM.component.Wall.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);this.element.select(this.postSel).un("click",this.onItemClick,this);if(this._showMoreEl)this._showMoreEl.un("click",this.onShowMoreClick,this);if(this._postFormCmp){this._postFormCmp.un("inputFocus",this.onInputFocus,this);this._postFormCmp.un("inputBlur",this.onInputBlur,
this);this._formInputEl.un("keyup",this.onInputElKeyup,this)}if(this._postFormCharacterCounter)this._postFormCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCharLimitReached,this);if(this._replyFormCmp){this._replyFormCmp.un("submit",this.onReplySubmit,this);this._replyFormCmp.un("inputBlur",this.onInputBlur,this);this._replyInputEl.un("keyup",this.onInputElKeyup,this)}if(this._replyFormCharacterCounter)this._replyFormCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxCharLimitReached,this)}});Ext.namespace("JSM.component");JSM.component.WarningMessages=function(el,config){JSM.component.WarningMessages.superclass.constructor.call(this,el,config)};JSM.component.WarningMessages.GLOBALEVENT_COOKIES_DISABLED="cookies-disabled";JSM.component.WarningMessages.GLOBALEVENT_FLASH_DISABLED="flash-disabled";JSM.component.WarningMessages.GLOBALEVENT_OUTDATED_BROWSER="outdated-browser";
Chaos.extend(JSM.component.WarningMessages,Chaos.Object,{name:"WarningMessages",disabledCookiesId:"cookies_disabled",outdatedBrowsersId:"outdated_browser",missingFlashId:"outdated_browser_flash",freeChatId:"freechat",topWarningsId:"top_warnings",delayedTime:500,_delayedTask:undefined,init:function(el,config){JSM.component.WarningMessages.superclass.init.call(this,el,config);this._disabledCookiesEl=Ext.get(this.disabledCookiesId);this._missingFlashEl=Ext.get(this.missingFlashId);this._outdatedBrowsersEl=
Ext.get(this.outdatedBrowsersId);this._freeChatEl=Ext.get(this.freeChatId);this._topWarningsEl=Ext.get(this.topWarningsId);Chaos.addEvents(JSM.component.WarningMessages.GLOBALEVENT_COOKIES_DISABLED,JSM.component.WarningMessages.GLOBALEVENT_FLASH_DISABLED,JSM.component.WarningMessages.GLOBALEVENT_OUTDATED_BROWSER);this.selectMsg()},selectMsg:function(){if(Chaos.Cookie.isCookieEnabled()||JSM.util.Flash.checkFlashVersion()||!Chaos.Config.get("outdatedBrowser"))this._topWarningsEl.setVisible(false);if(!Chaos.Cookie.isCookieEnabled()){this._topSlideCookieMsg=
new JSM.component.TopSlideMessage(this.disabledCookiesId,{tplData:{messageText:Chaos.Config.get("cookieWarningMsg")},setDelayed:true,delayedTime:2E3});this._disabledCookiesEl.setStyle("display","none");this._disabledCookiesEl.setHeight(0,true);Chaos.fireEvent(JSM.component.WarningMessages.GLOBALEVENT_COOKIES_DISABLED,{scope:this})}if(!JSM.util.Flash.checkFlashVersion()||Ext.isGecko&&parseInt(navigator.userAgent.split("Firefox/")[1])>=20&&!JSM.util.Flash.checkFlashVersion("11,6")){this._topSlideFlashMsg=
new JSM.component.TopSlideMessage(this.missingFlashId,{tplData:{messageText:Chaos.Config.get("flashWarningMsg")},setDelayed:true,delayedTime:2E3});this._missingFlashEl.setStyle("display","none");this._disabledCookiesEl.setHeight(0,true);if(this._freeChatEl)this._freeChatEl.setStyle("display","none");Chaos.fireEvent(JSM.component.WarningMessages.GLOBALEVENT_FLASH_DISABLED,{scope:this})}if(Chaos.Config.get("outdatedBrowser")){this._outdatedBrowsersMsg=new JSM.component.TopSlideMessage(this.outdatedBrowsersId,
{tplData:{messageText:Chaos.Config.get("outdatedBrowserMsg")},setDelayed:true,delayedTime:2E3});this._outdatedBrowsersEl.setStyle("display","none");this._disabledCookiesEl.setHeight(0);this._missingFlashEl.setHeight(0);Chaos.fireEvent(JSM.component.WarningMessages.GLOBALEVENT_OUTDATED_BROWSER,{scope:this})}this._delayedTask=new Ext.util.DelayedTask(function(){this.showMsg()},this);this._delayedTask.delay(this.delayedTime)},showMsg:function(){if(this._topSlideCookieMsg)if(this._topSlideFlashMsg)if(this._outdatedBrowsersMsg)this._outdatedBrowsersMsg.show();
else{this._topSlideFlashMsg.show();this._topSlideFlashMsg.on(JSM.component.TopSlideMessage.EVENT_HIDE,this.onCloseFlash,this)}else this._topSlideCookieMsg.show();else if(this._topSlideFlashMsg)this._topSlideFlashMsg.show();else if(this._outdatedBrowsersMsg)this._outdatedBrowsersMsg.show()},onCloseFlash:function(){this._topSlideCookieMsg.show()},bind:function(){JSM.component.WarningMessages.superclass.bind.call(this)},unbind:function(){JSM.component.WarningMessages.superclass.unbind.call(this)}});
Ext.namespace("JSM.form");JSM.form.Form=function(el,config){JSM.form.Form.superclass.constructor.call(this,el,config)};
JSM.form.failureNotice={blackoutId:"blackout",blackout:'<div style="background:#000;opacity:.85;width:100%;height:100%;position:fixed;top:0;left:0;z-index:1000000" id="{id}" class="{removeClass}">&nbsp;</div>',cssClass:"request_failure",id:"request_failure_id",errorMsg:Chaos.translate("Connection error. Please try again later!"),closeLinkId:"close_error",closeLinkCls:"close_error",template:'<div class="{cssClass} {removeClass}" id="{id}" style="position:absolute;height:30px; top:{top}px;left:{left}px;z-index:1000001"><span class="error_icon">&nbsp;</span>{errorMsg}<a id="{closeLinkId}" class="{closeLinkCls}" href="#">&nbsp;</a></div>',
removeSelectorClass:"remove_this",show:function(err,closeCallback,scope){var blackOutHeight=Ext.getBody().getHeight();var blackOutWidth=Ext.getBody().getWidth();if(typeof err=="string")this.errorMsg=err;var template=new Ext.Template(this.blackout);template.append(Ext.getBody(),{id:this.blackoutId,width:blackOutWidth,height:blackOutHeight,removeClass:this.removeSelectorClass});var topPosition=blackOutHeight/2-20;var leftPosition=blackOutWidth/2-100;var template=new Ext.Template(this.template);template.append(Ext.getBody(),
{id:this.id,cssClass:this.cssClass,closeLinkCls:this.closeLinkCls,closeLinkId:this.closeLinkId,top:topPosition,left:leftPosition,errorMsg:this.errorMsg,removeClass:this.removeSelectorClass});Ext.get(this.closeLinkId).on("click",this.closeError,this,{callback:closeCallback,scope:scope})},closeError:function(ev,target,options){ev.preventDefault();if(options&&options.callback)try{options.callback.call(options.scope||this)}catch(exception){}try{Ext.select("."+this.removeSelectorClass).remove()}catch(e){}}};
Ext.extend(JSM.form.Form,Chaos.Object,{name:"form",errorNodeClass:"warning_tag",errorNodes:undefined,generalErrorSel:".error_message, .error_text",useModalForGeneralErrors:true,errorTemplate:'<span class="arrow">&nbsp;</span><span class="icon">&nbsp;</span><p>{errorMsg}</p>',rules:undefined,_hintField:undefined,_remoteRules:undefined,fields:{},cssFieldSelectorClass:"validate",selectInputCls:"select",radioBoxCls:"radio_replacement",disabledClassName:"disabled",fieldsCollected:undefined,errorLabels:undefined,
validationDelay:1E3,hasError:false,submitSel:"input[type=submit]",submitButtons:undefined,loaderSel:".loader_button",loaderEl:undefined,hintedInputSel:"input[alt], select[alt], textarea[alt]",hintContainerId:"hint_node",hintShowDuration:0.3,hintHideDuration:0,errorHideDuration:0.3,showHints:true,showErrorsOnEdit:true,showErrorsOnBlur:true,showErrorsOnSubmit:true,showErrorsPos:"right",handleToken:true,submitOnSubmit:true,disableSubmitOnInit:false,disableSubmitOnSubmit:false,decorator:false,tokenFieldName:"form_token",
formErrorSel:".form_error",hasCaptcha:false,captchaConfig:{containerId:"captcha_block",captchaImg:"captchaimg",captchaRefreshBtnId:"refresh_captcha",captchaUrl:"/en/captcha/text/",captchaId:"captcha_id",captchaInputId:"captcha"},isBackConnNeeded:false,backConnFlashId:"flash_backconn",backConnFlash:undefined,backConnRequestId:0,checkBoxItems:{},radioBoxItems:{},checkedAllBox:false,isDisabledOnEnter:false,cancelButtonSel:".cancel_btn",cancelButtonEl:undefined,isAjax:false,ajaxUrl:undefined,isFormDisabled:false,
requestParams:undefined,_isExistingUsername:false,captchaHintCls:"captchahint",init:function(el,config){this.errorLabels={};this.rules={};this._remoteRules={};this.fieldsCollected=[];this.element.un("submit");this.fieldsCollected=[];this.collectFields();this.setupErrors();this.submitButtons=this.element.select(this.submitSel);this.cancelButtonEl=this.element.select(this.cancelButtonSel).item(0);this.addEvents({"validate":true,"submit":true,"before-submit":true,"validateField":true,"remoteCall":true,
"remoteResponse":true,"inputFocus":true,"inputBlur":true,"inputChange":true,"submitSuccess":true,"submitError":true,"init":true,"reset":true,"showCaptcha":true});Chaos.addEvents("backconn-request","backconn-request-complete","backconn-request-error");this.allFields=this.getAllFields();this.initFormLoader();if(this.hasCaptcha){this.captcha=new Chaos.Captcha(this.captchaConfig.captchaImg,this.captchaConfig);this.captchaContainer=Ext.get(this.captchaConfig.containerId);Chaos.Ajax.registerCommand("showCaptcha",
this.onShowCaptchaCallback,this)}if(this.isAjax&&this.disableSubmitOnInit==true)this.setSubmitEnabled(false);this.getHintCmp();if(this.showHints)this.setupHints();JSM.form.Form.superclass.init.call(this,el,config);if(this.decorator==true)this.addPlugin("FormDecorator",{});this.loadFunctions()},initFormLoader:function(){if(this.loaderSel){this.loaderEl=this.element.select(this.loaderSel).item(0);if(this.loaderEl){this.loaderEl.setStyle("width",this.submitButtons.elements[0].offsetWidth+"px");this.loaderEl.setStyle("padding",
0);var loaderImg=new Image,loaderSrc,self=this;loaderSrc=this.loaderEl.select("span").item(0).getStyle("backgroundImage");if(loaderSrc.indexOf("(")>-1)loaderSrc=loaderSrc.split("(")[1].split(")")[0];if(loaderSrc.indexOf('"')>-1)loaderSrc=loaderSrc.split('"')[1];loaderImg.src=loaderSrc;loaderImg.onload=function(){self.loaderEl.select("span").item(0).setStyle("backgroundImage",this.src)}}}},loadFunctions:function(){this.getDefaultCheckedBox(this.checkBoxItems);this.getDefaultCheckedBox(this.radioBoxItems)},
getDefaultCheckedBox:function(itemObject){for(var itemId in itemObject){var boxEl=Ext.get(itemId);if(boxEl!=null){var hiddenInputEl=Ext.get(itemObject[itemId].hiddenInputId);itemObject[itemId].defaultValue=hiddenInputEl.dom.value;itemObject[itemId].isSetActiveClass=boxEl.hasClass(itemObject[itemId].activeClass)}}},onInputFocus:function(ev,target,options){if(this.errorNodes!=undefined)this.errorNodes.each(function(){var parentEl=Ext.get(this.findParent("div"));if(parentEl)parentEl.setStyle("display",
"none");this.dom.innerHTML=""});if(this.errorLabels!=undefined)for(var label in this.errorLabels)if(label==target.name)this.hideError(Ext.get(label));if(this.placeHolders[target.name])target.placeholder="";this.fireEvent("inputFocus",ev,target,options)},onInputBlur:function(ev,target,options){if(this.placeHolders[target.name])target.placeholder=this.placeHolders[target.name];this.fireEvent("inputBlur",ev,target,options)},onInputChange:function(ev,target,options){this.fireEvent("inputChange",ev,target,
options)},onShowCaptchaCallback:function(){TweenMax.fromTo(this.captchaContainer.dom,0.3,{css:{alpha:0,display:"block"}},{css:{alpha:1}});this.fireEvent("showCaptcha",this)},getDirty:function(){var form=this.element.dom;for(var i=0;i<form.elements.length;i++){var element=form.elements[i];var type=element.type;if(type=="checkbox"||type=="radio"){if(element.checked!=element.defaultChecked)return true}else if(type=="hidden"||type=="password"||type=="text"||type=="textarea"){if(element.value!=element.defaultValue)return true}else if(type==
"select-one"||type=="select-multiple")for(var j=0;j<element.options.length;j++)if(element.options[j].selected!=element.options[j].defaultSelected){console.info("reason:",element.name,element.options[j].value,element.options[j].selected,element.options[j].defaultSelected);return true}}return false},collectFields:function(){var collectedElements=[];this.fieldRules={};this.placeHolders={};this.getFields().each(function(el){var mainString=el.dom.className.replace(/.*\[|\]/gi,"").replace(/'/gi,"");var rules=
mainString.split(", ");collectedElements.push([el.dom.name,rules]);this.fieldRules[el.dom.name]={};this.placeHolders[el.dom.name]=el.dom.placeholder;for(var i=0;i<rules.length;i++){var rule=rules[i];var ruleData=rule.split(/=/);this.fieldRules[el.dom.name][ruleData[0]]=ruleData.length>=2?ruleData[1]:undefined}},this);for(var i=0;i<collectedElements.length;i++)for(var i1=0;i1<collectedElements[i][1].length;i1++){var rule=collectedElements[i][1][i1];var fieldName=collectedElements[i][0];if(!this.rules[fieldName]||
this.rules[fieldName]=="undefined")this.rules[fieldName]={};if(rule.match(/=/)){var custom=rule.split("=");if(custom[0]=="remote")this.registerRemoteEvents(fieldName,custom[1]);else{if(!this.rules[fieldName][custom[0]]||this.rules[fieldName][custom[0]]=="undefined")this.rules[fieldName][custom[0]]={};this.rules[fieldName][custom[0]].value=custom[1];this.fieldsCollected.push([fieldName,custom[0],custom[1]])}}else{if(!this.rules[fieldName][rule]||this.rules[fieldName][rule]=="undefined")this.rules[fieldName][rule]=
{};this.rules[fieldName][rule].value="";this.fieldsCollected.push([fieldName,rule,""])}}},getFields:function(){return this.element.select("input[class*="+this.cssFieldSelectorClass+"], select[class*="+this.cssFieldSelectorClass+"], textarea[class*="+this.cssFieldSelectorClass+"]")},getAllFields:function(){return this.element.select("input, select, textarea")},setSubmitEnabled:function(enable){this.submitButtons.set({disabled:enable?null:true},false);enable===true?this.submitButtons.removeClass(this.disabledClassName):
this.submitButtons.addClass(this.disabledClassName);if(this.loaderEl)if(enable===true){this.submitButtons.setStyle("display","block");this.loaderEl.setStyle("display","none")}else{var loaderWidth=this.submitButtons.elements[0].offsetWidth+"px";this.submitButtons.setStyle("display","none");this.loaderEl.setStyle("display","block");this.loaderEl.setStyle("width",loaderWidth)}},disableForm:function(disable){this.isFormDisabled=disable;var _submitButton=this.element.select('input[type="submit"]').item(0);
if(disable&&!_submitButton.hasClass("disabled"))_submitButton.addClass("disabled");else _submitButton.removeClass("disabled")},setupErrors:function(){if(this.showErrorsOnEdit==true)this.getFields().on("focus",this.onInputErrorFocus,this).on("blur",this.onInputErrorBlur,this)},alignErrorLabels:function(){for(var label in this.errorLabels){var field=Ext.get(Ext.select("input[name='"+label+"'], select[name='"+label+"'], textarea[name='"+label+"']").item(0).dom);if(field!=null)if(this.showErrorsPos==
"right");else this.errorLabels[field.dom.name].setPosition(0,9+Ext.fly(field).getHeight(),field)}},alignHints:function(){if(!this.hintCmp.element.hasClass(this.captchaHintCls)){if(this.showHints&&typeof this.hintCmp!="undefined"&&this.hintCmp.element.dom!=null&&typeof this._hintField!="undefined")this.showHint(this._hintField,true)}else this.hintCmp.setPosition(Ext.get(this.captchaConfig.captchaInputId).dom.offsetLeft+Ext.get(this.captchaConfig.captchaInputId).dom.offsetWidth*2,Ext.get(this.captchaConfig.captchaInputId).dom.offsetTop+
Ext.get(this.captchaConfig.captchaInputId).dom.parentNode.offsetTop+5,null)},onInputErrorFocus:function(ev,target){var parent=Ext.get(target).parent();parent.select(this.formErrorSel).hide(this.errorHideDuration)},onInputErrorBlur:function(ev,target){if(!Ext.fly(target).hasClass(this.selectInputCls))this.checkField(Ext.get(target),this.fieldRules[target.name],this.showErrorsOnBlur)},getField:function(name){return this.element.select("input[name='"+name+"'], select[name='"+name+"'], textarea[name='"+
name+"'], ").item(0)},getFieldData:function(name){if(this.fields[name]instanceof Object)return this.fields[name];else return undefined},checkField:function(fieldEl,rules,showError){fieldEl=Ext.get(fieldEl);var isValid=true;if(typeof rules!="undefined")for(var ruleName in rules){var rule=rules[ruleName];if(ruleName!="remote"){var valid=Chaos.Validator[ruleName].call(Chaos.Validator,fieldEl.getValue(),rule);isValid=isValid&&valid;if(!valid&&showError){this.showError(fieldEl.dom,Chaos.translate(ruleName));
break}else this.hideError(fieldEl)}}this.fireEvent("validateField",fieldEl,isValid);return isValid},setupHints:function(){var hintedInputs=this.element.select(this.hintedInputSel);if(Ext.fly(this.hintContainerId)==null)Ext.DomHelper.append(this.element,{"id":this.hintContainerId,"class":"info_tag posHintPopup"});this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false});hintedInputs.on("focus",
this.onHintedInputFocus,this).on("blur",this.onHintedInputBlur,this)},onHintedInputFocus:function(ev,target){this._hintField=target.name;this.showHint(target.name)},onHintedInputBlur:function(ev,target){this.hintCmp.hide(this.hintHideDuration);this._hintField=undefined},showHint:function(field,includeParent){if(this.errorLabels&&this.errorLabels[field]&&this.errorLabels[field]._isShown==true)return;var field=Ext.get(field),includeParent=includeParent||false,relativeTop=field.dom.parentNode.offsetTop*
includeParent;this.hintCmp.setPosition(field.dom.offsetLeft+field.getWidth()+5,field.dom.offsetTop+relativeTop+5,null).setData("body",{message:field.getAttribute("alt")}).show(this.hintShowDuration);if(field.dom.id==this.captchaConfig.captchaInputId)this.hintCmp.setPosition(Ext.get(this.captchaConfig.captchaInputId).dom.offsetLeft+Ext.get(this.captchaConfig.captchaInputId).dom.offsetWidth*2,Ext.get(this.captchaConfig.captchaInputId).dom.offsetTop+Ext.get(this.captchaConfig.captchaInputId).dom.parentNode.offsetTop+
5,null)},hideHint:function(){if(typeof this.hintCmp!="undefined"&&this.hintCmp.element.dom){this._hintField=undefined;this.hintCmp.hide(this.hintHideDuration)}return this},showError:function(field,msg){if(field=="general"||field=="system"||field=="captcha"){if(this.useModalForGeneralErrors==true){this.fireEvent("showfailure",msg);JSM.form.failureNotice.show(msg);this.alignErrorLabels();this.alignHints()}else{var self=this;this.errorNodes=this.element.select(this.generalErrorSel);this.errorNodes.each(function(){if(self.showErrorsPos==
"right")Ext.get(this.findParent("div")).setStyle({display:"inline-block",visibility:"visible"});else Ext.get(this.findParent("div")).show();this.dom.innerHTML=msg});if(this._hintField!=undefined){this.alignErrorLabels();this.alignHints()}}return}field=Ext.get(field)||this.element.select("input[name="+field+"]").item(0);if(field.dom.name&&field.dom.name==this._hintField)this.hideHint();if(!field.dom||field.dom.name==undefined)throw new Error(200,"undefined name");var label=this.errorLabels[field.dom.name];
var labelId=field.dom.name+"_error";if(Ext.fly(labelId)==null)Ext.DomHelper.insertBefore(field.parent().select("div.clear").elements[0],{"id":labelId,"class":this.errorNodeClass});if(!(label instanceof Chaos.Window))this.errorLabels[field.dom.name]=new JSM.window.HintPopup(labelId,{isModal:false,showMode:"absolute",mustRender:true,autoDestroyElement:true,duration:1,bodyTag:this.errorTemplate,el:{"id":labelId,"class":this.errorNodeClass}});this.errorLabels[field.dom.name].setData("body",{"errorMsg":msg,
"class":this.errorNodeClass});if(this.showErrorsPos=="right")this.errorLabels[field.dom.name].setPosition(Ext.fly(field).getWidth()+field.dom.offsetLeft+5,5,null);else this.errorLabels[field.dom.name].setPosition(0,9+Ext.fly(field).getHeight(),field);this.errorLabels[field.dom.name].show();return},hideError:function(field){if(field&&field.dom!=null&&typeof this.errorLabels[field.dom.name]!="undefined")this.errorLabels[field.dom.name].hide(this.hintHideDuration,function(){this.element.setStyle("display",
"none")});return this},hideAllErrors:function(){for(var field in this.errorLabels)this.hideError(Ext.get(field));return this},onDelayedValidate:function(objId,url,els){this.currentField=Ext.get(objId);Chaos.Validator.remote(this.currentField,this.currentField.dom.value,url,els,true,this,this.validatorSuccessCallback,this.isBackConnNeeded)},validatorSuccessCallback:function(success,response){this._isExistingUsername=!response.json.success},registerRemoteEvents:function(objId,url){this._remoteRules[objId]=
{url:url,iId:undefined,success:false};this.objEl=Ext.get(objId);this.objEl.on("paste",this.onRemoteInputKeyup,this);if(this.objEl.id!="email")this.objEl.on("keyup",this.onRemoteInputKeyup,this);if(this.showErrorsOnBlur)this.objEl.on("blur",this.onRemoteInputBlur,this)},onRemoteInputBlur:function(ev,target){var objId=target.name;var url=this._remoteRules[objId].url;this.onDelayedValidate(objId,url,this.element)},onRemoteInputKeyup:function(ev,target){var objId=target.name;var url=this._remoteRules[objId].url;
if(ev.getCharCode()<=90&&ev.getCharCode()>=48||ev.getCharCode()==8||ev.getCharCode()==46){if(Chaos.isDefined(this.requestTask)){this.requestTask.cancel();this.requestTask=undefined}this.requestTask=new Ext.util.DelayedTask(this.onDelayedValidate,this,[objId,url,this.element]);this.requestTask.delay(this.validationDelay)}},validateAll:function(showErrors){var hasError=false;var hasErrorFields={};for(var i=0;i<this.fieldsCollected.length;i++){var field=this.element.select('input[name="'+this.fieldsCollected[i][0]+
'"]').item(0)||this.element.select('textarea[name="'+this.fieldsCollected[i][0]+'"]').item(0);if(field.dom.tagName=="TEXTAREA"||field.dom.tagName=="INPUT")field.dom.value=JSM.Util.trim(field.dom.value);var fieldName=field.dom.name;var rule=this.fieldsCollected[i][1];var ruleValue=this.fieldsCollected[i][2];var fieldValue=field.getValue();if(typeof Chaos.Validator[rule]=="function"&&rule!="remote"){var isCurrentRulePassed=Chaos.Validator[rule].call(Chaos.Validator,field.getValue(),ruleValue);if(!isCurrentRulePassed&&
showErrors!==false&&hasErrorFields[fieldName]!=true){this.showError(field.dom,Chaos.translate(rule));hasErrorFields[fieldName]=true}else if(field.hasClass(this.selectInputCls)){this.hideError(field);hasErrorFields[fieldName]=false}}if(!isCurrentRulePassed)hasError=true}if(this._isExistingUsername)hasError=true;this.fireEvent("validate",!hasError);delete field;delete fieldName;delete rule;delete ruleValue;return hasError},onSubmitClick:function(ev,target){ev.preventDefault();if(!this.isFormDisabled)this.submitForm(ev,
target)},onSubmitKeyDown:function(ev){var charCode=ev.getCharCode();if(ev.target.nodeName&&ev.target.nodeName=="INPUT")if(charCode==13&&!ev.shiftKey&&this.isDisabledOnEnter==false)this.submitForm(ev);else if(charCode==13&&ev.shiftKey)ev.preventDefault()},submitForm:function(ev,target){ev.preventDefault();this.hasError=this.validateAll(this.showErrorsOnSubmit);if(!this.submitOnSubmit||this.isFormDisabled){ev.preventDefault();this.fireEvent("before-submit",{scope:this});return!this.hasError}if(!this.hasError){this.setSubmitEnabled(!this.disableSubmitOnSubmit);
this.fireEvent("submit",this.element);if(!this.isAjax)this.element.dom.submit();else this.submit.call(this,ev,target)}},submit:function(){if(this.isAjax){var config=this.originalConfig,formId=this.element.dom.id,params={},ajaxUrl,form;for(var i in this.requestParams)if(typeof this.requestParams[i]=="string")params[this.requestParams[i]]=this.element.dom[this.requestParams[i]].value;form=typeof this.requestParams==="object"?undefined:this.element;ajaxUrl=this.ajaxUrl?Chaos.getUrl(this.ajaxUrl,{},{},
""):this.element.dom.action;Chaos.Ajax.request({url:ajaxUrl,method:this.element.dom.method.toUpperCase(),form:form,params:params,type:"json",scope:this,xDomainCallback:function(response){Chaos.fireEvent(JSM.Connection.GLOBALEVENT_XDOMAIN_RESPONSE,response)},success:function(response,opts){if(typeof config.success=="function")this.requestSuccess(response,opts,config,formId)},error:function(response,opts){this.requestError(response,opts)},failure:function(response,opts,err){this.requestFailure(response,
opts,err)}})}else this.element.dom.submit()},requestSuccess:function(response,opts,config,formId){this.fireEvent("submitSuccess",this,response,opts);this.setSubmitEnabled(true);if(config!=undefined)config.success.call(this.scope,formId||this.element.dom.id,response,opts);else if(typeof this.originalConfig.success=="function")this.originalConfig.success.call(this.scope,this.element.dom.id,response,opts);this.changeToken(response);this.loadFunctions()},requestError:function(response,opts){if(typeof response.json.errors==
"undefined"){var errorTpl=new Chaos.Template(this.errorTemplate),errorMsg=errorTpl.applyTemplate({errorMsg:"invalid response from server"});this.showError("general",errorMsg)}if(this.hasCaptcha&&typeof response.json.data!="undefined"&&typeof response.json.data.captchaId!="undefined")this.refreshCaptcha(response);this.onError.call(this,response.json||{},response.json.errors||{});var result=true;if(typeof this.originalConfig.error=="function")result=this.originalConfig.error.call(this.scope,response,
opts,this,response.errors);this.fireEvent("submitError",this,response,opts);this.setSubmitEnabled(true);this.changeToken(response);return result},requestFailure:function(response,opts,err){this.fireEvent("showfailure",response);JSM.form.failureNotice.show("Server error!");this.setSubmitEnabled(true);return false},xDomainCallback:function(response,opts){this.hideAllErrors();if(response.json.success){this.requestSuccess(response,opts);Chaos.fireEvent("backconn-request-complete",response,opts)}else{this.requestError(response,
opts);Chaos.fireEvent("backconn-request-error",this)}},resetForm:function(){this.element.dom.reset();this.fireEvent("reset",this)},refreshCaptcha:function(response){var captchaId=response.json.data.captchaId;Ext.fly(this.captchaConfig.captchaId).dom.value=captchaId;this.captcha.fillCaptcha()},changeToken:function(response){var token=response.json[this.tokenFieldName];if(this.handleToken==true)Ext.select("input[name='"+this.tokenFieldName+"']").each(function(){this.dom.value=token})},onError:function(data,
textStatus){if(typeof data.errors=="object")for(var field in data.errors)if(field=="general"||field=="captcha"){var errorTpl=new Chaos.Template(this.errorTemplate),errorMsg=errorTpl.applyTemplate({errorMsg:data.errors[field]});this.showError(field,errorMsg)}else switch(typeof data.errors[field]){case "object":if(Chaos.isArray(data.errors[field]))for(var err in data.errors)if(this.showErrorsOnSubmit==true)this.showError(field,data.errors[err]);break;case "string":if(this.showErrorsOnSubmit==true)this.showError(field,
data.errors[field]);break}},onBodyResize:function(ev,target){this.alignErrorLabels();this.alignHints()},onCheckBoxClick:function(ev,target){ev.preventDefault();ev.stopPropagation();var currentCheckBoxId=Ext.get(target).findParent("a").id;this.setCheckedBox(currentCheckBoxId,this.checkBoxItems)},onRadioBoxClick:function(ev,target){ev.preventDefault();ev.stopPropagation();var currentRadioBoxId=Ext.get(target).findParent("a").id;this.setCheckedBox(currentRadioBoxId,this.radioBoxItems)},setCheckedBox:function(elId,
itemObject){var boxEl,activeClass,hiddenInputEl;for(var itemId in itemObject)if(itemId==elId){boxEl=Ext.get(elId);activeClass=itemObject[itemId].activeClass;hiddenInputEl=Ext.get(itemObject[itemId].hiddenInputId);if(!boxEl.hasClass(activeClass)){boxEl.addClass(activeClass);hiddenInputEl.dom.value=itemObject[itemId].onCheckedValue;hiddenInputEl.dom.checked=true}else if(!boxEl.hasClass(this.radioBoxCls)){boxEl.removeClass(activeClass);hiddenInputEl.dom.value=itemObject[itemId].unCheckedValue;hiddenInputEl.dom.checked=
false}}else if(this.checkedAllBox==false){boxEl=Ext.get(itemId);activeClass=itemObject[itemId].activeClass;hiddenInputEl=Ext.get(itemObject[itemId].hiddenInputId);boxEl.removeClass(activeClass);hiddenInputEl.dom.checked=false}},getCheckBoxes:function(){var checkBoxes={},checkBox,currentCheckBox;for(checkBox in this.checkBoxItems){currentCheckBox=this.checkBoxItems[checkBox];checkBoxes[currentCheckBox.hiddenInputId]=Ext.get(currentCheckBox.hiddenInputId).dom.value}return checkBoxes},onCancelBtnClick:function(){this.setDefaultCheckedBox(this.checkBoxItems);
this.setDefaultCheckedBox(this.radioBoxItems)},setDefaultCheckedBox:function(itemObject){for(var itemId in itemObject){var boxEl=Ext.get(itemId);var hiddenInputEl=Ext.get(itemObject[itemId].hiddenInputId);hiddenInputEl.dom.value=itemObject[itemId].defaultValue;if(itemObject[itemId].isSetActiveClass==true){boxEl.addClass(itemObject[itemId].activeClass);hiddenInputEl.dom.checked=true}else{boxEl.removeClass(itemObject[itemId].activeClass);hiddenInputEl.dom.checked=false}}},onRemoteResponseValidator:function(response){if(typeof response.json.errors==
"string"){this.fireEvent("showerror",this.currentField.dom,response.json.errors);this.showError(this.currentField.dom,response.json.errors)}else if(typeof errors=="object")for(var fieldName in response.json.errors){var msg=response.json.errors[fieldName];this.fireEvent("showerror",this.currentField.dom,msg);this.showError(this.currentField.dom,msg)}},getHintCmp:function(){if(!this.hintContainerEl)this.hintContainerEl=Ext.get(Ext.DomHelper.append(this.element,{"id":this.hintContainerId,"class":"info_tag posHintPopup"}));
return this.hintContainerEl},bind:function(){Ext.fly(window).on("resize",this.onBodyResize,this);this.submitButtons.on("click",this.onSubmitClick,this);if(this.cancelButtonEl)this.cancelButtonEl.on("click",this.onCancelBtnClick,this);for(var itemId in this.checkBoxItems)Ext.fly(itemId).on("click",this.onCheckBoxClick,this);for(var itemId in this.radioBoxItems)Ext.fly(itemId).on("click",this.onRadioBoxClick,this);this.element.on("keydown",this.onSubmitKeyDown,this);this.allFields.on("focus",this.onInputFocus,
this).on("blur",this.onInputBlur,this).on("change",this.onInputChange,this);this.allFields.each(function(item,all){var elem=Ext.get(item.dom),tagName=elem.dom.tagName.toLowerCase(),type=elem.dom.type},this);Chaos.Broadcaster.on(JSM.Connection.GLOBALEVENT_REMOTE_RESPONSE,this.onRemoteResponseValidator,this)},removeErrorLabels:function(){for(var i in this.errorLabels){var errorLbl=Ext.get(this.errorLabels[i].id);if(errorLbl)errorLbl.remove()}},unbind:function(){Ext.fly(window).un("resize",this.onBodyResize,
this);this.submitButtons.un("click",this.onSubmitClick,this);if(this.cancelButtonEl)this.cancelButtonEl.un("click",this.onCancelBtnClick,this);for(var itemId in this.checkBoxItems)Ext.fly(itemId).un("click",this.onCheckBoxClick,this);for(var itemId in this.radioBoxItems)Ext.fly(itemId).un("click",this.onRadioBoxClick,this);this.allFields.un("focus",this.onInputFocus,this).un("blur",this.onInputBlur,this).un("change",this.onInputChange,this);this.getFields().un("focus",this.onInputErrorFocus,this).un("blur",
this.onInputErrorBlur,this);this.element.select(this.hintedInputSel).un("focus",this.onHintedInputFocus,this).un("blur",this.onHintedInputBlur,this);if(this.objEl!=undefined){this.objEl.un("paste",this.onRemoteInputKeyup,this);this.objEl.un("keyup",this.onRemoteInputKeyup,this);this.objEl.un("blur",this.onRemoteInputBlur,this)}this.element.un("keydown",this.onSubmitKeyDown,this);this.removeErrorLabels();JSM.form.Form.superclass.unbind.call(this)}});Ext.namespace("JSM.page.error.error500");
JSM.page.error.error500=function(el,config){JSM.page.error.error500.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.error.error500,Chaos.Object,{name:"page.error500",timer:5E3,init:function(el,config){JSM.page.error.error500.superclass.init.call(this,el,config);var task=new Ext.util.DelayedTask(this.jumpToMainPage);task.delay(this.timer)},jumpToMainPage:function(){window.location.replace(Chaos.getConfig("mainPageUrl"))},bind:function(){JSM.page.error.error500.superclass.bind.call(this)},unbind:function(){JSM.page.error.error500.superclass.unbind.call(this)}});Ext.namespace("JSM.page.staticpage");
JSM.page.staticpage.contactus=function(el,config){JSM.page.staticpage.contactus.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.staticpage.contactus,Chaos.Object,{name:"page.contactus",formId:"contactus_form",statusListId:"status_list",languageListId:"language_list_select",statusInputName:"selected_status",languageInputName:"selected_lang",contactContainerClass:".contact_container",warningTagClass:".warning_tag",chooseContactSel:"choose_contact",goBackLinkClass:".go_back_link",emailContactContId:"contact_by_email",onlineSupportLinkSel:"online_support_link",sendMessageLinkSel:"send_message_link",supportChatContId:"contact_online_support",
flashObjectId:"online_support_chat",nickId:"name",emailId:"email",requestId:"requested_service",commentId:"comments",maxCharTextTranslate:undefined,commentCharInfoBlockId:"comment_char_info",maxNameCharLimitNumber:30,maxEmailCharLimitNumber:255,maxRequestCharLimitNumber:100,maxCommentCharLimitNumber:4E3,hintContainerId:"hint_node",_supportLinkEl:undefined,_messageLinkEl:undefined,_supportChatContEl:undefined,_supportChatObj:undefined,_flashObjHeight:286,_flashObjWidth:686,_emailContactContEl:undefined,
_infoBlockEl:undefined,_contactusForm:undefined,init:function(el,config){this._supportLinkEl=Ext.get(this.onlineSupportLinkSel);this._messageLinkEl=Ext.get(this.sendMessageLinkSel);this._supportChatContEl=Ext.get(this.supportChatContId);this._emailContactContEl=Ext.get(this.emailContactContId);this.hintContainerEl=Ext.get(this.hintContainerId);this.usernameInputEl=Ext.get(this.nickId);this.emailInputEl=Ext.get(this.emailId);var self=this,supportAppletUrl=Chaos.Config.get("supportAppletUrl"),supportAppletParams=
Chaos.Config.get("supportAppletParams"),supportAppletFlashvars=Chaos.Config.get("supportAppletFlashvars"),supportAppletAttributes=Chaos.Config.get("supportAppletAttributes");if(this._supportChatContEl)if(!Ext.isIE11)swfobject.embedSWF(supportAppletUrl,this.flashObjectId,this._flashObjWidth,this._flashObjHeight,"9.0.0","expressInstall.swf",supportAppletFlashvars,supportAppletParams,supportAppletAttributes,function(){self.initSupportChatObj()});else{this.supportAppletFlashvarsQS=undefined;for(var k in supportAppletFlashvars)if(typeof this.supportAppletFlashvarsQS!=
"undefined")this.supportAppletFlashvarsQS+="&"+k+"="+supportAppletFlashvars[k];else this.supportAppletFlashvarsQS=k+"="+supportAppletFlashvars[k];Ext.fly("online_support_chat").remove();Ext.DomHelper.append("support_chat_container",'<object id="online_support_chat_obj" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+supportAppletUrl+'" type="application/x-shockwave-flash" width="686" height="286">'+'<param name="movie" value="'+supportAppletUrl+'" />'+'<param name="quality" value="high" />'+
'<param name="allowScriptAccess" value="always" />'+'<param name="allowNetworking" value="all" />'+'<param name="wmode" value="opaque" />'+'<param name="FlashVars" value="'+this.supportAppletFlashvarsQS+'" />'+"</object>")}if(this._emailContactContEl.getStyle("display")=="block")this.initEmailAssistance();this.maxCharTextTranslate=Chaos.translate("You&#39;ve reached the maximum length of this message<br />("+this.maxCommentCharLimitNumber+" characters).");this.maxCharTextMessage='<span class="arrow">&nbsp;</span><span class="info_icon">&nbsp;</span><p>'+
this.maxCharTextTranslate+"</p>";this._infoBlockEl=Ext.get(this.commentCharInfoBlockId);window.supportChat={};window.supportChat.onCloseSupportChat=function(){self.onCloseSupportChat.call(self)};JSM.page.staticpage.contactus.superclass.init.call(this,el,config)},initSupportChatObj:function(){this._supportChatObj=Chaos.getFlashMovieObject(this.flashObjectId,true);if(Chaos.Util.getUrlParams().page!="online-support"||this._emailContactContEl.getStyle("display")=="block")this._supportChatContEl.setStyle("display",
"none");Chaos.Broadcaster.on(JSM.window.SearchFilterWindow.GLOBALEVENT_SHOW,this.hideSupportChat,this);Chaos.Broadcaster.on(JSM.window.SearchFilterWindow.GLOBALEVENT_HIDE,this.showSupportChat,this);Chaos.Broadcaster.on(JSM.Overlay.EVENT_OVERLAY_OPEN,this.hideSupportChat,this);Chaos.Broadcaster.on(JSM.Overlay.EVENT_OVERLAY_CLOSE,this.showSupportChat,this)},onCloseSupportChat:function(){window.location.href=Chaos.Config.get("mainPageUrl")},onGoBackClick:function(ev){ev.preventDefault();if(this._supportChatObj&&
this._supportChatObj.dom.closeChat)this._supportChatObj.dom.closeChat();else{this.initSupportChatObj();if(this._supportChatObj!=undefined&&this._supportChatObj.dom.closeChat)this._supportChatObj.dom.closeChat()}this.element.select(this.contactContainerClass).setStyle("display","none");this.element.select(this.warningTagClass).hide();Ext.get(this.chooseContactSel).setStyle("display","block")},onShowSupportChatClick:function(ev){ev.preventDefault();this.element.select(this.contactContainerClass).setStyle("display",
"none");this._supportChatContEl.setStyle("display","block");this.showSupportChat()},onShowSupportEmailClick:function(ev){ev.preventDefault();this.element.select(this.contactContainerClass).setStyle("display","none");this._emailContactContEl.setStyle("display","block");this.initEmailAssistance()},initEmailAssistance:function(){if(!this.selectLangList)this.selectLangList=new JSM.component.SelectList(this.languageListId,{inputSel:"input[name=language_selection]",hiddenInputSel:"input[name="+this.languageInputName+
"]",hideEl:Ext.get(this.statusListId),hasMoreList:true,pageId:this.element});if(Ext.get(this.statusListId)!=null&&!this.selectStatusList)this.selectStatusList=new JSM.component.SelectList(this.statusListId,{inputSel:"input[name=status_selection]",hiddenInputSel:"input[name="+this.statusInputName+"]",hasMoreList:true,pageId:this.element,scrollPaneContainerId:null});this._contactusForm=new JSM.form.Form(this.formId,{scope:this,submitSel:"#send_button"});if(this.usernameInputEl){this._usernameCharacterCounter=
new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxNameCharLimitNumber,hasWarningLimit:false,inputId:this.nickId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._usernameCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this)}if(this.emailInputEl){this._emailCharacterCounter=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxEmailCharLimitNumber,hasWarningLimit:false,inputId:this.emailId,
isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._emailCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this)}this._requestCharacterCounter=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxRequestCharLimitNumber,hasWarningLimit:false,inputId:this.requestId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._requestCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxRequestCharLimitReached,this);this._commentCharacterCounter=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCommentCharLimitNumber,hasWarningLimit:false,inputId:this.commentId,counterId:"comment_char_number",maxCharText:this.maxCharTextTranslate,charInfoId:this.commentCharInfoBlockId,isMaxCharSound:true});this._commentCharacterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCommentCharLimitReached,this);this._contactusForm.on("inputBlur",
this.onInputBlur,this)},onInputBlur:function(){var errorMsg=this.element.select(".error_message"),successMsg=this.element.select(".success_message");if(errorMsg.isVisible())errorMsg.hide(1);if(successMsg.isVisible())successMsg.hide(1)},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},hideSupportChat:function(){if(this._supportChatObj){this._supportChatObj.setHeight(1);this._supportChatObj.setWidth(1)}},showSupportChat:function(){if(this._supportChatObj){this._supportChatObj.setHeight(this._flashObjHeight);
this._supportChatObj.setWidth(this._flashObjWidth)}},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();this._contactusForm.showHint(this.nickId);this.hintContainerEl.show()},onMaxEmailCharLimitReached:function(){this.maxCharLimitReached();this._contactusForm.showHint(this.emailId);this.hintContainerEl.show()},onMaxRequestCharLimitReached:function(){this.maxCharLimitReached();this._contactusForm.showHint(this.requestId);this.hintContainerEl.show()},onMaxCommentCharLimitReached:function(){this._infoBlockEl.dom.innerHTML=
this.maxCharTextMessage;if(!this._infoBlockEl.isVisible())this._infoBlockEl.show()},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},bind:function(){JSM.page.staticpage.contactus.superclass.bind.call(this);this.element.select(this.goBackLinkClass).on("click",this.onGoBackClick,this);if(this._supportLinkEl)this._supportLinkEl.on("click",this.onShowSupportChatClick,
this);if(this._messageLinkEl)this._messageLinkEl.on("click",this.onShowSupportEmailClick,this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.staticpage.contactus.superclass.unbind.call(this);this.element.select(this.goBackLinkClass).un("click",this.onGoBackClick,this);if(this._supportLinkEl)this._supportLinkEl.un("click",this.onShowSupportChatClick,this);if(this._messageLinkEl)this._messageLinkEl.un("click",this.onShowSupportEmailClick,this);this._nameCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxNameCharLimitReached,this);this._emailCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this);this._requestCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxRequestCharLimitReached,this);this._commentCharacterCounter.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCommentCharLimitReached,this);Ext.fly(window).un("load",this.onWindowLoad,this);this._contactusForm.un("inputBlur",
this.onInputBlur,this)}});Ext.namespace("JSM.page.staticpage.faq");JSM.page.staticpage.faq=function(el,config){JSM.page.staticpage.faq.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.staticpage.faq,Chaos.Object,{name:"page.faq",questionSel:".question",durationTime:0.5,init:function(el,config){JSM.page.staticpage.faq.superclass.init.call(this,el,config);this.accordionMenu=new JSM.component.Accordion("faq",{openSel:this.questionSel,durationTime:this.durationTime})},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},bind:function(){JSM.page.staticpage.faq.superclass.bind.call(this);Ext.fly(window).on("load",
this.onWindowLoad,this)},unbind:function(){JSM.page.staticpage.faq.superclass.unbind.call(this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page.staticpage.policy");JSM.page.staticpage.policy=function(el,config){JSM.page.staticpage.policy.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.staticpage.policy,Chaos.Object,{name:"page.policy",selectList:undefined,policyInputName:"select_policy",init:function(el,config){JSM.page.staticpage.policy.superclass.init.call(this,el,config);this.selectList=new JSM.component.SelectList("clause_list",{inputSel:"input[name="+this.policyInputName+"]",scrollPaneContainerId:"clause_list_container",preventDefault:false})},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},bind:function(){JSM.page.staticpage.policy.superclass.bind.call(this);
Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.staticpage.policy.superclass.unbind.call(this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page.staticpage.termsandconditions");JSM.page.staticpage.termsandconditions=function(el,config){JSM.page.staticpage.termsandconditions.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.staticpage.termsandconditions,Chaos.Object,{name:"page.termsandconditions",init:function(el,config){JSM.page.staticpage.termsandconditions.superclass.init.call(this,el,config)},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},bind:function(){JSM.page.staticpage.termsandconditions.superclass.bind.call(this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.staticpage.termsandconditions.superclass.unbind.call(this);
Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page.staticpage.topmember");JSM.page.staticpage.topmember=function(el,config){JSM.page.staticpage.topmember.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.staticpage.topmember,Chaos.Object,{name:"page.topmember",init:function(el,config){JSM.page.staticpage.topmember.superclass.init.call(this,el,config)},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},bind:function(){JSM.page.staticpage.topmember.superclass.bind.call(this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.staticpage.topmember.superclass.unbind.call(this);Ext.fly(window).un("load",
this.onWindowLoad,this)}});Ext.namespace("JSM.plugin");JSM.plugin.ListPageBuilder=function(config){JSM.plugin.ListPageBuilder.superclass.constructor.call(this,config)};JSM.plugin.ListPageBuilder.TYPE_DEFAULT_PAGE="3";JSM.plugin.ListPageBuilder.TYPE_PAGE_WITH_TWO_BIG_IMAGES="2";JSM.plugin.ListPageBuilder.TYPE_PAGE_WITH_ONE_BIG_IMAGE="1";JSM.plugin.ListPageBuilder.TYPE_PAGE_WITHOUT_BIG_IMAGES="0";JSM.plugin.ListPageBuilder.EVENT_BUILD_READY="listpage-content-ready";
JSM.plugin.ListPageBuilder.EVENT_BEFORE_CONTENT_REPLACE="before-content-replace";JSM.plugin.ListPageBuilder.EVENT_AFTER_CONTENT_REPLACE="after-content-replace";JSM.plugin.ListPageBuilder.GLOBALEVENT_GET_OMMERCIAL_TEMPLATE="get-commercial-template";JSM.plugin.ListPageBuilder.BLOCK_TYPE_PERFORMER="performer";JSM.plugin.ListPageBuilder.BLOCK_TYPE_FAVORITES="favorites";JSM.plugin.ListPageBuilder.BLOCK_TYPE_HISTORY="history";JSM.plugin.ListPageBuilder.BLOCK_TYPE_COMMERCIAL="commercial";
JSM.plugin.ListPageBuilder.BLOCK_TYPE_NEW_CATEGORIES="newCategories";JSM.plugin.ListPageBuilder.BLOCK_TYPE_AWARDS_PERFORMER="awardsPerformer";JSM.plugin.ListPageBuilder.BLOCK_TYPE_AWARDS_PERFORMER_BANNED="bannedAwardsPerformer";
Chaos.extend(JSM.plugin.ListPageBuilder,Chaos.Plugin,{name:"ListPageBuilder",addedFavoriteCls:"myfavorite",rightBlockClass:"right",leftBlockClass:"left",middleRightBlockClass:"middle_right",rightColumnClass:"col_right",leftColumnClass:"col_left",smallImagesName:"small",bigImagesName:"big",anchorClass:"perf_link",containerIdPrefix:"listpage",commercialImageUrl:"listpage",commercialImageId:"commercial",commercialAnchorClass:"perf_link commercial_link",commercialStaticLinkAnchorClass:"perf_link commercial_link static_link",
commercialContainerClass:"commercial_container",animDuration:0.1,emptyFlashInitData:{qualitycategory:"",resolution:"",sumofonlineperformers:"",teaser_audio:"",teaser_duration:"",teaser_type:"",teaser_url:"",teaser_videoaudio:""},_templates:{},init:function(){var privateStatusTranslate=Chaos.translate("In Private Chat"),offlineStatusTranslate=Chaos.translate("Offline"),memberStatusTranslate=Chaos.translate("In Member Chat");this.statusTranslations=[offlineStatusTranslate,"",privateStatusTranslate,
memberStatusTranslate],this.statusClasses=["offline","free","private","members_only"];Chaos.addEvents(JSM.plugin.ListPageBuilder.EVENT_BUILD_READY,JSM.plugin.ListPageBuilder.EVENT_BEFORE_CONTENT_REPLACE,JSM.plugin.ListPageBuilder.EVENT_AFTER_CONTENT_REPLACE,JSM.plugin.ListPageBuilder.GLOBALEVENT_GET_OMMERCIAL_TEMPLATE);var isWide=Chaos.Config.get("isWide");this.singleRowThumbCount=isWide?4:5;this.mixedBlockThumbCount=isWide?4:6;this.middleBlockThumbCount=isWide?2:4},collectBlocks:function(data){var size,
i;for(i in data){size=data[i].size;if(data.hasOwnProperty(i)){if(this._blocks[size]==undefined)this._blocks[size]={};this._blocks[size][i]=data[i]}}},getLength:function(obj){var count=0;for(var i in obj)if(typeof obj[i]!="undefined")count++;return count},setBlocks:function(dataObj){this.resetVars();if(dataObj.content&&dataObj.content.performers&&dataObj.content.performers.length>0){this.collectBlocks(dataObj.content.performers);var bigImagesLength=this.getLength(this._blocks[this.bigImagesName]),
pageType=bigImagesLength.toString(),i,numOfLines;this.smallImageCounter=bigImagesLength;switch(pageType){case JSM.plugin.ListPageBuilder.TYPE_PAGE_WITHOUT_BIG_IMAGES:numOfLines=this.getLength(this._blocks[this.smallImagesName])/this.singleRowThumbCount;for(i=0;i<=numOfLines;i++)this.setNewBlock("",this.setSmallImages(this.singleRowThumbCount,true),true);break;case JSM.plugin.ListPageBuilder.TYPE_PAGE_WITH_TWO_BIG_IMAGES:this.setNewBlock(this.rightBlockClass,this.setBigImage()+this.setSmallImages(this.mixedBlockThumbCount,
true),true);this.setNewBlock("",this.setSmallImages(this.singleRowThumbCount,true),true);this.setNewBlock(this.leftBlockClass,this.setBigImage()+this.setSmallImages(this.mixedBlockThumbCount,false)+this.setClearBlock(),true);numOfLines=this.getLength(this._blocks[this.smallImagesName])/this.singleRowThumbCount;for(i=0;i<=parseInt(numOfLines);i++)this.setNewBlock("",this.setSmallImages(this.singleRowThumbCount,true),true);break;case JSM.plugin.ListPageBuilder.TYPE_PAGE_WITH_ONE_BIG_IMAGE:this.setNewBlock(this.rightBlockClass,
this.setBigImage()+this.setSmallImages(this.mixedBlockThumbCount,true),true);numOfLines=this.getLength(this._blocks[this.smallImagesName])/this.singleRowThumbCount;for(i=0;i<=parseInt(numOfLines);i++)this.setNewBlock("",this.setSmallImages(this.singleRowThumbCount,true),true);break;case JSM.plugin.ListPageBuilder.TYPE_DEFAULT_PAGE:default:var rightBlockContent=this.setBigImage()+this.setSmallImages(this.mixedBlockThumbCount,true);this.setNewBlock(this.rightBlockClass,rightBlockContent,true);var lineBlockContent=
this.setSmallImages(this.singleRowThumbCount,true);this.setNewBlock("",lineBlockContent,true);var leftBlockContent=this.setBigImage()+this.setSmallImages(this.mixedBlockThumbCount,false)+this.setClearBlock();this.setNewBlock(this.leftBlockClass,leftBlockContent,true);var secondLineBlockContent=this.setSmallImages(this.singleRowThumbCount);this.setNewBlock("",secondLineBlockContent,true);var middleRightBlockLeftColContent=this.setBigImage()+this.setSmallImages(this.middleBlockThumbCount,false);var middleRightBlockRightColContent=
this.setSmallImages(2,false);this.setNewBlock(this.middleRightBlockClass,this.setNewBlock(this.leftColumnClass,middleRightBlockLeftColContent,false)+this.setNewBlock(this.rightColumnClass,middleRightBlockRightColContent,false)+this.setClearBlock(),true);var thirdLineBlockContent=this.setSmallImages(this.singleRowThumbCount,true);this.setNewBlock("",thirdLineBlockContent,true);break}var generatedContent=this._generatedContent;Chaos.fireEvent(JSM.plugin.ListPageBuilder.EVENT_BUILD_READY,{scope:this,
content:generatedContent,data:dataObj});JSM.Util.setCursor("default");return generatedContent}},resetVars:function(){this._blocks={};this._generatedContent="";this.bigImageCounter=0},setCurrentBlock:function(el){if(el!=undefined){var newBlock=this.setBlock(el);return newBlock}return undefined},setNewBlock:function(cls,content,addToMain){if(content!=""){var newContent=!cls?"<div>"+content+"</div>":'<div class="'+cls+'">'+content+"</div>";return addToMain?this._generatedContent+=newContent:newContent}return""},
setSmallImages:function(max,addClearBlock){var content="";for(var i=0;i<max;i++){var currentImage=this._blocks[this.smallImagesName][this.smallImageCounter],block=this.setCurrentBlock(currentImage);if(block!=undefined)content+=block;delete currentImage;this.smallImageCounter++}if(content!=""&&addClearBlock)content+=this.setClearBlock();return content},setBigImage:function(){if(typeof this._blocks[this.bigImagesName]!="undefined"){var currentImage=this._blocks[this.bigImagesName][this.bigImageCounter],
imageBlock=this.setCurrentBlock(currentImage);delete currentImage;this.bigImageCounter++;return imageBlock}return undefined},setBlock:function(data){var blockType=data.blockType||JSM.plugin.ListPageBuilder.BLOCK_TYPE_PERFORMER,templateClass;if(!this.checkIdDuplication(data.id)){var errorEvent=JSM.component.Lister.SHOW_MORE_ERROR;if(this.host.events[errorEvent])this.host.fireEvent(errorEvent,this)}switch(blockType){case JSM.plugin.ListPageBuilder.BLOCK_TYPE_NEW_CATEGORIES:templateClass=JSM.template.ImageWithoutAnchorTemplate;
break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_COMMERCIAL:return data.content;break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_FAVORITES:templateClass=JSM.template.FavoritesTemplate;break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_HISTORY:templateClass=JSM.template.HistoryTemplate;break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_PERFORMER:templateClass=JSM.template.PerformerTemplate;break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_AWARDS_PERFORMER:templateClass=JSM.template.AwardsPerformerTemplate;
break;case JSM.plugin.ListPageBuilder.BLOCK_TYPE_AWARDS_PERFORMER_BANNED:templateClass=JSM.template.AwardsPerformerBannedTemplate;break;default:templateClass=JSM.template.ImageWithAnchorTemplate;break}return this._renderTemplate(templateClass,blockType,data)},_renderTemplate:function(tplClass,blockType,tplData){if(!(this._templates[blockType]instanceof tplClass))this._templates[blockType]=new tplClass;return this._templates[blockType].render(tplData)},isCommercialBlock:function(blockType){return blockType&&
blockType!==JSM.plugin.ListPageBuilder.BLOCK_TYPE_PERFORMER&&blockType!==JSM.plugin.ListPageBuilder.BLOCK_TYPE_AWARDS_PERFORMER&&blockType!==JSM.plugin.ListPageBuilder.BLOCK_TYPE_FAVORITES&&blockType!==JSM.plugin.ListPageBuilder.BLOCK_TYPE_HISTORY},setClearBlock:function(){return'<div class="clear"></div>'},checkIdDuplication:function(id){return!Ext.get("div[id=*"+id+"]")},setFlashInitData:function(flashInitData){return Ext.encode(flashInitData)},setUrl:function(route){return location.protocol+"//"+
location.host+route},getStatus:function(status){var statusBlock=status!="1"?'<span class="status">'+"<span>"+this.statusTranslations[status]+"</span>"+'<span class="bg">&nbsp;</span>'+"</span>":"";return statusBlock.toString()},getBadge:function(badge){var badgeBlock=badge!=undefined?'<span class="badge '+badge+'">&nbsp;</span>':"";return badgeBlock.toString()},getFavoriteClass:function(isFavorite){return isFavorite==true?" "+this.addedFavoriteCls:""},replaceContent:function(newContent,containerId){Chaos.fireEvent(JSM.plugin.ListPageBuilder.EVENT_BEFORE_CONTENT_REPLACE,
{container:containerId,newContent:newContent});Ext.fly(containerId).select('div[id^="'+this.containerIdPrefix+'"]').remove();this.createNewBlock(containerId,{tag:"div",id:this.containerIdPrefix+"_0",cls:"page"},newContent)},createNewBlock:function(el,params,html){if(!Ext.fly(params.id)){window.scrollTo(0,0);Ext.DomHelper.insertFirst(el,params);var newBlockEl=Ext.get(params.id);newBlockEl.dom.innerHTML=html;Chaos.fireEvent(JSM.plugin.ListPageBuilder.EVENT_AFTER_CONTENT_REPLACE,{container:newBlockEl,
params:params})}},refreshListPageId:function(newId){Chaos.setMeta("listPageId",newId)},bind:function(){JSM.plugin.ListPageBuilder.superclass.bind.call(this)},unbind:function(){JSM.plugin.ListPageBuilder.superclass.unbind.call(this)}});Chaos.registerPlugin(JSM.plugin.ListPageBuilder);Ext.namespace("JSM.plugin");JSM.plugin.AppletResize=function(config){JSM.plugin.AppletResize.superclass.constructor.call(this,config)};JSM.plugin.AppletResize.GLOBALEVENT_APPLET_SHOW="applet-show";
JSM.plugin.AppletResize.GLOBALEVENT_APPLET_HIDE="applet-hide";
Chaos.extend(JSM.plugin.AppletResize,Chaos.Plugin,{name:"AppletResize",appletId:"chatapplet",overlayId:"overlay",overlayElementId:"header-menu-overlay",events:{},animateDuration:0.01,categoryFilterId:"filter_container",closeBtnSel:".header_menu_close_btn",useOverlay:true,_overlayEl:undefined,_appletEl:undefined,_showAppletEnabled:true,_dropDownStates:undefined,_isAppletVisible:true,_overlayWindow:undefined,_isOverlayNeeded:true,_overlayElement:true,init:function(host){this._overlayElement=Ext.get(this.overlayElementId);
if(!this._overlayElement)this._overlayElement=Ext.DomHelper.append(Ext.getBody(),{tag:"div",id:this.overlayElementId},true);if(this.useOverlay){this._overlayWindow=new Chaos.Window(this._overlayElement,{isModal:true,overlayTopPosition:40,overlay:this.overlayId});this._overlayWindow.isBinded=true}this.categoryFilterEl=Ext.get(this.categoryFilterId);this._overlayEl=Ext.get(this.overlayId);JSM.plugin.AppletResize.superclass.init.call(this,host);Chaos.addEvents(JSM.plugin.AppletResize.GLOBALEVENT_APPLET_SHOW,
JSM.plugin.AppletResize.GLOBALEVENT_APPLET_HIDE)},onBeforeOverlayHide:function(){if(this._dropDownStates)this.showApplet(this._dropDownStates["overlay"]!="opened")},onHideApplet:function(ev){this.hideApplet(false)},hideApplet:function(setScroll){if(!this._appletEl)this._appletEl=Ext.get(Chaos.getFlashMovieObject(this.appletId));this._isAppletVisible=false;window.freeChatWindow.isMinimized=true;JSM.util.Flash.minimize(this._appletEl);Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL,{scope:this,
disable:setScroll});if(this._isOverlayNeeded)this.displayOverlay(true);Chaos.fireEvent(JSM.plugin.AppletResize.GLOBALEVENT_APPLET_HIDE,{scope:this})},displayOverlay:function(show){if(this.useOverlay)if(show){this._overlayWindow._isShown=false;this._overlayWindow.show(this.animateDuration)}else this._overlayWindow.hide(this.animateDuration)},onShowApplet:function(ev){this.showApplet(false)},showApplet:function(setScroll){if(!this._isAppletVisible){this._isAppletVisible=true;window.freeChatWindow.isMinimized=
false;window.freeChatWindow.resizeFlashApplet();if(setScroll===true)Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_SET_SCROLL,{scope:this,disable:false});this.displayOverlay(false);Chaos.fireEvent(JSM.plugin.AppletResize.GLOBALEVENT_APPLET_SHOW,{scope:this})}},onCheckDropDownStates:function(ev){this._dropDownStates=ev?ev:this._dropDownStates;if(this._dropDownStates){this._showAppletEnabled=true;for(var i in this._dropDownStates)if(this._dropDownStates.hasOwnProperty(i))if(this._dropDownStates[i]=="opened")this._showAppletEnabled=
false}this.checkDisplaying();return this._showAppletEnabled},checkDisplaying:function(){var _isOverlayNeeded=this._dropDownStates["overlay"]!="opened";if(this._showAppletEnabled)this.showApplet(_isOverlayNeeded);else{this._isOverlayNeeded=_isOverlayNeeded;if(this.useOverlay)if(this._isOverlayNeeded&&!this._overlayWindow.isBinded){this._overlayWindow.isBinded=true;this._overlayWindow.bind()}else if(!this._isOverlayNeeded){this._overlayWindow.isBinded=false;this._overlayWindow.unbind();this._overlayEl.setTop("0")}this.hideApplet(_isOverlayNeeded)}},
bind:function(){JSM.plugin.AppletResize.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES,this.onCheckDropDownStates,this);if(this.useOverlay)this._overlayWindow.on(Chaos.Window.EVENT_BEFORE_HIDE,this.onBeforeOverlayHide,this);this.categoryFilterEl.select(this.closeBtnSel).item(0).on("click",this.showApplet,this)},unbind:function(){JSM.plugin.AppletResize.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES,
this.onCheckDropDownStates,this);if(this.useOverlay)this._overlayWindow.un(Chaos.Window.EVENT_BEFORE_HIDE,this.onBeforeOverlayHide,this);this.categoryFilterEl.select(this.closeBtnSel).item(0).un("click",this.showApplet,this)}});Chaos.registerPlugin(JSM.plugin.AppletResize);Ext.namespace("JSM.plugin.AutoSuggest");JSM.plugin.AutoSuggest=function(config){JSM.plugin.AutoSuggest.superclass.constructor.call(this,config)};JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_CLICK_ON_LIST_ELEM="autosuggest-click-on-list-elem";
JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_NAME_SELECTION="autosuggest-name-selection";JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_PRESEARCH_SUCCES="autosuggest-presearch-success";JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SHOW="autosuggest-show";JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_ESC_PRESS="autosuggest-esc-press";JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_DELETE_BUTTON_CLICK="autosuggest-delete-button-click";JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SEARCH="search";
JSM.plugin.AutoSuggest.LIST_TYPE_NAME="name";JSM.plugin.AutoSuggest.LIST_TYPE_TAG="tag";JSM.plugin.AutoSuggest.LIST_TYPE_DIRECT_SEARCH="search_for";JSM.plugin.AutoSuggest.ACTION_SEARCHPICK="searchPick";JSM.plugin.AutoSuggest.ACTION_SEARCHPICK_NAME="searchPickName";JSM.plugin.AutoSuggest.ACTION_SEARCH_KEYWORD="searchKeyword";JSM.plugin.AutoSuggest.ACTION_SEARCH_NORESULT="noResult";JSM.plugin.AutoSuggest.ERROR_SEARCH_NORESULT="no_result";JSM.plugin.AutoSuggest.MIDDLE_MOUSE_BUTTON_CLICKED=2;
Chaos.extend(JSM.plugin.AutoSuggest,Chaos.Plugin,{name:"AutoSuggest",category:undefined,requestTask:undefined,delaying:0,autoSuggestId:"auto_suggest",appendToId:undefined,relBlockId:undefined,stepCounter:0,registerCounter:1,listElement:"li",extendFieldSel:"extend_field",listItemHoverClass:"active_suggestion",inputFieldEl:undefined,counter:0,notFoundTextArray:[],noResultText:false,partialKeyword:null,action:null,hideAutoSuggestList:true,searchUrlRoute:"Index/Search",suggestUrlRoute:"ListPageAjax/AutoSuggest",
logUrlRoute:"ListPageAjax/LogSearchEvents",noResponseBlock:undefined,extendFieldNeeded:false,enableAjax:true,changeFieldIdOnEnter:undefined,maxCharLength:22,minCharLength:0,noResultTextLength:null,autoSuggestBlockEl:null,blurEventIsEnabled:true,enableSuggestAfterPreSearch:true,logNeeded:false,enableFormPost:true,selectedUrl:undefined,noSuggestionClass:"no_suggestion",noSuggestClass:"no_suggest",noResultClass:"no_result",showNoResultOnError:true,suggestionTextClass:"suggestion_text",loadDataSel:".data",
directSearchBlockClass:"search_for",firstMenuItemIndex:0,showSuggestion:true,closeOnEsc:true,isRemoveEnabled:true,events:{"searchFieldKeyPress":"onEnterKeypress","searchFieldKeyUp":"onSearchFieldKeyUp","searchFieldEnterPressed":"onPreSearchBeforeSubmit","searchFieldSubmit":"onPreSearchBeforeSubmit","searchFieldClick":"onShowSuggestionsAgainClick","searchFieldClickSubmit":"onClickOnSubmitButton","searchFieldBlur":"removeSuggestionsOnBlur","searchFieldFocus":"onSearchFieldFocus","onDeleteSearchFieldValue":"onDeleteSearchFieldValue",
"searchFieldMouseOverOnSubmitButton":"disableBlurBeforeAction","searchFieldMouseOutOnSubmitButton":"enableBlurBeforeAction"},isEnterSubmit:true,xdomainNeeded:false,hiddenSearchTextInputId:"search_log",_hiddenSearchTextInputEl:undefined,_actualInputValue:undefined,_lastTargetType:undefined,init:function(config){JSM.plugin.AutoSuggest.superclass.init.call(this,config);this.category=Chaos.Config.get("superCategory");this.noResponseBlock='<ul class="auto_suggest no_result">'+'<li class="'+this.noSuggestionClass+
'">'+'<span class="icon">&nbsp;</span>'+"<span>"+this.host.noResultString+"</span>"+"</li>"+"</ul>";if(Chaos.isDefined(this.loaderBlock))this.loaderBl=this.element.select("."+this.loaderBlock);if(this.createLoader===true)this.createLoaderContainer(this.loaderFor);this.searchFieldEl=this.element;this.relBlockEl=typeof this.relBlockId=="undefined"?Ext.get(this.host.formDomEl):Ext.get(this.relBlockId);this.appendToEl=typeof this.appendToId!="undefined"?Ext.get(this.appendToId):this.relBlockEl;if(this.extendFieldNeeded===
true)this.createExtendField();this.inputFieldEl=this.relBlockEl.select("div").item(0);this.host.addEvents(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_NAME_SELECTION,JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_CLICK_ON_LIST_ELEM,JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SHOW,JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_ESC_PRESS,JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_DELETE_BUTTON_CLICK,JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SEARCH);this.xdomainNeeded=JSM.Util.isSecurePage();this._hiddenSearchTextInputEl=
Ext.get(this.hiddenSearchTextInputId)},getInputValue:function(lowercase){return JSM.Util.escapeHTML(lowercase?JSM.Util.trim(this.element.dom.value).toLowerCase():JSM.Util.trim(this.element.dom.value))},setInputValue:function(value){this.element.dom.value=value},getAutoSuggestBlock:function(){return Ext.get(this.autoSuggestId)},getNoSuggestBlock:function(){var _url=Chaos.getUrl(this.searchUrlRoute,{category:this.category,searchText:this.getInputValue(true)},{},"");return'<ul class="auto_suggest">'+
'<li class="'+this.directSearchBlockClass+'">'+'<span class="'+this.suggestionTextClass+'">'+'<a href="'+_url+'">'+Chaos.translate("Search for")+"<b>"+" "+this.getInputValue(true)+"</b></a>"+"</span>"+"</li>"+"</ul>"},onEnterKeypress:function(ev){if(this.host.isDisabledOnEnter==true&&ev.getCharCode()==13)this.changeFocusToAnotherField(ev)},createExtendField:function(){Ext.DomHelper.insertBefore(this.searchFieldEl,{tag:"div",id:this.extendFieldSel,cls:this.extendFieldSel});this.extendFieldEl=Ext.get(this.extendFieldSel)},
createAutoSuggestList:function(){if(Ext.get(document.activeElement)==this.element&&this.showSuggestion){Ext.DomHelper.append(this.appendToEl,{tag:"div",id:this.autoSuggestId});this.autoSuggestBlockEl=this.getAutoSuggestBlock();this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SHOW,{scope:this,el:this.autoSuggestBlockEl})}},disableBlurBeforeAction:function(){this.blurEventIsEnabled=false},enableBlurBeforeAction:function(){this.blurEventIsEnabled=true},onCheckSearchKeyUp:function(ev){if(this.extendFieldNeeded===
true)if(this.extendFieldEl.dom.innerHTML!="")if(!this.extendFieldEl.dom.innerHTML.match(this.getInputValue(true)))this.extendFieldEl.dom.innerHTML="";if(this.getInputValue(true)=="")this.host.handleLoader(this.host.hideAll);this.setPartialKeyWord(ev.getCharCode())},setPartialKeyWord:function(pressedChar){switch(pressedChar){case 27:case 13:case 37:case 38:case 39:case 40:case 9:break;default:this.partialKeyword=this.getInputValue(true);break}},setCloseOnEsc:function(isEnabled){this.closeOnEsc=isEnabled},
onSuggestKeyUp:function(ev){var extendText,typedText,textFieldValue=this.getInputValue(false);switch(ev.getCharCode()){case 27:if(this.closeOnEsc)this.removeSuggestions();else this.closeOnEsc=true;this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_ESC_PRESS,{scope:this});break;case 13:if(textFieldValue.length<this.minCharLength||this.enableAjax==false&&!Ext.isIE){ev.preventDefault();return false}if(this.changeFieldIdOnEnter!=undefined){this.changeFocusToAnotherField(ev,textFieldValue);this.enableAjax=
false;this.lastSentValue=undefined}break;case 37:if(this.counter==0)this.counter=this.textLength;else this.counter--;break;case 38:if(this.autoSuggestBlockEl&&this.showSuggestion){if(this.stepCounter>0)this.stepCounter=this.stepCounter-1;this.doSteps(this.autoSuggestBlockEl,this.stepCounter)}case 39:if(this.extendFieldEl){if(this.extendFieldEl)extendText=this.getInnerText(this.extendFieldEl.dom.innerHTML);typedText=this.getInputValue(true);if(extendText=="")return false;else if(extendText!=typedText&&
this.textLength<this.counter||this.counter==0){this.setInputValue(extendText);this.counter=0}else this.counter++}break;case 40:if(this.autoSuggestBlockEl&&this.showSuggestion){if(this.stepCounter<this.autoSuggestBlockEl.select(this.listElement).elements.length)this.stepCounter++;this.doSteps(this.autoSuggestBlockEl,this.stepCounter)}break;case 9:if(this.extendFieldEl){ev.preventDefault();if(this.extendFieldEl)extendText=this.getInnerText(this.extendFieldEl.dom.innerHTML);typedText=this.getInputValue(true);
if(extendText!=typedText)if(extendText=="")return false;else this.setInputValue(extendText);if(this.extendFieldEl)this.extendFieldEl.setDisplayed(false)}break;default:if(this.showSuggestion)if(textFieldValue.length>=this.minCharLength){this.enableAjax=true;if(Chaos.isDefined(this.requestTask)){this.requestTask.cancel();this.requestTask=undefined}this.requestTask=new Ext.util.DelayedTask(this.onDelayedAjax,this,[ev]);this.requestTask.delay(this.delaying);if(textFieldValue=="")this.host.handleLoader(this.host.hideAll)}else this.removeSuggestions();
else if(textFieldValue.length>0)this.host.handleLoader(this.host.showReset);this._hiddenSearchTextInputEl.dom.value=this.getInputValue(true);break}},isVisible:function(){var autoSuggestEl=this.getAutoSuggestBlock();return autoSuggestEl!=null&&autoSuggestEl.select("."+this.noSuggestionClass).getCount()==0},validateValue:function(value){if(this.autoSuggestBlockEl){var listItems=this.autoSuggestBlockEl.select(this.listElement).elements,isValid,i=0;while(i<=listItems.length-1)if(value!=this.getTextContentFromAutoSuggestList(Ext.get(listItems[i]))){i++;
isValid=false}else{isValid=true;break}return isValid}},changeFocusToAnotherField:function(ev,selectedItem){ev.preventDefault();if(selectedItem!=undefined)this.setInputValue(selectedItem);this.host.handleLoader(this.host.showReset);this.removeSuggestions();if(this.changeFieldIdOnEnter!=undefined)Ext.get(this.changeFieldIdOnEnter).focus()},onDeleteSearchFieldValue:function(){this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_DELETE_BUTTON_CLICK,{scope:this});this.removeSuggestions()},removeSuggestions:function(){if(this.isRemoveEnabled){if(this.autoSuggestBlockEl){if(this.clickOnListElements==
true)this.autoSuggestBlockEl.select(this.listElement).un("click",this.onClickOnListElements,this);this.autoSuggestBlockEl.remove();this.autoSuggestBlockEl=undefined;this.blurEventIsEnabled=true}if(this.extendFieldEl)this.extendFieldEl.dom.innerHTML="";this.lastSentValue=undefined}},removeSuggestionsOnBlur:function(){if(this.getInputValue(true)=="")this.host.handleLoader(this.host.hideAll);if(this.blurEventIsEnabled)this.removeSuggestions();this.enableAjax=false;if(Chaos.isDefined(this.requestTask)){this.requestTask.cancel();
this.requestTask=undefined}this.lastSentValue=undefined},onClickOnSubmitButton:function(ev){ev.preventDefault();this.element.focus();this.onPreSearchBeforeSubmit(ev)},onPreSearchBeforeSubmit:function(ev){ev.preventDefault();var searchText=this.getInputValue(true),preSearchUrl,link,dataContainer,dataString,autoSuggestBlockEl=this.getAutoSuggestBlock();this.enableAjax=false;if(Chaos.isDefined(this.requestTask)){this.requestTask.cancel();this.requestTask=undefined}this.preSearchInProgress=true;if(searchText!=
""&&this.enableFormPost){Chaos.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_SEARCH,{scope:this,searchText:searchText});this.host.handleLoader(this.host.showLoader);this.lastSearchText=searchText;var params=Ext.Ajax.serializeForm(this.host.formDomEl);if(this.getActiveListElement())link=this.getActiveListElement().child("a");preSearchUrl=Chaos.getUrl("ListPageAjax/PerformerSearch",{},params,"");if(this.xdomainNeeded)preSearchUrl=Chaos.Ajax.setXDomainUrl(preSearchUrl,true,true);Chaos.Ajax.request({method:"GET",
type:"json",scope:this,checkSession:false,fallbackLog:false,url:preSearchUrl,xdomain:this.xdomainNeeded,success:function(data){var resp=data.json;if(resp.success==true&&resp.data.results>0){if(autoSuggestBlockEl)autoSuggestBlockEl.removeClass(this.noSuggestClass);this.submitForm()}else if(resp.data.redirectUrl!=undefined&&typeof resp.data.redirectUrl=="string"&&resp.data.redirectUrl!=""){this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_PRESEARCH_SUCCES,{response:resp,link:link});this.host.handleLoader(this.host.showReset)}else{this.preSearchInProgress=
false;this.host.handleLoader(this.host.showReset);this.enableSuggestAfterPreSearch=false;if(autoSuggestBlockEl!=null)autoSuggestBlockEl.removeClass(this.noSuggestClass);this.showNoResultMessage();if(!this.requestTask)this.enableAjax=true}},error:function(){this.submitForm()},failure:function(){this.submitForm()}})}else if(!this.enableFormPost&&this.isNameSelectionEnabled()){this.enableAjax=true;this.action=JSM.plugin.AutoSuggest.ACTION_SEARCHPICK_NAME;this.keyWord=this.getInputValue(true);this.onSelectedLog();
link=this.getActiveListElement().child("a");dataContainer=Ext.get(link).select(this.loadDataSel).item(0);if(dataContainer)dataString=dataContainer.dom.innerHTML;this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_NAME_SELECTION,{autoSuggest:this,host:this.host,modelName:this.getInputValue(false),link:link,url:this.selectedUrl,data:dataString})}else if(searchText!=""){if(autoSuggestBlockEl)autoSuggestBlockEl.removeClass(this.noSuggestClass);this.showNoResultMessage();this.host.handleLoader(this.host.showReset)}},
getHiddenSearchTextValue:function(){return Ext.fly(this.hiddenSearchTextInputId).dom.value},isNameSelectionEnabled:function(){var autoSuggestEl=this.getAutoSuggestBlock(),selectedItem=autoSuggestEl.select("."+this.listItemHoverClass);if(selectedItem.getCount()){var selectedListItemEl=selectedItem.item(0);var selectedItemEl=this.getTextContentFromAutoSuggestList(selectedListItemEl);if(this.isVisible()&&selectedItem!=null&&this.getInnerText(selectedItemEl)==this.getInputValue(false))return true}return false},
submitForm:function(){this.onChangeSearchFieldBgOnBlur();this.removeSuggestions();this.host.handleLoader(this.host.showLoader);this.host.formDomEl.submit()},onDelayedAjax:function(ev,reload){var value,suggestUrl;if(this.extendFieldEl)this.extendFieldEl.setDisplayed(true);value=this.getInputValue(true);if(value==""||value==null||value==undefined||value.length<this.minCharLength){if(this.autoSuggestBlockEl)this.onDeleteAutoSuggestList();this.enableAjax=false}if(value!=this.lastSentValue||reload)this.lastSentValue=
value;else return false;if((value!=""||value!=null||value!=undefined)&&this.enableAjax==true){this.enableAjax=false;if(Chaos.isDefined(this.relBlockId))this.host.handleLoader(this.host.showLoader);else if(this.element.select(this.loaderFor))this.element.select(this.loaderFor).show();suggestUrl=Chaos.getUrl(this.suggestUrlRoute,{},{category:this.category,searchText:JSM.Util.escapeHTML(value)},"");if(this.xdomainNeeded)suggestUrl=Chaos.Ajax.setXDomainUrl(suggestUrl,true,true);this.ajaxTimeOut=new Ext.util.DelayedTask(function(){this.enableAjax=
true;this.enableFormPost=true;this.removeSuggestions();if(Chaos.isDefined(this.relBlockId))this.host.handleLoader(this.host.showReset);else if(this.element.select(this.loaderFor))this.element.select(this.loaderFor).hide()},this);this.ajaxTimeOut.delay(1E3);Chaos.Ajax.request({type:"json",scope:this,url:suggestUrl,method:"GET",checkSession:false,fallbackLog:false,xdomain:this.xdomainNeeded,success:function(response){if(this.ajaxTimeOut){this.ajaxTimeOut.cancel();this.ajaxTimeOut=undefined}this.setInputValue(this.getInputValue(false));
this.enableAjax=true;this.requestTask=undefined;var content=response.json.data.content;if(content!=""){if(!this.getAutoSuggestBlock())this.createAutoSuggestList();if(this.autoSuggestBlockEl&&this.showSuggestion){this.autoSuggestBlockEl.removeClass(this.noSuggestClass);this.onShowAutoSuggestList(content);this.onReplaceAutoSuggestList(content);var firstTagEl=this.autoSuggestBlockEl.select(this.listElement).item(this.firstMenuItemIndex)}}if(this.getAutoSuggestBlock()&&content==""&&this.enableSuggestAfterPreSearch)this.removeSuggestions();
if(Chaos.isDefined(this.relBlockId))this.host.handleLoader(this.host.showReset);else if(this.element.select(this.loaderFor))this.element.select(this.loaderFor).hide();if(firstTagEl!=null&&content!=""){this.action=JSM.plugin.AutoSuggest.ACTION_SEARCH_KEYWORD;var text=this.getFirstListElementText(firstTagEl);if(this.lastSentValue&&this.lastSentValue.match(/\s$/i))text=this.lastSentValue;this.textLength=text.length;if(this.extendFieldEl){var value=this.getInputValue(true);if(!text.match(value)||value.length>
this.maxCharLength)this.extendFieldEl.dom.innerHTML="";else this.extendFieldEl.dom.innerHTML=text}}else{if(this.extendFieldEl)this.extendFieldEl.dom.innerHTML="";this.noResultTextLength=this.lastSentValue!=undefined?this.lastSentValue.length:null;this.enableAjax=false;this.action=JSM.plugin.AutoSuggest.ACTION_SEARCH_NORESULT;this.showNoResultMessage()}},error:function(response){if(this.showNoResultOnError)this.showNoResultMessage();else if(response.json.error==JSM.plugin.AutoSuggest.ERROR_SEARCH_NORESULT){if(!this.getAutoSuggestBlock()&&
this.showSuggestion)this.createAutoSuggestList();this.getAutoSuggestBlock().addClass(this.noSuggestClass);this.onShowAutoSuggestList(this.getNoSuggestBlock())}else this.removeSuggestions();this.ajaxTimeOut.cancel();if(Chaos.isDefined(this.relBlockId))this.host.handleLoader(this.host.showReset);else if(this.element.select(this.loaderFor))this.element.select(this.loaderFor).hide();this.requestTask=undefined}})}},onShowAutoSuggestList:function(responseText){if(this.autoSuggestBlockEl){if(this.hideAutoSuggestList)this.autoSuggestBlockEl.setStyle({visibility:"hidden"});
else this.autoSuggestBlockEl.setStyle({visibility:"visible"});this.enableFormPost=true;this.autoSuggestBlockEl.dom.innerHTML=responseText;if(this.clickOnListElements==true)this.autoSuggestBlockEl.select(this.listElement).on("click",this.onClickOnListElements,this);this.stepCounter=0;this.registerCounter=1;this.autoSuggestBlockEl.select(this.listElement).each(this.countAllItems,this);if(this.autoSuggestBlockEl){this.autoSuggestBlockEl.select("ul").on("mouseover",this.onHoverListItemMouseOver,this);
this.autoSuggestBlockEl.select("ul").on("mouseout",this.onRemoveStlyeMouseOut,this)}}},onSearchFieldFocus:function(){if(this.getInputValue(true)==this.host.noResultString.toLowerCase())this.setInputValue(this._actualInputValue)},onDeleteAutoSuggestList:function(){this.removeSuggestions();this.stepCounter=0;this.registerCounter=1;this.counter=0;this.noResultText=false;this.notFoundTextArray=new Array;if(this.getInputValue(true)!=""&&!this.preSearchInProgress&&this.changeFieldIdOnEnter==undefined)this.host.handleLoader(this.host.showReset);
else if(!this.preSearchInProgress){this.host.handleLoader(this.host.hideAll);this.lastSentValue=undefined}},getInnerText:function(el){return el.replace(/(?:^\s+$|\s+$|&nbsp;)/i,"").replace(/^\s+/i," ").replace(/(<([^>]+)>)/ig,"").replace(/(^[\s]+|[\s]+$)/g,"")},getActiveListElement:function(){if(this.isVisible())return this.getAutoSuggestBlock().select("."+this.listItemHoverClass).item(0)},onClickOnListElements:function(ev,target){var link,dataContainer,dataString,targetEl=Ext.get(target),targetParentEl=
targetEl.parent("a"),modelAnchorEl=targetParentEl==null?Ext.get(target):targetParentEl,suggestionText=modelAnchorEl.select("."+this.suggestionTextClass).item(0)||modelAnchorEl;suggestionText=this.getTextContentFromAutoSuggestList(suggestionText);var isNewTabAction=JSM.Util.getMouseButton(ev)===JSM.plugin.AutoSuggest.MIDDLE_MOUSE_BUTTON_CLICKED||ev.ctrlKey;var selectedItemContent=this.getInnerText(Ext.isIE?modelAnchorEl.dom.innerText:modelAnchorEl.dom.textContent);this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_CLICK_ON_LIST_ELEM,
suggestionText);if(this.changeFieldIdOnEnter!=undefined)if(!this.hasNoResultClass(targetEl)){ev.preventDefault(ev);this.changeFocusToAnotherField(ev,suggestionText)}else{this.element.focus();return}else{var targetType=Ext.fly(ev.target).findParent(this.listElement).className.split(" ")[0];var inputValue=this.getInputValue(true);this.action=JSM.plugin.AutoSuggest.ACTION_SEARCHPICK_NAME;link=this.getActiveListElement().child("a");dataContainer=Ext.get(link).select(this.loadDataSel).item(0);if(dataContainer)dataString=
dataContainer.dom.innerHTML;switch(targetType){case JSM.plugin.AutoSuggest.LIST_TYPE_DIRECT_SEARCH:this.setInputValue(suggestionText);if(this.lastSentValue!=inputValue||this._lastTargetType!=targetType){this._lastTargetType=targetType;if(!isNewTabAction)this.onPreSearchBeforeSubmit(ev);this.lastSentValue=inputValue}break;case JSM.plugin.AutoSuggest.LIST_TYPE_NAME:this._lastTargetType=targetType;if(!(Ext.isIE7||Ext.isIE8)){if(!isNewTabAction){ev.preventDefault();this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_NAME_SELECTION,
{autoSuggest:this,host:this.host,modelName:suggestionText,link:link,data:dataString})}}else{ev.preventDefault();this.host.fireEvent(JSM.plugin.AutoSuggest.EVENT_AUTOSUGGEST_NAME_SELECTION,{autoSuggest:this,host:this.host,modelName:suggestionText,link:link,data:dataString})}break;case JSM.plugin.AutoSuggest.LIST_TYPE_TAG:this.setInputValue(selectedItemContent);if(this.lastSentValue!=inputValue||this._lastTargetType!=targetType){this._lastTargetType=targetType;if(!isNewTabAction)this.onPreSearchBeforeSubmit(ev);
this.lastSentValue=inputValue}break;default:this._lastTargetType=targetType;if(!this.hasNoResultClass(targetEl)){this.setInputValue(selectedItemContent);this.submitForm()}else{this.element.focus();return}this.onDeleteAutoSuggestList();break}}},showNoResultMessage:function(){if(!this.showSuggestion&&this.hideAutoSuggestList){this._actualInputValue=this.getInputValue(true);this.setInputValue(this.host.noResultString);this.element.blur()}else{if(this.autoSuggestBlockEl)this.onShowAutoSuggestList(this.noResponseBlock);
else{this.createAutoSuggestList();this.onShowAutoSuggestList(this.noResponseBlock)}this.blurEventIsEnabled=true;this.element.focus()}},getFirstListElementText:function(firstTagEl){var firstEl=firstTagEl.select("."+this.suggestionTextClass).item(0);var firstTagText=firstEl!=null?firstEl.dom.innerHTML.toLowerCase():firstTagEl.child("a").dom.innerHTML;return this.noResultText==true?firstTagEl.dom.title:firstTagText},onReplaceAutoSuggestList:function(responseText){var searchFieldValue,stringArray,lastString,
listLinkEl,listText,listTextArray,listString,string,self=this;if(responseText==""){searchFieldValue=this.getInputValue(true);stringArray=searchFieldValue.split(" ");lastString=stringArray[stringArray.length-1];if(lastString!="")this.notFoundTextArray.push(lastString);this.noResultText=true}if(this.autoSuggestBlockEl)this.autoSuggestBlockEl.select(this.listElement).each(function(){listLinkEl=this.select("a").item(0);if(listLinkEl!=null){listText=listLinkEl.dom.innerHTML;listTextArray=listText.split(" ");
for(var i=0;i<=self.notFoundTextArray.length-1;i++){string=self.notFoundTextArray[i];for(var x=0;x<=listTextArray.length-1;x++){listString=listTextArray[x];if(string==listString){listText=listText.replace(string,"");listLinkEl.dom.innerHTML=listText}}}}})},countAllItems:function(el){el.addClass(this.registerCounter);this.registerCounter++},onHoverListItemMouseOver:function(ev){this.blurEventIsEnabled=false;this.autoSuggestBlockEl.select(this.listElement).removeClass(this.listItemHoverClass);var target=
Ext.get(ev.target),targetEl=target.dom.tagName==this.listElement?target:Ext.get(target.findParent(this.listElement));if(targetEl!=null&&targetEl.select("a").elements.length!=0){if(this.logNeeded){this.keyWord=targetEl.select("a").item(0).dom.title;this.action=JSM.plugin.AutoSuggest.ACTION_SEARCHPICK;Ext.fly(targetEl).on("click",this.onSelectedLog,this)}targetEl.addClass(this.listItemHoverClass);this.stepCounter=targetEl.dom.className.split(" ")[1]}},onSelectedLog:function(){if(JSM.Util.isSecurePage())this.onAjaxSendLogText(this.action,
this.partialKeyword,this.keyWord)},onAjaxSendLogText:function(action,searchValue,selectedValue){var postSearchLogUrl=Chaos.getUrl(this.logUrlRoute,{},{},"");this.host.fireEvent("chaos-log",postSearchLogUrl,{action:action,partialKeyword:searchValue,keyword:selectedValue})},onRemoveStlyeMouseOut:function(ev){this.blurEventIsEnabled=true;this.autoSuggestBlockEl.select(this.listElement).removeClass(this.listItemHoverClass);var target=Ext.get(ev.target),targetEl=target.dom.tagName==this.listElement?Ext.get(target):
Ext.get(target.findParent(this.listElement));if(targetEl!=null){targetEl.removeClass(this.listItemHoverClass);if(this.logNeeded)targetEl.un("click",this.onSelectedLog,this)}},onHandleSuggestion:function(ev){this.enableSuggestAfterPreSearch=true;var button=ev.getCharCode();if(this.autoSuggestBlockEl!=null){var firstLiTagEl=this.autoSuggestBlockEl.select(this.listElement).item(0);if(firstLiTagEl.hasClass(this.noSuggestionClass))this.host.handleLoader(this.host.showReset)}if(this.autoSuggestBlockEl&&
(ev.target!=this.element.dom||button==27))if(firstLiTagEl!=undefined&&!firstLiTagEl.hasClass(this.noSuggestionClass))this.onDeleteAutoSuggestList()},onShowSuggestionsAgainClick:function(ev){if(this.showSuggestion){if(this.enableAjax==false)this.enableAjax=true;if(!this.host.loaderEl.hasClass(this.loaderClass)&&this.getInputValue(true)!=""&&this.getInputValue(true)!=this.lastSentValue&&!this.getAutoSuggestBlock()&&this.getInputValue(true).length>=this.minCharLength)this.host.handleLoader(this.host.showLoader);
if(this.extendFieldEl)this.extendFieldEl.setDisplayed(true);this.relBlockEl.select("."+this.loaderSel).addClass("focus");this.searchFieldEl.focus();if(this.getInputValue(true)&&this.lastSentValue!=this.getInputValue(true)&&!this.getAutoSuggestBlock()&&this.getInputValue(true).length>=this.minCharLength){this.onDelayedAjax(ev,true);this.lastSentValue=this.getInputValue(true)}}},doSteps:function(block,count){if(count==0)block.select(this.listElement).removeClass(this.listItemHoverClass);else{block.select(this.listElement).removeClass(this.listItemHoverClass);
var activeBlock=block.select(this.listElement+":nth-child("+count+")"),firstLiTagEl;activeBlock.addClass(this.listItemHoverClass);if(activeBlock.item(0).dom.className.match("name")){this.enableFormPost=false;this.selectedUrl=activeBlock.item(0).select("a").item(0).dom.href}else this.enableFormPost=true;firstLiTagEl=block.select(this.listElement).item(0);if(!firstLiTagEl.hasClass(this.noSuggestionClass)){var _value=this.getTextContentFromAutoSuggestList(Ext.get(activeBlock).item(0).select("."+this.suggestionTextClass).item(0)||
Ext.get(activeBlock).item(0));this.setInputValue(_value);if(this.extendFieldEl){this.extendFieldEl.dom.innerHTML=this.getInputValue(true);this.extendFieldEl.setDisplayed(false)}}}},getTextContentFromAutoSuggestList:function(elem){var _listElem=elem.findParent(this.listElement);if(_listElem)if(Ext.fly(_listElem).hasClass(this.directSearchBlockClass))return this.getInnerText(elem.select("b").item(0).dom.innerHTML);var el=elem.select("."+this.suggestionTextClass).item(0)||elem;return this.getInnerText(Ext.isIE?
el.dom.innerText:el.dom.textContent)},onPreventErrorsKeyDown:function(ev){if(ev.getCharCode()==38)ev.preventDefault()},onChangeSearchFieldBgOnBlur:function(){if(this.host.loaderEl.hasClass(this.loaderClass))this.host.handleLoader(this.host.showReset);if(this.extendFieldEl)this.extendFieldEl.setDisplayed(false)},hasNoResultClass:function(target){return Ext.get(target.findParent("ul")).hasClass(this.noResultClass)},onSearchFieldKeyUp:function(ev){this.onCheckSearchKeyUp(ev);this.onSuggestKeyUp(ev)}});
Chaos.registerPlugin(JSM.plugin.AutoSuggest);Ext.namespace("JSM.plugin");JSM.plugin.BackConn=function(el,config){JSM.plugin.BackConn.superclass.constructor.call(this,el,config)};JSM.plugin.BackConn.EVENT_REQUEST_COMPLETE="backconn-request-complete";JSM.plugin.BackConn.EVENT_BACKCONN_READY="backconn-ready";
Chaos.extend(JSM.plugin.BackConn,Chaos.Plugin,{name:"BackConn-plugin",backConnFlashId:"flash_backconn",backConnFlash:undefined,nodeMetaId:"node",events:{},globalObjectId:undefined,_isBackConnReady:false,_isFlashEnabled:true,_getConnectionParamsRequest:undefined,init:function(host){JSM.plugin.BackConn.superclass.init.call(this,host);this._isFlashEnabled=Ext.isIE?JSM.util.Flash.checkFlashVersion():JSM.util.Flash.checkFlashVersion()!=="0,0,0";this.host.addEvents(JSM.plugin.BackConn.EVENT_REQUEST_COMPLETE,
JSM.plugin.BackConn.EVENT_BACKCONN_READY);this.set();if(typeof this.globalMethods!="undefined"&&this.globalMethods.length>0)JSM.Util.setGlobalMethods(this.globalObjectId,this.globalMethods,this.host);if(typeof this.host.backConnPlugin=="undefined")this.host.backConnPlugin=this;else;},isValidMethod:function(method){return(typeof this[method]!="undefined"||typeof this.host[method]!="undefined")&&typeof window[this.globalObjectId][method]=="undefined"},_onBackConnReady:function(){if(this._isBackConnReady===
false){this._isBackConnReady=true;if(this._getConnectionParamsRequest){var _args=this._getConnectionParamsRequest;this.getConnectionParams.apply(this,this._getConnectionParamsRequest);delete this._getConnectionParamsRequest;try{throw new JSM.exception("Re-called bc.getCnnPrms after ready.",this.name,Ext.apply(new Error,{getConnectionParams:_args}),JSM.component.ErrorLogHelper_LEVEL_NOTICE);}catch(exception){}}this.host.fireEvent(JSM.plugin.BackConn.EVENT_BACKCONN_READY,this,this.host)}},set:function(){this.backConnFlash=
Chaos.getFlashMovieObject(this.backConnFlashId)},isReady:function(){return this._isBackConnReady},closeConnection:function(){if(typeof this.backConnFlash.closeConnection)this.backConnFlash.closeConnection()},getConnectionParams:function(name,node,callback){if(this._isFlashEnabled){var nodeType=node?node:Chaos.getMeta(this.nodeMetaId),callbackFn;if(!this._validateParams(name,node)){throw"Invalid parameters sent for getting connection params";return}if(this.isFlashMethod("getConnectionParams"))if(typeof callback==
"string"&&typeof window[this.globalObjectId][callback]=="function"){callbackFn=this.globalObjectId+"."+callback;this.backConnFlash.getConnectionParams(name,nodeType,callbackFn)}else if(typeof callback!="string");else;else if(!this.isBackConnReady())this._getConnectionParamsRequest=arguments;else throw this.name+": getConnectionParams is not a function or unavailable.";}},getSoParams:function(flashsize,callback){if(this.isFlashMethod("getSoParams")){if(typeof window[this.globalObjectId][callback]==
"undefined");this.backConnFlash.getSoParams(flashsize,callback)}},setSoParams:function(name,param){if(this.isFlashMethod("setSoParams"))this.backConnFlash.setSoParams(name,param)},requestComplete:function(response){this.host.fireEvent(JSM.plugin.BackConn.EVENT_REQUEST_COMPLETE,response)},setRequestTimeOut:function(){},xdomainRequest:function(){},xdomainResponse:function(){},isFlashMethod:function(name){return typeof this.backConnFlash[name]=="function"},_validateParams:function(){var param;for(param in arguments)if(typeof arguments[param]==
"undefined"||typeof arguments[param]!="string"||JSM.Util.trim(arguments[param])=="")return false;return true},isBackConnReady:function(){return this._isBackConnReady},bind:function(){JSM.plugin.BackConn.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,this._onBackConnReady,this)},unbind:function(){JSM.plugin.BackConn.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,this._onBackConnReady,this)}});Chaos.registerPlugin(JSM.plugin.BackConn);
Ext.namespace("JSM.plugin");JSM.plugin.Captcha=function(config){JSM.plugin.Captcha.superclass.constructor.call(this,config)};
Chaos.extend(JSM.plugin.Captcha,Chaos.Plugin,{name:"Captcha",events:{"init":"onFormInit","submitError":"onSubmitError"},init:function(host){JSM.plugin.Captcha.superclass.init.call(this,host)},onFormInit:function(){this.captcha=new Chaos.Captcha(this.originalConfig.captchaImg,this.originalConfig);this.captchaContainer=Ext.get(this.originalConfig.containerId);Chaos.Ajax.registerCommand("showCaptcha",this.onShowCaptchaCallback,this)},onShowCaptchaCallback:function(){this.captchaContainer.show(0.3)},
onSubmitError:function(form,response,options){if(typeof response.json.data!="undefined"&&typeof response.json.data.captchaId!="undefined")this.refreshCaptcha(response);else;},refreshCaptcha:function(response){var captchaId=response.json.data.captchaId;var captchaImageUrl=response.json.data.captchaImageUrl;Ext.fly(this.originalConfig.captchaId).dom.value=captchaId;Ext.fly(this.originalConfig.captchaImg).dom.src=captchaImageUrl}});Chaos.registerPlugin(JSM.plugin.Captcha);Ext.namespace("JSM.plugin");
JSM.plugin.Favorites=function(config){JSM.plugin.Favorites.superclass.constructor.call(this,config)};JSM.plugin.Favorites.BUTTON_CLICK="click";JSM.plugin.Favorites.STATUS_OK="ok";JSM.plugin.Favorites.STATUS_LOGIN_ERROR="error_login";JSM.plugin.Favorites.STATUS_UNKNOWN_ERROR="error_unknown";JSM.plugin.Favorites.STATUS_FULL_LIST="full_list";JSM.plugin.Favorites.EVENT_FAVORITE_BUTTON_UPDATE="favorite-button-update";JSM.plugin.Favorites.EVENT_CHANGE_TO_ONLINE="favorite-change-to-online";
Chaos.extend(JSM.plugin.Favorites,Chaos.Plugin,{name:"Favorites-plugin",favoriteButtonCls:".add_favorite",myFavoriteCls:"myfavorite",containerSel:"container_",showTooltipDuration:0.3,delayedHidingForTooltip:1500,perfBoxPrefix:"performer_",statusSel:".status",addFavoritesRoute:"Favourite/AddFavourite",deleteFavoritesRoute:"Favourite/DeleteFavourite",awardsCarouselContainerId:"awards_carousel_container",carouselFavoriteBtnId:"carousel_favorites",performerBoxSel:".performerBox",activeSlideSel:"li.active",
perfPrefix:".perf_",_favoritesList:undefined,init:function(config){JSM.plugin.Favorites.superclass.init.call(this,config);this.host.addEvents(JSM.plugin.Favorites.EVENT_FAVORITE_BUTTON_UPDATE,JSM.plugin.Favorites.EVENT_CHANGE_TO_ONLINE,JSM.plugin.Favorites.EVENT_FAVORITE_CAROUSEL_CLICK);this._favoritesList={}},updateFavoriteFromFlash:function(modelId){var modelBox=Ext.get(this.containerSel+modelId);if(modelBox){var currentFavButtonEl=Ext.get(this.containerSel+modelId).select(this.favoriteButtonCls).item(0),
command=currentFavButtonEl.hasClass(this.myFavoriteCls)===true?"remove":"add";this.updateFavoriteButton(currentFavButtonEl,command);if(Ext.get(this.awardsCarouselContainerId))this.updateCarouselFavorite(command,modelId)}},bindItems:function(items){for(var i=0;i<items.length;i++)Ext.fly(items[i]).select(this.favoriteButtonCls).item(0).on("click",this.onUpdateFavoriteClick,this)},onUpdateFavoriteClick:function(ev,target){ev.stopEvent();var command=this.isFavorite(target)==true?"remove":"add";this.updateFavorite(command,
this.getModelId(target),Ext.get(target))},onUpdateCarouselFavoriteClick:function(ev,target){ev.stopEvent();var target=Ext.get(target);if(target.findParent("div").id===this.awardsCarouselContainerId){var activeSlide=Ext.get(this.awardsCarouselContainerId).select(this.activeSlideSel).item(0);var performerId=activeSlide.select(this.performerBoxSel).item(0).dom.dataset.performerId}else var performerId=this.getModelId(target);var command=this.isFavorite(target)==true?"remove":"add";this.updateFavorite(command,
performerId,target)},updateCarouselFavorite:function(command,performerId){var performerSlide=Ext.get(this.awardsCarouselContainerId).select(this.perfPrefix+performerId).item(0);var carouselFavBtn=Ext.get(this.carouselFavoriteBtnId).select(this.favoriteButtonCls).item(0);if(performerSlide){var perfSlideFavBtn=performerSlide.select(this.favoriteButtonCls).item(0);var activeSlide=Ext.get(this.awardsCarouselContainerId).select(this.activeSlideSel).item(0);var activeSliderPerfId=activeSlide.select(this.performerBoxSel).item(0).dom.dataset.performerId}switch(command){case "add":if(performerSlide)perfSlideFavBtn.addClass(this.myFavoriteCls);
if(performerId==activeSliderPerfId)carouselFavBtn.addClass(this.myFavoriteCls);break;case "remove":if(performerSlide)perfSlideFavBtn.removeClass(this.myFavoriteCls);if(performerId==activeSliderPerfId)carouselFavBtn.removeClass(this.myFavoriteCls);break}},isFavorite:function(el){var favButton=Ext.fly(el);return favButton.hasClass(this.myFavoriteCls)},getModelId:function(target){return Ext.fly(target).parent("a").id.split("_")[1]},updateFavorite:function(command,id,buttonEl){var updateUrl=command==
"add"?Chaos.getUrl(this.addFavoritesRoute,{},{performerId:id},""):Chaos.getUrl(this.deleteFavoritesRoute,{},{performerId:id},""),toolTipMessage,toolTipPosition=buttonEl.parent().getXY();Chaos.Ajax.request({url:updateUrl,method:"POST",scope:this,success:function(data){switch(Ext.decode(data.responseText).status){case JSM.plugin.Favorites.STATUS_OK:toolTipMessage=command=="add"?Chaos.translate("Added to favorites"):Chaos.translate("Removed from favorites");this.updateFavoriteButton(buttonEl,command);
if(Ext.fly(this.perfBoxPrefix+id)!=null){var listPageFavoriteBtn=Ext.fly(this.perfBoxPrefix+id).select(this.favoriteButtonCls).item(0);this.updateFavoriteButton(listPageFavoriteBtn,command)}if(Ext.get(this.awardsCarouselContainerId))this.updateCarouselFavorite(command,id);this.host.fireEvent(JSM.plugin.Favorites.EVENT_FAVORITE_BUTTON_UPDATE,{scope:this,id:id,buttonEl:buttonEl,listPageButtonEl:listPageFavoriteBtn,command:command});break;case JSM.plugin.Favorites.STATUS_LOGIN_ERROR:toolTipMessage=Chaos.translate("Only for Members");
break;case JSM.plugin.Favorites.STATUS_UNKNOWN_ERROR:toolTipMessage=Chaos.translate("There was an error");break;case JSM.plugin.Favorites.STATUS_FULL_LIST:toolTipMessage=Chaos.translate("No more free slots");break}if(/carousel/.test(buttonEl.findParent("div").id)){var carouselFavoriteTooltipPosition=[toolTipPosition[0]-23,toolTipPosition[1]+30,"remove"];this.showTooltip(toolTipMessage,carouselFavoriteTooltipPosition)}else this.showTooltip(toolTipMessage,toolTipPosition)},error:function(){},failure:function(){}})},
refreshFavoritesListOnFavoriteButtonUpdate:function(ev){if(ev.command=="add")this.updateFavoritesList([{id:ev.id,status:ev.buttonEl.parent("a").select(this.statusSel).getCount()?0:1,pid:ev.buttonEl.parent("a").dom.href.split("/chat/")[1]}]);else this.updateFavoritesList([{id:ev.id}],true)},updateFavoriteButton:function(buttonEl,command){var modelLink=buttonEl.parent("a");if(command=="add"){buttonEl.addClass(this.myFavoriteCls);if(typeof this.host.removedFavorites=="object"&&this.host.removedFavorites[modelLink.id])delete this.host.removedFavorites[modelLink.id]}else{buttonEl.removeClass(this.myFavoriteCls);
if(typeof this.host.removedFavorites=="object"&&!this.host.removedFavorites[modelLink.id])this.host.removedFavorites[modelLink.id]=modelLink}},showTooltip:function(message,tooltipPosition){var topPos,leftPos;if(this.favTooltip instanceof JSM.window.Tooltip){if(this.favTooltip.element.dom)this.favTooltip.element.stopFx();delete this.favTooltip}this.favTooltip=new JSM.window.Tooltip("tooltip_container",{bodyTag:"<div class='tooltip_favorite'><span>{text}</span></div>",el:{id:"tooltip_container"},mustRender:true,
autoDestroy:true,autoDestroyElement:true});this.favTooltip.setData("body",{text:message}).show(this.showTooltipDuration);if(Ext.isIE7){topPos=5;leftPos=26}else{topPos=5;leftPos=28}this.favTooltip.setPosition(tooltipPosition[0]+leftPos,tooltipPosition[1]+topPos,Ext.getBody());this.hideFavoriteTooltipTask=new Ext.util.DelayedTask(this.hideTooltip,this);this.hideFavoriteTooltipTask.delay(this.delayedHidingForTooltip)},hideTooltip:function(duration){if(this.hideFavoriteTooltipTask!=undefined&&this.favTooltip){this.favTooltip.hide(duration||
this.hideTooltipDuration);this.hideFavoriteTooltipTask.cancel();this.hideFavoriteTooltipTask=undefined}},updateFavoritesList:function(list,remove){var item,currentItem;for(item in list){currentItem=list[item];if(currentItem&&list.hasOwnProperty(item))if(!this._favoritesList[currentItem.id])this._favoritesList[currentItem.id]={status:currentItem.status,pid:currentItem.pid,displayed:false};else if(this._favoritesList[currentItem.id]&&remove)delete this._favoritesList[currentItem.id]}},statusChange:function(ev,
shown){for(var i in ev.statuses)if(this._favoritesList[i]&&ev.statuses[i]==1&&this._favoritesList[i].status!=1&&!this._favoritesList[i].displayed){if(!shown){this.host.fireEvent(JSM.plugin.Favorites.EVENT_CHANGE_TO_ONLINE,this._favoritesList[i]);console.log("%c%s is online now!","color:white; background-color:green; padding: 2px",this._favoritesList[i].pid)}else console.log("%c%s is online now!","color:white; background-color:orange; padding: 2px",this._favoritesList[i].pid);this._favoritesList[i].status=
ev.statuses[i];this._favoritesList[i].displayed=true}},bind:function(){JSM.plugin.Favorites.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.layout.Basic.GLOBALEVENT_CLICK_FAVORITE_BUTTON_IN_APPLET,this.updateFavoriteFromFlash,this)},unbind:function(){JSM.plugin.Favorites.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.layout.Basic.GLOBALEVENT_CLICK_FAVORITE_BUTTON_IN_APPLET,this.updateFavoriteFromFlash,this)}});Chaos.registerPlugin(JSM.plugin.Favorites);Ext.namespace("JSM.plugin");
JSM.plugin.FormDecorator=function(config){JSM.plugin.FormDecorator.superclass.constructor.call(this,config)};
Chaos.extend(JSM.plugin.FormDecorator,Chaos.Plugin,{name:"FormDecorator",activeClass:"active",radio:{aClass:"radio_replacement",inputClass:"radio",selector:"a.radio_replacement",decorator:"span"},checkbox:{aClass:"checkbox_replacement",inputClass:"checkbox",selector:"a.checkbox_replacement",decorator:"span"},select:{aClass:"",inputClass:"select",selector:"select"},events:{"init":"onInit"},init:function(config){this.checkboxes=this.host.element.select(this.checkbox.selector);this.radios=this.host.element.select(this.radio.selector);
this.selects=this.host.element.select(this.select.selector);JSM.plugin.FormDecorator.superclass.init.call(this,config)},onInit:function(){},onCheckboxClick:function(ev,target,options){ev.preventDefault();var targetEl=Ext.get(target),parent=targetEl.parent(this.checkbox.selector);var targetEl=targetEl.is(this.checkbox.selector)?targetEl:parent;if(targetEl){var inputEl=targetEl.child("input");if(inputEl.dom.checked==true){inputEl.dom.checked=false;inputEl.dom.value=0;targetEl.removeClass(this.activeClass)}else{inputEl.dom.checked=
true;inputEl.dom.value=1;targetEl.addClass(this.activeClass)}}else throw new Error("checkbox target not found");},onRadioClick:function(ev,target,options){ev.preventDefault();var targetEl=Ext.get(target),parent=targetEl.parent(this.radio.selector);var targetEl=targetEl.is(this.radio.selector)?targetEl:parent;if(targetEl){var inputEl=targetEl.child("input");var name=inputEl.dom.name;if(name==null||name==undefined||name=="")throw new Error("name not defined");this.host.element.select("input[name="+
name+"]").each(function(el){var itemEl=Ext.get(el.dom);var itemParent=itemEl.parent(this.radio.selector);itemEl.dom.checked=null;if(itemParent)itemParent.removeClass(this.activeClass)},this);targetEl.addClass(this.activeClass);this.host.element[name]=inputEl.dom.value;inputEl.dom.checked=true}else throw new Error("radio target not found");},bind:function(){this.checkboxes.on("click",this.onCheckboxClick,this);this.radios.on("click",this.onRadioClick,this);JSM.plugin.FormDecorator.superclass.bind.call()},
unbind:function(){this.checkboxes.un("click",this.onCheckboxClick,this);this.radios.un("click",this.onRadioClick,this);JSM.plugin.FormDecorator.superclass.unbind.call()}});Chaos.registerPlugin(JSM.plugin.FormDecorator);Ext.namespace("JSM.plugin");JSM.plugin.HeaderMenu=function(el,config){JSM.plugin.HeaderMenu.superclass.constructor.call(this,el,config)};JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES="header-dropdown-states";
Chaos.extend(JSM.plugin.HeaderMenu,Chaos.Plugin,{name:"HeaderMenu-plugin",_headerDropDownState:undefined,init:function(host){JSM.plugin.HeaderMenu.superclass.init.call(this,host);this._headerDropDownState={};Chaos.addEvents(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES)},addDropDownStates:function(states){for(var i=0;i<states.length;i++)this._headerDropDownState[states[i]]="closed"},refreshDropDownStates:function(state,forcedState){for(var i in this._headerDropDownState)if(this._headerDropDownState.hasOwnProperty(i))if(state&&
i==state)if(forcedState)this._headerDropDownState[i]=forcedState;else this._headerDropDownState[i]=this._headerDropDownState[i]=="closed"?"opened":"closed";else this._headerDropDownState[i]="closed";Chaos.fireEvent(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES,this._headerDropDownState)},bind:function(){JSM.plugin.HeaderMenu.superclass.bind.call(this)},unbind:function(){JSM.plugin.HeaderMenu.superclass.unbind.call(this)}});Chaos.registerPlugin(JSM.plugin.HeaderMenu);Ext.namespace("JSM.plugin");
JSM.plugin.ImageChecker=function(el,config){JSM.plugin.ImageChecker.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.plugin.ImageChecker,Chaos.Plugin,{name:"ImageChecker-plugin",imageBoxSel:".small, .big",smallImageBoxClass:"small",bigImageBoxClass:"big",init:function(host){JSM.plugin.ImageChecker.superclass.init.call(this,host)},checkImageDownload:function(pageId){var boxes,self=this;try{boxes=Ext.get(pageId).select(this.imageBoxSel)}catch(exception){throw"Collecting images failed: "+exception;}boxes.each(function(el,elements,index){var img=elements.item(index).select("img"),imgObj=new Image;if(img.item(0)){img=
img.item(0);imgObj.src=img.dom.src;if(img.dom.complete)imgObj.width<=2||img.dom.naturalWidth<=2?self.setBoxBackground(elements.item(index)):self.setBoxBackground(elements.item(index),img.dom.src);else img.dom.onload=function(){imgObj.width<=2||this.naturalWidth<=2?self.setBoxBackground(elements.item(index)):self.setBoxBackground(elements.item(index),this.src)}}})},setBoxBackground:function(box,src){if(src)box.setStyle("background-image","url("+src+")");else if(box.hasClass(this.smallImageBoxClass))box.setStyle("background-image",
"url("+Chaos.Config.get("newPerformerImageSmall")+")");else box.setStyle("background-image","url("+Chaos.Config.get("newPerformerImageBig")+")")},bind:function(){JSM.plugin.ImageChecker.superclass.bind.call(this)},unbind:function(){JSM.plugin.ImageChecker.superclass.unbind.call(this)}});Chaos.registerPlugin(JSM.plugin.ImageChecker);Ext.namespace("JSM.plugin.InputHint");JSM.plugin.InputHint=function(config){JSM.plugin.InputHint.superclass.constructor.call(this,config)};
Chaos.extend(JSM.plugin.InputHint,Chaos.Plugin,{name:"InputHint",events:{inputFocus:"onInputFocus",inputBlur:"onInputBlur",init:"onFormInit",reset:"onFormReset"},inputHintTemplate:'<span id="hint_{hint_id}" class="input_hint">{hint_text}</span>',hintPrefix:"hint_",inputHintSel:".input_hint",init:function(config){JSM.plugin.InputHint.superclass.init.call(this,config)},onHintClick:function(ev,target){Ext.get(target.id).setStyle("display","none");var inputId=target.id.split(this.hintPrefix)[1];Ext.get(inputId).focus()},
onInputFocus:function(ev,target){var fieldData=this.host.getFieldData(target.id);if(typeof fieldData!="undefined"&&typeof fieldData.emptyText!="undefined")this.hideEmptyText(target.id)},onInputBlur:function(ev,target){if(Ext.get(target.id).dom.value=="")this.showEmptyText(target.id)},onFormInit:function(){var fieldName;for(fieldName in this.host.fields){var fieldData=this.host.fields[fieldName];var fieldEl=Ext.get(fieldName);if(typeof fieldData.emptyText!="undefined")this.createEmptyText(fieldEl,
fieldData.emptyText)}},onFormReset:function(){this.onFormInit();for(var fieldName in this.host.fields)this.showEmptyText(fieldName)},createEmptyText:function(field,text){var fieldTextEl=this.getHint(field.dom.id,text)},showEmptyText:function(field){Ext.get(this.hintPrefix+field).setStyle("display","block")},hideEmptyText:function(field){Ext.get(this.hintPrefix+field).setStyle("display","none")},getHint:function(id,text){if(Ext.get(this.hintPrefix+id)==null){this.inputHintTpl=new Ext.Template(this.inputHintTemplate);
this.inputHintTpl.insertAfter(id,{hint_id:id,hint_text:text})}if(Ext.get(id).dom.value!="")this.hideEmptyText(id);return Ext.get(this.hintPrefix+id)},bind:function(){JSM.plugin.InputHint.superclass.bind.call(this);this.element.on("click",this.onHintClick,this,{delegate:this.inputHintSel})},unbind:function(){JSM.plugin.InputHint.superclass.unbind.call(this);this.element.un("click",this.onHintClick,this,{delegate:this.inputHintSel})}});Chaos.registerPlugin(JSM.plugin.InputHint);Ext.namespace("JSM.plugin");
JSM.plugin.LabelError=function(config){JSM.plugin.LabelError.superclass.constructor.call(this,config)};Chaos.extend(JSM.plugin.LabelError,Chaos.Plugin,{name:"Captcha",events:{},init:function(host){JSM.plugin.LabelError.superclass.init.call(this,host)},bind:function(){JSM.plugin.LabelError.superclass.bind.call(this)},unbind:function(){JSM.plugin.LabelError.superclass.bind.call(this)}});Ext.namespace("JSM.plugin");
JSM.plugin.LazyLoad=function(config){JSM.plugin.LazyLoad.superclass.constructor.call(this,config)};JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED="LazyLoad-image-loaded";
Chaos.extend(JSM.plugin.LazyLoad,Chaos.Plugin,{name:"LazyLoad",classSelector:"img.lazy",triggerOffset:0,dataSelector:"data-lazy",_images:[],_windowEl:undefined,_onScrollTask:undefined,host:undefined,init:function(host){this.host=host;this.host.addEvents(JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED);this.collectImages();this._windowEl=Ext.fly(window);this.onWindowScroll();JSM.plugin.LazyLoad.superclass.init.call(this,host)},collectImages:function(){var _this=this;Ext.select(this.classSelector).each(function(){_this._images.push(Ext.get(this.dom))})},
onWindowScroll:function(){if(this._onScrollTask)this._onScrollTask.cancel();var imagesLength=this._images.length,i=0,scrollTop=window.pageYOffset||document.documentElement.scrollTop,loadDelay=0,windowHeight="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight;for(;i<imagesLength;i++)if(this._images[i]){var img=this._images[i],imgOffsetTop=img.getTop(),src=img.dom.getAttribute(this.dataSelector);if(scrollTop>=imgOffsetTop-windowHeight-this.triggerOffset){this.attachOnLoad(img.dom);
this._images[i]=false;if(src)img.dom.src=src}}},attachOnLoad:function(imageDomEl){Ext.get(imageDomEl).on("load",this.onImageLoad,this)},onImageLoad:function(ev,target,options){this.host.fireEvent(JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED,{data:{ev:ev,target:target,options:options},scope:this.scope||this||window},JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED)},bind:function(){this._windowEl.on("scroll",this.onWindowScroll,this);this._windowEl.on("resize",this.onWindowScroll,this);JSM.plugin.LazyLoad.superclass.bind.call(this)},
unbind:function(){this._windowEl.un("scroll",this.onWindowScroll,this);this._windowEl.un("resize",this.onWindowScroll,this);JSM.plugin.LazyLoad.superclass.bind.call(this)}});Ext.namespace("JSM.plugin");JSM.plugin.ModelName=function(config){JSM.plugin.ModelName.superclass.constructor.call(this,config)};JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME="display-model-name";
Chaos.extend(JSM.plugin.ModelName,Chaos.Plugin,{name:"ModelName",perfNameCls:"name",perfNameSel:".name",perfStatusSel:".status",hoverClass:"hover",tempArray:[],animDuration:0.2,delayDuration:400,events:{},init:function(host){this.host.addEvents(JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME);JSM.plugin.ModelName.superclass.init.call(this,host)},onThumbMouseOver:function(ev,target,options){if(this.delayedAnimation){this.delayedAnimation.cancel();delete this.delayedAnimation}this.delayedAnimation=new Ext.util.DelayedTask(this.displayModelName,
this,[ev,target,options]);this.delayedAnimation.delay(this.delayDuration)},displayModelName:function(ev,target,name){var perfLinkEl=Ext.get(target);if(perfLinkEl&&perfLinkEl.getAttribute("href")!=""){var urlSplit=perfLinkEl.dom.href.split("/"),perfName=name==undefined?urlSplit[urlSplit.length-1].split("?")[0]:name;this.host.fireEvent(JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME,{display:"show",model:perfLinkEl,infoText:perfName})}},hideVisibleNames:function(ev,target,options){this.stopDisplayingName();
if(options.perfBox&&options.perfBox.child(this.perfNameSel)){var perfNameEl=options.perfBox.child(this.perfNameSel);this.host.fireEvent(JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME,{display:"hide",model:options.perfBox,infoBarEl:perfNameEl})}},hideAllVisibleNames:function(){this.stopDisplayingName();var perfNameEl=this.element.select(this.perfNameSel);perfNameEl.each(function(){this.remove()})},stopDisplayingName:function(){if(this.delayedAnimation){this.delayedAnimation.cancel();this.delayedAnimation=
undefined}}});Chaos.registerPlugin(JSM.plugin.ModelName);Ext.namespace("JSM.plugin.PanelPosition");JSM.plugin.PanelPosition=function(config){JSM.plugin.PanelPosition.superclass.constructor.call(this,config)};
Chaos.extend(JSM.plugin.PanelPosition,Chaos.Plugin,{name:"PanelPosition",arrowSel:".arrow",arrowEl:undefined,panelVerticalPos:"36px",panelHorizontalPos:undefined,sideSel:".left_side",menuBlockId:"menu_block_id",menuBlockEl:undefined,events:{"panel-opened":"panelOpened"},init:function(host){JSM.plugin.PanelPosition.superclass.init.call(this,host);this.arrowEl=this.host.element.child(this.arrowSel);this.menuBlockEl=Ext.get(this.menuBlockId)},panelOpened:function(){if(this.subMenuPosition=="left")this.leftPanel();
else this.rightPanel()},leftPanel:function(){if(this.panelHorizontalPos==undefined){var headerSideEl=this.host.elementEl.child(this.sideSel);this.panelHorizontalPos=this.host.buttonEl.getOffsetsTo(headerSideEl)[0]-this.arrowEl.getWidth()+"px"}this.host.element.setStyle({left:this.panelHorizontalPos,top:this.panelVerticalPos})},rightPanel:function(){this.arrowEl.setStyle({right:this.host.buttonEl.getWidth(true)/2+this.arrowEl.getWidth()/2+"px"});if(this.panelHorizontalPos==undefined)this.panelHorizontalPos=
this.menuBlockEl.getWidth()-this.host.element.getWidth();this.host.element.setStyle({left:"auto",right:this.panelHorizontalPos,top:this.panelVerticalPos})},bind:function(){JSM.plugin.PanelPosition.superclass.bind.call(this)},unbind:function(){JSM.plugin.PanelPosition.superclass.unbind.call(this)}});Chaos.registerPlugin(JSM.plugin.PanelPosition);Ext.namespace("JSM.plugin");JSM.plugin.Prototype=function(config){JSM.plugin.Prototype.superclass.constructor.call(this,config)};
Chaos.extend(JSM.plugin.Prototype,Chaos.Plugin,{name:"Captcha",events:{},init:function(host){JSM.plugin.Prototype.superclass.init.call(this,host)},bind:function(){},unbind:function(){}});Ext.namespace("JSM.plugin");JSM.plugin.SearchFilter=function(config){JSM.plugin.SearchFilter.superclass.constructor.call(this,config)};JSM.plugin.SearchFilter.EVENT_FILTER_ITEMCLICK="filterItemClick";JSM.plugin.SearchFilter.EVENT_RESET_FILTERSCLICK="resetFiltersClick";
JSM.plugin.SearchFilter.EVENT_CLOSE_FILTERCLICK="closeFiltersClick";JSM.plugin.SearchFilter.EVENT_PANEL_OPENED="panel-opened";JSM.plugin.SearchFilter.PANEL_HIDED="panel-hided";JSM.plugin.SearchFilter.GLOBALEVENT_SEARCH="filter-search";
Chaos.extend(JSM.plugin.SearchFilter,Chaos.Plugin,{name:"SearchFilter",filterSel:"filter_",filterClass:"filter_item",filterBtnId:"filter_btn",filterContId:"filter_container",selectedFiltersInputId:"header_selected_filters",selectedClass:"selected",searchMaskId:"search_mask",searchId:"search",searchEl:undefined,groupId:"header",delayedSearchTaskTime:500,addHistory:true,xdomain:false,filterButtonContainerId:"filter_bottom",filterSubmitButtonId:"filter_apply",filterResetButtonId:"filter_reset",searchLogUrlRoute:"ListPageAjax/LogSearchEvents",
autoLoad:false,buildFromJSON:false,mainContainerId:"listpage",noResultString:undefined,animateDuration:0.2,autoHidePanel:true,autoHidePanelDuration:0,hideNoResultMessageDelay:5E3,isAjax:false,_filterButtonContainerEl:undefined,_filterSubmitButtonEl:undefined,_filterButtonEl:undefined,_filterContainerEl:undefined,_selectedFiltersInputEl:undefined,_searchEl:undefined,_searchMaskEl:undefined,_filterWindow:undefined,_delayedSearchTask:undefined,_filterArray:[],_selectedFilterArray:[],_lastSentFiltersArray:[],
_currentFilterNumber:0,_isAjaxInProgress:false,_isFirstEntry:true,_formParams:undefined,_originalValue:undefined,_searchParams:undefined,_searchUrl:undefined,_previousSearchUrl:undefined,_noResultBlockEl:undefined,_hidePanelDelayedTask:undefined,_hideNoResultMessageDelayedTask:undefined,events:{"searchfield-value-change":"onSearchFieldValueChange","onDeleteSearchFieldValue":"onDeleteSearchFieldValue"},init:function(host){this._filterButtonContainerEl=Ext.get(this.filterButtonContainerId);this._filterSubmitButtonEl=
Ext.get(this.filterSubmitButtonId);if(this.autoLoad){this._filterSubmitButtonEl.remove();delete this._filterSubmitButtonEl}this._filterButtonEl=Ext.get(this.filterBtnId);this._filterContainerEl=Ext.get(this.filterContId);this._selectedFiltersInputEl=Ext.get(this.selectedFiltersInputId);this._searchMaskEl=Ext.get(this.searchMaskId);this._searchEl=Ext.get(this.searchId);this.xdomain=JSM.Util.isSecurePage();this._filterWindow=new JSM.window.SearchFilterWindow(this.filterContId,{isModal:false,top:36,
groupId:this.groupId,filterSel:this.filterSel,filterClass:this.filterClass,filterContId:this.filterContId,filterButtonEl:this._filterButtonEl,searchFormId:"search",columnLinkTagName:"ul li a"});var self=this;this._filterContainerEl.select("."+this.filterClass).each(function(){self._filterArray[this.dom.id.split("_")[1]]=this.dom.rel.toLowerCase()});var selectedFilters=Ext.get(this.selectedFiltersInputId).dom.value;if(selectedFilters!="")this._selectedFilterArray=selectedFilters.split(",");this._delayedSearchTask=
new Ext.util.DelayedTask(this.beforeSubmit,this);JSM.plugin.SearchFilter.superclass.init.call(this,host);this._originalValue=this.element.dom.value;Chaos.History.registerComponent(this,{state:"empty"});Chaos.History.registerActions("empty","search",this.doSearchFromHistory,this);Chaos.History.registerActions("search","empty",this.restorePreviousContent,this);Chaos.History.registerActions("search","search",this.doSearchFromHistory,this);JSM.component.UrlAction.registerAction({name:"search",fn:this.redirectToSearchPage,
scope:this});this.addEvents(Chaos.History.EVENT_STATE_CHANGE);Chaos.addEvents(JSM.plugin.SearchFilter.GLOBALEVENT_SEARCH);if(this.autoHidePanel)this._hidePanelDelayedTask=new Ext.util.DelayedTask(this.hideFilterPanel,this);this._hideNoResultMessageDelayedTask=new Ext.util.DelayedTask(this.hideNoResultMessage,this)},redirectToSearchPage:function(hashArray){},doSearchFromHistory:function(ev){if(ev.url!=this._previousSearchUrl){this.addHistory=false;this._formParams=ev.params.formParams;this._selectedFiltersInputEl.dom.value=
ev.params.filters;this.host.element.dom.value=ev.params.searchText;this.hideSelectedFilters();this.refreshFilterList(ev.params.filters.split(","));this.beforeSubmit()}},restorePreviousContent:function(ev){this.resetFilters();this.host.element.dom.value=""},onFilterBtnClick:function(ev,target){if(this._filterWindow.isVisible())this.hideFilterPanel();else{this._searchMaskEl.show();this._originalValue=this.element.dom.value;this._filterWindow.refreshFilterSelection(this._selectedFilterArray);this._filterWindow.show(this._searchEl,
this._filterButtonEl);this.host.fireEvent(JSM.plugin.SearchFilter.EVENT_PANEL_OPENED,ev,target)}},onFilterSubmitClick:function(ev){ev.preventDefault();if(this.element.dom.value==""&&Chaos.getMeta("isSearchPage"))window.location=Chaos.getUrl("Index/Index");else if(!JSM.Util.isEqualArrays(this._lastSentFiltersArray,this._selectedFilterArray))this.beforeSubmit();Chaos.fireEvent(JSM.plugin.SearchFilter.GLOBALEVENT_SEARCH,{scope:this,searchText:this.element.dom.value})},hideFilterPanel:function(){this._filterWindow.hide();
this._filterButtonEl.removeClass(this.selectedClass)},onFilterItemClick:function(ev,target){this.hideNoResultMessage();this._hideNoResultMessageDelayedTask.cancel();var filterItem=Ext.get(target),filterId=filterItem.dom.id.split("_")[1],elementDom=this.element.dom,selectedFiltersInputDom=this._selectedFiltersInputEl.dom;if(filterItem.hasClass(this.selectedClass)){filterItem.removeClass(this.selectedClass);if(this._selectedFilterArray.indexOf(filterId)>-1)this._selectedFilterArray.splice(this._selectedFilterArray.indexOf(filterId),
1)}else{filterItem.addClass(this.selectedClass);this._selectedFilterArray.push(filterId)}if(this._selectedFilterArray.length){elementDom.value=this._filterArray[this._selectedFilterArray[0]];selectedFiltersInputDom.value=this._selectedFilterArray[0];if(this._selectedFilterArray.length>1)for(var i=1;i<this._selectedFilterArray.length;i++){elementDom.value+=" "+this._filterArray[this._selectedFilterArray[i]];selectedFiltersInputDom.value+=","+this._selectedFilterArray[i]}if(this.host.loaderEl.dom.className!=
this.host.resetButtonClass)this.host.loaderEl.dom.className=this.host.resetButtonClass}else{elementDom.value="";selectedFiltersInputDom.value="";this.host.loaderEl.dom.className=""}if(this.autoLoad)this.delayFilterSelect()},delayFilterSelect:function(){if(this._currentFilterNumber==0||this._currentFilterNumber-1<this._selectedFilterArray.length){this._currentFilterNumber=this._selectedFilterArray.length;this.stopDelayTask()}this._delayedSearchTask.delay(this.delayedSearchTaskTime)},stopDelayTask:function(){if(typeof this._delayedSearchTask==
"object")this._delayedSearchTask.cancel()},beforeSubmit:function(){if(!this._isAjaxInProgress)if(this.element.dom.value!=""){this._isAjaxInProgress=true;this.setSearchParams();if(!JSM.Util.isSecurePage())this.host.fireEvent(Chaos.Object.EVENT_CHAOS_LOG,Chaos.getUrl(this.searchLogUrlRoute,{},{},""),{action:"searchFilter",keyword:this.element.dom.value});this.search()}},setSearchParams:function(){this.startLoading();this._searchParams={category:Ext.get("category_type").dom.value,searchText:this.element.dom.value};
this._formParams=Ext.Ajax.serializeForm(this.host.formDomEl);this._searchUrl=this.setSearchUrl()},setSearchUrl:function(){var searchUrlRoute=this.buildFromJSON?"ListPageAjax/Search":"ListPageAjax/ShowMore";return JSM.Util.isCurrentPage("index.index")&&this.isAjax?Chaos.getUrl(searchUrlRoute,{listPageId:Chaos.getMeta("listPageId")},{category:this._searchParams.category,searchText:this._searchParams.searchText},""):Chaos.getUrl("ListPageAjax/PerformerSearch",{},this._formParams,"")},search:function(){this._lastSentFiltersArray=
this._selectedFilterArray.slice();if(this.xdomain)this._searchUrl=Chaos.Ajax.setXDomainUrl(this._searchUrl,true,true);Chaos.Ajax.request({method:"GET",type:"json",scope:this,url:this._searchUrl,checkSession:false,xdomain:this.xdomain,success:function(response){this._isAjaxInProgress=false;if(JSM.Util.isCurrentPage("index.index")&&this.isAjax)this.searchSuccess(response);else this.preSearchSuccess(response)},error:function(e){this._lastSentFiltersArray=[];this._isAjaxInProgress=false;this.searchError(e)},
failure:function(e){this._lastSentFiltersArray=[];this._isAjaxInProgress=false;this.searchFailure(e)}})},preSearchSuccess:function(response){var resp=response.json;if(resp.success==true&&resp.data.results>0)this.host.formDomEl.submit();else{this.stopLoading();this.host.handleLoader(this.host.showReset);this.showNoResultMessage()}},searchSuccess:function(response){var resp=response.json,searchResult;if(typeof this.host.plugins.ListPageBuilder!="undefined"&&JSM.Util.isCurrentPage("index.index")){if(this.buildFromJSON)if(resp.data.content.isEmptyFirstPage!=
"1"&&resp.data.content.performers!=null){searchResult=this.host.plugins.ListPageBuilder.setBlocks(resp.data);this.host.plugins.ListPageBuilder.replaceContent(searchResult,this.mainContainerId);if(this.addHistory)this.manageHistoryEntry("add");else this.addHistory=true;if(this.autoHidePanel)this._hidePanelDelayedTask.delay(this.autoHidePanelDuration)}else{this.stopLoading();this.showNoResultMessage()}else if(resp.data.isLast!="2"&&resp.data.content!=null&&resp.data.content!=""){this.host.plugins.ListPageBuilder.replaceContent(resp.data.content,
this.mainContainerId);if(this.addHistory)this.manageHistoryEntry("add");else this.addHistory=true;if(this.autoHidePanel)this._hidePanelDelayedTask.delay(this.autoHidePanelDuration)}else{this.stopLoading();this.showNoResultMessage()}this.stopLoading();this.host.handleLoader(this.host.showReset)}else this.host.formDomEl.submit()},searchError:function(e){this.hideMask();this.addHistory=true;this.host.formDomEl.submit()},searchFailure:function(e){this.hideMask();this.addHistory=true;this.host.formDomEl.submit()},
showNoResultMessage:function(){this._filterSubmitButtonEl.setVisibilityMode(Ext.Element.DISPLAY);this._filterSubmitButtonEl.hide({duration:this.animateDuration,callback:function(){this._filterSubmitButtonEl.parent().createChild({tag:"div",id:"no_result_info",html:"<span></span>"+this.noResultString});this._noResultBlockEl=Ext.get("no_result_info")},scope:this});this._hideNoResultMessageDelayedTask.delay(this.hideNoResultMessageDelay)},hideNoResultMessage:function(){if(this._noResultBlockEl){this._noResultBlockEl.remove();
delete this._noResultBlockEl;this._filterSubmitButtonEl.setVisibilityMode(Ext.Element.DISPLAY);this._filterSubmitButtonEl.show({duration:this.animateDuration})}},startLoading:function(){this.createMask();JSM.Util.setCursor("wait");this.host.handleLoader(this.host.showLoader)},stopLoading:function(){this.hideMask();JSM.Util.setCursor()},createMask:function(){if(!(this._filterMask instanceof Chaos.Mask))this._filterMask=new Chaos.Mask(this._searchEl,{tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',
appendTo:this._filterContainerEl,maskPosition:"local",isVisibleMask:true,maskOpacity:0.4,maskClass:"filter_mask"});this._filterMask.show()},hideMask:function(){if(this._filterMask)this._filterMask.hide()},onCloseFiltersClick:function(ev,target){this._filterWindow.hide();this.host.fireEvent(JSM.plugin.SearchFilter.PANEL_HIDED,ev,target)},onResetFiltersClick:function(){this.resetFilters();this.hideNoResultMessage();this.host.element.dom.value=""},resetFilters:function(){this.hideSelectedFilters();this._selectedFiltersInputEl.dom.value=
"";this._selectedFilterArray=[];this._lastSentFiltersArray=[]},hideSelectedFilters:function(){var selectedItems=this._filterContainerEl.select("."+this.selectedClass);if(selectedItems.getCount()>0){var self=this;selectedItems.each(function(){Ext.get(this).removeClass(self.selectedClass)})}},onFiltersHide:function(){this._filterButtonEl.removeClass(this.selectedClass);this._searchMaskEl.hide();this.hideMask()},refreshFilterList:function(filtersArray){var i,filtersLength=filtersArray.length,currentFilter;
this._selectedFilterArray=filtersArray;for(i=0;i<filtersLength;i++){currentFilter=Ext.get(this.filterSel+filtersArray[i]);if(currentFilter)currentFilter.addClass(this.selectedClass)}},manageHistoryEntry:function(command){var stateParams={};stateParams.cmpName=this.name;switch(command){case "add":default:stateParams.state="search";stateParams.url="#search|"+this._searchParams.category+"|"+this._searchParams.searchText.replace(/\ /g,"-");stateParams.params={};stateParams.params["formParams"]=this._formParams;
stateParams.params["searchText"]=this._searchParams.searchText;stateParams.params["filters"]=this._selectedFilterArray.toString();if(this._isFirstEntry===true){this._isFirstEntry=false;stateParams.stateChange="replace"}this.fireEvent(Chaos.History.EVENT_STATE_CHANGE,stateParams);this._previousSearchUrl=stateParams.url;break;case "remove":stateParams.state="empty";stateParams.url=location.href.replace(this._previousSearchUrl,"");this._previousSearchUrl=stateParams.url;this.fireEvent(Chaos.History.EVENT_STATE_CHANGE,
stateParams);break}},onFilterContainerClick:function(ev){ev.stopEvent()},onSearchFieldValueChange:function(){this.hideNoResultMessage();this.resetFilters()},onDeleteSearchFieldValue:function(){this.hideNoResultMessage();this.resetFilters()},bind:function(){JSM.plugin.SearchFilter.superclass.bind.call(this);if(this._filterSubmitButtonEl)this._filterSubmitButtonEl.on("click",this.onFilterSubmitClick,this);this._filterWindow.on(JSM.window.SearchFilterWindow.EVENT_HIDE,this.onFiltersHide,this);this._filterWindow.on(JSM.plugin.SearchFilter.EVENT_FILTER_ITEMCLICK,
this.onFilterItemClick,this);this._filterWindow.on(JSM.plugin.SearchFilter.EVENT_CLOSE_FILTERCLICK,this.onCloseFiltersClick,this);this._filterWindow.on(JSM.plugin.SearchFilter.EVENT_RESET_FILTERSCLICK,this.onResetFiltersClick,this);this._filterContainerEl.on("click",this.onFilterContainerClick,this);Chaos.Broadcaster.on(JSM.Overlay.EVENT_OVERLAY_OPEN,this.hideFilterPanel,this)},unbind:function(){JSM.plugin.SearchFilter.superclass.unbind.call(this);if(this._filterSubmitButtonEl)this._filterSubmitButtonEl.un("click",
this.onFilterSubmitClick,this);this._filterWindow.un(JSM.window.SearchFilterWindow.EVENT_HIDE,this.onFiltersHide,this);this._filterWindow.un(JSM.plugin.SearchFilter.EVENT_FILTER_ITEMCLICK,this.onFilterItemClick,this);this._filterWindow.un(JSM.plugin.SearchFilter.EVENT_CLOSE_FILTERCLICK,this.onCloseFiltersClick,this);this._filterWindow.un(JSM.plugin.SearchFilter.EVENT_RESET_FILTERSCLICK,this.onResetFiltersClick,this);this._filterContainerEl.un("click",this.onFilterContainerClick,this);Chaos.Broadcaster.un(JSM.Overlay.EVENT_OVERLAY_OPEN,
this.hideFilterPanel,this)}});Chaos.registerPlugin(JSM.plugin.SearchFilter);Ext.namespace("JSM.template");JSM.template.AwardsPerformerBannedTemplate=function(config){JSM.template.AwardsPerformerBannedTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.AwardsPerformerBannedTemplate,JSM.template.Template,{name:"AwardsPerformerTemplate",tpl:'<div id="container_{id}" class="performer show banned'+'">'+'<div class="performerBox inner allow_hover">'+'<div id="innercontainer_{id}" class="image" style="background-image:url({profilePictureUrl}) ">'+'<span class="banned_text">This model is not available <br> in your region.</span>'+"</div>"+"</div>"+"</div>",init:function(){JSM.template.AwardsPerformerBannedTemplate.superclass.init.call(this)},
getBadge:function(){},getStatus:function(status){},setUrl:function(route){return location.protocol+"//"+location.host+route},_setTemplateParams:function(data){return{id:data.p_id,name:data.performer_id,profilePictureUrl:data.profilePictureUrl,imageId:data.pid+"_"+data.id,containerClass:data.size,anchorClass:"perf_link",realStatus:data.status,rev:data.gravity_category,searchSuggest:data.search_suggest,chatUrl:data.chatUrl||this.setUrl("/chat/"+data.p_id),statusBlock:this.getStatus(data.status),voteBtnClass:application.isLoggedIn()?
"vote":"signup",imageDataTitle:Chaos.translate("Free Live Sex Chat"),flashInitData:Ext.encode(data.flashInitData),gravityCategory:data.gravity_category,quality:data.quality2||"0",gravityDebug:data.last_online_at+" "+data.gravity_rec_id,historyType:data.lastEventType,historyTime:data.lastEventTimeMessage,blockType:data.blockType,point:data.point,isVoted:data.isVoted,winning:data.winning,voteButtonLabel:Chaos.translate("Vote")}}});Ext.namespace("JSM.template");
JSM.template.AwardsPerformerTemplate=function(config){JSM.template.AwardsPerformerTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.AwardsPerformerTemplate,JSM.template.Template,{name:"AwardsPerformerTemplate",tpl:'<div id="container_{id}" class="performer {containerClass} '+"{statusCls} show"+'" data-performer-id="{id}" data-real-status="{realStatus}">'+'<div class="performerBox inner allow_hover">'+'<div id="innercontainer_{id}" class="image">'+'<a id="performer_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{chatUrl}">'+"<noscript>"+'<img src="{profilePictureUrl}" alt="{name}" />'+
"</noscript>"+'<img id="perfimg_{name}_{id}" class="lazy" src="{defaultImgSrc}" alt="{name}" data-fallback="{profilePictureFallBackUrl}" data-default="{profilePictureDefaultUrl}" data-lazy="{profilePictureUrl}"/>'+'<span class="data">{flashInitData}</span>'+'<span class="add_favorite{isFavorite}">&nbsp;</span>'+"</a>"+'<div class="details">'+'<div class="margin">'+'<h2 class="name">{name}</h2>'+'<span class="points">{winning}<span class="num">{point}</span> points</span>'+'<a href="#" class="{voteBtnClass} {countryBan} first_button small {isVotedVoteBtnCls}" data-performer-id="{id}" data-is-voted="{isVoted}" data-vote-place="topList">{voteButtonLabel}'+
'<span class="loader">&nbsp;</span>'+"</a>"+'<p class="is_voted {isVotedCls}">'+'<span class="">{isVotedText}</span>'+"</p>"+'<p class="is_offline hidden">'+"Model is offline<br>"+"<span>Check back later!</span>"+"</p>"+"</div>"+"</div>"+"{statusBlock}"+"</div>"+"</div>"+"</div>",init:function(){this.statusClasses=["offline","free","private","members_only"];JSM.template.AwardsPerformerTemplate.superclass.init.call(this)},getBadge:function(){},getStatus:function(status){var statusString;switch(status){case 0:statusString=
"Offline";break;default:statusString="Online"}var statusBlock='<div class="status '+statusString+'">'+statusString+"</div>";return statusBlock.toString().toLowerCase()},setUrl:function(route){return location.protocol+"//"+location.host+route},_setTemplateParams:function(data){var formatNumber=function(nStr){nStr+="";var x=nStr.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;while(rgx.test(x1))x1=x1.replace(rgx,"$1"+","+"$2");return x1+x2},nullBgUrl=Chaos.Config.get("nullBgUrl");return{id:data.p_id,
name:data.performer_id,countryBan:data.banned_this_country?"hidden":"",profilePictureUrl:data.profilePictureUrl,profilePictureFallBackUrl:data.profilePictureFallbackUrl,profilePictureDefaultUrl:data.profilePictureDefaultUrl,defaultImgSrc:nullBgUrl,imageId:data.pid+"_"+data.id,containerClass:data.size,anchorClass:"perf_link",realStatus:data.status,statusCls:this.statusClasses[data.status],rev:data.gravity_category,searchSuggest:data.search_suggest,chatUrl:data.chatUrl||this.setUrl("/chat/"+data.p_id),
statusBlock:this.getStatus(data.status),voteBtnClass:application.isLoggedIn()?"vote":"signup",imageDataTitle:Chaos.translate("Free Live Sex Chat"),flashInitData:Ext.encode(data.flashInitData),gravityCategory:data.gravity_category,quality:data.quality2||"0",gravityDebug:data.last_online_at+" "+data.gravity_rec_id,historyType:data.lastEventType,historyTime:data.lastEventTimeMessage,blockType:data.blockType,point:formatNumber(data.point),isVoted:data.is_voted,isVotedCls:data.is_voted?"":"hidden",isVotedVoteBtnCls:!data.is_voted?
"":"hidden",winning:data.winning>0?"$"+data.winning+" - ":"",voteButtonLabel:Chaos.translate("Vote"),isVotedText:Chaos.translate("You&#39;ve already voted."),isFavorite:data.is_favourite=="1"?" myfavorite":""}}});Ext.namespace("JSM.template");JSM.template.FavoritesTemplate=function(config){JSM.template.FavoritesTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.FavoritesTemplate,JSM.template.Template,{name:"FavoritesTemplate",tpl:'<div id="favorite_container_{id}" class="small '+"{statusCls}"+'">'+'<a id="favorite_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{href}" target="{target}">'+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+"{badgeBlock}"+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<img id="favimg_{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>",anchorClass:"perf_link",
init:function(){var privateStatusTranslate=Chaos.translate("In Private Chat"),offlineStatusTranslate=Chaos.translate("Offline"),memberStatusTranslate=Chaos.translate("In Member Chat");this.statusTranslations=[offlineStatusTranslate,"",privateStatusTranslate,memberStatusTranslate],this.statusClasses=["offline","free","private","members_only"];JSM.template.FavoritesTemplate.superclass.init.call(this)},getBadge:function(badge){var badgeBlock=badge!=undefined?'<span class="badge '+badge+'">&nbsp;</span>':
"";return badgeBlock.toString()},getStatus:function(status){var statusBlock=status!="1"?'<span class="status">'+"<span>"+this.statusTranslations[status]+"</span>"+'<span class="bg">&nbsp;</span>'+"</span>":"";return statusBlock.toString()},setUrl:function(route){return location.protocol+"//"+location.host+route},_setTemplateParams:function(data){return{id:data.id,name:data.pid,src:data.profilePictureUrl,imageId:data.pid+"_"+data.id,containerClass:data.size,anchorClass:this.anchorClass,statusCls:this.statusClasses[data.status],
rev:data.gravity_category,searchSuggest:data.search_suggest,href:data.href||this.setUrl("/chat/"+data.pid),badgeBlock:this.getBadge(data.active_badge),statusBlock:this.getStatus(data.status),imageDataTitle:Chaos.translate("Free Live Sex Chat"),flashInitData:Ext.encode(data.flashInitData),gravityCategory:data.gravity_category,quality:data.quality2||"0",gravityDebug:data.last_online_at+" "+data.gravity_rec_id,historyType:data.lastEventType,historyTime:data.lastEventTimeMessage,blockType:data.blockType,
isFavorite:data.favourite?" myfavorite":""}}});Ext.namespace("JSM.template");JSM.template.HistoryTemplate=function(config){JSM.template.HistoryTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.HistoryTemplate,JSM.template.Template,{name:"HistoryTemplate",tpl:'<div id="myhistory_container_{id}" class="small '+"{statusCls}"+'">'+'<a id="myhistory_{id}" class="perf_link" href="{href}">'+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<span class="history_status history_type">{historyType}</span>'+'<span class="history_status history_time">{historyTime}</span>'+'<img id="historyimg_{name}_{id}" src="{src}" alt="{name}" />'+"</a>"+"</div>",anchorClass:"perf_link",
init:function(){var privateStatusTranslate=Chaos.translate("In Private Chat"),offlineStatusTranslate=Chaos.translate("Offline"),memberStatusTranslate=Chaos.translate("In Member Chat");this.statusTranslations=[offlineStatusTranslate,"",privateStatusTranslate,memberStatusTranslate],this.statusClasses=["offline","free","private","members_only"];JSM.template.HistoryTemplate.superclass.init.call(this)},getBadge:function(badge){var badgeBlock=badge!=undefined?'<span class="badge '+badge+'">&nbsp;</span>':
"";return badgeBlock.toString()},getStatus:function(status){var statusBlock=status!="1"?'<span class="status">'+"<span>"+this.statusTranslations[status]+"</span>"+'<span class="bg">&nbsp;</span>'+"</span>":"";return statusBlock.toString()},setUrl:function(route){return location.protocol+"//"+location.host+route},_setTemplateParams:function(data){return{id:data.id,name:data.pid,src:data.profilePictureUrl,imageId:data.pid+"_"+data.id,containerClass:data.size,anchorClass:this.anchorClass,statusCls:this.statusClasses[data.status],
rev:data.gravity_category,searchSuggest:data.search_suggest,href:data.href||this.setUrl("/chat/"+data.pid),badgeBlock:this.getBadge(data.active_badge),statusBlock:this.getStatus(data.status),imageDataTitle:Chaos.translate("Free Live Sex Chat"),flashInitData:Ext.encode(data.flashInitData),gravityCategory:data.gravity_category,quality:data.quality2||"0",gravityDebug:data.last_online_at+" "+data.gravity_rec_id,historyType:data.lastEventType,historyTime:data.lastEventTimeMessage,blockType:data.blockType}}});
Ext.namespace("JSM.template");JSM.template.ImageGalleryTemplate=function(config){JSM.template.ImageGalleryTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.ImageGalleryTemplate,JSM.template.Template,{name:"ImageGalleryTemplate",tpl:"<div id={imageGalleryId}>"+"<div id={imageGalleryContainerId}>"+"<div id={navigationContainerId}>"+"<a href='#' id={navigationPrevMaskId}></a>"+"<a href='#' id={navigationNextMaskId}></a>"+"<a href='#' class={closeButtonCls}>"+"<em>{closeButtonText}</em>"+"<span>&nbsp;</span></a>"+"<a href='#' id={prevImageButtonId}><span>&nbsp;</span></a>"+"<a href='#' id={nextImageButtonId}><span>&nbsp;</span></a>"+
"<h2><strong>{galleryTitleText}</strong><span id={currentImageCountId}>{currentImageCount}</span>{galleryText}<span id={maxImageCountId}>{maxImageCount}</span></h2>"+"</div>"+"<div id={imageGalleryBoxId}>"+"</div>"+"</div>"+"</div>",init:function(){JSM.template.ImageGalleryTemplate.superclass.init.call(this)},_setTemplateParams:function(data){return{imageGalleryId:data.imageGalleryId,imageGalleryContainerId:data.imageGalleryContainerId,imageGalleryBoxId:data.imageGalleryBoxId,navigationContainerId:data.navigationContainerId,
closeButtonCls:data.closeButtonCls,prevImageButtonId:data.prevImageButtonId,nextImageButtonId:data.nextImageButtonId,galleryTitleText:data.galleryTitleText,galleryText:data.galleryText,currentImageCount:data.currentImageCount,currentImageCountId:data.currentImageCountId,maxImageCount:data.maxImageCount,maxImageCountId:data.maxImageCountId,navigationPrevMaskId:data.navigationPrevMaskId,navigationNextMaskId:data.navigationNextMaskId,closeButtonText:data.closeButtonText}}});Ext.namespace("JSM.template");
JSM.template.ImageWithAnchorTemplate=function(config){JSM.template.ImageWithAnchorTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.ImageWithAnchorTemplate,JSM.template.Template,{name:"ImageWithAnchorTemplate",commercialImageUrl:"listpage",commercialImageId:"commercial",tpl:'<div id="container_{id}" class="{containerClass} commercial_container">'+'<a id="performer_{id}" class="{anchorClass} freecredits" href="{href}" target="{target}">'+'<img id="{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>",emptyFlashInitData:{qualitycategory:"",resolution:"",sumofonlineperformers:"",teaser_audio:"",teaser_duration:"",
teaser_type:"",teaser_url:"",teaser_videoaudio:""},init:function(){JSM.template.ImageWithAnchorTemplate.superclass.init.call(this)},_setTemplateParams:function(data){return{containerClass:data.size,id:data.id,src:data.commercialImageUrl,target:data.commercialUrlTarget||"_self",href:data.commercialUrl||"#",blockType:data.blockType}}});Ext.namespace("JSM.template");JSM.template.ImageWithoutAnchorTemplate=function(config){JSM.template.ImageWithoutAnchorTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.ImageWithoutAnchorTemplate,JSM.template.Template,{name:"ImageWithoutAnchorTemplate",commercialImageUrl:"listpage",commercialImageId:"commercial",tpl:'<div id="container_{id}" class="{containerClass} commercial_container">'+'<img src="{src}" alt />'+"</div>",init:function(){JSM.template.ImageWithoutAnchorTemplate.superclass.init.call(this)},_setTemplateParams:function(data){return{containerClass:data.size,id:data.id,src:data.commercialImageUrl}}});Ext.namespace("JSM.template");
JSM.template.PerformerTemplate=function(config){JSM.template.PerformerTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.PerformerTemplate,JSM.template.Template,{name:"PerformerTemplate",tpl:'<div id="container_{id}" class="{containerClass} '+"{statusCls}"+'">'+'<a id="performer_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{href}" target="{target}">'+"{debugText}"+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+"{badgeBlock}"+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<img id="perfimg_{imageId}" src="{src}" alt="{name}" />'+"</a>"+"</div>",
anchorClass:"perf_link",init:function(){var privateStatusTranslate=Chaos.translate("In Private Chat"),offlineStatusTranslate=Chaos.translate("Offline"),memberStatusTranslate=Chaos.translate("In Member Chat");this.statusTranslations=[offlineStatusTranslate,"",privateStatusTranslate,memberStatusTranslate],this.statusClasses=["offline","free","private","members_only"];JSM.template.PerformerTemplate.superclass.init.call(this)},getBadge:function(badge){var badgeBlock=badge!=undefined?'<span class="badge '+
badge+'">&nbsp;</span>':"";return badgeBlock.toString()},getStatus:function(status){var statusBlock=status!="1"?'<span class="status">'+"<span>"+this.statusTranslations[status]+"</span>"+'<span class="bg">&nbsp;</span>'+"</span>":"";return statusBlock.toString()},setUrl:function(route){return location.protocol+"//"+location.host+route},_setTemplateParams:function(data){return{id:data.id,name:data.pid,src:data.profilePictureUrl,imageId:data.pid+"_"+data.id,containerClass:data.size,anchorClass:this.anchorClass,
statusCls:this.statusClasses[data.status],rev:data.gravity_category,searchSuggest:data.search_suggest,href:data.href||this.setUrl("/chat/"+data.pid),badgeBlock:this.getBadge(data.active_badge),statusBlock:this.getStatus(data.status),imageDataTitle:Chaos.translate("Free Live Sex Chat"),flashInitData:Ext.encode(data.flashInitData),gravityCategory:data.gravity_category,quality:data.quality2||"0",gravityDebug:data.last_online_at+" "+data.gravity_rec_id,historyType:data.lastEventType,historyTime:data.lastEventTimeMessage,
blockType:data.blockType,debugText:"<span style='background:black;color:white;position:absolute'>"+data.debugText+"</span>",isFavorite:data.favourite=="1"?" myfavorite":""}}});Ext.namespace("JSM.template");JSM.template.RefreshWindowTemplate=function(config){JSM.template.RefreshWindowTemplate.superclass.constructor.call(this,config)};
Ext.extend(JSM.template.RefreshWindowTemplate,JSM.template.Template,{name:"RefreshWindowTemplate",commercialImageUrl:"listpage",commercialImageId:"commercial",tpl:"<div id={id} class='popup_box'>"+"<div class='popup_box_header'>"+"<h2>{title}</h2>"+"</div>"+"<div class='popup_box_container'>"+"<p>{message}</p>"+"<a id={buttonId} href='#' class='first_button'>{btnText}</a>"+"</div>"+"</div>",init:function(){JSM.template.RefreshWindowTemplate.superclass.init.call(this)},_setTemplateParams:function(data){return{id:data.id,
title:data.title,message:data.message,buttonId:data.buttonId,btnText:data.btnText}}});Ext.namespace("JSM");JSM.Connection=function(config){JSM.Connection.superclass.constructor.call(this,config)};JSM.Connection.GLOBALEVENT_XDOMAIN_RESPONSE="xdomain-response";JSM.Connection.GLOBALEVENT_REMOTE_RESPONSE="remote-response";JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_COMPLETE="xdomain-request-complete";JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_ERROR="xdomain-request-error";
Ext.extend(JSM.Connection,Chaos.Connection,{name:"Ajax",defaultJSMOptions:{xdomain:false,fallbackLog:true,errorLog:false},flashId:"flash_backconn",_xDomainRequests:undefined,_waitingRequestsQueue:[],_queueChecked:false,_queueCheckerTimeout:undefined,init:function(){JSM.Connection.superclass.init.call(this);Chaos.addEvents(JSM.Connection.GLOBALEVENT_XDOMAIN_RESPONSE,JSM.Connection.GLOBALEVENT_REMOTE_RESPONSE,JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_COMPLETE,JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_ERROR);
Chaos.Broadcaster.on(JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_COMPLETE,this.xDomainRequestComplete,this);Chaos.Broadcaster.on("backconn-ready",this.checkQueue,this);this._xDomainRequests={};JSM.Session.setOldSessionCookie();this._queueCheckerTimeout=new Ext.util.DelayedTask(function(){if(!this._queueChecked)this.checkQueue()},this);this._queueCheckerTimeout.delay(2E3);this.on("requestexception",this.onRequestException,this)},checkQueue:function(){if(this._queueCheckerTimeout)this._queueCheckerTimeout.cancel();
var waitingQueueLength=this._waitingRequestsQueue.length,i,currentRequest;if(waitingQueueLength>0)for(i=0;i<waitingQueueLength;i++){currentRequest=this._waitingRequestsQueue[i];if(currentRequest)try{this.sendRequest(currentRequest)}catch(exception){}this._waitingRequestsQueue[i]=undefined}this._queueChecked=true},request:function(options){if(JSM.Session.checkCookieChanges()){Ext.applyIf(options,this.defaultJSMOptions);options.errorLog=false;options._requestStartedAt=new Date;if(Chaos.Cookie.isCookieEnabled()===
false)options.url=JSM.Util.UrlHelper.refreshUrlSession(options.url);if((this.isAuthUrl(options.url)&&!JSM.Util.isSecurePage()||!this.isAuthUrl(options.url)&&JSM.Util.isSecurePage())&&JSM.Util.getEnv()=="prod"){if(!JSM.Util.isSecureUrl(options.url)){var isRoute=true;if(options.url.match("http://"))isRoute=false;options.url=this.setXDomainUrl(options.url,isRoute)}this.xDomainRequest(options)}else JSM.Connection.superclass.request.call(this,options)}},isAuthUrl:function(url){return url.match("/auth/")},
xDomainRequest:function(options){var requestId=Chaos.generateId("request");this._xDomainRequests[requestId]=options;if(this.flashEl==null||this.flashEl==undefined)this.flashEl=this.getFlashObject();if(this.flashEl&&typeof this.flashEl.requestURL!="function"){this._waitingRequestsQueue.push(requestId);this._queueChecked=false}try{this.sendRequest(requestId)}catch(exception){if(options.fallbackLog!==false);}},sendRequest:function(requestId){var options=this._xDomainRequests[requestId];try{this.flashEl.requestURL(options.url,
options.params,"POST",requestId,"function(r){Chaos.fireEvent('xdomain-request-complete', r)}")}catch(exception){Chaos.fireEvent(JSM.Connection.GLOBALEVENT_XDOMAIN_REQUEST_ERROR,{options:options,requestId:requestId});if(!options.secured){JSM.component.JsonP.request(options);throw"Unable to send request. Falling back to jsonP. Cause: "+exception;}else throw"Unable to send request. Due to security this request will not falling back to jsonP. Cause: "+exception;}},xDomainRequestComplete:function(response){var requestId=
response.id,scope=this._xDomainRequests[requestId].scope||this||window,res={},currentRequest=this._xDomainRequests[requestId];res.json=Ext.decode(response.result.replace(/%5c/g,"\\"));Chaos.Ajax._fireCommand(res);if(currentRequest.xDomainCallback!=undefined)currentRequest.xDomainCallback.call(scope,res);if(res.json.success)if(currentRequest.xDomainCallbackSuccess!=undefined)currentRequest.xDomainCallbackSuccess.call(scope,res);else currentRequest.success.call(scope,res);else if(currentRequest.xDomainCallbackError!=
undefined)currentRequest.xDomainCallbackError.call(scope,res);else currentRequest.error.call(scope,res)},xDomainRequestError:function(response){Chaos.fireEvent(JSM.component.XDomainRequest.EVENT_REQUEST_ERROR,this)},xDomainRequestFailure:function(response){Chaos.fireEvent(JSM.component.XDomainRequest.EVENT_REQUEST_FAILURE,this)},xDomainRequestTimeout:function(){Chaos.fireEvent(JSM.component.XDomainRequest.EVENT_REQUEST_TIMEOUT,this)},setXDomainUrl:function(url,isRoute,unsecured){if(!url)throw"Can not set xdomain url, because url is undefined.";
var protocol;if(unsecured)protocol="http://";else protocol=JSM.Util.isProduct()&&Chaos.Config.get("isHttpsEnabled",true)?"https://":"http://";if(typeof url=="string")return isRoute?protocol+location.host+url:protocol+url.split("://")[1];return undefined},getFlashObject:function(){return Chaos.getFlashMovieObject(this.flashId)},onRequestComplete:function(conn,response,options){if(options.checkSession==undefined||options.checkSession===true){JSM.Connection.superclass.onRequestComplete.call(this);JSM.Session.checkCookieChanges()}},
onError:function(response,options){JSM.Connection.superclass.onError.call(this,response,options);if(options.errorLog!==false)this._sendException(response,options,JSM.component.ErrorLogHelper_LEVEL_NOTICE)},onFailure:function(response,options){JSM.Connection.superclass.onFailure.call(this,response,options);this._sendException(response,options,JSM.component.ErrorLogHelper_LEVEL_WARNING)},onRequestException:function(conn,response,options){if(response.status!=-1)this._sendException(response,options)},
_sendException:function(response,options,level){}});Chaos.Ajax=new JSM.Connection;Chaos.Window=function(el,config){Chaos.Window.superclass.constructor.call(this,el,config)};Chaos.Window.EVENT_SHOW="show";Chaos.Window.EVENT_HIDE="hide";Chaos.Window.EVENT_BEFORE_HIDE="before-hide";Chaos.Window.EVENT_AFTER_HIDE="after-hide";Chaos.Window.GLOBALEVENT_SHOW="window-show";Chaos.Window.GLOBALEVENT_HIDE="window-hide";
Chaos.extend(Chaos.Window,Chaos.Block,{_isShown:false,name:"window",isModal:false,left:0,top:0,overlay:undefined,overlayClass:"overlay",exitOnEsc:true,autoDestroy:false,autoDestroyElement:false,exitOnOverlayClick:true,minZIndex:1E4,duration:0.3,hideDuration:0.3,showMode:"absolute",overlayTopPosition:0,minTop:0,hideElement:false,keepOverlay:false,toggleEventHandlersOnDisplay:false,setPositionOnResize:true,groupId:0,showCallback:undefined,init:function(el,config){if(config.left||config.top)this.setPosition(config.left,
config.top,config.reference);this.addEvents({"hide":true,"show":true});Chaos.addEvents(Chaos.Window.GLOBALEVENT_HIDE);this.overlay=Ext.get(config.overlay);if(typeof this.groupId!="undefined"&&this.groupId!==0){var group=Chaos.WinMgr.getGroup(this.getGroupId());if(group.autoRegister==true)Chaos.WinMgr.register(this)}Chaos.Window.superclass.init.call(this,el,config)},getGroupId:function(){return this.groupId||0},setGroupId:function(groupId){this.groupId=groupId;return this},onEscKeypress:function(ev,
target){if(ev.keyCode==27&&this.exitOnEsc&&this._isShown)this.hide(this.hideDuration)},onClosePopupClick:function(ev,target){if(this.exitOnOverlayClick&&this._isShown)this.hide(this.hideDuration)},render:function(){Chaos.Window.superclass.render.call(this);if(this.isModal){this.overlay.setStyle("z-index",this.minZIndex);this.element.setStyle("z-index",this.minZIndex+10)}},getVisible:function(){return this._isShown},show:function(duration,callback,scope){if(this.toggleEventHandlersOnDisplay)this.bindEventHandlers();
var callbackFn=Chaos.isFunction(callback)?callback:this.showCallback||Chaos.emptyFn,currentDuration=duration||this.duration||0;if(!this.rendered)this.render();if(this.manager)this.manager.setActive(this);if(this._isShown)return this;this._isShown=true;this.fireEvent(Chaos.Window.EVENT_SHOW,{window:this});Chaos.fireEvent(Chaos.Window.GLOBALEVENT_SHOW,{window:this});if(this.isModal&&this.overlay&&!this.isOverlayVisible()){this.overlay.setStyle({"display":"block","visibility":"visible","opacity":0,"top":this.overlayTopPosition+
"px"});TweenLite.to(this.overlay.dom,currentDuration,{opacity:1})}this.element.setStyle({"display":"block","visibility":"visible","opacity":0});this.setPosition(this.left,this.top,this.reference);TweenLite.to(this.element.dom,currentDuration,{opacity:1,onComplete:callbackFn,onCompleteScope:scope||this||window});this.fireEvent(Chaos.Window.EVENT_SHOW,{window:this});Chaos.fireEvent(Chaos.Window.GLOBALEVENT_SHOW,{window:this});return this},display:function(params){this.left=typeof params.left!="undefined"?
params.left:this.element.getLeft();this.top=typeof params.top!="undefined"?params.top:this.element.getTop();if(typeof params.reference!="undefined")this.reference=params.reference;this.show(params.duration,params.callback,params.scope)},hide:function(duration,callback,keepOverlay,callbackScope){if(this.isVisible()){if(this.toggleEventHandlersOnDisplay)this.unbindEventHandlers();this.fireEvent(Chaos.Window.EVENT_BEFORE_HIDE,{window:this});this._isShown=false;var callbackFn=Chaos.isFunction(callback)?
callback:Chaos.emptyFn,mustKeepOverlay=keepOverlay||this.keepOverlay;if(this.manager)this.manager.setActive(this);if(this.isModal&&this.overlay&&!mustKeepOverlay)if(duration==0)this.overlay.setDisplayed(false);else TweenLite.to(this.overlay.dom,duration||this.hideDuration,{opacity:0,onCompleteScope:this.overlay,onComplete:function(){this.setDisplayed(false)}});if(duration==0){if(this.hideElement)this.element.setVisible("hidden");else this.element.setDisplayed(false);this._destroyElement();callbackFn.apply(callbackScope||
this,arguments);this.fireEvent(Chaos.Window.EVENT_HIDE,{window:this})}else{if(this.autoDestroy)this.unbind();TweenLite.to(this.element.dom,duration||this.duration,{opacity:0,onCompleteScope:this,onComplete:function(){this.element.setDisplayed(false);this._destroyElement();callbackFn.apply(callbackScope||this,arguments);this.fireEvent(Chaos.Window.EVENT_HIDE,{window:this});this.fireEvent(Chaos.Window.EVENT_AFTER_HIDE,{window:this});Chaos.fireEvent(Chaos.Window.GLOBALEVENT_HIDE,{window:this})}})}}return this},
setManager:function(manager){this.manager=manager;return this},isVisible:function(){return this._isShown},isOverlayVisible:function(){return this.overlay.isVisible()},setPosition:function(left,top,obj){this.reference=Ext.get(obj);if(Chaos.isNull(this.reference)){this.element.setStyle("position",this.showMode);if(left==="center"){if(this.setPositionOnResize)Ext.fly(window).on("resize",this.setCenterHorizontal,this);this.setCenterHorizontal({data:this})}else if(Chaos.isDefined(left)){if(this.left==
"center"&&this.setPositionOnResize)Ext.fly(window).un("resize",this.setCenterHorizontal,this);this.element.setStyle("left",left+"px")}if(top==="center"){if(this.setPositionOnResize)Ext.fly(window).on("resize",this.setCenterVertical,this);this.setCenterVertical({data:this})}else if(Chaos.isDefined(top)){if(this.top=="center"&&this.setPositionOnResize)Ext.fly(window).un("resize",this.setCenterVertical,this);this.element.setStyle("top",top+"px")}}else{var position=this.reference.getXY();this.element.setStyle({"position":this.showMode});
this.element.setStyle({left:position[0]+left+"px",top:position[1]+top+"px"})}this.left=left;this.top=top;return this},setCenterHorizontal:function(ev,target){var win=Ext.get(document.body);var position=(win.getWidth()-this.element.getWidth())/2+(this.showMode=="absolute"?win.getScroll().left:0);this.element.setStyle("left",(position<0?0:position)+"px");return this},setCenterVertical:function(ev){var win=Ext.get(document.body);var position=(win.getHeight()-this.element.getHeight())/2+(this.showMode==
"absolute"?win.getScroll().top:0);this.element.setStyle("top",(position<this.minTop?this.minTop:position)+"px");return this},_destroyElement:function(){if(this.autoDestroy){var group=Chaos.WinMgr.getGroup(this.getGroupId());if(Chaos.WinMgr.isRegistered(this))Chaos.WinMgr.unregister(this);this.destroy(this.autoDestroyElement)}},bindEventHandlers:function(){Chaos.Window.superclass.bind.call(this);if(this.exitOnOverlayClick&&typeof this.overlay!="undefined"&&this.isModal)this.overlay.on("click",this.onClosePopupClick,
this);if(this.exitOnEsc)Ext.fly(document).on("keyup",this.onEscKeypress,this)},unbindEventHandlers:function(){Chaos.Window.superclass.unbind.call(this);if(this.exitOnEsc)Ext.fly(document).un("keyup",this.onEscKeypress,this);if(this.exitOnOverlayClick&&typeof this.overlay!="undefined"&&this.isModal)this.overlay.un("click",this.onClosePopupClick,this);if(!this.reference&&this.setPositionOnResize){if(this.left=="center")Ext.fly(window).un("resize",this.setCenterHorizontal,this);if(this.top=="center")Ext.fly(window).un("resize",
this.setCenterVertical,this)}},bind:function(){if(!this.toggleEventHandlersOnDisplay)this.bindEventHandlers()},unbind:function(){if(!this.toggleEventHandlersOnDisplay)this.unbindEventHandlers()}});
Chaos.Controller=function(config){if(typeof config=="undefined")config={};if(typeof config.init!="undefined")if(config.init instanceof Function){var initCmp=config.init;delete config.init}else console.warn("config has a member called init, which is not a function, but overwrites original init.");var el=config.el||Ext.getBody();Chaos.Controller.superclass.constructor.call(this,el,config);if(initCmp instanceof Function)initCmp.call(this,el,config)};
Chaos.extend(Chaos.Controller,Chaos.Container,{name:"GeneralController",init:function(el,config){Chaos.Controller.superclass.init.call(this,el,config)}});Ext.namespace("JSM.component");JSM.component.Footer=function(el,config){JSM.component.Footer.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.Footer,Chaos.Container,{name:"Footer",footerMiddleSel:".footer_middle",langLinkSel:".footer_middle ul li a",footerId:"footer",_langLinkEl:undefined,_footerMiddleEl:undefined,_footerMask:undefined,_footer:undefined,init:function(el,config){this._langLinkEl=this.element.select(this.langLinkSel);this._footerMiddleEl=this.element.select(this.footerMiddleSel).item(0);this._footer=Ext.get(this.footerId);JSM.component.Footer.superclass.init.call(this,el,config)},onLanguageLinkClick:function(ev,
target){var langCode=Ext.get(target).dom.href.split("/")[3];Chaos.Cookie.set(Chaos.Config.get("langJasmin1Cookie"),langCode,2592E3,"/",Chaos.Config.get("cookiedomain"));Chaos.Cookie.set(Chaos.Config.get("langJasmin2Cookie"),langCode,2592E3,"/",Chaos.Config.get("cookiedomain"))},onClickFooterElement:function(ev,target){Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_FOOTER,{linkId:target.id})},setFooterInactive:function(){this._footerMiddleEl.dom.style.opacity=0.5;if(!Chaos.isDefined(this._headerMask)){this._footerMask=
new Chaos.Mask(Ext.getBody(),{maskClass:"chaos-mask-private",message:"&nbsp",appendTo:this._footerMiddleEl,duration:0.1,maskOpacity:0.2,insertionMethod:"append",defaultZindex:10005,maskPosition:"local",useDefaultZindex:true});this._footerMask.show()}},setFooterActive:function(){this._footerMiddleEl.dom.style.opacity=1;if(Chaos.isDefined(this._footerMask)){this._footerMask.maskEl.remove();this._footerMask=undefined}},bind:function(){JSM.component.Footer.superclass.bind.call(this);this._footer.on("click",
this.onClickFooterElement,this,{delegate:".track"});this._langLinkEl.on("click",this.onLanguageLinkClick,this)},unbind:function(){JSM.component.Footer.superclass.unbind.call(this);this._footer.un("click",this.onClickFooterElement,this,{delegate:".track"});this._langLinkEl.un("click",this.onLanguageLinkClick,this)}});Ext.namespace("JSM.component");JSM.component.Header=function(el,config){JSM.component.Header.superclass.constructor.call(this,el,config)};JSM.component.Header.TOPMEMBER_LOGIN="topmember-login";
JSM.component.Header.GLOBALEVENT_HEADER_REFRESH="header-refresh";JSM.component.Header.GLOBALEVENT_HEADER_CLICK="header-click";JSM.component.Header.GLOBALEVENT_OVERLAY_QUICKBUY_TRANSACTION_SUCCESS="overlay-quickbuy-transaction-success";JSM.component.Header.WINMGR_GROUP_ID="header";JSM.component.Header.CONFIG_IS_FLASH_DISABLED="is-flash-disabled";JSM.component.Header.CONFIG_IS_COOKIE_DISABLED="is-cookie-disabled";JSM.component.Header.CONFIG_IS_BROWSER_OUTDATED="is-browser-outdated";
JSM.component.Header.GLOBALEVENT_OPEN_FAVORITES_FROM_MENU="favorites-select-button-click";JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER="get-payment-router";JSM.component.Header.PAYMENT_ACTION_FIRSTBILL="firstBill";JSM.component.Header.PAYMENT_ACTION_QUICKBUY="quickBuy";JSM.component.Header.PAYMENT_ACTION_REDIRECT="redirect";
Chaos.extend(JSM.component.Header,Chaos.Container,{name:"Header",smallHeaderClass:"header_1024",smallBottomClass:"bottom_width_1024",footerId:"footer",footerEl:undefined,bottomWidthSel:".bottom_width",bottomWidthEl:undefined,headerInnerSel:".header_1280",switchBackButtonId:"switch_back_btn",isLoggedIn:false,headerHoverId:"header_hover",headerHoverEl:undefined,headerHoverOpacity:1,headerInactiveCls:"inactive",memberAppletFlashvars:"memberAppletFlashvars",getHeaderURL:undefined,chatPerformerPageId:"chat.performer",
indexPageId:"index.index",switchTooltipId:"switch_tooltip",rightSideSel:".right_side",innerContainerId:"inner_container",innerContainerEl:undefined,originalHeaderWidth:1145,headerTextMenuSel:".global_menu li a",headerTextMenuEl:undefined,selectedClass:"selected",categoryMenuButtonId:"category_menu",filterMenuButtonId:"filter_btn",headerContainerSel:"#header_container",activeBtnCls:"active_button",auctionLink:"auction_link",getCreditsLinkId:"get_credits",awardsLinkId:"awards_link",liveCamsId:"live_cams",
getCreditsMenuItemId:"menu_credits",loginButtonId:"login_button",signupButtonId:"signup_button",signupButtonSel:".signup",userMenuButtonId:"profilname",headerMenuBlockId:"header_myaccount_menu",accountSettingsMenuItemId:"menu_account",favoriteMenuItemId:"menu_favorites",messagesMenuItemId:"menu_messages",profileMenuItemId:"menu_profile",logoutButtonId:"menu_logout",logoutBlockId:"logout_confirmation",logoutConfirmButtonId:"logout_yes",logoutCancelButtonId:"logout_no",bonusCreditLogoutCls:"bonus_credit_logout",
overlayQuickBuyBlockId:"overlay_quickbuy",quickBuyPopupBoxHeaderSel:".popup_box_header",slidePanelContainerId:"slidepanel_lister_container",favoritesSelectButtonId:"favorites_select_button",overlayFirstBillBlockId:"overlay_firstbill",emailValidatedMessageId:"email_validated_message",overlayId:"overlay",overlayContainerId:"overlay_container",paymentRouterAjaxCallTimeout:5E3,_headerMenuPlugin:undefined,_headerInnerEl:undefined,_headerMask:undefined,_isHeaderInactive:false,_isCookieDisabled:false,_isFlashDisabled:false,
_isOutdatedBrowser:false,_firstBillOverlay:undefined,_firstBillActionParams:{},init:function(el,config){Chaos.addEvents(JSM.component.Header.TOPMEMBER_LOGIN,JSM.component.Header.GLOBALEVENT_HEADER_REFRESH,JSM.component.Header.GLOBALEVENT_HEADER_CLICK,JSM.component.Header.GLOBALEVENT_OVERLAY_QUICKBUY_TRANSACTION_SUCCESS,JSM.component.Header.GLOBALEVENT_OPEN_FAVORITES_FROM_MENU,JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER);if(!application.isLoggedIn()){this.loginButtonEl=Ext.get(this.loginButtonId);
this.signupButtonEl=Ext.get(this.signupButtonId)}else{this.favoritesMenuItem=Ext.get(this.favoriteMenuItemId);this.messagesMenuItemEl=Ext.get(this.messagesMenuItemId);this.accountSettingsMenuItemEl=Ext.get(this.accountSettingsMenuItemId)}this.headerTextMenuEl=this.element.select(this.headerTextMenuSel);JSM.component.Header.superclass.init.call(this,el,config);this.footerEl=Ext.get(this.footerId);this.bottomWidthEl=this.footerEl.child(this.bottomWidthSel),this._headerInnerEl=this.element.select(this.headerInnerSel).item(0);
this.innerContainerEl=Ext.get(this.innerContainerId);this.headerHoverEl=Ext.get(this.headerHoverId);this.slidePanelContainerEl=Ext.get(this.slidePanelContainerId);this._favoritesSelectButtonEl=Ext.get(this.favoritesSelectButtonId);this.emailValidatedMessageEl=Ext.get(this.emailValidatedMessageId);this.emailValidationTimeOut=5E3;this.emailValidationDelay=0.3;this.checkBrowserWidth();this.initSwitchTooltip();this.addPlugin("HeaderMenu-plugin",{});this._headerMenuPlugin=this.plugins["HeaderMenu-plugin"];
this._headerMenuPlugin.addDropDownStates([this.categoryMenuButtonId,this.filterMenuButtonId]);if(application.isLoggedIn())this._headerMenuPlugin.addDropDownStates([this.userMenuButtonId]);this._headerMenuPlugin.addDropDownStates(["overlay"]);if(this.emailValidatedMessageEl){var self=this,task=new Ext.util.DelayedTask(function(){self.hideEmailValidatedMessage()});task.delay(this.emailValidationTimeOut)}Chaos.Broadcaster.on(JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER,this.callPaymentRouter,
this)},initSwitchTooltip:function(){var backBtn=Ext.get(this.switchBackButtonId);if(backBtn){var rightSide=Ext.select(this.rightSideSel).item(0),rightWidth=application.isLoggedIn()?Ext.get(this.userMenuButtonId).getWidth():rightSide.select("ul").item(0).getWidth(),rightPos=backBtn.getWidth()/2-backBtn.getPadding("l")*2+rightWidth;if(!(this.switchTooltip instanceof Chaos.Window)){this.switchTooltip=new Chaos.Window(this.switchTooltipId,{overlay:false,isModal:false,top:40,hideDuration:0,toggleEventHandlersOnDisplay:false,
autoDestroy:false,autoDestroyElement:false});this.switchTooltip.element.setStyle("right",rightPos+"px")}else{this.switchTooltip.unbind();this.switchTooltip.element.remove();delete this.switchTooltip;this.initSwitchTooltip()}}},checkBrowserWidth:function(){if(JSM.Util.getBrowserWidth()<=this.originalHeaderWidth){this._headerInnerEl.addClass(this.smallHeaderClass);this.bottomWidthEl.addClass(this.smallBottomClass);this.headerTextMenuEl.item(0).setStyle("display","none")}else{this._headerInnerEl.removeClass(this.smallHeaderClass);
this.bottomWidthEl.removeClass(this.smallBottomClass);this.headerTextMenuEl.item(0).setStyle("display","inline")}},onWindowResize:function(){this.checkBrowserWidth()},refreshHeader:function(resp){if(!Chaos.Cookie.isCookieEnabled()){Chaos.Config.set("sessionId",resp.jsm2sessionId);var memberType=JSM.Util.UrlHelper.getMemberType(resp.jsm2sessionId),redirectUrl=JSM.Util.UrlHelper.insertMemberType(memberType,location.host)+"?session="+resp.jsm2sessionId+"#chat|"+resp.performerId;if(JSM.Util.isCurrentPage("chat.performer"))location.href=
JSM.Util.UrlHelper.refreshUrlSession(location.href);else location.href=location.protocol+"//"+redirectUrl}else{var isLoggedIn=application.isLoggedIn(),newState=isLoggedIn==true?false:true;Chaos.Config.set("isLoggedIn",newState);this.unbind();var topmemberStatus;Chaos.Ajax.request({scope:this,method:"GET",type:"json",url:Chaos.getUrl("ListPageAjax/GetHeaderProfileMenuBlock",{},{},"",""),success:function(data){var response=data.json,self=this;Chaos.Config.set("sessionIdJasmin1",response.sessionid);
Chaos.Config.set("sessionId",response.jsm2session);Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_HEADER_REFRESH,response);topmemberStatus=response.topmember;TweenMax.to(this.element.select(this.rightSideSel).item(0).dom,0.3,{css:{opacity:0},onComplete:function(){self.onHeaderFaceChange(response.content);self.bindElements()}});if(!JSM.Util.isCurrentPage(this.chatPerformerPageId)&&topmemberStatus==true)Chaos.fireEvent(JSM.component.Header.TOPMEMBER_LOGIN,this)},error:function(){}})}},onHeaderFaceChange:function(content){this._headerInnerEl.select(this.rightSideSel).item(0).remove();
Ext.DomHelper.append(this._headerInnerEl.dom,content);this.initSwitchTooltip();if(Ext.fly(this.switchBackButtonId))Ext.fly(this.switchBackButtonId).on("mouseenter",this.onShowSwitchTooltip,this).on("mouseleave",this.onHideSwitchTooltip,this);application.layout.setUserMenu();this._headerMenuPlugin.addDropDownStates([this.userMenuButtonId])},onHideSwitchTooltip:function(){this.showTooltipTask.cancel();if(this.switchTooltip.getVisible())this.switchTooltip.hide()},onShowSwitchTooltip:function(){var chatAppletId=
"chatapplet";this.showTooltipTask=new Ext.util.DelayedTask(function(){this.switchTooltip.show()},this);if(JSM.Util.isCurrentPage(this.chatPerformerPageId)){if(Ext.fly(chatAppletId).getWidth()<=1)this.showTooltipTask.delay(300)}else this.showTooltipTask.delay(300)},onHeaderMouseEnter:function(){if(!this._isHeaderInactive){var self=this;this.showHeaderHoverTask=new Ext.util.DelayedTask(function(){TweenMax.to(this.headerHoverEl.dom,0.3,{css:{opacity:self.headerHoverOpacity},ease:Elastic})},this);this.showHeaderHoverTask.delay(300)}},
onHeaderMouseLeave:function(){if(!this._isHeaderInactive&&this.showHeaderHoverTask){var self=this;this.showHeaderHoverTask.cancel();if(this.headerHoverEl.isVisible())TweenMax.to(this.headerHoverEl.dom,0.3,{css:{opacity:0},ease:Elastic})}},isTrackingClick:function(target){return target.id==this.getCreditsLinkId||target.id==this.awardsLinkId||target.id==this.loginButtonId||target.id==this.signupButtonId},onHeaderClick:function(ev,target){if(this.isTrackingClick(target))Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,
{linkId:target.id});if(target.id==this.liveCamsId)Chaos.getMeta("isSearchPage")=="0"?Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,{linkId:target.id,cookieTrack:false}):Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,{linkId:target.id,cookieTrack:true});if(target.id==this.loginButtonId||target.id==this.signupButtonId||target.id==this.getCreditsLinkId||target.id==this.getCreditsMenuItemId)this._headerMenuPlugin.refreshDropDownStates("overlay","opened");else this._headerMenuPlugin.refreshDropDownStates()},
onCategoryBtnClick:function(){this.categoryMenu.onButtonClick();this.categoryMenu.on("hide",this.categoryBtnOff,this)},categoryBtnOff:function(){this.getCmp("categoryBtn").setState(JSM.component.Button.STATE_OFF)},onUserBtnClick:function(){this.userMenu.onButtonClick();this.userMenu.on("hide",this.userMenuBtnOff,this)},userMenuBtnOff:function(){this.getCmp("userMenuBtn").setState(JSM.component.Button.STATE_OFF)},onFilterBtnClick:function(){this._headerMenuPlugin.refreshDropDownStates(this.filterMenuButtonId);
this.searchField.plugins.SearchFilter.onFilterBtnClick()},onLoginButtonClick:function(ev){if(!this._isFlashDisabled){ev.preventDefault();Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN,{scope:this,manageHistory:true})}},onSignupButtonClick:function(ev){if(!this._isFlashDisabled){ev.preventDefault();Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:true})}},onMenuItemClick:function(ev,object){switch(ev){case this.messagesMenuItemId:this.openOverlayMessages(true);
break;case this.favoriteMenuItemId:if(Ext.getBody().id=="index.index"||Ext.getBody().id=="awards.index")if(!this.slidePanelContainerEl.isVisible()||this._favoritesSelectButtonEl.hasClass(this.activeBtnCls))Chaos.fireEvent("open-favorites",this);else Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_OPEN_FAVORITES_FROM_MENU,this);break;case this.accountSettingsMenuItemId:this._headerMenuPlugin.refreshDropDownStates("overlay","opened");if(Ext.getBody().id=="index.index"||Ext.getBody().id=="awards.index")this.accountSettingsWindow=
new JSM.overlay.AccountSettings(this.overlayContainerId,{overlay:this.overlayId,xdomain:true});break;case this.profileMenuItemId:this._headerMenuPlugin.refreshDropDownStates("overlay","opened");this.memberProfileOverlay=new JSM.overlay.Profile(this.overlayContainerId,{overlay:this.overlayId});break;case this.logoutButtonId:if(this._logoutConfirmWindowEl instanceof JSM.window.Confirmation){this._logoutConfirmWindowEl.unbind();delete this._logoutConfirmWindowEl}this.userMenu.exitOnEsc=false;this._logoutConfirmWindowEl=
new JSM.window.Confirmation(this.logoutBlockId,{tplConfig:{confirmButtonId:this.logoutConfirmButtonId,cancelButtonId:this.logoutCancelButtonId},handleArrows:false,createConfirmWindow:false,confirmBlockId:this.logoutBlockId,isVisibleOnInit:true,redirectOnConfirm:true,setFocusToConfirm:false});if(JSM.Util.isCurrentPage("chat.performer"))this._logoutConfirmWindowEl.addPlugin("AppletResize",{});this._logoutConfirmWindowEl.on(JSM.window.Confirmation.EVENT_CONFIRM,this.onLogoutConfirmWindowConfirm,this);
this._logoutConfirmWindowEl.on(JSM.window.Confirmation.EVENT_CANCEL,this.onLogoutConfirmWindowCancel,this);break}},onLogoutConfirmWindowCancel:function(){this.userMenu.exitOnEsc=true;this._logoutConfirmWindowEl.hideConfirmWindow();this.userMenu.hideSubMenu(this.logoutButtonId);if(this._logoutConfirmWindowEl.element.hasClass(this.bonusCreditLogoutCls))window.location.href=Chaos.Config.get("getCreditsUrl")},onLogoutConfirmWindowConfirm:function(){Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,
{linkId:JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER_LOGOUT})},openOverlayMessages:function(manageScroll){this._headerMenuPlugin.refreshDropDownStates("overlay","opened");this.messagesOverlay=new JSM.overlay.Messages(this.overlayContainerId,{xdomain:false,manageScroll:manageScroll,overlay:"overlay",getContentRoute:"Messages/ThreadList",showContent:true,getContentUrl:Chaos.getUrl("Messages/ThreadList",{},{},"",""),newMessageURL:"Messages/NewMessage",conversationSupportURL:Chaos.getUrl("Messages/Conversation",
{threadId:0},{support:1},"",""),supportMessageURL:Chaos.getUrl("Messages/NewMessage",{},{support:1},"",""),conversationPagerURL:"Messages/Conversation",conversationSupportPagerURL:"Messages/Conversation",messageListPagerURL:"Messages/ThreadList"})},onSubMenuHide:function(){if(this.generalSettingsForm)this.generalSettingsForm.subMenuHide()},setHeaderInactive:function(){this.element.addClass(this.headerInactiveCls);if(!Chaos.isDefined(this._headerMask)){this._headerMask=new Chaos.Mask(Ext.getBody(),
{maskClass:"chaos-mask-private",message:"&nbsp",appendTo:this.headerContainerSel,duration:0.1,maskOpacity:0.2,insertionMethod:"append",defaultZindex:10005,maskPosition:"local",useDefaultZindex:true});this._headerMask.show()}this._isHeaderInactive=true},setHeaderActive:function(){this.element.removeClass(this.headerInactiveCls);if(Chaos.isDefined(this._headerMask)){this._headerMask.maskEl.remove();this._headerMask=undefined}this._isHeaderInactive=false},bindElements:function(){var operaVersion=window.opera?
window.opera.version():undefined,isOverlayEnabled=!JSM.Util.isCurrentPage("auth.loginmember")&&!JSM.Util.isCurrentPage("signup.signupmember")&&!JSM.Util.isCurrentPage("auth.forgotpassword")&&!JSM.Util.isCurrentPage("auth.checknewpassword")&&!JSM.Util.isCurrentPage("error.error500");if(!application.isLoggedIn()&&isOverlayEnabled)if(!Ext.isIE7&&operaVersion!="11.52"&&Chaos.Cookie.isCookieEnabled()){this.loginButtonEl.on("click",this.onLoginButtonClick,this);this.signupButtonEl.on("click",this.onSignupButtonClick,
this);Ext.select(this.signupButtonSel).on("click",this.onSignupButtonClick,this)}if(application.isLoggedIn()){Ext.get(this.getCreditsLinkId).on("click",this.onGetCreditsLinkClick,this);Ext.get(this.getCreditsMenuItemId).on("click",this.onGetCreditsLinkClick,this)}this.element.on("click",this.onHeaderClick,this).on("mouseenter",this.onHeaderMouseEnter,this).on("mouseleave",this.onHeaderMouseLeave,this)},onGetCreditsLinkClick:function(ev){ev.preventDefault();if(Chaos.Config.get("isPaymentRouterEnabled"))this.callPaymentRouter(ev,
false);else this.startQuickBuy()},callPaymentRouter:function(ev,reOpen){var urlParams=ev&&ev.postParams?ev.postParams:{},routerUrl=Chaos.getUrl("PaymentRouter/Router",{},urlParams);Chaos.Ajax.request({url:routerUrl,scope:this,type:"json",timeout:this.paymentRouterAjaxCallTimeout,success:function(response){this._callPaymentRouterSuccess(response,reOpen)},error:this._callPaymentRouterError,failure:this._callPaymentRouterError})},_callPaymentRouterSuccess:function(response,reOpen){var action=response.json.data.action,
HTMLcontent=response.json.data.content;switch(action){case JSM.component.Header.PAYMENT_ACTION_FIRSTBILL:this.startFirstBill(HTMLcontent,reOpen);break;case JSM.component.Header.PAYMENT_ACTION_QUICKBUY:this.startQuickBuy(undefined,undefined,HTMLcontent);break;case JSM.component.Header.PAYMENT_ACTION_REDIRECT:this._paymentRouterRedirect();default:break}},_callPaymentRouterError:function(response){location.href=Chaos.getUrl("Credit/Index")},startFirstBill:function(HTMLcontent,reOpen){if(!(this._firstBillOverlay instanceof
JSM.overlay.FirstBill)){this._firstBillOverlay=new JSM.overlay.FirstBill(this.overlayContainerId,{overlay:this.overlayId,autoDestroy:false,autoLoad:!reOpen,reOpen:reOpen||false,storedToken:this._firstBillActionParams.token,getContentViaAjax:false,windowTemplate:HTMLcontent,overlayBlockId:this.overlayFirstBillBlockId});if(JSM.Util.isCurrentPage("chat.performer"))this._firstBillOverlay.addPlugin("AppletResize",{useOverlay:false,events:{"show":"onHideApplet","hide":"onShowApplet"}})}else this._firstBillOverlay.showWindow(HTMLcontent);
return this._firstBillOverlay},_checkFirstBill:function(actionParams){this._firstBillActionParams=actionParams;this.callPaymentRouter({},true)},startQuickBuy:function(status,params,HTMLContent){var isChatPage=JSM.Util.isCurrentPage("chat.performer");if(!(this._quickBuyOverlay instanceof JSM.overlay.QuickBuy)){this._quickBuyOverlay=new JSM.overlay.QuickBuy(this.overlayContainerId,Chaos.Config.get("isPaymentRouterEnabled")?{reopenParams:params,autoLoad:true,getContentViaAjax:false,windowTemplate:HTMLContent,
status:status||JSM.overlay.QuickBuy.STATUS_NEW,overlay:this.overlayId,useMask:!isChatPage,isMinimizeEnabled:!isChatPage,xdomain:JSM.Util.isSecurePage(),additionBlockSel:this.quickBuyPopupBoxHeaderSel,overlayBlockId:this.overlayQuickBuyBlockId}:{reopenParams:params,mustGetContent:status==JSM.overlay.QuickBuy.STATUS_REOPEN?false:true,status:status||JSM.overlay.QuickBuy.STATUS_NEW,overlay:this.overlayId,useMask:!isChatPage,isMinimizeEnabled:!isChatPage,inProgressPageId:"transaction_process",successPageId:"transaction_success",
errorPageId:"transaction_failure",getContentUrl:Chaos.getUrl("QuickBuy/GetQuickBuyBlockFromHttps",{},{},""),xdomain:JSM.Util.isSecurePage(),scrollerBlockId:this.scrollerQuickBuyBlockId,scrollerContainerId:this.scrollerQuickBuyContainerId,scrollerContentId:this.scrollerQuickBuyContentId,additionBlockSel:this.quickBuyPopupBoxHeaderSel,overlayBlockId:this.overlayQuickBuyBlockId});Chaos.Broadcaster.on(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES,this._quickBuyOverlay.closeAll,this._quickBuyOverlay);
this._quickBuyOverlay.on(JSM.overlay.QuickBuy.EVENT_TRANSACTION_SUCCESS,this.onQuickBuyTransactionSuccess,this)}else if(!this._quickBuyOverlay.isPurchaseInProgress()){Chaos.Broadcaster.un(JSM.plugin.HeaderMenu.GLOBALEVENT_HEADER_DROPDOWN_STATES,this._quickBuyOverlay.closeAll,this._quickBuyOverlay);this._quickBuyOverlay.closeAll();this._quickBuyOverlay.unbind();delete this._quickBuyOverlay;this.startQuickBuy(status,params,HTMLContent)}return this._quickBuyOverlay},onQuickBuyTransactionSuccess:function(ev){Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_OVERLAY_QUICKBUY_TRANSACTION_SUCCESS,
{scope:this,ev:ev})},_paymentRouterRedirect:function(){location.href=Chaos.getUrl("Credit/Index",{},{redirect:1})},bind:function(){JSM.component.Header.superclass.bind.call(this);Ext.fly(window).on("resize",this.onWindowResize,this);Ext.getBody().on("click",this.hideEmailValidatedMessage,this);if(Ext.fly(this.switchBackButtonId))Ext.fly(this.switchBackButtonId).on("mouseenter",this.onShowSwitchTooltip,this).on("mouseleave",this.onHideSwitchTooltip,this);this.bindElements()},unbind:function(){JSM.component.Header.superclass.unbind.call(this);
Ext.fly(window).un("resize",this.onWindowResize,this);Ext.get(this.getCreditsLinkId).un("click",this.onGetCreditsLinkClick,this);this.element.un("click",this.onHeaderClick,this).un("mouseenter",this.onHeaderMouseEnter,this).un("mouseleave",this.onHeaderMouseLeave,this);if(Ext.fly(this.switchBackButtonId))Ext.fly(this.switchBackButtonId).un("mouseenter",this.onShowSwitchTooltip,this).un("mouseleave",this.onHideSwitchTooltip,this);if(this.userMenu)this.userMenu.un("hide",this.userMenuBtnOff,this);if(this.categoryMenu)this.categoryMenu.un("hide",
this.categoryBtnOff,this);if(this.loginButtonEl)this.loginButtonEl.un("click",this.onLoginButtonClick,this);if(this.signupButtonEl)this.signupButtonEl.un("click",this.onSignupButtonClick,this)},onCookiesDisabled:function(){this._isCookieDisabled=true;Chaos.Config.set(JSM.component.Header.CONFIG_IS_COOKIE_DISABLED,true)},hideEmailValidatedMessage:function(){if(this.emailValidatedMessageEl){var self=this;TweenLite.to(this.emailValidatedMessageEl.dom,this.emailValidationDelay,{alpha:0,onComplete:function(){self.emailValidatedMessageEl.remove();
self.emailValidatedMessageEl=undefined}})}},onFlashDisabled:function(){this._isFlashDisabled=true;Chaos.Config.set(JSM.component.Header.CONFIG_IS_FLASH_DISABLED,true)},onOutdatedBrowser:function(){this._isOutdatedBrowser=true;Chaos.Config.set(JSM.component.Header.CONFIG_IS_BROWSER_OUTDATED,true)}});Ext.namespace("JSM.layout");JSM.layout.Basic=function(el,config){JSM.layout.Basic.superclass.constructor.call(this,el,config)};JSM.layout.Basic.GLOBALEVENT_OPEN_SELECT_LIST="open-select-list";
JSM.layout.Basic.GLOBALEVENT_OPEN_TOGGLE_BOX="open-toggle-box";JSM.layout.Basic.GLOBALEVENT_OPEN_ACCORDION="open-accordion";JSM.layout.Basic.GLOBALEVENT_OPEN_FAVORITES="open-favorites";JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_CHAT="open-overlay-chat";JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN="open-overlay-login";JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP="open-overlay-signup";JSM.layout.Basic.GLOBALEVENT_METRO_VIEW="metro-view";
JSM.layout.Basic.GLOBALEVENT_CLICK_FAVORITE_BUTTON_IN_APPLET="click-favorite-button-in-applet";JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY="backconn-ready";JSM.layout.Basic.GLOBALEVENT_SET_SCROLL="set-scroll";JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED="all-static-loaded";
Chaos.extend(JSM.layout.Basic,Chaos.Layout,{questionBtnId:"questionnaire_btn",leftSideBtnContainerId:"left_side_btn_container",leftSideButtonSel:".left_side_btn",isTopmember:false,topWarningsMessageId:"top_warnings",disabledCookieMessageBlockId:"cookies_disabled",overlayContactUsId:"overlay_contactus",overlayContainerId:"overlay_container",overlayId:"overlay",chatId:"chatapplet",messageButtonId:"dropdown_menu_message",favoriteButtonId:"dropdown_menu_favorites",accountButtonId:"dropdown_menu_account",
settingButtonId:"dropdown_menu_general",generalSettingsBlockId:"general_settings_menu",sharedObjectValueName:"SOHash",sharedObjectUrlRoute:"Tracking/SaveSOHash",sharedObjectPostParam:"sohash",_userType:undefined,soAppletId:undefined,soAppletFlashvars:undefined,soAppletUrl:undefined,soAppletAttributes:undefined,soAppletParams:undefined,init:function(el,config){this.initSharedObject();var time=new Date;JSM.Util.console("info","speedTest",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+
time.getMilliseconds(),"-> Basic       : Layout INIT");Chaos.addEvents(JSM.layout.Basic.GLOBALEVENT_OPEN_FAVORITES,JSM.component.Header.TOPMEMBER_LOGIN,JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_CHAT,JSM.layout.Basic.GLOBALEVENT_METRO_VIEW,JSM.layout.Basic.GLOBALEVENT_CLICK_FAVORITE_BUTTON_IN_APPLET,JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY);JSM.Util.setGlobalMethods("favHandler",["onClickFavoriteButton"],this);window.setBackConnStatus=function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,
{scope:this})};if(JSM.Util.metroDetect("ShockwaveFlash.ShockwaveFlash")&&JSM.Util.metroDetect("htmlfile")){Ext.fly(this.leftSideBtnContainerId).dom.id=this.leftSideBtnContainerId+"_metro";this.leftSideBtnContainerId=this.leftSideBtnContainerId+"_metro"}this.noResultString=Chaos.translate("No result - try something else");this.isTopmember=Chaos.Config.get("isTopMember")==1?true:false;var headerGroup,isLoggedIn=application.isLoggedIn();Chaos.WinMgr.createGroup(JSM.component.Header.WINMGR_GROUP_ID);
headerGroup=Chaos.WinMgr.getGroup(JSM.component.Header.WINMGR_GROUP_ID);headerGroup.type=Chaos.WindowMgr.TYPE_MODAL;headerGroup.hideAllOnBodyClick=true;this.categoryBtn=new JSM.component.Button("category_menu",{offCls:"",onCls:"selected",defaultState:JSM.component.Button.STATE_OFF});this.filterBtn=new JSM.component.Button("filter_btn",{offCls:"",onCls:"selected",defaultState:JSM.component.Button.STATE_OFF});this.analytics=new JSM.component.GoogleAnalytics(Ext.getBody(),{});this.searchField=new JSM.component.SearchField("header_search_bar",
{doSubmitOnEnter:true,loaderId:"loader_anim",loaderClass:"loader_gif",loaderBlurClass:"loader_gif_blur",resetButtonClass:"reset_search_button",noResultString:Chaos.translate("No result - try something else"),noSuggestString:Chaos.translate("Search for"),plugins:{"SearchFilter":{autoLoad:false,filterBtnId:"filter_btn",searchId:"search",filterContId:"filter_container",searchMaskId:"search_mask",groupId:JSM.component.Header.WINMGR_GROUP_ID,noResultString:Chaos.translate("No Models with these selections. Try again with fewer options.")},
"ListPageBuilder":{}}});if(Chaos.Config.get("isAutoSuggestEnabled"))this.searchField.addPlugin("AutoSuggest",{categoryId:"category_type",delaying:500,autoSuggestId:"auto_suggest",loaderBlockClass:"search_btn",relBlockId:"search",appendToId:"search",listElement:"li",extendFieldNeeded:false,listItemHoverClass:"active_suggestion",noSuggestionClass:"no_suggestion",logNeeded:true,showSuggestion:!JSM.Util.isCurrentPage("chat.performer"),hideAutoSuggestList:JSM.Util.isCurrentPage("chat.performer"),minCharLength:2,
clickOnListElements:true,showNoResultOnError:false,firstMenuItemIndex:1});this.categoryMenu=new JSM.window.DropDownMenu("menu_category_dropdown",{showMode:"absolute",setArrowPosition:false,activeSel:"selected",elementId:"header",groupId:JSM.component.Header.WINMGR_GROUP_ID,buttonId:"category_menu",buttonCmp:this.categoryBtn,sideSel:".left_side",top:"36",items:{}});this.header=new JSM.component.Header("header",{smallHeaderClass:"header_1024",smallBottomClass:"bottom_width_1024",footerId:"footer",bottomWidthSel:".bottom_width",
selectedClass:"selected",switchBackButtonId:"switch_back_btn",headerHoverId:"header_hover",headerHoverOpacity:1,memberAppletFlashvars:"memberAppletFlashvars",chatPerformerPageId:"chat.performer",indexPageId:"index.index",switchTooltipId:"switch_tooltip",rightSideSel:".right_side",innerContainerId:"inner_container",headerButtonIds:["filter_btn","category_menu","profilname"],getHeaderURL:Chaos.getUrl("ListPageAjax/GetHeaderProfileMenuBlock",{},{},"",""),isLoggedIn:isLoggedIn,pageId:this.element.id,
items:{"Broadcaster":{component:Chaos.Broadcaster,listeners:{"cookies-disabled":"onCookiesDisabled","flash-disabled":"onFlashDisabled","outdated-browser":"onOutdatedBrowser"}},categoryMenu:{component:this.categoryMenu},categoryBtn:{component:this.categoryBtn,listeners:{"button-click":"onCategoryBtnClick"}},searchField:{component:this.searchField,listeners:{}},filterBtn:{component:this.filterBtn,listeners:{"button-click":"onFilterBtnClick"}}}});if(JSM.Util.isCurrentPage("chat.performer")){this.searchField.addPlugin("AppletResize",
{});this.categoryMenu.addPlugin("AppletResize",{})}this.footer=new JSM.component.Footer("footer",{items:{}});if(isLoggedIn==true)this.setUserMenu();this.warningMessage=new JSM.component.WarningMessages(this.topWarningsMessageId,{});Chaos.Application.getInstance().setLayout(this);JSM.layout.Basic.superclass.init.call(this,el,config);JSM.Session.checkUserSession({route:"ListPageAjax/CheckSession",delayTime:25*60*1E3});JSM.Session.setOldSessionCookie();this.setController();if(JSM.Util.metroDetect("ShockwaveFlash.ShockwaveFlash")&&
JSM.Util.metroDetect("htmlfile"))Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_METRO_VIEW,this);JSM.Util.logMetroUI();if(Chaos.Cookie.isCookieEnabled()===false)JSM.Util.setSessionIdOnLinks(Ext.getBody());if(!JSM.Util.isCurrentPage("index.index")&&!JSM.Util.isCurrentPage("awards.index")&&!JSM.Util.isCurrentPage("signup.signupmember")&&!JSM.Util.isCurrentPage("auth.loginmember"))this.basicController.createFreeChat();this.doUserInteractions();if(application.isLoggedIn()&&Chaos.Cookie.isCookieEnabled()&&
!JSM.Util.isCurrentPage("chat.performer"))JSM.component.StorageAction.registerAction({name:JSM.overlay.QuickBuy.ACTION_NAME,fn:function(params){layout.header.startQuickBuy(JSM.overlay.QuickBuy.STATUS_REOPEN,params)},scope:layout.header,removable:false,autoFire:false});if(application.isLoggedIn())JSM.component.StorageAction.registerAction({name:JSM.controller.FirstBillController.STORAGE_ACTION_NAME,fn:function(params){layout.header._checkFirstBill(params)},scope:layout.header,removable:false,autoFire:false});
this._userType=JSM.Session.getUserType();this._currentSessionId=JSM.Session.getSessionCookie()},initSharedObject:function(){if(Chaos.Config.get("soAppletId")){this.soAppletId=Chaos.Config.get("soAppletId");this.soAppletFlashvars=Chaos.Config.get("soAppletFlashVars");this.soAppletUrl=Chaos.Config.get("soAppletUrl");this.soAppletParams=Chaos.Config.get("soAppletParams");this.soAppletAttributes=Chaos.Config.get("soAppletAttributes");Ext.DomHelper.append(Ext.getBody(),{tag:"object",id:this.soAppletId});
var that=this;window.soHandlerInited=function(){that.doSoHandlerInit()};swfobject.embedSWF(this.soAppletUrl,this.soAppletId,"1","1","9.0.0","expressInstall.swf",this.soAppletFlashvars,this.soAppletParams,this.soAppletAttributes)}},doUserInteractions:function(){if(!JSM.Util.isCurrentPage("chat.performer")){if(Chaos.Storage.get("isShowProfileMenu",true)==true&&Ext.fly("profilname"))if(Ext.fly("profilname").dom.click)Ext.fly("profilname").dom.click();if(Chaos.Storage.get("isShowGeneralMenu",true)==true&&
Ext.fly("menu_general"))if(Ext.fly("menu_general").dom.click)Ext.fly("menu_general").dom.click()}},onClickFavoriteButton:function(ev){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_CLICK_FAVORITE_BUTTON_IN_APPLET,ev)},setController:function(){this.basicController=new JSM.controller.BasicController({init:function(){},items:{"Broadcaster":{component:Chaos.Broadcaster,listeners:{"application-error":"onApplicationError","session-expired":"onSessionExpired","open-overlay-login":"onOpenOverlayLogin","open-overlay-signup":"onOpenOverlaySignup",
"log-in":"onLogIn","signup-success":"onSignupSuccess","backconn-request":"onBackConnRequest","backconn-request-complete":"onBackConnRequestComplete","backconn-request-error":"onBackConnRequestError","overlay-open":"onOverlayOpen","overlay-close":"onOverlayClose","after-overlay-close":"onAfterOverlayClose","topmember-login":"onTopmemberLogin","memberapplet-embed":"onMemberAppletEmbed","memberapplet-ready":"onMemberAppletReady","open-overlay-chat":"onOpenOverlayChat","open-chat":"onOverlayChatOpened",
"close-chat":"onOverlayChatClosed","private-start":"onPrivateStart","private-end":"onPrivateEnd","header-refresh":"onHeaderRefresh","metro-view":"onMetroView","applet-show":"onAppletShow","filterwindow-show":"onFilterWindowShow","filterwindow-hide":"onFilterWindowHide","dropdown-slide-item-click":"onDropDownSlideItemClick","set-scroll":"onSetScroll","message-back-link-click":"onMessagesBackLinkClick","header-dropdown-states":"onHeaderDropDownStates","all-static-loaded":"onAllStaticLoaded","open-select-list":"onSelectListOpen",
"open-toggle-box":"onToggleBoxOpen","open-accordion":"onAccordionOpen","window-hide":"onWindowHide","thumbnail-click":"onThumbnailClick"}},"Header":{component:this.header,listeners:{}},"Footer":{component:this.footer,listeners:{}}}});this.googleAnalyticsController=new JSM.controller.GoogleAnalyticsController({init:function(){},items:{"IndexBroadcaster":{component:Chaos.Broadcaster,listeners:{"log-in":"onLogIn","open-chat":"onChatOpen","private-start":"onPrivateStart","private-end":"onPrivateEnd",
"filter-search":"onFilterSearch","search":"onSearch","purchase-failed":"onPurchaseFailed","purchase-success":"onPurchaseSuccess","listpage-banner-click":"onBannerClick","header-click":"onHeaderLinkClick","footer-click":"onFooterLinkClick","favorites-click":"onFavoritesClick","auction-click":"onAuctionClick","sorter-click":"onSorterClick","standalone-chat":"onFreechatStandalone"}},"GoogleAnalytics":{component:this.analytics,listeners:{}}}});this._autoSuggestController=new JSM.controller.AutoSuggestController({init:function(){},
items:{"Broadcaster":{component:Chaos.Broadcaster,listeners:{"window-show":"onWindowShow","slidepanel-open":"onSlidePanelOpen"}},"BasicController":{component:this.basicController,listeners:{}},"SearchField":{component:this.searchField,listeners:{"autosuggest-name-selection":"onAutoSuggestNameSelection","autosuggest-presearch-success":"onAutoSuggestPresearchSuccess","autosuggest-show":"onAutoSuggestShow","autosuggest-esc-press":"onAutoSuggestEscPress","autosuggest-delete-button-click":"onAutoSuggestDeleteButtonClick"}}}})},
setUserMenu:function(){this.userMenuBtn=new JSM.component.Button("profilname",{offCls:"",onCls:"selected",defaultState:JSM.component.Button.STATE_OFF});this.userMenu=new JSM.window.DropDownMenu("submenu_dropdown",{showMode:"absolute",activeSel:"selected",groupId:JSM.component.Header.WINMGR_GROUP_ID,buttonId:"profilname",sideSel:".right_side",top:"26",left:"0"});if(JSM.Util.isCurrentPage("chat.performer"))this.userMenu.addPlugin("AppletResize",{});this.generalSettingsDropDown=new JSM.window.DropDownMenuForm(this.generalSettingsBlockId,
{ajaxUrl:Chaos.getUrl("Setting/SaveGeneralSettings",{},{},"",false),groupId:"subMenu"});this.header.addComponent({component:this.generalSettingsDropDown,listeners:{}},"generalSettingsForm");this.header.addComponent({component:this.userMenu,listeners:{"hide-submenu":"onSubMenuHide","menu-item-click":"onMenuItemClick"}},"userMenu");this.header.addComponent({component:this.userMenuBtn,listeners:{"button-click":"onUserBtnClick"}},"userMenuBtn")},onFocus:function(){var languageCookie=Chaos.Config.get("langJasmin2Cookie"),
currentLanguage=Chaos.I18n.getInstance().language;if(Chaos.Cookie.isCookieEnabled()&&currentLanguage!=Chaos.Cookie.get(languageCookie))window.location.reload();if(this._userType!=JSM.Session.getUserType()||this._currentSessionId!=JSM.Session.getSessionCookie()&&this._userType==JSM.Session.getUserType()){var _unloadMask=new Chaos.Mask(this.element,{isVisibleMask:true,maskOpacity:0.3,useCursor:true,insertionMethod:"append",top:0,useDefaultZindex:true,defaultZindex:1E4,position:"fixed"});_unloadMask.show();
window.location.reload()}},onBlur:function(){if(JSM.Util.isCurrentPage("chat.performer"))Ext.fly(this.chatId).blur()},onLoggedIn:function(){this._userType=JSM.Session.getUserType();this._currentSessionId=JSM.Session.getSessionCookie()},onSignUpSuccess:function(){this._userType=JSM.Session.getUserType();this._currentSessionId=JSM.Session.getSessionCookie()},doSoHandlerInit:function(){var tppApplet=Chaos.getFlashMovieObject(this.soAppletId);var id=tppApplet.getValue(this.sharedObjectValueName);Chaos.Ajax.request({url:Chaos.getUrl(this.sharedObjectUrlRoute),
params:this.sharedObjectPostParam+"="+id,method:"post",errorLog:false,success:function(){},error:function(response){},failure:function(response){}})},bind:function(){JSM.layout.Basic.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);Chaos.Broadcaster.on(JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS,this.onSignUpSuccess,this);if(Ext.isIE7||Ext.isIE8){Ext.fly(document).on("focusin",this.onFocus,this);Ext.fly(document).on("focusout",
this.onBlur,this)}else{Ext.fly(window).on("focus",this.onFocus,this);Ext.fly(window).on("blur",this.onBlur,this)}},unbind:function(){JSM.layout.Basic.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);Chaos.Broadcaster.un(JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS,this.onSignUp,this);if(Ext.isIE7||Ext.isIE8){Ext.fly(document).un("focusin",this.onFocus,this);Ext.fly(document).un("focusout",this.onBlur,this)}else{Ext.fly(window).un("focus",
this.onFocus,this);Ext.fly(window).un("blur",this.onBlur,this)}}});Ext.namespace("JSM.page");Ext.namespace("JSM.page.auth");Ext.namespace("JSM.page.auth.checknewpassword");JSM.page.auth.checknewpassword=function(el,config){JSM.page.auth.checknewpassword.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.auth.checknewpassword,Chaos.Page,{name:"page.auth.checknewpassword",url:"",layout:null,init:function(el,config){JSM.page.auth.checknewpassword.superclass.init.call(this,el,config);var setPassForm=new JSM.form.Form("setPassForm",{scope:this,maskMode:"disabled",isAjax:false,disableSubmitOnSubmit:true,error:this.displaySubmitErrorMsg,success:this.customCallback,rules:{}})},customCallback:function(formId,response){var from=formId.replace("_form","");Ext.get(from+"_saved").setStyle("display",
"block");Ext.select(".warning_tag").setStyle("display","none")},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},bind:function(){JSM.page.auth.checknewpassword.superclass.bind.call(this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.auth.checknewpassword.superclass.unbind.call(this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page.auth.forgotpassword");
JSM.page.auth.forgotpassword=function(el,config){JSM.page.auth.forgotpassword.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.auth.forgotpassword,Chaos.Page,{name:"page.auth.forgotpassword",formId:"forgotPassForm",usernameInputId:"username",emailId:"email",maxEmailCharLimitNumber:255,maxCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",captchaImgId:"captchaimg",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",_forgotPassForm:undefined,init:function(el,config){JSM.page.auth.forgotpassword.superclass.init.call(this,el,config);this.hintContainerEl=
Ext.get(this.hintContainerId);this._forgotPassForm=new JSM.form.Form(this.formId,{scope:this,maskMode:"disabled",isAjax:false,disableSubmitOnSubmit:true,hasCaptcha:true,captchaConfig:{containerId:"forgotpass_captcha",captchaImg:"captchaimg",captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:"captcha"},error:this.displaySubmitErrorMsg,success:this.customCallback});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,
{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.usernameInputId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._emailCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxEmailCharLimitNumber,hasWarningLimit:false,inputId:this.emailId,isShowCounter:false,charInfoId:this.hintContainerId,
isMaxCharSound:true});this._emailCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this);this.captchaBlockEl=Ext.get(this.captchaBlockId);this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,hasWarningLimit:false,inputId:this.captchaInputId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxCaptchaCharLimitReached,this);this._forgotPassForm.on("showCaptcha",this.onShowCaptcha);Ext.fly(this.usernameInputId).focus()},customCallback:function(formId,response){var from=formId.replace("_form","");Ext.get(from+"_saved").setStyle("display","block");Ext.get("forgotpass_captcha").setStyle("display","none");Ext.select(".error_message").setStyle("display","none");Ext.select(".warning_tag").setStyle("display","none");Ext.get("captcha_box").removeClass("captcha_bg");this._forgotPassForm.resetForm()},
onShowCaptcha:function(){Ext.get("captcha_box").addClass("captcha_bg")},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.usernameInputId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxEmailCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.emailId);this.hintContainerEl.show();
this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.captchaInputId);this.hintContainerEl.show();this.hintContainerEl.addClass(this.captchaHintCls);this.hintCmp.setPosition(2*this.captchaInputEl.getWidth(),5,this.captchaInputId)},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,
autoDestroyElement:false})},bind:function(){JSM.page.auth.forgotpassword.superclass.bind.call(this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.auth.forgotpassword.superclass.unbind.call(this);this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._emailCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this);this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxCaptchaCharLimitReached,this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page");Ext.namespace("JSM.page.auth");Ext.namespace("JSM.page.auth.loginmember");JSM.page.auth.loginmember=function(el,config){JSM.page.auth.loginmember.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.auth.loginmember,Chaos.Page,{name:"page.auth.loginmember",layout:null,warningTagClass:".warning_tag",formId:"login_form",usernameInputId:"username",passwordId:"password",usernameInputEl:undefined,loginButtonId:"login_submit",loginButtonEl:undefined,maxCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",captchaImgId:"captchaimg",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",_loginForm:undefined,init:function(el,config){this.usernameInputEl=
Ext.get(this.usernameInputId);this.loginButtonEl=Ext.get(this.loginButtonId);this.hintContainerEl=Ext.get(this.hintContainerId);this._loginForm=new JSM.form.Form(this.formId,{scope:this,maskMode:"disabled",isAjax:false,disableSubmitOnSubmit:true,hasCaptcha:true,captchaConfig:{containerId:this.captchaBlockId,captchaImg:this.captchaImgId,captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:this.captchaInputId},rules:{},checkBoxItems:{checkBoxReplacement_keepmeloggedin:{hiddenInputId:"keepmeloggedin",
activeClass:"active",onCheckedValue:"1",unCheckedValue:"0"}}});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.usernameInputId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,
{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.passwordId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._passwordCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);this.captchaBlockEl=Ext.get(this.captchaBlockId);this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,
hasWarningLimit:false,inputId:this.captchaInputId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);if(this.usernameInputEl.dom.value=="")this.usernameInputEl.focus();JSM.page.auth.loginmember.superclass.init.call(this,el,config)},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();
this._loginForm.showHint(this.usernameInputId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxPasswordCharLimitReached:function(){this.maxCharLimitReached();this._loginForm.showHint(this.passwordId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._loginForm.showHint(this.captchaInputEl);this.hintContainerEl.show();this.hintContainerEl.addClass(this.captchaHintCls);
this.hintCmp.setPosition(2*this.captchaInputEl.getWidth(),5,this.captchaInputId)},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},bind:function(){JSM.page.auth.loginmember.superclass.bind.call(this);Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.auth.loginmember.superclass.unbind.call(this);this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.page.awards");JSM.page.awards.index=function(el,config){JSM.page.awards.index.superclass.constructor.call(this,el,config)};
JSM.page.awards.index.GLOBALEVENT_THUMBNAIL_CLICK="thumbnail-click";JSM.page.awards.index.GLOBALEVENT_OVERLAY_CLOSE="overlay-close";JSM.page.awards.index.GLOBALEVENT_DO_INIT_LISTPAGE="do-init-listpage";
Chaos.extend(JSM.page.awards.index,Chaos.Page,{name:"AwardsPage",_carouselGalleryCmp:undefined,_carouselGalleryController:undefined,_layoutManager:undefined,carouselContainerId:"awards_carousel",_detailsEl:undefined,_smallItemSel:".small",_openEl:undefined,_smallItemStartPos:"-50px",_smallItemEndPos:"0px",_detailsSel:".details",_voteEl:undefined,_loadingVoteClass:"loading loader_button",_votedPerformerId:undefined,_votedPerformerPid:undefined,_votePlace:undefined,_votedIsVoted:undefined,_containerIdPrefix:"container_",
_carousel_containerIdPrefix:"carousel_container_",_dataIdSel:"data-performer-id",_dataVotePlace:"data-vote-place",_dataPidSel:"data-performer-pid",_dataIsVotedSel:"data-is-voted",_realStatusSel:"data-real-status",_pointsSel:".points .num",_addedPointsBubbleSel:".added_points_bubble",_isVoteTypeSmall:false,_voteMessageWrapperSel:".vote_message_wrapper",_voteMessageWrapperClass:"vote_message_wrapper",_timerComponent:undefined,_sortButtonId:"awards_sort",_countdownButtonId:"awards_time",_floatingButtonHoverClass:"hover",
_floatingButtonOpenClass:"open",_floatingButtonSel:".floating_button",_floatingButtonEl:undefined,_countdownIconId:"awards_countdown_title",_countdownHolderId:"awards_countdown_title_text",_voteButtonSel:".performer .vote",_onScrollTask:undefined,_floatingButtonHolderId:"awards_floating_buttons",_floatingButtonHolderEl:undefined,_sendVoteRoute:"Awards/Vote",_sendVoteUrl:undefined,_lazyLoadPluginInstance:undefined,_privateStarterButtonSel:".first_button.private",_templateMessageOverlayBigPrivate:".message.overlay.big.private",
_templateMessageOverlayBigBuyCredits:".message.overlay.big.buycredits",_templateMessageOverlayBigNoMoreSteps:".message.overlay.big.nomoresteps",_templateMessageOverlayBigPrivateOffline:".message.overlay.big.private.offline",_templateMessageOverlayBigJoin:".message.overlay.big.join",_templateMessageBigThankYou:".message.big.thank_you",_templateMessageOverlaySmallPrivate:".message.overlay.small.private",_templateMessageOverlaySmallNoMoreSteps:".message.overlay.small.nomoresteps",_templateMessageOverlaySmallBuyCredits:".message.overlay.small.buycredits",
_templateMessageOverlaySmallPrivateOffline:".message.overlay.small.private.offline",_templateMessageOverlaySmallJoin:".message.overlay.small.join",_templatePointsBubble:'<span class="added_points_bubble">{points}</span>',_awardsContainerId:"awards_container",_awardsInnerId:"awards_performers",_statusEl:undefined,_statusSel:".status",_awardsPlayer:undefined,_linkTooltipSel:".awards_link_tooltip",_linkTooltipTitleSel:"data-title",_innerHoverSel:".inner.allow_hover",perflinkSel:".perf_link ",slidePanelContainerId:"slidepanel_lister_container",
favoritesSelectButtonId:"favorites_select_button",activeSel:".active",titleSel:".title",menuItemClickDuration:0.3,carouselPrivateBtnSel:".private",_awardsController:undefined,awardsListPageId:"awards_background",_awardsListPageEl:undefined,_awardsListPageCmp:undefined,_awardsCntEl:undefined,awardsMenuContainerId:"awards_navigation",awardsMenuItemSel:"#awards_navigation a",_awardsPlayerTask:undefined,_carouselVoteButton:undefined,carouselVoteButtonSel:".vote_btn",archiveBtnCtSel:".archive",archiveBtnCls:"archivebtn",
archiveBtnSel:".archivebtn",_archiveBtnEl:undefined,archiveSubMenuSel:".archive_sub_menu",_archiveSubMenuEl:undefined,_isArchiveSubMenuOpen:false,_isSmallExists:false,_isBigExists:false,_isArchive:false,alreadyVotedCls:"voted",_comingSoonCloseDelay:null,init:function(el,config){TweenMax.to(Ext.get(this.awardsMenuContainerId).dom,1,{autoAlpha:1});Chaos.Broadcaster.on(JSM.component.CarouselGallery.CAROUSELGALLERY_FIRST_IMAGE_LOADED,this.onCarouselAnimationFinished,this);this.initCarousel();this._awardsListPageEl=
Ext.get(this.awardsListPageId);this._awardsListPageCmp=new JSM.component.AwardsListPage("awards_container",{contentId:"awards_",showMoreBtnId:"show_more_btn",plugins:{"Favorites-plugin":{containerSel:"container_"}}});this.setAwardsStatusUpdater();this.initAwardsLister();this.setAwardsController();this.initLazyLoad();this.prepareTemplates();this._timerComponent=new JSM.component.Countdown(Ext.get(this._countdownHolderId),{template:"Remaining time: [{w}w ][{d}d ][{h}h ][{m}m ][{s}s ]"});this._isArchive=
Ext.get(this._awardsContainerId).hasClass("archive");this.memberAppletUrl=Chaos.Config.get(Ext.isIE11?"memberAppletUrl":"memberAppletContainerUrl");this.memberAppletLibraryUrl=Chaos.Config.get("memberAppletLibraryUrl");this.memberAppletFlashvars=Chaos.Config.get("memberAppletFlashvars");this.memberAppletFlashvarsQS=Chaos.Config.get("memberAppletFlashvarsQS");this.memberAppletParams=Chaos.Config.get("memberAppletParams");this.memberAppletAttributes=Chaos.Config.get("memberAppletAttributes");swfobject.embedSWF(this.memberAppletUrl,
"chatapplet","1","1","9.0.0","expressInstall.swf",this.memberAppletFlashvars,this.memberAppletParams,this.memberAppletAttributes);layout.basicController.createFreeChat();Chaos.addEvents(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW,JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY,JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_TEASER_LEFT,
JSM.layout.Basic.GLOBALEVENT_OPEN_FAVORITES,JSM.page.awards.index.GLOBALEVENT_THUMBNAIL_CLICK,JSM.page.awards.index.GLOBALEVENT_OVERLAY_CLOSE,JSM.page.awards.index.GLOBALEVENT_DO_INIT_LISTPAGE);Chaos.Broadcaster.on(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,this.onBackConnReady,this);this._resizeParams={layoutMode:undefined,width:0,height:0};this.getMouseButton=JSM.Util.getMouseButton;this._archiveBtnEl=Ext.get(el).select(this.archiveBtnSel).item(0);this._archiveSubMenuEl=Ext.get(el).select(this.archiveSubMenuSel).item(0);
this.setFavoriteSlideButton();this.setSlidePanelListerController();this.searchAndDestroyToolbar();JSM.page.awards.index.superclass.init.call(this,el,config)},initLazyLoad:function(){this._lazyLoadPluginInstance=new JSM.plugin.LazyLoad({triggerOffset:400});this._lazyLoadPluginInstance.init(this)},hideCarouselVoteBtn:function(el){el.select(this.carouselVoteButtonSel).item(0).addClass("hidden");el.select(".is_offline").item(0).removeClass("hidden")},showCarouselVoteBtn:function(el){el.select(this.carouselVoteButtonSel).item(0).removeClass("hidden");
el.select(".is_offline").item(0).addClass("hidden");var smallEl=Ext.get(this._containerIdPrefix+el.dom.id.split("_")[2]);if(smallEl){var smallElIsOffline=smallEl.select(".is_offline").item(0);if(smallElIsOffline)smallElIsOffline.addClass("hidden")}},checkCarouselPerfStatuses:function(obj){var performerStatuses=Ext.decode(obj);for(var perfId in performerStatuses)if(performerStatuses.hasOwnProperty(perfId)){var carouselPerfBox=Ext.get(this.carouselContainerId).select("li .perf_"+perfId).item(0),perfStatusId=
performerStatuses[perfId];if(carouselPerfBox)switch(perfStatusId){case 0:this.hideCarouselVoteBtn(carouselPerfBox);break;default:case 1:case 2:case 3:this.showCarouselVoteBtn(carouselPerfBox)}}},initCarousel:function(){var el=Ext.get(this.carouselContainerId);if(el){this._carouselGalleryCmp=new JSM.component.CarouselGallery(el,{});this._carouselGalleryController=new JSM.controller.CarouselGalleryController({items:{"CarouselGallery":{component:this._carouselGalleryCmp,listeners:{"carouselgallery-activethumb-mouseleave":"onCarouselActiveThumbMouseLeave",
"carouselgallery-nav-next":"onCarouselNextClick","carouselgallery-nav-prev":"onCarouselPrevClick"}}}})}},onCarouselVoteBtnClick:function(ev){this.onVoteClick(ev.event,ev.element)},searchAndDestroyToolbar:function(){if(Ext.select(".apn-toolbar").item(0)){Ext.select("html").item(0).addClass("ask_killer");Ext.select(".apn-toolbar").item(0).remove()}},setAwardsStatusUpdater:function(){this.awardsStatusUpdater=new JSM.component.AwardsStatusUpdater(this._awardsContainerId,{});var self=this;window.backConn=
{};window.backConn.statusHandler=function(obj){self.awardsStatusUpdater.getNewStatuses(obj);self.checkCarouselPerfStatuses(obj)}},setFavoriteSlideButton:function(){this.slideButtonFavorite=new JSM.component.SlideButton("favorite_button",{slideButtonIconCls:"fav_btn_icon",slideButtonTitleSel:"fav_btn_title",showLoading:true,changeTitles:true})},setSlidePanelListerController:function(){this._slidePanelListerController=new JSM.controller.SlidePanelListerController({init:function(){},items:{"ListPage":{component:this._awardsListPageCmp},
"IndexBroadcaster":{component:Chaos.Broadcaster,listeners:{"logged-in":"onLoggedIn","signup-success":"onSignupSuccess","open-favorites":"onOpenFavorites","favorites-select-button-click":"onFavoritesSelectButtonClick","overlay-open":"onOverlayOpen","overlay-close":"onOverlayClose"}},SlideButtonFavorite:{component:this.slideButtonFavorite,listeners:{"slidebutton-clicked":"onFavoriteButtonClick","slidebutton-mouse-over":"onFavoriteSlideButtonMouseOver","slidebutton-mouse-out":"onFavoriteSlideButtonMouseOut"}}}})},
sendVoteRequest:function(){this._sendVoteUrl=Chaos.getUrl(this._sendVoteRoute,{performerId:this._votedPerformerId},{votePlace:this._votePlace},"");var xhr=Chaos.Ajax.request({url:this._sendVoteUrl,method:"GET",type:"json",success:this.onVoteRequestSuccess,scope:this})},showBigMessageAfterVote:function(data){var _temp;var activeSlide=Ext.get(this.carouselContainerId).select("li .perf_"+data.perfID).item(0);var activePerformerBox=Ext.get(activeSlide.select(".performerBox").item(0));var parentVoteBtn=
activeSlide.select(".vote_btn").item(0);var self=this;if(data.isOffline)_temp=this._templateMessageBigThankYou;else if(data.response.nextStep=="buyCredit")_temp=this._templateMessageOverlayBigBuyCredits;else if(data.response.nextStep=="alreadyVoted")_temp=this._templateMessageOverlayBigNoMoreSteps;else _temp=this._templateMessageOverlayBigPrivate;_temp.insertAfter(data.bigVoteEl,{points:data.points,morePoints:data.response.nextAvailablePoints,plural:data.points>1?" plural":""});if(parentVoteBtn)TweenLite.to(parentVoteBtn.dom,
0.2,{css:{opacity:0},onComplete:function(){data.bigVoteEl.remove();self.animateSliderVoteClick(activeSlide.dom.id)}})},showSmallMessageAfterVote:function(data){var el=data.smallVoteEl;if(!el)return;this.awardsStatusUpdater.hideStatus(Ext.get(el.findParent(".performer",200)),false);var showOverlay=new Ext.util.DelayedTask(function(){var e=Ext.get(data.containerID);if(!e){this.allowVote();return}e=e.select(".inner").item(0);if(data.response.nextStep=="buyCredit")this._templateMessageOverlaySmallBuyCredits.append(e,
{points:data.points});else if(data.response.nextStep=="alreadyVoted")this._templateMessageOverlaySmallNoMoreSteps.append(e,{points:data.points});else this._templateMessageOverlaySmallPrivate.append(e,{points:data.points,morePoints:data.response.nextAvailablePoints,plural:data.points>1?" plural":""});var voteEl=Ext.get(data.containerID).select(".vote_message_wrapper").item(0);var voteElDom=voteEl.dom;var text=voteEl.select(".text").item(0).dom;var title=voteEl.select(this.titleSel).item(0).dom;var link=
data.response.isOffline?voteEl.select(".middle").item(0).dom:voteEl.select("a").item(0).dom;TweenMax.to(voteElDom,0.2,{css:{opacity:1},onComplete:function(){TweenMax.fromTo(text,0.2,{css:{bottom:"-20px",opacity:0}},{delay:0.2,css:{opacity:1,bottom:0}});TweenMax.fromTo(title,0.2,{css:{top:"-20px",opacity:0}},{css:{opacity:1,top:0}});TweenMax.fromTo(link,0.4,{css:{opacity:0}},{css:{opacity:1}})}});this.onSmallItemMouseLeave();data.smallVoteEl.remove()},this);showOverlay.delay(this._voteEl.hasClass("small")?
2E3:0)},onVoteRequestSuccess:function(response){var json=response.json;if(!json.success||!json.data||!json.data.success){this.onVoteRequestError(response);return false}var dataParams={};dataParams.response=json.data;dataParams.overlayTemplate="_templateMessageOverlay"+dataParams.overlayTemplateSize+dataParams.overlayTemplateType+dataParams.overlayStatus;dataParams.containerID=this._containerIdPrefix+this._votedPerformerId;dataParams.perfID=this._votedPerformerId;dataParams.points=parseInt(json.data.addedPoints);
if(this._isArchive)this._isBigExists=false;else if(this._isBigExists.elements.length<=0)this._isBigExists=false;dataParams.bigVoteEl=this._isBigExists?Ext.get(this.carouselContainerId).select("li .perf_"+this._votedPerformerId).item(0).select(this.carouselVoteButtonSel).item(0):null;dataParams.smallVoteEl=this._isSmallExists?Ext.get(dataParams.containerID).select(".vote").item(0):null;if(this._isSmallExists){this.addPoints(dataParams.points,"container_",false);this.showSmallMessageAfterVote(dataParams)}if(this._isBigExists){if(!this._isArchive)this.addPoints(dataParams.points,
"perf_",true);this.showBigMessageAfterVote(dataParams)}this.allowVote()},allowVote:function(){this._voteEl=undefined;this._votedPerformerId=undefined;this._votedPerformerPid=undefined;this._votePlace=undefined},onVoteRequestError:function(response){var json=response.json;if(!json.data.success)switch(json.data.error){case "offline":this.awardsStatusUpdater.disableVote(this._voteEl,this._votedPerformerId);break}else this.onSmallItemMouseLeave();this.allowVote()},addPoints:function(add,containerID,isClass){var steps=
add<100?50:100,step=Math.floor(add/steps);if(isClass)pointsEl=Ext.get(this.carouselContainerId).select("li .perf_"+this._votedPerformerId).item(0).select(this._pointsSel).item(0);else pointsEl=Ext.get(containerID+this._votedPerformerId).select(this._pointsSel).item(0);var currentTotal=parseInt(pointsEl.dom.innerHTML.replace(",","")),newTotal=currentTotal+add,bubbleEl=undefined,counterInterval=10;var formatNumber=function(nStr){nStr+="";var x=nStr.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;
while(rgx.test(x1))x1=x1.replace(rgx,"$1"+","+"$2");return x1+x2};this._templatePointsBubble.append(pointsEl.parent(),{points:"+"+formatNumber(add)});bubbleEl=pointsEl.parent().select(this._addedPointsBubbleSel).item(0);var runner=new Ext.util.TaskRunner;var i=0;var addTask={run:function(){currentTotal+=step;pointsEl.dom.innerHTML=formatNumber(currentTotal);i++;if(i>=steps){if(currentTotal<newTotal)pointsEl.dom.innerHTML=formatNumber(newTotal);runner.stop(addTask)}},interval:counterInterval};runner.start(addTask);
TweenMax.to(bubbleEl.dom,counterInterval*steps/500,{css:{opacity:0,top:"-30px"},easeOut:Circ,onComplete:function(){bubbleEl.remove()}})},stopLoadingButton:function(){this._voteEl.removeClass(this._loadingVoteClass).setStyle({width:"auto",height:"auto"})},initAwardsPlayer:function(){this._awardsPlayer=new JSM.component.ListPagePlayer(this._awardsInnerId,{flashPlayerConfig:{appendToId:"listpage_player",objectId:"AwardsPlayer",objectName:"AwardsPlayer",url:Chaos.Config.get("listPagePlayerUrl"),flashVars:Chaos.Config.get("listPagePlayerFlashVars")},
useBodyOffsetTop:false,autoPlayerNeeded:false,perfContainerSel:"innercontainer_",perfLinkSel:"performer_",perfImgSel:"perfimg_",defaultZIndex:900,isRandomPlayerEnabled:false,plugins:{"BackConn-plugin":{globalObjectId:"awardsBackConnParams",globalMethods:["setListPagePlayerParams","startFlashStream"]}}})},initAwardsLister:function(){if(!(this.awardsLister instanceof JSM.component.AwardsLister)){this.awardsLister=new JSM.component.AwardsLister("awards_container",{contentId:"awards_",nextContentUrl:"Awards/OnlineListMore",
nextContentRouteParams:{listId:function(){return Chaos.getMeta("awardsListId")}},prevContentUrl:"Awards/OnlineListPrevious",prevContentRouteParams:{listId:function(){return Chaos.getMeta("awardsListId")}},loaderCls:"loader",showMoreBtnId:"show_more_btn",showMoreBtnContainerSel:".button_container",extraShowMoreEnabled:true,buildFromJSONData:true,plugins:{"ListPageBuilder":{boxTemplate:{}}}});this.awardsLister.on(JSM.component.AwardsLister.INSERT_DOWN_DONE,this.onShowMoreBlockInserted,this);this.awardsLister.on(JSM.component.AwardsLister.INSERT_UP_DONE,
this.onShowMoreBlockInserted,this);if(this._awardsController){this._awardsController.removeComponent("AwardsLister");this._awardsController.addComponent({component:this.awardsLister,listeners:{"insert-down-done":"onListerInsertedContentDown","insert-up-done":"onListerInsertedContentUp","remove-block":"onListerRemoveBlock","show-more-error":"showMoreError"}},"AwardsLister");this._awardsController.removeComponent("AwardsListPage");this._awardsController.addComponent({component:this._awardsListPageCmp,
listeners:{"thumb-mousedown":"onListPageThumbMouseDown","thumb-ctrl-mousedown":"onListPageThumbCtrlMouseDown","thumb-right-mousedown":"onListPageThumbRightMouseDown","thumb-mouseover":"onListPageThumbMouseOver","thumb-mouseout":"onListPageThumbMouseOut","body-keypress":"onListPageKeyPress","body-keyup":"onListPageKeyUp","body-keydown":"onListPageKeyDown","body-esc-keydown":"onListPageEscKeyDown","body-esc-keyup":"onListPageEscKeyUp","body-esc-keypress":"onListPageEscKeyPress","body-mouseout":"onBodyMouseOut",
"body-click":"onBodyClick","favorite-button-mousedown":"onAddFavoriteButtonMouseDown","favorite-button-update":"onListPageFavoriteButtonUpdate","display-model-name":"onDisplayModelName"}},"AwardsListPage")}}},onSmallItemMouseLeave:function(){if(!this._voteEl&&this._openEl)TweenMax.to(this._openEl,0.2,{css:{bottom:this._smallItemStartPos}})},isPerformerInFreeChat:function(el){return el.getAttribute(this._realStatusSel)==1},onThumbMouseEnter:function(ev,el){var element=Ext.get(el);element=element.hasClass("performer")?
element:element.findParent(".performer",200,true);el=element.dom;if(!element.hasClass("banned"))if(!this._voteEl){this.awardsStatusUpdater.hideStatus(element,false);if(element.select(this._voteMessageWrapperSel).elements.length)return;if(element.hasClass("small")){this._openEl=Ext.get(el).select(this._detailsSel).item(0).dom;TweenMax.to(this._openEl,0.2,{css:{bottom:this._smallItemEndPos}})}}this.resetAwardsPlayerDelayTask();if(!this.isPerformerInFreeChat(el))return;if(!this._awardsPlayer)this.initAwardsPlayer();
if(this._awardsPlayerTask)this._awardsPlayerTask.cancel();this._awardsPlayerTask=new Ext.util.DelayedTask(function(){this._awardsPlayer.onThumbsMouseover(ev,element.select(this.perflinkSel).item(0))},this);this._awardsPlayerTask.delay(200)},resetAwardsPlayerDelayTask:function(){if(this._awardsPlayerTask){this._awardsPlayerTask.cancel();this._awardsPlayerTask=undefined}},onThumbMouseLeave:function(ev,el){if(this._awardsPlayer){this._awardsPlayer.resetListPagePlayer();this._awardsPlayer.stopFlashStream();
this.resetAwardsPlayerDelayTask()}var element=Ext.get(el);element=element.hasClass("performer")?element:element.findParent(".performer",200,true);if(!element.hasClass("banned")){if(!this._voteEl){if(this._openEl)TweenMax.to(this._openEl,0.2,{css:{bottom:this._smallItemStartPos}});this._openEl=undefined;if(!element.select(this._voteMessageWrapperSel).elements.length)this.awardsStatusUpdater.showStatus(element)}if(this._awardsPlayer)this._awardsPlayer.onThumbsMouseout(ev)}},onVoteClick:function(ev,
el){ev.preventDefault();if(!application.isLoggedIn()){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:false});return false}var element=Ext.get(el);if(element.hasClass(this.alreadyVotedCls))return false;element.addClass(this.alreadyVotedCls);if(!this._voteEl){var id=element.getAttribute(this._dataIdSel)||element.dom.getAttribute(this._dataIdSel),elementWidth=element.getWidth(),elementHeight=element.getHeight(),isVoted=parseInt(element.getAttribute(this._dataIsVotedSel)||
element.dom.getAttribute(this._dataIsVotedSel)),votePlace=element.getAttribute(this._dataVotePlace)||element.dom.getAttribute(this._dataVotePlace);this._voteEl=element;this._votedPerformerId=id;this._votePlace=votePlace;this._isVoteTypeSmall=element.hasClass("small");this._votedIsVoted=isVoted;this._isSmallExists=Ext.get(this._containerIdPrefix+this._votedPerformerId);if(!this._isArchive)this._isBigExists=Ext.get(this.carouselContainerId).select(".perf_"+this._votedPerformerId);if(typeof this._isBigExists===
"undefined")this._isBigExists=false;this.sendVoteRequest(id)}return false},animateSliderVoteClick:function(carouselId){var activeSlide=Ext.get(carouselId);if(!activeSlide)return;var duration=0.5;var messageWrapper=activeSlide.select(this._voteMessageWrapperSel).item(0);var parentTitle=activeSlide.select(this.titleSel).item(0);var parentPrivateBtnEL=activeSlide.select(this.carouselPrivateBtnSel).item(0);messageWrapper.setStyle("display","block");var privateBtnWidth=parentPrivateBtnEL.getWidth();TweenLite.fromTo(parentTitle.dom,
duration,{opacity:0,left:"-"+245},{delay:0.5,opacity:1,left:0});TweenLite.fromTo(parentPrivateBtnEL.dom,duration,{opacity:0,left:privateBtnWidth},{delay:0.5,opacity:1,left:0})},onVoteMouseEnter:function(ev){if(this._carouselGalleryCmp)this._carouselGalleryCmp.pauseSlideShow()},onCountdownButtonMouseOver:function(ev,el){var element=Ext.get(this._countdownHolderId);TweenMax.to(element.dom,0.5,{css:{width:175}});var icon=Ext.get(this._countdownIconId);TweenMax.to(icon.dom,0.5,{css:{autoAlpha:1}})},onCountdownButtonMouseLeave:function(ev,
el){var element=Ext.get(this._countdownHolderId);TweenMax.to(element.dom,0.5,{css:{width:0}});var icon=Ext.get(this._countdownIconId);TweenMax.to(icon.dom,0.5,{css:{autoAlpha:0.4}})},onImageLoaded:function(data){var id=data.data.target.id.split("_").pop(),sel=this._containerIdPrefix+id,imgEl=Ext.get(data.data.target);if(Ext.get(sel))Ext.get(sel).addClass("show");if(imgEl.hasClass("lazy"))imgEl.removeClass("lazy");this._imageFallbackTask=new Ext.util.DelayedTask(function(){this.doImageFallback(data.data.target)},
this);this._imageFallbackTask.delay(0)},doImageFallback:function(ev,img){if(!img)img=ev;var fallbackAttr="data-fallback",defaultAttr="data-default",usedAttr=undefined;var img2=new Image;img2.src=img.src;if(img2.width<10){if(img.getAttribute(fallbackAttr))usedAttr=fallbackAttr;else if(img.getAttribute(defaultAttr))usedAttr=defaultAttr;var src=usedAttr?img.getAttribute(usedAttr):false;if(src){img.setAttribute(usedAttr,"");img.src=src}}},prepareTemplates:function(){this._templateMessageOverlaySmallBuyCredits=
new Ext.Template(Ext.select(this._templateMessageOverlaySmallBuyCredits).item(0).dom.innerHTML);this._templateMessageOverlayBigNoMoreSteps=new Ext.Template(Ext.select(this._templateMessageOverlayBigNoMoreSteps).item(0).dom.innerHTML);this._templateMessageOverlaySmallNoMoreSteps=new Ext.Template(Ext.select(this._templateMessageOverlaySmallNoMoreSteps).item(0).dom.innerHTML);this._templateMessageOverlaySmallPrivate=new Ext.Template(Ext.select(this._templateMessageOverlaySmallPrivate).item(0).dom.innerHTML);
this._templateMessageOverlaySmallPrivateOffline=new Ext.Template(Ext.select(this._templateMessageOverlaySmallPrivateOffline).item(0).dom.innerHTML);this._templateMessageOverlaySmallJoin=new Ext.Template(Ext.select(this._templateMessageOverlaySmallJoin).item(0).dom.innerHTML);this._templatePointsBubble=new Ext.Template(this._templatePointsBubble);this._templateMessageBigThankYou=new Ext.Template(Ext.select(this._templateMessageBigThankYou).item(0).dom.innerHTML);this._templateMessageOverlayBigPrivate=
new Ext.Template(Ext.select(this._templateMessageOverlayBigPrivate).item(0).dom.innerHTML);this._templateMessageOverlayBigBuyCredits=new Ext.Template(Ext.select(this._templateMessageOverlayBigBuyCredits).item(0).dom.innerHTML)},bindThumbsForOpenOverlay:function(ev,target){ev.preventDefault();var el=Ext.get(target);var imgData=el.select(".imageData").item(0);if(imgData&&imgData.dom.innerHTML.indexOf("banned")!=-1)return;var target=Ext.get(el.findParent(".performerBox",200)).select(this.perflinkSel).item(0).dom;
Chaos.fireEvent(JSM.page.awards.index.GLOBALEVENT_THUMBNAIL_CLICK,{scope:this,ev:ev,target:target});var doc=document.documentElement,body=document.body,top=doc&&doc.scrollTop||body&&body.scrollTop||0;this._lastScrollY=top},onOverlayClose:function(){window.scrollTo(0,this._lastScrollY)},onMenuItemClick:function(ev,el){el=Ext.get(el);var text=el.getAttribute("data-placeholder")||el.dom.getAttribute("data-placeholder"),href=el.dom.getAttribute("href");if(href=="#")ev.preventDefault();if(el.hasClass("soon"))return false;
else if(el.dom.hasAttribute("data-placeholder")){ev.preventDefault();el.dom.setAttribute("data-deftext",el.dom.innerHTML);el.setStyle("display","inline-block");el.setStyle("width",el.getWidth(true)+"px");el.addClass("soon");var self=this;TweenMax.to(el.dom,this.menuItemClickDuration,{css:{position:"relative",top:-10,opacity:0},onComplete:function(){el.setStyle("top","10px");el.dom.innerHTML=text;TweenMax.to(el.dom,self.menuItemClickDuration,{css:{top:0,opacity:1}})}})}},onMenuItemMouseLeave:function(ev,
el){el=Ext.get(el);var self=this;if(this._comingSoonCloseDelay)this._comingSoonCloseDelay.cancel();this._comingSoonCloseDelay=new Ext.util.DelayedTask(function(){TweenMax.to(el.dom,this.menuItemClickDuration,{css:{position:"relative",top:-10,opacity:0},onComplete:function(){el.setStyle("top","10px");el.dom.innerHTML=el.dom.getAttribute("data-deftext");el.dom.removeAttribute("data-deftext");el.removeClass("soon");TweenMax.to(el.dom,self.menuItemClickDuration,{css:{top:0,opacity:1}})}})},this);if(el.hasClass("soon"))this._comingSoonCloseDelay.delay(1500)},
setAwardsController:function(){if(!(this._awardsController instanceof JSM.controller.AwardsListPageController))this._awardsController=new JSM.controller.AwardsListPageController({items:{"ListPage":{component:this._awardsListPageCmp,listeners:{"thumb-mousedown":"onListPageThumbMouseDown","thumb-ctrl-mousedown":"onListPageThumbCtrlMouseDown","thumb-right-mousedown":"onListPageThumbRightMouseDown","thumb-mouseover":"onListPageThumbMouseOver","thumb-mouseout":"onListPageThumbMouseOut","body-keypress":"onListPageKeyPress",
"body-keyup":"onListPageKeyUp","body-keydown":"onListPageKeyDown","body-esc-keydown":"onListPageEscKeyDown","body-esc-keyup":"onListPageEscKeyUp","body-esc-keypress":"onListPageEscKeyPress","body-click":"onBodyClick","favorite-button-mousedown":"onAddFavoriteButtonMouseDown","favorite-button-update":"onListPageFavoriteButtonUpdate"}},"Lister":{component:this.awardsLister,listeners:{"insert-down-done":"onListerInsertedContentDown","insert-up-done":"onListerInsertedContentUp","remove-block":"onListerRemoveBlock",
"show-more-error":"showMoreError"}}}})},showPageTopBlock:function(){Ext.get("awards_carousel_container").setStyle({display:"block"});Ext.get("awards_navigation").setStyle({display:"block"});Ext.get(this._awardsContainerId).select(".header").setStyle({display:"block"})},hidePageTopBlock:function(){Ext.get("awards_carousel_container").setStyle({display:"none"});Ext.get("awards_navigation").setStyle({display:"none"});Ext.get(this._awardsContainerId).select(".header").setStyle({display:"none"})},onShowMoreBlockInserted:function(){this.bindSmallBlockEvents();
this._lazyLoadPluginInstance.collectImages();this._lazyLoadPluginInstance.onWindowScroll()},bindSmallBlockEvents:function(){Ext.select(this._innerHoverSel).un("mouseenter",this.onThumbMouseEnter,this);Ext.select(this._innerHoverSel).un("mouseleave",this.onThumbMouseLeave,this);Ext.select(this._innerHoverSel).hover(this.onThumbMouseEnter,this.onThumbMouseLeave,this);Ext.select(this._voteButtonSel).un("click",this.onVoteClick,this);Ext.select(this._voteButtonSel).on("click",this.onVoteClick,this);Ext.get("awards_performers").select(".signup").on("click",
this.onAwardsSmallSignUpClick,this)},onAwardsSmallSignUpClick:function(ev){ev.preventDefault();Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:false})},onBodyClick:function(ev,el){var element=Ext.get(el);if(this._isArchiveSubMenuOpen&&!element.findParent(this.archiveBtnCtSel,4))this.onArchiveMenuBtnClick()},onArchiveMenuBtnClick:function(){var self=this;if(!this._isArchiveSubMenuOpen){this._isArchiveSubMenuOpen=true;this._archiveBtnEl.addClass("active");
this._archiveSubMenuEl.setStyle({display:"block",height:0});TweenMax.to(this._archiveSubMenuEl.dom,0.5,{css:{height:122}})}else{this._isArchiveSubMenuOpen=false;this._archiveBtnEl.removeClass("active");TweenMax.to(this._archiveSubMenuEl.dom,0.5,{css:{height:0},onComplete:function(){self._archiveSubMenuEl.setStyle("display","none")}})}},onAfterOverlayClose:function(ev,el){if(ev.element.name=="BonusCreditLogin")location.href="?startIndex="+this._carouselGalleryCmp.getActiveElementIndex();if(ev.element.name==
"SignUpSuccess")location.href="?startIndex="+this._carouselGalleryCmp.getActiveElementIndex()},onAfterFreeChatClose:function(ev,el){if(application.isLoggedIn()&&Chaos.Cookie.get("awardsBeforeState")){Chaos.Cookie.remove("awardsBeforeState");location.href="?startIndex="+this._carouselGalleryCmp.getActiveElementIndex()}else Chaos.Cookie.remove("awardsBeforeState")},onFreeChatOpen:function(ev,el){if(!application.isLoggedIn()){Chaos.Cookie.remove("awardsBeforeState");Chaos.Cookie.set("awardsBeforeState",
"1")}else Chaos.Cookie.remove("awardsBeforeState")},onCarouselAnimationFinished:function(ev){var neededDIV=ev.panel.select("div").item(0);if(ev.panel.select(this._voteMessageWrapperSel).item(0))this.animateSliderVoteClick(neededDIV.id)},bind:function(){JSM.page.awards.index.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.page.awards.index.GLOBALEVENT_OVERLAY_CLOSE,this.onOverlayClose,this);Chaos.Broadcaster.on(JSM.Overlay.EVENT_AFTER_OVERLAY_CLOSE,this.onAfterOverlayClose,this);Chaos.Broadcaster.on(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,
this.onAfterFreeChatClose,this);Chaos.Broadcaster.on(JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,this.onFreeChatOpen,this);Chaos.Broadcaster.on(JSM.component.CarouselGallery.CAROUSELGALLERY_VOTE_BTN_CLICK,this.onCarouselVoteBtnClick,this);Chaos.Broadcaster.on(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_NEXT_FINISHED,this.onCarouselAnimationFinished,this);Chaos.Broadcaster.on(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_PREV_FINISHED,this.onCarouselAnimationFinished,this);Ext.getBody().on("click",
this.onBodyClick,this);this.on(JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED,this.onImageLoaded,this);Ext.select(this.carouselVoteButtonSel).on("mouseenter",this.onVoteMouseEnter,this);Ext.select(this.awardsMenuItemSel).on("click",this.onMenuItemClick,this);Ext.select(this.awardsMenuItemSel).on("mouseleave",this.onMenuItemMouseLeave,this);Ext.select(this.archiveBtnSel).on("click",this.onArchiveMenuBtnClick,this);Ext.get(this._countdownButtonId).hover(this.onCountdownButtonMouseOver,this.onCountdownButtonMouseLeave,
this);this.bindSmallBlockEvents();Ext.getBody().on("click",this.bindThumbsForOpenOverlay,this,{delegate:this.perflinkSel}).on("click",this.bindThumbsForOpenOverlay,this,{delegate:this._privateStarterButtonSel});Ext.getBody()},unbind:function(){JSM.page.awards.index.superclass.unbind.call(this);this.un(JSM.plugin.LazyLoad.EVENT_IMAGE_LOADED,this.onImageLoaded,this);Chaos.Broadcaster.un(JSM.page.awards.index.GLOBALEVENT_OVERLAY_CLOSE,this.onOverlayClose,this);Chaos.Broadcaster.un(JSM.Overlay.EVENT_AFTER_OVERLAY_CLOSE,
this.onAfterOverlayClose,this);Chaos.Broadcaster.un(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,this.onAfterFreeChatClose,this);Chaos.Broadcaster.un(JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,this.onFreeChatOpen,this);Chaos.Broadcaster.un(JSM.component.CarouselGallery.CAROUSELGALLERY_VOTE_BTN_CLICK,this.onCarouselVoteBtnClick,this);Chaos.Broadcaster.un(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_NEXT_FINISHED,this.onCarouselAnimationFinished,this);Chaos.Broadcaster.un(JSM.component.CarouselGallery.CAROUSELGALLERY_ANIM_PREV_FINISHED,
this.onCarouselAnimationFinished,this);Ext.select(this._innerHoverSel).un("mouseover",this.onThumbMouseEnter,this);Ext.select(this._innerHoverSel).un("mouseout",this.onThumbMouseLeave,this);Ext.select(this._voteButtonSel).un("click",this.onVoteClick,this);Ext.select(this.archiveBtnSel).un("click",this.onArchiveMenuBtnClick,this);Ext.getBody().un("click",this.onBodyClick,this)}});Ext.namespace("JSM.page.chat");
JSM.page.chat.performer=function(el,config){JSM.page.chat.performer.superclass.constructor.call(this,el,config)};JSM.page.chat.performer.OPEN_FREECHAT_STANDALONE="standalone-chat";
Chaos.extend(JSM.page.chat.performer,Chaos.Page,{name:"page.chat",flashObjectId:"chatapplet",freeChatId:"freechat",bioPageId:"biopage",bioPageEl:undefined,bioPageMenuId:"tab_menu",containerId:"container",containerEl:undefined,standardAppletClass:"standard_size",bioPageContainerId:"inner_container",fadeDuration:0.5,hasBioPage:true,wallId:"biopage_wall",tabMenuDetailsId:"tab_menu_details",tabMenuWallId:"tab_menu_wall",hiddenPerfInputId:"perfId",biopagePerfimgBoxId:"biopage_perfimg_box",biopagePadlockImgId:"members_only_padlock_img",
padlockBlockIconCls:"padlock_icon_block",defaultImageGalleryArrayLength:7,windowId:"refresh_window",title:"",message:"",btnText:"Refresh browser",refreshButtonId:"refresh_button",_freechatTitleSel:".freechat_title",_seoText:null,_isScrolledDown:false,_delayedGetDataTask:undefined,_perfName:null,_biopagePerfImgBoxEl:undefined,overlayId:"overlay",imageGalleryBoxId:"image_gallery_box",prevImageButtonId:"prev_image_button",nextImageButtonId:"next_image_button",navigationPrevMaskId:"navigation_prev_mask",
navigationNextMaskId:"navigation_next_mask",galleryTitleText:"Gallery",galleryText:"of",currentImageCount:"1",currentImageCountId:"gallery_current_image",maxImageCount:"1",maxImageCountId:"gallery_max_image_count",biopageImageSelector:".biopage_thumbnail_image",snapshotBlockIconSelector:".snapshot_icon_block",snapshotBlockIconCls:"snapshot_icon_block",snapshotIconCls:"snapshot_icon",gallerySlideWidth:1024,slideAnimationDuration:0.5,lockIconCls:"lock_icon",hiddenPicturesInfoCls:"hidden_pictures_info",
membersOnlyText:"Members only",closeButtonText:"Close",init:function(el,config){JSM.page.chat.performer.superclass.init.call(this,el,config);this.bioPageEl=Ext.get(this.bioPageId);this.bioPageMenuEl=Ext.get(this.bioPageMenuId);this.containerEl=Ext.get(this.containerId);this._perfName=Ext.get(this.hiddenPerfInputId).dom.value;Chaos.fireEvent(JSM.page.chat.performer.OPEN_FREECHAT_STANDALONE,{modelName:this._perfName});this._freechatTitleEl=this.element.select(this._freechatTitleSel).item(0);var memberAppletUrl=
Chaos.Config.get(Ext.isIE11?"memberAppletUrl":"memberAppletContainerUrl"),memberAppletParams=Chaos.Config.get("memberAppletParams"),memberAppletFlashvars=Chaos.Config.get("memberAppletFlashvars"),memberAppletFlashvarsQS=Chaos.Config.get("memberAppletFlashvarsQS"),memberAppletAttributes=Chaos.Config.get("memberAppletAttributes");if(!Ext.isIE11)swfobject.embedSWF(memberAppletUrl,this.flashObjectId,"1140","600","9.0.0","expressInstall.swf",memberAppletFlashvars,memberAppletParams,memberAppletAttributes);
else{Ext.fly(this.flashObjectId).remove();Ext.DomHelper.append(this.freeChatId,'<object id="'+this.flashObjectId+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+memberAppletUrl+'" type="application/x-shockwave-flash">'+'<param name="movie" value="'+memberAppletUrl+'" />'+'<param name="quality" value="high" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowNetworking" value="all" />'+'<param name="wmode" value="direct" />'+'<param name="allowFullScreen" value="true" />'+
'<param name="allowFullScreenInteractive" value="true" />'+'<param name="FlashVars" value="'+memberAppletFlashvarsQS+'" />'+"</object>")}this.memberAppletFlash=Chaos.getFlashMovieObject(this.flashObjectId);var freeChatConstructor=Chaos.Config.get("isWideAppletEnabled")?JSM.overlay.FreeChat2:JSM.overlay.FreeChat;window.freeChatWindow=new freeChatConstructor(this.freeChatId,{isModal:false,showMode:"relative",isConstant:true,top:100,chatTopValue:72,overlay:this.overlayId,hideDuration:0,defaultHeightNormal:600,
autoLoad:false,mustGetContent:false,autoDestroy:false,autoDestroyElement:false,mustRender:false,manageHistory:true,isScrollingDisabled:false,showChatEnabled:true,isOverlay:false,historyActions:{open:{fn:"onCallShowChat",url:"getNameForHistory",params:{name:"getNameForHistory"}},close:{fn:"closeChat"},change:{fn:"setNextModel",url:"getNameForHistory",params:{name:"getNameForHistory"}}},plugins:{"BackConn-plugin":{globalObjectId:"freeChatWindow",globalMethods:["setResizeParams","onPrivateClick","onPrivateEndClick",
"onClosePopup","getNextModel","loadFlashAndPlay","getFlashVarsForNextPerformer","setBackspaceTrap","resizeFlashApplet","getMaxAppletSize"]}}});window.freeChatWindow.enableHistoryEntry(false);Chaos.Broadcaster.on(JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,this.getNextModel,this);Chaos.Broadcaster.on(JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,this.setNextModel,this);var modelNameOnLoad=this.getPerformerName();var url=document.location.pathname;var queryParams=JSM.Util.UrlHelper.hasQueryParam(location.href)?
"?"+location.href.split("?")[1]:"";Chaos.History.onAddNewStateChange({cmpName:window.freeChatWindow.name,state:window.freeChatWindow.openHistoryId,url:url+queryParams,name:modelNameOnLoad,stateChange:"replace"});var self=this;window.statusHandler=function(obj){if(typeof self.memberAppletFlash.updateRecommender=="function")self.memberAppletFlash.updateRecommender(obj)};if(this.hasBioPage){var _selectedTabEl=this.bioPageMenuEl.select(".selected");if(_selectedTabEl.getCount())this._selectedTabEl=_selectedTabEl.item(0);
this.tabMenu=new JSM.component.TabMenu(this.bioPageMenuId,{contentIdPreFix:"biopage_",contentSel:".biopage_content"});this.onResizedApplet();this._addBiopageGalleryImageEventHandler()}if(Ext.fly(this.wallId))this.wall=new JSM.component.Wall(this.wallId,{});this.tabMenu.on(JSM.component.TabMenu.EVENT_CHANGE_TAB,this.onTabMenuChangeTab,this)},getPerformerName:function(){var performerName=document.location.pathname.split("/chat/")[1];if(/\//.test(performerName)){var pattern=/^(.+)(?=\/)/;var fixedPerformerName=
performerName.match(pattern);return fixedPerformerName[0]}else return performerName},getNextModel:function(ev){if(this.hasBioPage)if(this._perfName!=ev.modelName){this._perfName=ev.modelName;if(this._delayedGetDataTask)this._delayedGetDataTask.cancel();this._delayedGetDataTask=new Ext.util.DelayedTask(this.getBioPageData,this);this._delayedGetDataTask.delay(2E3)}if(this._freechatTitleEl){this._seoText=Chaos.translate("Welcome to {performerId}&#39;s Video Chat!",{performerId:this._perfName});this._freechatTitleEl.dom.innerHTML=
this._seoText}},setNextModel:function(ev){if(this.hasBioPage){this._perfName=ev.stateObject.name;if(this._delayedGetDataTask)this._delayedGetDataTask.cancel();this._delayedGetDataTask=new Ext.util.DelayedTask(this.getBioPageData,this);this._delayedGetDataTask.delay(1E3)}if(this._freechatTitleEl){this._seoText=Chaos.translate("Welcome to {performerId}&#39;s Video Chat!",{performerId:this._perfName});this._freechatTitleEl.dom.innerHTML=this._seoText}},getBioPageData:function(){if(this.wall)this.wall.hideElements();
Ext.fly(this.bioPageId).fadeOut({duration:this.fadeDuration});Chaos.Ajax.request({method:"POST",scope:this,type:"json",url:Chaos.getUrl("Wall/Biopage",{part:"full",performerId:this._perfName},{},""),success:function(response){this.getBioPageDataSuccess(response)},error:function(e){},failure:function(e){}})},getBioPageDataSuccess:function(response){if(response.json.success)if(Ext.fly(this.bioPageId).getStyle("visibility")=="hidden"){Ext.fly(this.bioPageId).remove();Ext.DomHelper.append(Ext.fly(this.bioPageContainerId),
response.json.data.content);var _selectedTabEl=this.bioPageMenuEl.select(".selected");if(_selectedTabEl.getCount())this._selectedTabEl=_selectedTabEl.item(0);if(this.tabMenu instanceof JSM.component.TabMenu){this.tabMenu.unbind();delete this.tabMenu}var defaultId=Ext.get(this.wallId).select("li").getCount()>0?this.tabMenuWallId:this.tabMenuDetailsId;this.tabMenu=new JSM.component.TabMenu(this.bioPageMenuId,{contentIdPreFix:"biopage_",contentSel:".biopage_content",defaultTabId:defaultId});this.tabMenu.on(JSM.component.TabMenu.EVENT_CHANGE_TAB,
this.onTabMenuChangeTab,this);Ext.fly(this.bioPageId).fadeIn({duration:this.fadeDuration});if(this.wall)this.wall.destroy();if(Ext.fly(this.wallId))this.wall=new JSM.component.Wall(this.wallId,{});this._addBiopageGalleryImageEventHandler()}else{var checkBioPageTask=new Ext.util.DelayedTask(this.getBioPageDataSuccess,this,[response]);checkBioPageTask.delay(1E3)}},onResizedApplet:function(){var freeChatCmp=window.freeChatWindow;if(freeChatCmp.element.hasClass(freeChatCmp.fullSizeCls)==false)this.containerEl.replaceClass(freeChatCmp.fullSizeCls,
this.standardAppletClass);else this.containerEl.replaceClass(this.standardAppletClass,freeChatCmp.fullSizeCls);if(this.bioPageEl){this.bioPageEl.dom.removeAttribute("style");freeChatCmp.extensionBlockTopPos=parseInt(this.bioPageEl.getPositioning().top)}},onTabMenuChangeTab:function(ev){if(ev.tabButton&&!this._isScrolledDown&&!(Ext.isIE7||Ext.isIE8||Ext.isOpera)){this._selectedTabEl=ev.tabButton;var _this=this,windowOffset=0,_menuItemTop=this._selectedTabEl.getTop(),animatedScroll=setInterval(function(){window.scrollBy(0,
50);if((window.pageYOffset||document.body.scrollTop)>=_menuItemTop-200||windowOffset==(window.pageYOffset||document.body.scrollTop)){clearInterval(animatedScroll);_this._isScrolledDown=true}else windowOffset=window.pageYOffset||document.body.scrollTop},15)}},_addBiopageGalleryImageEventHandler:function(){this._biopageGalleryImageEl=Ext.get(this.biopagePerfimgBoxId);this._biopageGalleryImageEl.on("click",this.onOpenGalleryClick,this,{delegate:".biopage_thumbnail"});this._biopageGalleryPadlockImageEl=
Ext.get(this.biopagePadlockImgId);if(this._biopageGalleryPadlockImageEl)this._biopageGalleryPadlockImageEl.on("click",this.onGalleryPadlockClick,this)},onOpenGalleryClick:function(ev){ev.preventDefault();var _target=ev.target,_clickedImageIndex;if(!this.isPadlockClick(_target)){this.setGalleryClickedImageTarget(_target);_clickedImageIndex=this.getClickedImagesIndex();this.setGalleryClickedImageCount(_clickedImageIndex);this.setGalleryTitleText();this.setGalleryText();this._createImageGalleryOverlay();
this._createImageGalleryComponent();this._createContentSliderComponent();this._createImageGalleryController()}},isPadlockClick:function(target){var _targetEl=Ext.get(target),isChild=_targetEl.parent().hasClass(this.padlockBlockIconCls);return this._biopageGalleryPadlockImageEl&&isChild||this._biopageGalleryPadlockImageEl&&target===this._biopageGalleryPadlockImageEl.dom},setGalleryTitleText:function(){this._galleryTitleText=Chaos.translate(this.galleryTitleText)},getGalleryTitleText:function(){return this._galleryTitleText},
setGalleryText:function(){this._galleryText=Chaos.translate(this.galleryText)},getGalleryText:function(){return this._galleryText},setGalleryClickedImageCount:function(imageIndex){this._clickedImageCount=imageIndex+1},getGalleryClickedImageCount:function(){return this._clickedImageCount},setGalleryClickedImageTarget:function(target){this._galleryClickedImageTarget=target},getGalleryClickedImageTarget:function(){return this._galleryClickedImageTarget},setBiopageImageArray:function(biopageImageArray){this._biopageImgArray=
biopageImageArray},getBiopageImageArray:function(){var _biopageImgArray;this._biopagePerfImgBoxEl=Ext.get(this.biopagePerfimgBoxId);_biopageImgArray=this._biopagePerfImgBoxEl.select(this.biopageImageSelector);return _biopageImgArray},getClickedImagesIndex:function(){var _clickedImageIndex,_target=this.getGalleryClickedImageTarget(),_snapShotBlock=this.getSnapShotIconBlock();if(this.isSnapshotClick(_target))_target=_snapShotBlock.select(this.biopageImageSelector).item(0).dom;_clickedImageIndex=this.getBiopageImageArray().indexOf(_target);
return _clickedImageIndex},isSnapshotClick:function(target){var _snapShotBlock=this.getSnapShotIconBlock(),_targetEl=Ext.get(target),isChild=_targetEl.parent().hasClass(this.snapshotBlockIconCls);return _snapShotBlock&&isChild||_snapShotBlock&&target===_snapShotBlock.dom},getClickedImagesParentId:function(){var _target=this.getGalleryClickedImageTarget(),_imageParentId,_snapShotBlock=this.getSnapShotIconBlock();_imageParentId=_target.parentNode.id;if(_snapShotBlock&&_target===_snapShotBlock.dom)_imageParentId=
_target.id;return _imageParentId},getSnapShotIconBlock:function(){var _snapShotIconBlock=Ext.get(this.biopagePerfimgBoxId).select(this.snapshotBlockIconSelector).item(0);return _snapShotIconBlock},getDisplayedImageLessThanMaxImg:function(){return this._biopageGalleryPadlockImageEl!=null},_createImageGalleryOverlay:function(){this._imageGalleryOverlay?delete this._imageGalleryOverlay:"";if(!(this._imageGalleryOverlay instanceof JSM.overlay.ImageGallery))this._imageGalleryOverlay=new JSM.overlay.ImageGallery("overlay_container",
{overlay:this.overlayId,galleryTitleText:this.getGalleryTitleText(),galleryText:this.getGalleryText(),currentImageCount:this.currentImageCount,currentImageCountId:this.currentImageCountId,maxImageCount:this.maxImageCount,maxImageCountId:this.maxImageCountId,closeButtonText:this.closeButtonText})},_createImageGalleryComponent:function(){var _biopageImageArrayLength;_biopageImageArrayLength=this.getBiopageImageArray().elements.length;this._imageGalleryComponent?delete this._imageGalleryComponent:"";
if(!(this._imageGalleryComponent instanceof JSM.component.ImageGallery))this._imageGalleryComponent=new JSM.component.ImageGallery(this.element,{currentImageCount:this.currentImageCount,currentImageCountId:this.currentImageCountId,maxImageCount:this.maxImageCount,maxImageCountId:this.maxImageCountId,clickedImageCount:this.getGalleryClickedImageCount(),displayedImageNumber:_biopageImageArrayLength,isDisplayedImageLessThanMaxImg:this.getDisplayedImageLessThanMaxImg(),clickedImageParentId:this.getClickedImagesParentId(),
performerName:this._perfName,lockIconCls:this.lockIconCls,hiddenPicturesInfoCls:this.hiddenPicturesInfoCls,membersOnlyText:this.membersOnlyText,defaultElementsArrayLength:this.defaultImageGalleryArrayLength});if(JSM.Util.isCurrentPage("chat.performer")){this._imageGalleryComponent.addPlugin("AppletResize",{events:{"gallery-hide":"onShowApplet","gallery-show":"onHideApplet"}});this._imageGalleryComponent.galleryShow()}},_createContentSliderComponent:function(){this._contentSlider?delete this._contentSlider:
"";if(!(this._contentSlider instanceof JSM.component.ContentSlider))this._contentSlider=new JSM.component.ContentSlider("overlay_container",{prevBtnId:this.prevImageButtonId,prevMaskId:this.navigationPrevMaskId,nextBtnId:this.nextImageButtonId,nextMaskId:this.navigationNextMaskId,sliderId:this.imageGalleryBoxId,activeItemCls:"active",itemsToSlide:"div",useArrayMode:false,slideWidth:this.gallerySlideWidth,duration:this.slideAnimationDuration,defaultElementsArrayLength:this.defaultImageGalleryArrayLength})},
_createImageGalleryController:function(){this._imageGalleryController?delete this._imageGalleryController:"";if(!(this._imageGalleryController instanceof JSM.controller.ImageGalleryController))this._imageGalleryController=new JSM.controller.ImageGalleryController({items:{"ImageGalleryOverlay":{component:this._imageGalleryOverlay,listeners:{"content-displayed":"onImageGalleryContentDisplayed","overlay-close":"onOverlayClose"}},"ImageGalleryComponent":{component:this._imageGalleryComponent,listeners:{"gallery-max-count-changed":"onGalleryMaxCountChanged",
"gallery-current-count-changed":"onGalleryCurrentCountChanged","gallery-image-changed":"onGalleryImageChanged","gallery-images-init":"onGalleryImagesInit","gallery-add-next-element":"onGalleryAddNextElement","gallery-add-prev-element":"onGalleryAddPrevElement","gallery-image-list-error":"onGalleryImageRequestError"}},"ContentSlider":{component:this._contentSlider,listeners:{"prev-button-click":"onPrevBtnClick","next-button-click":"onNextBtnClick"}}}})},onGalleryPadlockClick:function(ev){ev.preventDefault();
Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,this)},onLoggedIn:function(){if(JSM.Session.getUserType()==="member")this.getBioPageData()},bind:function(){JSM.page.chat.performer.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this)},unbind:function(){JSM.page.chat.performer.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,this.getNextModel);Chaos.Broadcaster.un(JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,
this.setNextModel,this);Chaos.Broadcaster.un(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);this.tabMenu.un(JSM.component.TabMenu.EVENT_CHANGE_TAB,this.onTabMenuChangeTab,this)}});Ext.namespace("JSM.page.credit");JSM.page.credit.index=function(el,config){JSM.page.credit.index.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.credit.index,Chaos.Page,{name:"page.messages",url:"",layout:null,id:"",init:function(el,config){JSM.page.credit.index.superclass.init.call(this,el,config)},load:function(){},bind:function(){JSM.page.credit.index.superclass.bind.call(this)},unbind:function(){JSM.page.credit.index.superclass.unbind.call(this)}});Ext.namespace("JSM.page.firstbill");JSM.page.firstbill.index=function(el,config){JSM.page.firstbill.index.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.firstbill.index,Chaos.Page,{name:"page",init:function(el,config){JSM.page.firstbill.index.superclass.init.call(this,el,config)},bind:function(){JSM.page.firstbill.index.superclass.bind.call(this)},unbind:function(){JSM.page.firstbill.index.superclass.unbind.call(this)}});Ext.namespace("JSM.page.index");JSM.page.index.index=function(el,config){JSM.page.index.index.superclass.constructor.call(this,el,config)};JSM.page.index.index.OPEN_FAVORITES="open-favorites";
JSM.page.index.index.BACKCONN_READY="backconn-ready";JSM.page.index.index.OPEN_OVERLAY_CHAT="open-overlay-chat";JSM.page.index.index.EVENT_MEMBERAPPLET_EMBED="memberapplet-embed";JSM.page.index.index.EVENT_SUCCESS_REFRESH_LISTPAGE="success-refresh-listpage";JSM.page.index.index.EVENT_SHOW_ONLINE_FAVORITES_COUNT="show-online-favorites-count";JSM.page.index.index.EVENT_MEMBER_AUCTION_SHOW="member-auction-show";JSM.page.index.index.GLOBALEVENT_DO_INIT_LISTPAGE="do-init-listpage";
JSM.page.index.index.GLOBALEVENT_REFRESH_LISTPAGE="refresh-listpage";
Chaos.extend(JSM.page.index.index,Chaos.Page,{name:"page",url:"",layout:null,id:"",memberAppletContainerIsEmbedded:false,embedListPagePlayerEmbedded:false,freeChatId:"freechat",overlayContainerId:"overlay_container",overlayId:"overlay",bonusCreditRecommenderCookie:"showBonusCreditRecommender",headerLogoId:"logo",liveCamsLinkId:"live_cams",slidePanelContainerId:"slidepanel_lister_container",auctionPanelContainerId:"auction_panel_container",isShowRegistrationPopup:"showPostRegistrationPopup",_ajaxListPageRefreshCounter:0,
_showMoreJsonQueryParams:{},_category:"category",init:function(el,config){if(JSM.Util.hasQueryParam("hustler")){Ext.fly("header").addClass("hustler");Ext.fly("listpage").addClass("hustler")}this.preventLoadFromCache();var self=this,hasChatAction=location.href.indexOf("#chat")!=-1;this.addEvents(JSM.page.index.index.OPEN_FAVORITES,JSM.page.index.index.FIRE_ACTION_FROM_URL,JSM.page.index.index.BACKCONN_READY,JSM.page.index.index.EVENT_SUCCESS_REFRESH_LISTPAGE,JSM.page.index.index.EVENT_SHOW_ONLINE_FAVORITES_COUNT,
JSM.page.index.index.EVENT_MEMBER_AUCTION_SHOW);Chaos.addEvents(JSM.page.index.index.EVENT_MEMBERAPPLET_EMBED,JSM.page.index.index.BACKCONN_READY,JSM.page.index.index.GLOBALEVENT_DO_INIT_LISTPAGE,JSM.page.index.index.GLOBALEVENT_REFRESH_LISTPAGE);this.backConnFlashObject=Chaos.getFlashMovieObject("flash_backconn");window.setBackConnStatus=function(){self.fireEvent(JSM.page.index.index.BACKCONN_READY,{eventType:JSM.page.index.index.BACKCONN_READY,scope:self});Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,
{scope:this})};this.toolTip=new JSM.window.Tooltip("tooltip_container",{el:{id:"tooltip_container"},mustRender:true,autoDestroy:true,autoDestroyElement:true});this.tagsearch=new JSM.component.TagSearch("listpage",{allPicsSel:".small, .big",searchId:"search",searchBarId:"header_search_bar",autoSuggestBl:"auto_suggest"});if(Chaos.Config.get("isMobileLogoutOverlayEnabled",true)&&Chaos.Cookie.get("logout")==1)this.logout=new JSM.overlay.Logout(this.overlayContainerId,{overlay:this.overlayId});if(Chaos.Config.get("isAdultWarningEnabled")&&
Chaos.Cookie.isCookieEnabled()&&!Chaos.Cookie.get("18popup")&&!Chaos.Cookie.get("ljlgin"))if(!hasChatAction)this.over18=new JSM.overlay.OverEighteen(this.overlayContainerId,{overlay:this.overlayId});if(Chaos.Cookie.get(this.bonusCreditRecommenderCookie)&&application.isLoggedIn()&&!hasChatAction)this._bonusCreditLoginPopup=new JSM.overlay.BonusCreditLogin(this.overlayContainerId,{overlay:this.overlayId});this.liveCamsLinkEl=Ext.get(this.liveCamsLinkId);JSM.page.index.index.superclass.init.call(this,
el,config);this.isRedirected();this.initListPagePlayer();this.initMemberApplet();Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);this._sendSpeedTestLog()},_sendSpeedTestLog:function(){var isSpeedTestLogNeeded=Math.ceil(Math.random()*50)==1;if(isSpeedTestLogNeeded&&window.performance)try{var domLoaded=window.performance.timing.domContentLoadedEventEnd,navStart=window.performance.timing.navigationStart,speed,params;if(Chaos.Validator.empty(domLoaded)&&
domLoaded>0&&Chaos.Validator.empty(navStart)&&navStart>0&&domLoaded-navStart<36E5){speed=domLoaded-navStart,params={speed:speed,uri:location.pathname+location.hash};Chaos.Log.log(Chaos.getUrl("Log/SiteSpeedLog"),params)}}catch(exception){}},onLoggedIn:function(ev){this.setMemberAuction()},setMemberAuction:function(){if(Ext.get(this.auctionPanelContainerId)!=null){if(!(this._memberAuction instanceof JSM.component.MemberAuction)){this._memberAuction=new JSM.component.MemberAuction(this.auctionPanelContainerId,
{});this.listPageController.addComponent({component:this._memberAuction,listeners:{}},"MemberAuction");if(this._slidePanelListerController)this._slidePanelListerController.addComponent({component:this._memberAuction,listeners:{}},"MemberAuction")}this.setMemberAuctionController()}},setMemberAuctionController:function(){if(!(this._memberAuctionController instanceof JSM.controller.MemberAuctionController))this._memberAuctionController=new JSM.controller.MemberAuctionController({init:function(){},items:{"Broadcaster":{component:Chaos.Broadcaster,
listeners:{"overlay-open":"onOverlayOpen","open-auction":"onShowMemberAuction"}},"Index":{component:this,listeners:{"member-auction-show":"onShowMemberAuction","success-refresh-listpage":"onSuccessRefreshListpage"}},"ListPagePlayer":{component:this.listPagePlayer,listeners:{}},"ListPageController":{component:this.listPageController,listeners:{}},"MemberAuction":{component:this._memberAuction,listeners:{"auction-panel-before-show":"onAuctionPanelBeforeShow","auction-panel-show":"onAuctionPanelShow",
"auction-panel-reopen":"onAuctionPanelReOpen","auction-panel-before-hide":"onAuctionPanelBeforeHide","auction-panel-hide":"onAuctionPanelHide","getblock-success":"onAuctionGetBlockSuccess","getblock-error":"onAuctionGetBlockError","connection-ready":"onConnectionReady","connection-closed":"onConnectionClosed","auction-start":"onAuctionStart","auction-in-progress":"onAuctionInProgress","auction-end":"onAuctionEnd","get-credits-click":"onGetCreditsClick"}}}})},checkOnlineFavorites:function(){var onlineFavNum=
Chaos.Config.get("OnlineFavorites"),isNotificationsEnabled=Chaos.Config.get("FavoritesNotifications")==1,favNotificationCookie=Chaos.Cookie.get("favNotification"),sessionCookie=Chaos.Cookie.get("session");if(onlineFavNum!=""&&onlineFavNum>0&&isNotificationsEnabled&&(!favNotificationCookie||favNotificationCookie!=sessionCookie)){Chaos.Cookie.set("favNotification",sessionCookie,"","/");this.fireEvent(JSM.page.index.index.EVENT_SHOW_ONLINE_FAVORITES_COUNT,{count:onlineFavNum})}},initMemberApplet:function(){if(this.memberAppletContainerIsEmbedded==
false){var memberAppletUrl=Chaos.Config.get(Ext.isIE11?"memberAppletUrl":"memberAppletContainerUrl"),memberAppletParams=Chaos.Config.get("memberAppletParams"),memberAppletFlashvars=Chaos.Config.get("memberAppletFlashvars"),memberAppletFlashvarsQS=Chaos.Config.get("memberAppletFlashvarsQS"),memberAppletAttributes=Chaos.Config.get("memberAppletAttributes");if(!Ext.isIE11)swfobject.embedSWF(memberAppletUrl,"chatapplet","1","1","9.0.0","expressInstall.swf",memberAppletFlashvars,memberAppletParams,memberAppletAttributes);
else{Ext.fly("chatapplet").remove();Ext.get(this.freeChatId).setStyle({"left":0+"px","top":0+"px","width":1+"px","height":1+"px"});memberAppletUrl=memberAppletUrl+"?"+(new Date).getTime();Ext.DomHelper.append("freechat",'<object id="'+"chatapplet"+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+memberAppletUrl+'" type="application/x-shockwave-flash" width="1" height="1">'+'<param name="movie" value="'+memberAppletUrl+'" />'+'<param name="quality" value="high" />'+'<param name="allowScriptAccess" value="always" />'+
'<param name="allowNetworking" value="all" />'+'<param name="wmode" value="window" />'+'<param name="allowFullScreen" value="true" />'+'<param name="allowFullScreenInteractive" value="true" />'+'<param name="FlashVars" value="'+memberAppletFlashvarsQS+'" />'+"</object>")}this.memberAppletContainerIsEmbedded=true;this.memberAppletFlash=Chaos.getFlashMovieObject("chatapplet");Chaos.fireEvent(JSM.page.index.index.EVENT_MEMBERAPPLET_EMBED,this)}if(typeof this.backConnFlashObject!="undefined")if(typeof this.backConnFlashObject.checkBackConnStatus==
"function")this.checkBackConnStatus();var self=this;window.backConn={};window.backConn.statusHandler=function(obj){self.statusUpdater.getNewStatuses(obj);if(typeof self.memberAppletFlash.updateRecommender=="function")self.memberAppletFlash.updateRecommender(obj)};this.slideButtonFavorite=new JSM.component.SlideButton("favorite_button",{slideButtonIconCls:"fav_btn_icon",slideButtonTitleSel:"fav_btn_title",showLoading:true,changeTitles:true});this.slideButtonFavorite.on(JSM.component.SlideButton.BUTTON_READY,
this.onFavoritesSlideButtonReady,this);this.setController();this.setSlidePanelListerController();if(Chaos.getMeta("isSearchPage")==0){this._listpageOrderTypeButton=new JSM.component.ListPageOrderButton("listpage_ordertype_button",{slideButtonIconCls:"listpage_ordertype_btn_icon",slideButtonTitleSel:"listpage_ordertype_btn_title",slideButtonTitleTextSel:"listpage_ordertype_btn_title_text",slideButtonListSel:"listpage_ordertype_list",slideButtonWidth:40,showLoading:true,changeTitles:true,horizontalDirection:"right",
startHorizontalPosition:10,plugins:{"ListPageBuilder":{}}});this.listPageController.addComponent({component:this._listpageOrderTypeButton,listeners:{}},"ListpageOrderTypeButton")}if(application.isLoggedIn()){JSM.component.UrlAction.registerAction({name:"favorites",fn:function(){Chaos.fireEvent("open-favorites")},scope:this});JSM.component.UrlAction.registerAction({name:"isShowFavourite",fn:function(){Chaos.fireEvent("open-favorites")},scope:this});this.setMemberAuction()}},onFavoritesSlideButtonReady:function(){if(application.isLoggedIn())this.checkOnlineFavorites()},
embedListPagePlayer:function(){if(this.embedListPagePlayerEmbedded==false){this.listPagePlayer=new JSM.component.ListPagePlayer("listpage",{flashPlayerConfig:{appendToId:"listpage_player",objectId:"ListPagePlayer",objectName:"ListPagePlayer",url:Chaos.Config.get("listPagePlayerUrl"),flashVars:Chaos.Config.get("listPagePlayerFlashVars")},xwidth:{small:"222",big:"451"},xheight:{small:"168",big:"343"},widthX:0,heightX:0,plugins:{"BackConn-plugin":{globalObjectId:"backConnParams",globalMethods:["setListPagePlayerParams",
"startFlashStream"]}}});this.embedListPagePlayerEmbedded=true}},initListPagePlayer:function(){this.ajaxQueue=new Chaos.AjaxQueue;this.statusUpdater=new JSM.component.StatusUpdater("listpage",{});window.backConn=this.statusUpdater;this.performerSwap=new JSM.component.PerformerSwap("listpage",{swapRouteHandler:"ListPageAjax/PerformersSwap",ajaxQueue:this.ajaxQueue});this.embedListPagePlayer();this.initListPage(false)},initListPage:function(reInit){if(!(this.lister instanceof JSM.component.Lister)&&
!(this.listPage instanceof JSM.component.ListPage)){this.lister=new JSM.component.Lister("listpage",{contentId:"listpage_",nextContentUrl:"ListPageAjax/ShowMoreJson",nextContentRouteParams:{listPageId:function(){return Chaos.getMeta("listPageId")}},nextContentQueryParams:function(){return Chaos.Config.get("isWide")?{wide:Chaos.Config.get("isWide"),layout:layoutManager.getCurrentLayout()}:{}},prevContentUrl:"ListPageAjax/ShowLessJson",prevContentRouteParams:{listPageId:function(){return Chaos.getMeta("listPageId")}},
prevContentQueryParams:function(){return Chaos.Config.get("isWide")?{wide:Chaos.Config.get("isWide"),layout:layoutManager.getCurrentLayout()}:{}},loaderCls:"loader",showMoreBtnId:"show_more_btn",showMoreBtnContainerSel:".button_container",extraShowMoreEnabled:true,buildFromJSONData:true,plugins:{"ListPageBuilder":{commercialImageUrl:Chaos.Config.get("commercialImgUrl"),boxTemplate:'<div id="container_{id}" class="{containerClass} '+"{statusCls}"+'">'+'<a id="performer_{id}" class="{anchorClass}" rev="{rev}" rel="{searchSuggest}" href="{href}" target="{target}">'+
'<span style="float:left;padding:5px 10px;background:#000;font-size:12px;position:absolute;left:0;top:0;display:'+(JSM.Util.isProduct()&&Chaos.Config.get("isInternalRequest")&&Chaos.Cookie.get("forceConsole")||!JSM.Util.isProduct()?"block":"none")+'">'+"{quality}"+" "+"{gravityCategory}"+" "+"{gravityDebug}"+"</span>"+'<span class="add_favorite'+"{isFavorite}"+'">&nbsp;</span>'+"{badgeBlock}"+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<img id="{imageId}" src="{src}" alt="{name}" />'+
"</a>"+"</div>"},"ImageChecker-plugin":{}}});this.listPage=new JSM.component.ListPage("listpage",{contentId:"listpage_",showMoreBtnId:"show_more_btn",plugins:{"Favorites-plugin":{},"ModelName":{}}});if(this.listPageController){this.listPageController.removeComponent("Lister");this.listPageController.addComponent({component:this.lister,listeners:{"insert-down-done":"onListerInsertedContentDown","insert-up-done":"onListerInsertedContentUp","remove-block":"onListerRemoveBlock","show-more-error":"showMoreError"}},
"Lister");this.listPageController.removeComponent("ListPage");this.listPageController.addComponent({component:this.listPage,listeners:{"thumb-mousedown":"onListPageThumbMouseDown","thumb-ctrl-mousedown":"onListPageThumbCtrlMouseDown","thumb-right-mousedown":"onListPageThumbRightMouseDown","thumb-mouseover":"onListPageThumbMouseOver","thumb-mouseout":"onListPageThumbMouseOut","body-keypress":"onListPageKeyPress","body-keyup":"onListPageKeyUp","body-keydown":"onListPageKeyDown","body-esc-keydown":"onListPageEscKeyDown",
"body-esc-keyup":"onListPageEscKeyUp","body-esc-keypress":"onListPageEscKeyPress","body-mouseout":"onBodyMouseOut","body-click":"onBodyClick","favorite-button-mousedown":"onAddFavoriteButtonMouseDown","favorite-button-update":"onListPageFavoriteButtonUpdate","display-model-name":"onDisplayModelName"}},"ListPage")}}else if(reInit){this.unbindThumbsBeforeRemove();this.lister.unbind();delete this.lister;this.listPage.unbind();delete this.listPage;this.initListPage(false)}},preventLoadFromCache:function(){var cacheCookie=
Chaos.Cookie.get("loadedFromServer");if(cacheCookie!=undefined&&Chaos.Cookie.isCookieEnabled())if(cacheCookie=="1")Chaos.Cookie.set("loadedFromServer","0",2592E3,"/",Chaos.Config.get("topdomain"));else if(cacheCookie=="0")window.location.reload()},setSlidePanelListerController:function(){this._slidePanelListerController=new JSM.controller.SlidePanelListerController({init:function(){},items:{"IndexBroadcaster":{component:Chaos.Broadcaster,listeners:{"logged-in":"onLoggedIn","signup-success":"onSignupSuccess",
"open-favorites":"onOpenFavorites","favorites-select-button-click":"onFavoritesSelectButtonClick","overlay-open":"onOverlayOpen","overlay-close":"onOverlayClose"}},"Index":{component:this,listeners:{"success-refresh-listpage":"onSuccessRefreshListpage"}},"ListPage":{component:this.listPage,listeners:{"thumb-mouseout":"onThumbMouseOut"}},SlideButtonFavorite:{component:this.slideButtonFavorite,listeners:{"slidebutton-clicked":"onFavoriteButtonClick","slidebutton-mouse-over":"onFavoriteSlideButtonMouseOver",
"slidebutton-mouse-out":"onFavoriteSlideButtonMouseOut"}}}})},setController:function(){this.listPageController=new JSM.controller.ListPageController({init:function(){},items:{"IndexBroadcaster":{component:Chaos.Broadcaster,listeners:{"log-in":"onLogIn","topslidemessage-show":"onTopSlideMessageShow","topslidemessage-hide":"onTopSlideMessageHide","before-content-replace":"onBeforeContentReplace","after-content-replace":"onAfterContentReplace","window-show":"onWindowShow","window-hide":"onWindowHide",
"close-chat-multi-window":"onCloseChatMultiWindow","open-chat":"onOverlayChatOpened","close-chat":"onOverlayChatClosed","overlay-open":"onOverlayOpen","overlay-close":"onOverlayClose","set-scroll":"onSetScroll","global-status-change":"onGlobalStatusChange","header-refresh":"onHeaderRefresh","dropdown-save-settings":"onDropdownSaveSettings","slidepanel-open":"onSlidePanelOpen","slidepanel-close":"onSlidePanelClose"}},"Index":{component:this,listeners:{"open-overlay-chat":"onOpenOverlayChat","success-refresh-listpage":"onSuccessRefreshListpage",
"show-online-favorites-count":"onShowOnlineFavoritesCount"}},"Lister":{component:this.lister,listeners:{"insert-down-done":"onListerInsertedContentDown","insert-up-done":"onListerInsertedContentUp","remove-block":"onListerRemoveBlock","show-more-error":"showMoreError"}},"ListPage":{component:this.listPage,listeners:{"thumb-mousedown":"onListPageThumbMouseDown","thumb-ctrl-mousedown":"onListPageThumbCtrlMouseDown","thumb-right-mousedown":"onListPageThumbRightMouseDown","thumb-mouseover":"onListPageThumbMouseOver",
"thumb-mouseout":"onListPageThumbMouseOut","body-keypress":"onListPageKeyPress","body-keyup":"onListPageKeyUp","body-keydown":"onListPageKeyDown","body-esc-keydown":"onListPageEscKeyDown","body-esc-keyup":"onListPageEscKeyUp","body-esc-keypress":"onListPageEscKeyPress","body-mouseout":"onBodyMouseOut","body-click":"onBodyClick","favorite-button-mousedown":"onAddFavoriteButtonMouseDown","favorite-button-update":"onListPageFavoriteButtonUpdate","display-model-name":"onDisplayModelName"}},"ListPagePlayer":{component:this.listPagePlayer,
listeners:{"listpageplayer-click":"onListPagePlayerAppletClick"}},"StatusUpdater":{component:this.statusUpdater,listeners:{"status-changed":"onStatusChanged"}},"PerformerSwap":{component:this.performerSwap,listeners:{}},"TagSearch":{component:this.tagsearch,listeners:{}},"SlideButtonFavorite":{component:this.slideButtonFavorite,listeners:{}}}})},isRedirected:function(){var showPerformerMeta=Chaos.getMeta("showPerformer");if(showPerformerMeta)this.fastEmbedding()},fastEmbedding:function(){this.memberAppletFlashvars=
Chaos.Config.get("memberAppletFlashvars");this.memberAppletFlashvars.restore=1;this.embedListPagePlayer();this.embedListPagePlayerEmbedded=true;this.initMemberApplet();this.memberAppletContainerIsEmbedded=true},checkBackConnStatus:function(){Chaos.getFlashMovieObject("flash_backconn").checkBackConnStatus()},onHeaderLogoClick:function(ev,target){this.refreshListPage(ev,target)},onLiveCamsLinkClick:function(ev,target){this.refreshListPage(ev,target)},onRefreshListpage:function(refreshParams){this.setShowMoreJsonQueryParams({listPageOrderType:refreshParams.orderType});
this.refreshListPage(refreshParams.ev,refreshParams.target)},getListedPerformerUrl:function(){return Chaos.getUrl("ListPageAjax/ShowMoreJson",{listPageId:"0"},Chaos.Config.get("isWide")?this.getShowMoreJsonQueryParams():{},"")},setShowMoreJsonQueryParams:function(queryParamsLiteral){var key;this._showMoreJsonQueryParams={wide:Chaos.Config.get("isWide")||false,layout:layoutManager.getCurrentLayout()};if(queryParamsLiteral)for(key in queryParamsLiteral)this._showMoreJsonQueryParams[key]=queryParamsLiteral[key]},
getShowMoreJsonQueryParams:function(){this._showMoreJsonQueryParams.category=Chaos.getMeta(this._category);return this._showMoreJsonQueryParams},refreshListPage:function(ev,target){if(this._ajaxListPageRefreshCounter<5&&Chaos.getMeta("isSearchPage")=="0"){ev.preventDefault();JSM.Util.setCursor("wait");Chaos.Ajax.request({url:this.getListedPerformerUrl(),method:"get",type:"json",scope:this,success:function(response){this.refreshListPageSuccess(response)},error:function(){this.refreshPage()},failure:function(){this.refreshPage()}})}else this.refreshPage()},
refreshListPageSuccess:function(response){var resp=response.json.data,searchResult,listPagePages;if(Chaos.getMeta("isSearchPage")==0)Chaos.Config.set("listPageOrderType",resp.listPageOrderType);if(resp.content.performers.length===0)location.reload();this.unbindThumbsBeforeRemove();searchResult=this.lister.plugins.ListPageBuilder.setBlocks(resp);this.lister.plugins.ListPageBuilder.refreshListPageId(resp.content.listPageId);this.lister.plugins.ListPageBuilder.replaceContent(searchResult,this.lister.element.id);
this._ajaxListPageRefreshCounter++;JSM.Util.setCursor("default");this.initListPage(true);this.fireEvent(JSM.page.index.index.EVENT_SUCCESS_REFRESH_LISTPAGE,{scope:this});if(this._listpageOrderTypeButton)this._listpageOrderTypeButton.resetOrderedList()},refreshPage:function(url){if(url)location.href=url;else location.href=Chaos.Config.get("mainPageUrl")},onInitListpage:function(reInit){this.initListPage(reInit)},unbindThumbsBeforeRemove:function(){var listPagePages=this.element.select(".page"),i;if(listPagePages.elements.length>
0)for(i in listPagePages.elements)if(listPagePages.elements.hasOwnProperty(i))this.listPage.unbindThumbs(listPagePages.elements[i].id)},bind:function(){JSM.page.index.index.superclass.bind.call(this);Ext.get(this.headerLogoId).on("click",this.onHeaderLogoClick,this);if(this.liveCamsLinkEl!==null)this.liveCamsLinkEl.on("click",this.onLiveCamsLinkClick,this);Chaos.Broadcaster.on(JSM.page.index.index.GLOBALEVENT_DO_INIT_LISTPAGE,this.onInitListpage,this);Chaos.Broadcaster.on(JSM.page.index.index.GLOBALEVENT_REFRESH_LISTPAGE,
this.onRefreshListpage,this)},unbind:function(){JSM.page.index.index.superclass.unbind.call(this);Ext.get(this.headerLogoId).un("click",this.onHeaderLogoClick,this);if(this.liveCamsLinkEl!==null)this.liveCamsLinkEl.un("click",this.onLiveCamsLinkClick,this)}});Ext.namespace("JSM.page.messages");JSM.page.messages.conversation=function(el,config){JSM.page.messages.conversation.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.conversation,Chaos.Page,{name:"page.conversation",conversationContainerId:"conversation_container",init:function(el,config){JSM.page.messages.conversation.superclass.init.call(this,el,config);var _isSupport=Ext.fly(this.conversationContainerId).hasClass("support");this._conversationComponent=new JSM.component.MessageConversation(this.element,{blockId:"container",overlayBlockHeight:undefined,isSupport:_isSupport,messageBlockId:"standalone_message"})},bind:function(){JSM.page.messages.conversation.superclass.bind.call(this)},
unbind:function(){JSM.page.messages.conversation.superclass.unbind.call(this)}});Ext.namespace("JSM.page.messages");JSM.page.messages.index=function(el,config){JSM.page.messages.index.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.index,Chaos.Page,{name:"page.messages",overlayId:"overlay",overlayEnabled:true,overlayContainerId:"overlay_container",newMessageFormId:"message_form",messageFieldId:"message",counterId:"message_char_number",charInfoId:"message_char_info",init:function(el,config){console.log("messages.index.init done.");if(this.overlayEnabled){this._messagesOverlay=new JSM.overlay.Messages(this.overlayContainerId,{isConstant:true,xdomain:true,mustGetContent:false,useBreadCrumb:false,
overlay:this.overlayId,isOverlay:false,autoDestroy:false,autoDestroyElement:false,elementContainerId:"standalone_message",getContentRoute:"Messages/ThreadList",showContent:true,getContentUrl:"Messages/ThreadList",newMessageURL:"Messages/New",conversationURL:"Messages/Conversation",conversationSupportURL:"Messages/Conversation",supportMessageURL:"Messages/New",deleteMessageURL:"Messages/Delete",conversationPagerURL:"Messages/Conversation",conversationSupportPagerURL:"Messages/Conversation",messageListPagerURL:"Messages/ThreadList"});
this._messagesOverlay.setComponent();this._messagesOverlay._messageComponent.on(JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK,this.onNewMessageClick,this);this._messagesOverlay._messageComponent.on(JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK,this.onSupportMessageClick,this)}else;JSM.page.messages.index.superclass.init.call(this,el,config)},onNewMessageClick:function(ev,target){if(this.overlayEnabled){this._newMessageOverlay=this._messagesOverlay.setNewMessageOverlay();this._newMessageOverlay.on(JSM.overlay.NewMessage.EVENT_MESSAGE_BACK_LINK_CLICK,
this.hideOverlay,this)}},onSupportMessageClick:function(ev){if(this.overlayEnabled){this._supportMessageOverlay=this._messagesOverlay.setSupportMessageOverlay();this._supportMessageOverlay.on(JSM.overlay.MessageSupport.EVENT_MESSAGE_BACK_LINK_CLICK,this.hideOverlay,this)}},onThreadClick:function(ev){if(this.overlayEnabled)console.log("KING KONG ",ev)},hideOverlay:function(ev){if(ev&&typeof ev.hide=="function")ev.hide()},bind:function(){JSM.page.messages.index.superclass.bind.call(this)},unbind:function(){JSM.page.messages.index.superclass.unbind.call(this)}});
Ext.namespace("JSM.page.messages");JSM.page.messages.newmessage=function(el,config){JSM.page.messages.newmessage.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.newmessage,Chaos.Page,{name:"messages.newmessage",init:function(el,config){JSM.page.messages.newmessage.superclass.init.call(this,el,config);this._newMessageComponent=new JSM.component.NewMessage(this.element,{creditPriceBlockId:"credit_price_new",creditTextId:"credit_info_new_message",creditInfoRoute:"Messages/Price",isOverlay:false,searchFieldNeeded:true,mainBlockId:"container",messageBlockId:"standalone_message"})},bind:function(){JSM.page.messages.newmessage.superclass.bind.call(this)},
unbind:function(){JSM.page.messages.newmessage.superclass.unbind.call(this)}});Ext.namespace("JSM.page.messages");JSM.page.messages.newperformermessage=function(el,config){JSM.page.messages.newperformermessage.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.newperformermessage,Chaos.Page,{name:"messages.newperformermessage",init:function(el,config){JSM.page.messages.newperformermessage.superclass.init.call(this,el,config);this._newMessageComponent=new JSM.component.NewMessage(this.element,{creditPriceBlockId:"credit_price_new",creditTextId:"credit_info_new_message",creditInfoRoute:"Messages/Price",isOverlay:false,searchFieldNeeded:true,mainBlockId:"container"})},bind:function(){JSM.page.messages.newperformermessage.superclass.bind.call(this)},
unbind:function(){JSM.page.messages.newperformermessage.superclass.unbind.call(this)}});Ext.namespace("JSM.page.messages");JSM.page.messages.newsupportmessage=function(el,config){JSM.page.messages.newsupportmessage.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.newsupportmessage,Chaos.Page,{name:"messages.newsupportmessage",init:function(el,config){console.log("JSM.page.messages.newsupportmessage.init done.");JSM.page.messages.newsupportmessage.superclass.init.call(this,el,config);this._newSupportMessageComponent=new JSM.component.MessageSupport(this.element,{isOverlay:false,messageBlockId:"standalone_message",mainBlockId:"container",newsupportmessageFormId:"message_form",messageFieldId:"support_message",creditPriceBlockId:"credit_price_new",
creditTextId:"credit_info_new_message",inputId:"support_message",charInfoId:"message_char_info"})},bind:function(){JSM.page.messages.newsupportmessage.superclass.bind.call(this)},unbind:function(){JSM.page.messages.newsupportmessage.superclass.unbind.call(this)}});Ext.namespace("JSM.page.messages");JSM.page.messages.threadlist=function(el,config){JSM.page.messages.threadlist.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.messages.threadlist,Chaos.Page,{name:"messages.threadlist",init:function(el,config){JSM.page.messages.threadlist.superclass.init.call(this,el,config);this._messageConversation=new JSM.component.Messages(this.element,{conversationContainerId:"message_list",conversationListSel:"#message_list_container",isOverlay:false})},bind:function(){JSM.page.messages.threadlist.superclass.bind.call(this)},unbind:function(){JSM.page.messages.threadlist.superclass.unbind.call(this)}});Ext.namespace("JSM.page.setting");
JSM.page.setting.account=function(el,config){JSM.page.setting.account.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.account,Chaos.Page,{name:"page.settings",url:"",layout:null,customCallback:function(formId,response,opts){var from=formId.replace("_form","");Ext.select(".content_row").setStyle("position","relative");Ext.select(".error_message").setStyle("display","none");Ext.get(from+"_saved").setStyle("display","block");if(from=="account_password"){Ext.get("display_password").dom.innerHTML="********";if(Ext.get("set_new_password").isVisible()){Ext.get("set_new_password").remove();
Ext.get("reset_password").show()}}if(from=="account_set_email")this.gotoSettings();this.fadeSavedLabel.defer(6E3,this,[from]);this.toggleBox.closeContainer();if(this.emailForm instanceof JSM.form.Form)this.emailForm.hideHint().hideAllErrors();if(this.getPasswordForm instanceof JSM.form.Form)this.getPasswordForm.hideHint().hideAllErrors();if(this.setEmailForm instanceof JSM.form.Form)this.setEmailForm.hideHint().hideAllErrors();if(this.passwordForm instanceof JSM.form.Form)this.passwordForm.hideHint().hideAllErrors()},
fadeSavedLabel:function(div){Ext.get(div+"_saved").fadeOut({useDisplay:true})},init:function(el,config){var selectOpened=false;Ext.select("a.select_arrow").on("click",function(){if(!selectOpened){Ext.get(this.id).addClass("active");document.getElementById(this.id.replace("_arrow","_options")).style.display="block";document.getElementById(this.id.replace("_arrow","_options")).style.width=Ext.get(this.id.replace("_arrow","")).getWidth()-2+"px";selectOpened=true}else{Ext.get(this.id).removeClass("active");
document.getElementById(this.id.replace("_arrow","_options")).style.display="none";selectOpened=false}});var sessionId=document.cookie.replace(/.*session\=/,"").split(";")[0];Ext.select(".session_id").each(function(){if(this.dom.value=="")this.dom.value=sessionId});if(Ext.fly("account_password_form")!=null)this.passwordForm=new JSM.form.Form("account_password_form",{scope:this,maskMode:"disabled",isAjax:true,isBackConnNeeded:true,requestParams:["session","form_token","token","old_password","password1",
"password2"],handleToken:true,showHints:true,success:this.customCallback,useModalForGeneralErrors:false});if(Ext.fly("account_email_form")!=null)this.emailForm=new JSM.form.Form("account_email_form",{scope:this,maskMode:"disabled",isAjax:true,isBackConnNeeded:true,requestParams:["session"],showHints:false,handleToken:false,success:this.customCallback,useModalForGeneralErrors:false});if(Ext.fly("account_set_email_form")!=null)this.setEmailForm=new JSM.form.Form("account_set_email_form",{scope:this,
maskMode:"disabled",isAjax:true,isBackConnNeeded:true,requestParams:["session","form_token","token","password","new_email"],submitIfRemoteValid:true,showErrorsOnBlur:true,errorHideDuration:0,submitOnSubmit:true,handleToken:true,showHints:true,success:this.customCallback,useModalForGeneralErrors:false});if(Ext.fly("account_getpassword_form")!=null)this.getPasswordForm=new JSM.form.Form("account_getpassword_form",{scope:this,maskMode:"disabled",isAjax:true,isBackConnNeeded:true,requestParams:[],handleToken:true,
showHints:false,success:this.customCallback,useModalForGeneralErrors:false});this.toggleBox=new JSM.component.ToggleBox("content_account",{scope:this});JSM.page.setting.account.superclass.init.call(this,el,config)},hideAllErrors:function(){if(Ext.fly("account_getpassword_form")!=null)this.getPasswordForm.hideAllErrors();if(Ext.fly("account_set_email_form")!=null)this.setEmailForm.hideAllErrors();if(Ext.fly("account_email_form")!=null)this.emailForm.hideAllErrors();if(Ext.fly("account_password_form")!=
null)this.passwordForm.hideAllErrors()},showError:function(errorMsg){JSM.form.failureNotice.show(errorMsg)},gotoSettings:function(){window.location=Chaos.getUrl("Setting/Index",{},{},"")},onDeleteButtonClick:function(){window.location=Chaos.getUrl("Setting/CancelMembership",{},{step:1},"")},load:function(){},bind:function(){JSM.page.setting.account.superclass.bind.call(this);this.toggleBox.on("close",this.hideAllErrors,this);if(Ext.get("delete_account_btn")!=null)Ext.get("delete_account_btn").on("click",
this.onDeleteButtonClick,this)},unbind:function(){JSM.page.setting.account.superclass.unbind.call(this)}});Ext.namespace("JSM.page.setting");JSM.page.setting.cancelmembership=function(el,config){JSM.page.setting.cancelmembership.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.cancelmembership,Chaos.Page,{name:"page.settings",ieOverlayId:"delmembership_overlay",ieFooterOverlayExtra:6,boxCls:"delete_membership_box",init:function(el,config){this.deletePopupBtn=Ext.get("delete_popup_btn");if(Ext.isIE7)if(Ext.get("delete_popup")!=null)Ext.DomHelper.insertBefore(Ext.get("delete_popup"),'<div id="'+this.ieOverlayId+'"></div>');if(Ext.get("delete_member_form")!=null){this.deleteMemberForm=new JSM.form.Form("delete_member_form",{scope:this,maskMode:"disabled",
isAjax:false,async:true,handleToken:false,showHints:false,showErrorsOnEdit:false,showErrorsOnBlur:false,showErrorsOnSubmit:false,disableSubmitOnSubmit:true,useModalForGeneralErrors:false,rules:{},fields:{comment:{emptyText:Chaos.translate("The reason...")}},plugins:{"InputHint":{}},decorator:true});this.characterCounterDeleteMember=new JSM.component.CharacterCounter("delete_member_form",{scope:this,inputId:"comment",counterId:"delete_membership_char_number",infoId:"delete_membership_char_info",maxCharTemplate:function(maxCharText){return"<p>"+
maxCharText+"</p>"},maxCharText:Chaos.translate("You &#39;ve reached the maximum length of this message (4000 characters)."),warningCharTemplate:function(){return""},warningCharText:""})}if(Ext.get("delete_membership_table"))this.toggleBox=new JSM.component.ToggleBox("delete_membership_table",{});JSM.page.setting.cancelmembership.superclass.init.call(this,el,config)},onShowDeletePopupClick:function(ev,target){ev.preventDefault();var deletePopup=new Chaos.Window("delete_popup",{top:"center",left:"center",
overlay:Ext.isIE7?this.ieOverlayId:"overlay",isModal:true,showMode:"fixed",overlayTopPosition:40});deletePopup.show();if(Ext.isIE7){deletePopup.on("show",function(){Ext.get("footer").setStyle("position","static")});deletePopup.on("hide",function(){Ext.get("footer").setStyle("position","absolute")})}if(Ext.isIE7)if(Ext.get("overlay")!=null){var screenHeight=parseInt(document.body.clientHeight),footerHeight=parseInt(Ext.get("footer").getHeight()),overlayTopValue=screenHeight-footerHeight+this.ieFooterOverlayExtra;
Ext.get("overlay").setStyle({"top":overlayTopValue});Ext.get("overlay").show(0)}},bind:function(){JSM.page.setting.cancelmembership.superclass.bind.call(this);if(this.deletePopupBtn!=null)this.deletePopupBtn.on("click",this.onShowDeletePopupClick,this)},unbind:function(){JSM.page.setting.cancelmembership.superclass.unbind.call(this);if(this.deletePopupBtn!=null)this.deletePopupBtn.un("click",this.onShowDeletePopupClick,this)}});Ext.namespace("JSM.page.setting");
JSM.page.setting.general=function(el,config){JSM.page.setting.general.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.general,Chaos.Page,{name:"page.settings",layout:null,selectList:undefined,isSaveData:false,init:function(el,config){var sessionId=document.cookie.replace(/.*session\=/,"").split(";")[0],errorTemplate="<p>{errorMsg}</p>";this.selectList=new JSM.component.SelectList("language_list_select",{inputSel:"input[name=language_select]",cancelBtnSel:".cancel_btn",scrollPaneContainerId:"language_list_container",scrollPaneConfig:{contentSel:"ul",hideDuration:"0",isAutoHide:false,
hideOnMouseout:false,showDuration:0}});Ext.select(".session_id").each(function(){if(this.dom.value=="")this.dom.value=sessionId});this.languageForm=new JSM.form.Form("language_form_setting",{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session","form_token","language"],handleToken:true,showHints:true,success:function(){location.reload()},useModalForGeneralErrors:false,errorTemplate:errorTemplate});this.emailNotificationsForm=new JSM.form.Form("email_notifications_form_setting",{scope:this,
maskMode:"disabled",isAjax:true,requestParams:["session","form_token","email_notifications"],decorator:false,success:this.customCallback,checkedAllBox:true,errorTemplate:errorTemplate,submitOnSubmit:false,checkBoxItems:{checkbox_replacement_email_support:{hiddenInputId:"email_support",activeClass:"active",onCheckedValue:"1",unCheckedValue:"0"},checkbox_replacement_email_performers:{hiddenInputId:"email_performers",activeClass:"active",onCheckedValue:"1",unCheckedValue:"0"}}});this.emailNotificationsForm.on("before-submit",
this.onEmailNotificationsBeforeSubmit,this);this.newsletterForm=new JSM.form.Form("newsletter_subscribe_form_setting",{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session","form_token","newsletter_subscribe"],decorator:false,success:this.customCallback,errorTemplate:errorTemplate,checkBoxItems:{checkbox_replacement_newsletter_subscribe:{hiddenInputId:"newsletter_subscribe",activeClass:"active",onCheckedValue:"on",unCheckedValue:"off"}}});this.favoritesForm=new JSM.form.Form("favorites_notifications_form_setting",
{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session","form_token","favorites_notifications"],decorator:false,success:this.customCallback,errorTemplate:errorTemplate,checkBoxItems:{checkbox_replacement_favorites_notifications:{hiddenInputId:"favorites_notifications",activeClass:"active",onCheckedValue:"on",unCheckedValue:"off"}}});this.qualityNotificationsForm=new JSM.form.Form("quality_notifications_form_setting",{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session",
"form_token","quality_notifications"],decorator:false,success:this.customCallback,errorTemplate:errorTemplate,checkBoxItems:{checkbox_replacement_quality_notifications:{hiddenInputId:"quality_notifications",activeClass:"active",onCheckedValue:"on",unCheckedValue:"off"}}});this.unitsForm=new JSM.form.Form("units_form_setting",{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session","form_token","units"],decorator:false,success:this.customCallback,errorTemplate:errorTemplate,radioBoxItems:{units_imperial:{hiddenInputId:"units",
activeClass:"active",onCheckedValue:"imperial",unCheckedValue:"0"},units_metric:{hiddenInputId:"units",activeClass:"active",onCheckedValue:"metric",unCheckedValue:"0"}}});this.privateForm=new JSM.form.Form("private_invitations_form_setting",{scope:this,maskMode:"disabled",isAjax:true,requestParams:["session","form_token","private_invitations"],decorator:false,success:this.customCallback,errorTemplate:errorTemplate,checkBoxItems:{checkbox_replacement_private:{hiddenInputId:"private",activeClass:"active",
onCheckedValue:"on",unCheckedValue:"off"}}});this.toggleBox=new JSM.component.ToggleBox("content_general",{});JSM.page.setting.general.superclass.init.call(this,el,config);this.toggleBox.on(JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,this.onCloseContainer,this);this.toggleBox.on(JSM.component.ToggleBox.EVENT_BEFORE_OPEN,this.onOpenContainer,this)},onEmailNotificationsBeforeSubmit:function(){var checkBoxes=this.emailNotificationsForm.getCheckBoxes(),value;if(checkBoxes["email_support"]=="0"&&checkBoxes["email_performers"]==
"0")value="off";else if(checkBoxes["email_support"]=="1"&&checkBoxes["email_performers"]=="1")value="all";else if(checkBoxes["email_support"]=="0"&&checkBoxes["email_performers"]=="1")value="models";else if(checkBoxes["email_support"]=="1"&&checkBoxes["email_performers"]=="0")value="support";this.emailNotificationsForm.element.dom["email_notifications"].value=value;this.emailNotificationsForm.submitOnSubmit=true;this.emailNotificationsForm.submit();this.emailNotificationsForm.submitOnSubmit=false},
customCallback:function(formId,response,opts){var _onTranslate=Chaos.translate("On"),_offTranslate=Chaos.translate("Off"),from=formId.replace("_form_setting","");Ext.select(".content_row").setStyle("position","relative");var fadeSavedLabel=function(div){Ext.get(div+"_saved").fadeOut({useDisplay:true})};if(from=="language"){Ext.get("display_language").dom.innerHTML=Ext.get("language").getValue();var lang=Ext.get("language_hidden").dom.value;Chaos.I18n.getInstance().setLanguage(lang);Chaos.Cookie.set(Chaos.Config.get("langJasmin1Cookie"),
lang,2592E3,"/",Chaos.Config.get("cookiedomain"));Chaos.Cookie.set(Chaos.Config.get("langJasmin2Cookie"),lang,2592E3,"/",Chaos.Config.get("cookiedomain"));if(Chaos.Cookie.isCookieEnabled())document.location=Chaos.getUrl("Setting/General",{},{},"");else document.location=Chaos.getUrl("Setting/General",{},{session:JSM.Util.getSessionId()},"")}if(from=="email_notifications"){var reText=[],checkBoxPerformerEl=Ext.get("email_performers"),checkBoxSupportEl=Ext.get("email_support");if(checkBoxPerformerEl.dom.checked)reText.push(Chaos.translate("Notification from Model"));
if(checkBoxSupportEl.dom.checked)if(checkBoxPerformerEl.dom.checked)reText=_onTranslate;else reText.push(Chaos.translate("Notification from Support"));if(!checkBoxPerformerEl.dom.checked&&!checkBoxSupportEl.dom.checked)reText=_offTranslate;Ext.get("display_email_notifications").dom.innerHTML=reText}if(from=="newsletter_subscribe"){var displayNewslNotificationsEl=Ext.get("display_newsletter_subscribe"),newslNotificationsCheckboxEl=Ext.get("newsletter_subscribe");if(newslNotificationsCheckboxEl.dom.checked)displayNewslNotificationsEl.dom.innerHTML=
Chaos.translate("Enable");else displayNewslNotificationsEl.dom.innerHTML=Chaos.translate("Disable")}if(from=="favorites_notifications"){var displayFavNotificationsEl=Ext.get("display_favorites_notifications"),favNotificationsCheckboxEl=Ext.get("favorites_notifications");if(favNotificationsCheckboxEl.dom.checked)displayFavNotificationsEl.dom.innerHTML=_onTranslate;else displayFavNotificationsEl.dom.innerHTML=_offTranslate}if(from=="quality_notifications"){var displayQualityNotificationsEl=Ext.get("display_quality_notifications"),
qualityNotificationsCheckboxEl=Ext.get("quality_notifications");if(qualityNotificationsCheckboxEl.dom.checked)displayQualityNotificationsEl.dom.innerHTML=_onTranslate;else displayQualityNotificationsEl.dom.innerHTML=_offTranslate}if(from=="units"){var hiddenInputEl=Ext.get("units"),hiddenInputValue=hiddenInputEl.getValue(),displayUnitsEl=Ext.get("display_units");if(hiddenInputValue=="imperial")displayUnitsEl.dom.innerHTML=Chaos.translate("Imperial");if(hiddenInputValue=="metric")displayUnitsEl.dom.innerHTML=
Chaos.translate("Metric")}if(from=="private_invitations"){var privateCheckBoxEl=Ext.get("private"),displayPrivateEl=Ext.get("display_private");if(privateCheckBoxEl.dom.checked)displayPrivateEl.dom.innerHTML=Chaos.translate("Enable");else displayPrivateEl.dom.innerHTML=Chaos.translate("Disable")}Ext.get(from+"_saved").setStyle("display","block");fadeSavedLabel.defer(6E3,this,[from]);this.isSaveData=true;this.toggleBox.closeContainer()},displayErrorMsg:function(focusOn,errorMsg){JSM.form.showErrorMessage.display(focusOn,
errorMsg)},onCloseContainer:function(){if(this.isSaveData==false){this.emailNotificationsForm.onCancelBtnClick();this.qualityNotificationsForm.onCancelBtnClick();this.unitsForm.onCancelBtnClick();this.privateForm.onCancelBtnClick()}},onOpenContainer:function(){this.isSaveData=false;this.emailNotificationsForm.loadFunctions();this.qualityNotificationsForm.loadFunctions();this.unitsForm.loadFunctions();this.privateForm.loadFunctions()},selectItem:function(ev){var selectedLangCode=ev.target.id;Ext.get("language_hidden").dom.value=
selectedLangCode},bind:function(){JSM.page.setting.general.superclass.bind.call(this);this.selectList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,this.selectItem,this)},unbind:function(){JSM.page.setting.general.superclass.unbind.call(this);this.selectList.un(JSM.component.SelectList.EVENT_ITEM_SELECT,this.selectItem,this);this.toggleBox.un(JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,this.onCloseContainer,this);this.toggleBox.un(JSM.component.ToggleBox.EVENT_BEFORE_OPEN,this.onOpenContainer,this)}});
Ext.namespace("JSM.page");Ext.namespace("JSM.page.signup");JSM.page.signup.signupmember=function(el,config){JSM.page.signup.signupmember.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.signup.signupmember,Chaos.Page,{name:"page.signup.signupmember",layout:null,signupButtonId:"signup_submit",signupButtonEl:undefined,userNameExistsId:"username_exists",userNameExistsEl:undefined,usernameFieldId:"ajax_response",usernameFieldErrorId:"username_error",usernameFieldEl:undefined,newNickRoute:"Validate/GetNewNick",nickCheckRoute:"Validate/CheckNick",newNickUrl:undefined,formId:"signup_form",nickId:"username",passwordId:"password",emailId:"email",formTokenId:"form_token_signup",
nickEl:undefined,formTokenEl:undefined,usernameRefreshOpened:false,signupCaptchaId:"captcha_block",maxEmailCharLimitNumber:255,maxNameCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",captchaImgId:"captchaimg",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",durationTime:0.5,_signupForm:undefined,init:function(el,config){Chaos.Ajax.registerCommand("displayUsernameRefresh",this.displayUsernameRefresh,this);this.nickEl=Ext.get(this.nickId);
this.usernameFieldEl=Ext.get(this.usernameFieldId);this.userNameExistsEl=Ext.get(this.userNameExistsId);this.formTokenEl=Ext.get(this.formTokenId);this.signupButtonEl=Ext.get(this.signupButtonId);this.usernameFieldErrorEl=Ext.get(this.usernameFieldErrorId);this.isValidForm=false;this._signupForm=new JSM.form.Form(this.formId,{scope:this,maskMode:"disabled",isAjax:false,disableSubmitOnSubmit:true,hasCaptcha:true,captchaConfig:{containerId:this.signupCaptchaId,captchaImg:this.captchaImgId,captchaRefreshBtnId:"refresh_captcha",
captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:this.captchaInputId}});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxNameCharLimitNumber,hasWarningLimit:false,inputId:this.nickId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,
{maxChar:this.maxNameCharLimitNumber,hasWarningLimit:false,inputId:this.passwordId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._passwordCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);this._emailCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxEmailCharLimitNumber,hasWarningLimit:false,inputId:this.emailId,charInfoId:this.hintContainerId,isShowCounter:false,
isMaxCharSound:true});this._emailCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this);this.captchaBlockEl=Ext.get(this.captchaBlockId);if(this.captchaBlockEl.getStyle("display")!="none"){this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,hasWarningLimit:false,inputId:this.captchaInputId,charInfoId:this.hintContainerId,
isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this)}if(this.nickEl.dom.value==""){this.nickEl.focus();this._signupForm.onHintedInputFocus("ev",this.nickEl.dom)}this.nickEl.set({"autocomplete":"off"});Ext.fly(this.emailId).set({"autocomplete":"off"});JSM.page.signup.signupmember.superclass.init.call(this,el,config)},displayUsernameRefresh:function(param){if(param=="usernameExists")if(!this.usernameRefreshOpened){if(this.nickEl.dom.noShow==
true){this.nickEl.dom.noShow=false;return}TweenMax.fromTo(this.userNameExistsEl.dom,this.durationTime,{css:{top:"-20px",height:"0px",alpha:0}},{css:{top:"6px",height:"30px",alpha:1,display:"block"},onCompleteScope:this,onComplete:function(){this._signupForm.alignHints();this._signupForm.alignErrorLabels()}});this.onNewNickClick();this.usernameRefreshOpened=true;this._signupForm.disableForm(true)}if(!param){if(this.usernameRefreshOpened){this.usernameFieldErrorEl.display("none").setStyle("visibility",
"hidden");TweenMax.to(this.userNameExistsEl.dom,this.durationTime,{css:{top:"-20px",height:"0px",alpha:0,display:"none"},onCompleteScope:this,onComplete:function(){this._signupForm.alignHints();this._signupForm.alignErrorLabels()}});this.usernameRefreshOpened=false;this._signupForm.disableForm(false)}Ext.get(this.usernameFieldErrorId).display("none").setStyle("visibility","hidden")}},onNewNickClick:function(ev,target){var username=this.nickEl.dom.value;this.newNickUrl=Chaos.getUrl(this.newNickRoute,
{},{nick:username},"");var xhr=Chaos.Ajax.request({url:this.newNickUrl,method:"GET",type:"json",success:function(response){this.usernameFieldEl.dom.innerHTML=response.json.username},scope:this});return false},onUsernameClick:function(ev,target){ev.preventDefault();this.nickEl.dom.value=this.usernameFieldEl.dom.innerHTML;this.nickEl.dom.noShow=true;this.displayUsernameRefresh(false)},onInputKeyup:function(ev,target){this.isValidForm=false},onNickBlur:function(ev,target){var nickValue=this.nickEl.getValue(),
csrfTokenValue=this.formTokenEl.getValue(),paramObj={nick:nickValue,csrfToken:csrfTokenValue};if(nickValue!=""&&nickValue!=this.currentNickValue)this.checkNickAjaxRequest(paramObj,this.nickCheckRoute);if(this.userNameExistsEl.getStyle("display")=="block")Ext.get(this.usernameFieldErrorId).fadeIn({duration:0})},onNickClick:function(){this.currentNickValue=this.nickEl.getValue();Ext.get(this.usernameFieldErrorId).display("none").setStyle("visibility","hidden")},checkNickAjaxRequest:function(paramObj,
ajaxUrl){var self=this;Chaos.Ajax.request({type:"json",method:"post",url:Chaos.getUrl(ajaxUrl,{},{},""),scope:this,params:paramObj,success:function(){self.displayUsernameRefresh(false);self.usernameFieldErrorEl.fadeOut()},error:function(response){var userNameExists=response.json.command?"usernameExists":"";self.displayUsernameRefresh(false);self.displayUsernameRefresh(userNameExists);if(response.json.errors){self.usernameFieldErrorEl.select("p").item(0).dom.innerHTML=response.json.errors;self.usernameFieldErrorEl.dom.setAttribute("style",
"left: 592px; top: 5px;");self.usernameFieldErrorEl.fadeIn()}}})},onWindowLoad:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_ALL_STATIC_LOADED,{scope:this})},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.nickId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxPasswordCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.passwordId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},
onMaxEmailCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.emailId);this.hintContainerEl.show();this.hintContainerEl.removeClass(this.captchaHintCls)},onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.captchaInputEl);this.hintContainerEl.show();this.hintContainerEl.addClass(this.captchaHintCls);this.hintCmp.setPosition(2*this.captchaInputEl.getWidth(),5,this.captchaInputId)},maxCharLimitReached:function(){this.hintCmp=
new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},bind:function(){JSM.page.signup.signupmember.superclass.bind.call(this);this.usernameFieldEl.on("click",this.onUsernameClick,this);if(this.nickEl){this.nickEl.on("blur",this.onNickBlur,this);this.nickEl.on("click",this.onNickClick,this)}Ext.fly(window).on("load",this.onWindowLoad,this)},unbind:function(){JSM.page.signup.signupmember.superclass.unbind.call(this);
this.usernameFieldEl.un("click",this.onUsernameClick,this);if(this.nickEl){this.nickEl.un("blur",this.onNickBlur,this);this.nickEl.un("click",this.onNickClick,this)}this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);this._emailCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxEmailCharLimitReached,this);this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);Ext.fly(window).un("load",this.onWindowLoad,this)}});Ext.namespace("JSM.component");JSM.component.StorageActionHelper=function(el,config){JSM.component.StorageActionHelper.constructor.call(this,el,config);this.init(Ext.getBody(),{})};JSM.component.StorageActionHelper.EVENT_FIRE_ACTION="fire-action";
JSM.component.StorageActionHelper.getInstance=function(){if(!(JSM.component.StorageActionHelper.prototype.instance instanceof JSM.component.StorageActionHelper))JSM.component.StorageActionHelper.prototype.instance=new JSM.component.StorageActionHelper;return JSM.component.StorageActionHelper.prototype.instance};
Chaos.extend(JSM.component.StorageActionHelper,JSM.component.ActionHelper,{name:"StorageAction",groupId:"storage-action",init:function(el,config){JSM.component.StorageActionHelper.superclass.init.call(this,el,config);if(!Chaos.Storage.getGroup(this.groupId))Chaos.Storage.setGroup(this.groupId)},store:function(name,params){var _success=Chaos.Storage.set(name,params,this.groupId);return _success},registerAction:function(params){JSM.component.StorageActionHelper.superclass.registerAction.call(this,params);
this._storedActions=Chaos.Storage.getGroup(this.groupId);if(this._storedActions)for(var entry in this._storedActions){this.setPotencialActions(entry);this.params=this._storedActions[entry];if(this.fireAction(entry)){delete this._storedActions[entry];if(params.removable)Chaos.Storage.remove(entry,this.groupId)}}this._storedAction=Chaos.Storage.get(params.name,false,this.groupId)},deleteAction:function(name){var _success=false;JSM.component.StorageActionHelper.superclass.deleteAction.call(this,name);
_success=Chaos.Storage.remove(name,this.groupId);return _success},bind:function(){JSM.component.StorageActionHelper.superclass.bind.call(this)},unbind:function(){JSM.component.StorageActionHelper.superclass.unbind.call(this)}});JSM.component.StorageAction=JSM.component.StorageActionHelper.getInstance();Ext.namespace("JSM.component");JSM.component.UrlActionHelper=function(){this.init(Ext.getBody(),{})};JSM.component.UrlActionHelper.EVENT_FIRE_ACTION="fire-action";
JSM.component.UrlActionHelper.getInstance=function(){if(!(JSM.component.UrlActionHelper.prototype.instance instanceof JSM.component.UrlActionHelper))JSM.component.UrlActionHelper.prototype.instance=new JSM.component.UrlActionHelper;return JSM.component.UrlActionHelper.prototype.instance};
Ext.extend(JSM.component.UrlActionHelper,JSM.component.ActionHelper,{name:"UrlActionHelper",_urlActions:{},_potencialAction:{},_urlObject:{},_urlHash:{},init:function(el,config){JSM.component.UrlActionHelper.superclass.init.call(this,el,config);this._urlObject=document.location;this._urlHash=this._urlObject.hash;this._urlQuery=this._urlObject.search;this.getActionFromUrl()},getActionFromUrl:function(){if(this._urlHash){this.setPotencialActions(this.splitHash(this._urlHash.split("#")[1])[0]);this.params=
this.splitHash(this._urlHash)}},splitHash:function(hash){var splittingPart="|";if(hash.match("%7C"))splittingPart="%7C";return hash.split(splittingPart)}});JSM.component.UrlAction=JSM.component.UrlActionHelper.getInstance();JSM.component.UrlAction.EVENT_FIRE_ACTION=JSM.component.UrlActionHelper.EVENT_FIRE_ACTION;Ext.namespace("JSM.component");JSM.component.AwardsLister=function(el,config){JSM.component.AwardsLister.superclass.constructor.call(this,el,config)};
JSM.component.AwardsLister.DIRECTION_DOWN="down";JSM.component.AwardsLister.DIRECTION_UP="up";JSM.component.AwardsLister.INSERT_DOWN_DONE="insert-down-done";JSM.component.AwardsLister.INSERT_UP_DONE="insert-up-done";JSM.component.AwardsLister.REMOVE_BLOCK="remove-block";JSM.component.AwardsLister.SHOW_MORE_ERROR="show-more-error";JSM.component.AwardsLister.META_IS_SINGLE_PAGE="isSinglePage";JSM.component.AwardsLister.CONTENT_LOAD_ENABLED="0";JSM.component.AwardsLister.CONTENT_LOAD_DISABLED="1";
Chaos.extend(JSM.component.AwardsLister,JSM.component.Lister,{name:"AwardsLister",containerBoxId:undefined,nextContentUrl:undefined,prevContentUrl:undefined,prevContentRouteParams:{},nextContentRouteParams:{},prevContentQueryParams:{},nextContentQueryParams:{},pageParamName:undefined,pageParamType:undefined,showMoreBtnId:"show_more_btn_container",showMoreBtnContainerSel:undefined,pageIdPrefix:"awards_",awardsTopBlockId:"awards_top",awardsTopBlockEl:undefined,pageCls:"page",pageHeight:undefined,currentContentId:0,
showMoreDirection:JSM.component.AwardsLister.DIRECTION_DOWN,enableDelete:true,maxListPages:3,removedPagesFromTop:0,removedPagesFromBottom:0,bottomLoaderId:"loader_bottom",bottomLoaderEl:undefined,autoLoadNum:0,maxAutoLoadNum:1E3,currentPage:0,enableAjax:true,enableScrollUp:true,enableScrollDown:true,extraShowMore:0,enableExtraShowMore:false,callBackFn:undefined,buildFromJSONData:false,isScrollAfterRemove:false,init:function(el,config){window.scrollTo(0,0);this.tempScrollTop=0;this.pageHeight=this.getPageHeight();
this.bottomLoaderEl=Ext.get(this.bottomLoaderId);this.awardsTopBlockEl=Ext.get(this.awardsTopBlockId);this.isSinglePage=Chaos.getMeta(JSM.component.AwardsLister.META_IS_SINGLE_PAGE);this.showMoreBtnEl=Ext.get(this.showMoreBtnId);this.addEvents(JSM.component.AwardsLister.INSERT_UP_DONE,JSM.component.AwardsLister.INSERT_DOWN_DONE,JSM.component.AwardsLister.REMOVE_BLOCK);this.urlObject={prev:{routeHandler:this.prevContentUrl,routeParams:this.prevContentRouteParams},next:{routeHandler:this.nextContentUrl,
routeParams:this.nextContentRouteParams}};JSM.component.AwardsLister.superclass.init.call(this,el,config);this.ImageCheckerPlugin=this.plugins["ImageChecker-plugin"];if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+0)}catch(exception){console.error("@JS-ERROR: ",exception)}},getPageHeight:function(){return this.element.select("."+this.pageCls).item(0).getHeight()},resetCounters:function(){this.currentPage=0;this.currentContentId=0},onListScroll:function(){if(this.isSinglePage==
0)if(!this.isScrollAfterRemove){this.currentScrollTop=JSM.Util.getScrollTop();if(this.currentScrollTop>=this.tempScrollTop){this.showMoreDirection=JSM.component.AwardsLister.DIRECTION_DOWN;if(this.currentScrollTop>this.getActivatePoint()&&this.enableScrollDown)if(this.autoLoadNum<this.maxAutoLoadNum||this.removedPagesFromBottom!=0){this.enableScrollDown=false;this.autoLoadNum++;this.onScrollDown()}}else{this.showMoreDirection=JSM.component.AwardsLister.DIRECTION_UP;if(this.currentScrollTop<=200&&
this.enableScrollUp)if(this.removedPagesFromTop!=0){this.enableScrollUp=false;this.onScrollUp()}}this.tempScrollTop=this.currentScrollTop}else this.isScrollAfterRemove=false},onScrollDown:function(){this.showMoreBtnEl.setStyle("display","none");this.bottomLoaderEl.setStyle("display","inline-block");if(Ext.fly(this.pageIdPrefix+(this.currentPage+1))==null)this.getContent(this.getUrl("next"),this.insertDown)},onScrollUp:function(){if(Ext.fly(this.pageIdPrefix+(this.currentPage-this.maxListPages))==
null)this.getContent(this.getUrl("prev"),this.insertUp)},insertDown:function(response){if(response.json.success==true&&(response.json.data.content.performers.length>0||response.json.data.content.performers!=null)){this.currentPage++;var lastPageBlock=this.element.select("."+this.pageCls+":last").item(0),newContent;if(this.buildFromJSONData){if(typeof this.plugins.ListPageBuilder!="undefined")newContent=this.plugins.ListPageBuilder.setBlocks(response.json.data)}else newContent=response.json.data.content;
Ext.DomHelper.insertAfter(lastPageBlock,{id:this.pageIdPrefix+this.currentPage,cls:this.pageCls,html:newContent});this.showMoreDirection=JSM.component.AwardsLister.DIRECTION_DOWN;this.removePageIfNeeded();if(this.currentPage>=this.maxListPages&&this.awardsTopBlockEl.getStyle("display")!="none"){this.awardsTopBlockEl.display("none");window.scrollTo(0,lastPageBlock.getHeight())}this.enableScrollUp=true;if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+this.currentPage)}catch(exception){console.error("@JS-ERROR: ",
exception)}this.checkLastPage(response.json.data.content.is_last_page);this.fireEvent(JSM.component.AwardsLister.INSERT_DOWN_DONE,{container:this.pageIdPrefix+this.currentPage});return Ext.get(this.pageIdPrefix+this.currentPage)}else{this.bottomLoaderEl.setStyle("display","none");this.showMoreBtnEl.setStyle("display","none");this.fireEvent(JSM.component.AwardsLister.SHOW_MORE_ERROR,this)}return undefined},insertUp:function(response){var firstPageBlock=this.element.select("."+this.pageCls+":first").item(0),
newContent;if(this.buildFromJSONData){if(typeof this.plugins.ListPageBuilder!="undefined")newContent=this.plugins.ListPageBuilder.setBlocks(response.json.data)}else newContent=response.json.data.content;var newAppendedBlock=Ext.DomHelper.insertBefore(firstPageBlock,{id:this.pageIdPrefix+(this.currentPage-this.maxListPages),cls:this.pageCls,html:newContent},true);if(!response.json.data.content.is_last_page)window.scrollTo(0,newAppendedBlock.getHeight());else{this.awardsTopBlockEl.display("block");
window.scrollTo(0,newAppendedBlock.getHeight()+this.maxListPages*(newAppendedBlock.getHeight()/4))}this.fireEvent(JSM.component.AwardsLister.INSERT_UP_DONE,{container:this.pageIdPrefix+(this.currentPage-this.maxListPages)});if(this.ImageCheckerPlugin)try{this.ImageCheckerPlugin.checkImageDownload(this.pageIdPrefix+(this.currentPage-this.maxListPages))}catch(exception){console.error("@JS-ERROR: ",exception)}this.currentPage--;this.showMoreDirection=JSM.component.AwardsLister.DIRECTION_UP;this.removePageIfNeeded();
this.enableScrollDown=true;this.checkLastPage(response.json.data.content.is_last_page)},getActivatePoint:function(){var pages=this.element.select("."+this.pageCls),pageCount=pages.getCount();return Math.round((pageCount-1)*this.pageHeight+this.pageHeight/3)},getContent:function(url,successCallback){if(typeof this.callBackFn=="function")successCallback=this.callBackFn;Chaos.Ajax.request({type:"json",url:url,scope:this,success:successCallback,error:function(){this.checkLastPage(true);this.fireEvent(JSM.component.AwardsLister.SHOW_MORE_ERROR,
this)},failure:function(){this.checkLastPage(true);this.fireEvent(JSM.component.AwardsLister.SHOW_MORE_ERROR,this)},method:"GET"})},getUrl:function(direction){var urlObj=this.urlObject[direction],queryParam=direction=="next"?this.currentPage+1:this.currentPage-this.maxListPages;if(this.pageParamType!=undefined&&this.pageParamName!=undefined){if(this.pageParamType=="query")urlObj.queryParams[this.pageParamName]=queryParam;if(this.pageParamType=="route")urlObj.routeParams[this.pageParamName]=queryParam}return Chaos.getUrl(urlObj.routeHandler,
urlObj.routeParams)},onShowMoreClick:function(ev){ev.preventDefault();if(this.enableAjax){this.bottomLoaderEl.setStyle("display","inline-block");this.showMoreBtnEl.setStyle("display","none");this.showMoreDirection=JSM.component.AwardsLister.DIRECTION_DOWN;this.getContent(this.getUrl("next"),this.insertDown);this.autoLoadNum=0}},removePageIfNeeded:function(){var pages=this.element.select("."+this.pageCls);if(pages.getCount()>this.maxListPages){this.isScrollAfterRemove=true;if(this.showMoreDirection==
JSM.component.AwardsLister.DIRECTION_DOWN){this.fireEvent(JSM.component.AwardsLister.REMOVE_BLOCK,{container:pages.item(0).dom.id});pages.item(0).remove();this.removedPagesFromTop++;if(this.removedPagesFromBottom>0)this.removedPagesFromBottom--;window.scrollTo(0,this.currentScrollTop-this.pageHeight)}else{this.fireEvent(JSM.component.AwardsLister.REMOVE_BLOCK,{container:pages.item(pages.getCount()-1).dom.id});pages.item(pages.getCount()-1).remove();this.removedPagesFromTop--;this.removedPagesFromBottom++}this.tempScrollTop=
this.currentScrollTop-this.pageHeight}},enableLoadContent:function(enable){switch(this.showMoreDirection){case JSM.component.AwardsLister.DIRECTION_UP:this.enableScrollUp=enable;break;case JSM.component.AwardsLister.DIRECTION_DOWN:default:this.enableScrollDown=enable;break}},checkLastPage:function(isLast){this.bottomLoaderEl.setStyle("display","none");isLast===true?isLast=1:isLast=0;switch(isLast){case 0:this.enableLoadContent(true);break;case 1:this.enableLoadContent(false);this.showMoreBtnEl.setStyle("display",
"none");break;case 2:this.enableLoadContent(false);this.showMoreBtnEl.setStyle("display","none");this.fireEvent(JSM.component.AwardsLister.SHOW_MORE_ERROR,this);break;default:this.showMoreBtnEl.setStyle("display","none");break}},onWindowResize:function(){this.pageHeight=this.getPageHeight()},bind:function(){if(this.containerBoxId){Ext.fly(this.containerBoxId).on("scroll",this.onListScroll,this);Ext.fly(this.containerBoxId).on("keydown",this.onListScroll,this)}else if(Ext.isIE8||Ext.isIE7){Ext.fly(window).on("scroll",
this.onListScroll,this);Ext.fly(window).on("keydown",this.onListScroll,this)}else{Ext.get(document).on("scroll",this.onListScroll,this);Ext.get(document).on("keydown",this.onListScroll,this)}Ext.fly(window).on("resize",this.onWindowResize,this);if(this.showMoreBtnEl!=null)this.showMoreBtnEl.on("click",this.onShowMoreClick,this);JSM.component.AwardsLister.superclass.bind.call(this)},unbind:function(){if(this.containerBoxId){Ext.fly(this.containerBoxId).un("scroll",this.onListScroll,this);Ext.fly(this.containerBoxId).un("keydown",
this.onListScroll,this)}else if(Ext.isIE8||Ext.isIE7){Ext.fly(window).un("scroll",this.onListScroll,this);Ext.fly(window).un("keydown",this.onListScroll,this)}else{Ext.get(document).un("scroll",this.onListScroll,this);Ext.get(document).un("keydown",this.onListScroll,this)}Ext.fly(window).on("resize",this.onWindowResize,this);if(this.showMoreBtnEl!=null)this.showMoreBtnEl.un("click",this.onShowMoreClick,this);JSM.component.AwardsLister.superclass.unbind.call(this)}});Ext.namespace("JSM.component");
JSM.component.ListPage=function(el,config){JSM.component.ListPage.superclass.constructor.call(this,el,config)};JSM.component.ListPage.THUMB_MOUSEDOWN="thumb-mousedown";JSM.component.ListPage.THUMB_RIGHT_MOUSEDOWN="thumb-right-mousedown";JSM.component.ListPage.THUMB_CTRL_MOUSEDOWN="thumb-ctrl-mousedown";JSM.component.ListPage.THUMB_MOUSEOVER="thumb-mouseover";JSM.component.ListPage.THUMB_MOUSEOUT="thumb-mouseout";JSM.component.ListPage.FAVORITE_BUTTON_MOUSEDOWN="favorite-button-mousedown";
JSM.component.ListPage.BODY_KEYPRESS="body-keypress";JSM.component.ListPage.BODY_KEYDOWN="body-keydown";JSM.component.ListPage.BODY_KEYUP="body-keyup";JSM.component.ListPage.BODY_ESC_KEYDOWN="body-esc-keydown";JSM.component.ListPage.BODY_ESC_KEYUP="body-esc-keyup";JSM.component.ListPage.BODY_ESC_KEYPRESS="body-esc-keypress";JSM.component.ListPage.BODY_MOUSEOUT="body-mouseout";JSM.component.ListPage.BODY_CLICK="body-click";JSM.component.ListPage.BANNER_CLICK="banner-click";
JSM.component.ListPage.LEFT_MOUSE_BUTTON_CLICKED=1;JSM.component.ListPage.MIDDLE_MOUSE_BUTTON_CLICKED=2;JSM.component.ListPage.RIGHT_MOUSE_BUTTON_CLICKED=3;
Chaos.extend(JSM.component.ListPage,JSM.component.Lister,{name:"ListPage",perfLinkSel:".perf_link:not(.commercial_link)",containerPrefix:"container_",favoriteButtonSel:".add_favorite",animDuration:0.2,infoBarHeight:22,needToChangeBack:false,_isAnimating:false,statusBarClass:"status",nameBarClass:"name",hoverLayerId:"hover_layer",hoverSel:"hover",errorBlock:{tag:"div",id:"error_block"},bodyTagTemplate:'<span id="error_hint"></span>',refreshPageBtnId:"refresh_page_btn",listpageBtnCls:"first_button",
hoveredThumbId:undefined,commercialLinkWithStaticUrlClass:"static_link",commercialContainerSel:".commercial_container",commercialLinkClass:"commercial_link",innerContainerId:"inner_container",_freeCreditsEl:undefined,_freePeeksEl:undefined,_validatedMemberAsGuestFreeCreditsEl:undefined,_freeMemberAsGuestFreeCreditsEl:undefined,_validatedMemberFreeCreditsEl:undefined,_commercialBoxes:[],_listpageBanners:{},init:function(el,config){this.addEvents(JSM.component.ListPage.THUMB_MOUSEDOWN,JSM.component.ListPage.THUMB_RIGHT_MOUSEDOWN,
JSM.component.ListPage.THUMB_CTRL_MOUSEDOWN,JSM.component.ListPage.THUMB_MOUSEOVER,JSM.component.ListPage.THUMB_MOUSEOUT,JSM.component.ListPage.THUMB_KEYPRESS,JSM.component.ListPage.THUMB_KEYDOWN,JSM.component.ListPage.THUMB_KEYUP,JSM.component.ListPage.FAVORITE_BUTTON_CLICK,JSM.component.ListPage.BODY_MOUSEOUT,JSM.component.ListPage.BODY_CLICK,JSM.component.ListPage.BANNER_CLICK);Ext.getBody().on({"keypress":this.onListPageKeyPress,"keydown":this.onListPageKeyDown,"keyup":this.onListPageKeyUp,"mouseout":this.onBodyMouseOut,
"click":this.onBodyClick,scope:this});this.showMoreBtnEl=Ext.get(this.showMoreBtnId);this.bodyTagTemplate='<span id="error_hint">'+Chaos.translate("There are no more live performers at the moment... Please try again later")+"</span>";this.getMouseButton=JSM.Util.getMouseButton;JSM.component.ListPage.superclass.init.call(this,el,config);this._setListPageBannerController()},onThumbsClick:function(ev,target){if(this.getMouseButton(ev)!=JSM.component.ListPage.MIDDLE_MOUSE_BUTTON_CLICKED&&!Ext.isIE8)ev.preventDefault()},
onThumbsMouseDown:function(ev,target){if(this.getMouseButton(ev)==JSM.component.ListPage.LEFT_MOUSE_BUTTON_CLICKED){ev.preventDefault();this.fireEvent(JSM.component.ListPage.THUMB_MOUSEDOWN,ev,target)}else if(this.getMouseButton(ev)==JSM.component.ListPage.MIDDLE_MOUSE_BUTTON_CLICKED||ev.ctrlKey)this.fireEvent(JSM.component.ListPage.THUMB_CTRL_MOUSEDOWN,ev,target);else if(this.getMouseButton(ev)==JSM.component.ListPage.RIGHT_MOUSE_BUTTON_CLICKED)this.fireEvent(JSM.component.ListPage.THUMB_RIGHT_MOUSEDOWN,
ev,target)},setHoverLayer:function(ev,target,location){if(target&&Ext.get(target)){var hoverLayerCont,perfBox=Ext.get(target).parent("a");if(location==undefined)if(Ext.isIE7)hoverLayerCont=Ext.get(this.innerContainerId);else hoverLayerCont=Ext.getBody();else hoverLayerCont=location;if(perfBox!=null)perfBox.addClass(this.hoverSel);if(Ext.fly(this.hoverLayerId)==null)if(hoverLayerCont){hoverLayerCont.createChild({tag:"div",id:this.hoverLayerId});var hoverlayer=Ext.get(this.hoverLayerId);hoverlayer.on("mouseover",
this.onThumbsMouseOut,this,{perfBox:perfBox})}return hoverlayer}return undefined},unSetHoverLayer:function(ev,target,options){var hoverLayerEl=Ext.get(this.hoverLayerId);if(hoverLayerEl!=null){hoverLayerEl.un(JSM.component.ListPage.THUMB_MOUSEOVER,this.onThumbsMouseOut,this);hoverLayerEl.remove()}if(options&&options.perfBox)options.perfBox.removeClass(this.hoverSel)},onThumbsMouseOver:function(ev,target){var _target=Ext.get(target);if(_target&&_target.findParent("a")){var link=_target.findParent("a"),
thumb=Ext.get(link).select("img").item(0);if(thumb&&link.id!=this.hoveredThumbId){this.hoveredThumbId=link.id;this.setHoverLayer(ev,thumb);this.fireEvent(JSM.component.ListPage.THUMB_MOUSEOVER,ev,link)}}},onThumbsMouseOut:function(ev,target,options){this.hoveredThumbId=undefined;this.unSetHoverLayer(ev,target,options);this.fireEvent(JSM.component.ListPage.THUMB_MOUSEOUT,ev,target,options)},onListPageKeyPress:function(ev,target){if(this.isEscPressed(ev))this.fireEvent(JSM.component.ListPage.BODY_ESC_KEYPRESS,
ev,target);this.fireEvent(JSM.component.ListPage.BODY_KEYPRESS,ev,target,ev.getCharCode())},onListPageKeyUp:function(ev,target){if(this.isEscPressed(ev))this.fireEvent(JSM.component.ListPage.BODY_ESC_KEYUP,ev,target);this.fireEvent(JSM.component.ListPage.BODY_KEYUP,ev,target,ev.getCharCode())},onListPageKeyDown:function(ev,target){if(this.isEscPressed(ev))this.fireEvent(JSM.component.ListPage.BODY_ESC_KEYDOWN,ev,target);this.fireEvent(JSM.component.ListPage.BODY_KEYDOWN,ev,target,ev.getCharCode())},
onUpdateFavoriteClick:function(ev,target){ev.stopEvent()},onUpdateFavoriteMouseDown:function(ev,target){if(this.getMouseButton(ev)==JSM.component.ListPage.LEFT_MOUSE_BUTTON_CLICKED)this.fireEvent(JSM.component.ListPage.FAVORITE_BUTTON_MOUSEDOWN,ev,target)},updateModelInfoBar:function(type,display,ev){var modelBox=ev.model,infoClass,parentContainerEl,classNames,oldStatusClass;if(typeof modelBox=="object")switch(type){case this.statusBarClass:infoClass=type;parentContainerEl=modelBox.parent();classNames=
parentContainerEl.dom.className;oldStatusClass=classNames.split(" ")[1];classNames=classNames.replace(oldStatusClass,ev.newClass);parentContainerEl.dom.className=classNames;break;case this.nameBarClass:infoClass=type;break}this.displayInfoBar(display,modelBox,infoClass,ev.infoText)},displayInfoBar:function(display,modelBox,cls,html){var newHtml='<span style="z-index: 999999">'+html+'</span><span class="bg">&nbsp;</span>',nameBarEl=modelBox.select("."+this.nameBarClass).item(0),statusBarEl=modelBox.select("."+
this.statusBarClass).item(0);switch(display){case "show":if(cls==this.nameBarClass){if(!nameBarEl){Ext.DomHelper.append(modelBox.dom,{tag:"span",cls:this.nameBarClass});nameBarEl=modelBox.select("."+this.nameBarClass).item(0)}nameBarEl.setStyle({bottom:-this.infoBarHeight+"px"});nameBarEl.dom.innerHTML=newHtml;if(statusBarEl){this.needToChangeBack=true;this.animateInfoBar("change",nameBarEl,statusBarEl)}else this.animateInfoBar("show",nameBarEl)}else{if(!statusBarEl){Ext.DomHelper.append(modelBox.dom,
{tag:"span",cls:this.statusBarClass});statusBarEl=modelBox.select("."+this.statusBarClass).item(0)}statusBarEl.setStyle({bottom:-this.infoBarHeight+"px"});statusBarEl.dom.innerHTML=newHtml;if(!nameBarEl||nameBarEl&&nameBarEl.getStyle("bottom")=="-"+this.infoBarHeight+"px")this.animateInfoBar("show",statusBarEl);else this.needToChangeBack=true}break;case "hide":default:if(cls==this.nameBarClass&&nameBarEl)if(this.needToChangeBack)this.animateInfoBar("change",statusBarEl,nameBarEl,true);else this.animateInfoBar("hide",
nameBarEl,"",true);else if(cls==this.statusBarClass&&statusBarEl)this.animateInfoBar("hide",statusBarEl,"",true);break}},animateInfoBar:function(type,infoBarEl,prevInfoBarEl,isDeletable){var self=this;switch(type){case "show":TweenLite.to(infoBarEl.dom,this.animDuration,{css:{bottom:0}});break;case "hide":if(infoBarEl)TweenLite.to(infoBarEl.dom,this.animDuration,{css:{bottom:-this.infoBarHeight},onCompleteScope:this,onComplete:function(){if(infoBarEl&&isDeletable)infoBarEl.remove()}});break;case "change":if(prevInfoBarEl!=
null&&parseFloat(prevInfoBarEl.getStyle("bottom"))>-self.infoBarHeight)prevInfoBarEl.setStyle("bottom","0");TweenLite.to(prevInfoBarEl.dom,this.animDuration,{css:{bottom:-this.infoBarHeight},onCompleteScope:prevInfoBarEl,onComplete:function(){if(isDeletable)this.remove();if(infoBarEl!=null)TweenLite.to(infoBarEl.dom,self.animDuration,{css:{bottom:0}})}});break}},isEscPressed:function(ev){return ev.getCharCode()=="27"},onBodyMouseOut:function(ev,target){if(Chaos.Util.checkMouseCrossedWindowBorder(ev,
target))this.fireEvent(JSM.component.ListPage.BODY_MOUSEOUT,ev,target)},onBodyClick:function(ev,target){this.fireEvent(JSM.component.ListPage.BODY_CLICK,ev,target)},onFreePeeksClick:function(ev){if(!Ext.isIE7){ev.preventDefault();if(application.isLoggedIn())this.openQuickBuy();else Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:true,urlGetParams:"freePeeks"})}},onFreeCreditsClick:function(ev){if(!Ext.isIE7){ev.preventDefault();if(application.isLoggedIn())this.openQuickBuy();
else Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:true,urlGetParams:"freeCredits"})}},_setCommercialEventHandlers:function(currentBlockId){var size,i,data;data=Ext.fly(currentBlockId).select(this.commercialContainerSel).elements;if(!this._listpageBanners[currentBlockId])this._listpageBanners[currentBlockId]={};if(data.length>0)for(i in data)if(data.hasOwnProperty(i)){var bannerId=data[i].id;if(!this._listpageBanners[currentBlockId][bannerId]){this._listpageBanners[currentBlockId][bannerId]=
Ext.get(bannerId);if(this._listpageBanners[currentBlockId][bannerId])this._listpageBanners[currentBlockId][bannerId].on("click",this.onListPageBannerClick,this)}}},onListPageBannerClick:function(ev,target){ev.preventDefault();this.fireEvent(JSM.component.ListPage.BANNER_CLICK,{ev:ev,target:target,scope:this})},bindThumbs:function(currentBlockId){var currentBlockEl=Ext.get(currentBlockId);if(currentBlockEl){var newThumbs=currentBlockEl.select(this.perfLinkSel);var newCommercialThumbs=currentBlockEl.select(this.commercialContainerSel);
this.bindCommercials(currentBlockId);newThumbs.on({"click":this.onThumbsClick,"mousedown":this.onThumbsMouseDown,"mouseover":this.onThumbsMouseOver,scope:this});var addFavoriteButtons=currentBlockEl.select(this.favoriteButtonSel);addFavoriteButtons.on({"click":this.onUpdateFavoriteClick,"mousedown":this.onUpdateFavoriteMouseDown,scope:this})}},unbindThumbs:function(removedBlockId){if(removedBlockId){var currentBlock=Ext.get(removedBlockId);if(currentBlock){var thumbs=currentBlock.select(this.perfLinkSel);
thumbs.un({"click":this.onThumbsClick,"mousedown":this.onThumbsMouseDown,"mouseover":this.onThumbsMouseOver,scope:this});var addFavoriteButtons=currentBlock.select(this.favoriteButtonSel);addFavoriteButtons.un({"click":this.onUpdateFavoriteClick,"mousedown":this.onUpdateFavoriteMouseDown,scope:this});this.unbindCommercials(removedBlockId)}}},bindCommercials:function(currentBlockId){this._setCommercialEventHandlers(currentBlockId)},unbindCommercials:function(removedBlockId){if(this._listpageBanners[removedBlockId]){for(var banner in this._listpageBanners[removedBlockId])if(this._listpageBanners[removedBlockId][banner]&&
this._listpageBanners[removedBlockId].hasOwnProperty(banner)){this._listpageBanners[removedBlockId][banner].un("click",this.onListPageBannerClick,this);delete this._listpageBanners[removedBlockId][banner]}delete this._listpageBanners[removedBlockId]}},showMoreError:function(){var self=this;if(this.showMoreBtnEl!=null){this.enableAjax=false;if(Chaos.isDefined(this.autoHideHint)){this.autoHideHint.cancel();this.autoHideHint=undefined;this.errorBlock.remove()}if(Ext.get(this.errorBlock.id)==null){Ext.DomHelper.insertAfter(this.showMoreBtnEl,
this.errorBlock);this.errorBlock=Ext.get(this.errorBlock.id);this.errorHint=new JSM.window.HintPopup(this.errorBlock,{duration:1,isModal:false,bodyTag:this.bodyTagTemplate,top:0,left:0,showMode:"static"});this.errorHint.show();if(!Chaos.isDefined(this.autoHideHint)){this.autoHideHint=new Ext.util.DelayedTask(function(){this.errorHint.hide(0.5,function(){self.errorBlock.remove();self.createRefreshPageBtn()})},this);this.autoHideHint.delay(7E3)}}}},createRefreshPageBtn:function(){Ext.DomHelper.insertAfter(this.showMoreBtnEl,
{tag:"a",href:"#",id:this.refreshPageBtnId,cls:this.listpageBtnCls,html:Chaos.translate("Refresh page")});Ext.fly(this.refreshPageBtnId).on("click",this.refreshPage,this)},refreshPage:function(ev){ev.preventDefault();window.location.reload()},openQuickBuy:function(){layout.header.startQuickBuy(JSM.overlay.QuickBuy.STATUS_OPEN)},onLoggedIn:function(ev){},onAfterSignupSuccess:function(ev){var _currentCommercial;_currentCommercial=ev.response.json.data.bannersToSwap;this.swapCommercialBoxes(_currentCommercial)},
swapCommercialBoxes:function(currentCommercial){for(var i in currentCommercial)this._removeCommercialEventHandlers(currentCommercial[i]);this._commercialContainerEl=this.element.select(this.commercialContainerSel);if(this._commercialContainerEl.getCount()>0){Chaos.fireEvent(JSM.component.PerformerSwap.GLOBALEVENT_START_QUICK_SWAP,this._commercialBoxes);Chaos.Broadcaster.on(JSM.component.PerformerSwap.GLOBALEVENT_MODEL_SWAP,this.onQuickSwapSuccess,this);this._commercialBoxes.splice(0,this._commercialBoxes.length)}},
_removeCommercialEventHandlers:function(bannertoswap){var _commercialImageEl,_commercialEl;_commercialEl=Ext.get(this.containerPrefix+bannertoswap);if(_commercialEl){this._commercialBoxes.push({perfBox:_commercialEl});_commercialEl.un("click",this.onFreeCreditsClick,this);_commercialImageEl=_commercialEl.select("."+this.commercialLinkClass).item(0);if(_commercialImageEl)_commercialImageEl.removeClass(bannertoswap.toLowerCase()).removeClass(this.commercialLinkClass)}},onQuickSwapSuccess:function(ev){try{Ext.fly(ev.box.dom.id).select("a").item(0).removeClass(this.commercialLinkClass);
this.bindThumbs(ev.box.dom.id)}catch(exception){console.error("@JS-ERROR: ",exception)}},_setListPageBannerController:function(){this._listPageBannerController=new JSM.controller.ListPageBannerController({init:function(){},items:{"BroadCaster":{component:Chaos.Broadcaster,listeners:{"log-in":"onLoggedIn","signup-success":"onSignupSuccess"}},"ListPage":{component:this,listeners:{"banner-click":"onBannerClick"}}}})},getCommercialTemplateData:function(blockType){return this._listPageBannerController.getBannerDataByBlockType(blockType)},
bind:function(){var currentId=this.contentId+this.currentContentId;this.bindThumbs(currentId);Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);Chaos.Broadcaster.on(JSM.controller.BasicController.GLOBALEVENT_AFTER_SIGNUP_SUCCESS,this.onAfterSignupSuccess,this)},unbind:function(){this.unbindThumbs();Ext.getBody().un({"keypress":{fn:this.onListPageKeyPress,scope:this},"keydown":{fn:this.onListPageKeyDown,scope:this},"keyup":{fn:this.onListPageKeyUp,scope:this},
"mouseout":{fn:this.onBodyMouseOut,scope:this},"click":{fn:this.onBodyClick,scope:this}});Chaos.Broadcaster.un(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,this.onLoggedIn,this);Chaos.Broadcaster.un(JSM.controller.BasicController.GLOBALEVENT_AFTER_SIGNUP_SUCCESS,this.onAfterSignupSuccess,this)}});Ext.namespace("JSM.component");JSM.component.ThreadLister=function(el,config){JSM.component.ThreadLister.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.ThreadLister,JSM.component.Lister,{name:"ThreadLister",messageBoxSel:".message_box",recommendBoxId:"recommend_box",init:function(el,config){this.threadList();this.addEvents({"nomessage":true});JSM.component.ThreadLister.superclass.init.call(this,el,config)},threadList:function(forceRefresh){if(Ext.get(this.containerBoxId)==null)Ext.DomHelper.append(this.element,'<div id="'+this.containerBoxId+'"></div><div class="clear"></div>');this.refreshThreadList().refreshParams={page:this.currentPage};
if(forceRefresh!=undefined&&forceRefresh)this.refreshThreadList().refreshList();this.setEventHandler({container:this.containerBoxId})},refreshThreadList:function(){if(!(this.checkLister instanceof JSM.component.RefreshList))this.checkLister=new JSM.component.RefreshList(this.containerBoxId,{listContainerId:this.containerBoxId,refreshInterval:3E3,getCheckUrl:function(){return Chaos.getUrl("Messages/Check",{},{},"")},getRefreshListUrl:function(refreshParams){return Chaos.getUrl("Messages/ThreadList",
{},refreshParams,"")},callback:this.checkMessageExist,scope:this});return this.checkLister},checkMessageExist:function(scope){if(Ext.get(scope.noMsgContainer)!=null)if(Ext.get(scope.contentId+"0")!=null)Ext.get(scope.noMsgContainer).setStyle("display","none");else if(Ext.get(scope.noMsgContainer).getStyle("display")=="none"){var self=this;Ext.get(scope.noMsgContainer).setStyle("display","block");Ext.get(scope.recommendBoxId).dom.innerHTML="";Chaos.Ajax.request({url:Chaos.getUrl("Messages/ThreadList",
{},{},""),method:"GET",type:"json",success:scope.noMessageSuccess,error:scope.errorHandler,scope:scope})}},noMessageSuccess:function(response){Ext.get(this.recommendBoxId).dom.innerHTML=response.json.data.content;var token=response.json["form_token"];Ext.select("input[name='form_token']").each(function(){this.dom.value=token});this.fireEvent("nomessage",this)},onBoxOver:function(){var messageConversation=Ext.get("conversation_message"),supportConversation=Ext.get("delete_conversation");if((messageConversation.getStyle("visibility")==
"hidden"||messageConversation.getStyle("display")=="none")&&(supportConversation.getStyle("visibility")=="hidden"||supportConversation.getStyle("display")=="none"))Ext.get(this.id).addClass("hover_box")},onBoxOut:function(){Ext.get(this.id).removeClass("hover_box")},insertDown:function(response){JSM.component.ThreadLister.superclass.insertDown.call(this,response);this.setEventHandler(this.contentId+this.currentContentId)},setEventHandler:function(param){if(Ext.get(param.container)!=null){Ext.get(param.container).select(this.messageBoxSel).on("mouseenter",
this.onBoxOver);Ext.get(param.container).select(this.messageBoxSel).on("mouseleave",this.onBoxOut)}},bind:function(){JSM.component.ThreadLister.superclass.bind.call(this);this.checkLister.on("refreshListFinish",this.setEventHandler,this)},unbind:function(){JSM.component.ThreadLister.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.FloatingSlideButton=function(el,config){JSM.component.FloatingSlideButton.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.FloatingSlideButton,JSM.component.SlideButton,{name:"floatingSlideButton",slideButtonTitleTextSel:undefined,floatingSlideButtonId:undefined,floatingSlideButtonCtnId:undefined,additionalPadding:35,getListedPerformersUrl:undefined,openedFloatingSlideButtonCls:undefined,recommendedOrderTypeLinkId:undefined,mostPopularOrderTypeLinkId:undefined,newbiesOrderTypeLinkId:undefined,streamQualityOrderTypeLinkId:undefined,languageOrderTypeLinkId:undefined,textInnerSelector:"strong",
catchButtonClick:true,_isOpenedFloatingSlideButton:false,_isAnimatingFloatingSlideButton:false,_floatingSlideButtonContainerEl:undefined,init:function(el,config){JSM.component.FloatingSlideButton.superclass.init.call(this,el,config);this._slideButtonTitleEl=this.textInnerSelector?Ext.get(this.slideButtonTitleTextSel).select(this.textInnerSelector).item(0):Ext.get(this.slideButtonTitleTextSel);this._originalSlideButtonTitle=this._slideButtonTitleEl.dom.innerHTML;this._floatingSlideButtonContainerEl=
Ext.get(this.floatingSlideButtonCtnId)},slideIn:function(callback,scope){var _text=Ext.get(this.slideButtonTitleTextSel);var _animEl=Ext.get(this.slideButtonTitleSel);this.setAnimEl(_animEl);this.slideInText(callback,scope)},slideInText:function(callback,scope){var _animObject={},_callbackEvent={};_animObject.cssVars={};if(this.isSlideInEnabled()){_animObject.cssVars["width"]=this._calculateAnimElWidth()+this._calculatePaddingMultiplier()*this.additionalPadding;_animObject.cssVars["paddingLeft"]=
this.additionalPadding;_animObject.currentElement=this.getAnimEl();_callbackEvent={event:JSM.component.SlideButton.BUTTON_SLIDE_IN,callback:callback,scope:scope};this.slideButton(_animObject,_callbackEvent)}else try{callback.call(scope||this)}catch(exception){}},_calculateAnimElWidth:function(){var _buttonCurrentTextWidth;this._shadowEl=JSM.Util.addShadowEl(this.getAnimEl().id,"span",false);JSM.Util.appendShadowEl(this.getAnimEl(),this._shadowEl);_buttonCurrentTextWidth=Ext.get(this._shadowEl).getWidth();
this.getAnimEl().removeClass(this._shadowEl.id);this._shadowEl.remove();return _buttonCurrentTextWidth},_calculatePaddingMultiplier:function(){var _paddingMultiplier=this.getAnimEl().dom.children.length;_paddingMultiplier=_paddingMultiplier===0?1:_paddingMultiplier;return _paddingMultiplier},isSlideInEnabled:function(){return!this._slidedIn&&!this._isDisabled},isSlideOutEnabled:function(){return!this._isActive&&this._slidedIn&&!this._isDisabled},slideOut:function(callback,scope){var _animObject={},
_callbackEvent={},_buttonCurrentTextWidth;_animObject.cssVars={};if(this.isSlideOutEnabled()){_animObject.cssVars={};_animObject.cssVars["width"]=0;_animObject.cssVars["paddingLeft"]=0;_animObject.currentElement=this.getAnimEl();_callbackEvent={event:JSM.component.SlideButton.BUTTON_SLIDE_OUT,callback:callback,scope:scope};this.slideButton(_animObject,_callbackEvent)}else try{callback.call(scope||this)}catch(exception){}},onButtonClick:function(ev,target,options){ev.preventDefault();if(!this.catchButtonClick)return false;
if(!this._isAnimatingFloatingSlideButton){this._isOpenedFloatingSlideButton?this.hideFloatingSlideButton():this.showFloatingSlideButton();this.fireEvent(JSM.component.SlideButton.BUTTON_CLICKED,ev,target,options)}},getAnimEl:function(){return this._animEl},setAnimEl:function(animEl){this._animEl=animEl},slideOutCallBack:function(){if(this._floatingSlideButtonContainerEl.hasClass(this.openedFloatingSlideButtonCls))this._floatingSlideButtonContainerEl.removeClass(this.openedFloatingSlideButtonCls);
this._isAnimatingFloatingSlideButton=false},slideInCallBack:function(){var _list=Ext.get(this.floatingSlideButtonId);Ext.get(this.slideButtonTitleTextSel).display("none");_list.setStyle({display:"block",width:0});Ext.get(this.floatingSlideButtonCtnId).addClass(this.openedFloatingSlideButtonCls);this.slideInText();this._isAnimatingFloatingSlideButton=false},showFloatingSlideButton:function(){var _animEl=Ext.get(this.floatingSlideButtonId);this._isAnimatingFloatingSlideButton=true;this.slideOut(this.slideInCallBack,
this);this.setAnimEl(_animEl);this._isOpenedFloatingSlideButton=true},hideFloatingSlideButton:function(){var _list=Ext.get(this.floatingSlideButtonId);this._isAnimatingFloatingSlideButton=true;this.slideOut(this.slideOutCallBack,this);Ext.get(this.slideButtonTitleTextSel).display("block");this._isOpenedFloatingSlideButton=false},onDropDownMenuOpened:function(){this.hideFloatingButtonList()},onDropDownMenuClosed:function(){this._alreadyHide=true},onSlidePanelOpen:function(){this.hideFloatingButtonList();
this.element.display("none")},onSlidePanelClose:function(){this.element.display("block")},hideFloatingButtonList:function(){if(this._isOpenedFloatingSlideButton){this.slideOut(this.slideOutCallBack,this);Ext.get(this.slideButtonTitleTextSel).display("block");this._isOpenedFloatingSlideButton=false}},onBodyClick:function(ev){var isSelfElement=this._floatingSlideButtonContainerEl.contains(ev.target);if(!isSelfElement)this.hideFloatingButtonList()},onButtonTextMouseEnter:function(){this.slideInButton()},
onButtonTextMouseLeave:function(){this.slideOutButton()},slideInButton:function(){if(!this._isOpenedFloatingSlideButton)JSM.component.FloatingSlideButton.superclass.onButtonTextMouseEnter.call(this)},slideOutButton:function(){if(!this._isOpenedFloatingSlideButton)JSM.component.FloatingSlideButton.superclass.onButtonTextMouseLeave.call(this)},bind:function(){JSM.component.FloatingSlideButton.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.component.SlidePanel.GLOBALEVENT_OPEN,this.onSlidePanelOpen,
this);Chaos.Broadcaster.on(JSM.component.SlidePanel.GLOBALEVENT_CLOSE,this.onSlidePanelClose,this);Chaos.Broadcaster.on(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_OPENED,this.onDropDownMenuOpened,this);Chaos.Broadcaster.on(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_CLOSED,this.onDropDownMenuClosed,this);Ext.getBody().on("click",this.onBodyClick,this)},unbind:function(){JSM.component.FloatingSlideButton.superclass.unbind.call(this);Chaos.Broadcaster.un(JSM.component.SlidePanel.GLOBALEVENT_OPEN,
this.onSlidePanelOpen,this);Chaos.Broadcaster.un(JSM.component.SlidePanel.GLOBALEVENT_CLOSE,this.onSlidePanelClose,this);Chaos.Broadcaster.un(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_OPENED,this.onDropDownMenuOpened,this);Chaos.Broadcaster.un(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_CLOSED,this.onDropDownMenuClosed,this);Ext.getBody().un("click",this.onBodyClick,this)}});Ext.namespace("JSM.component");
JSM.component.Favorites=function(el,config){JSM.component.Favorites.superclass.constructor.call(this,el,config)};JSM.component.Favorites.EVENT_FAVORITES_SHOW_NO_PANEL="favorites-show-no-panel";
Chaos.extend(JSM.component.Favorites,JSM.component.SlidePanelLister,{name:"Favorites",isAnimatedSlidePanel:true,getListedPerformersUrl:"Favourite/GetFavouriteList",panelListerMainContainerId:"favorites",panelListerClsSel:"favorites",panelListerIconClsSel:"star",noPanelListerCls:"no_favorites",panelListerContainerId:"favorites_container",panelListerInnerContainerId:"favorites_inner",contentId:"favorites_content",selectListElementId:"favorites_ordertype_select",selectListElementSel:"select",selectListInputSel:"input[name=favorites_order_type]",
orderTypeInputId:"favorites_order_type",orderTypeBodyTag:'<input type="text" value="{nameTranslate}" class="select textfield medium" readonly="readonly" name="favorites_order_type" id="favorites_order_type" />'+'<input type="hidden" value="name" id="favorites_order_type_hidden" name="favorites_order_type_selected" />'+'<a href="#" class="select_arrow small"></a>'+'<div id="" class="select_list_container">'+'<ul class="select_replacement">'+'<li class="select_option">'+'<a href="#" class="list_item" name="time">{timeTranslate}</a>'+
"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="name">{nameTranslate}</a>'+"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="status">{statusTranslate}</a>'+"</li>"+"</ul>"+"</div>",tplConfig:{},slidePanelBlockClsSel:"favorites-block",panelListerItemClass:"small",_tplConfig:{},init:function(el,config){this._tplConfig={timeTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Recently added")),nameTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Alphabetical")),
statusTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Activity status"))},this.panelListerMainContainerEl=Ext.get(this.panelListerMainContainerId);this.addEvents(JSM.component.Favorites.EVENT_FAVORITES_CONTENT_COMPLETED);JSM.component.Favorites.superclass.init.call(this,el,config)},setOrderList:function(){JSM.component.Favorites.superclass.setOrderList.call(this);this._setOrderType()},_setOrderType:function(){this.orderTypeInputEl=Ext.get(this.orderTypeInputId);switch(this._orderType){case JSM.component.SlidePanelLister.ORDER_TYPE_TIME:this.orderTypeInputEl.dom.value=
this._tplConfig.timeTranslate;break;case JSM.component.SlidePanelLister.ORDER_TYPE_NAME:this.orderTypeInputEl.dom.value=this._tplConfig.nameTranslate;break;case JSM.component.SlidePanelLister.ORDER_TYPE_STATUS:default:this.orderTypeInputEl.dom.value=this._tplConfig.statusTranslate;break}},getNextItems:function(){var content="",max=this.computeLayout().maxVisibles+this._index;for(this._index;this._index<max;this._index++)if(this._panelListItems&&this._panelListItems[this._index]){this._panelListItems[this._index].blockType=
JSM.plugin.ListPageBuilder.BLOCK_TYPE_FAVORITES;this._panelListItems[this._index].size=this.panelListerItemClass;this._panelListItems[this._index].favourite=true;content+=this.plugins["ListPageBuilder"].setBlock(this._panelListItems[this._index]);delete this._panelListItems[this._index]}return content},showNoPanelList:function(){JSM.component.MyHistory.superclass.showNoPanelList.call(this);this.fireEvent(JSM.component.Favorites.EVENT_FAVORITES_SHOW_NO_PANEL,{scope:this})},bind:function(){JSM.component.Favorites.superclass.bind.call(this);
this.element.removeClass("favorites")},unbind:function(){JSM.component.Favorites.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.MyHistory=function(el,config){JSM.component.MyHistory.superclass.constructor.call(this,el,config)};JSM.component.SlidePanelLister.ORDER_TYPE_NAME="name";JSM.component.SlidePanelLister.ORDER_TYPE_TIME="time";JSM.component.MyHistory.EVENT_MYHISTORY_SHOW_NO_PANEL="myhistory-show-no-panel";
Chaos.extend(JSM.component.MyHistory,JSM.component.SlidePanelLister,{name:"MyHistory",isAnimatedSlidePanel:false,isNeededFavoritesPlugin:false,getListedPerformersUrl:"History/Get",panelListerMainContainerId:"myhistory",panelListerClsSel:"myhistory",panelListerIconClsSel:"history_icon",noPanelListerCls:"no_myhistory",panelListerContainerId:"myhistory_container",panelListerInnerContainerId:"myhistory_inner",contentId:"myhistory_content",selectListElementId:"myhistory_ordertype_select",selectListElementSel:"select",
selectListInputSel:"input[name=myhistory_order_type]",orderTypeInputId:"myhistory_order_type",orderTypeBodyTag:'<input type="text" value="{nameTranslate}" class="select textfield medium" readonly="readonly" name="myhistory_order_type" id="myhistory_order_type" />'+'<input type="hidden" value="name" id="myhistory_order_type_hidden" name="myhistory_order_type_selected" />'+'<a href="#" class="select_arrow small"></a>'+'<div id="" class="select_list_container">'+'<ul class="select_replacement">'+'<li class="select_option">'+
'<a href="#" class="list_item" name="time">{timeTranslate}</a>'+"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="name">{nameTranslate}</a>'+"</li>"+'<li class="select_option">'+'<a href="#" class="list_item" name="status">{statusTranslate}</a>'+"</li>"+"</ul>"+"</div>",useMask:false,slidePanelBlockClsSel:"myhistory-block",isSlidePanelNeeded:false,init:function(el,config){this.noListTranslate=Chaos.translate("Empty History");this.emptyListTranslate=Chaos.translate("Follow your previous activities here."),
this._tplConfig={timeTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Chronological")),nameTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Alphabetical")),statusTranslate:JSM.Util.unEscapeHTML(Chaos.translate("Activity status"))},JSM.component.MyHistory.superclass.init.call(this,el,config)},setOrderList:function(){JSM.component.MyHistory.superclass.setOrderList.call(this);this._setOrderType()},_setOrderType:function(){this.orderTypeInputEl=Ext.get(this.orderTypeInputId);switch(this._orderType){case JSM.component.SlidePanelLister.ORDER_TYPE_TIME:this.orderTypeInputEl.dom.value=
this._tplConfig.timeTranslate;break;case JSM.component.SlidePanelLister.ORDER_TYPE_NAME:this.orderTypeInputEl.dom.value=this._tplConfig.nameTranslate;break;case JSM.component.SlidePanelLister.ORDER_TYPE_STATUS:default:this.orderTypeInputEl.dom.value=this._tplConfig.statusTranslate;break}},showNoPanelList:function(){JSM.component.MyHistory.superclass.showNoPanelList.call(this);this.fireEvent(JSM.component.MyHistory.EVENT_MYHISTORY_SHOW_NO_PANEL,{scope:this})},getNextItems:function(){var content="",
max=this.computeLayout().maxVisibles+this._index;for(this._index;this._index<max;this._index++)if(this._panelListItems&&this._panelListItems[this._index]){this._panelListItems[this._index].blockType=JSM.plugin.ListPageBuilder.BLOCK_TYPE_HISTORY;this._panelListItems[this._index].size=this.panelListerItemClass;content+=this.plugins["ListPageBuilder"].setBlock(this._panelListItems[this._index]);delete this._panelListItems[this._index]}return content},bind:function(){JSM.component.MyHistory.superclass.bind.call(this)},
unbind:function(){JSM.component.MyHistory.superclass.unbind.call(this);this.element.removeClass("myhistory")}});Ext.namespace("JSM.component");JSM.component.AwardsStatusUpdater=function(el,config){JSM.component.AwardsStatusUpdater.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.AwardsStatusUpdater,JSM.component.StatusUpdater,{name:"AwardsStatusUpdater",_statusEl:undefined,_statusSel:".status",_onlineCls:"online",_offlineCls:"offline",_freeCls:"free",hiddenCls:"hidden",isOfflineSel:".is_offline",voteBtnSel:".vote",containerPrefix:"container_",_duration:0.2,_offlineTextEl:undefined,_voteButtonEl:undefined,_containerEl:undefined,_performerId:undefined,init:function(el,config){if(!application.isLoggedIn())this.voteBtnSel=".signup";JSM.component.AwardsStatusUpdater.superclass.init.call(this,
el,config)},statusRecovery:function(data){var perfId=data.model.id,perfBoxEl=Ext.get(perfId).findParent("div"),perfInnerBoxEl=Ext.get(perfBoxEl);this._performerId=data.model.id.split("_")[1];this._containerEl=Ext.get(this.containerPrefix+this._performerId);this._statusBoxEl=perfInnerBoxEl.select(this._statusSel).item(0);if(!this._containerEl.hasClass("banned")){if(data.newClass==this._offlineCls){this._containerEl.replaceClass(this._freeCls,this._offlineCls);this.hideStatus(perfInnerBoxEl,true)}else{this._statusBoxEl.replaceClass(this._offlineCls,
this._onlineCls);this._containerEl.replaceClass(this._offlineCls,this._freeCls);this.showStatus(perfInnerBoxEl)}this._voteButtonEl=this._containerEl.select(this.voteBtnSel).item(0);this._offlineTextEl=this._containerEl.select(this.isOfflineSel).item(0);if(data.newClass==this._offlineCls)this.disableVote();else this.enableVote()}},showStatus:function(el){this._statusEl=el.select(this._statusSel).item(0);if(this._statusEl.hasClass(this._onlineCls))TweenLite.to(this._statusEl.dom,this._duration,{css:{bottom:0}})},
hideStatus:function(el,isClsChangeNeeded){this._statusEl=el.select(this._statusSel).item(0);var self=this;TweenLite.to(this._statusEl.dom,this._duration,{css:{bottom:"-25px"},onComplete:function(){if(isClsChangeNeeded)self._statusBoxEl.replaceClass(self._onlineCls,self._offlineCls)}})},enableVote:function(){if(this._offlineTextEl);if(this._voteButtonEl)this._voteButtonEl.removeClass(this.hiddenCls)},disableVote:function(voteBtnEl,performerId){if(!this._offlineTextEl||!this._voteButtonEl)if(typeof voteBtnEl!=
"undefined"&&typeof performerId!="undefined"){this._voteButtonEl=voteBtnEl;this._performerId=performerId;this._containerEl=Ext.get(this.containerPrefix+this._performerId);this._offlineTextEl=this._containerEl.select(".is_offline").item(0)}this._offlineTextEl.removeClass(this.hiddenCls);this._voteButtonEl.addClass(this.hiddenCls);this._offlineTextEl=undefined;this._voteButtonEl=undefined},updateStatuses:function(containerId,status){var perfContainerEl,perfImgEl,perfLinkEl,oldStatus,newStatus;perfContainerEl=
Ext.get(containerId);if(perfContainerEl==null||perfContainerEl.hasClass(this.commercialContainerCls))return;perfContainerEl.dom.setAttribute("data-real-status",status);perfImgEl=perfContainerEl.select(this.imageSel);if(perfImgEl.getCount()==0)return;perfLinkEl=perfContainerEl.select(this.perfLinkSel);if(perfLinkEl.getCount()==0||perfLinkEl.item(0).hasClass(this.commercialContainerCls))return;if(perfContainerEl.hasClass(this._freeCls))oldStatus=this._freeCls;else oldStatus=this._offlineCls;newStatus=
this.statuses[status];if(oldStatus==newStatus)return;JSM.Util.console("info","forceConsole",["[AwarsStatusUpdater] "+perfImgEl.item(0).id.split("_")[1]+": "+oldStatus+"->"+newStatus]);switch(newStatus){case JSM.component.StatusUpdater.OFFLINE_STATUS:this.statusRecovery({model:perfLinkEl.item(0),newClass:this._offlineCls});break;default:this.statusRecovery({model:perfLinkEl.item(0),newClass:this._freeCls});break}},bind:function(){JSM.component.AwardsStatusUpdater.superclass.bind.call(this)},unbind:function(){JSM.component.AwardsStatusUpdater.superclass.unbind.call(this)}});
Chaos.window.Popup=function(el,config){Chaos.window.Popup.superclass.constructor.call(this,el,config)};
Chaos.extend(Chaos.window.Popup,Chaos.Window,{url:undefined,mask:undefined,name:"popup",init:function(el,config){Chaos.window.Popup.superclass.init.call(this,el,config);this.addEvents({"beforeload":true,"complete":true,"load":true,"error":true,"failure":true});var maskConfig={};Chaos.apply(maskConfig,config,{events:{show:{"popup.beforeload":{message:this.config.maskMessage}},hide:{"popup.complete":{m:1}}}});this.mask=this.config.mask instanceof Chaos.Mask?this.config.mask:Chaos.isObject(this.config.mask)?
new Chaos.Mask(el,this.config.mask):undefined},loadHTML:function(options){this.loadConfig=options;Ext.applyIf(this.loadConfig,{dataType:"html",success:this.onLoad});this.fireEvent("beforeload",{options:options});if(Chaos.isDefined(this.mask))this.mask.show();Chaos.Ajax.request({url:this.loadConfig.url||this.url,success:this.onLoadSuccess,error:this.onLoadError,failure:this.onLoadFailure,dataType:this.loadConfig.dataType})},reload:function(){this.loadHTML(this.loadConfig)},onLoadSuccess:function(response){var data=
response.data;this.headTag=data.header.template;this.headData=data.header.data;this.bodyTag=data.body.template;this.bodyData=data.body.data;this.footTag=data.footer.template;this.footData=data.footer.data;this.render();this.fireEvent("complete",{window:this,response:response});this.setPosition(this.left,this.top);if(Chaos.isDefined(this.mask))this.mask.hide()},bind:function(){Chaos.window.Popup.superclass.bind.call(this)},unbind:function(){Chaos.window.Popup.superclass.unbind.call(this)}});
Chaos.window.Tooltip=function(el,config){Chaos.window.Tooltip.superclass.constructor.call(this,el,config)};Chaos.extend(Chaos.window.Tooltip,Chaos.Window,{url:undefined,mask:undefined,name:"popup",init:function(el,config){Chaos.window.Popup.superclass.init.call(this,el,config)}});Ext.namespace("JSM.window.ContactUsWindow");JSM.window.ContactUsWindow=function(el,config){JSM.window.ContactUsWindow.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.window.ContactUsWindow,Chaos.Window,{name:"ContactUsWindow",formId:"contactus_form",contatcusForm:undefined,selectList:undefined,statusListId:"status_list",languageListId:"language_list",statusInputName:"selected_status",languageInputName:"selected_lang",contactContainerSel:".contact_container",contactContainerEl:undefined,warningTagSel:".overlay_warning_tag",chooseContactId:"choose_contact",goBackLinkSel:".go_back_link",contactByEmailId:"contact_by_email",onlineSupportLinkId:"online_support_link",
sendMessageLinkSel:"send_message_link",contactOnlineSupportSel:"contact_online_support",flashIdPrefix:"online_support_chat",supportOnlineLinkId:"support_online_link",contentUrl:undefined,isLoadContactUsBlock:false,closeIconId:"close_icon",closeIconEl:undefined,errorMessageSel:".error_message",successMessageSel:".success_message",contactusLinkId:"contactus_link",init:function(el,config){Ext.fly(this.contactusLinkId).dom.removeAttribute("href");Ext.fly(this.supportOnlineLinkId).dom.removeAttribute("href");
JSM.window.ContactUsWindow.superclass.init.call(this,el,config)},setContactUsOverlay:function(){if(typeof Ext.get(this.closeIconId)=="object")this.closeIconEl=Ext.get(this.closeIconId);this.selectList=new JSM.component.SelectList(this.languageListId,{inputSel:".language_selection",hiddenInputSel:"input[name="+this.languageInputName+"]",hasMoreList:true,pageId:this.element,hideEl:Ext.get(this.statusListId),scrollPaneContainerId:"language_list_container"});if(Ext.get(this.statusListId)!=null)this.selectList=
new JSM.component.SelectList(this.statusListId,{inputSel:".status_selection",hiddenInputSel:"input[name="+this.statusInputName+"]",pageId:this.element,hasMoreList:true,scrollPaneContainerId:"status_list_container"});this.contactusForm=new JSM.form.Form(this.formId,{scope:this,submitSel:"#send_button",errorNodeClass:"overlay_warning_tag"});if(Ext.isMac&&Ext.isSafari){var flashObj=Ext.get(this.flashIdPrefix+"_obj"),html=Ext.get(this.flashIdPrefix+"_embed").dom.outerHTML,newHtml;flashObj.select("param[name=wmode]").item(0).dom.value=
"transparent";newHtml=html.replace("window","transparent");Ext.get(this.flashIdPrefix+"_embed").dom.outerHTML=newHtml}this.contactContainerEl=this.element.select(this.contactContainerSel)},onGoBackLinkClick:function(ev){ev.preventDefault();var flashObj;if(Ext.get(this.contactByEmailId).isVisible())this.onChooseOptionShow();else{flashObj=Ext.get(this.flashIdPrefix+"_obj");if(flashObj!=undefined&&flashObj.dom.closeChat)flashObj.dom.closeChat();else{flashObj=Ext.get(this.flashIdPrefix+"_embed");if(flashObj!=
undefined&&flashObj.dom.closeChat)flashObj.dom.closeChat()}}},onCloseSupportChat:function(){this.onChooseOptionShow();if(application.layout.supportChatOnline!=undefined)window.supportChat=application.layout.supportChatOnline},onChooseOptionShow:function(){this.contactContainerEl.setDisplayed(false);Ext.getBody().select(this.warningTagSel).hide();Ext.get(this.chooseContactId).setDisplayed(true)},onShowSupportChatClick:function(ev){if(ev!=undefined)ev.preventDefault();window.supportChat=this;this.contactContainerEl.setDisplayed(false);
Ext.get(this.contactOnlineSupportSel).show()},onShowSupportEmailClick:function(ev){ev.preventDefault();this.contactContainerEl.setDisplayed(false);Ext.get(this.contactByEmailId).show()},onInputBlur:function(){var errorMsg=this.element.select(this.errorMessageSel),successMsg=this.element.select(this.successMessageSel);if(errorMsg.isVisible())errorMsg.hide(1);if(successMsg.isVisible())successMsg.hide(1)},onLoadContactUsBlock:function(elId){Chaos.Ajax.request({method:"GET",type:"json",scope:this,url:this.contentUrl,
success:function(response,options,requestData){var data=response.json;if(data.success){var html=data.content;var contactUsTpl=new Ext.Template(html);contactUsTpl.append(this.element,contactUsTpl);this.setContactUsOverlay();this.onShowBlock(elId);this.addEventHandlers()}},error:function(response,options,requestData){}})},addEventHandlers:function(){this.closeIconEl.on("click",this.onClosePopupClick,this);this.element.select(this.goBackLinkSel).on("click",this.onGoBackLinkClick,this);Ext.get(this.onlineSupportLinkId).on("click",
this.onShowSupportChatClick,this);Ext.get(this.sendMessageLinkSel).on("click",this.onShowSupportEmailClick,this);this.contactusForm.on("inputBlur",this.onInputBlur,this)},onShowBlock:function(elId){if(elId==this.supportOnlineLinkId)this.onShowSupportChatClick();else this.onChooseOptionShow();this.show();Ext.getBody().setStyle({overflow:"hidden"})},onContactUsLinkClick:function(ev,target){if(!this.isLoadContactUsBlock){this.onLoadContactUsBlock(target.id);this.isLoadContactUsBlock=true}else this.onShowBlock(target.id)},
hideAllElements:function(){var warningTags=Ext.getBody().select(this.warningTagSel);if(warningTags)warningTags.hide();this.contactContainerEl.setDisplayed(false)},onEscKeypress:function(ev,target){if(ev.keyCode==27&&this.exitOnEsc&&this._isShown){this.hideAllElements();Ext.getBody().setStyle({overflow:"visible"});this.hide(this.hideDuration)}},onClosePopupClick:function(ev,target){if(this.exitOnOverlayClick&&this._isShown){this.hideAllElements();Ext.getBody().setStyle({overflow:"visible"});this.hide(this.hideDuration)}},
bind:function(){JSM.window.ContactUsWindow.superclass.bind.call(this);Ext.fly(this.contactusLinkId).on("click",this.onContactUsLinkClick,this);Ext.fly(this.supportOnlineLinkId).on("click",this.onContactUsLinkClick,this)},unbind:function(){JSM.window.ContactUsWindow.superclass.unbind.call(this);this.element.select(this.goBackLinkSel).un("click",this.onGoBackLinkClick,this);Ext.get(this.onlineSupportLinkId).un("click",this.onShowSupportChatClick,this);Ext.get(this.sendMessageLinkSel).un("click",this.onShowSupportEmailClick,
this);this.contactusForm.un("inputBlur",this.onInputBlur,this);Ext.fly(this.contactusLinkId).un("click",this.onContactUsLinkClick,this);Ext.fly(this.supportOnlineLinkId).un("click",this.onContactUsLinkClick,this);this.closeIconEl.un("click",this.onClosePopupClick,this)}});Ext.namespace("JSM.window.DropDownMenu");JSM.window.DropDownMenu=function(el,config){JSM.window.DropDownMenu.superclass.constructor.call(this,el,config)};JSM.window.DropDownMenu.STATE_PANEL_OPENED="panel-opened";
JSM.window.DropDownMenu.STATE_PANEL_HIDED="panel-hided";JSM.window.DropDownMenu.STATE_SUBMENU_SHOW="show";JSM.window.DropDownMenu.STATE_SUBMENU_HIDE="hide";JSM.window.DropDownMenu.EVENT_MENU_ITEM_CLICK="menu-item-click";JSM.window.DropDownMenu.EVENT_BODY_CLICK="body-click";JSM.window.DropDownMenu.EVENT_SUB_MENU_HIDE="hide-submenu";JSM.window.DropDownMenu.GLOBALEVENT_ALL_DROPDOWN_HIDE="all-dropdown-hide";JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_OPENED="panel-opened";
JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_CLOSED="panel-hided";JSM.window.DropDownMenu.TYPE_LINK="link";JSM.window.DropDownMenu.TYPE_SUBMENU="submenu";
Chaos.extend(JSM.window.DropDownMenu,Chaos.Window,{name:"DropDownMenu",bodyId:undefined,groupId:"submenu",buttonId:"profilname",buttonEl:undefined,activeClass:"active",menuContainerSel:".left_side",menuContainerEl:undefined,setArrowPosition:true,arrowSel:"arrow",arrowEl:undefined,oneSubMenuDisplay:true,isSubmenuObject:false,isHideAllSubmenu:false,subBottomMargin:10,chatPageId:"chat.performer",clickableItemsClass:"clickable",openedClass:"opened",items:{menu_favorites:{itemId:"menu_favorites",type:JSM.window.DropDownMenu.TYPE_LINK},
menu_messages:{itemId:"menu_messages",type:JSM.window.DropDownMenu.TYPE_LINK},menu_profile:{itemId:"menu_profile",type:JSM.window.DropDownMenu.TYPE_LINK},menu_account:{itemId:"menu_account",type:JSM.window.DropDownMenu.TYPE_LINK},menu_general:{itemId:"menu_general",subMenuPosition:"left",activeClass:"active",subMenuId:"general_settings_menu",type:JSM.window.DropDownMenu.TYPE_SUBMENU,subMenuSize:0,stateSubMenu:JSM.window.DropDownMenu.STATE_SUBMENU_HIDE},menu_extras:{itemId:"menu_extras",subMenuPosition:"left",
activeClass:"active",subMenuId:"extras_submenu",type:JSM.window.DropDownMenu.TYPE_SUBMENU,subMenuSize:0,stateSubMenu:JSM.window.DropDownMenu.STATE_SUBMENU_HIDE},menu_topmember:{itemId:"menu_topmember",type:JSM.window.DropDownMenu.TYPE_LINK},menu_logout:{itemId:"menu_logout",subMenuPosition:"bottom",activeClass:"active",subMenuId:"logout_confirmation",type:JSM.window.DropDownMenu.TYPE_SUBMENU,subMenuSize:0,stateSubMenu:JSM.window.DropDownMenu.STATE_SUBMENU_HIDE}},showClass:"show",toggleEventHandlersOnDisplay:true,
_isAnimating:false,_headerMenuPlugin:false,init:function(el,config){this.addEvents(JSM.window.DropDownMenu.STATE_PANEL_OPENED,JSM.window.DropDownMenu.STATE_PANEL_HIDED,JSM.window.DropDownMenu.EVENT_MENU_ITEM_CLICK,JSM.window.DropDownMenu.EVENT_SUB_MENU_HIDE,JSM.window.DropDownMenu.EVENT_BODY_CLICK);Chaos.addEvents(JSM.window.DropDownMenu.GLOBALEVENT_ALL_DROPDOWN_HIDE);Chaos.addEvents(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_OPENED);Chaos.addEvents(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_CLOSED);
this.bodyId=Ext.getBody().dom.id;this.elementEl=Ext.get(this.elementId);this.buttonEl=Ext.get(this.buttonId);this.menuContainerEl=Ext.getBody().select(this.menuContainerSel).item(0);this.arrowEl=this.element.select("."+this.arrowSel).item(0);this.setItemEvents();JSM.window.DropDownMenu.superclass.init.call(this,el,config)},setItemEvents:function(){for(var i in this.items)if(Ext.get(this.items[i].itemId))Ext.get(this.items[i].itemId).on("click",this.onItemClick,this)},onItemClick:function(ev,target){var targetEl=
Ext.get(target),nodeName=targetEl.dom.nodeName.toLowerCase();if(nodeName!="a"){targetEl=Ext.get(targetEl.findParent("a"));nodeName=targetEl.dom.nodeName.toLowerCase()}if(nodeName=="a"&&!targetEl.hasClass(this.clickableItemsClass)){if(targetEl.id=="menu_messages"&&(Ext.isIE7||this.bodyId!="index.index")&&!JSM.Util.isCurrentPage("awards.index"))return;if(targetEl.id=="menu_topmember"&&this.bodyId!="index.index"&&!JSM.Util.isCurrentPage("awards.index"))return;if(targetEl.id=="menu_account"&&(Ext.isIE7||
this.bodyId!="index.index")&&!JSM.Util.isCurrentPage("awards.index"))return;if(targetEl.id=="menu_favorites"&&this.bodyId!="index.index"&&!JSM.Util.isCurrentPage("awards.index"))return;if(targetEl.id=="menu_general"&&this.bodyId=="setting.general")return;ev.preventDefault();ev.stopPropagation();if(this.items[targetEl.id]!=undefined){if(this.items[targetEl.id].activeClass)Ext.fly(targetEl.id).addClass(this.items[targetEl.id].activeClass);if(this.items[targetEl.id].type==JSM.window.DropDownMenu.TYPE_LINK)this.showContent(targetEl.id);
else if(this.items[targetEl.id].type==JSM.window.DropDownMenu.TYPE_SUBMENU)if(this.items[targetEl.id].stateSubMenu==JSM.window.DropDownMenu.STATE_SUBMENU_SHOW){this.isHideAllSubmenu=false;this.hideSubMenu(targetEl.id)}else{if(this.oneSubMenuDisplay==true)this.hideAllSubMenu();this.showSubMenu(targetEl.id)}}}this.fireEvent(JSM.window.DropDownMenu.EVENT_MENU_ITEM_CLICK,targetEl.id)},showContent:function(itemId){Chaos.WinMgr.hideGroup(this.groupId)},showSubMenu:function(itemId){Ext.fly(this.items[itemId].subMenuId).setStyle({"display":"block",
"visibility":"visible"});this.items[itemId].stateSubMenu=JSM.window.DropDownMenu.STATE_SUBMENU_SHOW},hideAllSubMenu:function(ev){if(ev!=undefined)this.isSubmenuObject=true;else this.isSubmenuObject=false;this.isHideAllSubmenu=true;for(var i in this.items)if(this.items[i].stateSubMenu==JSM.window.DropDownMenu.STATE_SUBMENU_SHOW)this.hideSubMenu(i);Chaos.fireEvent(JSM.window.DropDownMenu.GLOBALEVENT_ALL_DROPDOWN_HIDE,this)},hideSubMenu:function(indexValue){Ext.fly(this.items[indexValue].subMenuId).setStyle({"display":"none",
"visibility":"hidden"});this.items[indexValue].stateSubMenu=JSM.window.DropDownMenu.STATE_SUBMENU_HIDE;Ext.fly(this.items[indexValue].itemId).removeClass(this.activeClass);this.fireEvent(JSM.window.DropDownMenu.EVENT_SUB_MENU_HIDE,indexValue,this.items[indexValue])},onButtonClick:function(ev,target){if(typeof application.layout.header._headerMenuPlugin!="undefined"&&!this._headerMenuPlugin)this._headerMenuPlugin=application.layout.header._headerMenuPlugin;if(this.buttonEl.hasClass(this.activeSel)){this.element.setStyle({"display":"block",
"visibility":"hidden"});this.element.addClass(this.openedClass);this.element.removeClass(this.showClass);if(this._headerMenuPlugin)this._headerMenuPlugin.refreshDropDownStates(this.buttonEl.id,"opened");if(this.left==undefined)this.left=this.buttonEl.getOffsetsTo(this.menuContainerEl)[0]+this.buttonEl.getWidth()/2-this.element.getWidth()/2;if(this.setArrowPosition&&this.arrowEl)this.arrowEl.setStyle({"margin-right":this.buttonEl.getWidth(true)/2+this.arrowEl.getWidth()/2+"px"});this.fireEvent(JSM.window.DropDownMenu.STATE_PANEL_OPENED,
ev,target);Chaos.fireEvent(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_OPENED,this);this.setPosition(this.left,this.top);this.element.setStyle({"visibility":"visible"});JSM.window.DropDownMenu.superclass.show.call(this)}else{JSM.window.DropDownMenu.superclass.hide.call(this);this.element.removeClass(this.openedClass);if(this._headerMenuPlugin)this._headerMenuPlugin.refreshDropDownStates(this.buttonEl.id,"closed");this.fireEvent(JSM.window.DropDownMenu.STATE_PANEL_HIDED,ev,target);Chaos.fireEvent(JSM.window.DropDownMenu.GLOBALEVENT_DROP_DOWN_MENU_CLOSED,
this)}},onBodyClick:function(ev,target){this.fireEvent(JSM.window.DropDownMenu.EVENT_BODY_CLICK,this,target)},bind:function(){JSM.window.DropDownMenu.superclass.bind.call(this);this.on("hide",this.hideAllSubMenu,this);Ext.getBody().on("click",this.onBodyClick,this)},unbind:function(){JSM.window.DropDownMenu.superclass.unbind.call(this);for(var i in this.items)Ext.get(this.items[i].itemId).un("click",this.onItemClick,this);this.un("hide",this.hideAllSubMenu,this);Ext.getBody().un("click",this.onBodyClick,
this)}});Ext.namespace("JSM.window");JSM.window.DropDownMenuForm=function(el,config){JSM.window.DropDownMenuForm.superclass.constructor.call(this,el,config)};JSM.window.DropDownMenuForm.GLOBALEVENT_SLIDE_ITEM_CLICK="dropdown-slide-item-click";JSM.window.DropDownMenuForm.GLOBALEVENT_SAVE_SETTINGS="dropdown-save-settings";
Chaos.extend(JSM.window.DropDownMenuForm,Chaos.Window,{name:"DropDownMenuForm",settingsBtnId:"dropdown_menu_general",selectItemSel:".settings_row",ajaxUrl:undefined,arrowRightCls:"select_right",arrowLeftCls:"select_left",arrowCls:"slide_arrow",arrowUpCls:"up",arrowDownCls:"down",slidingSubMenuClass:"slide",slideDuration:0.15,listIdSel:"list",hiddenInputIdSel:"value",activeCls:"selected",settingsItemSel:".settings_item",delayedSaveTime:1E3,tokenInputId:"form_token_general_settings",sessionId:"session",
slidingListId:"language_list",slidingBlockId:"language_block",openedStateClass:"opened",toggleEventHandlersOnDisplay:true,slideItemCls:"clickable",_sessionValue:undefined,_currentListId:undefined,_sessionEl:undefined,_tokenInputEl:undefined,_indexValue:0,_index:undefined,_isFirstAjax:false,_isAjaxInProgress:false,_isClickedOtherList:false,_currentSettingValue:undefined,_changedSettings:[],_delayedSaveTask:undefined,_scrollPane:undefined,_isAnimating:false,_formEl:undefined,_slideMenuOpened:false,
_maskForSaving:undefined,_defaultListItemHeight:undefined,_slidingBlockEl:undefined,_savedData:undefined,init:function(el,config){this._savedData={};this._tokenInputEl=Ext.get(this.tokenInputId);this._sessionEl=Ext.get(this.sessionId);this._sessionValue=document.cookie.replace(/.*session\=/,"").split(";")[0];if(this._sessionEl.getValue()=="")this._sessionEl.dom.value=this._sessionValue;this._delayedSaveTask=new Ext.util.DelayedTask(this.saveSettings,this);this._slidingBlockEl=Ext.get(this.slidingBlockId);
this._maskForSaving=new Chaos.Mask("general_settings_menu",{tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',appendTo:Ext.get("general_settings_menu"),insertionMethod:"append",maskPosition:"local",isVisibleMask:true,maskOpacity:0.4,maskClass:"saveMask",useCursor:true});Chaos.addEvents(JSM.window.DropDownMenuForm.GLOBALEVENT_SLIDE_ITEM_CLICK,JSM.window.DropDownMenuForm.GLOBALEVENT_SAVE_SETTINGS);JSM.window.DropDownMenuForm.superclass.init.call(this,el,config)},onElementClick:function(ev,target){ev.stopPropagation();
var targetEl=Ext.get(target),formElPrefixSel,listEl,listItems,activeElems,enableSave=false;if(targetEl&&!this._slidingBlockEl.contains(target)){ev.preventDefault();this._formEl=this.getParentForm(targetEl)}else return;if(!this._formEl)return;formElPrefixSel=this.getPrefixString(this._formEl.id);listEl=Ext.get(formElPrefixSel+this.listIdSel);listItems=listEl.select(this.settingsItemSel),activeElems=listEl.select("."+this.activeCls);if(!this._defaultListItemHeight)this._defaultListItemHeight=listItems.item(0).dom.offsetHeight;
if(this._currentSettingValue==undefined&&this._isAjaxInProgress==false)this._currentSettingValue=activeElems.getCount()?activeElems.item(0).dom.title:undefined;if(this._currentListId!=undefined&&this._currentListId!=listEl.id){this._currentSettingValue=activeElems.getCount()?activeElems.item(0).dom.title:undefined;this._isClickedOtherList=true;this._currentListId=listEl.id}else{this._isClickedOtherList=false;this._currentListId=listEl.id}if(this._currentListId==this.slidingListId){this._delayedSaveTask.cancel();
this._isClickedOtherList=false}this._index=parseInt(this.indexOfItem(listItems));if(targetEl.dom.nodeName.toLowerCase()=="span"&&targetEl.hasClass(this.arrowLeftCls)){enableSave=true;listEl.select("."+this.activeCls).removeClass(this.activeCls);this.onPrevBtnClick(listEl,listItems)}else if(targetEl.dom.nodeName.toLowerCase()=="span"&&targetEl.hasClass(this.arrowRightCls)||targetEl.dom.nodeName.toLowerCase()=="label"&&!Ext.fly(this._formEl.findParent("li")).hasClass(this.slidingSubMenuClass)){enableSave=
true;listEl.select("."+this.activeCls).removeClass(this.activeCls);this.onNextBtnClick(listEl,listItems)}else if(this._formEl.findParent("li")&&Ext.fly(this._formEl.findParent("li")).hasClass(this.slidingSubMenuClass)){var labelEl=Ext.get(this._formEl.findParent("li")).select("label").item(0);if(labelEl.hasClass(this.activeCls))labelEl.removeClass(this.activeCls);else labelEl.addClass(this.activeCls);enableSave=false;this.slideDisplay(this._formEl)}if(this._changedSettings.indexOf(formElPrefixSel+
this.hiddenInputIdSel)==-1&&enableSave)this._changedSettings.push(formElPrefixSel+this.hiddenInputIdSel);if(enableSave)this.setDataForSave()},slideDisplay:function(el){var self=this;if(!this._isAnimating){this._isAnimating=true;if(this.element.hasClass(this.openedStateClass)){this.element.select("."+this.arrowCls).item(0).addClass(this.arrowDownCls).removeClass(this.arrowUpCls);TweenLite.to(el.dom,this.slideDuration,{height:this._defaultListItemHeight,onCompleteScope:this,onComplete:function(){this.element.removeClass(this.openedStateClass);
this._isAnimating=false;this._slideMenuOpened=false}})}else{this.element.addClass(this.openedStateClass);this.element.select("."+this.arrowCls).item(0).addClass(this.arrowUpCls).removeClass(this.arrowDownCls);TweenLite.to(el.dom,this.slideDuration,{height:this.element.getHeight()-this.element.getPadding("t"),onCompleteScope:this,onComplete:function(){if(!(this._scrollPane instanceof JSM.component.ScrollPane))this._scrollPane=new JSM.component.ScrollPane(this.slidingBlockId,{contentSel:"#"+this.slidingListId,
isSetHeight:false,isAutoHide:false,hideOnMouseout:false,scrollDelta:5,isAnimateScrollBar:false});this._isAnimating=false;this._slideMenuOpened=true}})}}},getParentForm:function(targetEl){return targetEl.findParent("form",undefined,true)},getPrefixString:function(elId){return elId.match(/^\w+[_]/g)[0]||null},indexOfItem:function(lists){var index,listLength=lists.getCount(),self=this;if(this._isClickedOtherList==true)this._indexValue=0;lists.each(function(){if(this)if(this.hasClass(self.activeCls))index=
self._indexValue;else self._indexValue=self._indexValue>=listLength?0:self._indexValue+1;else{self._indexValue=0;index=self._indexValue}});return index},onPrevBtnClick:function(list,items){var listPrefixSel=this.getPrefixString(list.id),prevItem,hiddenInputEl=Ext.get(listPrefixSel+this.hiddenInputIdSel);if(this._index==0){prevItem=items.item(items.getCount()-1);this._indexValue=0}else{prevItem=items.item(this._index-1);this._indexValue=0}prevItem.addClass(this.activeCls);hiddenInputEl.dom.value=prevItem.dom.title},
onNextBtnClick:function(list,items){var listPrefixSel=this.getPrefixString(list.id),nextItem,hiddenInputEl=Ext.get(listPrefixSel+this.hiddenInputIdSel);if(this._index+1>=items.getCount()){nextItem=items.item(0);this._indexValue=0}else{nextItem=items.item(this._index+1);this._indexValue=0}nextItem.addClass(this.activeCls);hiddenInputEl.dom.value=nextItem.dom.title},setDataForSave:function(){var i,inputEl,dataLength=this._changedSettings.length;this._delayedSaveTask.cancel();if(dataLength){for(i=0;i<
dataLength;i++){inputEl=Ext.get(this._changedSettings[i]);this._savedData[inputEl.dom.name]=inputEl.getValue()}this._delayedSaveTask.delay(this.delayedSaveTime)}},saveSettings:function(){if(this._maskForSaving)this._maskForSaving.show();this._isAjaxInProgress=true;var _params={session:this._sessionEl.getValue(),form_token:this._tokenInputEl.dom.value};Ext.apply(_params,this._savedData);Chaos.Ajax.request({url:Chaos.Ajax.setXDomainUrl(this.ajaxUrl,true),method:"POST",type:"json",scope:this,xdomain:true,
params:_params,success:this.saveSuccessCallBack,error:this.saveErrorCallBack,failure:this.saveFailureCallBack});Chaos.fireEvent(JSM.window.DropDownMenuForm.GLOBALEVENT_SAVE_SETTINGS,{scope:this,params:_params})},saveSuccessCallBack:function(response){var data=response.json;if(this._maskForSaving)this._maskForSaving.hide();this._currentSettingValue=this.inputValue;this._isAjaxInProgress=false;this._tokenInputEl.dom.value=data.form_token;this._isFirstAjax=true;this._changedSettings=[]},saveErrorCallBack:function(response){var data=
response.json;if(this._maskForSaving)this._maskForSaving.hide();this._tokenInputEl.dom.value=data.form_token;this._changedSettings=[];this._isAjaxInProgress=false},saveFailureCallBack:function(response){var data=response.json;if(this._maskForSaving)this._maskForSaving.hide();this._tokenInputEl.dom.value=data.form_token;this._changedSettings=[];this._isAjaxInProgress=false},subMenuHide:function(){if(this._formEl&&this._slideMenuOpened){this.element.select("."+this.arrowCls).item(0).addClass(this.arrowDownCls).removeClass(this.arrowUpCls);
this._formEl.setHeight(this._defaultListItemHeight);this.element.removeClass(this.openedStateClass);this._isAnimating=false;this._slideMenuOpened=false;if(this._maskForSaving)this._maskForSaving.hide()}},onSlideItemClick:function(ev,target){if(Chaos.Cookie.isCookieEnabled()){ev.preventDefault();ev.stopPropagation();var item=target.nodeName.toLowerCase()=="span"?Ext.get(target).findParent("a"):target;if(Ext.get(item).hasClass(this.slideItemCls)){if(this._maskForSaving)this._maskForSaving.show();Chaos.fireEvent(JSM.window.DropDownMenuForm.GLOBALEVENT_SLIDE_ITEM_CLICK,
{scope:this,item:item})}}},bind:function(){JSM.window.DropDownMenuForm.superclass.bind.call(this);this.element.on("click",this.onElementClick,this);this._slidingBlockEl.on("click",this.onSlideItemClick,this)},unbind:function(){JSM.window.DropDownMenuForm.superclass.unbind.call(this);this.element.un("click",this.onElementClick,this);this._slidingBlockEl.un("click",this.onSlideItemClick,this)}});Ext.namespace("JSM.window");
JSM.window.HintPopup=function(el,config){JSM.window.HintPopup.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.window.HintPopup,Chaos.Window,{name:"HintPopup",isModal:false,top:100,left:100,mustRender:true,footTag:undefined,bodyTag:'<span><span class="info_icon">&nbsp;</span><span class="info_text">{message}</span></span>',bodyWrap:"",headTag:undefined,bodyData:{message:""},classPrefix:"pos",showMode:"absolute",init:function(el,config){JSM.window.HintPopup.superclass.init.call(this,el,config)},bind:function(){JSM.window.HintPopup.superclass.bind.call(this)},unbind:function(){JSM.window.HintPopup.superclass.unbind.call(this)}});
Ext.namespace("JSM.window");JSM.window.LogoutConfirmation=function(el,config){JSM.window.LogoutConfirmation.superclass.constructor.call(this,el,config)};JSM.window.LogoutConfirmation.STATE_PANEL_OPENED="panel-opened";JSM.window.LogoutConfirmation.STATE_PANEL_HIDED="panel-hided";JSM.window.LogoutConfirmation.EVENT_MENU_ITEM_CLICK="menu-item-click";JSM.window.LogoutConfirmation.EVENT_BODY_CLICK="body-click";JSM.window.LogoutConfirmation.EVENT_SUB_MENU_HIDE="hide-submenu";
JSM.window.LogoutConfirmation.EVENT_BUTTON_CLICK="button-click";
Chaos.extend(JSM.window.LogoutConfirmation,Chaos.Window,{name:"LogoutConfirmation",buttons:undefined,confirmationYesBtnId:"logout_yes",confirmationNoBtnId:"logout_no",itemObject:undefined,subBottomMargin:10,init:function(el,config){this.addEvents(JSM.window.LogoutConfirmation.STATE_PANEL_OPENED,JSM.window.LogoutConfirmation.STATE_PANEL_HIDED,JSM.window.LogoutConfirmation.EVENT_MENU_ITEM_CLICK,JSM.window.LogoutConfirmation.EVENT_SUB_MENU_HIDE,JSM.window.LogoutConfirmation.EVENT_BODY_CLICK);Chaos.addEvents(JSM.window.LogoutConfirmation.EVENT_BUTTON_CLICK);
this.buttons=this.element.select("a");this._isShown=true;JSM.window.LogoutConfirmation.superclass.init.call(this,el,config)},onConfirmationButtonClick:function(ev,target){ev.preventDefault();ev.stopPropagation();if(target.id==this.confirmationYesBtnId)document.location=target.href||Chaos.getUrl("Auth/Logout",{},{},"",false);else if(target.id==this.confirmationNoBtnId){if(this.itemObject!=undefined){Ext.fly(this.itemObject.itemId).removeClass(this.itemObject.activeClass);this.itemObject.stateSubMenu=
JSM.window.DropDownMenu.STATE_SUBMENU_HIDE}this.fireEvent(JSM.window.LogoutConfirmation.EVENT_BUTTON_CLICK,this.element.id,item);this.element.hide();var item={};item.subMenuSize=this.element.getTop();this.fireEvent(JSM.window.LogoutConfirmation.EVENT_SUB_MENU_HIDE,this.element.id,item)}},bind:function(){JSM.window.LogoutConfirmation.superclass.bind.call(this);this.buttons.on("click",this.onConfirmationButtonClick,this)},unbind:function(){JSM.window.LogoutConfirmation.superclass.unbind.call(this);
this.buttons.un("click",this.onConfirmationButtonClick,this)}});Ext.namespace("JSM.overlay");JSM.Overlay=function(el,config){JSM.Overlay.superclass.constructor.call(this,el,config)};JSM.Overlay.setCurrent=function(obj){if(typeof this.getCurrent()!="undefined"){var currentObj=this.getCurrent();if(obj.isConstant===false&&currentObj.isConstant===false)this.destroyCurrent(currentObj)}this._current=obj};JSM.Overlay.getCurrent=function(){return this._current};
JSM.Overlay.destroyCurrent=function(obj){if(obj.name!="Overlay"){try{obj.unbind()}catch(exception){}this.deleteCurrent(obj)}};JSM.Overlay.deleteCurrent=function(obj){if(obj.name!="Overlay")delete obj};JSM.Overlay.EVENT_OVERLAY_INIT="overlay-init";JSM.Overlay.EVENT_CONTENT_DISPLAYED="content-displayed";JSM.Overlay.EVENT_GETCONTENT_ERROR="get-content-error";JSM.Overlay.EVENT_GETCONTENT_RESPONSE="get-content-response";JSM.Overlay.EVENT_CONTENT_RENDER="content-render";
JSM.Overlay.EVENT_CONTENT_RENDERED="content-rendered";JSM.Overlay.EVENT_STATE_CHANGE=Chaos.History.EVENT_STATE_CHANGE;JSM.Overlay.EVENT_OVERLAY_OPEN="overlay-open";JSM.Overlay.EVENT_OVERLAY_CLOSE="overlay-close";JSM.Overlay.EVENT_AFTER_OVERLAY_CLOSE="after-overlay-close";JSM.Overlay.GLOBALEVENT_SET_SCROLL="set-scroll";JSM.Overlay.GLOBALEVENT_GETCONTENT_ERROR="global-get-content-error";JSM.Overlay.HISTORY_TYPE_OPEN="openOverlay";JSM.Overlay.HISTORY_TYPE_CLOSE="closeOverlay";
Chaos.extend(JSM.Overlay,Chaos.Window,{name:"Overlay",overlayId:"overlay",overlayBackgroundId:"overlay_background",isModal:true,showMode:"fixed",overlayTopPosition:0,left:"center",top:0,verticalDistance:20,showDuration:0.1,hideDuration:0.2,mustRender:true,autoDestroyElement:false,autoDestroy:true,mustGetContent:true,autoLoad:true,getContentUrl:undefined,getContentParams:{},errorTemplate:"<div id='{error_id}'>{error_message}</div>",closeButtonSel:".close_button",getContentViaAjax:true,isConstant:false,
overlayLoaderId:"overlay_loader",manageHistory:false,historyActions:{},defaultHistoryActions:{},registerWithOpenState:false,previousUrl:undefined,xdomain:false,showContent:true,animate:true,darkOverlayCls:"black95",requestFailureId:"request_failure_id",errorRedirectRoute:undefined,overlayBlockId:undefined,containerId:"inner_container",headerContainerId:"header",defaultBrowserScrollBarWidth:17,manageScroll:true,showLoaderTimeoutDelay:200,hideOnBodyClick:false,registerToWinMgr:true,logErrors:false,
_historyConfig:undefined,_enableHistoryEntry:true,_enableAjaxRequest:true,_ajaxTimeoutInProgress:false,_requestFailureEl:undefined,_currentContent:undefined,_errorRedirectUrl:undefined,_selfBottom:undefined,_overlayBlockEl:undefined,_isScrollDisabled:undefined,init:function(el,config){this.previousUrl=this.previousUrl==undefined?document.location.href:this.previousUrl;JSM.Overlay.setCurrent(this);JSM.Overlay.superclass.init.call(this,el,config);if(this.errorRedirectRoute)this._errorRedirectUrl=Chaos.getUrl(this.errorRedirectRoute,
{},{},"");this._containerEl=Ext.get(this.containerId);this._headerContainerEl=Ext.get(this.headerContainerId);this._bodyWidth=Ext.getBody().getWidth();if(this.mustGetContent)this.getContent();if(this.manageHistory)this.setHistoryConfig();this.addEvents(JSM.Overlay.EVENT_OVERLAY_INIT,JSM.Overlay.EVENT_CONTENT_DISPLAYED,JSM.Overlay.EVENT_GETCONTENT_RESPONSE,JSM.Overlay.EVENT_GETCONTENT_ERROR,JSM.Overlay.EVENT_CONTENT_RENDER,JSM.Overlay.EVENT_CONTENT_RENDERED,JSM.Overlay.EVENT_STATE_CHANGE);Chaos.addEvents(JSM.Overlay.GLOBALEVENT_SET_SCROLL,
JSM.Overlay.GLOBALEVENT_GETCONTENT_ERROR,JSM.Overlay.EVENT_OVERLAY_OPEN,JSM.Overlay.EVENT_OVERLAY_CLOSE);this.fireEvent(JSM.Overlay.EVENT_OVERLAY_INIT,this);this.on("render",this.onRendered,this);if(this.registerToWinMgr)Chaos.WinMgr.register(this,"overlay",{hideAllOnBodyClick:this.hideOnBodyClick})},setHistoryConfig:function(){if(typeof this._historyConfig=="undefined"){this.defaultHistoryActions={component:this,open:{fn:Chaos.emptyFn,params:{}},close:{fn:Chaos.emptyFn,params:{}},change:{fn:Chaos.emptyFn,
params:{}}};this._historyConfig=Ext.applyIf(this.historyActions,this.defaultHistoryActions);var component=this._historyConfig.component;this.openHistoryId=this.name+"-"+JSM.Overlay.HISTORY_TYPE_OPEN;this.closeHistoryId=this.name+"-"+JSM.Overlay.HISTORY_TYPE_CLOSE;Chaos.History.registerComponent(component,{state:this.registerWithOpenState?this.openHistoryId:this.closeHistoryId,url:this.registerWithOpenState?document.location.href:this.previousUrl,params:this.registerWithOpenState?this._historyConfig.open.params:
this._historyConfig.close.params});Chaos.History.registerActions(this.closeHistoryId,this.openHistoryId,this._historyConfig.open.fn||component[this._historyConfig.open.fn],this._historyConfig.open.scope||component);Chaos.History.registerActions(this.openHistoryId,this.closeHistoryId,this._historyConfig.close.fn||component[this._historyConfig.close.fn],this._historyConfig.close.scope||component);if(typeof this._historyConfig.change!="undefined")Chaos.History.registerActions(this.openHistoryId,this.openHistoryId,
this._historyConfig.change.fn||component[this._historyConfig.change.fn],this._historyConfig.change.scope||component)}},show:function(duration,callback,scope){JSM.Overlay.superclass.show.call(this,duration||this.showDuration,callback,scope);this.overlayShow()},overlayShow:function(){Chaos.fireEvent(JSM.Overlay.EVENT_OVERLAY_OPEN,{scope:this,isModal:this.isModal});this._addHistoryEntry("open");this.element.dom.scrollTop=0},onRendered:function(){Chaos.fireEvent(JSM.Overlay.EVENT_CONTENT_RENDERED,this);
Chaos.fireEvent(JSM.Overlay.EVENT_OVERLAY_OPEN,{scope:this,isModal:this.isModal})},displayLoader:function(){this._showLoaderTimeOut=new Ext.util.DelayedTask(function(){Ext.DomHelper.append(this.element,{id:this.overlayLoaderId,html:Chaos.translate("Loading")});Ext.fly(this.overlayLoaderId).show(true)},this);this._showLoaderTimeOut.delay(this.showLoaderTimeoutDelay)},getContent:function(url,callback,callbackScope){if(!this.isVisible()&&this.autoLoad)this.show();if(this.getContentViaAjax){this._startAjaxTimeOut();
this.ajaxRequest(url,callback,callbackScope)}else if(this.autoLoad)this.displayContent()},ajaxRequest:function(url,callback,callbackScope){var getContentUrl=url;if(this._enableAjaxRequest==true&&JSM.Session.checkCookieChanges()){this._enableAjaxRequest=false;if(this.xdomain&&this.getContentUrl)try{this.getContentUrl=Chaos.Ajax.setXDomainUrl(this.getContentUrl,true)}catch(exception){throw new JSM.exception(exception,this.name,new Error);}if(this.xdomain&&getContentUrl)try{getContentUrl=Chaos.Ajax.setXDomainUrl(url,
true)}catch(exception){throw new JSM.exception(exception,this.name,new Error);}var scope=callbackScope||this||window;Chaos.Ajax.request({type:"json",method:"post",scope:this,url:getContentUrl||this.getContentUrl,xdomain:this.xdomain,params:this.getContentParams,success:function(response){this._enableAjaxRequest=true;this._successCallBack(response);if(callback)callback.call(scope,response)},error:this._manageAjaxError,failure:this._manageAjaxError})}},_successCallBack:function(response){var _data=
response.json.data;this._stopAjaxTimeOut();this._stopLoaderTimeout();if(_data)this._currentContent=_data.content;if(this._currentContent)if(this.autoLoad&&this.showContent)this.displayContent();else this.showContent=true;this.fireEvent(JSM.Overlay.EVENT_GETCONTENT_RESPONSE,response)},_stopLoaderTimeout:function(){if(this._showLoaderTimeOut){this._showLoaderTimeOut.cancel();this._showLoaderTimeOut=undefined}if(Ext.fly(this.overlayLoaderId))Ext.fly(this.overlayLoaderId).remove()},_manageAjaxError:function(error){if(this._errorRedirectUrl)try{location.href=
this._errorRedirectUrl}catch(exception){console.error("@JS-ERROR: Redirect failed",exception)}this._stopAjaxTimeOut();this._stopLoaderTimeout();this._displayError();this._enableAjaxRequest=true;this.showErrorHint(Chaos.translate("Connection error. Please try again later!"));this.fireEvent(JSM.Overlay.EVENT_GETCONTENT_ERROR,{scope:this,response:error})},showErrorHint:function(errorMsg){if(errorMsg){this._stopAjaxTimeOut();JSM.form.failureNotice.blackout="";JSM.form.failureNotice.show(errorMsg,function(){this.hide()},
this);this._requestFailureEl=Ext.get(this.requestFailureId)}},renderContent:function(htmlContent,data){if(typeof htmlContent=="string"){this.bodyTag=htmlContent;this.bodyData=data}if(this.animate)this.render();else Ext.DomHelper.append(this.element,this.bodyTag);this._stopLoaderTimeout();if(Ext.fly(this.overlayLoaderId))try{TweenMax.to(Ext.fly(this.overlayLoaderId).dom,this.hideDuration,{css:{display:"none",autoAlpha:0}})}catch(exception){console.error("@JS-ERROR: ",exception)}this._overlayBlockEl=
Ext.get(this.overlayBlockId);this.setPosition(this.left,this._selfTop);this.bindCloseButton();this._setOverlayBackground();this.fireEvent(JSM.Overlay.EVENT_CONTENT_RENDER,this)},displayContent:function(){this.animateContent(this._currentContent||this.windowTemplate)},_displayError:function(){this.renderContent(this.errorTemplate,{error_id:"overlay_error",error_message:Chaos.translate("Connection error. Please try again later!")});this.setPosition(this.left,this.top);this.disableScroll(true)},_startAjaxTimeOut:function(){if(!this._ajaxTimeoutInProgress){this._ajaxTimeoutInProgress=
true;if(!Ext.isIE7)this.displayLoader();this._ajaxTimeOut=new Ext.util.DelayedTask(function(){this._displayError()},this);this._ajaxTimeOut.delay(5E3)}},_stopAjaxTimeOut:function(){if(typeof this._ajaxTimeOut=="object"){this._ajaxTimeOut.cancel();this._ajaxTimeOut=undefined;this._ajaxTimeoutInProgress=false}},_addHistoryEntry:function(type){if(this.manageHistory&&this._enableHistoryEntry==true){this.setHistoryConfig();var params=this._historyConfig.open.params,stateParams={},param,url,component=this._historyConfig.component;
switch(type){case "open":if(this.keepOverlay)this.previousUrl=document.location.href;else this.previousUrl=this.getCurrentUrl();if(typeof this._historyConfig.open.url=="string")if(typeof component[this._historyConfig.open.url]=="function")url=component[this._historyConfig.open.url].call(component);else url=this._historyConfig.open.url;else if(typeof this._historyConfig.open.url=="undefined"||typeof this._historyConfig.open.url!="function");for(param in params)if(typeof params[param]=="string"&&typeof this._historyConfig.component[params[param]]==
"function")stateParams[param]=this._historyConfig.component[params[param]].call(this._historyConfig.component);else stateParams.params=params[param];stateParams.cmpName=this._historyConfig.component.name;stateParams.state=this.openHistoryId;stateParams.url=url;this.fireEvent(JSM.Overlay.EVENT_STATE_CHANGE,stateParams);return stateParams;break;case "close":default:if(this._isShown!==false){stateParams={};stateParams.cmpName=this._historyConfig.component.name;stateParams.state=this.closeHistoryId;stateParams.url=
this.previousUrl;this.fireEvent(JSM.Overlay.EVENT_STATE_CHANGE,stateParams);return stateParams}break}}this.enableHistoryEntry(true)},enableHistoryEntry:function(enable){this._enableHistoryEntry=enable},getCurrentUrl:function(){var loc=document.location,url=loc.protocol+"//"+loc.hostname+loc.pathname+loc.search||"";return url.toString()},animateContent:function(newContent,tplConfig){Chaos.fireEvent(JSM.Overlay.EVENT_OVERLAY_OPEN,{scope:this,isModal:this.isModal});this.element.setVisible(false);this.renderContent(newContent,
tplConfig);this._stopLoaderTimeout();TweenMax.to(this.element.dom,this.hideDuration,{css:{display:"block",autoAlpha:1},onCompleteScope:this,onComplete:function(){this._stopLoaderTimeout();this._contentDisplayed()}});this.disableScroll(true)},_setOverlayBackground:function(){this._overlayEl=Ext.DomHelper.insertFirst(this.element,{id:this.overlayBackgroundId},true);this.setOverlayWidth();this._overlayEl.on("click",this.onClosePopupClick,this)},_contentDisplayed:function(){this.fireEvent(JSM.Overlay.EVENT_CONTENT_DISPLAYED,
this)},onCloseButtonClick:function(ev){ev.preventDefault();this.hide()},hide:function(duration,callback,keepOverlay,scope,addCloseEntry){this.showContent=false;this.onOverlayClosed(addCloseEntry==undefined?true:false,keepOverlay);JSM.Overlay.superclass.hide.call(this,duration,function(){if(callback)callback.call(scope);if(!keepOverlay)this.disableScroll(false)},keepOverlay,scope);if(this._requestFailureEl){this._requestFailureEl.remove();delete this._requestFailureEl}},onOverlayClosed:function(addCloseEntry,
keepOverlay){Chaos.fireEvent(JSM.Overlay.EVENT_OVERLAY_CLOSE,{"isModal":this.isModal,"keepOverlay":keepOverlay},this);if(addCloseEntry==true)this._addHistoryEntry("close");Chaos.fireEvent(JSM.Overlay.EVENT_AFTER_OVERLAY_CLOSE,{element:this,autoDestroy:this.autoDestroy})},onBeforePopState:function(){this.enableHistoryEntry(false)},onPopState:function(){this.enableHistoryEntry(false)},disableScroll:function(disable){if(this.manageScroll){var overflow=Ext.getBody().getStyle("overflow"),isScrollDisabled=
!disable?overflow=="hidden":overflow!="hidden";if(this._isScrollDisabled!=disable&&isScrollDisabled){this._isScrollDisabled=disable;var scrollTop=document.documentElement.scrollTop;Ext.getBody().setStyle({overflow:disable?"hidden":""});this._containerEl.setWidth(disable?this._bodyWidth:"");this._headerContainerEl.setWidth(disable?this._bodyWidth:"");if(Ext.isIE7){document.getElementsByTagName("html")[0].style.overflow=disable?"auto":"";Ext.getBody().scrollTo("top",scrollTop)}}}},onWindowResize:function(){try{JSM.Overlay.superclass.onWindowResize.apply(this,
arguments)}catch(e){}},setOverlayWidth:function(){if(this._overlayEl)this._overlayEl.setWidth(this.element.hasScrollBar()?Ext.getBody().getWidth()-this.defaultBrowserScrollBarWidth:Ext.getBody().getWidth())},onOverlayResize:function(){if(this.setPositionOnResize)this.setPosition(this.left,this._selfTop);var isScrollDisabled=Ext.getBody().getStyle("overflow")=="hidden";this._bodyWidth=Ext.getBody().getWidth();this._containerEl.setWidth(isScrollDisabled?this._bodyWidth-this.defaultBrowserScrollBarWidth:
"");this._headerContainerEl.setWidth(isScrollDisabled?this._bodyWidth-this.defaultBrowserScrollBarWidth:"");this.setOverlayWidth();if(this._isShown)this._bodyWidth-=this.defaultBrowserScrollBarWidth},bindCloseButton:function(){this.closeButtonEl=this.element.select(this.closeButtonSel);if(this.closeButtonEl)this.closeButtonEl.on("click",this.onCloseButtonClick,this)},bind:function(){Ext.fly(window).on("resize",this.onWindowResize,this);Ext.fly(window).on("resize",this.onOverlayResize,this);JSM.Overlay.superclass.bind.call(this);
Chaos.History.on(Chaos.History.EVENT_BEFORE_POPSTATE,this.onBeforePopState,this);Chaos.History.on(Chaos.History.EVENT_POPSTATE,this.onPopState,this)},unbind:function(){if(!this.isConstant)JSM.Overlay.deleteCurrent(this);JSM.Overlay.superclass.unbind.call(this);Ext.fly(window).un("resize",this.onWindowResize,this);Ext.fly(window).un("resize",this.onOverlayResize,this);this.un("render",this.onRendered,this);this.un(Chaos.Window.EVENT_SHOW,this.onOverlayShow,this);if(this.closeButtonEl)this.closeButtonEl.un("click",
this.onCloseButtonClick,this);if(this._overlayEl)this._overlayEl.un("click",this.onClosePopupClick,this);Chaos.History.un(Chaos.History.EVENT_BEFORE_POPSTATE,this.onBeforePopState,this)}});Ext.namespace("JSM.window");JSM.window.SearchFilterWindow=function(el,config){JSM.window.SearchFilterWindow.superclass.constructor.call(this,el,config)};JSM.window.SearchFilterWindow.EVENT_FILTER_ITEMCLICK="filterItemClick";JSM.window.SearchFilterWindow.EVENT_RESET_FILTERSCLICK="resetFiltersClick";
JSM.window.SearchFilterWindow.EVENT_CLOSE_FILTERCLICK="closeFiltersClick";JSM.window.SearchFilterWindow.EVENT_HIDE="hide";JSM.window.SearchFilterWindow.GLOBALEVENT_SHOW="filterwindow-show";JSM.window.SearchFilterWindow.GLOBALEVENT_HIDE="filterwindow-hide";JSM.window.SearchFilterWindow.GLOBALEVENT_CLOSE="filterwindow-close";
Chaos.extend(JSM.window.SearchFilterWindow,Chaos.Window,{name:"SearchFilterWindow",filterButtonEl:undefined,filterItems:undefined,closeBtn:undefined,closeBtnId:"close_btn",filterSel:"filter_",filterClass:"filter_item",filterArrowSel:".arrow",filterArrowWidth:15,columnSel:".column",columnList:undefined,selectedClass:"selected",searchFormId:"search",searchFormEl:undefined,toggleEventHandlersOnDisplay:true,align:"center",clearFilterButtonId:"filter_reset",hideDuration:0.01,init:function(el,config){this.addEvents(JSM.window.SearchFilterWindow.EVENT_FILTER_ITEMCLICK,
JSM.window.SearchFilterWindow.EVENT_RESET_FILTERSCLICK,JSM.window.SearchFilterWindow.EVENT_CLOSE_FILTERCLICK,JSM.window.SearchFilterWindow.EVENT_HIDE);Chaos.addEvents(JSM.window.SearchFilterWindow.GLOBALEVENT_SHOW,JSM.window.SearchFilterWindow.GLOBALEVENT_HIDE,JSM.window.SearchFilterWindow.GLOBALEVENT_CLOSE);this.filterItems=Ext.get(this.filterContId).select("."+this.filterClass);this.closeBtn=Ext.get(this.closeBtnId);this.searchFormEl=Ext.get(this.searchFormId);this.clearFilterButtonEl=Ext.get(this.clearFilterButtonId);
this.columnList=this.element.select(this.columnSel);this.arrowEl=this.element.child(this.filterArrowSel);JSM.window.SearchFilterWindow.superclass.init.call(this,el,config)},show:function(){JSM.window.SearchFilterWindow.superclass.show.call(this);this.element.setStyle({"visibility":"hidden"});var blockWidth=0,leftPos=0,columnCount=this.columnList.getCount();if(columnCount>0)while(blockWidth==0)for(var i=0;i<this.columnList.getCount();i++)blockWidth+=this.columnList.item(i).dom.offsetWidth;blockWidth=
blockWidth>this.element.dom.offsetWidth?blockWidth:this.element.dom.offsetWidth;if(this.align!="left")leftPos=Math.round((this.searchFormEl.getWidth()*2-this.filterButtonEl.getWidth()-blockWidth)/2);else leftPos=0;this.element.setStyle({"width":blockWidth+10+"px","left":leftPos+"px","visibility":"visible"});Chaos.fireEvent(JSM.window.SearchFilterWindow.GLOBALEVENT_SHOW,this)},hidePanel:function(){this.hide();Ext.fly("header").select("."+this.selectedClass).removeClass(this.selectedClass)},hide:function(){if(this.isVisible()){JSM.window.SearchFilterWindow.superclass.hide.apply(this,
arguments);application.layout.filterBtn.setState(JSM.component.Button.STATE_OFF);this.fireEvent(JSM.window.SearchFilterWindow.EVENT_HIDE,this);Chaos.fireEvent(JSM.window.SearchFilterWindow.GLOBALEVENT_HIDE,this)}},refreshFilterSelection:function(selectedFilterArray){this.filterItems.removeClass(this.selectedClass);var filterItem;if(selectedFilterArray.length)for(var i=0;i<selectedFilterArray.length;i++){filterItem=this.filterSel+selectedFilterArray[i];if(Ext.fly(filterItem))Ext.fly(filterItem).addClass(this.selectedClass)}},
onFilterItemClick:function(ev,target){ev.preventDefault();ev.stopPropagation();this.fireEvent(JSM.window.SearchFilterWindow.EVENT_FILTER_ITEMCLICK,ev,target)},onResetFiltersClick:function(ev,target){ev.preventDefault();ev.stopPropagation();this.fireEvent(JSM.window.SearchFilterWindow.EVENT_RESET_FILTERSCLICK,ev,target)},onCloseBtnClick:function(ev,target){ev.preventDefault();ev.stopPropagation();this.fireEvent(JSM.window.SearchFilterWindow.EVENT_CLOSE_FILTERCLICK,ev,target);Chaos.fireEvent(JSM.window.SearchFilterWindow.GLOBALEVENT_CLOSE,
ev,target)},onEscKeypress:function(ev,target){Chaos.fireEvent(JSM.window.SearchFilterWindow.GLOBALEVENT_CLOSE,{ev:ev,target:target});JSM.window.SearchFilterWindow.superclass.onEscKeypress.apply(this,arguments)},bind:function(){JSM.window.SearchFilterWindow.superclass.bind.call(this);this.filterItems.on("click",this.onFilterItemClick,this);this.closeBtn.on("click",this.onCloseBtnClick,this);if(this.clearFilterButtonEl)this.clearFilterButtonEl.on("click",this.onResetFiltersClick,this)},unbind:function(){JSM.window.SearchFilterWindow.superclass.unbind.call(this);
this.filterItems.un("click",this.onFilterItemClick,this);this.closeBtn.un("click",this.onCloseBtnClick,this);if(this.clearFilterButtonEl)this.clearFilterButtonEl.un("click",this.onResetFiltersClick,this)}});Ext.namespace("JSM.window");JSM.window.Tooltip=function(el,config){JSM.window.Tooltip.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.window.Tooltip,Chaos.Window,{name:"Tooltip",isModal:false,bodyTag:"<div class='tooltip'>{text}</div>",bodyWrap:"",bodyData:{text:""},headTag:undefined,footTag:undefined,mustRender:true,toggleEventHandlersOnDisplay:true,init:function(el,config){JSM.window.Tooltip.superclass.init.call(this,el,config)},bind:function(){JSM.window.Tooltip.superclass.bind.call(this)},unbind:function(){JSM.window.Tooltip.superclass.unbind.call(this)}});Ext.namespace("JSM.controller");
JSM.controller.AutoSuggestController=function(el,config){JSM.controller.AutoSuggestController.superclass.constructor.call(this,el,config)};JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_NAME="name";JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_TAG="tag";
Chaos.extend(JSM.controller.AutoSuggestController,Chaos.Controller,{name:"AutoSuggestController",confirmBlockId:"confirm_block",autoSuggestBlockId:"auto_suggest",defaultConfirmWindowTop:5,autoSuggestLiSel:".auto_suggest li.name > a",categories:{"girl":"girl","girls":"girl","hot_flirt":"hot flirt","lesbian":"lesbian","mature":"mature","fetish":"fetish","couple":"couple","boy":"boy","boys":"boy","gay":"gay","transgender":"transgender","tranny":"tranny","soul_mate":"soul mate"},_confirmWindowEl:undefined,
_autoSuggestItemType:undefined,_referenceModelEl:undefined,_preSearchResponse:undefined,_siteCategory:undefined,_isAutoSuggestEnabled:true,_autoSuggestPlugin:undefined,_isConfirmed:false,init:function(el,config){JSM.controller.AutoSuggestController.superclass.init.call(this,el,config);this._siteCategory=Chaos.Config.get("superCategory");this._isAutoSuggestEnabled=!JSM.Util.isCurrentPage("chat.performer");this._autoSuggestPlugin=this.SearchField.plugins.AutoSuggest},onAutoSuggestShow:function(){this._autoSuggestPlugin.isRemoveEnabled=
true},onAutoSuggestEscPress:function(){if(this._confirmWindowEl&&this._confirmWindowEl.isVisible())this._confirmWindowEl.hideConfirmWindow();else{this._autoSuggestPlugin.setCloseOnEsc(true);this._autoSuggestPlugin.isRemoveEnabled=true}},onAutoSuggestDeleteButtonClick:function(){this.hideAutoSuggest()},onAutoSuggestNameSelection:function(ev){if(this._isAutoSuggestEnabled){this._autoSuggestItemType=JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_NAME;var loadDataObject=Ext.decode(ev.data);
var modelCategory=loadDataObject.superCategory;this._referenceModelEl=ev;this.setConfirmationWindow(modelCategory,this._referenceModelEl)}},onAutoSuggestPresearchSuccess:function(ev){if(this._isAutoSuggestEnabled){this._autoSuggestItemType=JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_TAG;var tagCategory=ev.response.data.redirectCategory;this._preSearchResponse=ev;if(Ext.get(this.autoSuggestBlockId)){if(!this._isConfirmed)this.setConfirmationWindow(tagCategory,this._preSearchResponse)}else try{JSM.Util.setCursor("wait");
location.href=ev.response.data.redirectUrl}catch(exception){console.error("@JS-ERROR: ",exception)}}else if(ev&&ev.response.data.redirectUrl)this._redirect(ev.response.data.redirectUrl)},setConfirmationWindow:function(category,response){var categoryText=this.categories[category],confirmMessage;this._confirmBlockEl=Ext.get(this.confirmBlockId);if(this._autoSuggestItemType==JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_NAME)confirmMessage=Chaos.translate("This is a {category} model.",{category:Chaos.translate(categoryText)});
else confirmMessage=Chaos.translate("This search results in {category} models.",{category:Chaos.translate(categoryText)});if(this._siteCategory==category){this._confirm();if(this._confirmWindowEl)this._confirmWindowEl.hideConfirmWindow()}else{this._autoSuggestPlugin.isRemoveEnabled=false;if(this._confirmWindowEl&&this._confirmWindowEl.getConfirmWindow()==null){this._confirmWindowEl.un(JSM.window.Confirmation.EVENT_CONFIRM,this.onConfirmationConfirm,this);this._confirmWindowEl.un(JSM.window.Confirmation.EVENT_CANCEL,
this.onConfirmationCancel,this);this._confirmWindowEl.unbind();delete this._confirmWindowEl;this._isConfirmed=false}if(!(this._confirmWindowEl instanceof JSM.window.Confirmation)){this._confirmWindowEl=new JSM.window.Confirmation(this.autoSuggestBlockId,{duration:1,isModal:false,alignment:"left",arrowTop:16,tplConfig:{message:confirmMessage,confirmButtonText:Chaos.translate("Continue"),cancelButtonText:Chaos.translate("Cancel")}});this._confirmWindowEl.on(JSM.window.Confirmation.EVENT_CONFIRM,this.onConfirmationConfirm,
this);this._confirmWindowEl.on(JSM.window.Confirmation.EVENT_CANCEL,this.onConfirmationCancel,this)}else this._confirmWindowEl.setTextField(confirmMessage);this._autoSuggestPlugin.setCloseOnEsc(false);this._autoSuggestPlugin.isRemoveEnabled=false;this._isConfirmed=false;var _top=response.link?response.link.dom.offsetTop:this.defaultConfirmWindowTop,_left=this._confirmWindowEl.element.getWidth();if(Ext.isIE7){var _topPos=Ext.fly(response.link).parent("li").dom.offsetTop;this._confirmWindowEl.setPosition("absolute",
_topPos,_left)}else this._confirmWindowEl.setPosition("absolute",_top,_left);this._confirmWindowEl.showConfirmWindow();this._confirmWindowEl.getConfirmButton().focus()}},onConfirmationConfirm:function(){this._confirm()},_confirm:function(){this._isConfirmed=true;if(this._autoSuggestItemType==JSM.controller.AutoSuggestController.AUTOSUGGEST_ITEM_TYPE_NAME)if(JSM.Util.isCurrentPage("index.index")){this.BasicController.freeChatWindow.onCallShowChat(this._referenceModelEl.modelName,this._referenceModelEl.status,
this._referenceModelEl.link,this._referenceModelEl.data);this._autoSuggestPlugin.onDeleteAutoSuggestList()}else this._redirect(this._referenceModelEl.link.dom.href);else try{this._redirect(this._preSearchResponse.response.data.redirectUrl)}catch(e){console.error(e)}},_redirect:function(url){try{document.location.href=url}catch(e){console.error(e)}},onConfirmationCancel:function(){this.SearchField.element.focus();this._autoSuggestPlugin.lastSentValue=undefined;this._autoSuggestPlugin.isRemoveEnabled=
true;this._isConfirmed=false},onWindowShow:function(){this.hideAutoSuggest()},onSlidePanelOpen:function(){this.hideAutoSuggest()},hideAutoSuggest:function(){if(this._confirmWindowEl&&this._confirmWindowEl.isVisible())this._confirmWindowEl.hideConfirmWindow();this._autoSuggestPlugin.isRemoveEnabled=true;this._autoSuggestPlugin.removeSuggestions();this._isConfirmed=false}});Ext.namespace("JSM.controller");
JSM.controller.BasicController=function(el,config){JSM.controller.BasicController.superclass.constructor.call(this,el,config)};JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN="logged-in";JSM.controller.BasicController.GLOBALEVENT_AFTER_SIGNUP_SUCCESS="after-signup-success";JSM.controller.BasicController.GLOBALEVENT_APPLICATION_ERROR="app-error";
Chaos.extend(JSM.controller.BasicController,Chaos.Controller,{name:"BasicController",searchFormId:"search",counterContId:"counter_container",getContentRoute:"Overlay/GetSignUpBlock",favoriteContainerId:"favorite_container",overlayContainerId:"overlay_container",overlayId:"overlay",headerId:"header",overlaidHeaderClass:"overlaid",refreshWindow:undefined,isOverlayChatOpened:false,memberAppletId:"chatapplet",memberAppletEl:undefined,slideBtnContainerId:"left_side_btn_container",questionnaireButtonId:"questionnaire_btn",
questionnaireButtonText:Chaos.translate("Questionnaire"),chatCounter:1,questionnaireCookieName:"question",questionCookieExpiration:"31556926",msgMenuId:"menu_messages",msgTitleCls:".title",msgNewCls:"new_messages",freeCreditsQuerySel:"freeCredits",freePeeksQuerySel:"freePeeks",extraMenuId:"extras_submenu",peekCountId:"peek_count",privateTeaserTextId:"private_teaser_infotext",_headerEl:undefined,_isBackConnReady:false,_extraMenuEl:undefined,_peekCountEl:undefined,_privateTeaserTextEl:undefined,init:function(el,
config){JSM.controller.BasicController.superclass.init.call(this,el,config);Chaos.addEvents(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,JSM.controller.BasicController.GLOBALEVENT_APPLICATION_ERROR,JSM.controller.BasicController.GLOBALEVENT_AFTER_SIGNUP_SUCCESS);Chaos.Broadcaster.on(JSM.layout.Basic.GLOBALEVENT_BACKCONN_READY,this.onBackConnReady,this);this._headerEl=Ext.get(this.headerId);this.sessionExpiredText=Chaos.translate("Session Expired");this.sessionExpiredMsgText=Chaos.translate("Your session has expired, please refresh the page!");
this._extraMenuEl=Ext.get(this.extraMenuId);this._peekCountEl=Ext.get(this.peekCountId);this._privateTeaserTextEl=Ext.get(this.privateTeaserTextId);this.bodyId=Ext.getBody().id;if(Chaos.Config.get("isShowQuestionnaire")==1)this.setQuestionCookie();this.setBonusPopupController()},setBonusPopupController:function(){if(!(this._BonusPopupController instanceof JSM.controller.BonusPopupController))this._BonusPopupController=new JSM.controller.BonusPopupController({init:function(){},items:{"IndexBroadcaster":{component:Chaos.Broadcaster,
listeners:{"log-in":"onLogIn","window-hide":"onWindowHide","private-teaser-left":"onPrivateTeaserLeft","close-chat":"onCloseChat"}}}})},onApplicationError:function(ev){Chaos.fireEvent(JSM.controller.BasicController.GLOBALEVENT_APPLICATION_ERROR,{options:{errorLog:{details:{VARS:ev},level:JSM.component.ErrorLogHelper_LEVEL_ERROR,name:"Application",headerMessage:ev.errorMsg}}})},onBackConnReady:function(){if(!this._isBackConnReady){this._isBackConnReady=true;this.registerOnLoadActions()}},registerOnLoadActions:function(){JSM.component.UrlAction.registerAction({name:"login",
fn:this.onOpenOverlayLogin,scope:this});JSM.component.UrlAction.registerAction({name:"signup",fn:this.onOpenOverlaySignup,scope:this})},openOverlayLoginFromHistory:function(ev){this.openOverlayLogin(ev,false)},onOpenOverlayLogin:function(ev){this.openOverlayLogin(ev,ev.manageHistory||true)},openOverlayLogin:function(ev,manageHistory){if(!JSM.Util.isAuthPage()&&application.isLoggedIn()==false)this.loginOverlayWindow=new JSM.overlay.Login(this.overlayContainerId,{overlay:this.overlayId,xdomain:true,
manageHistory:manageHistory,historyActions:{open:{fn:"openOverlayLoginFromHistory",url:"#login",scope:this,params:{}},close:{fn:"closeOverlayWindow",scope:this,params:"loginOverlayWindow"}}})},closeOverlayWindow:function(ev){var overlayWindow=ev.params;if(this[overlayWindow]){this[overlayWindow].hide();delete this[overlayWindow]}},openOverlaySignupFromHistory:function(ev){this.openOverlaySignup(ev,false)},onOpenOverlaySignup:function(ev){this.openOverlaySignup(ev,ev.manageHistory||true,ev.urlGetParams)},
openOverlaySignup:function(ev,manageHistory,urlGetParams){var queryParam=this.freePeeksQuerySel;if(urlGetParams===this.freePeeksQuerySel||urlGetParams===this.freeCreditsQuerySel)var queryParam=urlGetParams===this.freePeeksQuerySel?this.freePeeksQuerySel:this.freeCreditsQuerySel;if(!JSM.Util.isAuthPage()&&application.isLoggedIn()==false)this.signupOverlayWindow=new JSM.overlay.SignUp(this.overlayContainerId,{getContentUrl:Chaos.getUrl(this.getContentRoute,{},{utm_content:queryParam},""),overlay:this.overlayId,
xdomain:true,manageHistory:manageHistory,historyActions:{open:{fn:"openOverlaySignupFromHistory",url:"#signup",scope:this,params:{}},close:{fn:"closeOverlayWindow",scope:this,params:"signupOverlayWindow"}}})},onBackConnRequest:function(ev){Chaos.Ajax.onBackConnRequest(ev)},onBackConnRequestComplete:function(ev){Chaos.Ajax.onBackConnRequestComplete(ev)},onBackConnRequestError:function(ev){Chaos.Ajax.onBackConnRequestError(ev)},onSessionExpired:function(){var bodyId=Ext.getBody().id;if(bodyId!="signup.signupmember"&&
bodyId!="auth.loginmember"&&!this.isOverlayChatOpened)if(this.refreshWindow==undefined)this.refreshWindow=new JSM.overlay.RefreshWindow(this.overlayContainerId,{overlay:this.overlayId,title:this.sessionExpiredText,message:this.sessionExpiredMsgText})},onOverlayOpen:function(isModal){switch(this.bodyId){case "index.index":break;case "chat.performer":if(this._headerEl)this._headerEl.addClass(this.overlaidHeaderClass);break;default:break}},onOverlayClose:function(data){switch(this.bodyId){case "chat.performer":if(typeof window.freeChatWindow!=
"undefined"&&data.keepOverlay!=true){window.freeChatWindow.isMinimized=false;window.freeChatWindow.resizeFlashApplet()}if(this._headerEl&&this._headerEl.hasClass(this.overlaidHeaderClass))this._headerEl.removeClass(this.overlaidHeaderClass);break;default:break}},onAfterOverlayClose:function(config){if(typeof config=="object"&&config.autoDestroy==true)for(var i in this)if(this.hasOwnProperty(i)&&this[i]!=null&&this[i].name==config.element.name){delete this[i];break}},setQuestionCookie:function(){if(!Chaos.Cookie.get(this.questionnaireCookieName)&&
application.isLoggedIn())Chaos.Cookie.set(this.questionnaireCookieName,this.chatCounter,this.questionCookieExpiration,"/");if(Chaos.Cookie.get(this.questionnaireCookieName)>=3&&application.isLoggedIn())this.createQuestionnaire();else if(Chaos.Cookie.get(this.questionnaireCookieName)>="waiting")this.createQuestionnaire()},onLogIn:function(response){if(JSM.Util.isCurrentPage("staticpage.contactus"))window.location.reload();else{var _response={};_response["jsm2sessionId"]=response.json.data.jsm2sessionid;
_response["form_token"]=response.json["form_token"];_response["data"]=response.json.data;_response["command"]=response.json.command;_response["nick"]=response.json.nick;_response["errors"]=response.json.errors;this._manageLogin(_response)}},appletLogin:function(response){var _response={};_response["jsm2sessionId"]=response.jsm2sessionId;_response["performerId"]=response.performerId;_response["form_token"]=response["form_token"];_response["isAppletLogin"]=true;this._manageLogin(_response)},_manageLogin:function(response){this.refreshURLs();
this.refreshHeader(response);Chaos.fireEvent(JSM.controller.BasicController.GLOBALEVENT_LOGGED_IN,{scope:this,response:response})},onSignupSuccess:function(response){this.refreshAppletSession(response.json.data);this.refreshURLs();this.refreshHeader(response);Chaos.fireEvent(JSM.controller.BasicController.GLOBALEVENT_AFTER_SIGNUP_SUCCESS,{response:response})},refreshHeader:function(response){if(typeof this.Header=="object")this.Header.refreshHeader(response)},refreshAppletSession:function(data){this.memberAppletEl=
Chaos.getFlashMovieObject(this.memberAppletId);if(Chaos.Cookie.isCookieEnabled()===false)JSM.Util.setSessionIdOnLinks(Ext.getBody(),data.jsm2sessionid);if((this.memberAppletEl!=null||this.memberAppletEl!=undefined)&&typeof this.memberAppletEl.setSessionId=="function")if(data!=undefined&&(data.jsm1sessionid!=undefined||data.sessionid!=undefined)&&(data.jsm2sessionid!=undefined||data.jsm2session!=undefined))this.memberAppletEl.setSessionId({sessionid:data.jsm1sessionid||data.sessionid,jsm2sessionid:data.jsm2sessionid||
data.jsm2session});else if(Chaos.Cookie.get("forceConsole"))console.warn("Login error: No sessionID given. ",data)},refreshURLs:function(){Ext.fly(this.searchFormId).set({action:Chaos.getUrl("Index/SearchRedirect",{},{},"","")})},onTopmemberLogin:function(){application.layout.isTopmember=true},onMemberAppletEmbed:function(){this.createFreeChat()},onMemberAppletReady:function(){if(JSM.Util.isCurrentPage("chat.performer"))this.loadCounterImages()},createFreeChat:function(){var freeChatConstructor=Chaos.Config.get("isWideAppletEnabled")?
JSM.overlay.FreeChat2:JSM.overlay.FreeChat;if(!(this.freeChatWindow instanceof freeChatConstructor)){if(!Ext.get("freechat"))Ext.getBody().createChild({tag:"div",id:"freechat"});this.freeChatWindow=new freeChatConstructor("freechat",{overlay:"overlay",overlayTopPosition:0,isModal:true,showMode:JSM.Util.isCurrentPage("chat.performer")&&Ext.isIE7?"relative":"fixed",minTop:40,hideDuration:0,isConstant:true,autoLoad:false,mustGetContent:false,autoDestroy:false,autoDestroyElement:false,mustRender:false,
isScrollingDisabled:true,manageHistory:true,toggleEventHandlersOnDisplay:true,historyActions:{open:{fn:"onCallShowChatFromHistory",url:"setUrl",params:{name:"getNameForHistory"}},close:{fn:"closeChat"},change:{fn:"setNextModel",url:"setUrl",params:{name:"getNameForHistory"}}},plugins:{"BackConn-plugin":{globalObjectId:"freeChatWindow",globalMethods:["setResizeParams","onPrivateClick","onPrivateEndClick","onClosePopup","getNextModel","loadFlashAndPlay","getFlashVarsForNextPerformer","setBackspaceTrap",
"resizeFlashApplet","privateTeaserLeft","getMaxAppletSize"]}}})}return this.freeChatWindow},onOpenOverlayChat:function(data,status,link){this.openOverlayChat(data,status,link)},openOverlayChat:function(data,status,link){if(typeof data=="string")if(this.freeChatWindow instanceof JSM.overlay.FreeChat)this.freeChatWindow.onCallShowChat(data,status,link);else this.onOpenOverlayChat(data,status,link);else if(Chaos.isObject(data))this.freeChatWindow.onCallShowChat(data.modelName||data.name,data.status,
data.link);else;},onOverlayChatOpened:function(){this.isOverlayChatOpened=true;if(Chaos.Cookie.get(this.questionnaireCookieName)&&application.isLoggedIn()&&Chaos.Config.get("isShowQuestionnaire")==1)if(Chaos.Cookie.get(this.questionnaireCookieName)>=3)this.createQuestionnaire();else if(Chaos.Cookie.get(this.questionnaireCookieName)!="waiting"){this.chatCounter++;Chaos.Cookie.set(this.questionnaireCookieName,this.chatCounter,this.questionCookieExpiration,"/")}},onOverlayChatClosed:function(){this.isOverlayChatOpened=
false},onPrivateStart:function(data,status,link){if(JSM.Util.isCurrentPage("chat.performer")){this.items.Header.component.setHeaderInactive();this.items.Footer.component.setFooterInactive()}},onPrivateEnd:function(data,status,link){if(JSM.Util.isCurrentPage("chat.performer")){this.items.Header.component.setHeaderActive();this.items.Footer.component.setFooterActive()}},createQuestionnaire:function(){if(Chaos.Config.get("isShowQuestionnaire")&&application.isLoggedIn()&&!JSM.Util.isCurrentPage("chat.performer"))if(!(this.slideBtnQuestionnaire instanceof
JSM.component.SlideButton)){var slideBtnQuestionnaireTpl=new Ext.Template('<a id="'+this.questionnaireButtonId+'" class="left_side_btn">'+'<span class="title">'+this.questionnaireButtonText+"</span>"+'<span class="icon">&nbsp;</span>'+"</a>");slideBtnQuestionnaireTpl.append(this.slideBtnContainerId,slideBtnQuestionnaireTpl);if(Ext.fly(this.slideBtnContainerId).select("a").getCount()==2)Ext.fly(this.questionnaireButtonId).setTop(33);this.slideBtnQuestionnaire=new JSM.component.SlideButton(this.questionnaireButtonId,
{slideButtonIconCls:"icon"});this.slideBtnQuestionnaire.on(JSM.component.SlideButton.BUTTON_CLICKED,this.setQuestionnaire,this)}},setQuestionnaire:function(){if(application.isLoggedIn()){if(this.questionnaire instanceof JSM.overlay.Questionnaire){this.questionnaire.unbind();delete this.questionnaire}this.questionnaire=new JSM.overlay.Questionnaire("overlay_container",{overlay:"overlay",getContentUrl:Chaos.getUrl("Question/GetQuestionBlock",{},{},""),questionContainerId:"questions_container",questionBlockId:"questions_list",
textMessageBlockId:"suggestion_container",answerBlockId:"rating_list",slideDuration:0.5,hasForm:true,formId:undefined,sendSelectedAnswersRoute:"Question/SetQuestion",textMessageAjaxUrlRoute:"Question/SetQuestion",sendAfter:3,isCharCounterNeeded:true,maxCharLimitNumber:4E3,textAnswerFieldId:undefined,charInfoId:"max_char_limit_info",counterId:"suggestion_char_number",inputId:"text_answer",suggestionErrorId:"suggestion_error",suggestionErrorMessageClass:"error_text"});this.addComponent({component:this.questionnaire,
listeners:{"questionnaire-complete":"onQuestionnaireComplete","send-selection-success":"onQuestionnaireSuccess"}},"Questionnaire");if(Chaos.Cookie.get(this.questionnaireCookieName)=="waiting")this.questionnaire.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onShowQuestionnaireSuggestionBlock,this)}},onShowQuestionnaireSuggestionBlock:function(){this.questionnaire._questionContainerEl.setStyle("display","none");this.questionnaire._textMessageBlockEl.setStyle("display","block")},onQuestionnaireSuccess:function(response){if(response.json.success)Chaos.Cookie.set(this.questionnaireCookieName,
"waiting",this.questionCookieExpiration,"/")},onQuestionnaireComplete:function(){if(Ext.fly(this.questionnaireButtonId))Ext.fly(this.questionnaireButtonId).remove();Chaos.Cookie.remove(this.questionnaireCookieName,"/")},onHeaderRefresh:function(response){if(response){if(response.showQuestionnaire){Chaos.Config.set("isShowQuestionnaire","1");this.setQuestionCookie()}this.refreshAppletSession(response)}},onMetroView:function(){Ext.get(this.overlayId).addClass("black");Ext.getBody().setStyle("overflow",
"hidden");this.metroViewWarning=new JSM.Overlay(this.overlayContainerId,{windowTemplate:'<div id="metro_block">'+'<div id="metro_box">'+"<h2>Continue enjoying LiveJasmin!</h2>"+'<p>For a better experience <span>switch to desktop</span> version.<br /> Click on the <span class="wrench_icon"></span> icon to activate.</p>'+"</div>"+'<div id="metro_arrow"></div>'+"</div>",overlay:this.overlayId,exitOnEsc:false,exitOnOverlayClick:false,getContentViaAjax:false})},onAppletShow:function(ev){var headerComponent=
this.items.Header.component;if(headerComponent&&headerComponent._headerMenuPlugin)headerComponent._headerMenuPlugin.refreshDropDownStates()},onFilterWindowShow:function(ev){},onFilterWindowHide:function(ev){},onDropDownSlideItemClick:function(ev){if(ev.item.className.match("language_change")&&ev.item.rel){Chaos.Cookie.set(Chaos.Config.get("langJasmin1Cookie"),ev.item.rel,2592E3,"/",Chaos.Config.get("cookiedomain"));Chaos.Cookie.set(Chaos.Config.get("langJasmin2Cookie"),ev.item.rel,2592E3,"/",Chaos.Config.get("cookiedomain"));
Chaos.I18n.getInstance().setLanguage(ev.item.rel);if(!JSM.Util.isCurrentPage("chat.performer")){Chaos.Storage.set("isShowProfileMenu",true);Chaos.Storage.set("isShowGeneralMenu",true)}window.location.reload()}},onSetScroll:function(ev){if(!JSM.Util.isCurrentPage("index.index"))this._disableScroll(ev)},_disableScroll:function(ev){JSM.Util.disableScroll(ev.disable)},setFreeChatScroll:function(ev){if(window.freeChatWindow&&typeof window.freeChatWindow.setScroll=="function")window.freeChatWindow.setFreeChatScroll(ev)},
onMessagesBackLinkClick:function(ev){var component=ev.scope,headerController=application.layout.header;if(typeof component=="object")component.hide(0,function(){headerController.openOverlayMessages(false)},true,this,false)},onHeaderDropDownStates:function(states){if(states)if(states.profilname&&states.profilname=="opened")Chaos.Ajax.request({url:JSM.Util.isSecurePage()?Chaos.getUrl("Auth/GetDropdownMenuData",{},{},""):Chaos.getUrl("ListPageAjax/GetDropdownMenuData",{},{},""),type:"json",method:"get",
scope:this,success:function(response){this.refreshNewMessagesCount(response.json.data.unseenMessagesCount);this.refreshFreePeeksCount(response.json.data.availabeFreePeeks)},error:function(e){console.error(e)}})},refreshNewMessagesCount:function(unseenMessagesCount){var newMsgText="",menuItemEl=Ext.get(this.msgMenuId),itemTextEl=menuItemEl.select(this.msgTitleCls).item(0);if(unseenMessagesCount===0){menuItemEl.removeClass(this.msgNewCls);newMsgText=Chaos.translate("Messages")}else if(unseenMessagesCount==
1){menuItemEl.addClass(this.msgNewCls);newMsgText=unseenMessagesCount+" "+Chaos.translate("New message")}else{menuItemEl.addClass(this.msgNewCls);newMsgText=unseenMessagesCount+" "+Chaos.translate("New messages")}itemTextEl.dom.innerHTML=newMsgText},refreshFreePeeksCount:function(freePeeksCount){if(this._privateTeaserTextEl&&this._extraMenuEl)if(freePeeksCount==0){this._privateTeaserTextEl.replaceClass("show","hide");this._extraMenuEl.addClass("small")}else{this._extraMenuEl.removeClass("small");
this._peekCountEl.dom.innerHTML=freePeeksCount}},onAllStaticLoaded:function(){this.loadCounterImages()},loadCounterImages:function(){var counterCont=Ext.get(this.counterContId),counterImages=null;if(counterCont){counterCont.dom.innerHTML=Chaos.Config.get("counterImages");counterImages=counterCont.select("img");if(counterImages.getCount()>0)counterImages.each(function(){var img=this.dom;img.src=this.dom.src;img.alt=this.dom.alt;img.onload=function(){this.alt="counter"}})}},onSelectListOpen:function(){Chaos.WinMgr.hideGroup(JSM.component.Header.WINMGR_GROUP_ID)},
onToggleBoxOpen:function(){Chaos.WinMgr.hideGroup(JSM.component.Header.WINMGR_GROUP_ID)},onAccordionOpen:function(){Chaos.WinMgr.hideGroup(JSM.component.Header.WINMGR_GROUP_ID)},onWindowHide:function(ev){},onThumbnailClick:function(ev){var data=JSM.controller.ListPageController.prototype.getModelDataFromTarget(ev.target);this.openOverlayChat(data)}});Ext.namespace("JSM.controller");
JSM.controller.BonusPopupController=function(el,config){JSM.controller.BonusPopupController.superclass.constructor.call(this,el,config)};JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_CREDIT="freeCredits";JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_PEEKS_RECEIVED="freePeeksRfreeCreditseceived";JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_PEEKS_LEFT="freePeeksLeft";JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_PEEKS_OUT_OF="outOfFreePeeks";
Chaos.extend(JSM.controller.BonusPopupController,Chaos.Controller,{name:"BonusPopupController",overlayContainerId:"overlay_container",overlayId:"overlay",privateTeaserTextId:"private_teaser_infotext",showBonusCreditRecommenderCookie:"showBonusCreditRecommender",_popup:undefined,_outOfFreePeeks:undefined,_delayedCloseTask:undefined,_delayedCloseTaskTime:1E4,_privateTeasertextEl:undefined,_loginResponse:undefined,init:function(el,config){JSM.controller.BonusPopupController.superclass.init.call(this,
el,config);this._popup=undefined;this._privateTeasertextEl=Ext.get(this.privateTeaserTextId)},instantiateOverlay:function(template){this._popup=new JSM.overlay.BonusCreditLogin(this.overlayContainerId,{overlay:this.overlayId,blockType:template})},onLogIn:function(response){this._freePeeksAvailable=response.json.freePeeksAvailable;this._loginResponse=response},onFreePeeksPopupHide:function(){this.redirectToPrivateSearchPage()},redirectToPrivateSearchPage:function(){window.location.href=Chaos.getUrl("Index/Search",
{category:Chaos.Config.get("superCategory"),searchText:Chaos.translate("private").toLowerCase()},{})},_selectBonusPopup:function(){var _freePeeksAvailable;if(this._loginResponse)_freePeeksAvailable=this._loginResponse.json.freePeeksAvailable;if(this._loginResponse){if(_freePeeksAvailable!=undefined&&_freePeeksAvailable>0&&JSM.Util.UrlHelper.getMemberType()!="member")this.instantiateOverlay(JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_PEEKS_LEFT);else if((_freePeeksAvailable==undefined||_freePeeksAvailable==
0)&&JSM.Util.UrlHelper.getMemberType()!="member")this.instantiateOverlay(JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_CREDIT);else if(JSM.Util.isCurrentPage("awards.index"))location.href="?startIndex="+Chaos.Cookie.get("awardsActualSlide");this._loginResponse=undefined}},onWindowHide:function(ev){if(ev.window&&ev.window.name==="Login")this._selectBonusPopup()},onCloseChat:function(ev){if(this._outOfFreePeeks){this.instantiateOverlay(JSM.controller.BonusPopupController.BLOCK_TYPE_FREE_PEEKS_OUT_OF);
this._outOfFreePeeks=false}},onPrivateTeaserLeft:function(privateTeaserLeft){if(privateTeaserLeft.privateTeaserLeft==0)this._outOfFreePeeks=true}});Ext.namespace("JSM.controller.CarouselGalleryController");JSM.controller.CarouselGalleryController=function(el,config){JSM.controller.CarouselGalleryController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.CarouselGalleryController,Chaos.Controller,{name:"CarouselGalleryController",init:function(el,config){JSM.controller.CarouselGalleryController.superclass.init.call(this,el,config)},onCarouselNextClick:function(ev,el){},onCarouselActiveThumbMouseLeave:function(ev,el){},onCarouselPrevClick:function(ev,el){},bind:function(){JSM.controller.CarouselGalleryController.superclass.bind.call(this)},unbind:function(){JSM.controller.CarouselGalleryController.superclass.unbind.call(this)}});
Ext.namespace("JSM.controller");JSM.controller.FirstBillController=function(el,config){JSM.controller.FirstBillController.superclass.constructor.call(this,el,config)};JSM.controller.FirstBillController.CALLBACK_METHOD_REDIRECT="redirectTo";JSM.controller.FirstBillController.CALLBACK_METHOD_DECLINE="decline";JSM.controller.FirstBillController.CALLBACK_METHOD_PROCESSING="processing";JSM.controller.FirstBillController.STORAGE_ACTION_NAME="firstbill-pending";
Ext.extend(JSM.controller.FirstBillController,Chaos.Controller,{name:"FirstBillController",paymentSelectButtonSel:"a.payment_select_button",packageSelectionTitleId:"package_selection_title",creditPackageSel:".credit_package",creditPackageArrowSel:".credit_package_indicator",reOpen:false,paymentRestartButtonClass:"restart_button",storedToken:undefined,_cache:{},init:function(el,config){JSM.controller.FirstBillController.superclass.init.call(this,el,config);this._firstBillModel=new JSM.component.FirstBill(this.element,
{startAutoCheck:this.reOpen,storedToken:this.storedToken});this.addComponent({component:this._firstBillModel,listeners:{"payment-pending":"onPaymentPending","payment-approved":"onPaymentApproved","payment-decline":"onPaymentDecline","payment-unknown":"onPaymentUnknown","get-secure-frame-src-success":"onGetSecureFrameSrcSuccess","iframe-ready":"onIframeReady","get-decline-block-success":"onGetDeclinedBlockSuccess"}},"FirstBillModel");JSM.Util.setGlobalMethods("FirstBillController",["firstBillCallback"],
this)},firstBillCallback:function(method,params){this._getCallbackMethod(method,params)},_getCallbackMethod:function(method,params){switch(method){case JSM.controller.FirstBillController.CALLBACK_METHOD_REDIRECT:location.href=params.redirectUrl;break;case JSM.controller.FirstBillController.CALLBACK_METHOD_DECLINE:this.FirstBillModel.getDeclinedBlock(params);break;case JSM.controller.FirstBillController.CALLBACK_METHOD_PROCESSING:this.FirstBillOverlay.showInProgressPage();this.FirstBillModel.setIframeToken(params.token);
this.FirstBillModel.startCheckPaymentStatus();default:break}},onGetSecureFrameSrcSuccess:function(ev){var secureFrameSrc=ev.response.json.data.url;if(secureFrameSrc&&typeof secureFrameSrc==="string"&&secureFrameSrc!=""){secureFrameSrc+="?";this.FirstBillOverlay.embedSecureIframe(secureFrameSrc)}},onIframeEmbed:function(ev){this.FirstBillModel.checkIsIframeLoaded()},onIframeRemoveFromDOM:function(ev){},onIframeReady:function(ev){this.FirstBillOverlay.hideLoadingMask();this.FirstBillOverlay.displayLoader(false)},
onStartFirstBillProcess:function(ev){this.FirstBillOverlay.showInProgressPage()},onPaymentPending:function(){if(!this._isStatusStoredToStorage)this._isStatusStoredToStorage=JSM.component.StorageAction.store(JSM.controller.FirstBillController.STORAGE_ACTION_NAME,{token:this.FirstBillModel.getIframeToken()})},onPaymentApproved:function(ev){if(this._checkSendNotificationIsEnabled())this._manageApprovedCase();else this._cacheStatus(this._manageApprovedCase)},_manageApprovedCase:function(){this._deleteStorageAction();
Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER,{scope:this,postParams:{firstBillCompleted:true}})},onPaymentDecline:function(ev){if(this._checkSendNotificationIsEnabled())this._manageDeclinedCase();else this._cacheStatus(this._manageDeclinedCase)},_manageDeclinedCase:function(){this._deleteStorageAction();this.FirstBillModel.getDeclinedBlock()},onPaymentUnknown:function(){this._manageUnknownCase()},_manageUnknownCase:function(){this._deleteStorageAction()},onGetDeclinedBlockSuccess:function(ev){var pageContent=
ev.response.json.data.content;this.FirstBillOverlay.changePage(pageContent);this.FirstBillOverlay.element.on("click",this.onPaymentSelectButtonClick,this,{delegage:"."+this.paymentRestartButtonClass});this.FirstBillOverlay.enableShowCommercialPopup(false)},onPackageBoxClick:function(ev,target){ev.preventDefault();var packageEl=Ext.get(target);this._handlePackageBoxClick(packageEl)},onPackageBoxArrowClick:function(ev,target){var _target=Ext.fly(target).next(this.creditPackageSel);this._handlePackageBoxClick(_target)},
_handlePackageBoxClick:function(packageEl){if(!this.FirstBillOverlay.isPackageSelected(packageEl)){this.FirstBillOverlay.showLoadingMask();this.FirstBillOverlay.setPackageSelected(packageEl);this.FirstBillOverlay.displayIframe();this.FirstBillOverlay.displayLoader(true);this.FirstBillModel.setSelectedPackage(packageEl);this.FirstBillOverlay.removeSecureIframeFromDOM();this.FirstBillModel.getSecureFrameSrc()}},onPackageSelectLinkClick:function(ev){ev.preventDefault();this.FirstBillOverlay.slideBlock();
this.FirstBillOverlay.changeTitle();this.FirstBillOverlay.changeElementClass()},onPaymentSelectButtonClick:function(ev,target){if(target.className.match(this.paymentRestartButtonClass)){ev.preventDefault();this.FirstBillOverlay.hide();Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER,{scope:this})}},onPageChange:function(){},onOpenedWindowHide:function(){this._cache.fn.call(this);this._cache.win.un(Chaos.Window.EVENT_HIDE,this.onOpenedWindowHide,this);this._cache={}},_cacheStatus:function(fn){var win=
this._getAnyOpenedOverlayWindow();this._cache={fn:fn,win:win};win.on(Chaos.Window.EVENT_HIDE,this.onOpenedWindowHide,this)},_deleteStorageAction:function(){JSM.component.StorageAction.deleteAction(JSM.controller.FirstBillController.STORAGE_ACTION_NAME)},_checkSendNotificationIsEnabled:function(){return this.reOpen&&this._getAnyOpenedOverlayWindow()===false||this.reOpen===false},_getAnyOpenedOverlayWindow:function(){var groups=Chaos.WinMgr.getGroup("overlay").windows,win,currentWin;for(win in groups){currentWin=
groups[win];if(currentWin.isVisible()&&currentWin.name!="FirstBillOverlay")return currentWin}return false},bind:function(){JSM.controller.FirstBillController.superclass.bind.call(this);if(this.hasContent){this.element.on("click",this.onPackageBoxClick,this,{delegate:this.creditPackageSel});this.element.on("click",this.onPackageBoxArrowClick,this,{delegate:this.creditPackageArrowSel});this._packageSelectionTitleEl=Ext.get(this.packageSelectionTitleId);this._packageSelectionTitleEl.on("click",this.onPackageSelectLinkClick,
this,{delegate:"a"})}},unbind:function(el,config){JSM.controller.FirstBillController.superclass.unbind.call(this);if(this.hasContent){this.element.un("click",this.onPackageBoxClick,this,{delegate:this.creditPackageSel});this.element.un("click",this.onPackageBoxArrowClick,this,{delegate:this.creditPackageArrowSel});this._packageSelectionTitleEl.un("click",this.onPackageSelectLinkClick,this);if(this._firstBillModel){this._firstBillModel.unbind();delete this._firstBillModel}}}});Ext.namespace("JSM.controller");
JSM.controller.GoogleAnalyticsController=function(el,config){JSM.controller.GoogleAnalyticsController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.GoogleAnalyticsController,Chaos.Controller,{name:"GoogleAnalyticsController",trackWithCookieArray:["awardsModels","awards_link","get_credits","contactus_link","support_online_link",JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER_LOGOUT],init:function(el,config){JSM.controller.GoogleAnalyticsController.superclass.init.call(this,el,config)},_getMemberType:function(){return application.isLoggedIn()?JSM.component.GoogleAnalytics.TRACK_TYPE_MEMBER:JSM.component.GoogleAnalytics.TRACK_TYPE_GUEST},
onLogIn:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_LOGIN,JSM.component.GoogleAnalytics.TRACK_TYPE_LOGIN,"",1)},onFilterSearch:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_FILTERSEARCH,this._getMemberType(),ev.searchText,1)},onSearch:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_SEARCH,this._getMemberType(),ev.searchText,1)},onChatOpen:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_TOPMODEL,
this._getMemberType(),ev.modelName,1)},onFreechatStandalone:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_TOPMODEL_STANDALONE,this._getMemberType(),ev.modelName,1)},onPurchaseFailed:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_PURCHASE,JSM.component.GoogleAnalytics.TRACK_TYPE_FAILED)},onPurchaseSuccess:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_PURCHASE,JSM.component.GoogleAnalytics.TRACK_TYPE_SUCCESS)},
onPrivateStart:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_PRIVATE,JSM.component.GoogleAnalytics.TRACK_TYPE_START)},onPrivateEnd:function(ev){this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_PRIVATE,JSM.component.GoogleAnalytics.TRACK_TYPE_END)},onBannerClick:function(ev){var bannerId=ev.bannerId;if(bannerId=="freePeeks")this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_SIGNUP,this._getMemberType(),bannerId);if(this.trackWithCookieArray.indexOf(bannerId)==
-1)this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_BANNER,this._getMemberType(),bannerId);else{var event={category:JSM.component.GoogleAnalytics.TRACK_TYPE_BANNER,event:this._getMemberType(),label:bannerId,value:1};Chaos.Cookie.set("analyticsTracking",Ext.util.JSON.encode(event),100,"/")}},onHeaderLinkClick:function(ev){var linkId=ev.linkId;if(linkId=="signup_button")this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_SIGNUP,this._getMemberType(),linkId);if(this.trackWithCookieArray.indexOf(linkId)!=
-1||linkId=="live_cams"&&ev.cookieTrack==true){var event={category:JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,event:this._getMemberType(),label:linkId,value:1};Chaos.Cookie.set("analyticsTracking",Ext.util.JSON.encode(event),100,"/")}else this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_HEADER,this._getMemberType(),linkId)},onFooterLinkClick:function(ev){var linkId=ev.linkId;if(this.trackWithCookieArray.indexOf(linkId)==-1)this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_FOOTER,
this._getMemberType(),linkId);else{var event={category:JSM.component.GoogleAnalytics.TRACK_TYPE_FOOTER,event:this._getMemberType(),label:linkId,value:1};Chaos.Cookie.set("analyticsTracking",Ext.util.JSON.encode(event),100,"/")}},onFavoritesClick:function(ev){var action=ev.action;this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES,this._getMemberType(),action)},onAuctionClick:function(ev){var action=ev.action;switch(action){case "get-credits-click":action=JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_GETCREDITS;
break;case "get-rules-click":action=JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_RULES;break;case "auction-button-click":action=JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION_SLIDER;break;default:break}this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_AUCTION,action)},onSorterClick:function(ev){var action=ev.action;this.GoogleAnalytics.track(JSM.component.GoogleAnalytics.TRACK_TYPE_SORTER,this._getMemberType(),action)}});Ext.namespace("JSM.controller");
JSM.controller.ImageGalleryController=function(el,config){JSM.controller.ImageGalleryController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.ImageGalleryController,Chaos.Controller,{name:"ImageGalleryController",init:function(el,config){JSM.controller.ImageGalleryController.superclass.init.call(this,el,config)},onGalleryCurrentCountChanged:function(ev){this.ImageGalleryOverlay.setCurrentImageCounter(ev.currentImagesCount)},onGalleryMaxCountChanged:function(ev){this.ImageGalleryOverlay.setMaxImageCounter(ev.maxImagesCount)},onGalleryImageChanged:function(ev){this.ContentSlider.onElementsChanged(ev)},onGalleryImagesInit:function(){this.ContentSlider.initSlider();
this.ImageGalleryOverlay.setVisibleImageBox()},onGalleryAddNextElement:function(ev){this.ContentSlider.onAddNextElem(ev)},onGalleryAddPrevElement:function(ev){this.ContentSlider.onAddPrevElem(ev)},onGalleryImageRequestError:function(ev){this.ImageGalleryOverlay.hide()},onPrevBtnClick:function(ev){this.ImageGalleryComponent.decrementImageCounter();if(ev.isNeededMoreImage)this.ImageGalleryComponent.oneMoreImageRequest({slideDirection:ev.slideDirection,currentItemId:ev.currentItemId})},onNextBtnClick:function(ev){this.ImageGalleryComponent.incrementImageCounter();
if(ev.isNeededMoreImage)this.ImageGalleryComponent.oneMoreImageRequest({slideDirection:ev.slideDirection,currentItemId:ev.currentItemId})},onImageGalleryContentDisplayed:function(){this.ImageGalleryOverlay.setCurrentImageCountElement();this.ImageGalleryOverlay.setMaxImageCountElement();this.ImageGalleryComponent.openImageGallery();this.ContentSlider.setSliderElements()},onOverlayClose:function(){this.ContentSlider.disableSlider();this.ImageGalleryOverlay.unbind()},setCurrentImagesCount:function(count){this._currentImagesCount=
count},getCurrentImagesCount:function(){return this._currentImagesCount},setMaxImagesCount:function(count){this._maxImagesCount=count},getMaxImagesCount:function(){return this._maxImagesCount},bind:function(){JSM.controller.ImageGalleryController.superclass.bind.call(this)},unbind:function(){JSM.controller.ImageGalleryController.superclass.unbind.call(this)}});Ext.namespace("JSM.controller");
JSM.controller.ListPageBannerController=function(el,config){JSM.controller.ListPageBannerController.superclass.constructor.call(this,el,config)};JSM.controller.ListPageBannerController.ATTRIBUTE_OVERLAY_QUERY_PARAM="data-overlay_query_params";JSM.controller.ListPageBannerController.ATTRIBUTE_OVERLAY_TYPE="data-overlay_type";JSM.controller.ListPageBannerController.ATTRIBUTE_URL="href";JSM.controller.ListPageBannerController.ATTRIBUTE_URL_TARGET="target";
JSM.controller.ListPageBannerController.OVERLAY_LOGIN="login";JSM.controller.ListPageBannerController.OVERLAY_SIGNUP="signup";JSM.controller.ListPageBannerController.OVERLAY_QUICKBUY="quickbuy";JSM.controller.ListPageBannerController.BLOCKTYPE_SMALL="small";JSM.controller.ListPageBannerController.BLOCKTYPE_BIG="big";JSM.controller.ListPageBannerController.GLOBALEVENT_GET_COMMERCIAL_TEMPLATE="get-commercial-template";
Chaos.extend(JSM.controller.ListPageBannerController,Chaos.Controller,{name:"ListPageBannerController",animateduration:0.3,bannerContainerIdPrefix:"container_",commercialContainerCls:"commercial_container",commercialRefreshUrl:"Commercial/Refresh",listPageId:"listPageId",oldSizeClass:"",init:function(el,config){JSM.controller.ListPageBannerController.superclass.init.call(this,el,config)},onLoggedIn:function(){this._getBannerTemplate()},_getBannerTemplate:function(){var category=Chaos.Config.get("superCategory");
if(category!=="lesbian"&&category!=="hot_flirt")Chaos.Ajax.request({url:Chaos.getUrl(this.commercialRefreshUrl,{listPageId:Chaos.getMeta(this.listPageId)},{},""),type:"json",method:"POST",scope:this,success:function(response){this._getBannerTemplateSuccess(response)}})},_getBannerTemplateSuccess:function(response){for(var i=0;i<response.json.data.length;i++)this._swapBanners(response.json.data[i])},onSignupSuccess:function(ev){this._getBannerTemplate()},onBannerClick:function(ev){var _target,overlayType=
"",queryParam="",queryParamData="",utmContent="",url="",target="",targetAnchor="",splittedId="";if(!Ext.fly(ev.target).hasClass(this.commercialContainerCls))_target=Ext.fly(ev.target).parent("."+this.commercialContainerCls);else _target=ev.target;splittedId=_target.id.split("_")[1];targetAnchor=_target.child("a");Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_BANNER,{bannerId:splittedId});ev.ev.preventDefault();overlayType=targetAnchor.dom.getAttribute(JSM.controller.ListPageBannerController.ATTRIBUTE_OVERLAY_TYPE);
queryParam=targetAnchor.dom.getAttribute(JSM.controller.ListPageBannerController.ATTRIBUTE_OVERLAY_QUERY_PARAM);url=targetAnchor.dom.getAttribute(JSM.controller.ListPageBannerController.ATTRIBUTE_URL);target=targetAnchor.dom.getAttribute(JSM.controller.ListPageBannerController.ATTRIBUTE_URL_TARGET);queryParamData=Ext.util.JSON.decode(queryParam);utmContent=queryParamData.utm_content;this._getBannerEventAction(overlayType,utmContent,url,target)},_getBannerEventAction:function(overlayType,utmContent,
url,target){switch(overlayType){case JSM.controller.ListPageBannerController.OVERLAY_SIGNUP:this._doSignupTypeBannerClickAction(utmContent);break;case JSM.controller.ListPageBannerController.OVERLAY_LOGIN:this._doLoginTypeBannerClickAction();break;case JSM.controller.ListPageBannerController.OVERLAY_QUICKBUY:this._doQuickbuyTypeBannerClickAction();break;default:if(target)window.open(url,target);else location.href=url;break}},_doSignupTypeBannerClickAction:function(utmContent){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,
{scope:this,manageHistory:true,urlGetParams:utmContent})},_doLoginTypeBannerClickAction:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN,{})},_doQuickbuyTypeBannerClickAction:function(){if(Chaos.Config.get("isPaymentRouterEnabled"))layout.header.callPaymentRouter({},false);else layout.header.startQuickBuy()},_swapBanners:function(newContent){try{this._hideBannerBox(newContent)}catch(exception){}},_hideBannerBox:function(newContent){var self=this;this._currentBannerEl=Ext.get(this.bannerContainerIdPrefix+
newContent.oldId);this._currentBannerEl.animate({opacity:{to:0}},this.animateDuration,function(){self.ListPage.unbindCommercials();self._showNewBannerBox(newContent)})},_getBannerSize:function(el){if(el)if(el.hasClass(JSM.controller.ListPageBannerController.BLOCKTYPE_SMALL))return JSM.controller.ListPageBannerController.BLOCKTYPE_SMALL;else if(el.hasClass(JSM.controller.ListPageBannerController.BLOCKTYPE_BIG))return JSM.controller.ListPageBannerController.BLOCKTYPE_BIG;return""},_showNewBannerBox:function(newContent){var oldBannerEL=
Ext.get(this.bannerContainerIdPrefix+newContent.oldId),content=newContent.content,currentBannerElementChild=null,oldSize="";if(oldBannerEL){oldSize=this._getBannerSize(oldBannerEL);this._currentBannerEl=Ext.DomHelper.insertBefore(oldBannerEL,{html:content},true);currentBannerElementChild=this._currentBannerEl.child("div");if(oldSize){if(currentBannerElementChild.hasClass(JSM.controller.ListPageBannerController.BLOCKTYPE_SMALL))currentBannerElementChild.removeClass(JSM.controller.ListPageBannerController.BLOCKTYPE_SMALL);
if(currentBannerElementChild.hasClass(JSM.controller.ListPageBannerController.BLOCKTYPE_BIG))currentBannerElementChild.removeClass(JSM.controller.ListPageBannerController.BLOCKTYPE_BIG);currentBannerElementChild.addClass(oldSize)}oldBannerEL.remove()}TweenMax.to(this._currentBannerEl.dom,this.animateDuration,{alpha:1,onCompleteScope:this,onComplete:function(){this.ListPage.bindCommercials(this._currentBannerEl.findParent(".page").id);layoutManager._createImageTags()}})}});Ext.namespace("JSM.controller");
JSM.controller.ListPageController=function(el,config){JSM.controller.ListPageController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.ListPageController,Chaos.Controller,{name:"ListPageController",perfLinkSel:".perf_link",headerTextMenuCls:"global_menu",overlayId:"overlay",containerId:"container",slideButtonSel:".left_side_btn",slideButtonDisabledClass:"disabled-button",bonusCreditRecommenderCookie:"showBonusCreditRecommender",_slideButtonContainerEl:undefined,_slideButtonEl:undefined,_loginFromFavorites:false,_onlineFavoritesQueue:[],_panelListWindow:undefined,init:function(el,config){JSM.controller.ListPageController.superclass.init.call(this,
el,config);this.BasicController=application.layout.basicController;this.FreeChat=this.BasicController.freeChatWindow;this._slideButtonContainerEl=Ext.get(this.containerId);this._slideButtonEl=this._slideButtonContainerEl.select(this.slideButtonSel)},onListPagePlayerAppletClick:function(ev){if(typeof this.FreeChat!="undefined")this.FreeChat.onCallShowChat(ev.name,undefined,Ext.get("performer_"+ev.id))},onShowOnlineFavoritesCount:function(ev){this.showSlideButtonMessage(Chaos.translate("{number} online favorites",
{number:ev.count}).toLowerCase())},onHeaderRefresh:function(ev){var favNotificationCookie=Chaos.Cookie.get("favNotification");if(ev.onlineFavouritesCount!=null&&ev.onlineFavouritesCount>0){Chaos.Config.set("FavoritesNotifications",1);if(!favNotificationCookie||favNotificationCookie!=Chaos.Cookie.get("session")){Chaos.Cookie.set("favNotification",Chaos.Cookie.get("session"),"","/");this.showSlideButtonMessage(Chaos.translate("{number} online favorites",{number:ev.onlineFavouritesCount}).toLowerCase())}}},
onTopSlideMessageShow:function(){this.stopListPagePlayer();this.restartListPagePlayer()},onBodyMouseOut:function(ev,target){if(typeof this.ListPage=="object")this.ListPage.plugins.ModelName.hideAllVisibleNames();if(typeof this.TagSearch=="object")this.TagSearch.clearTag()},onBodyClick:function(ev,target){},onListerInsertedContentDown:function(ev){if(ev.container)this.ListPage.bindThumbs(ev.container);this.restartListPagePlayer();if(Chaos.Cookie.isCookieEnabled()===false)JSM.Util.setSessionIdOnLinks(Ext.fly(ev.container))},
onListerInsertedContentUp:function(ev){if(ev.container)this.ListPage.bindThumbs(ev.container);if(Chaos.Cookie.isCookieEnabled()===false)JSM.Util.setSessionIdOnLinks(Ext.fly(ev.container))},onBeforeContentReplace:function(ev){this.stopListPagePlayer()},onAfterContentReplace:function(ev){if(typeof this.Lister!="undefined")this.Lister.resetCounters();this.restartListPagePlayer()},onListerRemoveBlock:function(ev){if(ev.container)this.ListPage.unbindThumbs(ev.container)},onListPageThumbMouseDown:function(ev,
target){var modelData=this.getModelDataFromTarget(target);if(typeof this.FreeChat!="undefined")this.FreeChat.onCallShowChat(modelData.name,modelData.status,modelData.perfLink);if(typeof this.ListPage!="undefined")this.ListPage.plugins.ModelName.hideVisibleNames(ev,target,{perfBox:modelData.perfLink})},onListPageThumbMouseOver:function(ev,target){if(typeof this.ListPagePlayer!="undefined")this.ListPagePlayer.onThumbsMouseover(ev,target);if(typeof this.ListPage!="undefined")this.ListPage.plugins.ModelName.onThumbMouseOver(ev,
target);this.TagSearch.clearTag();this.TagSearch.insertTag(ev,target)},onListPageThumbMouseOut:function(ev,target,options){if(typeof this.ListPagePlayer!="undefined")this.ListPagePlayer.onThumbsMouseout(ev);if(this._panelListWindow){this._panelListWindow.panelListImageMouseOut(ev,target,options);this._panelListWindow.plugins.ModelName.hideVisibleNames(ev,target,options)}if(typeof this.ListPage!="undefined")this.ListPage.plugins.ModelName.hideVisibleNames(ev,target,options);this.TagSearch.clearTag()},
onListPageKeyPress:function(ev,target){},onListPageKeyUp:function(ev,target){},onListPageKeyDown:function(ev,target){if(Ext.isIE&&(ev.keyCode==33||ev.keyCode==34||ev.keyCode==38||ev.keyCode==40)){if(typeof this.ListPagePlayer!="undefined")this.ListPagePlayer.onThumbsMouseout();if(typeof this.ListPage!="undefined")this.ListPage.plugins.ModelName.hideVisibleNames(ev,target);this.TagSearch.clearTag()}},onListPageEscKeyDown:function(ev,target){},onListPageEscKeyUp:function(ev,target){},onListPageEscKeyPress:function(ev,
target){},onListPageFavoriteButtonUpdate:function(ev){if(this._panelListWindow)this._panelListWindow.plugins["Favorites-plugin"].refreshFavoritesListOnFavoriteButtonUpdate(ev)},onOpenOverlayChat:function(ev){if(typeof this.FreeChat=="object"){this.FreeChat.previousUrl=ev.url!=undefined?ev.url:undefined;this.FreeChat.onCallShowChat(ev.modelName)}},onOverlayChatOpened:function(ev,target,options){Chaos.Cookie.remove(this.bonusCreditRecommenderCookie,"/",Chaos.Config.get("cookiedomain"));this.stopListPagePlayer()},
onSetScroll:function(ev){if(!(this._panelListWindow&&this._panelListWindow.isVisible()&&ev.scope.name=="FreeChat")||ev.disable||!Ext.isCecko&&!Ext.isIE7)this.BasicController._disableScroll(ev)},onOverlayClose:function(ev){if(!this._panelListWindow||this._panelListWindow&&!this._panelListWindow.isVisible())this.restartListPagePlayer();else if(this._panelListWindow&&this._panelListWindow.isVisible())try{this._panelListWindow.getSlidePanel().setActive(true)}catch(exception){}},onOverlayChatClosed:function(ev,
target,options){if(typeof this.ListPagePlayer!="undefined")this.ListPagePlayer.onFocus();if(typeof this.PerformerSwap!="undefined")this.PerformerSwap.onFocus()},onQuestionnaireOpened:function(){this.stopListPagePlayer()},stopListPagePlayer:function(){if(typeof this.ListPagePlayer=="object"){this.ListPagePlayer.stopFlashStream();this.ListPagePlayer.resetListPagePlayer();this.ListPagePlayer.isPlayerEnabled=false}if(typeof this.ListPagePlayer.requestTask!="undefined")this.ListPagePlayer.requestTask.cancel()},
restartListPagePlayer:function(){if(typeof this.ListPagePlayer=="object"){if(typeof this.ListPagePlayer.randomPlayerTask!="undefined"){this.ListPagePlayer.randomPlayerTask.cancel();this.ListPagePlayer.randomPlayerTask.delay(1E3)}this.ListPagePlayer.isPlayerEnabled=true}},onCloseChatMultiWindow:function(ev){},checkOnlineFavoritesQueue:function(){if(this._onlineFavoritesQueue.length>0){var _nextItem=this._onlineFavoritesQueue.shift();this.showFavoritesChangeToOnline(_nextItem)}},onDisplayFavoritesModelName:function(ev){this.ListPage.updateModelInfoBar("name",
ev.display,ev)},showFavoritesChangeToOnline:function(ev){if(Chaos.Config.get("FavoritesNotifications")==1&&!Ext.fly(this.overlayId).isVisible())if(this._panelListWindow&&!this._panelListWindow.isVisible()&&!this._panelListWindow.isAnimating())if(this._onlineFavoriteTask)this._onlineFavoritesQueue.push(ev);else this.showSlideButtonMessage(ev.pid+" "+Chaos.translate("is online"))},showSlideButtonMessage:function(title){if(this.SlideButtonFavorite&&!this.SlideButtonFavorite.isActive())this.SlideButtonFavorite.showButtonMessage(title,
4E3,function(){this.checkOnlineFavoritesQueue()},this)},onAddFavoriteButtonMouseDown:function(ev,target,options){if(Ext.isIE8)this.ListPagePlayer.isNoStopStream=true;else ev.stopEvent();this.ListPage.plugins["Favorites-plugin"].onUpdateFavoriteClick(ev,target,options,false)},getModelDataFromTarget:function(target){var targetNode=Ext.get(target).dom.nodeName.toLowerCase(),perfLink=targetNode=="a"?Ext.get(target):Ext.get(target).parent("a"),status=perfLink.parent().dom.className.split(" ")[1],name=
perfLink.dom.href.split("chat/")[1].split("?")[0].split("#")[0],modelData={};modelData.perfLink=perfLink;modelData.status=status;modelData.name=name;return modelData},onGlobalStatusChange:function(ev){if(this._panelListWindow)this._panelListWindow.plugins["Favorites-plugin"].statusChange(ev,this._panelListWindow.isVisible())},onStatusChanged:function(ev){switch(ev.newStatus){case JSM.component.StatusUpdater.OFFLINE_STATUS:this.ListPage.updateModelInfoBar("status","show",ev);this.ListPagePlayer.checkIfCurrentModelIsOffline();
break;case JSM.component.StatusUpdater.FREE_STATUS:this.ListPage.updateModelInfoBar("status","hide",ev);break;case JSM.component.StatusUpdater.PRIVATE_STATUS:this.ListPage.updateModelInfoBar("status","show",ev);break;case JSM.component.StatusUpdater.MEMBERS_ONLY_STATUS:this.ListPage.updateModelInfoBar("status","show",ev);break}},onDisplayModelName:function(ev){this.ListPage.updateModelInfoBar("name",ev.display,ev)},showMoreError:function(){this.ListPage.showMoreError()},onListPageThumbRightMouseDown:function(){if(Ext.isIE8)this.ListPagePlayer.isMouseClick=
true},onListPageThumbCtrlMouseDown:function(){if(Ext.isIE8)this.ListPagePlayer.isMouseClick=true},onWindowShow:function(ev){var _name=ev.window.name;if(_name!="Tooltip"&&_name!="window"&&_name!="DropDownMenu"&&_name!="SearchFilterWindow")this.stopRandomListPagePlayer()},onOverlayOpen:function(ev){if(typeof this.MemberAuction!="undefined"&&this.MemberAuction.isVisible())this.MemberAuction.hide();this.stopRandomListPagePlayer();if(this.ListpageOrderTypeButton)this.ListpageOrderTypeButton.hideFloatingButtonList()},
stopRandomListPagePlayer:function(){if(typeof this.ListPagePlayer!="undefined"){if(this.ListPagePlayer.randomPlayerTask)this.ListPagePlayer.randomPlayerTask.cancel();this.ListPagePlayer.resetListPagePlayer();this.ListPagePlayer.isPlayerEnabled=false}},onWindowHide:function(ev){if(ev&&ev.window&&ev.window.name!="Tooltip"&&this._panelListWindow&&!this._panelListWindow.isVisible())this.startRandomListPagePlayer();if(this._loginFromFavorites)this._loginFromFavorites=false},startRandomListPagePlayer:function(){if(typeof this.ListPagePlayer!=
"undefined"){this.ListPagePlayer.isPlayerEnabled=true;this.ListPagePlayer.showRandomPlayer()}},onTopSlideMessageHide:function(){if(typeof this.ListPagePlayer!="undefined")this.ListPagePlayer.onThumbsMouseout()},onSuccessRefreshListpage:function(){this.stopListPagePlayer();if(this.ListPagePlayer){this.ListPagePlayer.isPlayerEnabled=true;this.ListPagePlayer.setRandomPlayer("first")}},onSlidePanelOpen:function(){this.stopRandomListPagePlayer()},onSlidePanelClose:function(){this.startRandomListPagePlayer()},
onLogIn:function(ev){if(this._loginFromFavorites){this._loginFromFavorites=false;this.openFavorites()}if(this.Index)this.Index.checkOnlineFavorites()},onDropdownSaveSettings:function(ev){var favoritesNotifications=ev.params.value=="on"?1:0;if(ev.params.type=="favorites_notifications")Chaos.Config.set("FavoritesNotifications",favoritesNotifications)},disableSlideButtons:function(disable){if(disable)this._slideButtonEl.addClass(this.slideButtonDisabledClass);else this._slideButtonEl.removeClass(this.slideButtonDisabledClass)}});
Ext.namespace("JSM.controller");JSM.controller.MemberProfileController=function(el,config){JSM.controller.MemberProfileController.superclass.constructor.call(this,el,config)};JSM.controller.MemberProfileController.WINDOW_THUMBNAIL="thumbnailWindow";JSM.controller.MemberProfileController.WINDOW_MAIN="imageSliderWindow";JSM.controller.MemberProfileController.WINDOW_UPLOAD="uploadWindow";
Chaos.extend(JSM.controller.MemberProfileController,Chaos.Controller,{name:"MemberProfileController",containerId:"popup_box_outer_content",imageUploaderBlockId:"mpimagesuploader_content",thumbnailWindowId:"mpimagesuploader_thumbnail_box",uploaderWindowId:"mpimagesuploader_uploader_box",imageSliderWindowId:"mpimagesuploader_imageslider_box",_externalImagesUploader:undefined,init:function(el,config){JSM.controller.MemberProfileController.superclass.init.call(this,el,config)},onGetProfileBlockSuccess:function(response){var self=
this;this.containerEl=Ext.get(this.containerId);try{if(!(this._externalImagesUploader instanceof mpimagesuploader.MemberProfileImagesUploader)){var appletParams=response.json.data.appletParams;appletParams.getElementPosition=function(){return self._getElementPosition.apply(self,arguments)};this._externalImagesUploader=new mpimagesuploader.MemberProfileImagesUploader(this.imageUploaderBlockId,appletParams)}}catch(exception){console.error("@JS-ERROR during mpimagesuploader instantiation in ",this.name,
": ",exception)}return this._externalImagesUploader},onProfileSaveSuccess:function(ev){},onProfileSaveError:function(ev){},onProfileSaveFailure:function(ev){},onInnerPopupOpen:function(ev){this._disableExternalWindow(true)},onInnerPopupClose:function(ev){this._disableExternalWindow(false)},onTextAreaEditStart:function(){try{this._externalImagesUploader.enableKeyBoardEvents(false)}catch(exception){console.error("@JS-ERROR in ",this.name,": ",exception)}},onTextAreaEditEnd:function(){try{this._externalImagesUploader.enableKeyBoardEvents(true)}catch(exception){console.error("@JS-ERROR in ",
this.name,": ",exception)}},_getElementPosition:function(id){var element=Ext.get(id);if(element&&element.isVisible())return{"top":element.getTop()-this.containerEl.getTop()||0,"left":element.getLeft()-this.containerEl.getLeft()||0,"width":element.getWidth()||0,"height":element.getHeight()||0,"z-index":parseInt(element.getStyle("z-index"))||0};return null},_disableExternalWindow:function(disable){try{this._externalImagesUploader.anotherWindowOpen(disable)}catch(exception){console.error("@JS-ERROR in ",
this.name,": ",exception)}},bind:function(){JSM.controller.MemberProfileController.superclass.bind.call(this)},unbind:function(){try{this._externalImagesUploader.destroy()}catch(exception){}delete this._externalImagesUploader;JSM.controller.MemberProfileController.superclass.unbind.call(this)}});Ext.namespace("JSM.page.setting");JSM.page.setting.index=function(el,config){JSM.page.setting.index.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.index,JSM.page.setting.account,{name:"page.settings",url:"",layout:null,init:function(el,config){JSM.page.setting.index.superclass.init.call(this,el,config)},load:function(){},bind:function(){JSM.page.setting.index.superclass.bind.call(this)},unbind:function(){JSM.page.setting.index.superclass.unbind.call(this)}});Ext.namespace("JSM.page.setting");JSM.page.setting.validateemail=function(el,config){JSM.page.setting.validateemail.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.validateemail,JSM.page.setting.account,{name:"page.settings",url:"",layout:null,newEmailId:"new_email",fadeSavedLabel:function(div){Ext.get(div+"_saved").fadeOut({useDisplay:true});if(div=="account_set_email_form")this.gotoSettings()},init:function(el,config){Ext.get(this.newEmailId).set({"autocomplete":"off"});JSM.page.setting.validateemail.superclass.init.call(this,el,config)},load:function(){},bind:function(){JSM.page.setting.validateemail.superclass.bind.call(this)},
unbind:function(){JSM.page.setting.validateemail.superclass.unbind.call(this)}});Ext.namespace("JSM.page.setting");JSM.page.setting.validatepassword=function(el,config){JSM.page.setting.validatepassword.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.page.setting.validatepassword,JSM.page.setting.account,{name:"page.settings",url:"",layout:null,init:function(el,config){JSM.page.setting.validatepassword.superclass.init.call(this,el,config)},load:function(){},bind:function(){JSM.page.setting.validatepassword.superclass.bind.call(this)},unbind:function(){JSM.page.setting.validatepassword.superclass.unbind.call(this)}});Ext.namespace("JSM.component");
JSM.component.AwardsListPage=function(el,config){JSM.component.AwardsListPage.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.AwardsListPage,JSM.component.ListPage,{name:"AwardsListPage",awardsId:"awards_0",favoriteButtonSel:".add_favorite",awardsContainerId:"awards_container",init:function(el,config){JSM.component.AwardsListPage.superclass.init.call(this,el,config)},bindThumbs:function(currentBlockId){var currentBlockEl=Ext.get(currentBlockId);if(currentBlockEl){var newThumbs=currentBlockEl.select(this.perfLinkSel);var newCommercialThumbs=currentBlockEl.select(this.commercialContainerSel);this.bindCommercials(currentBlockId);
newThumbs.on({"click":this.onThumbsClick,"mousedown":this.onThumbsMouseDown,"mouseover":this.onThumbsMouseOver,scope:this});var addFavoriteButtons=Ext.get(this.awardsContainerId).select(this.favoriteButtonSel);addFavoriteButtons.on({"click":this.onUpdateFavoriteClick,"mousedown":this.onUpdateFavoriteMouseDown,scope:this})}},bind:function(){this.bindThumbs(this.awardsId)},unbind:function(){}});Ext.namespace("JSM.component");
JSM.component.AwardsCountdownButton=function(el,config){JSM.component.AwardsCountdownButton.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.AwardsCountdownButton,JSM.component.FloatingSlideButton,{name:"AwardsCountdownButton",slideButtonTitleTextSel:"awards_countdown_title_text",floatingSlideButtonId:"awards_countdown_list",floatingSlideButtonCtnId:"awards_countdown_container",additionalPadding:35,openedFloatingSlideButtonCls:"opened",textInnerSelector:false,catchButtonClick:false,slideButtonIconCls:"floating_button_icon",slideButtonTitleSel:"awards_countdown_title",slideButtonListSel:"awards_countdown_list",
slideButtonWidth:40,showLoading:false,changeTitles:false,horizontalDirection:"right",startHorizontalPosition:10,init:function(el,config){JSM.component.AwardsCountdownButton.superclass.init.call(this,el,config)},bind:function(){JSM.component.AwardsCountdownButton.superclass.bind.call(this)},unbind:function(){JSM.component.AwardsCountdownButton.superclass.unbind.call(this)}});Ext.namespace("JSM.component");
JSM.component.AwardsMenuButton=function(el,config){JSM.component.AwardsMenuButton.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.component.AwardsMenuButton,JSM.component.FloatingSlideButton,{name:"ListPageOrderButton",slideButtonTitleTextSel:"awards_menu_title_text",floatingSlideButtonId:"awards_menu_list",floatingSlideButtonCtnId:"awards_menu_container",additionalPadding:35,openedFloatingSlideButtonCls:"opened",slideButtonIconCls:"floating_button_icon",slideButtonTitleSel:"awards_menu_title",slideButtonListSel:"awards_menu_list",slideButtonWidth:40,showLoading:true,changeTitles:true,horizontalDirection:"right",
startHorizontalPosition:10,init:function(el,config){JSM.component.AwardsMenuButton.superclass.init.call(this,el,config)},bind:function(){JSM.component.AwardsMenuButton.superclass.bind.call(this)},unbind:function(){JSM.component.AwardsMenuButton.superclass.unbind.call(this)}});Ext.namespace("JSM.component");JSM.component.ListPageOrderButton=function(el,config){JSM.component.ListPageOrderButton.superclass.constructor.call(this,el,config)};JSM.component.ListPageOrderButton.ORDERTYPE_RECOMMENDED="recommended";
JSM.component.ListPageOrderButton.ORDERTYPE_MOST_POPULAR="most_popular";JSM.component.ListPageOrderButton.ORDERTYPE_NEWBIE="newbie";JSM.component.ListPageOrderButton.ORDERTYPE_STREAM_QUALITY="stream_quality";JSM.component.ListPageOrderButton.ORDERTYPE_LANGUAGE="language";JSM.component.ListPageOrderButton.EVENT_ORDERTYPE_BTNCLICK="sorter-click";
Chaos.extend(JSM.component.ListPageOrderButton,JSM.component.FloatingSlideButton,{name:"ListPageOrderButton",slideButtonTitleTextSel:"listpage_ordertype_btn_title_text",floatingSlideButtonId:"listpage_ordertype_list",floatingSlideButtonCtnId:"listpage_ordertype_btn_container",additionalPadding:35,getListedPerformersUrl:"ListPageAjax/ShowMoreJson",openedFloatingSlideButtonCls:"opened",recommendedOrderTypeLinkId:"recommended_ordertype_link",mostPopularOrderTypeLinkId:"most_popular_ordertype_link",newbiesOrderTypeLinkId:"newbies_ordertype_link",
streamQualityOrderTypeLinkId:"stream_quality_ordertype_link",languageOrderTypeLinkId:"language_ordertype_link",_currentTextEl:undefined,_isOpenedFloatingSlideButton:false,_isAnimatingFloatingSlideButton:false,_floatingSlideButtonContainerEl:undefined,init:function(el,config){JSM.component.ListPageOrderButton.superclass.init.call(this,el,config);this._orderTypeRecommendedTranslate=Chaos.translate("Recommended");this._orderTypeMostPopularTranslate=Chaos.translate("Most popular");this._orderTypeNewbiesTranslate=
Chaos.translate("Newbies");this._orderTypeStreamQualityTranslate=Chaos.translate("Stream quality");this._orderTypeLanguageTranslate=Chaos.translate("My Language");this.changeButtonTitle(this.getCurrentOrderType())},getCurrentOrderType:function(){var _currentOrderType=Chaos.Config.get("listPageOrderType");switch(_currentOrderType){case JSM.component.ListPageOrderButton.ORDERTYPE_RECOMMENDED:default:return this._orderTypeRecommendedTranslate;break;case JSM.component.ListPageOrderButton.ORDERTYPE_MOST_POPULAR:return this._orderTypeMostPopularTranslate;
break;case JSM.component.ListPageOrderButton.ORDERTYPE_NEWBIE:return this._orderTypeNewbiesTranslate;break;case JSM.component.ListPageOrderButton.ORDERTYPE_STREAM_QUALITY:return this._orderTypeStreamQualityTranslate;break;case JSM.component.ListPageOrderButton.ORDERTYPE_LANGUAGE:return this._orderTypeLanguageTranslate;break}},onOrderTypeClick:function(ev,target){ev.preventDefault();var _targetEl,_orderType,_list;_list=Ext.get(this.floatingSlideButtonId);_list.select("a").removeClass("active");_targetEl=
Ext.get(target);_orderType=_targetEl.id;_targetEl.addClass("active");if(this.showLoading){JSM.Util.setCursor("wait");this.displayLoader(true)}Chaos.fireEvent(JSM.component.ListPageOrderButton.EVENT_ORDERTYPE_BTNCLICK,{action:_orderType});switch(_orderType){case this.recommendedOrderTypeLinkId:default:this.getOrderedListPage(ev,target,JSM.component.ListPageOrderButton.ORDERTYPE_RECOMMENDED);Chaos.Config.set("listPageOrderType",JSM.component.FloatingSlideButton.ORDERTYPE_RECOMMENDED);this.changeButtonTitle(this._orderTypeRecommendedTranslate);
break;case this.mostPopularOrderTypeLinkId:this.getOrderedListPage(ev,target,JSM.component.ListPageOrderButton.ORDERTYPE_MOST_POPULAR);Chaos.Config.set("listPageOrderType",JSM.component.FloatingSlideButton.ORDERTYPE_MOST_POPULAR);this.changeButtonTitle(this._orderTypeMostPopularTranslate);break;case this.newbiesOrderTypeLinkId:this.getOrderedListPage(ev,target,JSM.component.ListPageOrderButton.ORDERTYPE_NEWBIE);Chaos.Config.set("listPageOrderType",JSM.component.FloatingSlideButton.ORDERTYPE_NEWBIE);
this.changeButtonTitle(this._orderTypeNewbiesTranslate);break;case this.streamQualityOrderTypeLinkId:this.getOrderedListPage(ev,target,JSM.component.ListPageOrderButton.ORDERTYPE_STREAM_QUALITY);Chaos.Config.set("listPageOrderType",JSM.component.FloatingSlideButton.ORDERTYPE_STREAM_QUALITY);this.changeButtonTitle(this._orderTypeStreamQualityTranslate);break;case this.languageOrderTypeLinkId:this.getOrderedListPage(ev,target,JSM.component.ListPageOrderButton.ORDERTYPE_LANGUAGE);Chaos.Config.set("listPageOrderType",
JSM.component.FloatingSlideButton.ORDERTYPE_LANGUAGE);this.changeButtonTitle(this._orderTypeLanguageTranslate);break}},getOrderedListPage:function(ev,target,orderType){var _refreshParams={};_refreshParams={ev:ev,target:target,orderType:orderType};Chaos.fireEvent(JSM.page.index.index.GLOBALEVENT_REFRESH_LISTPAGE,_refreshParams)},resetOrderedList:function(){if(this.showLoading){this.displayLoader(false);JSM.Util.setCursor("default")}this.hideFloatingButtonList()},bind:function(){JSM.component.ListPageOrderButton.superclass.bind.call(this);
Ext.get(this.floatingSlideButtonId).select("a").on("click",this.onOrderTypeClick,this)},unbind:function(){JSM.component.ListPageOrderButton.superclass.unbind.call(this);Ext.get(this.floatingSlideButtonId).select("a").un("click",this.onOrderTypeClick,this)}});Ext.namespace("JSM.window");JSM.window.Confirmation=function(el,config){JSM.window.Confirmation.superclass.constructor.call(this,el,config)};JSM.window.Confirmation.EVENT_CONFIRM="confirmation-confirm";JSM.window.Confirmation.EVENT_CANCEL="confirmation-cancel";
Chaos.extend(JSM.window.Confirmation,JSM.window.HintPopup,{name:"Confirmation",confirmBlockId:"confirm_block",arrowTopCls:"arrow_top",arrowRightCls:"arrow_right",arrowBottomCls:"arrow_bottom",arrowLeftCls:"arrow_left",top:0,left:0,alignment:"left",arrowTop:undefined,isModal:false,arrowLeft:undefined,showMode:"absolute",insertionMethod:"append",bodyTag:'<span id="{confirmArrowBlockId}">&nbsp;</span>'+'<div class="{confirmationCls}">'+'<p id="{confirmTextFieldId}">{message}</p>'+'<div class="nav">'+
'<a id="{confirmButtonId}" class="{confirmButtonCls}" href="#">{confirmButtonText}</a>'+'<a id="{cancelButtonId}" class="{cancelButtonCls}" href="#">{cancelButtonText}</a>'+"</div>"+"</div>",tplConfig:{},handleArrows:true,createConfirmWindow:true,mustRender:false,isVisibleOnInit:false,redirectOnConfirm:false,setFocusToConfirm:true,_confirmButtonEl:undefined,_cancelButtonEl:undefined,_confirmTextFieldEl:undefined,_confirmArrowBlockEl:undefined,_arrowSmallSideSize:8,_arrowBigSideSize:16,_tplConfig:{confirmArrowBlockId:"confirm_arrow_block",
confirmationCls:"confirmation",confirmTextFieldId:"confirm_text_field",message:"This is a Girl/Boy/Tranny model.",confirmButtonId:"confirm_button",confirmButtonCls:"first_button small",confirmButtonText:"Continue",cancelButtonId:"cancel_button",cancelButtonCls:"third_button small",cancelButtonText:"Cancel"},_isVisible:false,init:function(el,config){this.addEvents(JSM.window.Confirmation.EVENT_CONFIRM,JSM.window.Confirmation.EVENT_CANCEL);this._tplConfig=Ext.applyIf(this.tplConfig,this._tplConfig);
if(this.createConfirmWindow)this.setConfirmWindow();else this._isVisible=this.isVisibleOnInit;this._confirmButtonEl=this.getConfirmButton();this._cancelButtonEl=Ext.get(this._tplConfig.cancelButtonId);this._confirmTextFieldEl=Ext.get(this._tplConfig.confirmTextFieldId);this._confirmBlockEl=Ext.get(this.confirmBlockId);if(this._confirmButtonEl&&this.setFocusToConfirm)this._confirmButtonEl.focus();JSM.window.Confirmation.superclass.init.call(this,el,config)},setConfirmWindow:function(){this._confirmWindowEl=
Ext.DomHelper[this.insertionMethod](this.element,{tag:"div",id:this.confirmBlockId},true);var tpl=new Ext.Template(this.bodyTag);tpl.append(this._confirmWindowEl,this._tplConfig);this._isVisible=true},getConfirmWindow:function(){return Ext.get(this.confirmBlockId)},getConfirmButton:function(){return Ext.get(this._tplConfig.confirmButtonId)},setPosition:function(pos,top,left){this.getConfirmWindow().setStyle({position:pos,left:left+"px",top:top+"px"})},setTextField:function(newText){if(this._confirmTextFieldEl)this._confirmTextFieldEl.dom.innerHTML=
newText},setArrowPosition:function(){this._confirmArrowBlockEl.removeClass();if(this.alignment=="top"||this.alignment=="bottom")this._confirmArrowBlockEl.setWidth(this._arrowBigSideSize).setHeight(this._arrowSmallSideSize);else if(this.alignment=="left"||this.alignment=="right")this._confirmArrowBlockEl.setWidth(this._arrowSmallSideSize).setHeight(this._arrowBigSideSize);var arrowTopPosition=this._confirmBlockEl.getHeight()/2-this._confirmArrowBlockEl.getHeight()/2;var arrowLeftPosition=this._confirmBlockEl.getWidth()/
2-this._confirmArrowBlockEl.getWidth()/2;if(this.arrowTop!=undefined)arrowTopPosition=this.arrowTop;if(this.arrowLeft!=undefined)arrowLeftPosition=this.arrowLeft;switch(this.alignment){case "top":this._confirmArrowBlockEl.setStyle({top:-this._confirmArrowBlockEl.getHeight()+"px",left:arrowLeftPosition+"px"});this._confirmArrowBlockEl.addClass(this.arrowTopCls);break;case "right":this._confirmArrowBlockEl.setStyle({top:arrowTopPosition+"px",left:this._confirmBlockEl.getWidth()+"px"});this._confirmArrowBlockEl.addClass(this.arrowRightCls);
break;case "bottom":this._confirmArrowBlockEl.setStyle({top:this._confirmBlockEl.getHeight()+"px",left:arrowLeftPosition+"px"});this._confirmArrowBlockEl.addClass("arrow_bottom");break;case "left":this._confirmArrowBlockEl.setStyle({top:arrowTopPosition+"px",left:-this._confirmArrowBlockEl.getWidth()+"px"});this._confirmArrowBlockEl.addClass("arrow_left");break;default:break}},onConfirmButtonClick:function(ev,target){ev.preventDefault();ev.stopPropagation();this.hideConfirmWindow();this.fireEvent(JSM.window.Confirmation.EVENT_CONFIRM,
{scope:this});if(this.redirectOnConfirm)try{JSM.Util.setCursor("wait");location.href=Ext.fly(target).dom.href}catch(exception){}},onCancelButtonClick:function(ev){ev.preventDefault();ev.stopPropagation();this.hideConfirmWindow();this.fireEvent(JSM.window.Confirmation.EVENT_CANCEL,{scope:this})},onKeyPressed:function(ev){var pressedChar=ev.getCharCode();switch(pressedChar){case 13:this.hideConfirmWindow();this.fireEvent(JSM.window.Confirmation.EVENT_CONFIRM,{scope:this});break;case 27:this.hideConfirmWindow();
this.fireEvent(JSM.window.Confirmation.EVENT_CANCEL,{scope:this});break;default:break}},showConfirmWindow:function(){this.getConfirmWindow().show();if(this.handleArrows){this._confirmArrowBlockEl=Ext.get(this._tplConfig.confirmArrowBlockId);this.setArrowPosition()}this._isVisible=true},hideConfirmWindow:function(){if(this.getConfirmWindow()){this.getConfirmWindow().setStyle("display","none");this._isVisible=false}},isVisible:function(){return this._isVisible},bind:function(){JSM.window.Confirmation.superclass.bind.call(this);
this._confirmButtonEl.on("click",this.onConfirmButtonClick,this);this.element.on("keydown",this.onKeyPressed,this);this._cancelButtonEl.on("click",this.onCancelButtonClick,this)},unbind:function(){JSM.window.Confirmation.superclass.unbind.call(this);this._confirmButtonEl.un("click",this.onConfirmButtonClick,this);this.element.un("keydown",this.onKeyPressed,this);this._cancelButtonEl.un("click",this.onCancelButtonClick,this)}});Ext.namespace("JSM.overlay");
JSM.overlay.AccountSettings=function(el,config){JSM.overlay.AccountSettings.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.AccountSettings,JSM.Overlay,{name:"AccountSettings",getContentRoute:"Overlay/GetMyAccountSettingsBlock",autoLoad:true,errorTag:"",overlayBlockId:"overlay_account_settings",emailFormId:"email_form",setEmailFormId:"set_email_form",passwordFormId:"password_form",getPasswordFormId:"getpassword_form",deleteAccountButtonId:"delete_account_btn",formErrorSel:".warning_tag",errorMessageClass:".error_message",contentRowClass:".content_row",savedSuffix:"_saved",formSuffix:"_form",passwordBlockId:"display_password",
labelHideDuration:6E3,contentBlockId:"content_account",formSel:"form",inputTextSel:"input[type=text]",inputPasswordSel:"input[type=password]",init:function(el,config){if(!JSM.Session.checkCookieChanges())return;this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"");JSM.overlay.AccountSettings.superclass.init.call(this,el,config);this.formParams={};this.formParams[this.emailFormId]={scope:this,maskMode:"disabled",isAjax:true,async:true,handleToken:false,showHints:false,useModalForGeneralErrors:false,
success:this.successCallback,rules:{},requestParams:["submit"],isBackConnNeeded:true};this.formParams[this.setEmailFormId]={scope:this,maskMode:"diabled",isAjax:true,handleToken:true,showHints:true,success:this.successCallback,useModalForGeneralErrors:false,rules:{},isBackConnNeeded:true,requestParams:["password","new_email","form_token","token"]};this.formParams[this.getPasswordFormId]={scope:this,maskMode:"disabled",isAjax:true,handleToken:true,showHints:true,success:this.successCallback,useModalForGeneralErrors:false,
rules:{},isBackConnNeeded:true,requestParams:["submit"]};this.formParams[this.passwordFormId]={scope:this,isAjax:true,handleToken:true,showHints:false,success:this.successCallback,useModalForGeneralErrors:false,isBackConnNeeded:true,requestParams:["old_password","password1","password2","form_token","token"]}},onContentDisplayed:function(){this.setInstances();this.toggleBox.on(JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,function(obj){obj.scope.hideAllErrors()});this.toggleBox.on(JSM.component.ToggleBox.EVENT_CLOSE,
this.onResetOnClose,this);this.toggleBox.on(JSM.component.ToggleBox.EVENT_BEFORE_OPEN,this.manageForms,this);this.toggleBox.on(JSM.component.ToggleBox.EVENT_BEFORE_CLOSE,this.manageForms,this)},manageForms:function(opts,event){var el=opts.box,elem;switch(event){case JSM.component.ToggleBox.EVENT_BEFORE_OPEN:elem=el.child(this.formSel)||el.parent(this.formSel);this.setFormToElement(elem,true);break;case JSM.component.ToggleBox.EVENT_BEFORE_CLOSE:elem=el.child(this.formSel)||el.parent(this.formSel);
this.setFormToElement(elem,false);break}},setFormToElement:function(el,create){switch(create){case true:this.currentForm=new JSM.form.Form(el.id,this.formParams[el.id]);Chaos.Broadcaster.on(JSM.Connection.GLOBALEVENT_XDOMAIN_RESPONSE,this.currentForm.xDomainCallback,this.currentForm);break;default:if(this.currentForm!=undefined){Chaos.Broadcaster.un(JSM.Connection.GLOBALEVENT_XDOMAIN_RESPONSE,this.currentForm.xDomainCallback,this.currentForm);this.currentForm.hideHint();this.currentForm.hideAllErrors();
this.currentForm.unbind();delete this.currentForm;this.currentForm=undefined}break}},setInstances:function(){this.toggleBox=new JSM.component.ToggleBox(this.contentBlockId,{scope:this})},hideAllErrors:function(){if(typeof this.currentForm!="undefined")this.currentForm.hideAllErrors();Ext.getBody().select(this.formErrorSel).each(function(){this.remove()})},showError:function(errorMsg){JSM.form.failureNotice.show(errorMsg)},successCallback:function(formId,response){var from=formId.replace(this.formSuffix,
"");this.element.select(this.contentRowClass).setStyle("position","relative");this.element.select(this.errorMessageClass).setStyle("display","none");Ext.get(from+this.savedSuffix).setStyle("display","block");if(from=="password")Ext.get(this.passwordBlockId).dom.innerHTML="********";this.fadeLabel.defer(this.labelHideDuration,this,[from+this.savedSuffix]);this.toggleBox.closeContainer(Ext.get(formId));if(typeof this.currentForm!="undefined"){this.currentForm.hideHint();this.currentForm.hideAllErrors()}},
onResetOnClose:function(){this.element.select(this.inputTextSel).each(function(){if(this.dom.value!="")this.dom.value=""});this.element.select(this.inputPasswordSel).each(function(){if(this.dom.value!="")this.dom.value=""});this.element.select(this.errorMessageClass).each(function(){this.setStyle("display","none")})},fadeLabel:function(labelId){if(Ext.get(labelId))Ext.get(labelId).fadeOut({useDisplay:true})},bind:function(){JSM.overlay.AccountSettings.superclass.bind.call(this);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,
this.onContentDisplayed,this);this.on(Chaos.Window.EVENT_BEFORE_HIDE,this.hideAllErrors,this)},unbind:function(){this.setFormToElement(this.currentForm,false);JSM.overlay.AccountSettings.superclass.unbind.call(this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);this.un(Chaos.Window.EVENT_BEFORE_HIDE,this.hideAllErrors,this)}});Ext.namespace("JSM.overlay");JSM.overlay.BonusCreditLogin=function(el,config){JSM.overlay.BonusCreditLogin.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.BonusCreditLogin,JSM.Overlay,{name:"BonusCreditLogin",getContentRoute:"Overlay/GetBonusCreditLoginBlock",isScrollingDisabled:true,overlayBlockId:"overlay_bonus_credit_login",infoButtonId:"bonus_credit_info_button",bonusCreditRecommenderCookie:"showBonusCreditRecommender",_infoButtonEl:undefined,blockType:undefined,init:function(el,config){this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"","");this.getContentParams={blockType:this.blockType};JSM.overlay.BonusCreditLogin.superclass.init.call(this,
el,config);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},showInfoConfirmation:function(){this.hintCmp=new JSM.window.HintPopup("info_hint",{mustRender:true,autoDestroy:false,autoDestroyElement:false,top:undefined,left:undefined,bodyTag:'<div class="info_tag_right">&nbsp;</div><div id="bonus_credit_text"><p>You can get almost {bonuscredit} FREE Credits by purchasing the bonus packages.</p> <p>You can unlock FREE Credits regularly.</p></div>'});this.hintCmp.show()},hideInfoConfirmation:function(){this.hintCmp.hide()},
onContentDisplayed:function(){if(this.blockType=="outOfFreePeeks"||this.blockType=="freeCredits"){this._infoButtonEl=Ext.get(this.infoButtonId);this._infoButtonEl.on("mouseenter",this.showInfoConfirmation,this);this._infoButtonEl.on("mouseout",this.hideInfoConfirmation,this);Chaos.Cookie.remove(this.bonusCreditRecommenderCookie,"/",Chaos.Config.get("cookiedomain"))}},bind:function(){JSM.overlay.BonusCreditLogin.superclass.bind.call(this)},unbind:function(){JSM.overlay.BonusCreditLogin.superclass.unbind.call(this);
if(this.blockType=="outOfFreePeeks"||this.blockType=="freeCredits"){this._infoButtonEl.un("mouseenter",this.showInfoConfirmation,this);this._infoButtonEl.un("mouseout",this.hideInfoConfirmation,this)}}});Ext.namespace("JSM.overlay");JSM.overlay.FirstBill=function(el,config){JSM.overlay.FirstBill.superclass.constructor.call(this,el,config)};JSM.overlay.FirstBill.EVENT_SELECTLIST_ITEM_CLICK="selectlist-item-click";JSM.overlay.FirstBill.EVENT_IFRAME_REMOVE_FROM_DOM="iframe-remove-from-dom";
JSM.overlay.FirstBill.EVENT_IFRAME_EMBED="iframe-embed";JSM.overlay.FirstBill.EVENT_CHANGE_PAGE="change-page";
Ext.extend(JSM.overlay.FirstBill,JSM.Overlay,{name:"FirstBillOverlay",animateDuration:0.3,selectedPackageCls:"selected",inactivePackageCls:"inactive",packagesContainerId:"packages_container",packageChangerLinkSel:".bigger_package_link",slidingBoxSel:".sliding_box",creditPackageSel:"a.credit_package",paymentFormContainerId:"payment_form_holder",hiddenInputSel:".hidden_field",containerId:"inner_container",packageSelectionTitleId:"package_selection_title",hiddenTitleCls:"hidden",processingStateCls:"processing",
mainPageId:"popup_box_container",commercialPageId:"commercial_page",commercialPageTemplateClass:".commercial_page",secureIframeIdPrefix:"secure_payment_frame",secureIframeClass:"secure_payment_frame",firstBillContainerId:"overlay_firstbill",reOpen:false,loaderSel:".loader",inProgressPageTemplateSel:".in_progress_page",forcedScrollTopValue:380,scrollDuration:1,getInProgressPageRoute:"FirstBillOverlay/GetPendingBlock",validationClass:"validation",storedToken:undefined,_activeBlockIndex:0,_firstBillController:undefined,
_selectListClasses:{},_isShowCommercialPopupEnabled:true,_secureFrameEl:undefined,_loaderEl:undefined,_isInprogressPageShown:false,_iframeLoadingMask:undefined,init:function(el,config){JSM.overlay.FirstBill.superclass.init.call(this,el,config);this.addEvents(JSM.overlay.FirstBill.EVENT_SELECTLIST_ITEM_CLICK,JSM.overlay.FirstBill.EVENT_IFRAME_REMOVE_FROM_DOM,JSM.overlay.FirstBill.EVENT_IFRAME_EMBED,JSM.overlay.FirstBill.EVENT_CHANGE_PAGE);if(this.reOpen){this.renderContent(this.windowTemplate);this.getElementsToBind();
this._setController()}},changeElementClass:function(){var method=this._firstBillContainerEl.hasClass(this.validationClass)?"removeClass":"addClass";this._firstBillContainerEl[method](this.validationClass)},changeTitle:function(){var method;this._packageSelectionTitleEl.select("div").each(function(el){method=el.hasClass(this.hiddenTitleCls)?"removeClass":"addClass";el[method](this.hiddenTitleCls)},this)},embedSecureIframe:function(secureFrameSrc){if(!(this._secureFrameEl instanceof Ext.Element)){this._secureFrameEl=
Ext.DomHelper.append(this.paymentFormContainerId,{tag:"iframe",id:this.setCurrentIframeId(),cls:this.secureIframeClass,src:secureFrameSrc,style:this._calculateSecureFormSize(),allowtransparency:true},true);this.fireEvent(JSM.overlay.FirstBill.EVENT_IFRAME_EMBED,{scope:this});return true}return false},_calculateSecureFormSize:function(){return"width: "+Ext.fly(this.overlayBlockId).getWidth()+"px; "+"height: "+this._paymentFormContainerEl.getStyle("maxHeight")},embedSecureIframeFailed:function(){},
displayIframe:function(){TweenMax.to(this._paymentFormContainerEl.dom,this.animateDuration,{height:this._paymentFormContainerEl.getStyle("maxHeight"),display:"block",visibility:"visible",onComplete:function(){this.scrollToPaymentForm(this._paymentFormContainerEl)},onCompleteScope:this})},slideBlock:function(){var currentItem=this._slideBlockItems.item(this._activeBlockIndex);if(currentItem&&currentItem.next()){this._activeBlockIndex++;this._animateBoxSliding(currentItem,false)}else{this._activeBlockIndex=
0;this._animateBoxSliding(this._slideBlockItems.item(this._activeBlockIndex),true)}},setPackageSelected:function(packageEl){var self=this;if(packageEl){this._creditPackages.each(function(){this.addClass(self.inactivePackageCls).removeClass(self.selectedPackageCls)});packageEl.addClass(this.selectedPackageCls).removeClass(this.inactivePackageCls)}},isPackageSelected:function(packageEl){if(packageEl instanceof Ext.Element)return packageEl.hasClass(this.selectedPackageCls);return false},_setAllPackagesUnSelected:function(){var self=
this;this._creditPackages.each(function(){this.removeClass(self.inactivePackageCls).removeClass(self.selectedPackageCls)})},_setController:function(){if(!(this._firstBillController instanceof JSM.controller.FirstBillController))this._firstBillController=new JSM.controller.FirstBillController({hasContent:this.mustGetContent,reOpen:this.reOpen,storedToken:this.storedToken,el:this.element,items:{"FirstBillOverlay":{component:this,listeners:{"iframe-embed":"onIframeEmbed","iframe-remove-from-dom":"onIframeRemoveFromDOM",
"change-page":"onPageChange"}}}});else{this._firstBillController.unbind();this._firstBillController.removeComponent(this.name);delete this._firstBillController;this._setController()}},scrollToPaymentForm:function(el){TweenLite.to(this.element.dom,this.scrollDuration,{scrollTo:{y:this.forcedScrollTopValue||el.getTop()},ease:Expo.easeOut})},_animateBoxSliding:function(el,slideToZero){var slideTo=(slideToZero?0:-el.getWidth())+"px";TweenMax.to(this._packagesContainerEl.dom,this.animateDuration,{css:{left:slideTo}})},
_contentDisplayed:function(){this.getElementsToBind();this._setController()},getElementsToBind:function(){this._packageSelectionTitleEl=Ext.get(this.packageSelectionTitleId);this._packagesContainerEl=Ext.get(this.packagesContainerId);this._creditPackages=this.element.select(this.creditPackageSel);this._paymentFormContainerEl=Ext.get(this.paymentFormContainerId);this._slideBlockItems=this.element.select(this.slidingBoxSel);this._firstBillContainerEl=Ext.get(this.firstBillContainerId)},hide:function(){this.element.scrollTo("top",
0);if(!this.isShowCommercialPopupEnabled()){JSM.overlay.FirstBill.superclass.hide.apply(this,arguments);this.unbind()}else this.hideElement();this._isInprogressPageShown=false},hideElement:function(callback){TweenMax.to(this.element.dom,this.animateDuration,{alpha:0,onComplete:callback||this._hideElementComplete,onCompleteScope:this})},_hideElementComplete:function(){if(this.isShowCommercialPopupEnabled())this._swapContentToCommercialPage()},_isInprogress:function(){return this._isInprogressPageShown},
_swapContentToCommercialPage:function(){this._setAllPackagesUnSelected();var HTMLContent=this.element.select(this.commercialPageTemplateClass).item(0).dom.innerHTML,HTMLContent=(new Ext.Template(HTMLContent)).apply();this.changePage(HTMLContent);this.enableShowCommercialPopup(false)},enableShowCommercialPopup:function(enable){this._isShowCommercialPopupEnabled=enable},isShowCommercialPopupEnabled:function(){return this._isShowCommercialPopupEnabled},removeSecureIframeFromDOM:function(){var currentIframeEl=
this.getSecureIframeEl();if(currentIframeEl){currentIframeEl.remove();delete this._secureFrameEl;this.fireEvent(JSM.overlay.FirstBill.EVENT_IFRAME_REMOVE_FROM_DOM,{scope:this});return true}return false},getSecureIframeEl:function(){return Ext.get(this.getCurrentIframeId())},getCurrentIframeId:function(){return this._currentIframeId},setCurrentIframeId:function(){return this._currentIframeId=Chaos.generateId(this.secureIframeIdPrefix)},refreshSecureIframe:function(){this.removeSecureIframeFromDOM()},
showInProgressPage:function(){this._getInProgressHTML();this._isInprogressPageShown=true;this.enableShowCommercialPopup(false)},_getInProgressHTML:function(){if(!this._inProgressHTML)Chaos.Ajax.request({method:"GET",type:"json",scope:this,url:this.getInProgressPageUrl(),success:this.getInProgressPageSuccess,error:this.getInProgressPageError,failure:this.getInProgressPageError});else this.changePage(this._inProgressHTML)},getInProgressPageUrl:function(){return Chaos.getUrl(this.getInProgressPageRoute)},
getInProgressPageSuccess:function(ev){this._inProgressHTML=ev.json.data.content;if(this._inProgressHTML)this.changePage(this._inProgressHTML)},getInProgressPageError:function(){},changePage:function(HTMLContent){if(HTMLContent){this._isInprogressPageShown=false;this.removeSecureIframeFromDOM();this.hideElement(function(){this.renderContent(HTMLContent);if(!this.isVisible()){this.show();this.fireEvent(JSM.overlay.FirstBill.EVENT_CHANGE_PAGE,{scope:this})}else{var self=this;this.element.show({duration:this.animateDuration,
callback:function(){self.fireEvent(JSM.overlay.FirstBill.EVENT_CHANGE_PAGE,{scope:self})}})}this.bindCloseButton();this._creditPackages=this.element.select(this.creditPackageSel);this._paymentFormContainerEl=Ext.get(this.paymentFormContainerId);this._loaderEl=this.element.select(this.loaderSel).item(0)})}},displayLoader:function(display){this.getLoaderEl().display(display?"block":"none")},getLoaderEl:function(){if(!(this._loaderEl instanceof Ext.Element))this._loaderEl=this.element.select(this.loaderSel).item(0);
return this._loaderEl},showWindow:function(HTMLcontent){this._unsetElements();this.renderContent(HTMLcontent);this.getElementsToBind();this.enableShowCommercialPopup(true);this.disableScroll(true);this._setController();this.show()},_unsetElements:function(){delete this._loaderEl;delete this._secureFrameEl;delete this._packageSelectionTitleEl;delete this._packagesContainerEl;delete this._creditPackages;delete this._paymentFormContainerEl;delete this._slideBlockItems;delete this._firstBillContainerEl},
showLoadingMask:function(){if(!(this._iframeLoadingMask instanceof Chaos.Mask))this._iframeLoadingMask=new Chaos.Mask(this.element,{appendTo:this._paymentFormContainerEl,tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',maskClass:"loading-iframe-mask",top:381,left:0,height:660,maskOpacity:1,useCursor:true,defaultZindex:9,insertionMethod:"append"});this._iframeLoadingMask.show()},hideLoadingMask:function(){if(this._iframeLoadingMask instanceof Chaos.Mask)this._iframeLoadingMask.hide()},bind:function(){JSM.overlay.FirstBill.superclass.bind.call(this)},
unbind:function(){JSM.overlay.FirstBill.superclass.unbind.call(this);if(this._firstBillController){this._firstBillController.unbind();this._firstBillController.removeComponent(this.name);delete this._firstBillController}}});Ext.namespace("JSM.overlay");JSM.overlay.ForgotPassword=function(el,config){JSM.overlay.ForgotPassword.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.ForgotPassword,JSM.Overlay,{name:"ForgotPassword",getContentRoute:"Overlay/GetForgotPasswordBlock",overlayId:"overlay",formId:"forgotPassForm",cancelButtonId:"cancel_forgot_password",formErrorSel:".warning_tag",autoDestroy:true,autoDestroyElement:false,isScrollingDisabled:true,usernameInputId:"username",emailId:"email",successMessageId:"forgotPassForm_saved",maxEmailCharLimitNumber:255,maxCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",
captchaImgId:"captchaimg",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",overlayBlockId:"login_forgot_password",_forgotPassForm:undefined,init:function(el,config){if(!JSM.Session.checkCookieChanges())return;this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"");JSM.overlay.ForgotPassword.superclass.init.call(this,el,config);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){Ext.fly(this.usernameInputId).focus();this.cancelButtonEl=
Ext.get(this.cancelButtonId);this.cancelButtonEl.on("click",this.onCancelButtonClick,this);this._successMessageEl=Ext.get(this.successMessageId);this.setInstances()},setInstances:function(){this._forgotPassForm=new JSM.form.Form(this.formId,{scope:this,formErrorSel:this.formErrorSel,isAjax:true,isBackConnNeeded:true,backConnCallback:"passwordForm.backConnRequestCallback",requestParams:["username","email","form_token","captcha","captcha_id"],disableSubmitOnSubmit:true,hasCaptcha:true,useModalForGeneralErrors:false,
errorHideDuration:0,showErrorsPos:"right",captchaConfig:{containerId:this.captchaBlockId,captchaImg:this.captchaImgId,captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:this.captchaInputId},success:this.successPassChange});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.usernameInputId,isShowCounter:false,charInfoId:this.hintContainerId,
isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._emailCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxEmailCharLimitNumber,hasWarningLimit:false,inputId:this.emailId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._emailCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,
this);this.captchaBlockEl=Ext.get(this.captchaBlockId);this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,hasWarningLimit:false,inputId:this.captchaInputId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);this._forgotPassForm.on("inputFocus",
this.onInputFocus,this);Chaos.Broadcaster.on("xdomain-response",this._forgotPassForm.xDomainCallback,this._forgotPassForm)},onInputFocus:function(){if(this._successMessageEl&&this._successMessageEl.isVisible())this._successMessageEl.setStyle({opacity:0,display:"none"})},onCancelButtonClick:function(ev){ev.preventDefault();this._forgotPassForm.setSubmitEnabled(false);this.destroyForm();this.hide(this.showDuration,function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN,this)},true,
this)},hide:function(duration,callback,keepOverlay,callbackScope){if(this._forgotPassForm)this._forgotPassForm.setSubmitEnabled(false);JSM.overlay.ForgotPassword.superclass.hide.call(this,duration,callback,keepOverlay,callbackScope)},destroyForm:function(){if(this._forgotPassForm){Chaos.Broadcaster.un("xdomain-response",this._forgotPassForm.xDomainCallback,this._forgotPassForm);this._forgotPassForm.un("inputFocus",this.onInputFocus,this);this._forgotPassForm.hideAllErrors();this._forgotPassForm.hideHint();
this._forgotPassForm.unbind();this._forgotPassForm.destroy();this._forgotPassForm=undefined}},successPassChange:function(){this.element.select("input[type=text]").each(function(){if(this.dom.value!="")this.dom.value=""});this._successMessageEl.setStyle({opacity:0,display:"block"}).animate({opacity:{to:1,from:0}},0.3,null)},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.usernameInputId,true);this._forgotPassForm.getHintCmp().show();this._forgotPassForm.getHintCmp().removeClass(this.captchaHintCls)},
onMaxEmailCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.emailId,true);this._forgotPassForm.getHintCmp().show();this._forgotPassForm.getHintCmp().removeClass(this.captchaHintCls)},onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._forgotPassForm.showHint(this.captchaInputId,true);this._forgotPassForm.getHintCmp().show();this._forgotPassForm.getHintCmp().addClass(this.captchaHintCls)},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,
{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},bind:function(){JSM.overlay.ForgotPassword.superclass.bind.call(this)},unbind:function(){this.cancelButtonEl.un("click",this.onCancelButtonClick,this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);this.destroyForm();this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._emailCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxEmailCharLimitReached,this);this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);JSM.overlay.ForgotPassword.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay");JSM.overlay.FreeChat=function(el,config){JSM.overlay.FreeChat.superclass.constructor.call(this,el,config)};JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW="close-chat-multi-window";JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT="open-chat";
JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT="close-chat";JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK="applet-recommender-click";JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY="set-model-from-history";JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_START="private-start";JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_END="private-end";JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY="memberapplet-ready";JSM.overlay.FreeChat.TYPE_FLASH_ESCAPE_CALL="escape";
Chaos.extend(JSM.overlay.FreeChat,JSM.Overlay,{name:"FreeChat",headerId:"header",headerHeight:40,headerBottomMargin:10,headerSearchBarSel:"header_search_bar",innerContainerId:"inner_container",logoId:"logo",footerId:"footer",footerShowCls:"footer_show",footerTopLinkSel:".footer_link",footerHeight:148,chatId:"chatapplet",titleSel:".freechat_title",chatPageId:"chat.performer",overlayId:"overlay",pulseLayerSel:".pulse_layer",topPosition:0,leftPosition:0,overlayTopPosition:0,overlay:"",duration:0.7,showDuration:0.01,
hideElement:true,isOverlayOpened:false,isMinimized:false,appletInnerBorder:1,loadDataSel:".data",loadDataObject:{},defaultBodyWidth:null,isOnPrivate:false,isOverlay:true,topWarningsId:"top_warnings",memberAppletEl:undefined,memberAppletContainer:undefined,memberAppletUrl:"",memberAppletParams:undefined,memberAppletFlashvars:undefined,memberAppletAttributes:undefined,defaultWidthNormal:1140,defaultWidthSmall:990,defaultWidthNormalNoChat:924,defaultWidthSmallNoChat:749,defaultHeightNormal:601,defaultHeightSmall:470,
minimumWidth:990,newAppletHeight:470,recommenderWidth:174,removeAppletCounter:10,chatCounter:0,currentFreeChatTop:0,metroModeHistoryBtnWidth:40,metroModeScrollWidth:22,chatMode:"",chatMinimumWidth:240,maxWindowWidth:null,objectMargin:1,privateButtonHeight:38,isPrivateButtonVisible:true,resizeEnabled:true,fullSizeCls:"full_size",streamRatio:4/3,backConnRequestTimeOut:undefined,backConnTimeOutDelay:10,hideOverlayOnClose:true,cookieExpiration:2592E3,delayedResizeTask:undefined,delayedResizeTime:1,flashVarsNeedRefresh:["performerid",
"pid","sbip","sbhash","proxyip","category","tags","lowcamfeed","ishd","ishq","isFavorite","teaserduration","teaseraudio","teaserurl","teaservideoaudio","teasertype"],showChatEnabled:false,showFlashMessageTimeout:3E3,flashMessageBlockId:"refresh_flash",flashGetConnectionParamsFn:"getConnectionParams",_containerOriginalStyle:undefined,_showFlashMessageTask:undefined,init:function(el,config){this.memberAppletEl=Ext.get(this.chatId);this.memberTitleEl=this.element.prev(this.titleSel);JSM.overlay.FreeChat.superclass.init.call(this,
el,config);this._containerOriginalStyle={};this._containerOriginalStyle.width=this.element.getStyle("width");this._containerOriginalStyle.height=this.element.getStyle("height");this.headerHeight=Ext.get(this.headerId).getHeight();this.footerHeight=Ext.get(this.footerId).getHeight();this.defaultBodyWidth=Ext.getBody().getWidth();this.defaultBodyHeight=Ext.getBody().getHeight();this.memberAppletUrl=Chaos.Config.get("memberAppletUrl");this.memberAppletLibraryUrl=Chaos.Config.get("memberAppletLibraryUrl");
this.memberAppletContainerUrl=Chaos.Config.get("memberAppletContainerUrl");this.memberAppletFlashvars=Chaos.Config.get("memberAppletFlashvars");this.memberAppletParams=Chaos.Config.get("memberAppletParams");this.memberAppletAttributes=Chaos.Config.get("memberAppletAttributes");this.memberAppletContainer=Ext.get(this.chatId).dom;this._topWarningsEl=Ext.get(this.topWarningsId);if(this.isChatPage()){this.isOverlayOpened=true;this.resizeFlashApplet();this.loadFlashAndPlay()}Chaos.addEvents(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW,
JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY);var randomPerformerShown=Chaos.getMeta("randomPerformerShown");if(randomPerformerShown!==null)location.href=location.href+"#"+randomPerformerShown;JSM.component.UrlAction.registerAction("chat",this.onOpenChatOnLoad,this)},_showFlashMessage:function(){if(!Ext.isIE7&&
this.backConnPlugin.isFlashMethod(this.flashGetConnectionParamsFn))this.element.display("block");else if(Ext.isIE7&&JSM.util.Flash.getFlashVersion()!=="0,0,0")this.element.display("block");else this.element.display("none");if(!this._flashMessageBlockEl.isVisible())this._flashMessageBlockEl.display("block")},_hideFlashMessage:function(){if(this._showFlashMessageTask instanceof Ext.util.DelayedTask){this._showFlashMessageTask.cancel();this._flashMessageBlockEl.display("none")}},setDefaultFlashVars:function(){for(var i=
0;i<this.flashVarsNeedRefresh.length;i++)this.memberAppletFlashvars[this.flashVarsNeedRefresh[i]]="";this.memberAppletFlashvars.maxWidth=Ext.getBody().getWidth();this.memberAppletFlashvars.maxWindowWidth=screen.width;this.memberAppletFlashvars.objectID=this.chatId},onOpenChatOnLoad:function(hashArray){this.onCallShowChat(hashArray[1])},getNextModel:function(modelName){this.currentModelName=modelName;this._addHistoryEntry("open");Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,
{scope:this,modelName:modelName})},setNextModel:function(stateObj){var time=new Date;JSM.Util.console("error","forceConsole","setNextModel        : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","stateObj.name       : ",stateObj.name);try{this.backConnPlugin.getConnectionParams(stateObj.name,Chaos.getMeta("node"),"getFlashVarsForNextPerformer")}catch(exception){throw new JSM.exception(exception,this.name,new Error);
}Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,{scope:this,stateObject:stateObj})},checkDownloadedApplets:function(appletName){if(appletName.match("memberapplet.swf"))this.memberAppletFlashvars.iscached=1},getFlashVarsForNextPerformer:function(flashVars){var data={};if(typeof obj!="object")data=Ext.decode(flashVars);else data=flashVars;this.setDefaultFlashVars();for(var j in data)this.memberAppletFlashvars[j.replace("_","")]=data[j];if(typeof this.memberAppletContainer.nextPerformer==
"function"){var time=new Date;JSM.Util.console("error","forceConsole","nextPerformer       : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.nextPerformer(this.memberAppletFlashvars)}},onCallShowChat:function(target,status,link){this.showChatEnabled=true;this.currentModelName=typeof target=="string"?target:target.name;if(this.currentModelName)this.show(this.showDuration,
function(){this.showChat(this.currentModelName,status,link,this.keepOverlay)},this)},showChat:function(target,status,link,keepOverlay,data){if(this.showChatEnabled){if(!JSM.Session.checkCookieChanges()){this.unbindEventHandlers();return}Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,this);this.keepOverlay=keepOverlay||false;this.minimizeApplet();if(link!=undefined){link.select(this.pulseLayerSel).remove();var dataContainer=Ext.get(link).select(".data").item(0);if(dataContainer)this.loadDataObject=
Ext.decode(dataContainer.dom.innerHTML)}if(data)this.loadDataObject=Ext.decode(data);if(target!=undefined)this.isOverlayOpened=true;if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer.setLoading=="function"){JSM.Util.console("error","forceConsole","setLoading          : ",target);this.memberAppletContainer.setLoading({performerid:target,qualitycategory:this.loadDataObject.qualitycategory})}this.delayedResizeTask=new Ext.util.DelayedTask(function(){var time=new Date;JSM.Util.console("error",
"forceConsole","delayedResizeTask   : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());this.delayedResizeTask.cancel();if(this.memberAppletEl.getWidth()==1){this.resizeFlashApplet();this.delayedResizeTask.delay(this.delayedResizeTime*1E3)}},this);this.delayedResizeTask.delay(this.delayedResizeTime*1E3);var requestToBackConn=new Ext.util.DelayedTask(function(){var time=new Date;JSM.Util.console("error","forceConsole","getConnectionParams : ",time.getHours()+
":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());try{this.backConnPlugin.getConnectionParams(target,Chaos.getMeta("node"),"loadFlashAndPlay")}catch(exception){throw new JSM.exception(exception,this.name,new Error);}if(this._showFlashMessageTask instanceof Ext.util.DelayedTask&&!this.isChatPage())this._showFlashMessageTask.delay(this.showFlashMessageTimeout)},this);requestToBackConn.delay(0);this.backConnRequestTimeOut=new Ext.util.DelayedTask(function(){var time=new Date;JSM.Util.console("error",
"forceConsole","TO loadFlashAndPlay : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","performer_id: ",target,"node_id: ",Chaos.getMeta("node"));this.loadFlashAndPlay({performer_id:target,node_id:Chaos.getMeta("node")})},this);this.backConnRequestTimeOut.delay(this.backConnTimeOutDelay*1E3)}},minimizeApplet:function(){if(this.isOverlay)this.element.setStyle(this._containerOriginalStyle);else this.element.setStyle("z-index",
1);JSM.util.Flash.minimize(this.chatId)},isResizeNeeded:function(){var memberAppletSizeCookie=Chaos.Cookie.get("memberAppletSize");if(memberAppletSizeCookie!=undefined)this.resizeEnabled=memberAppletSizeCookie=="normalSize"?false:true},loadFlashAndPlay:function(obj){var time=new Date;JSM.Util.console("error","forceConsole","loadFlashAndPlay    : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());if(Chaos.isDefined(this.backConnRequestTimeOut)){this.backConnRequestTimeOut.cancel();
this.backConnRequestTimeOut=undefined}if(this.isOverlayOpened||this.isChatPage()){if(obj){var data={};if(typeof obj!="object")data=Ext.decode(obj);else data=obj;JSM.Util.console("error","forceConsole","sb_hash             : ",data.sb_hash);JSM.Util.console("error","forceConsole","params              : ",data);this.setDefaultFlashVars();for(var j in data)this.memberAppletFlashvars[j.replace("_","")]=data[j]}this.memberAppletFlashvars.maxWidth=Ext.getBody().getWidth();this.memberAppletFlashvars.maxWindowWidth=
screen.width;this.memberAppletFlashvars.sessionid=Chaos.Config.get("sessionIdJasmin1");this.memberAppletFlashvars.jsm2session=Chaos.Config.get("sessionId");this.memberAppletFlashvars.issearchpage=parseInt(Chaos.getMeta("isSearchPage"));for(var key in this.loadDataObject){var varKey=key.replace(/\_/g,"");if(this.memberAppletFlashvars.hasOwnProperty(varKey))this.memberAppletFlashvars[varKey]=this.loadDataObject[key]}if(this.isChatPage()){this.task={run:function(){this.memberAppletContainer=Ext.get(this.chatId).dom;
if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer.setParams=="function"){var time=new Date;JSM.Util.console("error","forceConsole","setParams           : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.setParams(this.memberAppletFlashvars);this.runner.stop(this.task)}},scope:this,interval:200};this.runner=new Ext.util.TaskRunner;
if(this.runner!=undefined)this.runner.start(this.task)}else if(this.chatCounter<this.removeAppletCounter&&this.chatCounter>0){var time=new Date;JSM.Util.console("error","forceConsole","nextPerformer       : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.nextPerformer(this.memberAppletFlashvars);this.chatCounter++}else{this.task={run:function(){this.memberAppletContainer=
Ext.get(this.chatId).dom;if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer.setParams=="function"){var time=new Date;JSM.Util.console("error","forceConsole","setParams           : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.setParams(this.memberAppletFlashvars);this.runner.stop(this.task);this.chatCounter++}},
scope:this,interval:100};this.runner=new Ext.util.TaskRunner;if(this.runner!=undefined)this.runner.start(this.task)}}if(!this.isChatPage())this.disableScroll(true);this._hideFlashMessage();Ext.getBody().focus()},setResizeParams:function(object){var time=new Date;JSM.Util.console("error","forceConsole","setResizeParams     : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());this.setCookieToStoreFlashSize(object.resizeEnabled);this.chatMinimumWidth=object.chatMinimumWidth;
this.chatMode=object.chatMode;this.streamRatio=object.streamRatio;this.objectMargin=object.objectMargin;this.privateButtonHeight=object.privateButtonHeight;this.isPrivateButtonVisible=object.forceGoPrivateButtonDisabled=="0"?true:false;if((this.resizeEnabled!=object.resizeEnabled||Ext.fly(this.chatId).getStyle("width")=="1px")&&(this.isVisible()||Ext.getBody().id=="chat.performer")){this.resizeEnabled=object.resizeEnabled;this.backConnPlugin.setSoParams("flashsize",object.resizeEnabled);this.resizeFlashApplet();
if(this.isChatPage())Chaos.WinMgr.hideGroup("header")}},resizeFlashApplet:function(){if(JSM.Overlay.getCurrent().name!==this.name&&!this.isConstant){JSM.Overlay.setCurrent(this);this.bind()}if(this.showChatEnabled){this.isResizeNeeded();this.element.removeClass(this.fullSizeCls);if(this.isOverlayOpened&&!this.isMinimized){var newAppletHeight,newAppletWidth,bodyWidth=JSM.Util.getBrowserWidth(),bodyHeight=JSM.Util.getBrowserHeight(),browserRatio=bodyWidth/bodyHeight;if(this.resizeEnabled){if(this.memberTitleEl!=
null)this.memberTitleEl.setDisplayed(false);if(browserRatio<1.63){newAppletWidth=bodyWidth<=this.minimumWidth?this.minimumWidth:bodyWidth;var streamWidth=newAppletWidth-this.chatMinimumWidth-this.objectMargin-this.appletInnerBorder*2;var streamHeight=Math.floor(streamWidth/this.streamRatio);if(streamHeight>bodyHeight-this.objectMargin-this.privateButtonHeight-this.appletInnerBorder*2)newAppletHeight=bodyHeight;else newAppletHeight=streamHeight+this.objectMargin+this.privateButtonHeight+this.appletInnerBorder*
2;if(this.isOnPrivate||!this.isPrivateButtonVisible)newAppletHeight=newAppletHeight-this.privateButtonHeight-this.appletInnerBorder*2;this.leftPosition=0;if(!this.isChatPage())this.topPosition=Math.floor((bodyHeight-newAppletHeight)/2);if(JSM.Util.metroDetect("htmlfile")){this.topPosition=Math.floor((bodyHeight-(newAppletHeight-this.metroModeHistoryBtnWidth*2-this.metroModeScrollWidth))/2);this.leftPosition=this.leftPosition+this.metroModeHistoryBtnWidth;newAppletWidth=newAppletWidth-this.metroModeHistoryBtnWidth*
2-this.metroModeScrollWidth;newAppletHeight=newAppletHeight-this.metroModeHistoryBtnWidth*2-this.metroModeScrollWidth}}else if(JSM.Util.metroDetect("htmlfile")){newAppletWidth=bodyWidth-this.metroModeHistoryBtnWidth*2-this.metroModeScrollWidth;newAppletHeight=bodyHeight-this.metroModeHistoryBtnWidth*2-this.metroModeScrollWidth;this.leftPosition=this.metroModeHistoryBtnWidth;this.topPosition=(bodyHeight-newAppletHeight)/2}else{newAppletWidth=bodyWidth;newAppletHeight=bodyHeight;this.leftPosition=0;
this.topPosition=0}if(this.isChatPage()){if(JSM.Util.metroDetect("htmlfile")){newAppletWidth=newAppletWidth+2*this.metroModeHistoryBtnWidth+this.metroModeScrollWidth;newAppletHeight=newAppletHeight+2*this.metroModeHistoryBtnWidth+this.metroModeScrollWidth}this.element.addClass(this.fullSizeCls);if(newAppletHeight>=bodyHeight-(this.headerHeight+this.headerBottomMargin))newAppletHeight=bodyHeight-(this.headerHeight+this.headerBottomMargin);if(this._topWarningsEl.isVisible(true))newAppletHeight=newAppletHeight-
Ext.get("top_warnings").getHeight()}}else{if(this.memberTitleEl!=null)this.memberTitleEl.setDisplayed(true);this.leftPosition=0;var minScreenHeight=this.defaultHeightNormal+this.headerHeight+this.footerHeight+this.headerBottomMargin*2;newAppletWidth=bodyWidth<1263?this.defaultWidthSmall:this.defaultWidthNormal;if(bodyWidth<1263||bodyHeight<minScreenHeight)newAppletHeight=this.defaultHeightSmall;else newAppletHeight=this.defaultHeightNormal;if(!this.isChatPage()){this.leftPosition=Math.floor((bodyWidth-
newAppletWidth)/2)+3;this.topPosition=Math.floor((bodyHeight-newAppletHeight)/2)}}this.setPosition(this.leftPosition,this.topPosition);newAppletHeight=newAppletHeight<this.defaultHeightSmall?this.defaultHeightSmall:newAppletHeight;this.memberAppletEl.setStyle({width:newAppletWidth+"px",height:newAppletHeight+"px"});this.element.setStyle({width:newAppletWidth+"px",height:newAppletHeight+"px"});if(this.memberTitleEl!=null)this.memberTitleEl.setStyle({width:newAppletWidth+"px"});if(Ext.isIE7)this.overlay.setStyle({width:Ext.getBody().getWidth()+
"px",height:Ext.getBody().getHeight()+"px"})}}},setCookieToStoreFlashSize:function(isFullSized){var appletSize=isFullSized==true?"fullSize":"normalSize";Chaos.Cookie.set("memberAppletSize",appletSize,this.cookieExpiration,"/")},isChatPage:function(){return JSM.Util.isCurrentPage(this.chatPageId)},hide:function(duration,callback,keepOverlay,callbackScope){this.showChatEnabled=false;this.resetChatApplet();JSM.overlay.FreeChat.superclass.hide.call(this,duration,callback,keepOverlay,callbackScope)},onEscKeypress:function(ev){if(ev.keyCode==
27)if(!this.isChatPage())this.closeChat()},onClosePopupClick:function(ev){this.closeChat(ev)},onClosePopup:function(ev){if(typeof ev=="string"&&ev==JSM.overlay.FreeChat.TYPE_FLASH_ESCAPE_CALL){this.memberAppletEl.blur();if(!this.keepOverlay)this.closeChat();else this.hide(0,function(){if(this.keepOverlay){this.resetChatApplet();this.onChatClosed();this.keepOverlay=false}},this.keepOverlay,this)}else this.closeChat()},closeChat:function(){if(this.isOnPrivate==false){this.showChatEnabled=false;if(this.isVisible()){this._hideFlashMessage();
this.isOverlayOpened=false;Ext.fly(this.chatId).blur();Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,this);if(typeof $FLASH!="undefined")if(typeof $FLASH.mouseWheelTrap!="undefined")$FLASH.mouseWheelTrap.enabled=false}this.hide(0,function(){if(this.keepOverlay){this.onChatClosed();this.keepOverlay=false}else this.disableScroll(false)},this.keepOverlay,this)}},resetChatApplet:function(){var flashContainer=Ext.get(this.chatId).parent();if(this.chatCounter==this.removeAppletCounter){this.chatCounter=
0;Ext.fly(this.chatId).remove();flashContainer.createChild('<div id="'+this.chatId+'"></div>');flashContainer.display("block");this.element.setStyle({height:"1px",width:"1px"});this.setDefaultFlashVars();swfobject.embedSWF(this.memberAppletContainerUrl,this.chatId,"1","1","9.0.0","expressInstall.swf",this.memberAppletFlashvars,this.memberAppletParams,this.memberAppletAttributes);this.memberAppletContainer=Ext.get(this.chatId).dom;this.memberAppletEl=Ext.get(this.chatId)}else{this.minimizeApplet();
if(typeof this.memberAppletContainer.hideChat=="function")this.memberAppletContainer.hideChat()}if(Ext.isIE)Ext.fly(window).focus();else if(Ext.isSafari)Ext.fly(window).blur()},onPrivateClick:function(){this.exitOnOverlayClick=false;this.exitOnEsc=false;this.isOnPrivate=true;this.previousUrl=this.getCurrentUrl();this.keepOverlay=false;Ext.get(this.footerId).select(this.footerTopLinkSel).each(function(){this.set({target:"_blank"})});this.resizeFlashApplet();Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_START,
this)},onPrivateEndClick:function(){this.previousUrl=this.getCurrentUrl();this.keepOverlay=false;this.exitOnOverlayClick=false;this.exitOnEsc=false;this.isOnPrivate=false;this.resizeFlashApplet();Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_END,this)},onShowChatFromFavorites:function(modelName){this.keepOverlay=true;this.onCallShowChat(modelName,undefined,undefined,this.keepOverlay)},onChatClosed:function(){Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW)},onBeforeUnload:function(){if(typeof this.memberAppletContainer.closeChat==
"function")this.memberAppletContainer.closeChat()},setUrl:function(){return"#chat|"+this.getNameForHistory()},getNameForHistory:function(){return this.currentModelName},setFreeChatScroll:function(ev){if(this.showChatEnabled)if(JSM.Util.isCurrentPage("chat.performer")&&ev.isDisabled==false){Ext.fly(this.chatId).blur();Ext.getBody().focus()}else if(!this.isChatPage()&&ev.isDisabled==false)this.disableScroll(true)},setBackspaceTrap:function(enabled){if(!this.showChatEnabled&&enabled)if(typeof $FLASH!=
"undefined")if(typeof $FLASH.backspaceTrap!="undefined")$FLASH.backspaceTrap.enabled=false},disableScroll:function(disable){JSM.overlay.FreeChat.superclass.disableScroll.call(this,disable)},appletReadyHandler:function(){Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY,{scope:this})},bind:function(){JSM.overlay.FreeChat.superclass.bind.call(this);Ext.fly(window).on("resize",this.resizeFlashApplet,this);Ext.fly(window).on("beforeunload",this.onBeforeUnload,this)},unbind:function(){JSM.overlay.FreeChat.superclass.unbind.call(this);
Ext.fly(window).un("resize",this.resizeFlashApplet,this);Ext.fly(window).un("beforeunload",this.onBeforeUnload,this)}});Ext.namespace("JSM.overlay");JSM.overlay.FreeChat2=function(el,config){JSM.overlay.FreeChat2.superclass.constructor.call(this,el,config)};JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW="close-chat-multi-window";JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT="open-chat";JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT="close-chat";
JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK="applet-recommender-click";JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY="set-model-from-history";JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_START="private-start";JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_END="private-end";JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY="memberapplet-ready";JSM.overlay.FreeChat.TYPE_FLASH_ESCAPE_CALL="escape";JSM.overlay.FreeChat.LAYOUT_MODE_FULL="full";
JSM.overlay.FreeChat.LAYOUT_MODE_FULLSCREEN="fullScreen";JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_TEASER_LEFT="private-teaser-left";
Chaos.extend(JSM.overlay.FreeChat2,JSM.Overlay,{name:"FreeChat",headerId:"header",headerHeight:40,headerBottomMargin:10,headerSearchBarSel:"header_search_bar",innerContainerId:"inner_container",logoId:"logo",footerId:"footer",footerShowCls:"footer_show",footerTopLinkSel:".footer_link",footerHeight:148,chatId:"chatapplet",titleSel:".freechat_title",chatPageId:"chat.performer",overlayId:"overlay",pulseLayerSel:".pulse_layer",topPosition:0,leftPosition:0,overlayTopPosition:0,overlay:"",duration:0.7,
showDuration:0.01,hideElement:true,isOverlayOpened:false,isMinimized:false,loadDataSel:".data",loadDataObject:{},isOnPrivate:false,isOverlay:true,topWarningsId:"top_warnings",chatTopValue:0,memberAppletEl:undefined,memberAppletContainer:undefined,memberAppletUrl:"",memberAppletParams:undefined,memberAppletFlashvars:undefined,memberAppletAttributes:undefined,removeAppletCounter:10,chatCounter:0,currentFreeChatTop:0,metroModeHistoryBtnWidth:40,metroModeScrollWidth:22,chatMode:"",isPrivateButtonVisible:true,
resizeEnabled:true,backConnRequestTimeOut:undefined,backConnTimeOutDelay:10,hideOverlayOnClose:true,cookieExpiration:2592E3,flashVarsNeedRefresh:["performerid","pid","sbip","sbhash","proxyip","category","tags","lowcamfeed","ishd","ishq","isFavorite","teaserduration","teaseraudio","teaserurl","teaservideoaudio","teasertype"],showChatEnabled:false,showFlashMessageTimeout:3E3,flashMessageBlockId:"refresh_flash",flashGetConnectionParamsFn:"getConnectionParams",_containerOriginalStyle:{},_showFlashMessageTask:undefined,
_escEnabled:true,registerToWinMgr:true,init:function(el,config){this.memberAppletEl=Ext.get(this.chatId);this.memberTitleEl=this.element.prev(this.titleSel);JSM.overlay.FreeChat2.superclass.init.call(this,el,config);this._containerOriginalStyle={width:this.element.getWidth(),height:this.element.getHeight()};this.headerHeight=Ext.fly(this.headerId).getHeight();this.footerHeight=Ext.fly(this.footerId).getHeight();this.memberAppletUrl=Chaos.Config.get(Ext.isIE11?"memberAppletUrl":"memberAppletContainerUrl");
this.memberAppletLibraryUrl=Chaos.Config.get("memberAppletLibraryUrl");this.memberAppletFlashvars=Chaos.Config.get("memberAppletFlashvars");this.memberAppletFlashvarsQS=Chaos.Config.get("memberAppletFlashvarsQS");this.memberAppletParams=Chaos.Config.get("memberAppletParams");this.memberAppletAttributes=Chaos.Config.get("memberAppletAttributes");this.memberAppletContainer=Chaos.getFlashMovieObject(this.chatId);if(this.isChatPage()){this.isOverlayOpened=true;this.loadFlashAndPlay()}Chaos.addEvents(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW,
JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,JSM.overlay.FreeChat.GLOBALEVENT_MEMBERAPPLET_READY,JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_TEASER_LEFT);var randomPerformerShown=Chaos.getMeta("randomPerformerShown");if(randomPerformerShown!==null)location.href=location.href+"#"+randomPerformerShown;JSM.component.UrlAction.registerAction({name:"chat",
fn:this.onOpenChatOnLoad,scope:this});this._resizeParams={layoutMode:undefined,width:0,height:0}},_showFlashMessage:function(){if(!Ext.isIE7&&this.backConnPlugin.isFlashMethod(this.flashGetConnectionParamsFn))this.element.display("block");else if(Ext.isIE7&&JSM.util.Flash.getFlashVersion()!=="0,0,0")this.element.display("block");else this.element.display("none");if(!this._flashMessageBlockEl.isVisible())this._flashMessageBlockEl.display("block")},_hideFlashMessage:function(){if(this._showFlashMessageTask instanceof
Ext.util.DelayedTask){this._showFlashMessageTask.cancel();this._flashMessageBlockEl.display("none")}},setDefaultFlashVars:function(){for(var i=0;i<this.flashVarsNeedRefresh.length;i++)this.memberAppletFlashvars[this.flashVarsNeedRefresh[i]]=""},onOpenChatOnLoad:function(hashArray){this.onCallShowChat(hashArray[1])},getNextModel:function(modelName){this.currentModelName=modelName;this._addHistoryEntry("open");Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_APPLET_RECOMMENDER_CLICK,{scope:this,modelName:modelName})},
privateTeaserLeft:function(privateTeaserLeft){if(privateTeaserLeft==0)this.keepOverlay=true;Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_TEASER_LEFT,{scope:this,privateTeaserLeft:privateTeaserLeft})},setNextModel:function(stateObj){var time=new Date;JSM.Util.console("error","forceConsole","setNextModel        : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","stateObj.name       : ",stateObj.name);try{this.backConnPlugin.getConnectionParams(stateObj.name,
Chaos.getMeta("node"),"getFlashVarsForNextPerformer")}catch(exception){throw new JSM.exception(exception,this.name,new Error);}Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_SET_MODEL_FROM_HISTORY,{scope:this,stateObject:stateObj})},checkDownloadedApplets:function(appletName){if(appletName.match("memberapplet.swf"))this.memberAppletFlashvars.iscached=1},getFlashVarsForNextPerformer:function(flashVars){this._refreshFlashVars(flashVars);if(typeof this.memberAppletContainer.nextPerformer=="function"){var time=
new Date;JSM.Util.console("error","forceConsole","nextPerformer       : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.nextPerformer(this.memberAppletFlashvars)}},_refreshFlashVars:function(flashVars){var data={};if(typeof flashVars!="object")data=Ext.decode(flashVars);else data=flashVars;this.setDefaultFlashVars();for(var flashVar in data)this.memberAppletFlashvars[flashVar.replace("_",
"")]=data[flashVar]},onCallShowChatFromHistory:function(historyParams){this.currentModelName=historyParams.name;this._showChat(false)},onCallShowChat:function(target,status,link){this.currentModelName=target;this._showChat(this.manageHistory,link)},_showChat:function(showFromHistory,link){this.showChatEnabled=true;if(this.currentModelName){this.enableHistoryEntry(false);this.show(this.showDuration,function(){this.showChat(this.currentModelName,status,link,this.keepOverlay);this.enableHistoryEntry(this.manageHistory?
showFromHistory:this.manageHistory)},this)}},showChat:function(target,status,link,keepOverlay,data){if(this.showChatEnabled){if(!JSM.Session.checkCookieChanges()){this.unbindEventHandlers();return}Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_OPEN_CHAT,{scope:this,modelName:target});this.keepOverlay=keepOverlay||false;this.minimizeApplet();if(link!=undefined){var dataContainer=Ext.get(link).select(".data").item(0);if(dataContainer)this.loadDataObject=Ext.decode(dataContainer.dom.innerHTML)}if(data)this.loadDataObject=
Ext.decode(data);if(target!=undefined)this.isOverlayOpened=true;if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer.setLoading=="function"){JSM.Util.console("error","forceConsole","setLoading          : ",target);this.memberAppletContainer.setLoading({performerid:target,qualitycategory:this.loadDataObject.qualitycategory})}var requestToBackConn=new Ext.util.DelayedTask(function(){var time=new Date;JSM.Util.console("error","forceConsole","getConnectionParams : ",time.getHours()+
":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());try{this.backConnPlugin.getConnectionParams(target,Chaos.getMeta("node"),"loadFlashAndPlay")}catch(exception){throw new JSM.exception(exception,this.name,new Error);}if(this._showFlashMessageTask instanceof Ext.util.DelayedTask&&!this.isChatPage())this._showFlashMessageTask.delay(this.showFlashMessageTimeout)},this);requestToBackConn.delay(0);this.backConnRequestTimeOut=new Ext.util.DelayedTask(function(){var time=new Date;JSM.Util.console("error",
"forceConsole","TO loadFlashAndPlay : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","performer_id: ",target,"node_id: ",Chaos.getMeta("node"));this.loadFlashAndPlay({performer_id:target,node_id:Chaos.getMeta("node")})},this);this.backConnRequestTimeOut.delay(this.backConnTimeOutDelay*1E3)}Ext.fly(this.chatId).blur();if(Ext.isIE8)Ext.getBody().focus()},minimizeApplet:function(){if(this.isOverlay)this.element.setStyle(this._containerOriginalStyle);
else this.element.setStyle("z-index",1);JSM.util.Flash.minimize(this.chatId);this.element.setStyle({width:"1px",height:"1px"})},loadFlashAndPlay:function(flashData){var flashMethod=Ext.isIE11?"nextPerformer":"setParams";var time=new Date;JSM.Util.console("error","forceConsole","loadFlashAndPlay    : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());if(Chaos.isDefined(this.backConnRequestTimeOut)){this.backConnRequestTimeOut.cancel();this.backConnRequestTimeOut=
undefined}if(this.isOverlayOpened||this.isChatPage()){if(flashData)this._refreshFlashVars(flashData);this.memberAppletFlashvars.sessionid=Chaos.Config.get("sessionIdJasmin1");this.memberAppletFlashvars.jsm2session=Chaos.Config.get("sessionId");this.memberAppletFlashvars.issearchpage=parseInt(Chaos.getMeta("isSearchPage"));for(var key in this.loadDataObject){var varKey=key.replace(/\_/g,"");if(this.memberAppletFlashvars.hasOwnProperty(varKey))this.memberAppletFlashvars[varKey]=this.loadDataObject[key]}if(this.isChatPage()){var flashMethod=
Ext.isIE11?"nextPerformer":"setParams";this.task={run:function(){if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer[flashMethod]=="function"){var time=new Date;JSM.Util.console("error","forceConsole","setParams           : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);try{this.memberAppletContainer[flashMethod](this.memberAppletFlashvars)}catch(e){}this.runner.stop(this.task)}},
scope:this,interval:200};this.runner=new Ext.util.TaskRunner;if(this.runner!=undefined)this.runner.start(this.task)}else{if(this.chatCounter<this.removeAppletCounter&&this.chatCounter>0){JSM.Util.console("error","forceConsole","nextPerformer       : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer.nextPerformer(this.memberAppletFlashvars);
this.chatCounter++}else{this.task={run:function(){if(this.memberAppletContainer!=undefined&&typeof this.memberAppletContainer[flashMethod]=="function"){var time=new Date;JSM.Util.console("error","forceConsole","setParams           : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());JSM.Util.console("error","forceConsole","flashvars           : ",this.memberAppletFlashvars);this.memberAppletContainer[flashMethod](this.memberAppletFlashvars);this.runner.stop(this.task);
this.chatCounter++}},scope:this,interval:100};this.runner=new Ext.util.TaskRunner;if(this.runner!=undefined)this.runner.start(this.task)}this.disableScroll(true)}}this._hideFlashMessage()},setResizeParams:function(resizeParams){this._escEnabled=!(resizeParams.layoutMode==JSM.overlay.FreeChat.LAYOUT_MODE_FULL&&this._resizeParams&&this._resizeParams.layoutMode==JSM.overlay.FreeChat.LAYOUT_MODE_FULLSCREEN);var newParams=false;if(this._resizeParams)for(var prop in this._resizeParams){if(this._resizeParams[prop]!==
resizeParams[prop])newParams=true}else newParams=true;this._resizeParams=resizeParams;if(newParams){var time=new Date;JSM.Util.console("error","forceConsole","setResizeParams     : ",time.getHours()+":"+time.getMinutes()+":"+time.getSeconds()+":"+time.getMilliseconds());this.setCookieToStoreFlashSize();this.backConnPlugin.setSoParams("flashsize",resizeParams.layoutMode);if(this.isChatPage())Chaos.WinMgr.hideGroup("header");this.resizeFlashApplet()}},_setSizeToApplet:function(){try{var width=Ext.isIE7||
Ext.isIE8?document.documentElement.clientWidth||document.body.clientWidth:window.innerWidth,height=Ext.isIE7||Ext.isIE8?document.documentElement.clientHeight||document.body.clientHeight:window.innerHeight;if(this.isChatPage())height-=this.chatTopValue;this.memberAppletContainer.setMaxAppletSize(width,height)}catch(exception){}},getMaxAppletSize:function(){this._setSizeToApplet()},resizeFlashApplet:function(){if(this.showChatEnabled&&this._resizeParams.layoutMode!==JSM.overlay.FreeChat.LAYOUT_MODE_FULLSCREEN){this.memberAppletEl.setStyle({width:this._resizeParams.width+
"px",height:this._resizeParams.height+"px"});this.element.setStyle({width:this._resizeParams.width+"px",height:this._resizeParams.height+"px"});if(this.memberTitleEl!=null)this.memberTitleEl.setStyle({width:this._resizeParams.width+"px"});if(this._resizeParams.width>1&&this._resizeParams.height>1)this.setAppletPosition();else this.resetChatApplet();if(this._resizeParams.layoutMode==JSM.overlay.FreeChat.LAYOUT_MODE_FULL&&this.memberTitleEl!=null)this.memberTitleEl.setDisplayed(false);else this.memberTitleEl.setDisplayed(true)}},
setAppletPosition:function(){if(!this.isChatPage()){var width=Ext.isIE7||Ext.isIE8?document.documentElement.clientWidth||document.body.clientWidth:window.innerWidth,height=Ext.isIE7||Ext.isIE8?document.documentElement.clientHeight||document.body.clientHeight:window.innerHeight;var leftPos=Math.floor((width-this._resizeParams.width)/2);this.leftPosition=leftPos;this.topPosition=Math.floor((height-this._resizeParams.height)/2)}this.setPosition(this.leftPosition,this.topPosition)},setCookieToStoreFlashSize:function(){Chaos.Cookie.set("memberAppletSize",
this._resizeParams.layoutMode,this.cookieExpiration,"/")},isChatPage:function(){return JSM.Util.isCurrentPage(this.chatPageId)},hide:function(duration,callback,keepOverlay,callbackScope){this.showChatEnabled=false;this.resetChatApplet();JSM.overlay.FreeChat2.superclass.hide.call(this,duration,callback,keepOverlay,callbackScope)},onEscKeypress:function(ev){if(ev.keyCode==27&&this._escEnabled)if(!this.isChatPage())this.closeChat();this._escEnabled=true},onClosePopupClick:function(ev){this.closeChat(ev)},
onClosePopup:function(ev){if(typeof ev=="string"&&ev==JSM.overlay.FreeChat.TYPE_FLASH_ESCAPE_CALL)if(!this.keepOverlay)this.closeChat();else this.hide(0,function(){if(this.keepOverlay){this.resetChatApplet();this.onChatClosed();this.keepOverlay=false}},this.keepOverlay,this);else this.closeChat()},closeChat:function(){if(this.isOnPrivate==false){this.showChatEnabled=false;if(this.isVisible()){this._hideFlashMessage();this.isOverlayOpened=false;Ext.fly(this.chatId).blur();Ext.fly(window).focus();Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT,
this);if(typeof $FLASH!="undefined")if(typeof $FLASH.mouseWheelTrap!="undefined")$FLASH.mouseWheelTrap.enabled=false}this.hide(0,function(){if(this.keepOverlay){this.onChatClosed();this.keepOverlay=false}else this.disableScroll(false)},this.keepOverlay,this)}},resetChatApplet:function(){var flashContainer=Ext.fly(this.chatId).parent();if(this.chatCounter==this.removeAppletCounter){this.chatCounter=0;Ext.fly(this.chatId).remove();flashContainer.createChild('<div id="'+this.chatId+'"></div>');flashContainer.display("block");
this.element.setStyle({height:"1px",width:"1px"});Ext.fly(this.chatId).blur();this.setDefaultFlashVars();if(!Ext.isIE11)swfobject.embedSWF(this.memberAppletUrl,this.chatId,"1","1","9.0.0","expressInstall.swf",this.memberAppletFlashvars,this.memberAppletParams,this.memberAppletAttributes);else{this.memberAppletFlashvarsQS=undefined;for(var k in this.memberAppletFlashvars)if(typeof this.memberAppletFlashvarsQS!="undefined")this.memberAppletFlashvarsQS+="&"+k+"="+this.memberAppletFlashvars[k];else this.memberAppletFlashvarsQS=
k+"="+this.memberAppletFlashvars[k];Ext.fly(this.chatId).remove();Ext.DomHelper.append("freechat",'<object id="'+this.chatId+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+this.memberAppletUrl+'" type="application/x-shockwave-flash" width="1" height="1">'+'<param name="movie" value="'+this.memberAppletUrl+'" />'+'<param name="quality" value="high" />'+'<param name="allowScriptAccess" value="always" />'+'<param name="allowNetworking" value="all" />'+'<param name="wmode" value="window" />'+
'<param name="allowFullScreenInteractive" value="true" />'+'<param name="FlashVars" value="'+this.memberAppletFlashvarsQS+'" />'+"</object>")}this.memberAppletContainer=Chaos.getFlashMovieObject(this.chatId);this.memberAppletEl=Ext.get(this.chatId);this._resizeParams={layoutMode:undefined,width:0,height:0};Ext.fly(this.chatId).focus();Ext.fly(window).focus()}else{this.minimizeApplet();if(typeof this.memberAppletContainer.hideChat=="function")this.memberAppletContainer.hideChat()}Ext.fly(this.chatId).focus();
Ext.fly(window).focus()},onPrivateClick:function(){this.exitOnOverlayClick=false;this.exitOnEsc=false;this.isOnPrivate=true;this.previousUrl=this.getCurrentUrl();this.keepOverlay=false;Ext.fly(this.footerId).select(this.footerTopLinkSel).each(function(){this.set({target:"_blank"})});Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_START,this)},onPrivateEndClick:function(){this.previousUrl=this.getCurrentUrl();this.keepOverlay=false;this.exitOnOverlayClick=false;this.exitOnEsc=false;this.isOnPrivate=
false;Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_PRIVATE_END,this)},onShowChatFromFavorites:function(modelName){this.keepOverlay=true;this.onCallShowChat(modelName,undefined,undefined,this.keepOverlay)},onChatClosed:function(){Chaos.fireEvent(JSM.overlay.FreeChat.GLOBALEVENT_CLOSE_CHAT_MULTI_WINDOW)},onBeforeUnload:function(){if(this.memberAppletContainer)if(typeof this.memberAppletContainer.closeChat=="function")this.memberAppletContainer.closeChat()},setUrl:function(){return"#chat|"+this.getNameForHistory()},
getNameForHistory:function(){return this.currentModelName},setBackspaceTrap:function(enabled){if(!this.showChatEnabled&&enabled)if(typeof $FLASH!="undefined")if(typeof $FLASH.backspaceTrap!="undefined")$FLASH.backspaceTrap.enabled=false},disableScroll:function(disable){try{JSM.overlay.FreeChat2.superclass.disableScroll.call(this,disable)}catch(e){}},onWindowResize:function(){this._setSizeToApplet();this.setAppletPosition()},onKeyDown:function(ev){if(this.isVisible())switch(ev.getCharCode()){case 37:try{this.memberAppletContainer.prevRecommendation()}catch(e){}break;
case 39:try{this.memberAppletContainer.nextRecommendation()}catch(e){}break;default:break}},bind:function(){JSM.overlay.FreeChat2.superclass.bind.call(this);Ext.fly(window).on("resize",this.onWindowResize,this);Ext.fly(window).on("beforeunload",this.onBeforeUnload,this);if(Ext.isIE8)Ext.getBody().on("keydown",this.onKeyDown,this);else Ext.fly(window).on("keydown",this.onKeyDown,this)},unbind:function(){JSM.overlay.FreeChat2.superclass.unbind.call(this);Ext.fly(window).un("resize",this.onWindowResize,
this);Ext.fly(window).un("beforeunload",this.onBeforeUnload,this);if(Ext.isIE8)Ext.getBody().un("keydown",this.onKeyDown,this);else Ext.fly(window).un("keydown",this.onKeyDown,this)}});Ext.namespace("JSM.overlay");JSM.overlay.ImageGallery=function(el,config){JSM.overlay.ImageGallery.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.ImageGallery,JSM.Overlay,{name:"ImageGallery",imageGalleryId:"overlay_image_gallery",imageGalleryContainerId:"image_gallery_container",imageGalleryBoxId:"image_gallery_box",navigationContainerId:"navigation_container",closeButtonCls:"close_button",prevImageButtonId:"prev_image_button",nextImageButtonId:"next_image_button",navigationPrevMaskId:"navigation_prev_mask",navigationNextMaskId:"navigation_next_mask",getContentViaAjax:false,windowTemplate:undefined,animate:false,_imageGalleryTemplate:undefined,
_currentImageCountEl:undefined,_maxImageCountEl:undefined,init:function(el,config){this._createImageGalleryTemplate();JSM.overlay.ImageGallery.superclass.init.call(this,el,config);this.show()},_createImageGalleryTemplate:function(){var data={imageGalleryId:this.imageGalleryId,imageGalleryContainerId:this.imageGalleryContainerId,imageGalleryBoxId:this.imageGalleryBoxId,navigationContainerId:this.navigationContainerId,closeButtonCls:this.closeButtonCls,prevImageButtonId:this.prevImageButtonId,nextImageButtonId:this.nextImageButtonId,
galleryTitleText:this.galleryTitleText,galleryText:this.galleryText,currentImageCount:this.currentImageCount,currentImageCountId:this.currentImageCountId,maxImageCount:this.maxImageCount,maxImageCountId:this.maxImageCountId,navigationNextMaskId:this.navigationNextMaskId,navigationPrevMaskId:this.navigationPrevMaskId,closeButtonText:Chaos.translate(this.closeButtonText)};if(!(this._imageGalleryTemplate instanceof JSM.template.ImageGalleryTemplate))this._imageGalleryTemplate=new JSM.template.ImageGalleryTemplate;
this.windowTemplate=this._imageGalleryTemplate.render(data)},setCurrentImageCounter:function(currentCount){this.getCurrentImageCountElement().dom.innerHTML=currentCount.toString()},setMaxImageCounter:function(maxCount){this.getMaxImageCountElement().dom.innerHTML=maxCount.toString()},setCurrentImageCountElement:function(){this._currentImageCountEl=Ext.get(this.currentImageCountId)},getCurrentImageCountElement:function(){return this._currentImageCountEl},setMaxImageCountElement:function(){this._maxImageCountEl=
Ext.get(this.maxImageCountId)},getMaxImageCountElement:function(){return this._maxImageCountEl},setVisibleImageBox:function(){var _galleryContainerEl=Ext.get(this.imageGalleryId);try{TweenMax.fromTo(_galleryContainerEl.dom,this.duration,{css:{opacity:0}},{css:{opacity:1}})}catch(e){}},bind:function(){JSM.overlay.ImageGallery.superclass.bind.call(this)},unbind:function(){JSM.overlay.ImageGallery.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay");
JSM.overlay.Login=function(el,config){JSM.overlay.Login.superclass.constructor.call(this,el,config)};JSM.overlay.Login.EVENT_LOG_IN="log-in";JSM.overlay.Login.EVENT_LOG_IN_ERROR="log-in-error";JSM.overlay.Login.EVENT_LOG_IN_FAILURE="log-in-failure";
Chaos.extend(JSM.overlay.Login,JSM.Overlay,{name:"Login",getContentRoute:"Overlay/GetLoginBlock",sendForgotPasswordRoute:"Setting/BeginChangePassword",autoLoad:true,loginButtonId:"login_submit",loginButtonEl:undefined,loginLoaderId:"login_loader",loginLoaderEl:undefined,errorTag:'<div id={errorId} class="input_row">'+'<div class="error_message"><span>&nbsp;</span>{errorMsg}</div>'+'<div class="clear"></div>'+"</div>",formErrorSel:".warning_tag",formId:"login_form",forgotPassFormId:"forgotPassForm",
overlayBlockId:"overlay_login",overlayId:"overlay",resetPasswordLinkId:"reset_password_link",signUpLinkId:"signup_link",passwordSavedMessageId:"forgotPassForm_saved",captchaImgId:"captchaimg",autoDestroy:true,autoDestroyElement:false,infoBlockSel:".service_change",infoBlockEl:undefined,LuxCoInfoActiveCookie:"LuxCoInfo",isTermsAcceptedCookie:"is_terms_accepted",loginBtnText:undefined,delayedRedirectTime:10,delayedRedirectTask:undefined,isScrollingDisabled:true,usernameInputId:"username",passwordId:"password",
logErrors:false,errorRedirectRoute:"Auth/LoginMember",maxCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",_loginForm:undefined,init:function(el,config){if(!JSM.Session.checkCookieChanges())return;this.getContentParams={listPageId:Chaos.getMeta("listPageId")};try{this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"")}catch(exception){}this.loginBtnText=Chaos.translate("Login & Accept");
JSM.overlay.Login.superclass.init.call(this,el,config);this.addEvents(JSM.overlay.Login.EVENT_LOG_IN,JSM.overlay.Login.EVENT_LOG_IN_ERROR,JSM.overlay.Login.EVENT_LOG_IN_FAILURE);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},destroyForm:function(){if(this._loginForm){Chaos.Broadcaster.un("xdomain-response",this._loginForm.xDomainCallback,this._loginForm);this._loginForm.un("submit",this.onFormSubmit,this);this._loginForm.un("submitError",this.onSubmitError,this);this._loginForm.hideAllErrors();
this._loginForm.hideHint();this._loginForm.unbind();this._loginForm.destroy();this._loginForm=undefined}},onContentDisplayed:function(){Ext.fly(this.usernameInputId).focus();this.loginButtonEl=Ext.get(this.loginButtonId);this.loginLoaderEl=Ext.get(this.loginLoaderId);this.resetPasswordLinkEl=Ext.get(this.resetPasswordLinkId);if(this.resetPasswordLinkEl)this.resetPasswordLinkEl.on("click",this.onResetPasswordClick,this);this.signupLinkEl=Ext.get(this.signUpLinkId);if(this.signupLinkEl)this.signupLinkEl.on("click",
this.onSignUpLinkClick,this);this.setInstances()},setInstances:function(){this._loginForm=new JSM.form.Form(this.formId,{scope:this,submitIfRemoteValid:true,formErrorSel:this.formErrorSel,isAjax:true,isBackConnNeeded:true,backConnCallback:"loginForm.backConnRequestCallback",requestParams:["username","password","form_token","captcha","captcha_id","keepmeloggedin","listPageId"],disableSubmitOnSubmit:true,hasCaptcha:true,useModalForGeneralErrors:false,errorHideDuration:0,captchaConfig:{containerId:this.captchaBlockId,
captchaImg:this.captchaImgId,captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:this.captchaInputId},checkBoxItems:{checkBoxReplacement_keepmeloggedin:{hiddenInputId:"keepmeloggedin",activeClass:"active",onCheckedValue:"1",unCheckedValue:"0"}},success:this.successCallBack});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.usernameInputId,
isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCharLimitNumber,hasWarningLimit:false,inputId:this.passwordId,isShowCounter:false,charInfoId:this.hintContainerId,isMaxCharSound:true});this._passwordCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxPasswordCharLimitReached,this);this.captchaBlockEl=Ext.get(this.captchaBlockId);this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,hasWarningLimit:false,inputId:this.captchaInputId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,
this);this._loginForm.on("submit",this.onFormSubmit,this);this._loginForm.on("submitError",this.onSubmitError,this);this.hintContainerEl=this._loginForm.getHintCmp();Chaos.Broadcaster.on("xdomain-response",this._loginForm.xDomainCallback,this._loginForm)},successPassChange:function(){Ext.get(this.passwordSavedMessageId).setStyle({opacity:0,display:"block"}).animate({opacity:{to:1,from:0}},this.showDuration,null)},onFormSubmit:function(){this.delayedRedirectTask=new Ext.util.DelayedTask(this.onCallBackTimeout,
this);this.delayedRedirectTask.delay(this.delayedRedirectTime*1E3)},onSubmitError:function(){this.delayedRedirectTask.cancel();this.fireEvent(JSM.overlay.Login.EVENT_LOG_IN_ERROR,this)},onResetPasswordClick:function(ev){ev.preventDefault();this.hide(this.hideDuration,function(){this.destroyForm();new JSM.overlay.ForgotPassword(this.element,{overlay:this.overlayId,xdomain:true})},true,this)},onSignUpLinkClick:function(ev){ev.preventDefault();this.hide(this.hideDuration,function(){this.destroyForm();
Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_SIGNUP,{scope:this,manageHistory:false})},true,this)},onCallBackTimeout:function(){window.location=Chaos.getUrl("Auth/LoginMember",{},{},"")},successCallBack:function(scope,response){this.delayedRedirectTask.cancel();if(this._loginForm)Chaos.Broadcaster.un("xdomain-response",this._loginForm.xDomainCallback,this._loginForm);this.hide(this.showDuration);if(this.infoBlockEl)if(!Chaos.Cookie.get(this.LuxCoInfoActiveCookie))Chaos.Cookie.set(this.LuxCoInfoActiveCookie,
true,2592E3);Chaos.fireEvent(JSM.overlay.Login.EVENT_LOG_IN,response)},failureCallBack:function(){this.delayedRedirectTask.cancel();if(this.loginButtonEl&&this.loginLoaderEl){this.loginButtonEl.setStyle("display","block");this.loginLoaderEl.setStyle("display","none")}this.fireEvent(JSM.overlay.Login.EVENT_LOG_IN_FAILURE,this)},hide:function(duration,callback,keepOverlay,callbackScope){if(this._loginForm)this._loginForm.setSubmitEnabled(false);if(Chaos.Cookie.get("showBonusCreditRecommender"))JSM.overlay.Login.superclass.hide.call(this,
duration,callback,true,callbackScope);else JSM.overlay.Login.superclass.hide.call(this,duration,callback,keepOverlay,callbackScope)},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();this._loginForm.showHint(this.usernameInputId,true);this._loginForm.getHintCmp().show();this._loginForm.getHintCmp().removeClass(this.captchaHintCls)},onMaxPasswordCharLimitReached:function(){this.maxCharLimitReached();this._loginForm.showHint(this.passwordId,true);this._loginForm.getHintCmp().show();this._loginForm.getHintCmp().removeClass(this.captchaHintCls)},
onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._loginForm.showHint(this.captchaInputEl,true);this._loginForm.getHintCmp().show();this._loginForm.getHintCmp().addClass(this.captchaHintCls)},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},bind:function(){JSM.overlay.Login.superclass.bind.call(this)},unbind:function(){if(this.resetPasswordLinkEl)this.resetPasswordLinkEl.un("click",
this.onResetPasswordClick,this);if(this.signupLinkEl)this.signupLinkEl.un("click",this.onSignUpLinkClick,this);if(this._usernameCharacterCounterCmp)this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);if(this._passwordCharacterCounterCmp)this._passwordCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);if(this._captchaCharacterCounterCmp)this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxCaptchaCharLimitReached,this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);this.un(Chaos.Window.EVENT_BEFORE_HIDE,this.destroyForm,this);this.destroyForm();JSM.overlay.Login.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay.Logout");JSM.overlay.Logout=function(el,config){JSM.overlay.Logout.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.Logout,JSM.Overlay,{name:"OverlayLogout",getContentRoute:"ListPageAjax/LogoutMobilBlock",isScrollingDisabled:true,isConstant:true,overlayBlockId:"overlay_logout",init:function(el,config){this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"","");JSM.overlay.Logout.superclass.init.call(this,el,config)},bind:function(){JSM.overlay.Logout.superclass.bind.call(this)},unbind:function(){JSM.overlay.Logout.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay");
JSM.overlay.MessageConversation=function(el,config){JSM.overlay.MessageConversation.superclass.constructor.call(this,el,config)};JSM.overlay.MessageConversation.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK="message-back-link-click";JSM.overlay.MessageConversation.GLOBALEVENT_MESSAGE_TITLE_LINK_CLICK="message-title-link-click";
Chaos.extend(JSM.overlay.MessageConversation,JSM.Overlay,{name:"MessageConversationOverlay",isSupport:false,overlayBlockId:"overlay_message",manageScroll:false,messageBackLinkId:"message_back",_messageBackLinkEl:undefined,_messageConversationComponent:undefined,init:function(el,config){JSM.overlay.MessageConversation.superclass.init.call(this,el,config);Chaos.addEvents(JSM.overlay.MessageConversation.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK,JSM.overlay.MessageConversation.GLOBALEVENT_MESSAGE_TITLE_LINK_CLICK);
this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){this._messageBackLinkEl=Ext.get(this.messageBackLinkId);if(this._messageBackLinkEl)this._messageBackLinkEl.on("click",this.onMessageBackLinkClick,this);this._messageConversationComponent=new JSM.component.MessageConversation(this.element,{blockHeight:"420",isSupport:this.isSupport,isOverlay:true})},onMessageBackLinkClick:function(ev){ev.preventDefault();Chaos.fireEvent(JSM.overlay.MessageConversation.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK,
{scope:this})},bind:function(){JSM.overlay.MessageConversation.superclass.bind.call(this)},unbind:function(){JSM.overlay.MessageConversation.superclass.unbind.call(this);if(this._messageConversationComponent){this._messageConversationComponent.unbind();delete this._messageConversationComponent}}});Ext.namespace("JSM.overlay");JSM.overlay.MessageSupport=function(el,config){JSM.overlay.MessageSupport.superclass.constructor.call(this,el,config)};
JSM.overlay.MessageSupport.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK="message-back-link-click";
Chaos.extend(JSM.overlay.MessageSupport,JSM.Overlay,{name:"MessageSupportOverlay",getContentRoute:"Messages/Conversation",manageScroll:false,overlayBlockId:"overlay_message",messageBackLinkId:"message_back",init:function(el,config){JSM.overlay.MessageSupport.superclass.init.call(this,el,config);Chaos.addEvents(JSM.overlay.MessageSupport.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){this._messageBackLinkEl=
Ext.get(this.messageBackLinkId);if(this._messageBackLinkEl)this._messageBackLinkEl.on("click",this.onMessageBackLinkClick,this);this._messageSupportComponent=new JSM.component.MessageSupport(this.element,{isOverlay:true});this._messageSupportComponent.on(JSM.component.MessageSupport.EVENT_SEND_MESSAGE_SUCCESS,this.onSendMessageSuccess,this)},onSendMessageSuccess:function(ev){if(ev&&ev.response&&ev.response.json.data)this.hide(0,function(){this._messageConversationComponent=new JSM.overlay.MessageConversation(this.element,
{overlay:this.overlayId,messageBackLinkId:this.messageBackLinkId,getContentUrl:Chaos.getUrl(this.getContentRoute,{threadId:0},{},"","")})},true,this,false);else;},onMessageBackLinkClick:function(ev){if(typeof ev.preventDefault=="function")ev.preventDefault();Chaos.fireEvent(JSM.overlay.MessageSupport.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK,{scope:this})},bind:function(){JSM.overlay.MessageSupport.superclass.bind.call(this)},unbind:function(){JSM.overlay.MessageSupport.superclass.unbind.call(this);if(this._messageSupportComponent)this._messageSupportComponent.unbind()}});
Ext.namespace("JSM.overlay");JSM.overlay.Messages=function(el,config){JSM.overlay.Messages.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.Messages,JSM.Overlay,{name:"OverlayMessages",getConversationsRoute:"Messages/Conversation",useBreadCrumb:true,elementContainerId:undefined,isConstant:true,autoDestroy:true,autoDestroyElement:false,overlayBlockId:"overlay_message",manageScroll:false,newMessageFormId:"message_form",messageFieldId:"message",counterId:"message_char_number",charInfoId:"message_char_info",supportMessageClass:"message_from_support",getSupportConversationsRoute:"Messages/Conversation",messageBackLinkId:"message_back",
_messageComponent:undefined,_newMessageOverlay:undefined,_messageSupportOverlay:undefined,_messageConversationOverlay:undefined,init:function(el,config){if(!JSM.Session.checkCookieChanges())return;JSM.overlay.Messages.superclass.init.call(this,el,config);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);this._overlayConfig={overlay:this.overlayId,isOverlay:this.isOverlay,showDuration:this.showDuration,hideDuration:this.hideDuration,animate:false,newMessageFormId:this.newMessageFormId,
messageFieldId:this.messageFieldId,nameInputId:"to",creditPriceBlockId:"credit_price_new",creditTextId:"credit_info_new_message",counterId:this.counterId,charInfoId:this.charInfoId,messageBackLinkId:this.messageBackLinkId};this.elementContainerEl=Ext.get(this.elementContainerId)||this.element},onContentDisplayed:function(){this.setComponent()},setComponent:function(){try{this._messageComponent=new JSM.component.Messages(this.elementContainerEl,{isOverlay:true})}catch(exception){console.error(exception)}this._messageComponent.on(JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK,
this.onNewMessageClick,this);this._messageComponent.on(JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK,this.onSupportMessageClick,this);this._messageComponent.on(JSM.component.Messages.EVENT_THREAD_CLICK,this.onThreadClick,this)},refreshContent:function(){this.showContent=true;this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"");this.getContent()},onNewMessageClick:function(ev){this.hide(this.hideDuration,function(){this.setNewMessageOverlay()},true,this,false)},setNewMessageOverlay:function(){this._overlayConfig.getContentUrl=
Chaos.getUrl(this.newMessageURL,{},{},"");this._overlayConfig.getMessagePriceRoute="Messages/Price";this._newMessageOverlay=new JSM.overlay.NewMessage(this.element,this._overlayConfig);return this._newMessageOverlay},onSupportMessageClick:function(ev){this.hide(0,function(){this.setSupportMessageOverlay()},true,this,false)},setSupportMessageOverlay:function(){this._overlayConfig.getContentUrl=Chaos.getUrl(this.newMessageURL,{},{support:1},"","");this._messageSupportOverlay=new JSM.overlay.MessageSupport(this.element,
this._overlayConfig);return this._messageSupportOverlay},onThreadClick:function(ev){var target=Ext.get(ev.target),threadId=undefined,isSupport=false,urlRoute=this.getConversationsRoute;if(target){if(target.findParent("a",2,true).hasClass(this.supportMessageClass)){urlRoute=this.getSupportConversationsRoute;isSupport=true}threadId=target.findParent("a",2,true).dom.rel;this.hide(0,function(){this._messageConversationOverlay=new JSM.overlay.MessageConversation(this.element,{isSupport:isSupport,overlay:this.overlayId,
getContentUrl:Chaos.getUrl(urlRoute,{threadId:threadId},{},"","")})},true,this,false)}},bind:function(){JSM.overlay.Messages.superclass.bind.call(this);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},unbind:function(){JSM.overlay.Messages.superclass.unbind.call(this);if(this._messageComponent){this._messageComponent.un(JSM.component.Messages.EVENT_NEW_MESSAGE_CLICK,this.onNewMessageClick,this);this._messageComponent.un(JSM.component.Messages.EVENT_SUPPORT_MESSAGE_CLICK,
this.onSupportMessageClick,this);this._messageComponent.un(JSM.component.Messages.EVENT_THREAD_CLICK,this.onThreadClick,this);this._messageComponent.un(JSM.component.Messages.EVENT_DELETE_THREAD_CLICK,this.onDeleteThreadClick,this);this._messageComponent.unbind()}this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)}});Ext.namespace("JSM.overlay");JSM.overlay.NewMessage=function(el,config){JSM.overlay.NewMessage.superclass.constructor.call(this,el,config)};
JSM.overlay.NewMessage.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK="message-back-link-click";
Chaos.extend(JSM.overlay.NewMessage,JSM.Overlay,{name:"NewMessage",autoSuggestRoute:undefined,getMessagePriceRoute:undefined,messageFieldId:undefined,creditTextId:"credit_info_new_message",creditPriceBlockId:"credit_price_new",messageConversationRoute:"Messages/Conversation",overlayBlockId:"overlay_message",manageScroll:false,messageBackLinkId:"message_back",init:function(el,config){Chaos.addEvents(JSM.overlay.NewMessage.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK);JSM.overlay.NewMessage.superclass.init.call(this,
el,config);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){this._messageBackLinkEl=Ext.get(this.messageBackLinkId);if(this._messageBackLinkEl)this._messageBackLinkEl.on("click",this.onMessageBackLinkClick,this);this._newMessageComponent=new JSM.component.NewMessage(this.element,{creditPriceBlockId:this.creditPriceBlockId,creditTextId:this.creditTextId,messageBackLinkId:this.messageBackLinkId,creditInfoRoute:this.getMessagePriceRoute,isOverlay:true});
this._newMessageComponent.on(JSM.component.NewMessage.EVENT_SEND_MESSAGE_SUCCESS,this.onSendMessageSuccess,this)},onSendMessageSuccess:function(ev){if(ev&&ev.response&&ev.response.json.data){var threadId=ev.response.json.data.threadId;if(threadId!=null&&threadId!=undefined&&threadId!="")this.hide(0,function(){this._messageConversationComponent=new JSM.overlay.MessageConversation(this.element,{overlay:this.overlayId,messageBackLinkId:this.messageBackLinkId,getContentUrl:Chaos.getUrl(this.messageConversationRoute,
{threadId:threadId},{},"","")})},true,this,false);else;}else;},onMessageBackLinkClick:function(ev){if(typeof ev.preventDefault=="function")ev.preventDefault();Chaos.fireEvent(JSM.overlay.NewMessage.GLOBALEVENT_MESSAGE_BACK_LINK_CLICK,{scope:this})},onMessageConversationBackLinkClick:function(ev){this.fireEvent(JSM.overlay.NewMessage.EVENT_MESSAGE_BACK_LINK_CLICK,ev)},bind:function(){JSM.overlay.NewMessage.superclass.bind.call(this)},unbind:function(){JSM.overlay.NewMessage.superclass.unbind.call(this);
if(this._newMessageComponent)this._newMessageComponent.unbind()}});Ext.namespace("JSM.overlay.OverEighteen");JSM.overlay.OverEighteen=function(el,config){JSM.overlay.OverEighteen.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.OverEighteen,JSM.Overlay,{name:"OverEighteen",getContentRoute:"Overlay/GetOverEighteenBlock",isScrollingDisabled:true,cookieName:"18popup",cookieExpiration:31556926,cookieDomain:undefined,exitOnOverlayClick:false,exitOnEsc:false,init:function(el,config){this.cookieDomain="."+JSM.Util.getDomain();this.getContentUrl=Chaos.getUrl(this.getContentRoute,{},{},"","");Ext.fly(this.overlayId).addClass(this.darkOverlayCls);JSM.overlay.OverEighteen.superclass.init.call(this,el,config)},
onCloseButtonClick:function(ev){Chaos.Cookie.set(this.cookieName,true,this.cookieExpiration,"/",this.cookieDomain);if(JSM.Util.metroDetect("htmlfile")&&JSM.Util.metroDetect("ShockwaveFlash.ShockwaveFlash")){this.autoDestroy=false;Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_METRO_VIEW,this)}else JSM.overlay.OverEighteen.superclass.onCloseButtonClick.apply(this,arguments)},onOverlayClosed:function(ev){Ext.fly(this.overlayId).removeClass(this.darkOverlayCls);JSM.overlay.OverEighteen.superclass.onOverlayClosed.apply(this,
arguments)},bind:function(){JSM.overlay.OverEighteen.superclass.bind.call(this)},unbind:function(){JSM.overlay.OverEighteen.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay");JSM.overlay.Profile=function(el,config){JSM.overlay.Profile.superclass.constructor.call(this,el,config)};JSM.overlay.Profile.EVENT_SAVE_SUCCESS="save-success";JSM.overlay.Profile.EVENT_SAVE_ERROR="save-error";JSM.overlay.Profile.EVENT_SAVE_FAILURE="save-failure";JSM.overlay.Profile.EVENT_INNER_POPUP_OPEN="inner-popup-open";
JSM.overlay.Profile.EVENT_INNER_POPUP_CLOSE="inner-popup-close";JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_START="textarea-edit-start";JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_END="textarea-edit-end";
Chaos.extend(JSM.overlay.Profile,JSM.Overlay,{name:"Profile",getContentRoute:"Profile/GetProfile",sendAnswersRoute:"Profile/ModifyProfile",isScrollingDisabled:true,editButtonSel:".edit_button",editQuestionButtonClass:"question",privacySettingsButtonSel:".privacy_settings_button",privacySettingsPopupId:"privacy_settings",privacySettingsFormId:"privacy_settings_form",innerBoxCloseButtonCls:"close",innerPopupClass:"inner_popup",inputType:"textarea",disabledInputClass:"disabled",saveButtonClass:"save_button",
activeRowClass:"active",personalDataClass:"detail",personalDataSelectListSel:".select",multipleSelectClass:"multiple",selectListInputPrefix:"select_",selectListClass:"list",errorHintClass:"error",birthdateErrorId:"birthdate_error",scrollPaneConfig:{isAnimateScrollBar:false,contentSel:"ul",hideDuration:"0",isAutoHide:false,hideOnMouseout:false,showDuration:0},hideHintDuration:1,hideHintDelay:1500,popupMaskElementId:"mpimagesuploader_imageslider_box",inputNickName:"display_name",inputGenderName:"gender",
inputLocationName:"location",inputInterestedName:"sexual_preference",inputYearName:"year",inputMonthName:"month",inputDayName:"day",inputBirthDateId:"birthdate",yearListContainerId:"year_list",monthListContainerId:"month_list",dayListContainerId:"day_list",genderListContainerId:"gender_list",yearListBlockId:"year_list_select",monthListBlockId:"month_list_select",dayListBlockId:"day_list_select",genderListBlockId:"gender_list_select",interestListBlockId:"sexual_preference_list_select",filledDetailClass:"filled",
counterBlockIdPostfix:"_counterblock",fieldCounterIdPostfix:"_counter",counterInfoIdPostfix:"_counterinfo",maxCharLimitNumber:250,scrollerBlockId:"popup_box_outer_content",scrollerContainerId:"popup_box_mid_content",scrollerContentId:"popup_box_inner_content",additionBlockSel:".popup_box_header",overlayBlockId:"overlay_profile",isRepositionEnabled:true,isResizeEnabled:true,publicProfileName:"is_public_profile",profileQuestionsBlockId:"profile_questions",profileQuestionsSel:"#profile_questions li",
profileAttributeSel:".profile_attributes > li",pictureTextsId:"picture_texts",tokenFieldName:"form_token",_inputEl:null,_visibleInnerBox:null,_inputValues:{},_birthdate:{},_inputBirthDateEl:undefined,_popupBoxMask:undefined,_privacySettingsPopupEl:undefined,_publicProfileInputEl:undefined,_privacySettingsForm:undefined,_delayedHideHintTask:undefined,_characterCounters:{},_levelIndex:1,_closeEnabled:true,_isEditingInProgress:false,_activeListElem:undefined,init:function(el,config){this.getContentUrl=
Chaos.getUrl(this.getContentRoute,{},{},"","");JSM.overlay.Profile.superclass.init.call(this,el,config);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);this.addEvents(JSM.overlay.Profile.EVENT_SAVE_SUCCESS,JSM.overlay.Profile.EVENT_SAVE_ERROR,JSM.overlay.Profile.EVENT_SAVE_FAILURE,JSM.overlay.Profile.EVENT_INNER_POPUP_OPEN,JSM.overlay.Profile.EVENT_INNER_POPUP_CLOSE,JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_START,JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_END);this._setController();
this._successTranslate=Chaos.translate("Successfully saved");this._errorTranslate=Chaos.translate("System error please try again later!");this._dataFieldTranslates={};this._dataFieldTranslates[this.inputNickName]=Chaos.translate("Nickname");this._dataFieldTranslates[this.inputLocationName]=Chaos.translate("Location");this._dataFieldTranslates[this.inputYearName]=Chaos.translate("Year");this._dataFieldTranslates[this.inputMonthName]=Chaos.translate("Month");this._dataFieldTranslates[this.inputDayName]=
Chaos.translate("Day")},onContentDisplayed:function(){var fixZindexIe7=20;this._contentHeight=Ext.get(this.scrollerBlockId).getHeight();this.element.on("click",this.onElementClick,this);this._innerBoxCloseButtonEl=this.element.select("."+this.innerBoxCloseButtonCls);this._innerBoxCloseButtonEl.on("click",this.onInnerBoxCloseButtonClick,this);if(!(this._popupBoxMask instanceof Chaos.Mask))this._popupBoxMask=new Chaos.Mask(this.popupMaskElementId,{tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',
maskPosition:"local",isVisibleMask:false,maskClass:"popup_mask",useCursor:false,duration:0,useDefaultZindex:true,defaultZindex:4});this._interestList=new JSM.component.SelectList(this.interestListBlockId,{inputSel:"input[name="+this.inputInterestedName+"]",hiddenInputSel:"input[name="+this.inputInterestedName+"]",hasMoreList:true,isScrollPaneNeeded:false});this._interestList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,this.onListItemSelect,this);this._genderList=new JSM.component.SelectList(this.genderListBlockId,
{inputSel:"input[name="+this.selectListInputPrefix+this.inputGenderName+"]",hiddenInputSel:"input[name="+this.inputGenderName+"]",hasMoreList:true,scrollPaneContainerId:this.genderListContainerId,isScrollPaneNeeded:false});this._genderList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,this.onListItemSelect,this);this._yearList=new JSM.component.SelectList(this.yearListBlockId,{inputSel:"input[name="+this.selectListInputPrefix+this.inputYearName+"]",hiddenInputSel:"input[name="+this.inputYearName+
"]",scrollPaneContainerId:this.yearListContainerId,scrollPaneConfig:this.scrollPaneConfig});this._yearList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,this.onListItemSelect,this);this._monthList=new JSM.component.SelectList(this.monthListBlockId,{inputSel:"input[name="+this.selectListInputPrefix+this.inputMonthName+"]",hiddenInputSel:"input[name="+this.inputMonthName+"]",scrollPaneContainerId:this.monthListContainerId,scrollPaneConfig:this.scrollPaneConfig});this._monthList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,
this.onListItemSelect,this);this._dayList=new JSM.component.SelectList(this.dayListBlockId,{inputSel:"input[name="+this.selectListInputPrefix+this.inputDayName+"]",hiddenInputSel:"input[name="+this.inputDayName+"]",scrollPaneContainerId:this.dayListContainerId,scrollPaneConfig:this.scrollPaneConfig});this._dayList.on(JSM.component.SelectList.EVENT_ITEM_SELECT,this.onListItemSelect,this);this._privacySettingsButtonEl=this.element.select(this.privacySettingsButtonSel).item(0);this._privacySettingsButtonEl.on("click",
this.onPrivacySettingsButtonClick,this);this._publicProfileInputEl=Ext.get(this.publicProfileName);Ext.fly(this.pictureTextsId).select("."+this.personalDataClass).on("click",this.onPersonalDataClick,this);this._inputNickEl=this.element.select('input[name="'+this.inputNickName+'"]').item(0);this._inputGenderEl=this.element.select('input[name="'+this.inputGenderName+'"]').item(0);this._inputLocationEl=this.element.select('input[name="'+this.inputLocationName+'"]').item(0);this._inputInterestedEl=this.element.select('input[name="'+
this.inputInterestedName+'"]').item(0);this._inputBirthDateEl=Ext.get(this.inputBirthDateId);this._birthdateErrorEl=Ext.get(this.birthdateErrorId);this._inputEl=this.element.select(this.inputType);if(this._inputEl){this._inputEl.on("focus",this.onInputFocus,this);this.element.select(this.profileQuestionsSel).on("click",this.onProfileQuestionRowClick,this)}this._privacySettingsPopupEl=Ext.get(this.privacySettingsPopupId);this._privacySettingsForm=new JSM.form.Form(this.privacySettingsFormId,{scope:this,
handleToken:false,maskMode:"disabled",isAjax:true,disableSubmitOnSubmit:true,useModalForGeneralErrors:false,loaderSel:undefined,requestParams:{display_name:this.inputNickName,form_token:this.tokenFieldName,is_public_profile:this.publicProfileName},success:this._saveFormSuccess,error:this._saveFormError,radioBoxItems:{public_profile:{hiddenInputId:this.publicProfileName,activeClass:this.activeRowClass,onCheckedValue:1,unCheckedValue:0},chat_private_profile:{hiddenInputId:this.publicProfileName,activeClass:this.activeRowClass,
onCheckedValue:2,unCheckedValue:0},private_profile:{hiddenInputId:this.publicProfileName,activeClass:this.activeRowClass,onCheckedValue:0,unCheckedValue:0}}});if(!(this._serverInfoHint instanceof JSM.window.HintPopup))this._serverInfoHint=new JSM.window.HintPopup("server_info_hint",{bodyTag:'<span class="icon"></span>{message}',el:{id:"server_info_hint"},mustRender:true,autoDestroy:true,autoDestroyElement:false,left:"center",top:"130",showMode:"fixed"});this.element.select(this.profileAttributeSel).each(function(element){element.setStyle("zIndex",
fixZindexIe7--)})},onInputFocus:function(ev,target){var inputName=Ext.get(target).getAttribute("name"),value=Ext.get(target).dom.value;this._inputValues[inputName]=value},onPersonalDataClick:function(ev,target){ev.preventDefault();if(!this._isEditingInProgress){var _target=Ext.get(target),listItem=_target.parent("li"),width=_target.getWidth(),_inputEl=this.element.select("input[name="+target.id+"]").item(0);_inputEl.setWidth(width);if(this._activatedList){this._activateList(false,this._activatedList.listItem,
this._activatedList._target);delete this._activatedList;this._levelIndex=1}if(_target.hasClass(this.selectListClass)){_target.display("none");this._activatedList={listItem:listItem,target:_target};this._activateList(true,listItem,_target)}else{this._activateField(true,_inputEl,_inputEl.dom.type,false);_inputEl.on("blur",this.onPersonalDataBlur,this,{item:_target});this._inputValues[_inputEl.dom.name]=_inputEl.getValue()}}if(this._birthdateErrorEl.isVisible())this._birthdateErrorEl.hide()},onPersonalDataBlur:function(ev,
target,options){var fieldEl=Ext.get(target),newValue,saveParams={},placeHolderEl=Ext.get(fieldEl.dom.name),originalValue=JSM.Util.trim(placeHolderEl.dom.innerHTML),listEl=options.item.parent("li"),originalNewValue=this._activateField(false,fieldEl,fieldEl.dom.type,true);newValue=JSM.Util.trim(originalNewValue.replace(/&(nbsp);/g," "));if(fieldEl.getValue()===""&&this._inputValues[fieldEl.dom.name]!=fieldEl.getValue()||this._inputValues[fieldEl.dom.name]!=fieldEl.getValue()){saveParams=this._getDefaultSaveParams();
saveParams[fieldEl.dom.name]=newValue;this._sendRequest(saveParams,function(response){this._inputValues[fieldEl.dom.name]=newValue;this._refreshToken(response.json[this.tokenFieldName]);this._showHint(true)},function(){fieldEl.dom.value=originalValue},function(){fieldEl.dom.value=originalValue})}if(!newValue||newValue===""){if(listEl.hasClass(this.filledDetailClass))listEl.removeClass(this.filledDetailClass);placeHolderEl.dom.innerHTML=this._dataFieldTranslates[fieldEl.dom.name];fieldEl.dom.value=
""}else{if(!listEl.hasClass(this.filledDetailClass))listEl.addClass(this.filledDetailClass);placeHolderEl.dom.innerHTML=originalNewValue;fieldEl.dom.value=newValue}fieldEl.un("blur",this.onPersonalDataBlur,this)},onProfileQuestionRowClick:function(ev,target){var targetEl=Ext.get(target),liEl;if(targetEl.dom.nodeName.toLowerCase()!="li")liEl=targetEl.parent("li");else liEl=targetEl;if(!liEl.hasClass(this.activeRowClass)){this._saveFieldBlur();this.onEditButtonClick(ev,liEl.select(this.editButtonSel).item(0));
this._saveData={rowEl:liEl,fieldEl:liEl.select(this.inputType).item(0),originalValue:liEl.select(this.inputType).item(0).getValue()}}},onInnerBoxCloseButtonClick:function(ev,target){var _target=Ext.fly(target).parent("div");ev.preventDefault();this._displayInnerBox(_target,true);if(this._birthdateErrorEl.isVisible())this._birthdateErrorEl.hide()},onEditButtonClick:function(ev,target){ev.preventDefault();var newValue;var buttonEl=Ext.fly(target),contentEl,inputValue,buttonTextEl;if(buttonEl.dom.nodeName.toLowerCase()!=
"a")buttonEl=Ext.get(buttonEl.findParent("a"));if(buttonEl.hasClass(this.editQuestionButtonClass)){contentEl=buttonEl.next(this.inputType);inputValue=contentEl.getValue();if(!contentEl.isVisible()){this._setFocus(contentEl);newValue=this._activateField(true,contentEl,contentEl.dom.type,true)}else if(inputValue!=""&&contentEl.hasClass(this.disabledInputClass)&&!buttonEl.hasClass(this.saveButtonClass)){this._setFocus(contentEl);newValue=this._activateField(true,contentEl,contentEl.dom.type,true)}else if(!contentEl.hasClass(this.disabledInputClass)||
buttonEl.hasClass(this.saveButtonClass)){newValue=this._activateField(false,contentEl,contentEl.dom.type,true);this._saveQuestion(contentEl,newValue)}}},onPrivacySettingsButtonClick:function(ev){ev.preventDefault();this._displayInnerBox(this._privacySettingsPopupEl,true)},onEscKeypress:function(ev){if(ev.keyCode==27){if(this._activeListElem){this._resetField(this._activeListElem);delete this._activeListElem}else if(this._visibleInnerBox instanceof Ext.Element)this._displayInnerBox(this._visibleInnerBox,
true);else if(this._closeEnabled)JSM.overlay.Profile.superclass.onEscKeypress.apply(this,arguments);this._closeEnabled=true}},onActiveFieldKeyDown:function(ev,target,options){var field=Ext.get(target);switch(ev.getCharCode()){case 13:if(field.dom.type.toLowerCase()==="text"){ev.preventDefault();field.blur()}break;case 27:ev.preventDefault();this._resetField(field,options);break;default:break}},onListItemSelect:function(ev){var listEl=ev.scope.element.parent("li"),itemEl=listEl.select("."+this.personalDataClass).item(0),
actualBlock=ev.scope.element,saveParams={},nextItem;if(itemEl.hasClass(this.multipleSelectClass)&&listEl.select(this.personalDataSelectListSel).getCount()>=this._levelIndex+1){nextItem=listEl.select(this.personalDataSelectListSel).item(this._levelIndex);nextItem.display("block");actualBlock.display("none");this._levelIndex++}else{if(itemEl.hasClass(this.inputBirthDateId)){this._saveBirthdate(itemEl);this._levelIndex=1;itemEl.display("block");actualBlock.display("none");return}itemEl.display("block").dom.innerHTML=
ev.target.dom.innerHTML;actualBlock.display("none");saveParams=this._getDefaultSaveParams();saveParams[itemEl.dom.id]=ev.scope.hiddenInputEl.dom.value;this._sendRequest(saveParams,function(response){this._saveFormSuccess("",response)},function(response){this._saveFormError(response)})}},_resetField:function(field,options){if(field.hasClass(this.selectListClass))field.parent("li").select(this.personalDataSelectListSel).each(function(){this.display("none")});else{if(options&&options.originalValue!=
undefined){field.un("blur",this.onPersonalDataBlur,this);this._setFocus(field);this._activateField(false,field);field.dom.value=options.originalValue}field.display("none")}var personalDataEL=field.parent("li").select("."+this.personalDataClass);if(personalDataEL.getCount())personalDataEL.item(0).display("block");Ext.fly(this.selectListInputPrefix+this.inputYearName).dom.value=this._dataFieldTranslates[this.inputYearName];Ext.fly(this.selectListInputPrefix+this.inputMonthName).dom.value=this._dataFieldTranslates[this.inputMonthName];
Ext.fly(this.selectListInputPrefix+this.inputDayName).dom.value=this._dataFieldTranslates[this.inputDayName]},_saveBirthdate:function(itemEl){var formattedBirthDate=this.setBirthDateValues(),saveParams=this._getDefaultSaveParams();saveParams.birthdate=formattedBirthDate;var birthYear=this._birthdate[this.yearListContainerId],birthMonth=this._birthdate[this.monthListContainerId],birthDay=this._birthdate[this.dayListContainerId],birthDate=this._validateBirthDate()?(new Date(birthYear,birthMonth,birthDay)).valueOf():
undefined,currentAge=birthDate?this._calculateAge(birthYear,birthMonth,birthDay):0;if(this._validateDate(birthYear,birthMonth,birthDay)){itemEl.dom.innerHTML=Chaos.translate("{num} years old",{num:currentAge});this._sendRequest(saveParams,function(response){this._saveFormSuccess("",response)},function(response){this._saveFormError(response)})}else if(!this._birthdateErrorEl.isVisible())this._birthdateErrorEl.show(true);Ext.fly(this.selectListInputPrefix+this.inputYearName).dom.value=this._dataFieldTranslates[this.inputYearName];
Ext.fly(this.selectListInputPrefix+this.inputMonthName).dom.value=this._dataFieldTranslates[this.inputMonthName];Ext.fly(this.selectListInputPrefix+this.inputDayName).dom.value=this._dataFieldTranslates[this.inputDayName]},_saveFieldBlur:function(){if(this._saveData){var newValue=this._activateField(false,this._saveData.fieldEl,this._saveData.fieldEl.dom.type,true);if(this._saveData.originalValue!=newValue)this._saveQuestion(this._saveData.fieldEl,newValue)}},_saveQuestion:function(fieldEl,newFieldValue){var _newFieldValue=
JSM.Util.trim(newFieldValue.replace(/^(&nbsp;|<br>|<br \/>)+/," ")),_originalValue=newFieldValue,inputName=fieldEl.getAttribute("name");if(_newFieldValue!==""||_originalValue==""){var value=fieldEl.dom.value,placeHolderEl=Ext.get(inputName),displayName,saveParams;if(this._inputValues[inputName]!==value){this._inputValues[inputName]=value;displayName=this._inputNickEl.getValue(),saveParams=this._getDefaultSaveParams();saveParams[this.inputNickName]=displayName;saveParams[fieldEl.dom.name]=fieldEl.dom.value;
this._sendRequest(saveParams,this._saveTextAreaDataSuccess,this._saveTextAreaDataError);placeHolderEl.dom.innerHTML=newFieldValue}}else fieldEl.dom.value=this._inputValues[inputName]},_activateList:function(activate,listEl,target,index){var actualList=listEl.select(this.personalDataSelectListSel),actualInputEl;if(activate){actualList.item(index||0).display("block");actualInputEl=actualList.item(index||0).select("input[type=text]").item(0);actualInputEl.focus();actualInputEl.on("keydown",this.onActiveFieldKeyDown,
this);this._activeListElem=actualInputEl;target.display("none");this._closeEnabled=false}else{var itemEl=listEl.select("."+this.personalDataClass).item(0);itemEl.display("block");actualList.each(function(){this.display("none")});delete this._activeListElem}},_activateField:function(activate,fieldEl,type,isShowCounter){var placeHolderEl=Ext.get(fieldEl.dom.name),rowEl=fieldEl.parent("li"),textContent,originalValue;this._disableInput(fieldEl,!activate);placeHolderEl.display(activate?"none":"block");
fieldEl.display(activate?"block":"none");try{Ext.fly(fieldEl.dom.name+this.counterBlockIdPostfix).display(activate?"block":"none")}catch(e){}if(activate){this._isEditingInProgress=true;rowEl.addClass(this.activeRowClass);this.fireEvent(JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_START,{scope:this,field:fieldEl});this._shadowEl=JSM.Util.addAutoGrow(fieldEl,type);this._setFocus(fieldEl);this._setCharacterCounter(fieldEl,isShowCounter);this._closeEnabled=false;originalValue=fieldEl.getValue();fieldEl.on("keydown",
this.onActiveFieldKeyDown,this,{originalValue:originalValue})}else{this._isEditingInProgress=false;textContent=this._shadowEl.dom.innerHTML;rowEl.removeClass(this.activeRowClass);this.fireEvent(JSM.overlay.Profile.EVENT_TEXTAREA_EDIT_END,{scope:this,field:fieldEl});JSM.Util.removeAutoGrow(fieldEl);fieldEl.un("keydown",this.onActiveFieldKeyDown,this)}return textContent?JSM.Util.trim(textContent):""},_getDefaultSaveParams:function(){return{is_public_profile:this._publicProfileInputEl.getValue(),form_token:this.element.select("input[name="+
this.tokenFieldName+"]").item(0).getValue()}},_setController:function(){this._memberProfileController=new JSM.controller.MemberProfileController({init:function(){},items:{"Broadcaster":{component:Chaos.Broadcaster,listeners:{}},"MemberProfile":{component:this,listeners:{"get-content-response":"onGetProfileBlockSuccess","save-success":"onProfileSaveSuccess","save-error":"onProfileSaveError","save-failure":"onProfileSaveFailure","inner-popup-open":"onInnerPopupOpen","inner-popup-close":"onInnerPopupClose",
"textarea-edit-start":"onTextAreaEditStart","textarea-edit-end":"onTextAreaEditEnd"}}}});return this._memberProfileController},_displayInnerBox:function(boxEl,useMask){var _boxEl=Ext.get(boxEl);if(_boxEl){if(_boxEl.isVisible()){_boxEl.hide();delete this._visibleInnerBox;this.fireEvent(JSM.overlay.Profile.EVENT_INNER_POPUP_CLOSE,{scope:this,box:boxEl})}else{this._hideVisibleInnerBox();this.fireEvent(JSM.overlay.Profile.EVENT_INNER_POPUP_OPEN,{scope:this,box:boxEl});_boxEl.show();this.setVisibleInnerBox(_boxEl)}if(useMask)if(this._popupBoxMask.isVisible())this._popupBoxMask.hide();
else this._popupBoxMask.show()}this._privacySettingsForm.hideAllErrors()},setVisibleInnerBox:function(boxEl){this._visibleInnerBox=boxEl instanceof Ext.Element?boxEl:Ext.get(boxEl)},setBirthDateValues:function(){var yearValue=Ext.fly(this.selectListInputPrefix+this.inputYearName).getValue(),monthValue=Ext.fly(this.selectListInputPrefix+this.inputMonthName).getValue(),dayValue=Ext.fly(this.selectListInputPrefix+this.inputDayName).getValue();if(yearValue!==undefined)this._birthdate[this.yearListContainerId]=
yearValue;if(monthValue!==undefined)this._birthdate[this.monthListContainerId]=monthValue;if(dayValue!==undefined)this._birthdate[this.dayListContainerId]=dayValue;if(this._validateBirthDate())this._inputBirthDateEl.dom.value=yearValue+"-"+monthValue+"-"+dayValue;return this._inputBirthDateEl.getValue()},_validateBirthDate:function(){return Chaos.Validator.empty(this._birthdate[this.yearListContainerId])&&this._birthdate[this.yearListContainerId]>0&&Chaos.Validator.empty(this._birthdate[this.monthListContainerId])&&
this._birthdate[this.monthListContainerId]>0&&Chaos.Validator.empty(this._birthdate[this.dayListContainerId])&&this._birthdate[this.dayListContainerId]>0},_validateDate:function(year,month,day){var y=parseInt(year,10),m=parseInt(month,10),d=parseInt(day,10),date=new Date(y,m-1,d);return date.getFullYear()==y&&date.getMonth()+1==m&&date.getDate()==d},_saveFormSuccess:function(formId,response){this._hideVisibleInnerBox();this._showHint(true);this._refreshToken(response.json[this.tokenFieldName]);this.fireEvent(JSM.overlay.Profile.EVENT_SAVE_SUCCESS,
{scope:this,response:response,formId:formId})},_saveFormError:function(response){this._refreshToken(response.json[this.tokenFieldName]);this.fireEvent(JSM.overlay.Profile.EVENT_SAVE_ERROR,{scope:this,response:response});this._showHint(false);this._hideVisibleInnerBox()},_calculateAge:function(year,month,day){var currentDate=new Date,currentYear=currentDate.getFullYear(),currentMonth=currentDate.getMonth(),currentDay=currentDate.getDate(),age=currentYear-year||0;if(currentMonth<month-1)age--;if(month-
1==currentMonth&&currentDay<day)age--;return age},_showHint:function(success){var innerWidth=window.innerWidth||document.documentElement.clientWidth,innerHeight=window.innerHeight||document.documentElement.clientHeight,self=this;this._serverInfoHint.element.addClass(!success?this.errorHintClass:"");this._serverInfoHint.setData("body",{message:success?this._successTranslate:this._errorTranslate}).show().setPosition(innerWidth/2-this._serverInfoHint.element.getWidth()/2,innerHeight/2-this._serverInfoHint.element.getHeight()/
2);if(!(this._delayedHideHintTask instanceof Ext.util.DelayedTask))this._delayedHideHintTask=new Ext.util.DelayedTask(function(){this._serverInfoHint.hide(this.hideHintDuration,function(){self._serverInfoHint.element.removeClass(self.errorHintClass)})},this);this._delayedHideHintTask.delay(this.hideHintDelay)},_hideVisibleInnerBox:function(){if(this._visibleInnerBox&&this._visibleInnerBox.isVisible()&&this._visibleInnerBox.hasClass(this.innerPopupClass))this._displayInnerBox(this._visibleInnerBox,
true);if(this._popupBoxMask.isVisible())this._popupBoxMask.hide()},_disableInput:function(inputEl,disable){if(inputEl){inputEl.dom.readOnly=disable;if(disable)inputEl.addClass(this.disabledInputClass);else inputEl.removeClass(this.disabledInputClass)}},_setFocus:function(el){el.focus();var value=el.getValue();el.dom.value="";return el.dom.value=value},_sendRequest:function(params,successCallback,errorCallback,failureCallback){Chaos.Ajax.request({type:"json",method:"post",url:Chaos.getUrl(this.sendAnswersRoute,
{},{},""),scope:this,params:params,success:successCallback,error:errorCallback,failure:failureCallback})},_saveTextAreaDataSuccess:function(response){this._refreshToken(response.json[this.tokenFieldName]);this._showHint(true)},_saveTextAreaDataError:function(response){var self=this;this._inputEl.each(function(){self._disableInput(this,true)});this._refreshToken(response.json[this.tokenFieldName]);this._hideVisibleInnerBox();this._showHint(false)},_refreshToken:function(tokenValue){this.element.select("input[name="+
this.tokenFieldName+"]").each(function(){this.dom.value=tokenValue})},_setCharacterCounter:function(field,isShowCounter){if(field){var currentCounter=this._characterCounters[field.dom.name],element=field.parent("ul");if(!(currentCounter instanceof JSM.component.CharacterCounter))currentCounter=new JSM.component.CharacterCounter(element,{inputId:field.id,counterId:field.dom.name+this.fieldCounterIdPostfix,computeMaxChar:true,hasWarningLimit:false,isMaxCharSound:true,isShowCounter:isShowCounter})}return currentCounter},
onElementClick:function(ev,target){var _target=Ext.get(target);if(Ext.isIE7)if(!this._overlayBlockEl.contains(_target))JSM.overlay.Profile.superclass.onClosePopupClick.apply(this,arguments);if(this._overlayBlockEl.contains(_target)&&!Ext.fly(this.profileQuestionsBlockId).contains(_target))this._saveFieldBlur()},bind:function(){JSM.overlay.Profile.superclass.bind.call(this)},unbind:function(){if(this._inputEl)this._inputEl.un("focus",this.onInputFocus,this);if(this._memberProfileController instanceof
JSM.controller.MemberProfileController){this._memberProfileController.unbind();delete this._memberProfileController}if(this._innerBoxCloseButtonEl)this._innerBoxCloseButtonEl.un("click",this.onInnerBoxCloseButtonClick,this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this);if(this._privacySettingsForm){this._privacySettingsForm.hideAllErrors();this._privacySettingsForm.hideHint();this._privacySettingsForm.unbind();this._privacySettingsForm.destroy();delete this._privacySettingsForm}this.element.un("click",
this.onElementClick,this);JSM.overlay.Profile.superclass.unbind.call(this)}});Ext.namespace("JSM.overlay");JSM.overlay.Questionnaire=function(el,config){JSM.overlay.Questionnaire.superclass.constructor.call(this,el,config)};JSM.overlay.Questionnaire.EVENT_ANSWER_CLICK="answer-click";JSM.overlay.Questionnaire.EVENT_ANSWER_CHANGE="answer-change";JSM.overlay.Questionnaire.EVENT_SEND_SELECTION_SUCCESS="send-selection-success";JSM.overlay.Questionnaire.EVENT_AJAX_ERROR="questionnaire-error";
JSM.overlay.Questionnaire.EVENT_AJAX_FAILURE="questionnaire-failure";JSM.overlay.Questionnaire.EVENT_COMPLETE="questionnaire-complete";
Chaos.extend(JSM.overlay.Questionnaire,JSM.Overlay,{name:"Questionnaire",overlay:"overlay",isModal:true,getContentUrl:"Question/GetQuestionBlock",answerTag:"a",questionTag:"li",questionContainerId:undefined,questionBlockId:undefined,textMessageBlockId:undefined,asnwerBlockId:undefined,blockWidth:undefined,slideDuration:0.2,hasForm:false,formId:undefined,inputId:undefined,suggestionErrorId:undefined,suggestionErrorMessageClass:undefined,sendSelectedAnswersRoute:undefined,sendAfter:3,textMessageAjaxUrlRoute:undefined,
isCharCounterNeeded:true,maxCharLimitNumber:1E3,warningCharLimitNumber:undefined,textAnswerFieldId:undefined,charInfoId:undefined,counterId:undefined,_answerBlockEl:undefined,_questionBlockEl:undefined,_questionContainerEl:undefined,_questionBlockWidth:0,_answered:{},_questionBlocks:{},_blockAnswers:{},_questionsLength:0,_questionNumber:1,_idPrefix:"question_",_isAnimating:false,init:function(el,config){JSM.overlay.Questionnaire.superclass.init.call(this,el,config);this.addEvents(JSM.overlay.Questionnaire.EVENT_ANSWER_CLICK,
JSM.overlay.Questionnaire.EVENT_ANSWER_CHANGE,JSM.overlay.Questionnaire.EVENT_COMPLETE);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){this._answerBlockEl=Ext.get(this.answerBlockId);this._questionBlockEl=Ext.get(this.questionBlockId);this._questionContainerEl=Ext.get(this.questionContainerId);this._textMessageBlockEl=Ext.get(this.textMessageBlockId);this._suggestionErrorEl=Ext.get(this.suggestionErrorId);this._maxCharLimitWarninLabelEl=Ext.get(this.charInfoId);
this._questionBlockWidth=this.blockWidth||this._questionBlockEl.select(this.questionTag).item(0).getWidth();this.registerCurrentAnswers();if(this.hasForm){this.answerForm=new JSM.form.Form(this.textMessageBlockId,{scope:this,submitIfRemoteValid:true,formErrorSel:".general_warning_tag",isAjax:true,ajaxUrl:this.textMessageAjaxUrlRoute,isBackConnNeeded:JSM.Util.isSecurePage(),requestParams:[this.inputId],disableSubmitOnSubmit:true,useModalForGeneralErrors:false,success:this.onSubmitSuccess,error:this.onSubmitError,
errorHideDuration:0});Ext.get(this.inputId).on("focus",this.answerForm.hideAllErrors,this.answerForm);this.characterCounter=new JSM.component.CharacterCounter(this.textMessageBlockId,{maxChar:this.maxCharLimitNumber,inputId:this.inputId,counterId:this.counterId,charInfoId:this.charInfoId});this.characterCounter.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.displayMaxCharLimit,this)}},registerCurrentAnswers:function(){var self=this;var answers=this.getAnswerBlock();if(answers.getCount()>
0)answers.each(function(){this.on("click",self.onAnswerClick,self)})},getAnswerBlock:function(){return this._answerBlockEl.select(this.answerTag)},registerAnswer:function(value){this._answered[this._idPrefix+this._questionNumber]=value;return this._answered},changeQuestionBlock:function(){var self=this;if(this._questionNumber<=this.sendAfter&&!this._isAnimating){this._isAnimating=true;this._questionBlockEl.animate({left:{by:-this._questionBlockWidth,unit:"px"}},this.slideDuration,function(){self._isAnimating=
false});this._questionNumber++;this.fireEvent(JSM.overlay.Questionnaire.EVENT_ANSWER_CHANGE,this)}else{this._questionContainerEl.setStyle("display","none");this._textMessageBlockEl.setStyle("display","block")}},onAnswerClick:function(ev,target){ev.preventDefault();if(!this._isAnimating){var answer=Ext.get(target).parent(this.answerTag);if(answer){this.registerAnswer(answer.dom.className);if(this._questionNumber==this.sendAfter)this.sendSelectedAnswers();this.fireEvent(JSM.overlay.Questionnaire.EVENT_ANSWER_CLICK,
this);this.changeQuestionBlock()}}},sendSelectedAnswers:function(){var url=Chaos.getUrl(this.sendSelectedAnswersRoute,{},{},"");if(JSM.Util.isSecurePage())url=Chaos.Ajax.setXDomainUrl(url,true,true);Chaos.Ajax.request({method:"post",url:url,type:"json",scope:this,xdomain:JSM.Util.isSecurePage(),params:this._answered,success:this.sendSelectionSuccess,error:function(){},failure:function(){}})},sendSelectionSuccess:function(response){this.fireEvent(JSM.overlay.Questionnaire.EVENT_SEND_SELECTION_SUCCESS,
response);this.changeQuestionBlock()},onSubmitSuccess:function(){this.fireEvent(JSM.overlay.Questionnaire.EVENT_COMPLETE,this);this.hide()},onSubmitError:function(){this.fireEvent(JSM.overlay.Questionnaire.EVENT_AJAX_ERROR,this)},displayMaxCharLimit:function(){this._maxCharLimitWarninLabelEl.show()},hide:function(){if(this.hasForm)this.answerForm.hideAllErrors();JSM.overlay.Questionnaire.superclass.hide.call(this)},bind:function(){JSM.overlay.Questionnaire.superclass.bind.call(this)},unbind:function(){JSM.overlay.Questionnaire.superclass.unbind.call(this);
this.element.select("."+this.answerClass).each(function(){this.un("click",this.onAnswerClick,this)})}});Ext.namespace("JSM.overlay");JSM.overlay.QuickBuy=function(el,config){JSM.overlay.QuickBuy.superclass.constructor.call(this,el,config)};JSM.overlay.QuickBuy.STATUS_NEW="new";JSM.overlay.QuickBuy.STATUS_REOPEN="reopen";JSM.overlay.QuickBuy.STATUS_PENDING="statusPending";JSM.overlay.QuickBuy.STATUS_APPROVED="statusApproved";JSM.overlay.QuickBuy.STATUS_ERROR="statusError";
JSM.overlay.QuickBuy.STATUS_DENIED="statusDenied";JSM.overlay.QuickBuy.ACTION_NAME="QB-inprogress";JSM.overlay.QuickBuy.RESULT_SUCCESS="success";JSM.overlay.QuickBuy.RESULT_FAILURE="failure";JSM.overlay.QuickBuy.RESULT_PROCESSING="processing";JSM.overlay.QuickBuy.EVENT_SHOW="overlay-quickbuy-show";JSM.overlay.QuickBuy.EVENT_HIDE="overlay-quickbuy-hide";JSM.overlay.QuickBuy.EVENT_REDIRECT="overlay-quickbuy-redirect";JSM.overlay.QuickBuy.EVENT_MINIMIZE="overlay-quickbuy-minimize";
JSM.overlay.QuickBuy.EVENT_TRANSACTION_SUCCESS="overlay-quickbuy-transaction-success";JSM.overlay.QuickBuy.GLOBALEVENT_MINIMIZE="overlay-quickbuy-minimize";JSM.overlay.QuickBuy.EVENT_PURCHASE_FAILED="purchase-failed";JSM.overlay.QuickBuy.EVENT_PURCHASE_SUCCESS="purchase-success";
Chaos.extend(JSM.overlay.QuickBuy,JSM.Overlay,{name:"QuickBuy",packageSel:".package",startPurchaseRoute:"QuickBuy/StartPurchaseFromOverlay",checkPurchaseRoute:"QuickBuy/CheckPurchaseStatus",mainPageId:"packages",balanceBlockSel:".balance",inProgressPageId:"transaction_process",successPageId:"transaction_success",errorPageId:"transaction_failure",errorMessageSel:".transaction_error_message",duration:0.1,addedCreditsContainerSel:"#added_credits",successPageCloseButtonSel:".close",contentClass:"content",
minimizedWindowCloseButtonClass:"close_button",autoLoad:false,redirectUrl:undefined,useMask:true,isMinimizeEnabled:true,minimizedBlockIdPrefix:"minimized_",minimizedBlockId:"minimized-quickbuy",minimizedClass:"minimized",referenceBlockId:"get_credits",referenceContainerId:"header_container",referenceContainerHeight:40,minimizedWindowTop:10,minZIndex:9999,status:"new",reopenParams:undefined,creditBoxSel:'div[class="package"]',packageValueSel:".package_value",scrollerBlockId:undefined,scrollerContainerId:undefined,
scrollerContentId:undefined,isRepositionEnabled:true,isResizeEnabled:true,popupBoxHeaderSel:undefined,overlayBlockId:"overlay_quickbuy",fastCheckPurchaseTimeOut:1E3,prolongedCheckPurchaseTimeOut:3E4,changeToMinimizedTimeOut:2E3,_contentReady:false,_selectedCreditValue:undefined,_mainPageEl:undefined,_inProgressPageEl:undefined,_successPageEl:undefined,_errorPageEl:undefined,_minimizedInProgressPageEl:undefined,_minimizedSuccessPageEl:undefined,_minimizedErrorPageEl:undefined,_currentPageEl:undefined,
_minimizedWindowEl:undefined,_referenceEl:undefined,_referenceContainerEl:undefined,_purchaseKey:undefined,_checkPurchaseTimeOut:undefined,_inProgressMask:undefined,_currentStatus:undefined,_isHideEnabled:true,_isMinimized:false,_isPurchaseInProgess:false,_purchaseParams:undefined,_callCheckPurchaseTask:undefined,_changeTimeOutTask:undefined,_changeToMinimizedViewTask:undefined,_position:undefined,init:function(el,config){JSM.overlay.QuickBuy.superclass.init.call(this,el,config);this.on(JSM.Overlay.EVENT_GETCONTENT_RESPONSE,
this._onGetContentResponse,this);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this._onContentDisplayed,this);this.on(JSM.Overlay.EVENT_GETCONTENT_ERROR,this._onGetContentError,this);this._callCheckPurchaseTask=new Ext.util.DelayedTask(this._checkPurchaseStatus,this);this._changeTimeOutTask=new Ext.util.DelayedTask(function(){this._showInProgressMask(false);this._checkPurchaseTimeOut=this.prolongedCheckPurchaseTimeOut},this);if(this.isMinimizeEnabled)this._changeToMinimizedViewTask=new Ext.util.DelayedTask(this._changeToMinimizedView,
this,[true]);this._checkPurchaseTimeOut=this.fastCheckPurchaseTimeOut;this.addEvents(JSM.overlay.QuickBuy.EVENT_SHOW,JSM.overlay.QuickBuy.EVENT_HIDE,JSM.overlay.QuickBuy.EVENT_REDIRECT,JSM.overlay.QuickBuy.EVENT_MINIMIZE,JSM.overlay.QuickBuy.EVENT_TRANSACTION_SUCCESS);Chaos.addEvents(JSM.overlay.QuickBuy.GLOBALEVENT_MINIMIZE,JSM.overlay.QuickBuy.EVENT_PURCHASE_FAILED,JSM.overlay.QuickBuy.EVENT_PURCHASE_SUCCESS);this._purchaseParams={status:undefined,purchaseKey:undefined,credit:undefined,lang:Chaos.I18n.getInstance().getLanguage(),
sessionId:JSM.Util.getSessionId()};if(!this._contentReady){this.getContent();this._contentReady=true}},checkStatus:function(){switch(this.status){case JSM.overlay.QuickBuy.STATUS_REOPEN:if(this.reopenParams)if(this.reopenParams.purchaseKey!=undefined&&this.reopenParams.sessionId==JSM.Util.getSessionId()){this._purchaseKey=this.reopenParams.purchaseKey;this._selectedCreditValue=this.reopenParams.credit;this._checkPurchaseStatus();if(this._changeTimeOutTask)this._changeTimeOutTask.delay(this.prolongedCheckPurchaseTimeOut)}else JSM.component.StorageAction.deleteAction(JSM.overlay.QuickBuy.ACTION_NAME);
break;case JSM.overlay.QuickBuy.STATUS_NEW:default:break}},saveProcess:function(){if(this._isPurchaseInProgess&&this._purchaseParams)var _saved=JSM.component.StorageAction.store(JSM.overlay.QuickBuy.ACTION_NAME,this._purchaseParams)},_onGetContentResponse:function(response){if(response&&response.json.success)if(response.json.isRedirectNeeded){this.fireEvent(JSM.overlay.QuickBuy.EVENT_REDIRECT,{scope:this});this._redirectUser()}else{this.checkStatus();if(this.status==JSM.overlay.QuickBuy.STATUS_NEW)this.show(0.1,
function(){this.displayContent()},this);else{this._isMinimized=false;this.renderContent(this.currentContent);this.manageContent();this._createMinimizedBlock(this._currentStatus);this._changeToMinimizedView(false)}this._contentReady=true}},_onContentDisplayed:function(){this.fireEvent(JSM.overlay.QuickBuy.EVENT_SHOW,{scope:this});this.manageContent()},manageContent:function(){this._packagesEl=this.element.select(this.packageSel);this._mainPageEl=Ext.get(this.mainPageId);this._inProgressPageEl=Ext.get(this.inProgressPageId);
this._inProgressPageContent=this._inProgressPageEl.dom.innerHTML;this._successPageEl=Ext.get(this.successPageId);this._successPageContent=this._successPageEl.dom.innerHTML;this._errorPageEl=Ext.get(this.errorPageId);this._errorPageContent=this._errorPageEl.dom.innerHTML;this._minimizedInProgressPageEl=Ext.get(this.minimizedBlockIdPrefix+this.inProgressPageId);this._minimizedInProgressPageContent=this._minimizedInProgressPageEl.dom.innerHTML;this._minimizedSuccessPageEl=Ext.get(this.minimizedBlockIdPrefix+
this.successPageId);this._minimizedSuccessPageContent=this._minimizedSuccessPageEl.dom.innerHTML;this._minimizedErrorPageEl=Ext.get(this.minimizedBlockIdPrefix+this.errorPageId);this._minimizedErrorPageContent=this._minimizedErrorPageEl.dom.innerHTML;this._successPageCloseButtonEl=this.element.select(this.successPageCloseButtonSel);this._referenceEl=Ext.get(this.referenceBlockId);this._referenceContainerEl=Ext.get(this.referenceContainerId);this.element.select(this.packageSel).on("click",this.onSelectPackageClick,
this);this._successPageCloseButtonEl.on("click",this.onCloseButtonClick,this);this._currentPageEl=this._mainPageEl;this._purchaseParams={status:undefined,purchaseKey:undefined,credit:undefined,lang:Chaos.I18n.getInstance().getLanguage(),sessionId:JSM.Util.getSessionId()}},_onGetContentError:function(ev){this._redirectUser()},_redirectUser:function(){JSM.Util.setCursor("wait");var _redirectUrl=this.redirectUrl||Chaos.Config.get("getCreditsUrl");location.href=_redirectUrl},onSelectPackageClick:function(ev,
target){ev.preventDefault();var _selectedPackageEl=Ext.get(target).findParent(this.creditBoxSel,undefined,true);this._selectedCreditValue=_selectedPackageEl.select(this.packageValueSel).item(0).dom.innerHTML;this._startPurchase();this._showInProgressMask(true)},_startPurchase:function(){if(typeof this._selectedCreditValue=="string"){var _params={credit:this._selectedCreditValue,lang:Chaos.I18n.getInstance().getLanguage()};this._request(Chaos.getUrl(this.startPurchaseRoute,{},{},""),_params,this._startPurchaseSuccess,
this._startPurchaseError,this._startPurchaseError);this._isPurchaseInProgess=true;this._purchaseParams.status=JSM.overlay.QuickBuy.STATUS_PENDING;this._purchaseParams.purchaseKey=this._purchaseKey;this._purchaseParams.credit=_params.credit}else;},_request:function(url,params,successCallback,errorCallback,failureCallback){Chaos.Ajax.request({url:url,params:params,method:"POST",type:"json",scope:this,success:successCallback,error:errorCallback,failure:failureCallback})},_startPurchaseSuccess:function(response){if(response&&
response.json.success&&response.json.purchaseStatus===JSM.overlay.QuickBuy.STATUS_PENDING){if(this.isMinimizeEnabled){this._isHideEnabled=false;this._createMinimizedBlock();this._changeToMinimizedViewTask.delay(this.changeToMinimizedTimeOut)}else this._displayPage("inprogress");this._purchaseKey=response.json.purchaseKey;if(this._callCheckPurchaseTask)this._callCheckPurchaseTask.delay(this._checkPurchaseTimeOut);if(this._changeTimeOutTask)this._changeTimeOutTask.delay(this.prolongedCheckPurchaseTimeOut);
this._showInProgressMask(true);this._purchaseParams.status=JSM.overlay.QuickBuy.STATUS_PENDING,this._purchaseParams.purchaseKey=this._purchaseKey;this.saveProcess()}else;},_startPurchaseError:function(response){this._displayPage("error");delete this._purchaseParams;this._showInProgressMask(false);this._isPurchaseInProgess=false},_checkPurchaseStatus:function(){if(this._purchaseKey){var _params={purchaseKey:this._purchaseKey};this._request(Chaos.getUrl(this.checkPurchaseRoute,{},{},""),_params,this._checkPurchaseStatusSuccess,
this._checkPurchaseStatusError,this._checkPurchaseStatusFailure);this._purchaseParams.purchaseKey=this._purchaseKey;this.saveProcess()}else;},_checkPurchaseStatusSuccess:function(response){if(response.json.purchaseStatus){if(!this._contentReady){this._contentReady=true;this.getContent()}switch(response.json.purchaseStatus){case JSM.overlay.QuickBuy.STATUS_PENDING:if(this._callCheckPurchaseTask)this._callCheckPurchaseTask.delay(this._checkPurchaseTimeOut);if(this.isMinimizeEnabled)this._isHideEnabled=
false;this._isPurchaseInProgess=true;break;case JSM.overlay.QuickBuy.STATUS_ERROR:case JSM.overlay.QuickBuy.STATUS_DENIED:Chaos.fireEvent(JSM.overlay.QuickBuy.EVENT_PURCHASE_FAILED,this);var element,errorMessage;if(this._callCheckPurchaseTask)this._callCheckPurchaseTask.cancel();if(this.isMinimizeEnabled){if(!this._isMinimized)this._changeToMinimizedView(true);this._isHideEnabled=true;this._changeMinimizedWindowContent(this._minimizedErrorPageContent,JSM.overlay.QuickBuy.RESULT_FAILURE);element=this._minimizedWindowEl}else{element=
this.element;this.element.select(this.balanceBlockSel).remove();this._displayPage("error")}errorMessage=response.json.purchaseStatusMessage;if(typeof errorMessage!="undefined"&&errorMessage!="")element.select(this.errorMessageSel).each(function(){this.dom.innerHTML=errorMessage;this.show()});this._showInProgressMask(false);this._isPurchaseInProgess=false;JSM.component.StorageAction.deleteAction(JSM.overlay.QuickBuy.ACTION_NAME);delete this._purchaseParams;break;default:case JSM.overlay.QuickBuy.STATUS_APPROVED:Chaos.fireEvent(JSM.overlay.QuickBuy.EVENT_PURCHASE_SUCCESS,
this);if(this._callCheckPurchaseTask)this._callCheckPurchaseTask.cancel();if(this.isMinimizeEnabled){if(!this._isMinimized)this._changeToMinimizedView(true);this._isHideEnabled=true;this._changeMinimizedWindowContent(this._minimizedSuccessPageContent,JSM.overlay.QuickBuy.RESULT_SUCCESS)}else{var _creditBlockEl=this._successPageEl.select(this.addedCreditsContainerSel).item(0);_creditBlockEl.dom.innerHTML=this._selectedCreditValue+" "+Chaos.translate("credits");this.element.select(this.balanceBlockSel).remove();
this._displayPage("success")}this._showInProgressMask(false);this._isPurchaseInProgess=false;JSM.component.StorageAction.deleteAction(JSM.overlay.QuickBuy.ACTION_NAME);delete this._purchaseParams;this.fireEvent(JSM.overlay.QuickBuy.EVENT_TRANSACTION_SUCCESS,{scope:this,response:response});break}if(this._purchaseParams)this._purchaseParams.status=response.json.purchaseStatus}},_checkPurchaseStatusError:function(error){},_checkPurchaseStatusFailure:function(error){},_displayPage:function(pageType){var currentPageEl;
this._currentPageEl.hide({duration:this.duration});switch(pageType){case "error":case "failure":currentPageEl=this._isMinimized?this._minimizedErrorPageEl:this._errorPageEl;break;case "inprogress":currentPageEl=this._isMinimized?this._minimizedInProgressPageEl:this._inProgressPageEl;break;case "success":currentPageEl=this._isMinimized?this._minimizedSuccessPageEl:this._successPageEl;default:break}currentPageEl.show({duration:this.duration});this._currentPageEl=currentPageEl;return this._currentPageEl},
_showInProgressMask:function(show){if(this.useMask){if(!(this._inProgressMask instanceof Chaos.Mask))this._inProgressMask=new Chaos.Mask(this.element,{appendTo:Ext.getBody(),maskId:"quickbuy-mask",isVisibleMask:true,maskColor:undefined,maskOpacity:0.4,defaultZindex:10010,insertionMethod:"append",useCursor:true,position:"fixed",tpl:'<div id="{maskId}"></div>'});if(show)this._inProgressMask.show();else this._inProgressMask.hide()}},_createMinimizedBlock:function(status){if(!this._minimizedWindow&&this.isMinimizeEnabled){var _content;
Ext.DomHelper.append(Ext.getBody(),{tag:"div",id:this.minimizedBlockId,html:'<div class="arrow">&nbsp;</div>'+'<a href="#" class="'+this.minimizedWindowCloseButtonClass+'"></a>'+'<div class="'+this.contentClass+'"></div>'});this._minimizedWindowEl=Ext.get(this.minimizedBlockId);this._minimizedWindowContentEl=this._minimizedWindowEl.select("."+this.contentClass).item(0);this._minimizedWindowEl.select("."+this.minimizedWindowCloseButtonClass).on("click",this.onCloseMinimizedWindowClick,this);switch(status){case JSM.overlay.QuickBuy.RESULT_SUCCESS:_content=
this._minimizedSuccessPageContent;break;case JSM.overlay.QuickBuy.RESULT_FAILURE:_content=this._minimizedErrorPageContent;break;case JSM.overlay.QuickBuy.RESULT_PROCESSING:default:_content=this._minimizedInProgressPageContent;break}this._minimizedWindowContentEl.dom.innerHTML=_content;this._minimizedWindowEl.addClass(status||JSM.overlay.QuickBuy.RESULT_PROCESSING);this._currentStatus=status;this._minimizedWindow=new Chaos.Window(this.minimizedBlockId,{overlay:"overlay",isModal:false,top:320,left:"center",
showMode:"fixed",exitOnEsc:false,autoDestroy:true,autoDestroyElement:true,setPositionOnResize:false});this._minimizedWindow.show()}},_changeToMinimizedView:function(animate){if(!this._isMinimized){this._isMinimized=true;if(this._inProgressMask&&this._inProgressMask.isVisible())this._inProgressMask.hide();this.setHidden();this._positionMinimizedWindow(animate);Ext.getBody().focus();JSM.Util.disableScroll(false);this.fireEvent(JSM.overlay.QuickBuy.EVENT_MINIMIZE,{scope:this});Chaos.fireEvent(JSM.overlay.QuickBuy.GLOBALEVENT_MINIMIZE,
{scope:this})}},_positionMinimizedWindow:function(animate){if(this._minimizedWindowEl){var _position=this._getXYForMinimizedWindow(),_self=this;this._minimizedWindowEl.animate({left:{to:_position.left},top:{to:_position.top}},animate?0.3:0.01,function(){if(!_self._minimizedWindowEl.hasClass(_self.minimizedClass))_self._minimizedWindowEl.addClass(_self.minimizedClass)})}},_getXYForMinimizedWindow:function(){return{left:this._referenceEl.getXY()[0]-this._minimizedWindowEl.getWidth()/2+this._referenceEl.getWidth()/
2,top:this._referenceContainerEl.getTop(true)+this.referenceContainerHeight+this.minimizedWindowTop}},_changeMinimizedWindowContent:function(newContent,statusCls){var _self=this;this._minimizedWindowEl.fadeOut({duration:this.duration,callback:function(){_self._minimizedWindowContentEl.dom.innerHTML=newContent;if(_self._minimizedWindowEl.hasClass(_self._currentStatus))_self._minimizedWindowEl.removeClass(_self._currentStatus);_self._minimizedWindowEl.addClass(statusCls);_self._positionMinimizedWindow(false);
_self._minimizedWindowEl.fadeIn();_self._currentStatus=statusCls}})},hide:function(){if(!(this._inProgressMask&&this._inProgressMask.isVisible())&&this._isHideEnabled){JSM.overlay.QuickBuy.superclass.hide.apply(this,arguments);this.fireEvent(JSM.overlay.QuickBuy.EVENT_HIDE,{scope:this});delete this._purchaseParams}},setHidden:function(){if(this.status==JSM.overlay.QuickBuy.STATUS_NEW){this.element.dom.innerHTML="";this.element.hide();this.overlay.hide();this.disableScroll(false)}},onWindowResize:function(){if(this._minimizedWindowEl&&
this._minimizedWindowEl.hasClass(this.minimizedClass))this._positionMinimizedWindow(false);JSM.overlay.QuickBuy.superclass.onWindowResize.call(this)},onCloseMinimizedWindowClick:function(ev){ev.preventDefault();this.closeAll()},onCloseButtonClick:function(ev){ev.preventDefault();this.hide()},closeAll:function(){if(this._isHideEnabled){if(this._minimizedWindow)this._minimizedWindow.hide();this.hide()}},isPurchaseInProgress:function(){return this._isPurchaseInProgess},onQuickBuySuccess:function(response){if(Chaos.isDefined(response.json.data)&&
Chaos.isDefined(response.json.data.trackingHtml)&&response.json.data.trackingHtml)Ext.DomHelper.append(Ext.getBody(),response.json.data.trackingHtml)},bind:function(){JSM.overlay.QuickBuy.superclass.bind.call(this);Chaos.Broadcaster.on(JSM.overlay.QuickBuy.EVENT_TRANSACTION_SUCCESS,this.onQuickBuySuccess,this);Ext.fly(window).on("resize",this.onWindowResize,this)},unbind:function(){JSM.overlay.QuickBuy.superclass.unbind.call(this);Ext.fly(window).un("resize",this.onWindowResize,this);if(this._changeTimeOutTask)this._changeTimeOutTask.cancel();
if(this._callCheckPurchaseTask)this._callCheckPurchaseTask.cancel();this.un(JSM.Overlay.EVENT_GETCONTENT_RESPONSE,this._onGetContentResponse,this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this._onContentDisplayed,this);this.un(JSM.Overlay.EVENT_GETCONTENT_ERROR,this._onGetContentError,this);if(this._packagesEl&&this._successPageCloseButtonEl){this._packagesEl.un("click",this.onSelectPackageClick,this);this._successPageCloseButtonEl.un("click",this.onCloseButtonClick,this)}if(this._minimizedWindowEl)this._minimizedWindowEl.select("."+
this.minimizedWindowCloseButtonClass).on("click",this.onCloseMinimizedWindowClick,this);delete this._purchaseParams;this._showInProgressMask(false);this._isPurchaseInProgess=false}});Ext.namespace("JSM.overlay");JSM.overlay.RefreshWindow=function(el,config){JSM.overlay.RefreshWindow.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.RefreshWindow,JSM.Overlay,{name:"RefreshWindow",isModal:true,autoDestroy:true,autDestroyElement:true,mustRender:false,exitOnEsc:false,exitOnOverlayClick:false,overlay:"overlay",windowId:"refresh_window",title:"",message:"",btnText:"Refresh browser",refreshButtonId:"refresh_button",getContentViaAjax:false,toggleEventHandlersOnDisplay:true,isScrollingDisabled:true,autoLoad:false,duration:0.1,_refreshWindowTemplate:undefined,init:function(el,config){JSM.overlay.RefreshWindow.superclass.init.call(this,
el,config);this.show(this.duration,function(){this.createWindow();this.setPosition(this.left,this.top)},this)},show:function(duration,callback,scope){JSM.overlay.RefreshWindow.superclass.show.call(this,duration,callback,scope)},createWindow:function(){var data={id:this.windowId,title:this.title,message:this.message,buttonId:this.refreshButtonId,btnText:this.btnText};if(!(this._refreshWindowTemplate instanceof JSM.template.RefreshWindowTemplate))this._refreshWindowTemplate=new JSM.template.RefreshWindowTemplate;
var temp=this._refreshWindowTemplate.render(data);Ext.DomHelper.overwrite(this.element,temp);this.refreshButtonEl=Ext.get(this.refreshButtonId);this.refreshButtonEl.on("click",this.onRefreshButtonClick,this);this.disableScroll(true)},onRefreshButtonClick:function(ev){ev.preventDefault();window.location.href=Chaos.Util.removePartsFromUrl(["session"]);window.location.reload()},bind:function(){JSM.overlay.RefreshWindow.superclass.bind.call(this)},unbind:function(){JSM.overlay.RefreshWindow.superclass.unbind.call(this);
this.refreshButtonEl=Ext.get(this.refreshButtonId);if(this.refreshButtonEl)this.refreshButtonEl.un("click",this.onRefreshButtonClick,this)}});Ext.namespace("JSM.overlay");JSM.overlay.SignUp=function(el,config){JSM.overlay.SignUp.superclass.constructor.call(this,el,config)};JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS="signup-success";JSM.overlay.SignUp.BLOCK_TYPE_VALIDATE_CARD=1;JSM.overlay.SignUp.BLOCK_TYPE_STILL_HAVE_TEASERS=2;
Chaos.extend(JSM.overlay.SignUp,JSM.Overlay,{name:"SignUp",getContentRoute:"Overlay/GetSignUpBlock",signUpSuccessName:"SignUpSuccess",validateCardSignUpSuccessName:"ValidateCardSignUpSuccess",signUpSuccessContentRoute:"Overlay/GetSignUpSuccessBlock",signUpSuccess2ContentRoute:"Overlay/GetSignUpSuccess2Block",autoLoad:true,formId:"signup_form",overlayBlockId:"overlay_signup",layout:null,signupButtonId:"signup_submit",signupButtonEl:undefined,signupBtnFreeId:"signup_button_free",signupBtnContentId:"signup_button_content",
userNameExistsId:"username_exists",usernameFieldId:"ajax_response",usernameFieldErrorId:"username_error",formErrorSel:".warning_tag",newNickRoute:"Validate/GetNewNick",nickCheckRoute:"Validate/CheckNick",nickId:"username",passwordId:"password",emailId:"email",formTokenId:"form_token_signup",usernameRefreshOpened:false,autoDestroy:true,autoDestroyElement:false,loginButtonId:"login_link",signupMainPageId:"signup_mainpage",signupSuccessPageId:"signup_success",isScrollingDisabled:true,usernameInputId:"username",
logErrors:false,errorRedirectRoute:"Signup/SignupMember",maxEmailCharLimitNumber:255,maxNameCharLimitNumber:16,maxCaptchaCharLimitNumber:7,hintContainerId:"hint_node",captchaInputId:"captcha",captchaImgId:"captchaimg",captchaBlockId:"captcha_block",captchaHintCls:"captchahint",durationTime:0.5,_signupForm:undefined,_validateCardSuccessPopup:undefined,_successPopup:undefined,init:function(el,config){if(!JSM.Session.checkCookieChanges())return;this.getContentParams={listPageId:Chaos.getMeta("listPageId")};
JSM.overlay.SignUp.superclass.init.call(this,el,config);Chaos.addEvents(JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS);if(!(this._loadingMask instanceof Chaos.Mask))this._loadingMask=new Chaos.Mask(this.element,{tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',appendTo:this.element,maskPosition:"local",isVisibleMask:true,maskOpacity:0.2,maskClass:"filter_mask",useCursor:true});this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,this)},onContentDisplayed:function(){Ext.fly(this.usernameInputId).focus();
this.signupButtonEl=Ext.get(this.signupButtonId);this.usernameFieldEl=Ext.get(this.usernameFieldId);this.usernameFieldErrorEl=Ext.get(this.usernameFieldErrorId);if(this.usernameFieldEl)this.usernameFieldEl.on("click",this.onUsernameClick,this);this.nickEl=Ext.get(this.nickId);this.usernameFieldErrorEl=Ext.get(this.usernameFieldErrorId);this.formTokenEl=Ext.get(this.formTokenId);if(this.nickEl){this.nickEl.on("blur",this.onNickBlur,this);this.nickEl.on("click",this.onNickClick,this)}this.loginButtonEl=
Ext.get(this.loginButtonId);if(this.loginButtonEl)this.loginButtonEl.on("click",this.onLoginButtonClick,this);this.setInstances()},setInstances:function(){var params=["username","password","email","form_token","captcha","captcha_id","submit_button","listPageId"];if(JSM.Util.isCurrentPage("chat.performer")){Ext.DomHelper.append(this.formId,{tag:"input",type:"hidden",name:"isOverlay",value:"0"});params.push("isOverlay");Ext.DomHelper.append(this.formId,{tag:"input",type:"hidden",name:"performerId",
value:window.location.pathname.split("chat/")[1]});params.push("performerId")}Chaos.Ajax.registerCommand("displayUsernameRefresh",this.displayUsernameRefresh,this);this.isValidForm=false;this._signupForm=new JSM.form.Form(this.formId,{scope:this,submitIfRemoteValid:true,formErrorSel:this.formErrorSel,isAjax:true,isBackConnNeeded:true,backConnCallback:"signupForm.backConnRequestCallback",requestParams:params,disableSubmitOnSubmit:true,hasCaptcha:true,useModalForGeneralErrors:false,errorHideDuration:0,
captchaConfig:{containerId:this.captchaBlockId,captchaImg:this.captchaImgId,captchaRefreshBtnId:"refresh_captcha",captchaUrl:"Captcha/GetCaptchaData",captchaId:"captcha_id",captchaInputId:this.captchaInputId},success:this.successSignUpCallBack});this._usernameCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxNameCharLimitNumber,hasWarningLimit:false,inputId:this.nickId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._usernameCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxNameCharLimitReached,this);this._passwordCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxNameCharLimitNumber,hasWarningLimit:false,inputId:this.passwordId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._passwordCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);this._emailCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxEmailCharLimitNumber,
hasWarningLimit:false,inputId:this.emailId,charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._emailCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxEmailCharLimitReached,this);this.captchaBlockEl=Ext.get(this.captchaBlockId);this.captchaInputEl=Ext.get(this.captchaInputId);this._captchaCharacterCounterCmp=new JSM.component.CharacterCounter(this.formId,{maxChar:this.maxCaptchaCharLimitNumber,hasWarningLimit:false,inputId:this.captchaInputId,
charInfoId:this.hintContainerId,isShowCounter:false,isMaxCharSound:true});this._captchaCharacterCounterCmp.on(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);this.nickEl.set({"autocomplete":"off"});Ext.get(this.emailId).set({"autocomplete":"off"});Chaos.Broadcaster.on("xdomain-response",this._signupForm.xDomainCallback,this._signupForm)},onLoginButtonClick:function(ev){ev.preventDefault();this.hide(this.showDuration,function(){this.destroyForm();
Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN,{scope:this,manageHistory:false})},true,this)},destroyForm:function(){if(this._signupForm){Chaos.Broadcaster.un("xdomain-response",this._signupForm.xDomainCallback,this._signupForm);this._signupForm.hideAllErrors();this._signupForm.hideHint();this._signupForm.unbind();this._signupForm.destroy();this._signupForm=undefined}},displayUsernameRefresh:function(param){if(param=="usernameExists")if(!this.usernameRefreshOpened){if(this.nickEl.dom.noShow==
true){this.nickEl.dom.noShow=false;return}TweenMax.fromTo(Ext.fly(this.userNameExistsId).dom,this.durationTime,{css:{top:"-20px",height:"0px",alpha:0}},{css:{top:"6px",height:"30px",alpha:1,display:"block"},onCompleteScope:this,onComplete:function(){this._signupForm.alignHints();this._signupForm.alignErrorLabels()}});this.onNewNickClick();this.usernameRefreshOpened=true;this._signupForm.disableForm(true)}if(!param)if(this.usernameRefreshOpened){this.usernameFieldErrorEl.display("none").setStyle("visibility",
"hidden");TweenMax.to(Ext.fly(this.userNameExistsId).dom,0.5,{css:{top:"-20px",height:"0px",alpha:0,display:"none"},onCompleteScope:this,onComplete:function(){this._signupForm.alignHints();this._signupForm.alignErrorLabels()}});this.usernameRefreshOpened=false;this._signupForm.disableForm(false)}},onNewNickClick:function(){var username=Ext.get(this.nickId).dom.value,newNickUrl=Chaos.Ajax.setXDomainUrl(Chaos.getUrl(this.newNickRoute,{},{nick:username},""),true);Chaos.Ajax.request({url:newNickUrl,method:"POST",
type:"json",xdomain:true,success:function(response){Ext.fly(this.usernameFieldId).dom.innerHTML=response.json.username},scope:this});return false},onUsernameClick:function(ev){ev.preventDefault();this.nickEl.dom.value=Ext.get(this.usernameFieldId).dom.innerHTML;this.nickEl.dom.noShow=true;this.displayUsernameRefresh(false)},onInputKeyup:function(ev,target){this.isValidForm=false},onNickBlur:function(ev,target){var nickValue=this.nickEl.getValue(),csrfTokenValue=this.formTokenEl.getValue(),paramObj=
{nick:nickValue,csrfToken:csrfTokenValue};if(nickValue!=""&&nickValue!=this.currentNickValue)this.checkNickAjaxRequest(paramObj,this.nickCheckRoute);if(Ext.fly(this.userNameExistsId).getStyle("display")=="block")this.usernameFieldErrorEl.fadeIn()},onNickClick:function(ev,target){this.currentNickValue=this.nickEl.getValue();this.usernameFieldErrorEl.display("none").setStyle("visibility","hidden")},checkNickAjaxRequest:function(paramObj,ajaxUrl){var self=this;Chaos.Ajax.request({type:"json",method:"post",
url:Chaos.getUrl(ajaxUrl,{},{},""),scope:this,params:paramObj,success:function(){self.displayUsernameRefresh(false);this.usernameFieldErrorEl.display("none").setStyle("visibility","hidden")},error:function(response){var userNameExists=response.json.command?"usernameExists":"";self.displayUsernameRefresh(false);self.displayUsernameRefresh(userNameExists);if(response.json.errors){self.usernameFieldErrorEl.select("p").item(0).dom.innerHTML=response.json.errors;self.usernameFieldErrorEl.dom.setAttribute("style",
"left: 542px; top: 5px;");self.usernameFieldErrorEl.fadeIn()}}})},successSignUpCallBack:function(scope,response,opts){if(this._loadingMask)this._loadingMask.show();var result=response.json;Chaos.Broadcaster.un("xdomain-response",this._signupForm.xDomainCallback,this._signupForm);if(result.data.isFreeRegEnabled==true){Chaos.fireEvent(JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS,response);this.hide(this.showDuration,function(){if(this._loadingMask)this._loadingMask.hide();this.destroyForm();if(result.data.blockType===
JSM.overlay.SignUp.BLOCK_TYPE_VALIDATE_CARD)this._validateCardSuccessPopup=new JSM.overlay.SignUpSuccess(this.element,{name:this.validateCardSignUpSuccessName,getContentUrl:Chaos.getUrl(this.signUpSuccessContentRoute,{},{},""),autoLoad:true,overlay:this.overlayId,xdomain:true,isValidateSignUpSuccess:true});else this._successPopup=new JSM.overlay.SignUpSuccess(this.element,{name:this.signUpSuccessName,getContentUrl:Chaos.getUrl(this.signUpSuccess2ContentRoute,{},{},""),autoLoad:true,overlay:this.overlayId,
xdomain:true})},true,this)}else location.href=Chaos.getUrl("Credit/Index",{},{},"")},errorSignUpCallBack:function(response){if(this._loadingMask)this._loadingMask.hide();var res=response.json.data;if(res.captchaId!=undefined){this.captchaHiddenInputEl.dom.value=res.captchaId;this.captchaContainerEl.select("img").item(0).dom.src=res.captchaImageUrl;this.captchaContainerEl.setStyle("display","block")}if(res.form_token!=undefined)this.formTokenInputEl.dom.value=res.form_token},onMaxNameCharLimitReached:function(){this.maxCharLimitReached();
this._signupForm.showHint(this.nickId,true);this._signupForm.getHintCmp().show();this._signupForm.getHintCmp().removeClass(this.captchaHintCls)},onMaxPasswordCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.passwordId,true);this._signupForm.getHintCmp().show();this._signupForm.getHintCmp().removeClass(this.captchaHintCls)},onMaxEmailCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.emailId,true);this._signupForm.getHintCmp().show();
this._signupForm.getHintCmp().removeClass(this.captchaHintCls)},onMaxCaptchaCharLimitReached:function(){this.maxCharLimitReached();this._signupForm.showHint(this.captchaInputEl,true);this._signupForm.getHintCmp().show();this._signupForm.getHintCmp().addClass(this.captchaHintCls)},maxCharLimitReached:function(){this.hintCmp=new JSM.window.HintPopup(this.hintContainerId,{el:{id:this.hintContainerId,cls:"info_tag"},mustRender:true,autoDestroy:true,autoDestroyElement:false})},hide:function(duration,callback,
keepOverlay,callbackScope){if(this._signupForm)this._signupForm.setSubmitEnabled(false);if(this._loadingMask)this._loadingMask.hide();JSM.overlay.SignUp.superclass.hide.call(this,duration,callback,keepOverlay,callbackScope)},onSignUpSuccess:function(response){if(Chaos.isDefined(response.json.data)&&Chaos.isDefined(response.json.data.trackingHtml)&&response.json.data.trackingHtml)Ext.DomHelper.append(Ext.getBody(),response.json.data.trackingHtml)},bind:function(){JSM.overlay.SignUp.superclass.bind.call(this);
Chaos.Broadcaster.on(JSM.overlay.SignUp.EVENT_SIGNUP_SUCCESS,this.onSignUpSuccess,this)},unbind:function(){JSM.overlay.SignUp.superclass.unbind.call(this);if(this._loadingMask)this._loadingMask.hide();if(this.usernameFieldEl)this.usernameFieldEl.un("click",this.onUsernameClick,this);if(this.nickEl){this.nickEl.un("blur",this.onNickBlur,this);this.nickEl.un("click",this.onNickClick,this)}if(this.loginButtonEl)this.loginButtonEl.un("click",this.onLoginButtonClick,this);this.un(JSM.Overlay.EVENT_CONTENT_DISPLAYED,
this.onContentDisplayed,this);if(this._usernameCharacterCounterCmp)this._usernameCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxNameCharLimitReached,this);if(this._passwordCharacterCounterCmp)this._passwordCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxPasswordCharLimitReached,this);if(this._emailCharacterCounterCmp)this._emailCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,
this.onMaxEmailCharLimitReached,this);if(this._captchaCharacterCounterCmp)this._captchaCharacterCounterCmp.un(JSM.component.CharacterCounter.EVENT_MAX_CHAR_LIMIT_REACHED,this.onMaxCaptchaCharLimitReached,this);this.destroyForm()}});Ext.namespace("JSM.overlay");JSM.overlay.SignUpSuccess=function(el,config){JSM.overlay.SignUpSuccess.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.overlay.SignUpSuccess,JSM.Overlay,{name:"SignUpSuccess",signupBtnContentId:"signup_button_content",isValidateSignUpSuccess:false,init:function(el,config){JSM.overlay.SignUpSuccess.superclass.init.call(this,el,config)},onGetFreeCreditsButtonClick:function(ev,target){ev.preventDefault();this.hide(this.showDuration,function(){Chaos.fireEvent(JSM.component.Header.GLOBALEVENT_CALL_PAYMENT_ROUTER,{scope:this})},true,this)},onContentDisplayed:function(){this._freeCreditsButton=Ext.get(this.signupBtnContentId);
this._freeCreditsButton.on("click",this.onGetFreeCreditsButtonClick,this)},onClosePopupClick:function(ev,target){if(this.isValidateSignUpSuccess)window.location.href=Chaos.getUrl("Index/Search",{category:Chaos.Config.get("superCategory"),searchText:Chaos.translate("private").toLowerCase()});else JSM.overlay.SignUpSuccess.superclass.onClosePopupClick.call(this)},bind:function(){JSM.overlay.SignUpSuccess.superclass.bind.call(this);this.on(JSM.Overlay.EVENT_CONTENT_DISPLAYED,this.onContentDisplayed,
this)},unbind:function(){JSM.overlay.SignUpSuccess.superclass.unbind.call(this);if(this._freeCreditsButton)this._freeCreditsButton.un("click",this.onGetFreeCreditsButtonClick,this)}});Ext.namespace("JSM.controller");JSM.controller.AwardsListPageController=function(el,config){JSM.controller.AwardsListPageController.superclass.constructor.call(this,el,config)};JSM.component.StatusUpdater.STATUS_CHANGE="status-changed";
Chaos.extend(JSM.controller.AwardsListPageController,JSM.controller.ListPageController,{name:"AwardsController",init:function(el,config){JSM.controller.AwardsListPageController.superclass.init.call(this,el,config)},onAddFavoriteButtonMouseDown:function(ev,target,options){if(Ext.isIE8)this.ListPagePlayer.isNoStopStream=true;else ev.stopEvent();this.ListPage.plugins["Favorites-plugin"].onUpdateCarouselFavoriteClick(ev,target,options,false)},onListPageThumbMouseOver:function(){return false},onListPageThumbMouseOut:function(){return false},
onListPageThumbMouseDown:function(){return false},hideVisibleNames:function(){return false}});Ext.namespace("JSM.controller");JSM.controller.MemberAuctionController=function(el,config){JSM.controller.MemberAuctionController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.MemberAuctionController,JSM.controller.ListPageController,{name:"MemberAuctionController",auctionPanelContainerId:"auction_panel_container",memberAuctionContentId:"memberauction_content",disconnectedMaskElementId:"memberauction_app_box",disconnectedMaskConfig:{isVisibleMask:true,maskOpacity:".3",top:160,height:380,maskPosition:"local",defaultZindex:100},auctionBottomArrowId:"game_rules_arrow_bottom",auctionPanelClosedCls:"auction_panel_closed",_isMemberAuctionConnected:false,
_slideButtonAuctionReady:false,init:function(el,config){JSM.controller.MemberAuctionController.superclass.init.call(this,el,config);Chaos.Broadcaster.on(JSM.component.Header.GLOBALEVENT_OVERLAY_QUICKBUY_TRANSACTION_SUCCESS,this.onQuickBuyTransactionSuccess,this)},onAuctionGetBlockSuccess:function(ev){this._appletParams=ev.appletParams;if(!(this._slideButtonAuction instanceof JSM.component.SlideButton)){this._slideButtonAuction=new JSM.component.SlideButton("auction_button",{slideButtonIconCls:"auction_btn_icon",
slideButtonTitleSel:"auction_btn_title",changeTitles:true});this.addComponent({component:this._slideButtonAuction,listeners:{"slidebutton-clicked":"onSlideButtonClick","slidebutton-ready":"onSlideButtonReady"}},"SlideButtonAuction")}},onAuctionGetBlockError:function(){},onConnectionReady:function(){this.SlideButtonAuction.displayLoader(false);this._isMemberAuctionConnected=true;this.MemberAuction.show();if(this._disconnectedMask)this._disconnectedMask.hide()},onConnectionClosed:function(){if(this.SlideButtonAuction instanceof
JSM.component.SlideButton)this.SlideButtonAuction.displayLoader(true);if(!(this._disconnectedMask instanceof Chaos.Mask))this._disconnectedMask=new Chaos.Mask(this.disconnectedMaskElementId,this.disconnectedMaskConfig);this._disconnectedMask.show()},onAuctionStart:function(){if(!this.MemberAuction.isVisible())if(this._slideButtonAuctionReady)this.SlideButtonAuction.showButtonMessage(Chaos.translate("auction started"),4E3)},onAuctionInProgress:function(){if(!this.MemberAuction.isVisible())if(this._slideButtonAuctionReady)this._slideButtonAuction.showButtonMessage(Chaos.translate("auction in progress"),
4E3)},onAuctionEnd:function(){if(!this.MemberAuction.isVisible())if(this._slideButtonAuctionReady)this._slideButtonAuction.showButtonMessage(Chaos.translate("auction ended"),4E3)},_showMemberAuction:function(){this.SlideButtonAuction.setActive(true);this.SlideButtonAuction.changeButtonTitle();this.SlideButtonAuction.slideIn(this.MemberAuction.show,this.MemberAuction)},onShowMemberAuction:function(){this._showMemberAuction()},onAuctionPanelBeforeShow:function(){},onAuctionPanelShow:function(){var _auctionBottomArrowEl=
Ext.get(this.auctionBottomArrowId);_auctionBottomArrowEl.removeClass(this.auctionPanelClosedCls);this.disableSlideButtons(false)},onAuctionPanelReOpen:function(){if(!this.MemberAuction.isVisible())this._showMemberAuction()},onAuctionPanelBeforeHide:function(){},onAuctionPanelHide:function(){if(this.SlideButtonAuction)this.SlideButtonAuction.hideButtonMessage()},onSlideButtonReady:function(){this._slideButtonAuctionReady=true;if(Chaos.Storage.get("open-auction-panel",true))this.onSlideButtonClick();
if(Ext.isIE7)this.restartListPagePlayer()},onSlideButtonClick:function(){if(!(this._externalMemberAuctionCmp instanceof memberauction.MemberAuction)&&this._appletParams){this.SlideButtonAuction.displayLoader(true);this.disableSlideButtons(true);var _params=this._appletParams,_self=this;_params.auctionStatus=function(){try{_self.MemberAuction.auctionStatus.apply(_self.MemberAuction,arguments)}catch(exception){console.error("@JS-ERROR: ",exception)}};_params.connectionInfo=function(){try{_self.MemberAuction.connectionInfo.apply(_self.MemberAuction,
arguments)}catch(exception){console.error("@JS-ERROR: ",exception)}};this._externalMemberAuctionCmp=new memberauction.MemberAuction(Ext.get(this.memberAuctionContentId).dom,_params)}else if(this._isMemberAuctionConnected)if(!this.MemberAuction.isVisible())try{this._showMemberAuction()}catch(exception){console.error("@JS-ERROR: ",exception)}else try{this.MemberAuction.hide()}catch(exception){console.error("@JS-ERROR: ",exception)}},onGetCreditsClick:function(){this._quickBuy=layout.header.startQuickBuy(JSM.overlay.QuickBuy.STATUS_OPEN);
this._quickBuy.on(JSM.overlay.QuickBuy.EVENT_SHOW,this.onQuickBuyShow,this);this._quickBuy.on(JSM.overlay.QuickBuy.EVENT_HIDE,this.onQuickBuyHide,this);this._quickBuy.on(JSM.overlay.QuickBuy.EVENT_REDIRECT,this.onQuickBuyRedirect,this);this._quickBuy.on(JSM.overlay.QuickBuy.EVENT_MINIMIZE,this.onQuickBuyMinimize,this)},onQuickBuyShow:function(){this._quickBuy.un(JSM.overlay.QuickBuy.EVENT_SHOW,this.onQuickBuyShow,this);this.MemberAuction.hide()},onQuickBuyHide:function(){this._quickBuy.un(JSM.overlay.QuickBuy.EVENT_HIDE,
this.onQuickBuyHide,this);this.MemberAuction.reOpen()},onQuickBuyMinimize:function(){this._quickBuy.un(JSM.overlay.QuickBuy.EVENT_HIDE,this.onQuickBuyHide,this);this._quickBuy.un(JSM.overlay.QuickBuy.EVENT_MINIMIZE,this.onQuickBuyMinimize,this);this.MemberAuction.reOpen()},onQuickBuyTransactionSuccess:function(){if(this._externalMemberAuctionCmp instanceof memberauction.MemberAuction)this._externalMemberAuctionCmp.memberAuctionDisconnect()},onQuickBuyRedirect:function(){Chaos.Storage.set("open-auction-panel",
true)},onMemberAuctionUnload:function(){try{this._externalMemberAuctionCmp.memberAuctionDisconnect()}catch(exception){console.error("@JS-ERROR: disconnect failed.",exception)}},onRefreshListpage:function(){if(this.MemberAuction&&this.MemberAuction.isVisible())this.MemberAuction.hide()},onOverlayOpen:function(){if(typeof this.MemberAuction!="undefined"&&this.MemberAuction.isVisible())this.MemberAuction.hide()},disableSlideButtons:function(disable){JSM.controller.MemberAuctionController.superclass.disableSlideButtons.call(this,
disable)}});Ext.namespace("JSM.controller");JSM.controller.SlidePanelListerController=function(el,config){JSM.controller.SlidePanelListerController.superclass.constructor.call(this,el,config)};
Chaos.extend(JSM.controller.SlidePanelListerController,JSM.controller.ListPageController,{name:"SlidePanelListerController",favoriteButtonId:"favorite_button",slideListerBlockId:"slide_lister_selector",activeClass:"active_button",slideListerSelectorId:"slide_lister_selector",slidePanelContainerId:"slidepanel_lister_container",auctionBottomArrowId:"game_rules_arrow_bottom",auctionPanelClosedCls:"auction_panel_closed",menuFavoritesBtnId:"menu_favorites",favoritesSelectButtonId:"favorites_select_button",
favoritesListerClass:"favorites",noFavoritesListerClass:"no_favorites",historySelectButtonId:"myhistory_select_button",historyListerClass:"myhistory",noHistoryListerClass:"no_myhistory",_panelListWindow:undefined,_favoritesSelectButtonEl:undefined,_historySelectButtonEl:undefined,_slideListerSelectorEl:undefined,_visibleWindow:undefined,_favoritesWindow:undefined,_historyWindow:undefined,_inProgressButtonMask:undefined,_actualSlidePanelWidth:undefined,init:function(el,config){this._favoritesOrderByStatusTranslate=
JSM.Util.unEscapeHTML(Chaos.translate("Activity status"));this._myHistoryTranslate=JSM.Util.unEscapeHTML(Chaos.translate("My History"));this.menuFavoritesBtnEl=Ext.get(this.menuFavoritesBtnId);this._slideListerSelectorEl=Ext.get(this.slideListerSelectorId);if(application.isLoggedIn())this._showSlideListerSelector();this._favoritesSelectButtonEl=Ext.get(this.favoritesSelectButtonId);this._historySelectButtonEl=Ext.get(this.historySelectButtonId);this._inProgressButtonMask=new Chaos.Mask(this.slideListerSelectorId,
{tpl:'<div id="{maskId}" class="{maskcls} {cls}"></div>',maskPosition:"local",isVisibleMask:false,maskClass:"popup_mask",useCursor:true,duration:0,useDefaultZindex:true,defaultZindex:4,resizeOnWindowResize:false});JSM.controller.SlidePanelListerController.superclass.init.call(this,el,config)},onLoggedIn:function(){this._showSlideListerSelector()},onSignupSuccess:function(){this._showSlideListerSelector()},onOverlayOpen:function(ev){if(this._panelListWindow&&this._panelListWindow.isVisible()&&ev.scope.name!=
"FreeChat")this._panelListWindow.hide()},onFavoritesSelectButtonClick:function(){if(!this._favoritesSelectButtonEl.hasClass(this.activeClass)){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();this._slidePanelListerPlayer.resetListPagePlayer()}this._inProgressButtonMask.show();this._favoritesSelectButtonEl.addClass(this.activeClass);if(this._historySelectButtonEl)this._historySelectButtonEl.removeClass(this.activeClass);this._favoritesWindow.getPanelListerList();this._panelListWindow=
this._favoritesWindow;this._slidePanelListerPlayer=this._favoritesPlayer}},onFavoritesContentComplete:function(){this._inProgressButtonMask.hide();this._showFavoritesContainer();this.SlideButtonFavorite.changeButtonTitle().changeButtonIcon();this._favoritesWindow.setAnimateStartPosition(this._actualSlidePanelWidth);if(this._historyWindow)this._historyWindow.setAnimateStartPosition(this._actualSlidePanelWidth)},onHistorySelectButtonClick:function(){if(!this._historySelectButtonEl.hasClass(this.activeClass)){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();
this._slidePanelListerPlayer.resetListPagePlayer()}this._inProgressButtonMask.show();this._historySelectButtonEl.addClass(this.activeClass);if(this._favoritesSelectButtonEl)this._favoritesSelectButtonEl.removeClass(this.activeClass);var _historyHasInstance=this._historyWindow instanceof JSM.component.MyHistory;if(!_historyHasInstance)this.setHistory();else{this._historyWindow.getPanelListerList();this._panelListWindow=this._historyWindow;this._slidePanelListerPlayer=this._historyPlayer}}},onHistoryContentComplete:function(){this._inProgressButtonMask.hide();
this._showHistoryContainer();if(this._favoritesPlayer){this._favoritesPlayer.stopFlashStream();this._favoritesPlayer.resetListPagePlayer()}this._favoritesWindow.setVisible(false);this._historyWindow.setVisible(true);this.SlideButtonFavorite.showButtonMessage(this._myHistoryTranslate).changeButtonIcon("history_btn_icon");this._historyWindow.setAnimateStartPosition(this._actualSlidePanelWidth);if(this._favoritesWindow)this._favoritesWindow.setAnimateStartPosition(this._actualSlidePanelWidth)},_showHistoryContainer:function(){if(this._visibleWindow!=
this._historyWindow){Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES,{action:JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_HISTORY});this._visibleWindow=this._historyWindow;this._historyWindow.displayContainer(true);this._favoritesWindow.displayContainer(false);this._historyWindow.setVisible(true);this._favoritesWindow.setVisible(false)}},_showFavoritesContainer:function(){if(this._visibleWindow!=this._favoritesWindow){Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES,
{action:JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_FAVORITES});this._visibleWindow=this._favoritesWindow;if(this._historyWindow){this._historyWindow.displayContainer(false);this._historyWindow.setVisible(false);if(this._historyPlayer){this._historyPlayer.stopFlashStream();this._historyPlayer.resetListPagePlayer()}}this._favoritesWindow.displayContainer(true);this._favoritesWindow.setVisible(true)}},onFavoriteButtonClick:function(ev,target){this.disableSlideButtons(true);this.openFavorites();
if(this.SlideButtonAuction)this.SlideButtonAuction.disable(true);if(this._favoritesWindow instanceof JSM.component.Favorites)this._panelListWindow=this._favoritesWindow},onFavoriteSlideButtonMouseOver:function(){},onFavoriteSlideButtonMouseOut:function(){this.SlideButtonFavorite.reset()},onOpenFavorites:function(){if(this.MemberAuction&&this.MemberAuction.isVisible())this.MemberAuction.hide(this.openFavorites,this);else this.openFavorites()},openFavorites:function(){Chaos.fireEvent(JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES,
{action:JSM.component.GoogleAnalytics.TRACK_TYPE_FAVORITES_SLIDER});var _auctionBottomArrowEl=Ext.get(this.auctionBottomArrowId);if(_auctionBottomArrowEl)_auctionBottomArrowEl.addClass(this.auctionPanelClosedCls);var _favoritesHasInstance=this._favoritesWindow instanceof JSM.component.Favorites;var _historyHasInstance=this._historyWindow instanceof JSM.component.MyHistory;if(!_favoritesHasInstance){if(this.SlideButtonFavorite){this.SlideButtonFavorite.slideIn();this.SlideButtonFavorite.displayLoader(true);
this.SlideButtonFavorite.unbind()}this.setFavorites()}else if(_favoritesHasInstance&&this._favoritesWindow.isVisible())this._favoritesWindow.hide();else if(_favoritesHasInstance&&!this._favoritesWindow.isVisible()){if(this._favoritesSelectButtonEl)this._favoritesSelectButtonEl.addClass(this.activeClass);if(this._historySelectButtonEl)Ext.fly(this._historySelectButtonEl).removeClass(this.activeClass);if(this.SlideButtonFavorite){this.SlideButtonFavorite.slideIn();this.SlideButtonFavorite.setActive(true);
this.SlideButtonFavorite.displayLoader(true);this.SlideButtonFavorite.unbind()}if(_historyHasInstance)this._historyWindow.emptyContent();this._favoritesWindow.emptyContent();this._favoritesWindow.getPanelListerList()}},setFavorites:function(){if(!(this._favoritesWindow instanceof JSM.component.Favorites)){this._favoritesWindow=new JSM.component.Favorites(this.slidePanelContainerId,{useFavoritesPlayer:true,plugins:{"ListPageBuilder":{boxTemplate:'<div id="favorite_container_{id}" class="small '+"{statusCls}"+
'">'+'<a id="favorite_{id}" class="perf_link" href="{href}">'+"{statusBlock}"+'<span class="add_favorite myfavorite">&nbsp;</span>'+'<span class="data">{flashInitData}</span>'+'<img id="favimg_{name}_{id}" src="{src}" alt="{name}" />'+"</a>"+"</div>"},"Favorites-plugin":{containerSel:"fav_container_"},"ModelName":{},"ImageChecker-plugin":{imageBoxSel:".small"}}});this._favoritesWindow.on(JSM.component.SlidePanelLister.CLICKED_ON_IMAGE,this.onFavoriteImagesClick,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.IMAGE_MOUSEOVER,
this.onFavoriteImagesMouseOver,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.PANEL_BEFORE_OPEN,this.onPanelBeforeOpen,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.PANEL_OPEN,this.onPanelOpen,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.PANEL_BEFORE_HIDE,this.onPanelBeforeHide,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.PANEL_HIDE,this.onPanelHide,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_SCROLL,this.onFavoritesScroll,
this);this._favoritesWindow.on(JSM.component.SlidePanelLister.PANEL_CONTENT_LOADED,this.onFavoritesPanelContentLoaded,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_LIST_REFRESH,this.onFavoritesListRefresh,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_AFTER_LIST_REFRESH,this.onFavoritesListAfterRefresh,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_LOGIN_CLICK,this.onFavoritesLoginClick,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_SLIDE_PANEL_LISTER_RESIZE,
this.onSlidePanelListerResize,this);this._favoritesWindow.on(JSM.plugin.Favorites.EVENT_FAVORITE_BUTTON_UPDATE,this.onFavoritesButtonUpdate,this);this._favoritesWindow.on(JSM.plugin.Favorites.EVENT_CHANGE_TO_ONLINE,this.onFavoritesChangeToOnline,this);this._favoritesWindow.on(JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME,this.onDisplayFavoritesModelName,this);this._favoritesWindow.on(JSM.component.SlidePanelLister.EVENT_CONTENT_COMPLETE,this.onFavoritesContentComplete,this)}this._panelListWindow=
this._favoritesWindow},setHistory:function(){if(!(this._historyWindow instanceof JSM.component.MyHistory)){this._historyWindow=new JSM.component.MyHistory(this.slidePanelContainerId,{useFavoritesPlayer:true,plugins:{"ListPageBuilder":{boxTemplate:'<div id="myhistory_container_{id}" class="small '+"{statusCls}"+'">'+'<a id="myhistory_{id}" class="perf_link" href="{href}">'+"{statusBlock}"+'<span class="data">{flashInitData}</span>'+'<span class="history_status history_type">{historyType}</span>'+'<span class="history_status history_time">{historyTime}</span>'+
'<img id="historyimg_{name}_{id}" src="{src}" alt="{name}" />'+"</a>"+"</div>"},"ModelName":{},"ImageChecker-plugin":{imageBoxSel:".small"}}});this._historyWindow.on(JSM.component.SlidePanelLister.CLICKED_ON_IMAGE,this.onFavoriteImagesClick,this),this._historyWindow.on(JSM.component.SlidePanelLister.IMAGE_MOUSEOVER,this.onFavoriteImagesMouseOver,this);this._historyWindow.on(JSM.component.SlidePanelLister.PANEL_BEFORE_OPEN,this.onPanelBeforeOpen,this);this._historyWindow.on(JSM.component.SlidePanelLister.PANEL_OPEN,
this.onPanelOpen,this);this._historyWindow.on(JSM.component.SlidePanelLister.PANEL_BEFORE_HIDE,this.onPanelBeforeHide,this);this._historyWindow.on(JSM.component.SlidePanelLister.PANEL_HIDE,this.onPanelHide,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_SCROLL,this.onFavoritesScroll,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_LOGIN_CLICK,this.onFavoritesLoginClick,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_SLIDE_PANEL_LISTER_RESIZE,this.onSlidePanelListerResize,
this);this._historyWindow.on(JSM.plugin.ModelName.EVENT_DISPLAY_MODEL_NAME,this.onDisplayFavoritesModelName,this);this._historyWindow.on(JSM.component.SlidePanelLister.PANEL_CONTENT_LOADED,this.onFavoritesPanelContentLoaded,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_LIST_REFRESH,this.onFavoritesListRefresh,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_AFTER_LIST_REFRESH,this.onFavoritesListAfterRefresh,this);this._historyWindow.on(JSM.component.SlidePanelLister.EVENT_CONTENT_COMPLETE,
this.onHistoryContentComplete,this)}this._panelListWindow=this._historyWindow},onFavoriteImagesClick:function(ev){var _targetEl=Ext.get(ev.target),_perfBox=_targetEl.dom.nodeName.toLowerCase()!="a"?Ext.get(_targetEl.parent("a")):Ext.get(_targetEl);this.ListPage.unSetHoverLayer(ev.ev,ev.target,{perfBox:_perfBox});if(this._panelListWindow){this._panelListWindow.panelListImageMouseOut(ev);this._panelListWindow.plugins.ModelName.hideVisibleNames(ev.ev,ev.target,{perfBox:_perfBox})}var modelObject=this.getModelDataFromTarget(ev.target);
this.FreeChat.onCallShowChat(modelObject.name);try{this._panelListWindow._slideListerPanel.setActive(false)}catch(exception){}},onFavoriteImagesMouseOver:function(ev,target,options){if(this._panelListWindow&&!this._inProgressButtonMask.isVisible()){if(typeof this.ListPage=="object")this.ListPage.setHoverLayer(ev,target,Ext.get(this._panelListWindow.panelListerMainContainerId));this._panelListWindow.plugins.ModelName.onThumbMouseOver(ev,options.favLink);if(this._panelListWindow.useFavoritesPlayer){if(this._panelListWindow==
this._favoritesWindow){if(!(this._favoritesPlayer instanceof JSM.component.ListPagePlayer))this._favoritesPlayer=new JSM.component.ListPagePlayer(this._panelListWindow.panelListerInnerContainerId,{flashPlayerConfig:{appendToId:"favorites_player",objectId:"FavoritesPlayer",objectName:"FavoritesPlayer",url:Chaos.Config.get("listPagePlayerUrl"),flashVars:Chaos.Config.get("listPagePlayerFlashVars")},useBodyOffsetTop:true,autoPlayerNeeded:false,perfContainerSel:"favorite_container_",perfLinkSel:"favorite_",
perfImgSel:"favimg_",defaultZIndex:1500,plugins:{"BackConn-plugin":{globalObjectId:"favoritesBackConnParams",globalMethods:["setListPagePlayerParams","startFlashStream"]}}});this._slidePanelListerPlayer=this._favoritesPlayer}else if(this._panelListWindow==this._historyWindow){if(!(this._historyPlayer instanceof JSM.component.ListPagePlayer))this._historyPlayer=new JSM.component.ListPagePlayer(this._panelListWindow.panelListerInnerContainerId,{flashPlayerConfig:{appendToId:"myhistory_player",objectId:"MyHistoryPlayer",
objectName:"MyHistoryPlayer",url:Chaos.Config.get("listPagePlayerUrl"),flashVars:Chaos.Config.get("listPagePlayerFlashVars")},useBodyOffsetTop:true,autoPlayerNeeded:false,perfContainerSel:"myhistory_container_",perfLinkSel:"myhistory_",perfImgSel:"historyimg_",defaultZIndex:1500,plugins:{"BackConn-plugin":{globalObjectId:"historyBackConnParams",globalMethods:["setListPagePlayerParams","startFlashStream"]}}});this._slidePanelListerPlayer=this._historyPlayer}this._slidePanelListerPlayer.onThumbsMouseout(ev);
if(Chaos.Util.isFullyVisible(Ext.get(options.favLink),this._panelListWindow.panelListerInnerContainerId))this._slidePanelListerPlayer.onThumbsMouseover(ev,options.favLink)}}},onThumbMouseOut:function(ev){if(this._slidePanelListerPlayer)this._slidePanelListerPlayer.onThumbsMouseout(ev);if(this._panelListWindow)this._panelListWindow.panelListImageMouseOut()},onPanelBeforeOpen:function(){this.stopRandomListPagePlayer()},onPanelOpen:function(){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();
this._slidePanelListerPlayer.resetListPagePlayer()}if(this.SlideButtonFavorite)this.SlideButtonFavorite.displayLoader(false);this.disableSlideButtons(false)},onPanelBeforeHide:function(){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.isPlayerEnabled=false;this._slidePanelListerPlayer.onThumbsMouseout();this._slidePanelListerPlayer.stopFlashStream();this._slidePanelListerPlayer.resetListPagePlayer();this._slidePanelListerPlayer.unbind();delete this._favoritesPlayer;delete this._historyPlayer;
delete this._slidePanelListerPlayer}if(this.SlideButtonAuction&&this.SlideButtonAuction.isDisabled())this.SlideButtonAuction.disable(false)},onPanelHide:function(){if(this.SlideButtonFavorite){this.SlideButtonFavorite.hideButtonMessage().changeButtonIcon();this.SlideButtonFavorite.bind()}},onFavoritesScroll:function(){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();this._slidePanelListerPlayer.resetListPagePlayer()}},onFavoritesLoginClick:function(){Chaos.fireEvent(JSM.layout.Basic.GLOBALEVENT_OPEN_OVERLAY_LOGIN,
this);this._loginFromFavorites=true},onSlidePanelListerResize:function(resizeObject){this._actualSlidePanelWidth=resizeObject.actualWidth},onFavoritesButtonUpdate:function(ev){},onDisplayFavoritesModelName:function(ev){this.ListPage.updateModelInfoBar("name",ev.display,ev)},onFavoritesChangeToOnline:function(ev){this.showFavoritesChangeToOnline(ev)},onFavoritesListRefresh:function(){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();this._slidePanelListerPlayer.resetListPagePlayer()}},
onFavoritesPanelContentLoaded:function(){},onFavoritesListAfterRefresh:function(){if(this._slidePanelListerPlayer){this._slidePanelListerPlayer.stopFlashStream();this._slidePanelListerPlayer.resetListPagePlayer()}},_showSlideListerSelector:function(){if(this._slideListerSelectorEl)this._slideListerSelectorEl.show()},disableSlideButtons:function(disable){JSM.controller.MemberAuctionController.superclass.disableSlideButtons.call(this,disable)},onSuccessRefreshListpage:function(){if(this._favoritesWindow)this._favoritesWindow.hide()},
bind:function(){JSM.controller.ListPageController.superclass.bind.call(this);if(this._favoritesSelectButtonEl)this._favoritesSelectButtonEl.on("click",this.onFavoritesSelectButtonClick,this);if(this._historySelectButtonEl)this._historySelectButtonEl.on("click",this.onHistorySelectButtonClick,this)},unbind:function(){JSM.controller.ListPageController.superclass.unbind.call(this);if(this._favoritesSelectButtonEl)this._favoritesSelectButtonEl.un("click",this.onFavoritesSelectButtonClick,this);if(this._historySelectButtonEl)this._historySelectButtonEl.un("click",
this.onHistorySelectButtonClick,this)}});
//@ sourceMappingURL=end-min.map