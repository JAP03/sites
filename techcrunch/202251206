PHTTP204.12.68.105"ä
:GET /xl/PROD/TrackingTags/tagextensions_base.js HTTP/1.1
Host: media.ibm.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.63 Safari/537.36
WReferer: http://techcrunch.com/wp-content/themes/vip/techcrunch-2013/_uac/adpage.html
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8
HCookie: PrefID=14-2300979929; CSList=11295194/11295206,0/0,0/0,0/0,0/0

*î
HTTP/1.1 200 OK
%Date: Mon, 24 Mar 2014 21:00:39 GMT
Server: Apache
gP3P: policyref="http://media.ibm.com/p3p.xml", CP="BUS COM COR DEVa DSP NAV NOI OUR PRE STA TAIa UNI"
bSet-Cookie: PrefID=14-2300979929; expires=Thu, 24 Mar 2016 09:00:39 GMT; path=/; domain=.ibm.com
x_transtrans: 17.2013.10.24
&Cache-Control: public, max-age=18000
(Expires: Tue, 25 Mar 2014 02:00:39 GMT
.Last-Modified: Fri, 07 Feb 2014 22:15:12 GMT
ETag: "aa8-52f55af0"
Accept-Ranges: bytes
Content-Length: 2728
Connection: close
(Content-Type: application/x-javascript
ª
if (te_tags == undefined || te_tags.run == undefined) {
	var te_tags = {
		plid: 0,
		crid: 0,
		cpid: 0,
		domain: '',
		spacedesc: '',
		prefid: '',
		ml_usec: '',
		txn_id: '',
		parsePath: function(link){
			 var parts = link.split('/');
			 if(parts.length > 5){
				te_tags.cpid = Math.abs(parts[5]);
			 }
		},
		ReplaceTokens: function(txtTag, extCreativeId)
		{
		if(txtTag)
		{
			var returnVal = txtTag;
			var internalSiteId = '';
				var internalSectionId = '';
				var Size = '';
				returnVal = returnVal.replace(/##ECRID##/g, extCreativeId);
				returnVal = returnVal.replace(/@@ML_DOMAIN@@/g,te_tags.domain);
				returnVal = returnVal.replace(/@@PREFID@@/g,te_tags.prefid);
				returnVal = returnVal.replace(/@@TXNID@@/g, te_tags.txn_id);	
			returnVal = returnVal.replace(/@@spacedesc@@/g,te_tags.spacedesc);

			returnVal = returnVal.replace(/@@CAID@@/g,te_tags.cpid);
			returnVal = returnVal.replace(/@@PLID@@/g,te_tags.plid);
			returnVal = returnVal.replace(/@@CRID@@/g,te_tags.crid);
			returnVal = returnVal.replace(/@@CR_GRP_ID@@/g,te_tags.cr_grp_id);
			returnVal = returnVal.replace(/@@USEC@@/g,te_tags.ml_usec);

			var arrayOfStrings = te_tags.spacedesc.split('_');
				
				if(arrayOfStrings != null && arrayOfStrings.length >3)
			{
					internalSiteId = arrayOfStrings[1];
					internalSectionId = arrayOfStrings[3];
					size = arrayOfStrings[2];
				returnVal = returnVal.replace(/@@SIID@@/g,internalSiteId);
					returnVal = returnVal.replace(/@@SEID@@/g,internalSectionId);
					returnVal = returnVal.replace(/@@SIZE@@/g,size);

			arrayOfStrings = size.split('x');
					var width = arrayOfStrings[0];
					var height = arrayOfStrings[1];
			returnVal = returnVal.replace(/@@WIDTH@@/g,width);
				returnVal = returnVal.replace(/@@HEIGHT@@/g,height);
					
				}
			
				return returnVal;
		}
			else
			{
			  return '';
			}
		},

		Run: function () {
			te_tags.RenderTag('script', te_tags.domain + 'xl/PROD/TrackingTags/fetch.cp?cache=no-cache&default=default_pl_cr.js&file=/' + te_tags.cpid + '/PlacementTags/' + te_tags.plid + '.js');
		},

		RenderTag: function (type, tagsrc) {

			var TagToRender;
			var bodytag = document.getElementsByTagName('body')[0] || document.body;

			switch (type) {
				case "iframe":
					TagToRender = document.createElement('iframe');
					TagToRender.src = tagsrc;

					break;
				case "script":
					TagToRender = document.createElement('script');
					TagToRender.src = tagsrc;

					break;
				case "image":
					TagToRender = document.createElement('img');
					TagToRender.src = tagsrc;

					break;
			}

			bodytag.appendChild(TagToRender);
		}
	};
}