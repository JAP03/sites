PHTTP159.153.236.12"¼
9GET /v/GkFkiw/include/js/header/header-2013.js HTTP/1.1
Host: www.pogo.com
Connection: keep-alive
Accept: */*
vUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.77 Safari/537.36
Referer: http://www.pogo.com/
$Accept-Encoding: gzip,deflate,sdch
!Accept-Language: en-US,en;q=0.8
ZCookie: prod.JID=01E04AF3B8857CC139C86143AEFEFDAD.000163; com.pogo.unid=6711753983749887

*€
HTTP/1.1 200 OK
Age: 2697      
%Date: Fri, 17 Jan 2014 14:10:13 GMT
(Expires: Wed, 16 Jan 2019 14:10:14 GMT
#Cache-Control: max-age=157680000 
Connection: Keep-Alive
Via: POGO-EDGE
ETag: W/"3573-1387221555000"
Server: Apache-Coyote/1.1
Accept-Ranges: bytes
.Last-Modified: Mon, 16 Dec 2013 19:19:15 GMT
Content-Type: text/javascript
Content-Length: 3573
÷
/*jslint browser: true, white: true*/
/*global jQuery*/

(function ($) {
	"use strict";

	$(document).ready(function() {
		// Player card v.s. player count
		// Check if both elements overlap
		var overlaps = (function () {
			// Get both elements position and width
			function getPositions( elem ) {
		        var pos, width, height;
		        pos = $( elem ).position();
		        width = $( elem ).width();
		        height = $( elem ).height();
		        return [ [ pos.left, pos.left + width ], [ pos.top, pos.top + height ] ];
			}
		    // Compare the positions
		    function comparePositions( p1, p2 ) {
		        var r1, r2;
		        r1 = p1[0] < p2[0] ? p1 : p2;
		        r2 = p1[0] < p2[0] ? p2 : p1;
		        return r1[1] > r2[0] || r1[0] === r2[0];
		    }

		    return function ( a, b ) {
		        var pos1 = getPositions( a ),
		            pos2 = getPositions( b );
		        return comparePositions( pos1[0], pos2[0] ) && comparePositions( pos1[1], pos2[1] );
		    };
		}());

		// Find in Player Card the Gifts, Guestbook, and Messages Notifications
		// When present, apply class="hasNote" to the PARENT which applies more left/right margin spacing between icons
		function headerNotification () {
			var noteWidth;
			$("#pogo-header div.pc-notification").each(function () {
				noteWidth = $(this).width(); // calculate width of <div class="number">
				if (noteWidth >= 11) { // if width is more than 11px, add wideNote class to parent div
					// $(this).parent().addClass("wideNote");
					$(this).parents('div.player-card-icon').css('margin-right', '20px');//.animate({marginRight, '12px'}, 300);
				} else {
					// $(this).parent().addClass("hasNote");
					$(this).parents('div.player-card-icon').css('margin-right', '12px');//animate({marginRight, '20px'}, 300);
				}
			});
		}
		headerNotification();

		// Delay display of Player Card bc of notifications
		//$('#player-card-div').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0}, 300);

		function narrowHeader() {
		var narrowHead,
			nameWidth,
			items,
			n,
			last_three,
			arrayOfGenres;		
			// Let's see if this is the narrow header 
			narrowHead = $("#pogo-header").hasClass("narrow");
			nameWidth = $("#name-auth").width(); // The width of #name-auth div
			if (narrowHead === true) { // Heck yeah, then...
				items = $('#catList li');
				arrayOfGenres=["fun"];//add to this list of genres
				n = items.length-1;
				last_three = items.slice(n-3,n).remove();
				last_three.each(function()//moving last 3 cat on 800px
				{
					if($.inArray($(this).attr('id'),arrayOfGenres)>-1){
						$('#subCatGenres').append(this);
						}
					else{
						$('#subCatMoreGames').append(this);
						}
				});
				if (nameWidth >= 115) { // Check if > 115 pixels, add "shortName" that applies pure css truncation
					$("#name-auth").addClass("shortName");
				}
			}
		}
		narrowHeader();

		// If both overlap, hide the spans
		if($('h1.player-count').length && $('#player-card-div').length){
			if(overlaps($('#player-card-div'), $('h1.player-count'))){
				$('h1.player-count').children('span.removableTextIFSpaceShort').hide();
			}
		}

		// Category belt - More submenu
		$('div#catBelt li#more a').click( function(event){
	        event.stopPropagation();
	        event.preventDefault();
	        $('div#subCategory').toggle();
	        $(this).parents('li').toggleClass('opened');
	    });

	    $(document).click( function(){
	        $('div#subCategory').hide();
	        $('div#catBelt li#more').removeClass('opened');
	    });

	});
}(jQuery));
